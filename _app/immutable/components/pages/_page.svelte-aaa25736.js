var Io=Object.defineProperty;var So=(e,t,n)=>t in e?Io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Oe=(e,t,n)=>(So(e,typeof t!="symbol"?t+"":t,n),n);import{S as st,i as ut,s as ft,k as he,l as de,m as B,h as b,n as d,b as K,B as Ne,I as rt,J as Z,g as He,t as pe,d as Ve,f as ue,K as et,L as fi,o as cr,M as _a,N as ze,e as ge,O as ci,v as Ue,w as Ce,x as je,y as Le,z as De,q as ke,r as Ee,G as H,u as We,A as Pn,a as Ae,c as Ie,P as ne,Q as re,p as zt,R as Br,T as on,U as hr,V as Ct,W as To,C as Mo,D as No,E as Co,F as Lo,X as hi,Y as Ni,Z as Ci,_ as di,$ as ma,a0 as Do,a1 as Li,a2 as Ro,a3 as Oo,a4 as Fo,a5 as Re,a6 as Ho,H as Lt,a7 as Ke,a8 as ga,a9 as en,aa as Vo,ab as Bo,ac as Po,ad as Go,ae as Uo,af as Tn}from"../../chunks/index-72a7da8c.js";import{w as _i,b as dn}from"../../chunks/paths-13e8d3f3.js";function Gn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Yo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pa(e){let t,n,r;e.length!==2?(t=Gn,n=(o,s)=>Gn(e(o),s),r=(o,s)=>e(o)-s):(t=e===Gn||e===Yo?e:zo,n=e,r=e);function i(o,s,u=0,f=o.length){if(u<f){if(t(s,s)!==0)return f;do{const h=u+f>>>1;n(o[h],s)<0?u=h+1:f=h}while(u<f)}return u}function a(o,s,u=0,f=o.length){if(u<f){if(t(s,s)!==0)return f;do{const h=u+f>>>1;n(o[h],s)<=0?u=h+1:f=h}while(u<f)}return u}function l(o,s,u=0,f=o.length){const h=i(o,s,u,f-1);return h>u&&r(o[h-1],s)>-r(o[h],s)?h-1:h}return{left:i,center:l,right:a}}function zo(){return 0}function Xo(e){return e===null?NaN:+e}const xo=pa(Gn),qo=xo.right;pa(Xo).center;const Ko=qo;function ya(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Pr extends Map{constructor(t,n=Jo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Di(this,t))}has(t){return super.has(Di(this,t))}set(t,n){return super.set(Wo(this,t),n)}delete(t){return super.delete(Zo(this,t))}}function Di({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Wo({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Zo({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Jo(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Wn(e){return e}function Gr(e,...t){return mi(e,Wn,Wn,t)}function Ur(e,t,...n){return mi(e,Wn,t,n)}function Ri(e,...t){return mi(e,Wn,Qo,t)}function Qo(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function mi(e,t,n,r){return function i(a,l){if(l>=r.length)return n(a);const o=new Pr,s=r[l++];let u=-1;for(const f of a){const h=s(f,++u,a),c=o.get(h);c?c.push(f):o.set(h,[f])}for(const[f,h]of o)o.set(f,i(h,l));return t(o)}(e,0)}var Yr=Math.sqrt(50),zr=Math.sqrt(10),Xr=Math.sqrt(2);function jo(e,t,n){var r,i=-1,a,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=va(e,t,n))===0||!isFinite(o))return[];if(o>0){let s=Math.round(e/o),u=Math.round(t/o);for(s*o<e&&++s,u*o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)*o}else{o=-o;let s=Math.round(e*o),u=Math.round(t*o);for(s/o<e&&++s,u/o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)/o}return r&&l.reverse(),l}function va(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Yr?10:a>=zr?5:a>=Xr?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Yr?10:a>=zr?5:a>=Xr?2:1)}function $o(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Yr?i*=10:a>=zr?i*=5:a>=Xr&&(i*=2),t<e?-i:i}function pn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Oi(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Zn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function es(e){return e}var kr=1,Un=2,xr=3,_n=4,Fi=1e-6;function ts(e){return"translate("+e+",0)"}function ns(e){return"translate(0,"+e+")"}function rs(e){return t=>+e(t)}function is(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function ls(){return!this.__axis}function gi(e,t){var n=[],r=null,i=null,a=6,l=6,o=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===kr||e===_n?-1:1,f=e===_n||e===Un?"x":"y",h=e===kr||e===xr?ts:ns;function c(_){var w=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,v=i==null?t.tickFormat?t.tickFormat.apply(t,n):es:i,g=Math.max(a,0)+o,p=t.range(),S=+p[0]+s,k=+p[p.length-1]+s,m=(t.bandwidth?is:rs)(t.copy(),s),E=_.selection?_.selection():_,U=E.selectAll(".domain").data([null]),Y=E.selectAll(".tick").data(w,t).order(),P=Y.exit(),z=Y.enter().append("g").attr("class","tick"),C=Y.select("line"),R=Y.select("text");U=U.merge(U.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Y=Y.merge(z),C=C.merge(z.append("line").attr("stroke","currentColor").attr(f+"2",u*a)),R=R.merge(z.append("text").attr("fill","currentColor").attr(f,u*g).attr("dy",e===kr?"0em":e===xr?"0.71em":"0.32em")),_!==E&&(U=U.transition(_),Y=Y.transition(_),C=C.transition(_),R=R.transition(_),P=P.transition(_).attr("opacity",Fi).attr("transform",function(x){return isFinite(x=m(x))?h(x+s):this.getAttribute("transform")}),z.attr("opacity",Fi).attr("transform",function(x){var O=this.parentNode.__axis;return h((O&&isFinite(O=O(x))?O:m(x))+s)})),P.remove(),U.attr("d",e===_n||e===Un?l?"M"+u*l+","+S+"H"+s+"V"+k+"H"+u*l:"M"+s+","+S+"V"+k:l?"M"+S+","+u*l+"V"+s+"H"+k+"V"+u*l:"M"+S+","+s+"H"+k),Y.attr("opacity",1).attr("transform",function(x){return h(m(x)+s)}),C.attr(f+"2",u*a),R.attr(f,u*g).text(v),E.filter(ls).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Un?"start":e===_n?"end":"middle"),E.each(function(){this.__axis=m})}return c.scale=function(_){return arguments.length?(t=_,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),c):n.slice()},c.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),c):r&&r.slice()},c.tickFormat=function(_){return arguments.length?(i=_,c):i},c.tickSize=function(_){return arguments.length?(a=l=+_,c):a},c.tickSizeInner=function(_){return arguments.length?(a=+_,c):a},c.tickSizeOuter=function(_){return arguments.length?(l=+_,c):l},c.tickPadding=function(_){return arguments.length?(o=+_,c):o},c.offset=function(_){return arguments.length?(s=+_,c):s},c}function as(e){return gi(Un,e)}function wa(e){return gi(xr,e)}function os(e){return gi(_n,e)}var ss={value:()=>{}};function pi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yn(n)}function Yn(e){this._=e}function us(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yn.prototype=pi.prototype={constructor:Yn,on:function(e,t){var n=this._,r=us(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=fs(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=Hi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Hi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function fs(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Hi(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ss,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var qr="http://www.w3.org/1999/xhtml";const Vi={svg:"http://www.w3.org/2000/svg",xhtml:qr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Vi.hasOwnProperty(t)?{space:Vi[t],local:e}:e}function cs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qr&&t.documentElement.namespaceURI===qr?t.createElement(e):t.createElementNS(n,e)}}function hs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ba(e){var t=dr(e);return(t.local?hs:cs)(t)}function ds(){}function yi(e){return e==null?ds:function(){return this.querySelector(e)}}function _s(e){typeof e!="function"&&(e=yi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=new Array(l),s,u,f=0;f<l;++f)(s=a[f])&&(u=e.call(s,s.__data__,f,a))&&("__data__"in s&&(u.__data__=s.__data__),o[f]=u);return new $e(r,this._parents)}function ms(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function gs(){return[]}function ka(e){return e==null?gs:function(){return this.querySelectorAll(e)}}function ps(e){return function(){return ms(e.apply(this,arguments))}}function ys(e){typeof e=="function"?e=ps(e):e=ka(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new $e(r,i)}function Ea(e){return function(){return this.matches(e)}}function Aa(e){return function(t){return t.matches(e)}}var vs=Array.prototype.find;function ws(e){return function(){return vs.call(this.children,e)}}function bs(){return this.firstElementChild}function ks(e){return this.select(e==null?bs:ws(typeof e=="function"?e:Aa(e)))}var Es=Array.prototype.filter;function As(){return Array.from(this.children)}function Is(e){return function(){return Es.call(this.children,e)}}function Ss(e){return this.selectAll(e==null?As:Is(typeof e=="function"?e:Aa(e)))}function Ts(e){typeof e!="function"&&(e=Ea(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new $e(r,this._parents)}function Ia(e){return new Array(e.length)}function Ms(){return new $e(this._enter||this._groups.map(Ia),this._parents)}function Jn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jn.prototype={constructor:Jn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ns(e){return function(){return e}}function Cs(e,t,n,r,i,a){for(var l=0,o,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new Jn(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function Ls(e,t,n,r,i,a,l){var o,s,u=new Map,f=t.length,h=a.length,c=new Array(f),_;for(o=0;o<f;++o)(s=t[o])&&(c[o]=_=l.call(s,s.__data__,o,t)+"",u.has(_)?i[o]=s:u.set(_,s));for(o=0;o<h;++o)_=l.call(e,a[o],o,a)+"",(s=u.get(_))?(r[o]=s,s.__data__=a[o],u.delete(_)):n[o]=new Jn(e,a[o]);for(o=0;o<f;++o)(s=t[o])&&u.get(c[o])===s&&(i[o]=s)}function Ds(e){return e.__data__}function Rs(e,t){if(!arguments.length)return Array.from(this,Ds);var n=t?Ls:Cs,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ns(e));for(var a=i.length,l=new Array(a),o=new Array(a),s=new Array(a),u=0;u<a;++u){var f=r[u],h=i[u],c=h.length,_=Os(e.call(f,f&&f.__data__,u,r)),w=_.length,v=o[u]=new Array(w),g=l[u]=new Array(w),p=s[u]=new Array(c);n(f,h,v,g,p,_,t);for(var S=0,k=0,m,E;S<w;++S)if(m=v[S]){for(S>=k&&(k=S+1);!(E=g[k])&&++k<w;);m._next=E||null}}return l=new $e(l,r),l._enter=o,l._exit=s,l}function Os(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fs(){return new $e(this._exit||this._groups.map(Ia),this._parents)}function Hs(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Vs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),o=new Array(i),s=0;s<l;++s)for(var u=n[s],f=r[s],h=u.length,c=o[s]=new Array(h),_,w=0;w<h;++w)(_=u[w]||f[w])&&(c[w]=_);for(;s<i;++s)o[s]=n[s];return new $e(o,this._parents)}function Bs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Ps(e){e||(e=Gs);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],o=l.length,s=i[a]=new Array(o),u,f=0;f<o;++f)(u=l[f])&&(s[f]=u);s.sort(t)}return new $e(i,this._parents).order()}function Gs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Us(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ys(){return Array.from(this)}function zs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function Xs(){let e=0;for(const t of this)++e;return e}function xs(){return!this.node()}function qs(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,o;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function Ks(e){return function(){this.removeAttribute(e)}}function Ws(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zs(e,t){return function(){this.setAttribute(e,t)}}function Js(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Qs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function js(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $s(e,t){var n=dr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ws:Ks:typeof t=="function"?n.local?js:Qs:n.local?Js:Zs)(n,t))}function Sa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function eu(e){return function(){this.style.removeProperty(e)}}function tu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function nu(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ru(e,t,n){return arguments.length>1?this.each((t==null?eu:typeof t=="function"?nu:tu)(e,t,n==null?"":n)):nn(this.node(),e)}function nn(e,t){return e.style.getPropertyValue(t)||Sa(e).getComputedStyle(e,null).getPropertyValue(t)}function iu(e){return function(){delete this[e]}}function lu(e,t){return function(){this[e]=t}}function au(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ou(e,t){return arguments.length>1?this.each((t==null?iu:typeof t=="function"?au:lu)(e,t)):this.node()[e]}function Ta(e){return e.trim().split(/^|\s+/)}function vi(e){return e.classList||new Ma(e)}function Ma(e){this._node=e,this._names=Ta(e.getAttribute("class")||"")}Ma.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Na(e,t){for(var n=vi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ca(e,t){for(var n=vi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function su(e){return function(){Na(this,e)}}function uu(e){return function(){Ca(this,e)}}function fu(e,t){return function(){(t.apply(this,arguments)?Na:Ca)(this,e)}}function cu(e,t){var n=Ta(e+"");if(arguments.length<2){for(var r=vi(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?fu:t?su:uu)(n,t))}function hu(){this.textContent=""}function du(e){return function(){this.textContent=e}}function _u(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function mu(e){return arguments.length?this.each(e==null?hu:(typeof e=="function"?_u:du)(e)):this.node().textContent}function gu(){this.innerHTML=""}function pu(e){return function(){this.innerHTML=e}}function yu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function vu(e){return arguments.length?this.each(e==null?gu:(typeof e=="function"?yu:pu)(e)):this.node().innerHTML}function wu(){this.nextSibling&&this.parentNode.appendChild(this)}function bu(){return this.each(wu)}function ku(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Eu(){return this.each(ku)}function Au(e){var t=typeof e=="function"?e:ba(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Iu(){return null}function Su(e,t){var n=typeof e=="function"?e:ba(e),r=t==null?Iu:typeof t=="function"?t:yi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Tu(){var e=this.parentNode;e&&e.removeChild(this)}function Mu(){return this.each(Tu)}function Nu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lu(e){return this.select(e?Cu:Nu)}function Du(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ru(e){return function(t){e.call(this,t,this.__data__)}}function Ou(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Fu(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Hu(e,t,n){return function(){var r=this.__on,i,a=Ru(t);if(r){for(var l=0,o=r.length;l<o;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Vu(e,t,n){var r=Ou(e+""),i,a=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var s=0,u=o.length,f;s<u;++s)for(i=0,f=o[s];i<a;++i)if((l=r[i]).type===f.type&&l.name===f.name)return f.value}return}for(o=t?Hu:Fu,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function La(e,t,n){var r=Sa(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Bu(e,t){return function(){return La(this,e,t)}}function Pu(e,t){return function(){return La(this,e,t.apply(this,arguments))}}function Gu(e,t){return this.each((typeof t=="function"?Pu:Bu)(e,t))}function*Uu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var Da=[null];function $e(e,t){this._groups=e,this._parents=t}function An(){return new $e([[document.documentElement]],Da)}function Yu(){return this}$e.prototype=An.prototype={constructor:$e,select:_s,selectAll:ys,selectChild:ks,selectChildren:Ss,filter:Ts,data:Rs,enter:Ms,exit:Fs,join:Hs,merge:Vs,selection:Yu,order:Bs,sort:Ps,call:Us,nodes:Ys,node:zs,size:Xs,empty:xs,each:qs,attr:$s,style:ru,property:ou,classed:cu,text:mu,html:vu,raise:bu,lower:Eu,append:Au,insert:Su,remove:Mu,clone:Lu,datum:Du,on:Vu,dispatch:Gu,[Symbol.iterator]:Uu};function ve(e){return typeof e=="string"?new $e([[document.querySelector(e)]],[document.documentElement]):new $e([[e]],Da)}function zu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Bi(e,t){if(e=zu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Kr={capture:!0,passive:!1};function Wr(e){e.preventDefault(),e.stopImmediatePropagation()}function Xu(e){var t=e.document.documentElement,n=ve(e).on("dragstart.drag",Wr,Kr);"onselectstart"in t?n.on("selectstart.drag",Wr,Kr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xu(e,t){var n=e.document.documentElement,r=ve(e).on("dragstart.drag",null);t&&(r.on("click.drag",Wr,Kr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function wi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ra(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function In(){}var wn=.7,Qn=1/wn,tn="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qu=/^#([0-9a-f]{3,8})$/,Ku=new RegExp(`^rgb\\(${tn},${tn},${tn}\\)$`),Wu=new RegExp(`^rgb\\(${mt},${mt},${mt}\\)$`),Zu=new RegExp(`^rgba\\(${tn},${tn},${tn},${bn}\\)$`),Ju=new RegExp(`^rgba\\(${mt},${mt},${mt},${bn}\\)$`),Qu=new RegExp(`^hsl\\(${bn},${mt},${mt}\\)$`),ju=new RegExp(`^hsla\\(${bn},${mt},${mt},${bn}\\)$`),Pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wi(In,Bt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gi,formatHex:Gi,formatHex8:$u,formatHsl:ef,formatRgb:Ui,toString:Ui});function Gi(){return this.rgb().formatHex()}function $u(){return this.rgb().formatHex8()}function ef(){return Oa(this).formatHsl()}function Ui(){return this.rgb().formatRgb()}function Bt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=qu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yi(t):n===3?new Je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Mn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Mn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ku.exec(e))?new Je(t[1],t[2],t[3],1):(t=Wu.exec(e))?new Je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Zu.exec(e))?Mn(t[1],t[2],t[3],t[4]):(t=Ju.exec(e))?Mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Qu.exec(e))?xi(t[1],t[2]/100,t[3]/100,1):(t=ju.exec(e))?xi(t[1],t[2]/100,t[3]/100,t[4]):Pi.hasOwnProperty(e)?Yi(Pi[e]):e==="transparent"?new Je(NaN,NaN,NaN,0):null}function Yi(e){return new Je(e>>16&255,e>>8&255,e&255,1)}function Mn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Je(e,t,n,r)}function tf(e){return e instanceof In||(e=Bt(e)),e?(e=e.rgb(),new Je(e.r,e.g,e.b,e.opacity)):new Je}function Zr(e,t,n,r){return arguments.length===1?tf(e):new Je(e,t,n,r==null?1:r)}function Je(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}wi(Je,Zr,Ra(In,{brighter(e){return e=e==null?Qn:Math.pow(Qn,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wn:Math.pow(wn,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Je(Vt(this.r),Vt(this.g),Vt(this.b),jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zi,formatHex:zi,formatHex8:nf,formatRgb:Xi,toString:Xi}));function zi(){return`#${Ht(this.r)}${Ht(this.g)}${Ht(this.b)}`}function nf(){return`#${Ht(this.r)}${Ht(this.g)}${Ht(this.b)}${Ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xi(){const e=jn(this.opacity);return`${e===1?"rgb(":"rgba("}${Vt(this.r)}, ${Vt(this.g)}, ${Vt(this.b)}${e===1?")":`, ${e})`}`}function jn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ht(e){return e=Vt(e),(e<16?"0":"")+e.toString(16)}function xi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ot(e,t,n,r)}function Oa(e){if(e instanceof ot)return new ot(e.h,e.s,e.l,e.opacity);if(e instanceof In||(e=Bt(e)),!e)return new ot;if(e instanceof ot)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,o=a-i,s=(a+i)/2;return o?(t===a?l=(n-r)/o+(n<r)*6:n===a?l=(r-t)/o+2:l=(t-n)/o+4,o/=s<.5?a+i:2-a-i,l*=60):o=s>0&&s<1?0:l,new ot(l,o,s,e.opacity)}function rf(e,t,n,r){return arguments.length===1?Oa(e):new ot(e,t,n,r==null?1:r)}function ot(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}wi(ot,rf,Ra(In,{brighter(e){return e=e==null?Qn:Math.pow(Qn,e),new ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wn:Math.pow(wn,e),new ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Je(Er(e>=240?e-240:e+120,i,r),Er(e,i,r),Er(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ot(qi(this.h),Nn(this.s),Nn(this.l),jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jn(this.opacity);return`${e===1?"hsl(":"hsla("}${qi(this.h)}, ${Nn(this.s)*100}%, ${Nn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qi(e){return e=(e||0)%360,e<0?e+360:e}function Nn(e){return Math.max(0,Math.min(1,e||0))}function Er(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bi=e=>()=>e;function lf(e,t){return function(n){return e+n*t}}function af(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function of(e){return(e=+e)==1?Fa:function(t,n){return n-t?af(t,n,e):bi(isNaN(t)?n:t)}}function Fa(e,t){var n=t-e;return n?lf(e,n):bi(isNaN(e)?t:e)}const $n=function e(t){var n=of(t);function r(i,a){var l=n((i=Zr(i)).r,(a=Zr(a)).r),o=n(i.g,a.g),s=n(i.b,a.b),u=Fa(i.opacity,a.opacity);return function(f){return i.r=l(f),i.g=o(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function sf(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function uf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ff(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=_r(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(o){for(l=0;l<r;++l)a[l]=i[l](o);return a}}function cf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function at(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hf(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=_r(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Jr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ar=new RegExp(Jr.source,"g");function df(e){return function(){return e}}function _f(e){return function(t){return e(t)+""}}function Ha(e,t){var n=Jr.lastIndex=Ar.lastIndex=0,r,i,a,l=-1,o=[],s=[];for(e=e+"",t=t+"";(r=Jr.exec(e))&&(i=Ar.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[l]?o[l]+=a:o[++l]=a),(r=r[0])===(i=i[0])?o[l]?o[l]+=i:o[++l]=i:(o[++l]=null,s.push({i:l,x:at(r,i)})),n=Ar.lastIndex;return n<t.length&&(a=t.slice(n),o[l]?o[l]+=a:o[++l]=a),o.length<2?s[0]?_f(s[0].x):df(t):(t=s.length,function(u){for(var f=0,h;f<t;++f)o[(h=s[f]).i]=h.x(u);return o.join("")})}function _r(e,t){var n=typeof t,r;return t==null||n==="boolean"?bi(t):(n==="number"?at:n==="string"?(r=Bt(t))?(t=r,$n):Ha:t instanceof Bt?$n:t instanceof Date?cf:uf(t)?sf:Array.isArray(t)?ff:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hf:at)(e,t)}function mf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Ki=180/Math.PI,Qr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Va(e,t,n,r,i,a){var l,o,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,s/=o),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ki,skewX:Math.atan(s)*Ki,scaleX:l,scaleY:o}}var Cn;function gf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Qr:Va(t.a,t.b,t.c,t.d,t.e,t.f)}function pf(e){return e==null||(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",e),!(e=Cn.transform.baseVal.consolidate()))?Qr:(e=e.matrix,Va(e.a,e.b,e.c,e.d,e.e,e.f))}function Ba(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,f,h,c,_,w){if(u!==h||f!==c){var v=_.push("translate(",null,t,null,n);w.push({i:v-4,x:at(u,h)},{i:v-2,x:at(f,c)})}else(h||c)&&_.push("translate("+h+t+c+n)}function l(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:at(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function o(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:at(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function s(u,f,h,c,_,w){if(u!==h||f!==c){var v=_.push(i(_)+"scale(",null,",",null,")");w.push({i:v-4,x:at(u,h)},{i:v-2,x:at(f,c)})}else(h!==1||c!==1)&&_.push(i(_)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),a(u.translateX,u.translateY,f.translateX,f.translateY,h,c),l(u.rotate,f.rotate,h,c),o(u.skewX,f.skewX,h,c),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(_){for(var w=-1,v=c.length,g;++w<v;)h[(g=c[w]).i]=g.x(_);return h.join("")}}}var yf=Ba(gf,"px, ","px)","deg)"),vf=Ba(pf,", ",")",")"),rn=0,mn=0,sn=0,Pa=1e3,er,gn,tr=0,Pt=0,mr=0,kn=typeof performance=="object"&&performance.now?performance:Date,Ga=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ki(){return Pt||(Ga(wf),Pt=kn.now()+mr)}function wf(){Pt=0}function nr(){this._call=this._time=this._next=null}nr.prototype=Ua.prototype={constructor:nr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ki():+n)+(t==null?0:+t),!this._next&&gn!==this&&(gn?gn._next=this:er=this,gn=this),this._call=e,this._time=n,jr()},stop:function(){this._call&&(this._call=null,this._time=1/0,jr())}};function Ua(e,t,n){var r=new nr;return r.restart(e,t,n),r}function bf(){ki(),++rn;for(var e=er,t;e;)(t=Pt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--rn}function Wi(){Pt=(tr=kn.now())+mr,rn=mn=0;try{bf()}finally{rn=0,Ef(),Pt=0}}function kf(){var e=kn.now(),t=e-tr;t>Pa&&(mr-=t,tr=e)}function Ef(){for(var e,t=er,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:er=n);gn=e,jr(r)}function jr(e){if(!rn){mn&&(mn=clearTimeout(mn));var t=e-Pt;t>24?(e<1/0&&(mn=setTimeout(Wi,e-kn.now()-mr)),sn&&(sn=clearInterval(sn))):(sn||(tr=kn.now(),sn=setInterval(kf,Pa)),rn=1,Ga(Wi))}}function Zi(e,t,n){var r=new nr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Af=pi("start","end","cancel","interrupt"),If=[],Ya=0,Ji=1,$r=2,zn=3,Qi=4,ei=5,Xn=6;function gr(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Sf(e,n,{name:t,index:r,group:i,on:Af,tween:If,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ya})}function Ei(e,t){var n=ct(e,t);if(n.state>Ya)throw new Error("too late; already scheduled");return n}function gt(e,t){var n=ct(e,t);if(n.state>zn)throw new Error("too late; already running");return n}function ct(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Sf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ua(a,0,n.time);function a(u){n.state=Ji,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,h,c,_;if(n.state!==Ji)return s();for(f in r)if(_=r[f],_.name===n.name){if(_.state===zn)return Zi(l);_.state===Qi?(_.state=Xn,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[f]):+f<t&&(_.state=Xn,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[f])}if(Zi(function(){n.state===zn&&(n.state=Qi,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=$r,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$r){for(n.state=zn,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(_=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=_);i.length=h+1}}function o(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=ei,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===ei&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Xn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function ti(e,t){var n=e.__transition,r,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>$r&&r.state<ei,r.state=Xn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function Tf(e){return this.each(function(){ti(this,e)})}function Mf(e,t){var n,r;return function(){var i=gt(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,o=r.length;l<o;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function Nf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=gt(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var o={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=o;break}s===u&&i.push(o)}a.tween=i}}function Cf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ct(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?Mf:Nf)(n,e,t))}function Ai(e,t,n){var r=e._id;return e.each(function(){var i=gt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ct(i,r).value[t]}}function za(e,t){var n;return(typeof t=="number"?at:t instanceof Bt?$n:(n=Bt(t))?(t=n,$n):Ha)(e,t)}function Lf(e){return function(){this.removeAttribute(e)}}function Df(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function Of(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function Ff(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Hf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Vf(e,t){var n=dr(e),r=n==="transform"?vf:za;return this.attrTween(e,typeof t=="function"?(n.local?Hf:Ff)(n,r,Ai(this,"attr."+e,t)):t==null?(n.local?Df:Lf)(n):(n.local?Of:Rf)(n,r,t))}function Bf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Pf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Gf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Pf(e,a)),n}return i._value=t,i}function Uf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Bf(e,a)),n}return i._value=t,i}function Yf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=dr(e);return this.tween(n,(r.local?Gf:Uf)(r,t))}function zf(e,t){return function(){Ei(this,e).delay=+t.apply(this,arguments)}}function Xf(e,t){return t=+t,function(){Ei(this,e).delay=t}}function xf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zf:Xf)(t,e)):ct(this.node(),t).delay}function qf(e,t){return function(){gt(this,e).duration=+t.apply(this,arguments)}}function Kf(e,t){return t=+t,function(){gt(this,e).duration=t}}function Wf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qf:Kf)(t,e)):ct(this.node(),t).duration}function Zf(e,t){if(typeof t!="function")throw new Error;return function(){gt(this,e).ease=t}}function Jf(e){var t=this._id;return arguments.length?this.each(Zf(t,e)):ct(this.node(),t).ease}function Qf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;gt(this,e).ease=n}}function jf(e){if(typeof e!="function")throw new Error;return this.each(Qf(this._id,e))}function $f(e){typeof e!="function"&&(e=Ea(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new At(r,this._parents,this._name,this._id)}function ec(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),o=0;o<a;++o)for(var s=t[o],u=n[o],f=s.length,h=l[o]=new Array(f),c,_=0;_<f;++_)(c=s[_]||u[_])&&(h[_]=c);for(;o<r;++o)l[o]=t[o];return new At(l,this._parents,this._name,this._id)}function tc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function nc(e,t,n){var r,i,a=tc(t)?Ei:gt;return function(){var l=a(this,e),o=l.on;o!==r&&(i=(r=o).copy()).on(t,n),l.on=i}}function rc(e,t){var n=this._id;return arguments.length<2?ct(this.node(),n).on.on(e):this.each(nc(n,e,t))}function ic(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function lc(){return this.on("end.remove",ic(this._id))}function ac(e){var t=this._name,n=this._id;typeof e!="function"&&(e=yi(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var o=r[l],s=o.length,u=a[l]=new Array(s),f,h,c=0;c<s;++c)(f=o[c])&&(h=e.call(f,f.__data__,c,o))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,gr(u[c],t,n,c,u,ct(f,n)));return new At(a,this._parents,t,n)}function oc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ka(e));for(var r=this._groups,i=r.length,a=[],l=[],o=0;o<i;++o)for(var s=r[o],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var c=e.call(f,f.__data__,h,s),_,w=ct(f,n),v=0,g=c.length;v<g;++v)(_=c[v])&&gr(_,t,n,v,c,w);a.push(c),l.push(f)}return new At(a,l,t,n)}var sc=An.prototype.constructor;function uc(){return new sc(this._groups,this._parents)}function fc(e,t){var n,r,i;return function(){var a=nn(this,e),l=(this.style.removeProperty(e),nn(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function Xa(e){return function(){this.style.removeProperty(e)}}function cc(e,t,n){var r,i=n+"",a;return function(){var l=nn(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function hc(e,t,n){var r,i,a;return function(){var l=nn(this,e),o=n(this),s=o+"";return o==null&&(s=o=(this.style.removeProperty(e),nn(this,e))),l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o))}}function dc(e,t){var n,r,i,a="style."+t,l="end."+a,o;return function(){var s=gt(this,e),u=s.on,f=s.value[a]==null?o||(o=Xa(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(l,i=f),s.on=r}}function _c(e,t,n){var r=(e+="")=="transform"?yf:za;return t==null?this.styleTween(e,fc(e,r)).on("end.style."+e,Xa(e)):typeof t=="function"?this.styleTween(e,hc(e,r,Ai(this,"style."+e,t))).each(dc(this._id,e)):this.styleTween(e,cc(e,r,t),n).on("end.style."+e,null)}function mc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function gc(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&mc(e,l,n)),r}return a._value=t,a}function pc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,gc(e,t,n==null?"":n))}function yc(e){return function(){this.textContent=e}}function vc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function wc(e){return this.tween("text",typeof e=="function"?vc(Ai(this,"text",e)):yc(e==null?"":e+""))}function bc(e){return function(t){this.textContent=e.call(this,t)}}function kc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&bc(i)),t}return r._value=e,r}function Ec(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,kc(e))}function Ac(){for(var e=this._name,t=this._id,n=xa(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)if(s=l[u]){var f=ct(s,t);gr(s,e,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new At(r,this._parents,e,n)}function Ic(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var o={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var u=gt(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(s)),u.on=t}),i===0&&a()})}var Sc=0;function At(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xa(){return++Sc}var yt=An.prototype;At.prototype={constructor:At,select:ac,selectAll:oc,selectChild:yt.selectChild,selectChildren:yt.selectChildren,filter:$f,merge:ec,selection:uc,transition:Ac,call:yt.call,nodes:yt.nodes,node:yt.node,size:yt.size,empty:yt.empty,each:yt.each,on:rc,attr:Vf,attrTween:Yf,style:_c,styleTween:pc,text:wc,textTween:Ec,remove:lc,tween:Cf,delay:xf,duration:Wf,ease:Jf,easeVarying:jf,end:Ic,[Symbol.iterator]:yt[Symbol.iterator]};function Tc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Mc={time:null,delay:0,duration:250,ease:Tc};function Nc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Cc(e){var t,n;e instanceof At?(t=e._id,e=e._name):(t=xa(),(n=Mc).time=ki(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&gr(s,e,t,u,l,n||Nc(s,t));return new At(r,this._parents,e,t)}An.prototype.interrupt=Tf;An.prototype.transition=Cc;const Ir=e=>()=>e;function Lc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Dc(e){e.stopImmediatePropagation()}function Sr(e){e.preventDefault(),e.stopImmediatePropagation()}var ji={name:"drag"},Tr={name:"space"},Xt={name:"handle"},xt={name:"center"};const{abs:$i,max:Pe,min:Ge}=Math;function el(e){return[+e[0],+e[1]]}function tl(e){return[el(e[0]),el(e[1])]}var xn={name:"x",handles:["w","e"].map(rr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Mr={name:"y",handles:["n","s"].map(rr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},vt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},nl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},rl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Rc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Oc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function rr(e){return{type:e}}function Fc(e){return!e.ctrlKey&&!e.button}function Hc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Vc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Nr(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Bc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Pc(){return Gc(xn)}function Gc(e){var t=Hc,n=Fc,r=Vc,i=!0,a=pi("start","brush","end"),l=6,o;function s(g){var p=g.property("__brush",v).selectAll(".overlay").data([rr("overlay")]);p.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",vt.overlay).merge(p).each(function(){var k=Nr(this).extent;ve(this).attr("x",k[0][0]).attr("y",k[0][1]).attr("width",k[1][0]-k[0][0]).attr("height",k[1][1]-k[0][1])}),g.selectAll(".selection").data([rr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",vt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=g.selectAll(".handle").data(e.handles,function(k){return k.type});S.exit().remove(),S.enter().append("rect").attr("class",function(k){return"handle handle--"+k.type}).attr("cursor",function(k){return vt[k.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",c).filter(r).on("touchstart.brush",c).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(g,p,S){g.tween?g.on("start.brush",function(k){f(this,arguments).beforestart().start(k)}).on("interrupt.brush end.brush",function(k){f(this,arguments).end(k)}).tween("brush",function(){var k=this,m=k.__brush,E=f(k,arguments),U=m.selection,Y=e.input(typeof p=="function"?p.apply(this,arguments):p,m.extent),P=_r(U,Y);function z(C){m.selection=C===1&&Y===null?null:P(C),u.call(k),E.brush()}return U!==null&&Y!==null?z:z(1)}):g.each(function(){var k=this,m=arguments,E=k.__brush,U=e.input(typeof p=="function"?p.apply(k,m):p,E.extent),Y=f(k,m).beforestart();ti(k),E.selection=U===null?null:U,u.call(k),Y.start(S).brush(S).end(S)})},s.clear=function(g,p){s.move(g,null,p)};function u(){var g=ve(this),p=Nr(this).selection;p?(g.selectAll(".selection").style("display",null).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?p[1][0]-l/2:p[0][0]-l/2}).attr("y",function(S){return S.type[0]==="s"?p[1][1]-l/2:p[0][1]-l/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?p[1][0]-p[0][0]+l:l}).attr("height",function(S){return S.type==="e"||S.type==="w"?p[1][1]-p[0][1]+l:l})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(g,p,S){var k=g.__brush.emitter;return k&&(!S||!k.clean)?k:new h(g,p,S)}function h(g,p,S){this.that=g,this.args=p,this.state=g.__brush,this.active=0,this.clean=S}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,p){return this.starting?(this.starting=!1,this.emit("start",g,p)):this.emit("brush",g),this},brush:function(g,p){return this.emit("brush",g,p),this},end:function(g,p){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,p)),this},emit:function(g,p,S){var k=ve(this.that).datum();a.call(g,this.that,new Lc(g,{sourceEvent:p,target:s,selection:e.output(this.state.selection),mode:S,dispatch:a}),k)}};function c(g){if(o&&!g.touches||!n.apply(this,arguments))return;var p=this,S=g.target.__data__.type,k=(i&&g.metaKey?S="overlay":S)==="selection"?ji:i&&g.altKey?xt:Xt,m=e===Mr?null:Rc[S],E=e===xn?null:Oc[S],U=Nr(p),Y=U.extent,P=U.selection,z=Y[0][0],C,R,x=Y[0][1],O,q,I=Y[1][0],M,te,oe=Y[1][1],ie,F,G=0,W=0,ae,_e=m&&E&&i&&g.shiftKey,me,X,J=Array.from(g.touches||[g],ee=>{const T=ee.identifier;return ee=Bi(ee,p),ee.point0=ee.slice(),ee.identifier=T,ee});ti(p);var D=f(p,arguments,!0).beforestart();if(S==="overlay"){P&&(ae=!0);const ee=[J[0],J[1]||J[0]];U.selection=P=[[C=e===Mr?z:Ge(ee[0][0],ee[1][0]),O=e===xn?x:Ge(ee[0][1],ee[1][1])],[M=e===Mr?I:Pe(ee[0][0],ee[1][0]),ie=e===xn?oe:Pe(ee[0][1],ee[1][1])]],J.length>1&&N(g)}else C=P[0][0],O=P[0][1],M=P[1][0],ie=P[1][1];R=C,q=O,te=M,F=ie;var Q=ve(p).attr("pointer-events","none"),fe=Q.selectAll(".overlay").attr("cursor",vt[S]);if(g.touches)D.moved=$,D.ended=V;else{var L=ve(g.view).on("mousemove.brush",$,!0).on("mouseup.brush",V,!0);i&&L.on("keydown.brush",j,!0).on("keyup.brush",be,!0),Xu(g.view)}u.call(p),D.start(g,k.name);function $(ee){for(const T of ee.changedTouches||[ee])for(const A of J)A.identifier===T.identifier&&(A.cur=Bi(T,p));if(_e&&!me&&!X&&J.length===1){const T=J[0];$i(T.cur[0]-T[0])>$i(T.cur[1]-T[1])?X=!0:me=!0}for(const T of J)T.cur&&(T[0]=T.cur[0],T[1]=T.cur[1]);ae=!0,Sr(ee),N(ee)}function N(ee){const T=J[0],A=T.point0;var le;switch(G=T[0]-A[0],W=T[1]-A[1],k){case Tr:case ji:{m&&(G=Pe(z-C,Ge(I-M,G)),R=C+G,te=M+G),E&&(W=Pe(x-O,Ge(oe-ie,W)),q=O+W,F=ie+W);break}case Xt:{J[1]?(m&&(R=Pe(z,Ge(I,J[0][0])),te=Pe(z,Ge(I,J[1][0])),m=1),E&&(q=Pe(x,Ge(oe,J[0][1])),F=Pe(x,Ge(oe,J[1][1])),E=1)):(m<0?(G=Pe(z-C,Ge(I-C,G)),R=C+G,te=M):m>0&&(G=Pe(z-M,Ge(I-M,G)),R=C,te=M+G),E<0?(W=Pe(x-O,Ge(oe-O,W)),q=O+W,F=ie):E>0&&(W=Pe(x-ie,Ge(oe-ie,W)),q=O,F=ie+W));break}case xt:{m&&(R=Pe(z,Ge(I,C-G*m)),te=Pe(z,Ge(I,M+G*m))),E&&(q=Pe(x,Ge(oe,O-W*E)),F=Pe(x,Ge(oe,ie+W*E)));break}}te<R&&(m*=-1,le=C,C=M,M=le,le=R,R=te,te=le,S in nl&&fe.attr("cursor",vt[S=nl[S]])),F<q&&(E*=-1,le=O,O=ie,ie=le,le=q,q=F,F=le,S in rl&&fe.attr("cursor",vt[S=rl[S]])),U.selection&&(P=U.selection),me&&(R=P[0][0],te=P[1][0]),X&&(q=P[0][1],F=P[1][1]),(P[0][0]!==R||P[0][1]!==q||P[1][0]!==te||P[1][1]!==F)&&(U.selection=[[R,q],[te,F]],u.call(p),D.brush(ee,k.name))}function V(ee){if(Dc(ee),ee.touches){if(ee.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else xu(ee.view,ae),L.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Q.attr("pointer-events","all"),fe.attr("cursor",vt.overlay),U.selection&&(P=U.selection),Bc(P)&&(U.selection=null,u.call(p)),D.end(ee,k.name)}function j(ee){switch(ee.keyCode){case 16:{_e=m&&E;break}case 18:{k===Xt&&(m&&(M=te-G*m,C=R+G*m),E&&(ie=F-W*E,O=q+W*E),k=xt,N(ee));break}case 32:{(k===Xt||k===xt)&&(m<0?M=te-G:m>0&&(C=R-G),E<0?ie=F-W:E>0&&(O=q-W),k=Tr,fe.attr("cursor",vt.selection),N(ee));break}default:return}Sr(ee)}function be(ee){switch(ee.keyCode){case 16:{_e&&(me=X=_e=!1,N(ee));break}case 18:{k===xt&&(m<0?M=te:m>0&&(C=R),E<0?ie=F:E>0&&(O=q),k=Xt,N(ee));break}case 32:{k===Tr&&(ee.altKey?(m&&(M=te-G*m,C=R+G*m),E&&(ie=F-W*E,O=q+W*E),k=xt):(m<0?M=te:m>0&&(C=R),E<0?ie=F:E>0&&(O=q),k=Xt),fe.attr("cursor",vt[S]),N(ee));break}default:return}Sr(ee)}}function _(g){f(this,arguments).moved(g)}function w(g){f(this,arguments).ended(g)}function v(){var g=this.__brush||{selection:null};return g.extent=tl(t.apply(this,arguments)),g.dim=e,g}return s.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Ir(tl(g)),s):t},s.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Ir(!!g),s):n},s.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Ir(!!g),s):r},s.handleSize=function(g){return arguments.length?(l=+g,s):l},s.keyModifiers=function(g){return arguments.length?(i=!!g,s):i},s.on=function(){var g=a.on.apply(a,arguments);return g===a?s:g},s}const ni=Math.PI,ri=2*ni,Ft=1e-6,Uc=ri-Ft;function ii(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function li(){return new ii}ii.prototype=li.prototype={constructor:ii,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,l=this._y1,o=n-e,s=r-t,u=a-e,f=l-t,h=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>Ft)if(!(Math.abs(f*o-s*u)>Ft)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var c=n-a,_=r-l,w=o*o+s*s,v=c*c+_*_,g=Math.sqrt(w),p=Math.sqrt(h),S=i*Math.tan((ni-Math.acos((w+h-v)/(2*g*p)))/2),k=S/p,m=S/g;Math.abs(k-1)>Ft&&(this._+="L"+(e+k*u)+","+(t+k*f)),this._+="A"+i+","+i+",0,0,"+ +(f*c>u*_)+","+(this._x1=e+m*o)+","+(this._y1=t+m*s)}},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n,a=!!a;var l=n*Math.cos(r),o=n*Math.sin(r),s=e+l,u=t+o,f=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>Ft||Math.abs(this._y1-u)>Ft)&&(this._+="L"+s+","+u),n&&(h<0&&(h=h%ri+ri),h>Uc?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+f+","+(this._x1=s)+","+(this._y1=u):h>Ft&&(this._+="A"+n+","+n+",0,"+ +(h>=ni)+","+f+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var il={},Cr={},Lr=34,un=10,Dr=13;function qa(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Yc(e,t){var n=qa(e);return function(r,i){return t(n(r),i,e)}}function ll(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function qe(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function zc(e){return e<0?"-"+qe(-e,6):e>9999?"+"+qe(e,6):qe(e,4)}function Xc(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":zc(e.getUTCFullYear())+"-"+qe(e.getUTCMonth()+1,2)+"-"+qe(e.getUTCDate(),2)+(i?"T"+qe(t,2)+":"+qe(n,2)+":"+qe(r,2)+"."+qe(i,3)+"Z":r?"T"+qe(t,2)+":"+qe(n,2)+":"+qe(r,2)+"Z":n||t?"T"+qe(t,2)+":"+qe(n,2)+"Z":"")}function xc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,c){var _,w,v=i(h,function(g,p){if(_)return _(g,p-1);w=g,_=c?Yc(g,c):qa(g)});return v.columns=w||[],v}function i(h,c){var _=[],w=h.length,v=0,g=0,p,S=w<=0,k=!1;h.charCodeAt(w-1)===un&&--w,h.charCodeAt(w-1)===Dr&&--w;function m(){if(S)return Cr;if(k)return k=!1,il;var U,Y=v,P;if(h.charCodeAt(Y)===Lr){for(;v++<w&&h.charCodeAt(v)!==Lr||h.charCodeAt(++v)===Lr;);return(U=v)>=w?S=!0:(P=h.charCodeAt(v++))===un?k=!0:P===Dr&&(k=!0,h.charCodeAt(v)===un&&++v),h.slice(Y+1,U-1).replace(/""/g,'"')}for(;v<w;){if((P=h.charCodeAt(U=v++))===un)k=!0;else if(P===Dr)k=!0,h.charCodeAt(v)===un&&++v;else if(P!==n)continue;return h.slice(Y,U)}return S=!0,h.slice(Y,w)}for(;(p=m())!==Cr;){for(var E=[];p!==il&&p!==Cr;)E.push(p),p=m();c&&(E=c(E,g++))==null||_.push(E)}return _}function a(h,c){return h.map(function(_){return c.map(function(w){return f(_[w])}).join(e)})}function l(h,c){return c==null&&(c=ll(h)),[c.map(f).join(e)].concat(a(h,c)).join(`
`)}function o(h,c){return c==null&&(c=ll(h)),a(h,c).join(`
`)}function s(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?Xc(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:l,formatBody:o,formatRows:s,formatRow:u,formatValue:f}}var qc=xc(","),Kc=qc.parse;function Wc(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Zc(e,t){return fetch(e,t).then(Wc)}function Jc(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Zc(t,n).then(function(i){return e(i,r)})}}var Ln=Jc(Kc);function Qc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ir(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ln(e){return e=ir(Math.abs(e)),e?e[1]:NaN}function jc(e,t){return function(n,r){for(var i=n.length,a=[],l=0,o=e[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),a.push(n.substring(i-=o,i+o)),!((s+=o+1)>r));)o=e[l=(l+1)%e.length];return a.reverse().join(t)}}function $c(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var eh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lr(e){if(!(t=eh.exec(e)))throw new Error("invalid format: "+e);var t;return new Ii({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lr.prototype=Ii.prototype;function Ii(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ii.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function th(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Ka;function nh(e,t){var n=ir(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Ka=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ir(e,Math.max(0,t+a-1))[0]}function al(e,t){var n=ir(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ol={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Qc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>al(e*100,t),r:al,s:nh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sl(e){return e}var ul=Array.prototype.map,fl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function rh(e){var t=e.grouping===void 0||e.thousands===void 0?sl:jc(ul.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?sl:$c(ul.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(h){h=lr(h);var c=h.fill,_=h.align,w=h.sign,v=h.symbol,g=h.zero,p=h.width,S=h.comma,k=h.precision,m=h.trim,E=h.type;E==="n"?(S=!0,E="g"):ol[E]||(k===void 0&&(k=12),m=!0,E="g"),(g||c==="0"&&_==="=")&&(g=!0,c="0",_="=");var U=v==="$"?n:v==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",Y=v==="$"?r:/[%p]/.test(E)?l:"",P=ol[E],z=/[defgprs%]/.test(E);k=k===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function C(R){var x=U,O=Y,q,I,M;if(E==="c")O=P(R)+O,R="";else{R=+R;var te=R<0||1/R<0;if(R=isNaN(R)?s:P(Math.abs(R),k),m&&(R=th(R)),te&&+R==0&&w!=="+"&&(te=!1),x=(te?w==="("?w:o:w==="-"||w==="("?"":w)+x,O=(E==="s"?fl[8+Ka/3]:"")+O+(te&&w==="("?")":""),z){for(q=-1,I=R.length;++q<I;)if(M=R.charCodeAt(q),48>M||M>57){O=(M===46?i+R.slice(q+1):R.slice(q))+O,R=R.slice(0,q);break}}}S&&!g&&(R=t(R,1/0));var oe=x.length+R.length+O.length,ie=oe<p?new Array(p-oe+1).join(c):"";switch(S&&g&&(R=t(ie+R,ie.length?p-O.length:1/0),ie=""),_){case"<":R=x+R+O+ie;break;case"=":R=x+ie+R+O;break;case"^":R=ie.slice(0,oe=ie.length>>1)+x+R+O+ie.slice(oe);break;default:R=ie+x+R+O;break}return a(R)}return C.toString=function(){return h+""},C}function f(h,c){var _=u((h=lr(h),h.type="f",h)),w=Math.max(-8,Math.min(8,Math.floor(ln(c)/3)))*3,v=Math.pow(10,-w),g=fl[8+w/3];return function(p){return _(v*p)+g}}return{format:u,formatPrefix:f}}var Dn,Dt,Wa;ih({thousands:",",grouping:[3],currency:["$",""]});function ih(e){return Dn=rh(e),Dt=Dn.format,Wa=Dn.formatPrefix,Dn}function lh(e){return Math.max(0,-ln(Math.abs(e)))}function ah(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ln(t)/3)))*3-ln(Math.abs(e)))}function oh(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ln(t)-ln(e))+1}function sh(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function uh(){return this.eachAfter(sh)}function fh(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function ch(e,t){for(var n=this,r=[n],i,a,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function hh(e,t){for(var n=this,r=[n],i=[],a,l,o,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(l=0,o=a.length;l<o;++l)r.push(a[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function dh(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function _h(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function mh(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function gh(e){for(var t=this,n=ph(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function ph(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function yh(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function vh(){return Array.from(this)}function wh(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function bh(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*kh(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Za(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Ih)):t===void 0&&(t=Ah);for(var n=new En(e),r,i=[n],a,l,o,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,o=s-1;o>=0;--o)i.push(a=l[o]=new En(l[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(Ja)}function Eh(){return Za(this).eachBefore(Sh)}function Ah(e){return e.children}function Ih(e){return Array.isArray(e)?e[1]:null}function Sh(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Ja(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function En(e){this.data=e,this.depth=this.height=0,this.parent=null}En.prototype=Za.prototype={constructor:En,count:uh,each:fh,eachAfter:hh,eachBefore:ch,find:dh,sum:_h,sort:mh,path:gh,ancestors:yh,descendants:vh,leaves:wh,links:bh,copy:Eh,[Symbol.iterator]:kh};function Rr(e){return e==null?null:Qa(e)}function Qa(e){if(typeof e!="function")throw new Error;return e}function fn(){return 0}function cn(e){return function(){return e}}function Th(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Mh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(r-t)/e.value;++o<s;)l=a[o],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var Nh={depth:-1},cl={},Or={};function Ch(e){return e.id}function Lh(e){return e.parentId}function Dh(){var e=Ch,t=Lh,n;function r(i){var a=Array.from(i),l=e,o=t,s,u,f,h,c,_,w,v,g=new Map;if(n!=null){const p=a.map((m,E)=>Rh(n(m,E,i))),S=p.map(hl),k=new Set(p).add("");for(const m of S)k.has(m)||(k.add(m),p.push(m),S.push(hl(m)),a.push(Or));l=(m,E)=>p[E],o=(m,E)=>S[E]}for(f=0,s=a.length;f<s;++f)u=a[f],_=a[f]=new En(u),(w=l(u,f,i))!=null&&(w+="")&&(v=_.id=w,g.set(v,g.has(v)?cl:_)),(w=o(u,f,i))!=null&&(w+="")&&(_.parent=w);for(f=0;f<s;++f)if(_=a[f],w=_.parent){if(c=g.get(w),!c)throw new Error("missing: "+w);if(c===cl)throw new Error("ambiguous: "+w);c.children?c.children.push(_):c.children=[_],_.parent=c}else{if(h)throw new Error("multiple roots");h=_}if(!h)throw new Error("no root");if(n!=null){for(;h.data===Or&&h.children.length===1;)h=h.children[0],--s;for(let p=a.length-1;p>=0&&(_=a[p],_.data===Or);--p)_.data=null}if(h.parent=Nh,h.eachBefore(function(p){p.depth=p.parent.depth+1,--s}).eachBefore(Ja),h.parent=null,s>0)throw new Error("cycle");return h}return r.id=function(i){return arguments.length?(e=Rr(i),r):e},r.parentId=function(i){return arguments.length?(t=Rr(i),r):t},r.path=function(i){return arguments.length?(n=Rr(i),r):n},r}function Rh(e){e=`${e}`;let t=e.length;return ai(e,t-1)&&!ai(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function hl(e){let t=e.length;if(t<2)return"";for(;--t>1&&!ai(e,t););return e.slice(0,t)}function ai(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Oh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(i-n)/e.value;++o<s;)l=a[o],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var Fh=(1+Math.sqrt(5))/2;function Hh(e,t,n,r,i,a){for(var l=[],o=t.children,s,u,f=0,h=0,c=o.length,_,w,v=t.value,g,p,S,k,m,E,U;f<c;){_=i-n,w=a-r;do g=o[h++].value;while(!g&&h<c);for(p=S=g,E=Math.max(w/_,_/w)/(v*e),U=g*g*E,m=Math.max(S/U,U/p);h<c;++h){if(g+=u=o[h].value,u<p&&(p=u),u>S&&(S=u),U=g*g*E,k=Math.max(S/U,U/p),k>m){g-=u;break}m=k}l.push(s={value:g,dice:_<w,children:o.slice(f,h)}),s.dice?Mh(s,n,r,i,v?r+=w*g/v:a):Oh(s,n,r,v?n+=_*g/v:i,a),v-=g,f=h}return l}const Vh=function e(t){function n(r,i,a,l,o){Hh(t,r,i,a,l,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Fh);function Bh(){var e=Vh,t=!1,n=1,r=1,i=[0],a=fn,l=fn,o=fn,s=fn,u=fn;function f(c){return c.x0=c.y0=0,c.x1=n,c.y1=r,c.eachBefore(h),i=[0],t&&c.eachBefore(Th),c}function h(c){var _=i[c.depth],w=c.x0+_,v=c.y0+_,g=c.x1-_,p=c.y1-_;g<w&&(w=g=(w+g)/2),p<v&&(v=p=(v+p)/2),c.x0=w,c.y0=v,c.x1=g,c.y1=p,c.children&&(_=i[c.depth+1]=a(c)/2,w+=u(c)-_,v+=l(c)-_,g-=o(c)-_,p-=s(c)-_,g<w&&(w=g=(w+g)/2),p<v&&(v=p=(v+p)/2),e(c,w,v,g,p))}return f.round=function(c){return arguments.length?(t=!!c,f):t},f.size=function(c){return arguments.length?(n=+c[0],r=+c[1],f):[n,r]},f.tile=function(c){return arguments.length?(e=Qa(c),f):e},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(a=typeof c=="function"?c:cn(+c),f):a},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(l=typeof c=="function"?c:cn(+c),f):l},f.paddingRight=function(c){return arguments.length?(o=typeof c=="function"?c:cn(+c),f):o},f.paddingBottom=function(c){return arguments.length?(s=typeof c=="function"?c:cn(+c),f):s},f.paddingLeft=function(c){return arguments.length?(u=typeof c=="function"?c:cn(+c),f):u},f}function Ph(e,t,n,r,i){var a=e.children,l,o=a.length,s,u=new Array(o+1);for(u[0]=s=l=0;l<o;++l)u[l+1]=s+=a[l].value;f(0,o,e.value,t,n,r,i);function f(h,c,_,w,v,g,p){if(h>=c-1){var S=a[h];S.x0=w,S.y0=v,S.x1=g,S.y1=p;return}for(var k=u[h],m=_/2+k,E=h+1,U=c-1;E<U;){var Y=E+U>>>1;u[Y]<m?E=Y+1:U=Y}m-u[E-1]<u[E]-m&&h+1<E&&--E;var P=u[E]-k,z=_-P;if(g-w>p-v){var C=_?(w*z+g*P)/_:g;f(h,E,P,w,v,C,p),f(E,c,z,C,v,g,p)}else{var R=_?(v*z+p*P)/_:p;f(h,E,P,w,v,g,R),f(E,c,z,w,R,g,p)}}}function ja(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const dl=Symbol("implicit");function oi(){var e=new Pr,t=[],n=[],r=dl;function i(a){let l=e.get(a);if(l===void 0){if(r!==dl)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Pr;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return oi(t,n).unknown(r)},ja.apply(i,arguments),i}function Gh(e){return function(){return e}}function Uh(e){return+e}var _l=[0,1];function Qt(e){return e}function si(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Gh(isNaN(t)?NaN:.5)}function Yh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function zh(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=si(i,r),a=n(l,a)):(r=si(r,i),a=n(a,l)),function(o){return a(r(o))}}function Xh(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=si(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(o){var s=Ko(e,o,1,r)-1;return a[s](i[s](o))}}function xh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function qh(){var e=_l,t=_l,n=_r,r,i,a,l=Qt,o,s,u;function f(){var c=Math.min(e.length,t.length);return l!==Qt&&(l=Yh(e[0],e[c-1])),o=c>2?Xh:zh,s=u=null,h}function h(c){return c==null||isNaN(c=+c)?a:(s||(s=o(e.map(r),t,n)))(r(l(c)))}return h.invert=function(c){return l(i((u||(u=o(t,e.map(r),at)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,Uh),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=mf,f()},h.clamp=function(c){return arguments.length?(l=c?!0:Qt,f()):l!==Qt},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(a=c,h):a},function(c,_){return r=c,i=_,f()}}function Kh(){return qh()(Qt,Qt)}function Wh(e,t,n,r){var i=$o(e,t,n),a;switch(r=lr(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=ah(i,l))&&(r.precision=a),Wa(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=oh(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=lh(i))&&(r.precision=a-(r.type==="%")*2);break}}return Dt(r)}function Zh(e){var t=e.domain;return e.ticks=function(n){var r=t();return jo(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Wh(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],o=r[a],s,u,f=10;for(o<l&&(u=l,l=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=va(l,o,n),u===s)return r[i]=l,r[a]=o,t(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;s=u}return e},e}function yn(){var e=Kh();return e.copy=function(){return xh(e,yn())},ja.apply(e,arguments),Zh(e)}function Jh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const ml=Jh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function jt(e,t,n){this.k=e,this.x=t,this.y=n}jt.prototype={constructor:jt,scale:function(e){return e===1?this:new jt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new jt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new jt(1,0,0);jt.prototype;function Qh(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function jh(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=he("div"),this.h()},l(i){t=de(i,"DIV",{class:!0});var a=B(t);a.forEach(b),this.h()},h(){d(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,a){K(i,t,a),t.innerHTML=n},p(i,[a]){a&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),a&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&d(t,"class",r)},i:Ne,o:Ne,d(i){i&&b(t)}}}function $h(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:a=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,f="";return e.$$set=h=>{"isActive"in h&&n(4,r=h.isActive),"isFirst"in h&&n(5,i=h.isFirst),"isHover"in h&&n(6,a=h.isHover),"isSelectable"in h&&n(7,l=h.isSelectable),"getOptionLabel"in h&&n(0,o=h.getOptionLabel),"item"in h&&n(1,s=h.item),"filterText"in h&&n(2,u=h.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const h=[];r&&h.push("active"),i&&h.push("first"),a&&h.push("hover"),s.isGroupHeader&&h.push("groupHeader"),s.isGroupItem&&h.push("groupItem"),l||h.push("notSelectable"),n(3,f=h.join(" "))}},[o,s,u,f,r,i,a,l]}class $a extends st{constructor(t){super(),ut(this,t,$h,jh,ft,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function gl(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function e0(e){let t,n,r=e[1],i=[];for(let o=0;o<r.length;o+=1)i[o]=vl(gl(e,r,o));const a=o=>pe(i[o],1,1,()=>{i[o]=null});let l=null;return r.length||(l=pl(e)),{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=ge(),l&&l.c()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);t=ge(),l&&l.l(o)},m(o,s){for(let u=0;u<i.length;u+=1)i[u].m(o,s);K(o,t,s),l&&l.m(o,s),n=!0},p(o,s){if(s[0]&114390){r=o[1];let u;for(u=0;u<r.length;u+=1){const f=gl(o,r,u);i[u]?(i[u].p(f,s),ue(i[u],1)):(i[u]=vl(f),i[u].c(),ue(i[u],1),i[u].m(t.parentNode,t))}for(He(),u=r.length;u<i.length;u+=1)a(u);Ve(),!r.length&&l?l.p(o,s):r.length?l&&(l.d(1),l=null):(l=pl(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let s=0;s<r.length;s+=1)ue(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)pe(i[s]);n=!1},d(o){ci(i,o),o&&b(t),l&&l.d(o)}}}function t0(e){let t,n,r;var i=e[3];function a(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[i0,({item:o,i:s})=>({41:o,42:s}),({item:o,i:s})=>[0,(o?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=Ue(i,a(e))),{c(){t&&Ce(t.$$.fragment),n=ge()},l(l){t&&je(t.$$.fragment,l),n=ge()},m(l,o){t&&Le(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&2&&(s.items=l[1]),o[0]&256&&(s.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(s.$$scope={dirty:o,ctx:l}),i!==(i=l[3])){if(t){He();const u=t;pe(u.$$.fragment,1,0,()=>{De(u,1)}),Ve()}i?(t=Ue(i,a(l)),Ce(t.$$.fragment),ue(t.$$.fragment,1),Le(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&ue(t.$$.fragment,l),r=!0)},o(l){t&&pe(t.$$.fragment,l),r=!1},d(l){l&&b(n),t&&De(t,l)}}}function pl(e){let t,n=!e[11]&&yl(e);return{c(){n&&n.c(),t=ge()},l(r){n&&n.l(r),t=ge()},m(r,i){n&&n.m(r,i),K(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=yl(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&b(t)}}}function yl(e){let t,n;return{c(){t=he("div"),n=ke(e[12]),this.h()},l(r){t=de(r,"DIV",{class:!0});var i=B(t);n=Ee(i,e[12]),i.forEach(b),this.h()},h(){d(t,"class","empty svelte-1uyqfml")},m(r,i){K(r,t,i),H(t,n)},p(r,i){i[0]&4096&&We(n,r[12])},d(r){r&&b(t)}}}function n0(e){let t,n,r,i,a,l;var o=e[4];function s(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:ui(c[42]),isActive:ar(c[41],c[9],c[10]),isHover:or(c[2],c[41],c[42],c[1]),isSelectable:Gt(c[41])}}}o&&(n=Ue(o,s(e)));function u(){return e[29](e[42])}function f(){return e[30](e[42])}function h(...c){return e[31](e[41],e[42],...c)}return{c(){t=he("div"),n&&Ce(n.$$.fragment),r=Ae(),this.h()},l(c){t=de(c,"DIV",{class:!0,tabindex:!0});var _=B(t);n&&je(n.$$.fragment,_),r=Ie(_),_.forEach(b),this.h()},h(){d(t,"class","listItem"),d(t,"tabindex","-1")},m(c,_){K(c,t,_),n&&Le(n,t,null),H(t,r),i=!0,a||(l=[Z(t,"mouseover",u),Z(t,"focus",f),Z(t,"click",h)],a=!0)},p(c,_){e=c;const w={};if(_[0]&2&&(w.item=e[41]),_[0]&8192&&(w.filterText=e[13]),_[0]&64&&(w.getOptionLabel=e[6]),_[0]&1538&&(w.isActive=ar(e[41],e[9],e[10])),_[0]&6&&(w.isHover=or(e[2],e[41],e[42],e[1])),_[0]&2&&(w.isSelectable=Gt(e[41])),o!==(o=e[4])){if(n){He();const v=n;pe(v.$$.fragment,1,0,()=>{De(v,1)}),Ve()}o?(n=Ue(o,s(e)),Ce(n.$$.fragment),ue(n.$$.fragment,1),Le(n,t,r)):n=null}else o&&n.$set(w)},i(c){i||(n&&ue(n.$$.fragment,c),i=!0)},o(c){n&&pe(n.$$.fragment,c),i=!1},d(c){c&&b(t),n&&De(n),a=!1,et(l)}}}function r0(e){let t,n=e[7](e[41])+"",r;return{c(){t=he("div"),r=ke(n),this.h()},l(i){t=de(i,"DIV",{class:!0});var a=B(t);r=Ee(a,n),a.forEach(b),this.h()},h(){d(t,"class","listGroupTitle svelte-1uyqfml")},m(i,a){K(i,t,a),H(t,r)},p(i,a){a[0]&130&&n!==(n=i[7](i[41])+"")&&We(r,n)},i:Ne,o:Ne,d(i){i&&b(t)}}}function vl(e){let t,n,r,i;const a=[r0,n0],l=[];function o(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=o(e),n=l[t]=a[t](e),{c(){n.c(),r=ge()},l(s){n.l(s),r=ge()},m(s,u){l[t].m(s,u),K(s,r,u),i=!0},p(s,u){let f=t;t=o(s),t===f?l[t].p(s,u):(He(),pe(l[f],1,1,()=>{l[f]=null}),Ve(),n=l[t],n?n.p(s,u):(n=l[t]=a[t](s),n.c()),ue(n,1),n.m(r.parentNode,r))},i(s){i||(ue(n),i=!0)},o(s){pe(n),i=!1},d(s){l[t].d(s),s&&b(r)}}}function i0(e){let t,n,r,i,a;var l=e[4];function o(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:ui(h[42]),isActive:ar(h[41],h[9],h[10]),isHover:or(h[2],h[41],h[42],h[1]),isSelectable:Gt(h[41])}}}l&&(n=Ue(l,o(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function f(...h){return e[28](e[41],e[42],...h)}return{c(){t=he("div"),n&&Ce(n.$$.fragment),this.h()},l(h){t=de(h,"DIV",{class:!0});var c=B(t);n&&je(n.$$.fragment,c),c.forEach(b),this.h()},h(){d(t,"class","listItem")},m(h,c){K(h,t,c),n&&Le(n,t,null),r=!0,i||(a=[Z(t,"mouseover",s),Z(t,"focus",u),Z(t,"click",f)],i=!0)},p(h,c){e=h;const _={};if(c[1]&1024&&(_.item=e[41]),c[0]&8192&&(_.filterText=e[13]),c[0]&64&&(_.getOptionLabel=e[6]),c[1]&2048&&(_.isFirst=ui(e[42])),c[0]&1536|c[1]&1024&&(_.isActive=ar(e[41],e[9],e[10])),c[0]&6|c[1]&3072&&(_.isHover=or(e[2],e[41],e[42],e[1])),c[1]&1024&&(_.isSelectable=Gt(e[41])),l!==(l=e[4])){if(n){He();const w=n;pe(w.$$.fragment,1,0,()=>{De(w,1)}),Ve()}l?(n=Ue(l,o(e)),Ce(n.$$.fragment),ue(n.$$.fragment,1),Le(n,t,null)):n=null}else l&&n.$set(_)},i(h){r||(n&&ue(n.$$.fragment,h),r=!0)},o(h){n&&pe(n.$$.fragment,h),r=!1},d(h){h&&b(t),n&&De(n),i=!1,et(a)}}}function l0(e){let t,n,r,i,a,l;const o=[t0,e0],s=[];function u(f,h){return f[5]?0:1}return n=u(e),r=s[n]=o[n](e),{c(){t=he("div"),r.c(),this.h()},l(f){t=de(f,"DIV",{class:!0,style:!0});var h=B(t);r.l(h),h.forEach(b),this.h()},h(){d(t,"class","listContainer svelte-1uyqfml"),d(t,"style",e[14]),rt(t,"virtualList",e[5])},m(f,h){K(f,t,h),s[n].m(t,null),e[32](t),i=!0,a||(l=[Z(window,"keydown",e[17]),Z(window,"resize",e[18])],a=!0)},p(f,h){let c=n;n=u(f),n===c?s[n].p(f,h):(He(),pe(s[c],1,1,()=>{s[c]=null}),Ve(),r=s[n],r?r.p(f,h):(r=s[n]=o[n](f),r.c()),ue(r,1),r.m(t,null)),(!i||h[0]&16384)&&d(t,"style",f[14]),(!i||h[0]&32)&&rt(t,"virtualList",f[5])},i(f){i||(ue(r),i=!0)},o(f){pe(r),i=!1},d(f){f&&b(t),s[n].d(),e[32](null),a=!1,et(l)}}}function ar(e,t,n){return t&&t[n]===e[n]}function ui(e){return e===0}function or(e,t,n,r){return Gt(t)&&(e===n||r.length===1)}function Gt(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function a0(e,t,n){const r=fi();let{container:i=void 0}=t,{VirtualList:a=null}=t,{Item:l=$a}=t,{isVirtualList:o=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:f=(D,Q)=>{if(D)return D.isCreator?`Create "${Q}"`:D[u]}}=t,{getGroupHeaderLabel:h=null}=t,{itemHeight:c=40}=t,{hoverItemIndex:_=0}=t,{value:w=void 0}=t,{optionIdentifier:v="value"}=t,{hideEmptyState:g=!1}=t,{noOptionsMessage:p="No options"}=t,{isMulti:S=!1}=t,{activeItemIndex:k=0}=t,{filterText:m=""}=t,{parent:E=null}=t,{listPlacement:U=null}=t,{listAutoWidth:Y=null}=t,{listOffset:P=5}=t,z=0,C=!1,R;cr(()=>{if(s.length>0&&!S&&w){const D=s.findIndex(Q=>Q[v]===w[v]);D&&n(2,_=D)}oe("active"),i.addEventListener("scroll",()=>{clearTimeout(z),z=setTimeout(()=>{C=!1},100)},!1)}),_a(()=>{s||n(1,s=[]),s!==R&&s.length>0&&n(2,_=0),R=s});function x(D){D.isCreator||r("itemSelected",D)}function O(D){C||n(2,_=D)}function q(D){const{item:Q,i:fe,event:L}=D;if(L.stopPropagation(),w&&!S&&w[v]===Q[v])return I();Q.isCreator?r("itemCreated",m):Gt(Q)&&(n(19,k=fe),n(2,_=fe),x(Q))}function I(){r("closeList")}async function M(D){if(o)return;let Q=!0;for(;Q;)D>0&&_===s.length-1?n(2,_=0):D<0&&_===0?n(2,_=s.length-1):n(2,_=_+D),Q=!Gt(s[_]);await Pn(),oe("hover")}function te(D){switch(D.key){case"Escape":D.preventDefault(),I();break;case"ArrowDown":D.preventDefault(),s.length&&M(1);break;case"ArrowUp":D.preventDefault(),s.length&&M(-1);break;case"Enter":if(D.preventDefault(),s.length===0)break;const Q=s[_];if(w&&!S&&w[v]===Q[v]){I();break}Q.isCreator?r("itemCreated",m):(n(19,k=_),x(s[_]));break;case"Tab":if(D.preventDefault(),s.length===0||w&&w[v]===s[_][v])return I();n(19,k=_),x(s[_]);break}}function oe(D){if(o||!i)return;let Q;const fe=i.querySelector(`.listItem .${D}`);fe&&(Q=i.getBoundingClientRect().bottom-fe.getBoundingClientRect().bottom),n(0,i.scrollTop-=Q,i)}let ie;function F(){const{height:D,width:Q}=E.getBoundingClientRect();n(14,ie=""),n(14,ie+=`min-width:${Q}px;width:${Y?"auto":"100%"};`),U==="top"||U==="auto"&&Qh(E,i).bottom?n(14,ie+=`bottom:${D+P}px;`):n(14,ie+=`top:${D+P}px;`)}const G=D=>O(D),W=D=>O(D),ae=(D,Q,fe)=>q({item:D,i:Q,event:fe}),_e=D=>O(D),me=D=>O(D),X=(D,Q,fe)=>q({item:D,i:Q,event:fe});function J(D){ze[D?"unshift":"push"](()=>{i=D,n(0,i)})}return e.$$set=D=>{"container"in D&&n(0,i=D.container),"VirtualList"in D&&n(3,a=D.VirtualList),"Item"in D&&n(4,l=D.Item),"isVirtualList"in D&&n(5,o=D.isVirtualList),"items"in D&&n(1,s=D.items),"labelIdentifier"in D&&n(20,u=D.labelIdentifier),"getOptionLabel"in D&&n(6,f=D.getOptionLabel),"getGroupHeaderLabel"in D&&n(7,h=D.getGroupHeaderLabel),"itemHeight"in D&&n(8,c=D.itemHeight),"hoverItemIndex"in D&&n(2,_=D.hoverItemIndex),"value"in D&&n(9,w=D.value),"optionIdentifier"in D&&n(10,v=D.optionIdentifier),"hideEmptyState"in D&&n(11,g=D.hideEmptyState),"noOptionsMessage"in D&&n(12,p=D.noOptionsMessage),"isMulti"in D&&n(21,S=D.isMulti),"activeItemIndex"in D&&n(19,k=D.activeItemIndex),"filterText"in D&&n(13,m=D.filterText),"parent"in D&&n(22,E=D.parent),"listPlacement"in D&&n(23,U=D.listPlacement),"listAutoWidth"in D&&n(24,Y=D.listAutoWidth),"listOffset"in D&&n(25,P=D.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&E&&i&&F()},[i,s,_,a,l,o,f,h,c,w,v,g,p,m,ie,O,q,te,F,k,u,S,E,U,Y,P,G,W,ae,_e,me,X,J]}class o0 extends st{constructor(t){super(),ut(this,t,a0,l0,ft,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function s0(e){let t,n=e[0](e[1])+"";return{c(){t=he("div"),this.h()},l(r){t=de(r,"DIV",{class:!0});var i=B(t);i.forEach(b),this.h()},h(){d(t,"class","selection svelte-pu1q1n")},m(r,i){K(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Ne,o:Ne,d(r){r&&b(t)}}}function u0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=a=>{"getSelectionLabel"in a&&n(0,r=a.getSelectionLabel),"item"in a&&n(1,i=a.item)},[r,i]}class f0 extends st{constructor(t){super(),ut(this,t,u0,s0,ft,{getSelectionLabel:0,item:1})}}function wl(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function bl(e){let t,n,r,i,a;function l(...o){return e[6](e[11],...o)}return{c(){t=he("div"),n=ne("svg"),r=ne("path"),this.h()},l(o){t=de(o,"DIV",{class:!0});var s=B(t);n=re(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=B(n);r=re(u,"path",{d:!0}),B(r).forEach(b),u.forEach(b),s.forEach(b),this.h()},h(){d(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),d(n,"width","100%"),d(n,"height","100%"),d(n,"viewBox","-2 -2 50 50"),d(n,"focusable","false"),d(n,"aria-hidden","true"),d(n,"role","presentation"),d(n,"class","svelte-liu9pa"),d(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){K(o,t,s),H(t,n),H(n,r),i||(a=Z(t,"click",l),i=!0)},p(o,s){e=o},d(o){o&&b(t),i=!1,a()}}}function kl(e){let t,n,r=e[4](e[9])+"",i,a,l,o,s,u=!e[2]&&!e[3]&&bl(e);function f(...h){return e[7](e[11],...h)}return{c(){t=he("div"),n=he("div"),i=Ae(),u&&u.c(),a=Ae(),this.h()},l(h){t=de(h,"DIV",{class:!0});var c=B(t);n=de(c,"DIV",{class:!0});var _=B(n);_.forEach(b),i=Ie(c),u&&u.l(c),a=Ie(c),c.forEach(b),this.h()},h(){d(n,"class","multiSelectItem_label svelte-liu9pa"),d(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(h,c){K(h,t,c),H(t,n),n.innerHTML=r,H(t,i),u&&u.m(t,null),H(t,a),o||(s=Z(t,"click",f),o=!0)},p(h,c){e=h,c&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,c):(u=bl(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),c&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&d(t,"class",l)},d(h){h&&b(t),u&&u.d(),o=!1,s()}}}function c0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=kl(wl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=ge()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=ge()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,[a]){if(a&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const o=wl(i,n,l);r[l]?r[l].p(o,a):(r[l]=kl(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Ne,o:Ne,d(i){ci(r,i),i&&b(t)}}}function h0(e,t,n){const r=fi();let{value:i=[]}=t,{activeValue:a=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:s=void 0}=t;function u(c,_){_.stopPropagation(),r("multiItemClear",{i:c})}const f=(c,_)=>u(c,_),h=(c,_)=>o?u(c,_):{};return e.$$set=c=>{"value"in c&&n(0,i=c.value),"activeValue"in c&&n(1,a=c.activeValue),"isDisabled"in c&&n(2,l=c.isDisabled),"multiFullItemClearable"in c&&n(3,o=c.multiFullItemClearable),"getSelectionLabel"in c&&n(4,s=c.getSelectionLabel)},[i,a,l,o,s,u,f,h]}class d0 extends st{constructor(t){super(),ut(this,t,h0,c0,ft,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function El(e,t,n){const r=e.slice();return r[23]=t[n],r}const _0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),Al=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function m0(e){let t;return{c(){t=ke("Missing template")},l(n){t=Ee(n,"Missing template")},m(n,r){K(n,t,r)},d(n){n&&b(t)}}}function Il(e,t){let n,r,i;const a=t[15].default,l=Mo(a,t,t[14],Al),o=l||m0();return{key:e,first:null,c(){n=he("svelte-virtual-list-row"),o&&o.c(),r=Ae(),this.h()},l(s){n=de(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=B(n);o&&o.l(u),r=Ie(u),u.forEach(b),this.h()},h(){Br(n,"class","svelte-g2cagw"),this.first=n},m(s,u){K(s,n,u),o&&o.m(n,null),H(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&No(l,a,t,t[14],i?Lo(a,t[14],u,_0):Co(t[14]),Al)},i(s){i||(ue(o,s),i=!0)},o(s){pe(o,s),i=!1},d(s){s&&b(n),o&&o.d(s)}}}function g0(e){let t,n,r=[],i=new Map,a,l,o,s,u=e[5];const f=h=>h[23].index;for(let h=0;h<u.length;h+=1){let c=El(e,u,h),_=f(c);i.set(_,r[h]=Il(_,c))}return{c(){t=he("svelte-virtual-list-viewport"),n=he("svelte-virtual-list-contents");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){t=de(h,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var c=B(t);n=de(c,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=B(n);for(let w=0;w<r.length;w+=1)r[w].l(_);_.forEach(b),c.forEach(b),this.h()},h(){zt(n,"padding-top",e[6]+"px"),zt(n,"padding-bottom",e[7]+"px"),Br(n,"class","svelte-g2cagw"),zt(t,"height",e[0]),Br(t,"class","svelte-g2cagw"),on(()=>e[18].call(t))},m(h,c){K(h,t,c),H(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),a=hr(t,e[18].bind(t)),l=!0,o||(s=Z(t,"scroll",e[8]),o=!0)},p(h,[c]){c&16418&&(u=h[5],He(),r=Ct(r,c,f,1,h,u,i,n,To,Il,null,El),Ve()),(!l||c&64)&&zt(n,"padding-top",h[6]+"px"),(!l||c&128)&&zt(n,"padding-bottom",h[7]+"px"),(!l||c&1)&&zt(t,"height",h[0])},i(h){if(!l){for(let c=0;c<u.length;c+=1)ue(r[c]);l=!0}},o(h){for(let c=0;c<r.length;c+=1)pe(r[c]);l=!1},d(h){h&&b(t);for(let c=0;c<r.length;c+=1)r[c].d();e[16](null),e[17](null),a(),o=!1,s()}}}function p0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:a=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:f=0}=t,h=[],c,_,w,v=0,g,p,S=0,k=0,m;async function E(C,R,x){const{scrollTop:O}=_;await Pn();let q=S-O,I=u;for(;q<R&&I<C.length;){let te=c[I-u];te||(n(10,f=I+1),await Pn(),te=c[I-u]);const oe=h[I]=x||te.offsetHeight;q+=oe,I+=1}n(10,f=I);const M=C.length-f;m=(S+q)/f,n(7,k=M*m),h.length=C.length,_&&n(3,_.scrollTop=0,_)}async function U(){const{scrollTop:C}=_,R=u;for(let I=0;I<c.length;I+=1)h[u+I]=o||c[I].offsetHeight;let x=0,O=0;for(;x<a.length;){const I=h[x]||m;if(O+I>C){n(9,u=x),n(6,S=O);break}O+=I,x+=1}for(;x<a.length&&(O+=h[x]||m,x+=1,!(O>C+v)););n(10,f=x);const q=a.length-f;for(m=O/f;x<a.length;)h[x++]=m;if(n(7,k=q*m),u<R){await Pn();let I=0,M=0;for(let oe=u;oe<R;oe+=1)c[oe-u]&&(I+=h[oe],M+=o||c[oe-u].offsetHeight);const te=M-I;_.scrollTo(0,C+te)}}cr(()=>{c=w.getElementsByTagName("svelte-virtual-list-row"),n(13,p=!0)});function Y(C){ze[C?"unshift":"push"](()=>{w=C,n(4,w)})}function P(C){ze[C?"unshift":"push"](()=>{_=C,n(3,_)})}function z(){v=this.offsetHeight,n(2,v)}return e.$$set=C=>{"items"in C&&n(11,a=C.items),"height"in C&&n(0,l=C.height),"itemHeight"in C&&n(12,o=C.itemHeight),"hoverItemIndex"in C&&n(1,s=C.hoverItemIndex),"start"in C&&n(9,u=C.start),"end"in C&&n(10,f=C.end),"$$scope"in C&&n(14,i=C.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,g=a.slice(u,f).map((C,R)=>({index:R+u,data:C}))),e.$$.dirty&14340&&p&&E(a,v,o)},[l,s,v,_,w,g,S,k,U,u,f,a,o,p,i,r,Y,P,z]}class y0 extends st{constructor(t){super(),ut(this,t,p0,g0,ft,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function v0(e){let t,n;return{c(){t=ne("svg"),n=ne("path"),this.h()},l(r){t=re(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=B(t);n=re(i,"path",{fill:!0,d:!0}),B(n).forEach(b),i.forEach(b),this.h()},h(){d(n,"fill","currentColor"),d(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","-2 -2 50 50"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"role","presentation")},m(r,i){K(r,t,i),H(t,n)},p:Ne,i:Ne,o:Ne,d(r){r&&b(t)}}}class w0 extends st{constructor(t){super(),ut(this,t,null,v0,ft,{})}}function b0(e,t,n){let r;return function(){let a=this,l=arguments,o=function(){r=null,n||e.apply(a,l)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,l)}}function Sl(e,t,n){const r=e.slice();return r[103]=t[n],r}function Tl(e){let t,n,r,i,a;return{c(){t=he("span"),n=ke(e[33]),r=Ae(),i=he("span"),a=ke(e[32]),this.h()},l(l){t=de(l,"SPAN",{id:!0});var o=B(t);n=Ee(o,e[33]),o.forEach(b),r=Ie(l),i=de(l,"SPAN",{id:!0});var s=B(i);a=Ee(s,e[32]),s.forEach(b),this.h()},h(){d(t,"id","aria-selection"),d(i,"id","aria-context")},m(l,o){K(l,t,o),H(t,n),K(l,r,o),K(l,i,o),H(i,a)},p(l,o){o[1]&4&&We(n,l[33]),o[1]&2&&We(a,l[32])},d(l){l&&b(t),l&&b(r),l&&b(i)}}}function Ml(e){let t,n,r;const i=[e[18]];var a=e[17];function l(o){let s={};for(let u=0;u<i.length;u+=1)s=hi(s,i[u]);return{props:s}}return a&&(t=Ue(a,l())),{c(){t&&Ce(t.$$.fragment),n=ge()},l(o){t&&je(t.$$.fragment,o),n=ge()},m(o,s){t&&Le(t,o,s),K(o,n,s),r=!0},p(o,s){const u=s[0]&262144?di(i,[ma(o[18])]):{};if(a!==(a=o[17])){if(t){He();const f=t;pe(f.$$.fragment,1,0,()=>{De(f,1)}),Ve()}a?(t=Ue(a,l()),Ce(t.$$.fragment),ue(t.$$.fragment,1),Le(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(o){r||(t&&ue(t.$$.fragment,o),r=!0)},o(o){t&&pe(t.$$.fragment,o),r=!1},d(o){o&&b(n),t&&De(t,o)}}}function Nl(e){let t,n,r;var i=e[26];function a(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=Ue(i,a(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Ce(t.$$.fragment),n=ge()},l(l){t&&je(t.$$.fragment,l),n=ge()},m(l,o){t&&Le(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&4&&(s.value=l[2]),o[0]&4096&&(s.getSelectionLabel=l[12]),o[0]&1073741824&&(s.activeValue=l[30]),o[0]&512&&(s.isDisabled=l[9]),o[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){He();const u=t;pe(u.$$.fragment,1,0,()=>{De(u,1)}),Ve()}i?(t=Ue(i,a(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),Ce(t.$$.fragment),ue(t.$$.fragment,1),Le(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&ue(t.$$.fragment,l),r=!0)},o(l){t&&pe(t.$$.fragment,l),r=!1},d(l){l&&b(n),t&&De(t,l)}}}function Cl(e){let t,n,r,i,a;var l=e[25];function o(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=Ue(l,o(e))),{c(){t=he("div"),n&&Ce(n.$$.fragment),this.h()},l(s){t=de(s,"DIV",{class:!0});var u=B(t);n&&je(n.$$.fragment,u),u.forEach(b),this.h()},h(){d(t,"class","selectedItem svelte-17l1npl")},m(s,u){K(s,t,u),n&&Le(n,t,null),r=!0,i||(a=Z(t,"focus",e[40]),i=!0)},p(s,u){const f={};if(u[0]&4&&(f.item=s[2]),u[0]&4096&&(f.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){He();const h=n;pe(h.$$.fragment,1,0,()=>{De(h,1)}),Ve()}l?(n=Ue(l,o(s)),Ce(n.$$.fragment),ue(n.$$.fragment,1),Le(n,t,null)):n=null}else l&&n.$set(f)},i(s){r||(n&&ue(n.$$.fragment,s),r=!0)},o(s){n&&pe(n.$$.fragment,s),r=!1},d(s){s&&b(t),n&&De(n),i=!1,a()}}}function Ll(e){let t,n,r,i,a;var l=e[23];function o(s){return{}}return l&&(n=Ue(l,o())),{c(){t=he("div"),n&&Ce(n.$$.fragment),this.h()},l(s){t=de(s,"DIV",{class:!0,"aria-hidden":!0});var u=B(t);n&&je(n.$$.fragment,u),u.forEach(b),this.h()},h(){d(t,"class","clearSelect svelte-17l1npl"),d(t,"aria-hidden","true")},m(s,u){K(s,t,u),n&&Le(n,t,null),r=!0,i||(a=Z(t,"click",Do(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){He();const f=n;pe(f.$$.fragment,1,0,()=>{De(f,1)}),Ve()}l?(n=Ue(l,o()),Ce(n.$$.fragment),ue(n.$$.fragment,1),Le(n,t,null)):n=null}},i(s){r||(n&&ue(n.$$.fragment,s),r=!0)},o(s){n&&pe(n.$$.fragment,s),r=!1},d(s){s&&b(t),n&&De(n),i=!1,a()}}}function Dl(e){let t;function n(a,l){return a[22]?E0:k0}let r=n(e),i=r(e);return{c(){t=he("div"),i.c(),this.h()},l(a){t=de(a,"DIV",{class:!0,"aria-hidden":!0});var l=B(t);i.l(l),l.forEach(b),this.h()},h(){d(t,"class","indicator svelte-17l1npl"),d(t,"aria-hidden","true")},m(a,l){K(a,t,l),i.m(t,null)},p(a,l){r===(r=n(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,null)))},d(a){a&&b(t),i.d()}}}function k0(e){let t,n;return{c(){t=ne("svg"),n=ne("path"),this.h()},l(r){t=re(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=B(t);n=re(i,"path",{d:!0}),B(n).forEach(b),i.forEach(b),this.h()},h(){d(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","0 0 20 20"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"class","svelte-17l1npl")},m(r,i){K(r,t,i),H(t,n)},p:Ne,d(r){r&&b(t)}}}function E0(e){let t,n;return{c(){t=new Oo(!1),n=ge(),this.h()},l(r){t=Fo(r,!1),n=ge(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),K(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&b(n),r&&t.d()}}}function Rl(e){let t,n,r;return{c(){t=he("div"),n=ne("svg"),r=ne("circle"),this.h()},l(i){t=de(i,"DIV",{class:!0});var a=B(t);n=re(a,"svg",{class:!0,viewBox:!0});var l=B(n);r=re(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),B(r).forEach(b),l.forEach(b),a.forEach(b),this.h()},h(){d(r,"class","spinner_path svelte-17l1npl"),d(r,"cx","50"),d(r,"cy","50"),d(r,"r","20"),d(r,"fill","none"),d(r,"stroke","currentColor"),d(r,"stroke-width","5"),d(r,"stroke-miterlimit","10"),d(n,"class","spinner_icon svelte-17l1npl"),d(n,"viewBox","25 25 50 50"),d(t,"class","spinner svelte-17l1npl")},m(i,a){K(i,t,a),H(t,n),H(n,r)},d(i){i&&b(t)}}}function Ol(e){let t,n,r,i;const a=[e[34]];function l(u){e[84](u)}var o=e[24];function s(u){let f={};for(let h=0;h<a.length;h+=1)f=hi(f,a[h]);return u[28]!==void 0&&(f.hoverItemIndex=u[28]),{props:f}}return o&&(t=Ue(o,s(e)),ze.push(()=>Li(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Ce(t.$$.fragment),r=ge()},l(u){t&&je(t.$$.fragment,u),r=ge()},m(u,f){t&&Le(t,u,f),K(u,r,f),i=!0},p(u,f){const h=f[1]&8?di(a,[ma(u[34])]):{};if(!n&&f[0]&268435456&&(n=!0,h.hoverItemIndex=u[28],Ro(()=>n=!1)),o!==(o=u[24])){if(t){He();const c=t;pe(c.$$.fragment,1,0,()=>{De(c,1)}),Ve()}o?(t=Ue(o,s(u)),ze.push(()=>Li(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),Ce(t.$$.fragment),ue(t.$$.fragment,1),Le(t,r.parentNode,r)):t=null}else o&&t.$set(h)},i(u){i||(t&&ue(t.$$.fragment,u),i=!0)},o(u){t&&pe(t.$$.fragment,u),i=!1},d(u){u&&b(r),t&&De(t,u)}}}function Fl(e){let t,n,r;return{c(){t=he("input"),this.h()},l(i){t=de(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,d(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&b(t)}}}function Hl(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=Vl(Sl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=ge()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=ge()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,a){if(a[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const o=Sl(i,n,l);r[l]?r[l].p(o,a):(r[l]=Vl(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){ci(r,i),i&&b(t)}}}function Vl(e){let t,n,r;return{c(){t=he("input"),this.h()},l(i){t=de(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,d(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&b(t)}}}function A0(e){let t,n,r,i,a,l,o,s,u,f,h,c,_,w,v,g,p,S,k=e[1]&&Tl(e),m=e[17]&&Ml(e),E=e[35]&&Nl(e),U=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],Y={};for(let I=0;I<U.length;I+=1)Y=hi(Y,U[I]);let P=!e[7]&&e[29]&&Cl(e),z=e[37]&&Ll(e),C=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&Dl(e),R=e[4]&&Rl(),x=e[5]&&Ol(e),O=(!e[7]||e[7]&&!e[35])&&Fl(e),q=e[7]&&e[35]&&Hl(e);return{c(){t=he("div"),n=he("span"),k&&k.c(),r=Ae(),m&&m.c(),i=Ae(),E&&E.c(),a=Ae(),l=he("input"),s=Ae(),P&&P.c(),u=Ae(),z&&z.c(),f=Ae(),C&&C.c(),h=Ae(),R&&R.c(),c=Ae(),x&&x.c(),_=Ae(),O&&O.c(),w=Ae(),q&&q.c(),this.h()},l(I){t=de(I,"DIV",{class:!0,style:!0});var M=B(t);n=de(M,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var te=B(n);k&&k.l(te),te.forEach(b),r=Ie(M),m&&m.l(M),i=Ie(M),E&&E.l(M),a=Ie(M),l=de(M,"INPUT",{placeholder:!0,style:!0}),s=Ie(M),P&&P.l(M),u=Ie(M),z&&z.l(M),f=Ie(M),C&&C.l(M),h=Ie(M),R&&R.l(M),c=Ie(M),x&&x.l(M),_=Ie(M),O&&O.l(M),w=Ie(M),q&&q.l(M),M.forEach(b),this.h()},h(){d(n,"aria-live","polite"),d(n,"aria-atomic","false"),d(n,"aria-relevant","additions text"),d(n,"class","a11yText svelte-17l1npl"),Ni(l,Y),rt(l,"svelte-17l1npl",!0),d(t,"class",v="selectContainer "+e[21]+" svelte-17l1npl"),d(t,"style",e[11]),rt(t,"hasError",e[10]),rt(t,"multiSelect",e[7]),rt(t,"disabled",e[9]),rt(t,"focused",e[1])},m(I,M){K(I,t,M),H(t,n),k&&k.m(n,null),H(t,r),m&&m.m(t,null),H(t,i),E&&E.m(t,null),H(t,a),H(t,l),l.autofocus&&l.focus(),e[82](l),Ci(l,e[3]),H(t,s),P&&P.m(t,null),H(t,u),z&&z.m(t,null),H(t,f),C&&C.m(t,null),H(t,h),R&&R.m(t,null),H(t,c),x&&x.m(t,null),H(t,_),O&&O.m(t,null),H(t,w),q&&q.m(t,null),e[85](t),g=!0,p||(S=[Z(window,"click",e[41]),Z(window,"focusin",e[41]),Z(window,"keydown",e[39]),Z(l,"focus",e[40]),Z(l,"input",e[83]),Z(t,"click",e[42])],p=!0)},p(I,M){I[1]?k?k.p(I,M):(k=Tl(I),k.c(),k.m(n,null)):k&&(k.d(1),k=null),I[17]?m?(m.p(I,M),M[0]&131072&&ue(m,1)):(m=Ml(I),m.c(),ue(m,1),m.m(t,i)):m&&(He(),pe(m,1,1,()=>{m=null}),Ve()),I[35]?E?(E.p(I,M),M[1]&16&&ue(E,1)):(E=Nl(I),E.c(),ue(E,1),E.m(t,a)):E&&(He(),pe(E,1,1,()=>{E=null}),Ve()),Ni(l,Y=di(U,[(!g||M[0]&8192&&o!==(o=!I[13]))&&{readOnly:o},M[1]&1&&I[31],(!g||M[1]&32)&&{placeholder:I[36]},(!g||M[0]&16384)&&{style:I[14]},(!g||M[0]&512)&&{disabled:I[9]}])),M[0]&8&&l.value!==I[3]&&Ci(l,I[3]),rt(l,"svelte-17l1npl",!0),!I[7]&&I[29]?P?(P.p(I,M),M[0]&536871040&&ue(P,1)):(P=Cl(I),P.c(),ue(P,1),P.m(t,u)):P&&(He(),pe(P,1,1,()=>{P=null}),Ve()),I[37]?z?(z.p(I,M),M[1]&64&&ue(z,1)):(z=Ll(I),z.c(),ue(z,1),z.m(t,f)):z&&(He(),pe(z,1,1,()=>{z=null}),Ve()),!I[37]&&(I[20]||I[19]&&!I[2]||!I[13]&&!I[9]&&!I[4]&&(I[29]&&!I[15]||!I[29]))?C?C.p(I,M):(C=Dl(I),C.c(),C.m(t,h)):C&&(C.d(1),C=null),I[4]?R||(R=Rl(),R.c(),R.m(t,c)):R&&(R.d(1),R=null),I[5]?x?(x.p(I,M),M[0]&32&&ue(x,1)):(x=Ol(I),x.c(),ue(x,1),x.m(t,_)):x&&(He(),pe(x,1,1,()=>{x=null}),Ve()),!I[7]||I[7]&&!I[35]?O?O.p(I,M):(O=Fl(I),O.c(),O.m(t,w)):O&&(O.d(1),O=null),I[7]&&I[35]?q?q.p(I,M):(q=Hl(I),q.c(),q.m(t,null)):q&&(q.d(1),q=null),(!g||M[0]&2097152&&v!==(v="selectContainer "+I[21]+" svelte-17l1npl"))&&d(t,"class",v),(!g||M[0]&2048)&&d(t,"style",I[11]),(!g||M[0]&2098176)&&rt(t,"hasError",I[10]),(!g||M[0]&2097280)&&rt(t,"multiSelect",I[7]),(!g||M[0]&2097664)&&rt(t,"disabled",I[9]),(!g||M[0]&2097154)&&rt(t,"focused",I[1])},i(I){g||(ue(m),ue(E),ue(P),ue(z),ue(x),g=!0)},o(I){pe(m),pe(E),pe(P),pe(z),pe(x),g=!1},d(I){I&&b(t),k&&k.d(),m&&m.d(),E&&E.d(),e[82](null),P&&P.d(),z&&z.d(),C&&C.d(),R&&R.d(),x&&x.d(),O&&O.d(),q&&q.d(),e[85](null),p=!1,et(S)}}}function Bl(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function I0(e,t,n){let r,i,a,l,o,s,u,f;const h=fi();let{id:c=null}=t,{container:_=void 0}=t,{input:w=void 0}=t,{isMulti:v=!1}=t,{multiFullItemClearable:g=!1}=t,{isDisabled:p=!1}=t,{isCreatable:S=!1}=t,{isFocused:k=!1}=t,{value:m=null}=t,{filterText:E=""}=t,{placeholder:U="Select..."}=t,{placeholderAlwaysShow:Y=!1}=t,{items:P=null}=t,{itemFilter:z=(y,se,Se)=>`${y}`.toLowerCase().includes(se.toLowerCase())}=t,{groupBy:C=void 0}=t,{groupFilter:R=y=>y}=t,{isGroupHeaderSelectable:x=!1}=t,{getGroupHeaderLabel:O=y=>y[q]||y.id}=t,{labelIdentifier:q="label"}=t,{getOptionLabel:I=(y,se)=>y.isCreator?`Create "${se}"`:y[q]}=t,{optionIdentifier:M="value"}=t,{loadOptions:te=void 0}=t,{hasError:oe=!1}=t,{containerStyles:ie=""}=t,{getSelectionLabel:F=y=>y?y[q]:null}=t,{createGroupHeaderItem:G=y=>({value:y,label:y})}=t,{createItem:W=y=>({value:y,label:y})}=t;const ae=()=>r;let{isSearchable:_e=!0}=t,{inputStyles:me=""}=t,{isClearable:X=!0}=t,{isWaiting:J=!1}=t,{listPlacement:D="auto"}=t,{listOpen:Q=!1}=t,{isVirtualList:fe=!1}=t,{loadOptionsInterval:L=300}=t,{noOptionsMessage:$="No options"}=t,{hideEmptyState:N=!1}=t,{inputAttributes:V={}}=t,{listAutoWidth:j=!0}=t,{itemHeight:be=40}=t,{Icon:ee=void 0}=t,{iconProps:T={}}=t,{showChevron:A=!1}=t,{showIndicator:le=!1}=t,{containerClasses:ye=""}=t,{indicatorSvg:Fe=void 0}=t,{listOffset:Be=5}=t,{ClearIcon:Xe=w0}=t,{Item:tt=$a}=t,{List:lt=o0}=t,{Selection:Ye=f0}=t,{MultiSelection:ce=d0}=t,{VirtualList:we=y0}=t;function Te(y){if(y.loadOptions&&y.filterText.length>0)return;if(!y.items)return[];y.items&&y.items.length>0&&typeof y.items[0]!="object"&&(y.items=Bl(y.items));let se=y.items.filter(Se=>{let nt=z(I(Se,y.filterText),y.filterText,Se);return nt&&y.isMulti&&y.value&&Array.isArray(y.value)&&(nt=!y.value.some(Ot=>Ot[y.optionIdentifier]===Se[y.optionIdentifier])),nt});return y.groupBy&&(se=io(se)),y.isCreatable&&(se=xe(se,y.filterText)),se}function xe(y,se){if(se.length===0)return y;const Se=W(se);return y[0]&&se===y[0][q]?y:(Se.isCreator=!0,[...y,Se])}let{selectedValue:It=null}=t,Me,St,Ut,Rt,pr,Sn;const to=b0(async()=>{n(4,J=!0);let y=await te(E).catch(se=>{console.warn("svelte-select loadOptions error :>> ",se),h("error",{type:"loadOptions",details:se})});y&&!y.cancelled&&(y?(y&&y.length>0&&typeof y[0]!="object"&&(y=Bl(y)),n(81,r=[...y]),h("loaded",{items:r})):n(81,r=[]),S&&n(81,r=xe(r,E)),n(4,J=!1),n(1,k=!0),n(5,Q=!0))},L);function no(){typeof m=="string"?n(2,m={[M]:m,label:m}):v&&Array.isArray(m)&&m.length>0&&n(2,m=m.map(y=>typeof y=="string"?{value:y,label:y}:y))}let Yt;function ro(){n(31,Yt=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},V)),c&&n(31,Yt.id=c,Yt),_e||n(31,Yt.readonly=!0,Yt)}function io(y){const se=[],Se={};y.forEach(Ot=>{const pt=C(Ot);se.includes(pt)||(se.push(pt),Se[pt]=[],pt&&Se[pt].push(Object.assign(G(pt,Ot),{id:pt,isGroupHeader:!0,isSelectable:x}))),Se[pt].push(Object.assign({isGroupItem:!!pt},Ot))});const nt=[];return R(se).forEach(Ot=>{nt.push(...Se[Ot])}),nt}function lo(){if(v){JSON.stringify(m)!==JSON.stringify(St)&&Si()&&h("select",m);return}(!St||JSON.stringify(m[M])!==JSON.stringify(St[M]))&&h("select",m)}function ao(){k||Q?yr():w&&w.blur()}function oo(){m&&(Array.isArray(m)?n(2,m=[...m]):n(2,m=[m]))}function so(){m&&n(2,m=null)}function uo(){E.length!==0&&(n(1,k=!0),n(5,Q=!0),te?to():(n(5,Q=!0),v&&n(30,Me=void 0)))}_a(async()=>{n(77,St=m),n(78,Ut=E),n(79,Rt=k),n(80,pr=v)});function Si(){let y=!0;if(m){const se=[],Se=[];m.forEach(nt=>{se.includes(nt[M])?y=!1:(se.push(nt[M]),Se.push(nt))}),y||n(2,m=Se)}return y}function Ti(y){let se=y?y[M]:m[M];return P.find(Se=>Se[M]===se)}function fo(y){!y||y.length===0||y.some(se=>typeof se!="object")||!m||(v?m.some(se=>!se||!se[M]):!m[M])||(Array.isArray(m)?n(2,m=m.map(se=>Ti(se)||se)):n(2,m=Ti()||m))}function Mi(y){const{detail:se}=y,Se=m[se?se.i:m.length-1];m.length===1?n(2,m=void 0):n(2,m=m.filter(nt=>nt!==Se)),h("clear",Se)}function co(y){if(!!k)switch(y.key){case"ArrowDown":y.preventDefault(),n(5,Q=!0),n(30,Me=void 0);break;case"ArrowUp":y.preventDefault(),n(5,Q=!0),n(30,Me=void 0);break;case"Tab":Q||n(1,k=!1);break;case"Backspace":if(!v||E.length>0)return;if(v&&m&&m.length>0){if(Mi(Me!==void 0?Me:m.length-1),Me===0||Me===void 0)break;n(30,Me=m.length>Me?Me-1:void 0)}break;case"ArrowLeft":if(!v||E.length>0)return;Me===void 0?n(30,Me=m.length-1):m.length>Me&&Me!==0&&n(30,Me-=1);break;case"ArrowRight":if(!v||E.length>0||Me===void 0)return;Me===m.length-1?n(30,Me=void 0):Me<m.length-1&&n(30,Me+=1);break}}function yr(){n(1,k=!0),w&&w.focus()}function ho(y){if(!_)return;const se=y.path&&y.path.length>0?y.path[0]:y.target;_.contains(se)||_.contains(y.relatedTarget)||(n(1,k=!1),n(5,Q=!1),n(30,Me=void 0),w&&w.blur())}function _o(){p||(n(1,k=!0),n(5,Q=!Q))}function mo(){n(2,m=void 0),n(5,Q=!1),h("clear",m),yr()}cr(()=>{k&&w&&w.focus()});function go(y){const{detail:se}=y;if(se){n(3,E="");const Se=Object.assign({},se);(!Se.isGroupHeader||Se.isSelectable)&&(v?n(2,m=m?m.concat([Se]):[Se]):n(2,m=Se),n(2,m),setTimeout(()=>{n(5,Q=!1),n(30,Me=void 0)}))}}function po(y){const{detail:se}=y;v?(n(2,m=m||[]),n(2,m=[...m,W(se)])):n(2,m=W(se)),h("itemCreated",se),n(3,E=""),n(5,Q=!1),n(30,Me=void 0)}function yo(){n(3,E=""),n(5,Q=!1)}let{ariaValues:vr=y=>`Option ${y}, selected.`}=t,{ariaListOpen:wr=(y,se)=>`You are currently focused on option ${y}. There are ${se} results available.`}=t,{ariaFocused:br=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function vo(){let y;return v&&m.length>0?y=m.map(se=>F(se)).join(", "):y=F(m),vr(y)}function wo(){if(!k||!r||r.length===0)return"";let y=r[Sn];if(Q&&y){let se=F(y),Se=r?r.length:0;return wr(se,Se)}else return br()}function bo(y){ze[y?"unshift":"push"](()=>{w=y,n(6,w)})}function ko(){E=this.value,n(3,E)}function Eo(y){Sn=y,n(28,Sn)}function Ao(y){ze[y?"unshift":"push"](()=>{_=y,n(0,_)})}return e.$$set=y=>{"id"in y&&n(46,c=y.id),"container"in y&&n(0,_=y.container),"input"in y&&n(6,w=y.input),"isMulti"in y&&n(7,v=y.isMulti),"multiFullItemClearable"in y&&n(8,g=y.multiFullItemClearable),"isDisabled"in y&&n(9,p=y.isDisabled),"isCreatable"in y&&n(47,S=y.isCreatable),"isFocused"in y&&n(1,k=y.isFocused),"value"in y&&n(2,m=y.value),"filterText"in y&&n(3,E=y.filterText),"placeholder"in y&&n(48,U=y.placeholder),"placeholderAlwaysShow"in y&&n(49,Y=y.placeholderAlwaysShow),"items"in y&&n(50,P=y.items),"itemFilter"in y&&n(51,z=y.itemFilter),"groupBy"in y&&n(52,C=y.groupBy),"groupFilter"in y&&n(53,R=y.groupFilter),"isGroupHeaderSelectable"in y&&n(54,x=y.isGroupHeaderSelectable),"getGroupHeaderLabel"in y&&n(55,O=y.getGroupHeaderLabel),"labelIdentifier"in y&&n(56,q=y.labelIdentifier),"getOptionLabel"in y&&n(57,I=y.getOptionLabel),"optionIdentifier"in y&&n(58,M=y.optionIdentifier),"loadOptions"in y&&n(59,te=y.loadOptions),"hasError"in y&&n(10,oe=y.hasError),"containerStyles"in y&&n(11,ie=y.containerStyles),"getSelectionLabel"in y&&n(12,F=y.getSelectionLabel),"createGroupHeaderItem"in y&&n(60,G=y.createGroupHeaderItem),"createItem"in y&&n(61,W=y.createItem),"isSearchable"in y&&n(13,_e=y.isSearchable),"inputStyles"in y&&n(14,me=y.inputStyles),"isClearable"in y&&n(15,X=y.isClearable),"isWaiting"in y&&n(4,J=y.isWaiting),"listPlacement"in y&&n(63,D=y.listPlacement),"listOpen"in y&&n(5,Q=y.listOpen),"isVirtualList"in y&&n(64,fe=y.isVirtualList),"loadOptionsInterval"in y&&n(65,L=y.loadOptionsInterval),"noOptionsMessage"in y&&n(66,$=y.noOptionsMessage),"hideEmptyState"in y&&n(67,N=y.hideEmptyState),"inputAttributes"in y&&n(16,V=y.inputAttributes),"listAutoWidth"in y&&n(68,j=y.listAutoWidth),"itemHeight"in y&&n(69,be=y.itemHeight),"Icon"in y&&n(17,ee=y.Icon),"iconProps"in y&&n(18,T=y.iconProps),"showChevron"in y&&n(19,A=y.showChevron),"showIndicator"in y&&n(20,le=y.showIndicator),"containerClasses"in y&&n(21,ye=y.containerClasses),"indicatorSvg"in y&&n(22,Fe=y.indicatorSvg),"listOffset"in y&&n(70,Be=y.listOffset),"ClearIcon"in y&&n(23,Xe=y.ClearIcon),"Item"in y&&n(71,tt=y.Item),"List"in y&&n(24,lt=y.List),"Selection"in y&&n(25,Ye=y.Selection),"MultiSelection"in y&&n(26,ce=y.MultiSelection),"VirtualList"in y&&n(72,we=y.VirtualList),"selectedValue"in y&&n(73,It=y.selectedValue),"ariaValues"in y&&n(74,vr=y.ariaValues),"ariaListOpen"in y&&n(75,wr=y.ariaListOpen),"ariaFocused"in y&&n(76,br=y.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Te({loadOptions:te,filterText:E,items:P,value:m,isMulti:v,optionIdentifier:M,groupBy:C,isCreatable:S})),e.$$.dirty[2]&2048&&It&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&fo(P),e.$$.dirty[0]&4&&m&&no(),e.$$.dirty[0]&73728&&(V||!_e)&&ro(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(v&&oo(),pr&&!v&&so()),e.$$.dirty[0]&132&&v&&m&&m.length>1&&Si(),e.$$.dirty[0]&4&&m&&lo(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!m&&v&&St&&h("select",m),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&k!==Rt&&ao(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&E!==Ut&&uo(),e.$$.dirty[0]&12&&n(29,i=m&&E.length===0),e.$$.dirty[0]&536904208&&n(37,a=i&&X&&!p&&!J),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=Y&&v?U:m?"":U),e.$$.dirty[0]&132&&n(35,o=v&&m&&m.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:tt,filterText:E,optionIdentifier:M,noOptionsMessage:$,hideEmptyState:N,isVirtualList:fe,VirtualList:we,value:m,isMulti:v,getGroupHeaderLabel:O,items:r,itemHeight:be,getOptionLabel:I,listPlacement:D,parent:_,listAutoWidth:j,listOffset:Be}),e.$$.dirty[0]&132&&n(33,u=m?vo():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,f=wo())},[_,k,m,E,J,Q,w,v,g,p,oe,ie,F,_e,me,X,V,ee,T,A,le,ye,Fe,Xe,lt,Ye,ce,mo,Sn,i,Me,Yt,f,u,s,o,l,a,Mi,co,yr,ho,_o,go,po,yo,c,S,U,Y,P,z,C,R,x,O,q,I,M,te,G,W,ae,D,fe,L,$,N,j,be,Be,tt,we,It,vr,wr,br,St,Ut,Rt,pr,r,bo,ko,Eo,Ao]}class Pl extends st{constructor(t){super(),ut(this,t,I0,A0,ft,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function S0(e){const t=e-1;return t*t*t+1}function T0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),a=i.transform==="none"?"":i.transform,[l,o]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*o/n.height-(n.top+o),{delay:f=0,duration:h=_=>Math.sqrt(_)*120,easing:c=S0}=r;return{delay:f,duration:Re(h)?h(Math.sqrt(s*s+u*u)):h,easing:c,css:(_,w)=>{const v=w*s,g=w*u,p=_+w*t.width/n.width,S=_+w*t.height/n.height;return`transform: ${a} translate(${v}px, ${g}px) scale(${p}, ${S});`}}}function eo(e,{delay:t=0,duration:n=400,easing:r=Ho}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}const $t=_i([2020]),Qe=_i(new Set),qn=_i(!0);class M0{constructor(t){Oe(this,"id");Oe(this,"code");Oe(this,"name");Oe(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class Kn{constructor(t){Oe(this,"id");Oe(this,"code");Oe(this,"name");Oe(this,"level");Oe(this,"parent_id");Oe(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class Et{constructor(t,n,r){Oe(this,"location_id");Oe(this,"location");Oe(this,"partner_id");Oe(this,"partner");Oe(this,"product_id");Oe(this,"product");Oe(this,"year");Oe(this,"export_value");Oe(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}function Gl(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function Ul(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function Yl(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function N0(e){let t,n,r,i,a;return{c(){t=ne("text"),n=ke("No valid data for this pair."),this.h()},l(l){t=re(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=B(t);n=Ee(o,"No valid data for this pair."),o.forEach(b),this.h()},h(){d(t,"x",r=e[4]/2),d(t,"y",i=e[10]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){K(l,t,o),H(t,n)},p(l,o){o[0]&16&&r!==(r=l[4]/2)&&d(t,"x",r),o[0]&1024&&i!==(i=l[10]/2)&&d(t,"y",i)},i(l){a||on(()=>{a=ga(t,eo,{}),a.start()})},o:Ne,d(l){l&&b(t)}}}function C0(e){var L,$;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,a,l,o=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",s,u,f,h,c=((L=e[2])==null?void 0:L.name)+" ",_,w=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",v,g,p=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",S,k,m=(($=e[3])==null?void 0:$.name)+"",E,U,Y,P=[],z=new Map,C,R=[],x=new Map,O,q=[],I=new Map,M,te,oe,ie,F,G,W,ae,_e,me=e[11];const X=N=>N[45].product_id;for(let N=0;N<me.length;N+=1){let V=Yl(e,me,N),j=X(V);z.set(j,P[N]=Xl(j,V))}let J=e[11];const D=N=>N[47];for(let N=0;N<J.length;N+=1){let V=Ul(e,J,N),j=D(V);x.set(j,R[N]=xl(j,V))}let Q=e[11];const fe=N=>N[45].product_id;for(let N=0;N<Q.length;N+=1){let V=Gl(e,Q,N),j=fe(V);I.set(j,q[N]=ql(j,V))}return{c(){t=ne("text"),n=ke("Sector "),i=ke(r),a=ne("text"),l=ke("Trade Flow "),s=ke(o),f=ne("text"),h=ke("From "),_=ke(c),v=ke(w),g=ne("text"),S=ke(p),k=ke("\xA0From "),E=ke(m),Y=ne("g");for(let N=0;N<P.length;N+=1)P[N].c();C=ge();for(let N=0;N<R.length;N+=1)R[N].c();O=ge();for(let N=0;N<q.length;N+=1)q[N].c();M=ne("line"),ie=ne("line"),G=ne("g"),W=ne("g"),this.h()},l(N){t=re(N,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var V=B(t);n=Ee(V,"Sector "),i=Ee(V,r),V.forEach(b),a=re(N,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var j=B(a);l=Ee(j,"Trade Flow "),s=Ee(j,o),j.forEach(b),f=re(N,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var be=B(f);h=Ee(be,"From "),_=Ee(be,c),v=Ee(be,w),be.forEach(b),g=re(N,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var ee=B(g);S=Ee(ee,p),k=Ee(ee,"\xA0From "),E=Ee(ee,m),ee.forEach(b),Y=re(N,"g",{id:!0,transform:!0});var T=B(Y);for(let A=0;A<P.length;A+=1)P[A].l(T);C=ge();for(let A=0;A<R.length;A+=1)R[A].l(T);O=ge();for(let A=0;A<q.length;A+=1)q[A].l(T);M=re(T,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),B(M).forEach(b),ie=re(T,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),B(ie).forEach(b),G=re(T,"g",{id:!0}),B(G).forEach(b),T.forEach(b),W=re(N,"g",{id:!0,class:!0}),B(W).forEach(b),this.h()},h(){var N,V,j,be;d(t,"text-anchor","start"),d(t,"class","chart-header sortable svelte-1dlqwym"),d(t,"x",15),d(t,"y",hn/2),d(t,"alignment-baseline","hanging"),d(a,"text-anchor","middle"),d(a,"class","chart-header sortable svelte-1dlqwym"),d(a,"x",u=(e[4]-_t)/2+_t),d(a,"y",hn/2-7),d(a,"alignment-baseline","hanging"),d(f,"class","from-label sortable svelte-1dlqwym"),d(f,"x",_t+20),d(f,"y",hn/2-5),d(f,"alignment-baseline","hanging"),d(f,"font-size","13"),d(g,"class","from-label sortable svelte-1dlqwym"),d(g,"x",U=e[4]-20),d(g,"y",hn/2-5),d(g,"text-anchor","end"),d(g,"alignment-baseline","hanging"),d(g,"font-size","13"),d(M,"id","midline"),d(M,"transform",te=`translate(${e[6](0)},0)`),d(M,"y1",20),d(M,"y2",oe=(((V=(N=e[11])==null?void 0:N.length)!=null?V:0)+1)*Ze),d(M,"stroke","rgba(0,0,0,0.7)"),d(M,"stroke-width","1"),d(M,"class","svelte-1dlqwym"),d(ie,"x1",_t),d(ie,"y1",0),d(ie,"x2",_t),d(ie,"y2",F=(((be=(j=e[11])==null?void 0:j.length)!=null?be:0)+1)*Ze),d(ie,"stroke","rgba(0,0,0,0.1)"),d(ie,"stroke-width","1"),d(G,"id","axis"),d(Y,"id","bar-content"),d(Y,"transform",`translate(${0},${hn})`),d(W,"id","bar-chart-tooltip"),d(W,"class","tooltip")},m(N,V){K(N,t,V),H(t,n),H(t,i),K(N,a,V),H(a,l),H(a,s),K(N,f,V),H(f,h),H(f,_),H(f,v),K(N,g,V),H(g,S),H(g,k),H(g,E),K(N,Y,V);for(let j=0;j<P.length;j+=1)P[j].m(Y,null);H(Y,C);for(let j=0;j<R.length;j+=1)R[j].m(Y,null);H(Y,O);for(let j=0;j<q.length;j+=1)q[j].m(Y,null);H(Y,M),H(Y,ie),H(Y,G),e[37](G),K(N,W,V),ae||(_e=[Z(t,"click",e[30]),Z(t,"keydown",R0),Z(a,"click",e[31]),Z(a,"keydown",O0),Z(f,"keydown",F0),Z(f,"click",e[32]),Z(g,"click",e[33]),Z(g,"keydown",H0)],ae=!0)},p(N,V){var j,be,ee,T,A,le;if(V[0]&3&&r!==(r=N[1]==N[0].AlphaUp?"\u2191":N[1]==N[0].AlphaDown?"\u2193":" ")&&We(i,r),V[0]&3&&o!==(o=N[1]==N[0].Up?"\u2191":N[1]==N[0].Down?"\u2193":" ")&&We(s,o),V[0]&16&&u!==(u=(N[4]-_t)/2+_t)&&d(a,"x",u),V[0]&4&&c!==(c=((j=N[2])==null?void 0:j.name)+" ")&&We(_,c),V[0]&3&&w!==(w=N[1]==N[0].LeftUp?"\u2191":N[1]==N[0].LeftDown?"\u2193":" ")&&We(v,w),V[0]&3&&p!==(p=N[1]==N[0].RightUp?"\u2191":N[1]==N[0].RightDown?"\u2193":" ")&&We(S,p),V[0]&8&&m!==(m=((be=N[3])==null?void 0:be.name)+"")&&We(E,m),V[0]&16&&U!==(U=N[4]-20)&&d(g,"x",U),V[0]&2064&&(me=N[11],P=Ct(P,V,X,1,N,me,z,Y,en,Xl,C,Yl)),V[0]&129472&&(J=N[11],R=Ct(R,V,D,1,N,J,x,Y,en,xl,O,Ul)),V[0]&6144){Q=N[11];for(let ye=0;ye<q.length;ye+=1)q[ye].r();q=Ct(q,V,fe,1,N,Q,I,Y,Vo,ql,M,Gl);for(let ye=0;ye<q.length;ye+=1)q[ye].a()}V[0]&64&&te!==(te=`translate(${N[6](0)},0)`)&&d(M,"transform",te),V[0]&2048&&oe!==(oe=(((T=(ee=N[11])==null?void 0:ee.length)!=null?T:0)+1)*Ze)&&d(M,"y2",oe),V[0]&2048&&F!==(F=(((le=(A=N[11])==null?void 0:A.length)!=null?le:0)+1)*Ze)&&d(ie,"y2",F)},i:Ne,o:Ne,d(N){N&&b(t),N&&b(a),N&&b(f),N&&b(g),N&&b(Y);for(let V=0;V<P.length;V+=1)P[V].d();for(let V=0;V<R.length;V+=1)R[V].d();for(let V=0;V<q.length;V+=1)q[V].d();e[37](null),N&&b(W),ae=!1,et(_e)}}}function zl(e){let t,n;return{c(){t=ne("rect"),this.h()},l(r){t=re(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),B(t).forEach(b),this.h()},h(){d(t,"x","0"),d(t,"y",n=e[47]*Ze+an),d(t,"height",Ze),d(t,"width",e[4]),d(t,"fill","rgba(0,0,0,0.04)"),d(t,"class","svelte-1dlqwym")},m(r,i){K(r,t,i)},p(r,i){i[0]&2048&&n!==(n=r[47]*Ze+an)&&d(t,"y",n),i[0]&16&&d(t,"width",r[4])},d(r){r&&b(t)}}}function Xl(e,t){let n,r,i=t[47]%2==0&&zl(t);return{key:e,first:null,c(){n=ge(),i&&i.c(),r=ge(),this.h()},l(a){n=ge(),i&&i.l(a),r=ge(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[47]%2==0?i?i.p(t,l):(i=zl(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&b(n),i&&i.d(a),a&&b(r)}}}function xl(e,t){let n,r,i,a,l,o,s,u,f,h,c,_,w,v,g;function p(){return t[34](t[45])}function S(){return t[35](t[45])}return{key:e,first:null,c(){n=ne("g"),r=ne("rect"),l=ne("rect"),f=ne("rect"),this.h()},l(k){n=re(k,"g",{class:!0,transform:!0});var m=B(n);r=re(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),B(r).forEach(b),l=re(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),B(l).forEach(b),f=re(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),B(f).forEach(b),m.forEach(b),this.h()},h(){d(r,"class","tab svelte-1dlqwym"),d(r,"x","0"),d(r,"y","2"),d(r,"height",Ze-4),d(r,"width",i=t[12].size>0&&t[12].has(t[45].product_id)?_t-1:6),d(r,"fill",a=t[7]?t[7](t[45].product.name):"white"),d(l,"class","country1-bar svelte-1dlqwym"),d(l,"x",o=t[6](-t[45].export_value)),d(l,"y",Rn/2),d(l,"height",Ze-Rn),d(l,"width",s=t[6](0)-t[6](-t[45].export_value)),d(l,"fill",u=t[8](t[45].location_id)),d(f,"class","country2-bar svelte-1dlqwym"),d(f,"x",h=t[6](0)),d(f,"y",Rn/2),d(f,"height",Ze-Rn),d(f,"width",c=t[6](t[45].import_value)-t[6](0)),d(f,"fill",_=t[8](t[45].partner_id)),d(n,"class","bar-row"),d(n,"transform",w=`translate(0, ${t[47]*Ze+an})`),this.first=n},m(k,m){K(k,n,m),H(n,r),H(n,l),H(n,f),v||(g=[Z(l,"focus",t[29]),Z(l,"keydown",V0),Z(l,"mouseover",function(){Re(t[14](t[45],!0))&&t[14](t[45],!0).apply(this,arguments)}),Z(l,"mousemove",t[15]()),Z(l,"mouseleave",t[16]()),Z(l,"click",p),Z(f,"focus",t[28]),Z(f,"keydown",B0),Z(f,"mouseover",function(){Re(t[14](t[45],!1))&&t[14](t[45],!1).apply(this,arguments)}),Z(f,"mousemove",t[15]()),Z(f,"mouseleave",t[16]()),Z(f,"click",S)],v=!0)},p(k,m){t=k,m[0]&6144&&i!==(i=t[12].size>0&&t[12].has(t[45].product_id)?_t-1:6)&&d(r,"width",i),m[0]&2176&&a!==(a=t[7]?t[7](t[45].product.name):"white")&&d(r,"fill",a),m[0]&2112&&o!==(o=t[6](-t[45].export_value))&&d(l,"x",o),m[0]&2112&&s!==(s=t[6](0)-t[6](-t[45].export_value))&&d(l,"width",s),m[0]&2304&&u!==(u=t[8](t[45].location_id))&&d(l,"fill",u),m[0]&64&&h!==(h=t[6](0))&&d(f,"x",h),m[0]&2112&&c!==(c=t[6](t[45].import_value)-t[6](0))&&d(f,"width",c),m[0]&2304&&_!==(_=t[8](t[45].partner_id))&&d(f,"fill",_),m[0]&2048&&w!==(w=`translate(0, ${t[47]*Ze+an})`)&&d(n,"transform",w)},d(k){k&&b(n),v=!1,et(g)}}}function ql(e,t){let n,r=t[45].product.name+"",i,a,l,o=Ne,s,u;function f(){return t[36](t[45])}return{key:e,first:null,c(){n=ne("text"),i=ke(r),this.h()},l(h){n=re(h,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var c=B(n);i=Ee(c,r),c.forEach(b),this.h()},h(){d(n,"class","product-text svelte-1dlqwym"),d(n,"alignment-baseline","hanging"),d(n,"x","10"),d(n,"y",a=t[47]*Ze+an+6),this.first=n},m(h,c){K(h,n,c),H(n,i),s||(u=[Z(n,"click",f),Z(n,"keydown",P0)],s=!0)},p(h,c){t=h,c[0]&2048&&r!==(r=t[45].product.name+"")&&We(i,r),c[0]&2048&&a!==(a=t[47]*Ze+an+6)&&d(n,"y",a)},r(){l=n.getBoundingClientRect()},f(){Bo(n),o()},a(){o(),o=Po(n,l,T0,{duration:400,delay:20})},d(h){h&&b(n),s=!1,et(u)}}}function Kl(e){let t,n,r,i,a;return{c(){t=ne("rect"),n=ne("text"),r=ke("Loading..."),this.h()},l(l){t=re(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),B(t).forEach(b),n=re(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=B(n);r=Ee(o,"Loading..."),o.forEach(b),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[4]),d(t,"height",e[10]),d(t,"fill","rgba(255,255,255,0.9)"),d(t,"class","svelte-1dlqwym"),d(n,"x",i=e[4]/2),d(n,"y",a=e[10]/2),d(n,"alignment-baseline","central"),d(n,"text-anchor","middle")},m(l,o){K(l,t,o),K(l,n,o),H(n,r)},p(l,o){o[0]&16&&d(t,"width",l[4]),o[0]&1024&&d(t,"height",l[10]),o[0]&16&&i!==(i=l[4]/2)&&d(n,"x",i),o[0]&1024&&a!==(a=l[10]/2)&&d(n,"y",a)},d(l){l&&b(t),l&&b(n)}}}function L0(e){let t,n,r,i;function a(u,f){return u[11]&&u[11].length>0?C0:N0}let l=a(e),o=l(e),s=e[9]&&Kl(e);return{c(){t=he("div"),n=ne("svg"),o.c(),r=ge(),s&&s.c(),this.h()},l(u){t=de(u,"DIV",{id:!0,class:!0});var f=B(t);n=re(f,"svg",{class:!0});var h=B(n);o.l(h),r=ge(),s&&s.l(h),h.forEach(b),f.forEach(b),this.h()},h(){d(n,"class","svelte-1dlqwym"),d(t,"id","bar-chart"),d(t,"class","viz-section svelte-1dlqwym"),on(()=>e[38].call(t))},m(u,f){K(u,t,f),H(t,n),o.m(n,null),H(n,r),s&&s.m(n,null),i=hr(t,e[38].bind(t))},p(u,f){l===(l=a(u))&&o?o.p(u,f):(o.d(1),o=l(u),o&&(o.c(),ue(o,1),o.m(n,r))),u[9]?s?s.p(u,f):(s=Kl(u),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i(u){ue(o)},o:Ne,d(u){u&&b(t),o.d(),s&&s.d(),i()}}}const hn=40,Ze=30,Wl=0,D0=10,an=30,_t=100,Rn=4,On=10,Zl=140,Jl=25,Fr=105,Tt=20,Mt=35,qt=22,R0=()=>{},O0=()=>{},F0=()=>{},H0=()=>{},V0=()=>{},B0=()=>{},P0=()=>{};function G0(e,t,n){let r,i,a,l,o,s,u,f,h,c,_,w,v;Lt(e,$t,L=>n(27,_=L)),Lt(e,Qe,L=>n(12,w=L)),Lt(e,qn,L=>n(13,v=L));let{data:g}=t;var p;(function(L){L[L.LeftUp=0]="LeftUp",L[L.LeftDown=1]="LeftDown",L[L.RightUp=2]="RightUp",L[L.RightDown=3]="RightDown",L[L.Up=4]="Up",L[L.Down=5]="Down",L[L.AlphaUp=6]="AlphaUp",L[L.AlphaDown=7]="AlphaDown"})(p||(p={}));let S=p.AlphaDown,{bilateralData:k,productColorScale:m,countryColorScale:E,country1:U,country2:Y,loadingDrilldown:P,productData:z,locationData:C}=g,R=800,x=550,O;const q=L=>Dt("$.3s")(L).replace(/G/,"B");function I(L,$,N){return L+N<R?L+$:L+$-N}function M(L,$){return L+Fr<x?L+$:L+$-Fr}function te(L,$){return N=>{let V=ve("#bar-chart-tooltip"),j=Zl+_.length*Jl;V.append("rect").attr("id","tooltip-rect").attr("width",j).attr("height",Fr).attr("x",I(N.layerX,On,j)).attr("y",M(N.layerY,On)),V.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",I(N.layerX,Tt,j)).attr("y",M(N.layerY,Mt)).style("fill",E?E($?L.location_id:L.partner_id):"black").text(`${L.product.name}`),V.append("text").attr("id","tooltip-text2").attr("x",I(N.layerX,Tt,j)).attr("y",M(N.layerY,Mt+qt)).text(($?"Export: ":"Import: ")+`${q($?L.export_value:L.import_value)}`),V.append("text").attr("id","tooltip-text3").attr("x",I(N.layerX,Tt,j)).attr("y",M(N.layerY,Mt+2*qt)).text(`Share: ${Dt(".2%")($?L.export_value/f:L.import_value/h)}`),V.append("text").attr("id","tooltip-text4").attr("x",I(N.layerX,Tt,j)).attr("y",M(N.layerY,Mt+3*qt)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function oe(){return L=>{let $=Zl+_.length*Jl;ve("#tooltip-rect").attr("x",I(L.layerX,On,$)).attr("y",M(L.layerY,On)),ve("#tooltip-text1").attr("x",I(L.layerX,Tt,$)).attr("y",M(L.layerY,Mt)),ve("#tooltip-text2").attr("x",I(L.layerX,Tt,$)).attr("y",M(L.layerY,Mt+qt)),ve("#tooltip-text3").attr("x",I(L.layerX,Tt,$)).attr("y",M(L.layerY,Mt+2*qt)),ve("#tooltip-text4").attr("x",I(L.layerX,Tt,$)).attr("y",M(L.layerY,Mt+3*qt))}}function ie(){return L=>{ve("#bar-chart-tooltip").selectAll("rect").remove(),ve("#bar-chart-tooltip").selectAll("text").remove()}}function F(L){Ke.call(this,e,L)}function G(L){Ke.call(this,e,L)}const W=()=>{S==p.AlphaDown?n(1,S=p.AlphaUp):n(1,S=p.AlphaDown)},ae=()=>{S==p.Down?n(1,S=p.Up):n(1,S=p.Down)},_e=()=>{S==p.LeftDown?n(1,S=p.LeftUp):n(1,S=p.LeftDown)},me=()=>{S==p.RightDown?n(1,S=p.RightUp):n(1,S=p.RightDown)},X=L=>{v||(qn.set(!0),Qe.update($=>($.clear(),$))),w.has(L==null?void 0:L.product_id)?Qe.update($=>{var N;return $.delete((N=L==null?void 0:L.product_id)!=null?N:-1),console.log($),$}):(L==null?void 0:L.product_id)>=0&&Qe.update($=>{var N;return $.add((N=L==null?void 0:L.product_id)!=null?N:-1),console.log($),$})},J=L=>{v&&(qn.set(!1),Qe.update($=>($.clear(),$))),w.has(L==null?void 0:L.product_id)?Qe.update($=>{var N;return $.delete((N=L==null?void 0:L.product_id)!=null?N:-1),console.log($),$}):(L==null?void 0:L.product_id)>=0&&Qe.update($=>{var N;return $.add((N=L==null?void 0:L.product_id)!=null?N:-1),console.log($),$})},D=L=>{w.has(L.product_id)?Qe.update($=>($.delete(L.product_id),$)):Qe.update($=>($.add(L.product_id),$))};function Q(L){ze[L?"unshift":"push"](()=>{O=L,n(5,O)})}function fe(){R=this.clientWidth,x=this.clientHeight,n(4,R),n(10,x)}return e.$$set=L=>{"data"in L&&n(17,g=L.data)},e.$$.update=()=>{var L,$,N;if(e.$$.dirty[0]&131072&&n(18,{bilateralData:k,productColorScale:m,countryColorScale:E,country1:U,country2:Y,loadingDrilldown:P,productData:z,locationData:C}=g,k,(n(7,m),n(17,g)),(n(8,E),n(17,g)),(n(2,U),n(17,g)),(n(3,Y),n(17,g)),(n(9,P),n(17,g)),(n(19,z),n(17,g)),(n(20,C),n(17,g))),e.$$.dirty[0]&262156&&n(26,r=(N=k==null?void 0:k.get((L=U==null?void 0:U.id)!=null?L:0))==null?void 0:N.get(($=Y==null?void 0:Y.id)!=null?$:0)),e.$$.dirty[0]&201326592&&n(25,i=_.map(V=>{var j;return(j=r==null?void 0:r.get(V))!=null?j:new Array}).flat()),e.$$.dirty[0]&35127308&&n(23,a=Array.from(Ur(i,V=>{var j,be;return V.reduce((ee,T)=>(ee.export_value+=T.export_value,ee.import_value+=T.import_value,ee),new Et(C,z,{location_id:(j=U==null?void 0:U.id)!=null?j:0,partner_id:(be=Y==null?void 0:Y.id)!=null?be:0,product_id:V[0].product_id,year:0,export_value:0,import_value:0}))},V=>V.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=a.filter(V=>V.product.level=="section")),e.$$.dirty[0]&16777219&&n(11,o=l.sort((V,j)=>{switch(S){case p.LeftUp:return V.export_value-j.export_value;case p.LeftDown:return j.export_value-V.export_value;case p.RightUp:return V.import_value-j.import_value;case p.RightDown:return j.import_value-V.import_value;case p.Up:return V.import_value+V.export_value-(j.import_value+j.export_value);case p.Down:return j.import_value+j.export_value-(V.import_value+V.export_value);case p.AlphaDown:return V.product.name.localeCompare(j.product.name);case p.AlphaUp:return j.product.name.localeCompare(V.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=pn(a,V=>V.export_value)),e.$$.dirty[0]&8388608&&n(21,u=pn(a,V=>V.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(f=Zn(a,V=>V.export_value)),e.$$.dirty[0]&8388608&&(h=Zn(a,V=>V.import_value)),e.$$.dirty[0]&6291472&&n(6,c=yn().domain([-s,u]).range([_t+Wl,R-Wl-D0])),e.$$.dirty[0]&96){let V=wa(c).tickFormat(j=>q(Math.abs(j)));ve(O).transition().call(V)}},[p,S,U,Y,R,O,c,m,E,P,x,o,w,v,te,oe,ie,g,k,z,C,u,s,a,l,i,r,_,F,G,W,ae,_e,me,X,J,D,Q,fe]}class U0 extends st{constructor(t){super(),ut(this,t,G0,L0,ft,{data:17},null,[-1,-1])}}function Ql(e,t,n){const r=e.slice();return r[53]=t[n],r}function jl(e,t,n){const r=e.slice();return r[53]=t[n],r}function $l(e,t,n){const r=e.slice();return r[53]=t[n],r}function Y0(e){let t,n,r,i,a;return{c(){t=ne("text"),n=ke("No valid data for this pair."),this.h()},l(l){t=re(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=B(t);n=Ee(o,"No valid data for this pair."),o.forEach(b),this.h()},h(){d(t,"x",r=e[2]/2),d(t,"y",i=e[3]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){K(l,t,o),H(t,n)},p(l,o){o[0]&4&&r!==(r=l[2]/2)&&d(t,"x",r),o[0]&8&&i!==(i=l[3]/2)&&d(t,"y",i)},i(l){a||on(()=>{a=ga(t,eo,{}),a.start()})},o:Ne,d(l){l&&b(t)}}}function z0(e){let t,n,r,i,a,l,o,s,u,f,h,c,_,w,v,g,p,S,k,m,E,U,Y,P,z,C,R,x,O,q,I=[],M=new Map,te,oe,ie,F=[],G=new Map,W,ae,_e,me=[],X=new Map,J,D,Q,fe=!e[15]&&ea(e),L=e[17]>0&&e[16]<0&&ta(e),$=e[13];const N=T=>T[53].year;for(let T=0;T<$.length;T+=1){let A=$l(e,$,T),le=N(A);M.set(le,I[T]=na(le,A))}let V=e[13];const j=T=>T[53].year;for(let T=0;T<V.length;T+=1){let A=jl(e,V,T),le=j(A);G.set(le,F[T]=ra(le,A))}let be=e[13];const ee=T=>T[53].year;for(let T=0;T<be.length;T+=1){let A=Ql(e,be,T),le=ee(A);X.set(le,me[T]=ia(le,A))}return{c(){t=ne("text"),n=ke("Total Trade Over Time"),i=ne("g"),fe&&fe.c(),a=ne("g"),l=ne("line"),u=ne("g"),f=ne("g"),c=ne("g"),_=ne("circle"),v=ne("text"),g=ke("Export"),p=ne("circle"),k=ne("text"),m=ke("Import"),E=ne("g"),U=ne("rect"),Y=ne("text"),P=ke("Deficit"),z=ne("rect"),C=ne("text"),R=ke("Surplus"),O=ne("g"),L&&L.c(),q=ge();for(let T=0;T<I.length;T+=1)I[T].c();te=ne("g"),oe=ne("path");for(let T=0;T<F.length;T+=1)F[T].c();W=ne("g"),ae=ne("path");for(let T=0;T<me.length;T+=1)me[T].c();J=ne("g"),D=ne("g"),Q=ke("''"),this.h()},l(T){t=re(T,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var A=B(t);n=Ee(A,"Total Trade Over Time"),A.forEach(b),i=re(T,"g",{class:!0}),B(i).forEach(b),fe&&fe.l(T),a=re(T,"g",{id:!0,transform:!0});var le=B(a);l=re(le,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),B(l).forEach(b),le.forEach(b),u=re(T,"g",{id:!0,transform:!0}),B(u).forEach(b),f=re(T,"g",{id:!0,transform:!0}),B(f).forEach(b),c=re(T,"g",{id:!0,transform:!0});var ye=B(c);_=re(ye,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),B(_).forEach(b),v=re(ye,"text",{x:!0,y:!0,"text-anchor":!0});var Fe=B(v);g=Ee(Fe,"Export"),Fe.forEach(b),p=re(ye,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),B(p).forEach(b),k=re(ye,"text",{x:!0,y:!0,"text-anchor":!0});var Be=B(k);m=Ee(Be,"Import"),Be.forEach(b),ye.forEach(b),E=re(T,"g",{id:!0,transform:!0});var Xe=B(E);U=re(Xe,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),B(U).forEach(b),Y=re(Xe,"text",{x:!0,y:!0,"text-anchor":!0});var tt=B(Y);P=Ee(tt,"Deficit"),tt.forEach(b),z=re(Xe,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),B(z).forEach(b),C=re(Xe,"text",{x:!0,y:!0,"text-anchor":!0});var lt=B(C);R=Ee(lt,"Surplus"),lt.forEach(b),Xe.forEach(b),O=re(T,"g",{id:!0});var Ye=B(O);L&&L.l(Ye),q=ge();for(let Te=0;Te<I.length;Te+=1)I[Te].l(Ye);Ye.forEach(b),te=re(T,"g",{class:!0});var ce=B(te);oe=re(ce,"path",{fill:!0,stroke:!0,"stroke-width":!0}),B(oe).forEach(b);for(let Te=0;Te<F.length;Te+=1)F[Te].l(ce);ce.forEach(b),W=re(T,"g",{class:!0});var we=B(W);ae=re(we,"path",{fill:!0,stroke:!0,"stroke-width":!0}),B(ae).forEach(b);for(let Te=0;Te<me.length;Te+=1)me[Te].l(we);we.forEach(b),J=re(T,"g",{}),B(J).forEach(b),D=re(T,"g",{id:!0,class:!0}),B(D).forEach(b),Q=Ee(T,"''"),this.h()},h(){d(t,"class","chart-header"),d(t,"x",r=e[2]/2),d(t,"y",it-5),d(t,"text-anchor","middle"),d(i,"class","brush"),d(l,"id","xAxisLine"),d(l,"x1",sr),d(l,"x2",o=e[2]-kt),d(l,"y1","0"),d(l,"y2","0"),d(l,"stroke","rgba(0,0,0,0.7)"),d(l,"stroke-width","1"),d(a,"id","xAxis"),d(a,"transform",s=`translate(${0},${e[3]-it})`),d(u,"id","yAisLeft"),d(u,"transform",`translate(${sr},${0})`),d(f,"id","yAisRight"),d(f,"transform",h=`translate(${e[2]-kt},${0})`),d(_,"class","circ1"),d(_,"cx","20"),d(_,"cy","10"),d(_,"r","5"),d(_,"fill",w=e[14](e[0])),d(_,"stroke","rgba(0,0,0,0)"),d(_,"stroke-width","2"),d(v,"x","30"),d(v,"y","15"),d(v,"text-anchor","start"),d(p,"class","circ2"),d(p,"cx","20"),d(p,"cy","25"),d(p,"r","5"),d(p,"fill",S=e[14](e[1])),d(p,"stroke","rgba(0,0,0,0)"),d(p,"stroke-width","2"),d(k,"x","30"),d(k,"y","30"),d(k,"text-anchor","start"),d(c,"id","legendLeft"),d(c,"transform","translate(10,6)"),d(U,"class","deficit svelte-o11v01"),d(U,"x","15"),d(U,"y","5"),d(U,"width","10"),d(U,"height","10"),d(U,"fill",fr),d(U,"opacity","0.6"),d(Y,"x","30"),d(Y,"y","15"),d(Y,"text-anchor","start"),d(z,"class","surplus svelte-o11v01"),d(z,"x","15"),d(z,"y","20"),d(z,"width","10"),d(z,"height","10"),d(z,"fill",ur),d(z,"opacity","0.6"),d(C,"x","30"),d(C,"y","30"),d(C,"text-anchor","start"),d(E,"id","legendRight"),d(E,"transform",x=`translate(${e[2]-2*kt+5},6)`),d(O,"id","net-values-group"),d(oe,"fill","none"),d(oe,"stroke",ie=e[14](e[0])),d(oe,"stroke-width","2"),d(te,"class","country1-group country-group svelte-o11v01"),d(ae,"fill","none"),d(ae,"stroke",_e=e[14](e[1])),d(ae,"stroke-width","2"),d(W,"class","country2-group country-group svelte-o11v01"),d(D,"id","line-chart-tooltip"),d(D,"class","tooltip")},m(T,A){K(T,t,A),H(t,n),K(T,i,A),e[40](i),fe&&fe.m(T,A),K(T,a,A),H(a,l),e[41](a),K(T,u,A),e[42](u),K(T,f,A),e[43](f),K(T,c,A),H(c,_),H(c,v),H(v,g),H(c,p),H(c,k),H(k,m),K(T,E,A),H(E,U),H(E,Y),H(Y,P),H(E,z),H(E,C),H(C,R),K(T,O,A),L&&L.m(O,null),H(O,q);for(let le=0;le<I.length;le+=1)I[le].m(O,null);K(T,te,A),H(te,oe),e[44](oe);for(let le=0;le<F.length;le+=1)F[le].m(te,null);K(T,W,A),H(W,ae),e[45](ae);for(let le=0;le<me.length;le+=1)me[le].m(W,null);K(T,J,A),K(T,D,A),K(T,Q,A)},p(T,A){A[0]&4&&r!==(r=T[2]/2)&&d(t,"x",r),T[15]?fe&&(fe.d(1),fe=null):fe?fe.p(T,A):(fe=ea(T),fe.c(),fe.m(a.parentNode,a)),A[0]&4&&o!==(o=T[2]-kt)&&d(l,"x2",o),A[0]&8&&s!==(s=`translate(${0},${T[3]-it})`)&&d(a,"transform",s),A[0]&4&&h!==(h=`translate(${T[2]-kt},${0})`)&&d(f,"transform",h),A[0]&16385&&w!==(w=T[14](T[0]))&&d(_,"fill",w),A[0]&16386&&S!==(S=T[14](T[1]))&&d(p,"fill",S),A[0]&4&&x!==(x=`translate(${T[2]-2*kt+5},6)`)&&d(E,"transform",x),T[17]>0&&T[16]<0?L?L.p(T,A):(L=ta(T),L.c(),L.m(O,q)):L&&(L.d(1),L=null),A[0]&65810432&&($=T[13],I=Ct(I,A,N,1,T,$,M,O,en,na,null,$l)),A[0]&16385&&ie!==(ie=T[14](T[0]))&&d(oe,"stroke",ie),A[0]&10254337&&(V=T[13],F=Ct(F,A,j,1,T,V,G,te,en,ra,null,jl)),A[0]&16386&&_e!==(_e=T[14](T[1]))&&d(ae,"stroke",_e),A[0]&10254338&&(be=T[13],me=Ct(me,A,ee,1,T,be,X,W,en,ia,null,Ql))},i:Ne,o:Ne,d(T){T&&b(t),T&&b(i),e[40](null),fe&&fe.d(T),T&&b(a),e[41](null),T&&b(u),e[42](null),T&&b(f),e[43](null),T&&b(c),T&&b(E),T&&b(O),L&&L.d();for(let A=0;A<I.length;A+=1)I[A].d();T&&b(te),e[44](null);for(let A=0;A<F.length;A+=1)F[A].d();T&&b(W),e[45](null);for(let A=0;A<me.length;A+=1)me[A].d();T&&b(J),T&&b(D),T&&b(Q)}}}function ea(e){let t,n,r;return{c(){t=ne("rect"),this.h()},l(i){t=re(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),B(t).forEach(b),this.h()},h(){d(t,"class","timebar svelte-o11v01"),d(t,"x",n=e[12](e[18][0])-12),d(t,"y",44),d(t,"width","24"),d(t,"height",r=e[3]-44-it),d(t,"fill","rgba(0,0,0,0.2)")},m(i,a){K(i,t,a)},p(i,a){a[0]&266240&&n!==(n=i[12](i[18][0])-12)&&d(t,"x",n),a[0]&8&&r!==(r=i[3]-44-it)&&d(t,"height",r)},d(i){i&&b(t)}}}function ta(e){let t,n,r,i;return{c(){t=ne("line"),this.h()},l(a){t=re(a,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),B(t).forEach(b),this.h()},h(){d(t,"id","zeroline"),d(t,"x1",sr),d(t,"x2",n=e[2]-kt),d(t,"y1",r=e[10](0)),d(t,"y2",i=e[10](0)),d(t,"stroke","rgba(0,0,0,0.7)"),d(t,"stroke-width","1")},m(a,l){K(a,t,l)},p(a,l){l[0]&4&&n!==(n=a[2]-kt)&&d(t,"x2",n),l[0]&1024&&r!==(r=a[10](0))&&d(t,"y1",r),l[0]&1024&&i!==(i=a[10](0))&&d(t,"y2",i)},d(a){a&&b(t)}}}function na(e,t){let n,r,i,a,l,o,s,u;return{key:e,first:null,c(){n=ne("rect"),this.h()},l(f){n=re(f,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),B(n).forEach(b),this.h()},h(){d(n,"x",r=t[12](t[53].year)-vn/2),d(n,"width",vn),d(n,"y",i=t[24](t[53])),d(n,"height",a=t[25](t[53])),d(n,"fill",l=t[53].export_value<t[53].import_value?fr:ur),d(n,"stroke",o=t[18].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"opacity","0.6"),d(n,"class","svelte-o11v01"),this.first=n},m(f,h){K(f,n,h),s||(u=[Z(n,"click",function(){Re(t[19](t[53].year))&&t[19](t[53].year).apply(this,arguments)}),Z(n,"keydown",q0),Z(n,"keypress",t[37]),Z(n,"click",function(){Re(t[19](t[53].year))&&t[19](t[53].year).apply(this,arguments)}),Z(n,"focus",t[38]),Z(n,"blur",t[39]),Z(n,"mouseover",function(){Re(t[21](t[53]))&&t[21](t[53]).apply(this,arguments)}),Z(n,"mousemove",t[22]()),Z(n,"mouseout",t[23]())],s=!0)},p(f,h){t=f,h[0]&12288&&r!==(r=t[12](t[53].year)-vn/2)&&d(n,"x",r),h[0]&8192&&i!==(i=t[24](t[53]))&&d(n,"y",i),h[0]&8192&&a!==(a=t[25](t[53]))&&d(n,"height",a),h[0]&8192&&l!==(l=t[53].export_value<t[53].import_value?fr:ur)&&d(n,"fill",l),h[0]&270336&&o!==(o=t[18].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",o)},d(f){f&&b(n),s=!1,et(u)}}}function ra(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=ne("circle"),this.h()},l(u){n=re(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),B(n).forEach(b),this.h()},h(){d(n,"class","circ1 svelte-o11v01"),d(n,"cx",r=t[12](t[53].year)),d(n,"cy",i=t[11](t[53].export_value)),d(n,"r","6"),d(n,"fill",a=t[14](t[0])),d(n,"stroke",l=t[18].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),this.first=n},m(u,f){K(u,n,f),o||(s=[Z(n,"click",function(){Re(t[19](t[53].year))&&t[19](t[53].year).apply(this,arguments)}),Z(n,"keydown",K0),Z(n,"keypress",t[34]),Z(n,"click",function(){Re(t[19](t[53].year))&&t[19](t[53].year).apply(this,arguments)}),Z(n,"focus",t[35]),Z(n,"blur",t[36]),Z(n,"mouseover",function(){Re(t[20](t[53],!0))&&t[20](t[53],!0).apply(this,arguments)}),Z(n,"mouseout",t[23]())],o=!0)},p(u,f){t=u,f[0]&12288&&r!==(r=t[12](t[53].year))&&d(n,"cx",r),f[0]&10240&&i!==(i=t[11](t[53].export_value))&&d(n,"cy",i),f[0]&16385&&a!==(a=t[14](t[0]))&&d(n,"fill",a),f[0]&270336&&l!==(l=t[18].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&b(n),o=!1,et(s)}}}function ia(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=ne("circle"),this.h()},l(u){n=re(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),B(n).forEach(b),this.h()},h(){d(n,"cx",r=t[12](t[53].year)),d(n,"cy",i=t[11](t[53].import_value)),d(n,"r","6"),d(n,"fill",a=t[14](t[1])),d(n,"stroke",l=t[18].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),d(n,"class","svelte-o11v01"),this.first=n},m(u,f){K(u,n,f),o||(s=[Z(n,"click",function(){Re(t[19](t[53].year))&&t[19](t[53].year).apply(this,arguments)}),Z(n,"keydown",W0),Z(n,"keypress",t[31]),Z(n,"click",function(){Re(t[19](t[53].year))&&t[19](t[53].year).apply(this,arguments)}),Z(n,"focus",t[32]),Z(n,"blur",t[33]),Z(n,"mouseover",function(){Re(t[20](t[53],!1))&&t[20](t[53],!1).apply(this,arguments)}),Z(n,"mouseout",t[23]())],o=!0)},p(u,f){t=u,f[0]&12288&&r!==(r=t[12](t[53].year))&&d(n,"cx",r),f[0]&10240&&i!==(i=t[11](t[53].import_value))&&d(n,"cy",i),f[0]&16386&&a!==(a=t[14](t[1]))&&d(n,"fill",a),f[0]&270336&&l!==(l=t[18].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&b(n),o=!1,et(s)}}}function X0(e){let t,n,r;function i(o,s){return o[13].length>0?z0:Y0}let a=i(e),l=a(e);return{c(){t=he("div"),n=ne("svg"),l.c(),this.h()},l(o){t=de(o,"DIV",{id:!0,class:!0});var s=B(t);n=re(s,"svg",{width:!0,height:!0});var u=B(n);l.l(u),u.forEach(b),s.forEach(b),this.h()},h(){d(n,"width",e[2]),d(n,"height",e[3]),d(t,"id","line-chart"),d(t,"class","viz-section"),on(()=>e[46].call(t))},m(o,s){K(o,t,s),H(t,n),l.m(n,null),r=hr(t,e[46].bind(t))},p(o,s){a===(a=i(o))&&l?l.p(o,s):(l.d(1),l=a(o),l&&(l.c(),ue(l,1),l.m(n,null))),s[0]&4&&d(n,"width",o[2]),s[0]&8&&d(n,"height",o[3])},i(o){ue(l)},o:Ne,d(o){o&&b(t),l.d(),r()}}}const it=35,Fn=15,sr=50,kt=50,vn=16,Kt=10,Hn=180,wt=68,x0=22,bt=20,Hr=35,Wt=37,Zt=22,ur="#4daf4a",fr="#e41a1c",q0=()=>{},K0=()=>{},W0=()=>{};function Z0(e,t,n){let r,i,a,l,o,s,u,f,h;Lt(e,Qe,A=>n(30,f=A)),Lt(e,$t,A=>n(18,h=A));let{data:c}=t,{bilateralData:_,locationData:w,productData:v,country1_id:g,country2_id:p,countryColorScale:S}=c,k=800,m=378;const E=A=>Dt("$.3s")(A).replace(/G/,"B");let U,Y,P,z,C,R,x=!1,O;function q(A){return()=>$t.set([A])}function I(A,le){return A+Hn<k?A+le:A+le-Hn}function M(A,le,ye){return A+ye<m?A+le:A+le-wt}function te(A,le){return ye=>{var Xe,tt,lt;let Fe=ve("#line-chart-tooltip"),Be=wt+O.length*x0;if(Fe.append("rect").attr("width",Hn).attr("height",Be).attr("x",I(ye.layerX,Kt)).attr("y",M(ye.layerY,Kt,Be)),Fe.append("text").attr("class","title").attr("x",I(ye.layerX,bt)).attr("y",M(ye.layerY,Hr,Be)).style("fill",S?S(le?A.location_id:A.partner_id):"black").text(`${A.year} `+(le?"Export":"Import")),f.size>0){for(let Ye=0;Ye<O.length;Ye++){let ce=(Xe=i==null?void 0:i.get(A.year))==null?void 0:Xe.filter(we=>we.product.name==O[Ye])[0];Fe.append("text").attr("x",I(ye.layerX,bt)).attr("y",M(ye.layerY,Wt+(Ye+1)*Zt,Be)).text(`${O[Ye]}: ${E(le?(tt=ce==null?void 0:ce.export_value)!=null?tt:0:(lt=ce==null?void 0:ce.import_value)!=null?lt:0)}`)}Fe.append("text").attr("x",I(ye.layerX,bt)).attr("y",M(ye.layerY,Wt+(O.length+1)*Zt,Be)).style("font-weight","bold").text(`Selected Total:  ${E(le?A.export_value:A.import_value)}`)}else Fe.append("text").attr("x",I(ye.layerX,bt)).attr("y",M(ye.layerY,Wt+Zt,Be)).text((f.size==0?"Total: ":"Selected Total: ")+`${E(le?A.export_value:A.import_value)}`),Fe.append("text").attr("x",I(ye.layerX,bt)).attr("y",M(ye.layerY,Wt+2*Zt,Be)).text("Sectors: All")}}function oe(A){return le=>{let ye=ve("#line-chart-tooltip"),Fe=A.export_value-A.import_value;ye.append("rect").attr("id","tooltip-rect").attr("width",Hn).attr("height",wt).attr("x",I(le.layerX,Kt)).attr("y",M(le.layerY,Kt,wt)),ye.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",I(le.layerX,bt)).attr("y",M(le.layerY,Hr,wt)).style("fill",Fe<0?fr:ur).text(`${A.year} `+(Fe<0?"Deficit":"Surplus")),ye.append("text").attr("id","tooltip-text2").attr("x",I(le.layerX,bt)).attr("y",M(le.layerY,Wt+Zt,wt)).text((f.size>0?"Selected ":"")+`Total: ${E(Math.abs(A.export_value-A.import_value))}`)}}function ie(){return A=>{ve("#tooltip-rect").attr("x",I(A.layerX,Kt)).attr("y",M(A.layerY,Kt,wt)),ve("#tooltip-text1").attr("x",I(A.layerX,bt)).attr("y",M(A.layerY,Hr,wt)),ve("#tooltip-text2").attr("x",I(A.layerX,bt)).attr("y",M(A.layerY,Wt+Zt,wt))}}function F(){return A=>{ve("#line-chart-tooltip").selectAll("rect").remove(),ve("#line-chart-tooltip").selectAll("text").remove()}}function G(A){return A.export_value<A.import_value?o<0?it+Fn:u(0):(s>0,u(A.export_value-A.import_value))}function W(A){return A.export_value<A.import_value?o<0?u(A.export_value-A.import_value)-it-Fn:u(A.export_value-A.import_value)-u(0):s>0?m-it-u(A.export_value-A.import_value):u(0)-u(A.export_value-A.import_value)}function ae(A){Ke.call(this,e,A)}function _e(A){Ke.call(this,e,A)}function me(A){Ke.call(this,e,A)}function X(A){Ke.call(this,e,A)}function J(A){Ke.call(this,e,A)}function D(A){Ke.call(this,e,A)}function Q(A){Ke.call(this,e,A)}function fe(A){Ke.call(this,e,A)}function L(A){Ke.call(this,e,A)}function $(A){ze[A?"unshift":"push"](()=>{z=A,n(7,z)})}function N(A){ze[A?"unshift":"push"](()=>{U=A,n(4,U)})}function V(A){ze[A?"unshift":"push"](()=>{Y=A,n(5,Y)})}function j(A){ze[A?"unshift":"push"](()=>{P=A,n(6,P)})}function be(A){ze[A?"unshift":"push"](()=>{C=A,n(8,C)})}function ee(A){ze[A?"unshift":"push"](()=>{R=A,n(9,R)})}function T(){k=this.clientWidth,m=this.clientHeight,n(2,k),n(3,m)}return e.$$set=A=>{"data"in A&&n(26,c=A.data)},e.$$.update=()=>{var A,le,ye,Fe,Be,Xe,tt,lt,Ye;if(e.$$.dirty[0]&67108864&&n(27,{bilateralData:_,locationData:w,productData:v,country1_id:g,country2_id:p,countryColorScale:S}=c,_,(n(28,w),n(26,c)),(n(29,v),n(26,c)),(n(0,g),n(26,c)),(n(1,p),n(26,c)),(n(14,S),n(26,c))),e.$$.dirty[0]&2013265923&&n(13,r=Array.from((ye=(le=(A=_==null?void 0:_.get(g))==null?void 0:A.get(p))==null?void 0:le.entries())!=null?ye:new Array).map(ce=>{let we=ce[0],Te=ce[1];return Te=f.size==0?Te:Te.filter(xe=>f.has(xe.product_id)),Te.reduce((xe,It)=>(xe.export_value+=It.export_value,xe.import_value+=It.import_value,xe),new Et(w,v,{location_id:g,partner_id:p,product_id:0,year:we,export_value:0,import_value:0}))}).sort((ce,we)=>ce.year-we.year)),e.$$.dirty[0]&8196&&n(12,a=yn().domain(ya(r,ce=>ce.year)).range([sr+vn/2,k-kt-vn/2])),e.$$.dirty[0]&4224){let ce=Pc().on("start brush end",we=>{if((we==null?void 0:we.selection)===null||(we==null?void 0:we.selection[1])-(we==null?void 0:we.selection[0])<5)$t.set([2020]),n(15,x=!1);else{n(15,x=!0);let Te=we.selection;const xe=Te[0],It=Te[1];let Me=Math.ceil(a.invert(xe)),St=Math.floor(a.invert(It)),Ut=[];for(let Rt=Me;Rt<=St;Rt++)Ut.push(Rt);$t.set(Ut)}});ve(z).call(ce)}if(e.$$.dirty[0]&134217731&&(i=(Fe=_==null?void 0:_.get(g))==null?void 0:Fe.get(p)),e.$$.dirty[0]&8200&&n(11,l=yn().domain([0,(Be=pn(r,ce=>Math.max(ce.export_value,ce.import_value)))!=null?Be:0]).range([m-it,it+Fn]).nice()),e.$$.dirty[0]&8192&&n(17,o=(Xe=pn(r,ce=>ce.export_value-ce.import_value))!=null?Xe:0),e.$$.dirty[0]&8192&&n(16,s=(tt=Oi(r,ce=>ce.export_value-ce.import_value))!=null?tt:0),e.$$.dirty[0]&8200&&n(10,u=yn().domain([(lt=Oi(r,ce=>ce.export_value-ce.import_value))!=null?lt:0,(Ye=pn(r,ce=>ce.export_value-ce.import_value))!=null?Ye:0]).range([m-it,it+Fn]).nice()),e.$$.dirty[0]&7280){let ce=wa(a).tickFormat(Dt("d"));ve(U).transition().call(ce).select(".domain").attr("stroke-width",0);let we=os(l).tickFormat(xe=>E(xe));ve(Y).transition().call(we);let Te=as(u).tickFormat(xe=>E(xe));ve(P).transition().call(Te)}if(e.$$.dirty[0]&14592){let ce=li();r.length>0&&(r.sort(we=>we.year),ce.moveTo(a(r[0].year),l(r[0].export_value))),r.forEach(we=>{ce.lineTo(a(we.year),l(we.export_value))}),ve(C).transition().attr("d",ce.toString())}if(e.$$.dirty[0]&14848){let ce=li();r.length>0&&ce.moveTo(a(r[0].year),l(r[0].import_value)),r.forEach(we=>{ce.lineTo(a(we.year),l(we.import_value))}),ve(R).transition().attr("d",ce.toString())}e.$$.dirty[0]&1610612736&&(O=f.size==0?["All"]:Array.from(f.values()).map(ce=>{var we,Te;return(Te=(we=v==null?void 0:v.get(ce))==null?void 0:we.name)!=null?Te:"something"}).sort())},[g,p,k,m,U,Y,P,z,C,R,u,l,a,r,S,x,s,o,h,q,te,oe,ie,F,G,W,c,_,w,v,f,ae,_e,me,X,J,D,Q,fe,L,$,N,V,j,be,ee,T]}class J0 extends st{constructor(t){super(),ut(this,t,Z0,X0,ft,{data:26},null,[-1,-1])}}const{Map:Q0}=Go;function la(e,t,n){const r=e.slice();return r[33]=t[n],r}function aa(e){let t,n,r,i,a,l,o,s,u,f=e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>10&&oa(e),h=e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>30&&sa(e);return{c(){t=ne("rect"),f&&f.c(),l=ge(),h&&h.c(),o=ge(),this.h()},l(c){t=re(c,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),B(t).forEach(b),f&&f.l(c),l=ge(),h&&h.l(c),o=ge(),this.h()},h(){var c,_,w,v;d(t,"class","leaf svelte-sixlpg"),d(t,"transform",n=`translate(${e[33].x0},${e[33].y0})`),d(t,"width",r=e[33].x1-e[33].x0),d(t,"height",i=e[33].y1-e[33].y0),d(t,"fill",a=e[5]?e[5]((v=(w=(_=(c=e[33].data)==null?void 0:c.product)==null?void 0:_.parent)==null?void 0:w.name)!=null?v:""):"white")},m(c,_){K(c,t,_),f&&f.m(c,_),K(c,l,_),h&&h.m(c,_),K(c,o,_),s||(u=[Z(t,"keydown",$0),Z(t,"click",function(){Re(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[26]),Z(t,"mouseover",function(){Re(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){Re(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],s=!0)},p(c,_){var w,v,g,p;e=c,_[0]&256&&n!==(n=`translate(${e[33].x0},${e[33].y0})`)&&d(t,"transform",n),_[0]&256&&r!==(r=e[33].x1-e[33].x0)&&d(t,"width",r),_[0]&256&&i!==(i=e[33].y1-e[33].y0)&&d(t,"height",i),_[0]&288&&a!==(a=e[5]?e[5]((p=(g=(v=(w=e[33].data)==null?void 0:w.product)==null?void 0:v.parent)==null?void 0:g.name)!=null?p:""):"white")&&d(t,"fill",a),e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>10?f?f.p(e,_):(f=oa(e),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>30?h?h.p(e,_):(h=sa(e),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},d(c){c&&b(t),f&&f.d(c),c&&b(l),h&&h.d(c),c&&b(o),s=!1,et(u)}}}function oa(e){var s,u,f;let t,n=((f=(u=(s=e[33].data)==null?void 0:s.product.name)==null?void 0:u.substring(0,40))!=null?f:"")+"",r,i,a,l,o;return{c(){t=ne("text"),r=ke(n),this.h()},l(h){t=re(h,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var c=B(t);r=Ee(c,n),c.forEach(b),this.h()},h(){d(t,"class","label svelte-sixlpg"),d(t,"transform",i=`translate(${e[33].x0+3},${e[33].y0+3})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[33].x1-e[33].x0)/15,8))},m(h,c){K(h,t,c),H(t,r),l||(o=[Z(t,"keydown",ed),Z(t,"click",function(){Re(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[25]),Z(t,"mouseover",function(){Re(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){Re(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],l=!0)},p(h,c){var _,w,v;e=h,c[0]&256&&n!==(n=((v=(w=(_=e[33].data)==null?void 0:_.product.name)==null?void 0:w.substring(0,40))!=null?v:"")+"")&&We(r,n),c[0]&256&&i!==(i=`translate(${e[33].x0+3},${e[33].y0+3})`)&&d(t,"transform",i),c[0]&256&&a!==(a=Math.max((e[33].x1-e[33].x0)/15,8))&&d(t,"font-size",a)},d(h){h&&b(t),l=!1,et(o)}}}function sa(e){let t,n=e[9](e[4]?e[33].data.export_value:e[33].data.import_value)+"",r,i,a,l,o;return{c(){t=ne("text"),r=ke(n),this.h()},l(s){t=re(s,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var u=B(t);r=Ee(u,n),u.forEach(b),this.h()},h(){d(t,"class","label-num svelte-sixlpg"),d(t,"transform",i=`translate(${e[33].x0+5},${e[33].y0+1+Math.max((e[33].x1-e[33].x0)/10,8)})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[33].x1-e[33].x0)/15,8)-1),d(t,"font-weight","300")},m(s,u){K(s,t,u),H(t,r),l||(o=[Z(t,"keydown",td),Z(t,"click",function(){Re(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[24]),Z(t,"mouseover",function(){Re(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){Re(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],l=!0)},p(s,u){e=s,u[0]&272&&n!==(n=e[9](e[4]?e[33].data.export_value:e[33].data.import_value)+"")&&We(r,n),u[0]&256&&i!==(i=`translate(${e[33].x0+5},${e[33].y0+1+Math.max((e[33].x1-e[33].x0)/10,8)})`)&&d(t,"transform",i),u[0]&256&&a!==(a=Math.max((e[33].x1-e[33].x0)/15,8)-1)&&d(t,"font-size",a)},d(s){s&&b(t),l=!1,et(o)}}}function ua(e,t){let n,r,i=t[3].length>0&&t[33].x1!=NaN&&t[33].x0!=NaN&&t[33].y0!=NaN&&t[33].y1!=NaN&&aa(t);return{key:e,first:null,c(){n=ge(),i&&i.c(),r=ge(),this.h()},l(a){n=ge(),i&&i.l(a),r=ge(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[3].length>0&&t[33].x1!=NaN&&t[33].x0!=NaN&&t[33].y0!=NaN&&t[33].y1!=NaN?i?i.p(t,l):(i=aa(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&b(n),i&&i.d(a),a&&b(r)}}}function fa(e){let t,n,r,i=e[6]?"Loading...":"No valid data for this pair.",a,l,o;return{c(){t=ne("rect"),r=ne("text"),a=ke(i),this.h()},l(s){t=re(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),B(t).forEach(b),r=re(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=B(r);a=Ee(u,i),u.forEach(b),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[0]),d(t,"height",e[1]),d(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),d(r,"x",l=e[0]/2),d(r,"y",o=e[1]/2),d(r,"alignment-baseline","central"),d(r,"text-anchor","middle")},m(s,u){K(s,t,u),K(s,r,u),H(r,a)},p(s,u){u[0]&1&&d(t,"width",s[0]),u[0]&2&&d(t,"height",s[1]),u[0]&64&&n!==(n=s[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&d(t,"fill",n),u[0]&64&&i!==(i=s[6]?"Loading...":"No valid data for this pair.")&&We(a,i),u[0]&1&&l!==(l=s[0]/2)&&d(r,"x",l),u[0]&2&&o!==(o=s[1]/2)&&d(r,"y",o)},d(s){s&&b(t),s&&b(r)}}}function j0(e){var h,c;let t,n,r,i=[],a=new Q0,l,o,s=e[8];const u=_=>_[33].data.product_id;for(let _=0;_<s.length;_+=1){let w=la(e,s,_),v=u(w);a.set(v,i[_]=ua(v,w))}let f=((c=(h=e[2])==null?void 0:h.length)!=null?c:0)===0&&fa(e);return{c(){t=he("div"),n=ne("svg"),r=ne("g");for(let _=0;_<i.length;_+=1)i[_].c();l=ne("g"),f&&f.c(),this.h()},l(_){t=de(_,"DIV",{class:!0});var w=B(t);n=re(w,"svg",{class:!0});var v=B(n);r=re(v,"g",{class:!0});var g=B(r);for(let p=0;p<i.length;p+=1)i[p].l(g);g.forEach(b),l=re(v,"g",{id:!0,class:!0}),B(l).forEach(b),f&&f.l(v),v.forEach(b),w.forEach(b),this.h()},h(){d(r,"class","treemap svelte-sixlpg"),d(l,"id","treemap-tooltip"),d(l,"class","tooltip"),d(n,"class","svelte-sixlpg"),d(t,"class","viz-section-full"),on(()=>e[28].call(t))},m(_,w){K(_,t,w),H(t,n),H(n,r);for(let v=0;v<i.length;v+=1)i[v].m(r,null);e[27](r),H(n,l),f&&f.m(n,null),o=hr(t,e[28].bind(t))},p(_,w){var v,g;w[0]&16184&&(s=_[8],i=Ct(i,w,u,1,_,s,a,r,en,ua,null,la)),((g=(v=_[2])==null?void 0:v.length)!=null?g:0)===0?f?f.p(_,w):(f=fa(_),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i:Ne,o:Ne,d(_){_&&b(t);for(let w=0;w<i.length;w+=1)i[w].d();e[27](null),f&&f.d(),o()}}}const Jt=10,Vn=120,ca=25,Vr=90,ht=20,dt=28,Nt=15,$0=()=>{},ed=()=>{},td=()=>{};function nd(e,t,n){let r,i,a,l,o,s,u,f,h;Lt(e,Qe,F=>n(23,u=F)),Lt(e,$t,F=>n(3,f=F)),Lt(e,qn,F=>n(4,h=F));const c=F=>Dt("$.3s")(F).replace(/G/,"B");let{data:_}=t,{country1:w,country2:v,productColorScale:g,drilldownBilateral:p,loadingDrilldown:S,locationData:k,productData:m}=_,E=0,U=0,Y,P=new Array;function z(F,G,W){return F+W<E?F+G:F+G-W}function C(F,G){return F+Vr<U?F+G:F+G-Vr}function R(F){return G=>{var _e,me,X;let W=ve("#treemap-tooltip"),ae=Math.max(Vn+f.length*ca,Vn+10+(F.product.name.length-20)*8);console.log("x",z(G.layerX,Jt,ae)),console.log("y",C(G.layerY,Jt)),W.append("rect").attr("id","tooltip-rect").attr("width",ae).attr("height",Vr).attr("x",z(G.layerX,Jt,ae)).attr("y",C(G.layerY,Jt)),W.append("text").attr("class","treemap").attr("id","tooltip-text1").attr("x",z(G.layerX,ht,ae)).attr("y",C(G.layerY,dt)).style("font-weight","bold").text(`${F.product.name}`),W.append("text").attr("class","treemap").attr("id","tooltip-text2").attr("x",z(G.layerX,ht,ae)).attr("y",C(G.layerY,dt+Nt)).text(`Sector: ${(X=(me=(_e=F.product)==null?void 0:_e.parent)==null?void 0:me.name)!=null?X:""}`),W.append("text").attr("class","treemap").attr("id","tooltip-text3").attr("x",z(G.layerX,ht,ae)).attr("y",C(G.layerY,dt+2*Nt)).text((h?"Export: ":"Import: ")+`${c(h?F.export_value:F.import_value)}`),W.append("text").attr("class","treemap").attr("id","tooltip-text4").attr("x",z(G.layerX,ht,ae)).attr("y",C(G.layerY,dt+3*Nt)).text(`Share: ${Dt(".2%")(h?F.export_value/l:F.import_value/o)}`),W.append("text").attr("class","treemap").attr("id","tooltip-text5").attr("x",z(G.layerX,ht,ae)).attr("y",C(G.layerY,dt+4*Nt)).text((f.length>1?"Years: ":"Year: ")+`${f.join(", ")}`)}}function x(F){return G=>{let W=Math.max(Vn+f.length*ca,Vn+10+(F.product.name.length-20)*8);ve("#tooltip-rect").attr("x",z(G.layerX,Jt,W)).attr("y",C(G.layerY,Jt)),ve("#tooltip-text1").attr("x",z(G.layerX,ht,W)).attr("y",C(G.layerY,dt)),ve("#tooltip-text2").attr("x",z(G.layerX,ht,W)).attr("y",C(G.layerY,dt+Nt)),ve("#tooltip-text3").attr("x",z(G.layerX,ht,W)).attr("y",C(G.layerY,dt+2*Nt)),ve("#tooltip-text4").attr("x",z(G.layerX,ht,W)).attr("y",C(G.layerY,dt+3*Nt)),ve("#tooltip-text5").attr("x",z(G.layerX,ht,W)).attr("y",C(G.layerY,dt+4*Nt))}}function O(){return F=>{ve("#treemap-tooltip").selectAll("rect").remove(),ve("#treemap-tooltip").selectAll("text").remove()}}function q(F){return G=>{var W,ae,_e,me;((W=F==null?void 0:F.product)==null?void 0:W.parent)&&u.has((_e=(ae=F==null?void 0:F.product)==null?void 0:ae.parent)==null?void 0:_e.id)?Qe.update(X=>{var J,D,Q;return X.delete((Q=(D=(J=F==null?void 0:F.product)==null?void 0:J.parent)==null?void 0:D.id)!=null?Q:-1),console.log(X),X}):((me=F==null?void 0:F.product)==null?void 0:me.parent)!=null&&Qe.update(X=>{var J,D,Q;return X.add((Q=(D=(J=F==null?void 0:F.product)==null?void 0:J.parent)==null?void 0:D.id)!=null?Q:-1),console.log(X),X})}}function I(F){Ke.call(this,e,F)}function M(F){Ke.call(this,e,F)}function te(F){Ke.call(this,e,F)}function oe(F){ze[F?"unshift":"push"](()=>{Y=F,n(7,Y)})}function ie(){E=this.clientWidth,U=this.clientHeight,n(0,E),n(1,U)}return e.$$set=F=>{"data"in F&&n(14,_=F.data)},e.$$.update=()=>{var F;if(e.$$.dirty[0]&16384&&n(17,{drilldownBilateral:p,productColorScale:g,country1:w,country2:v,loadingDrilldown:S,locationData:k,productData:m}=_,p,(n(5,g),n(14,_)),(n(15,w),n(14,_)),(n(16,v),n(14,_)),(n(6,S),n(14,_)),(n(18,k),n(14,_)),(n(19,m),n(14,_))),e.$$.dirty[0]&196608&&n(22,r=p==null?void 0:p.get((F=v==null?void 0:v.id)!=null?F:0)),e.$$.dirty[0]&4194312&&n(20,i=f.map(G=>{var W;return(W=r==null?void 0:r.get(G))!=null?W:new Array}).flat()),e.$$.dirty[0]&1933312&&n(21,a=Array.from(Ur(i,G=>G.reduce((W,ae)=>(W.export_value+=ae.export_value,W.import_value+=ae.import_value,W),new Et(k,m,{location_id:w,partner_id:v,product_id:G[0].product_id,year:0,export_value:0,import_value:0})),G=>G.product_id).values())),e.$$.dirty[0]&2097152&&(l=Zn(a,G=>G.export_value)),e.$$.dirty[0]&2097152&&(o=Zn(a,G=>G.import_value)),e.$$.dirty[0]&12419072&&n(2,s=u.size==0?a:Array.from(Ur(i.filter(G=>u.has(G.product.parent_id)),G=>G.reduce((W,ae)=>(W.export_value+=ae.export_value,W.import_value+=ae.import_value,W),new Et(k,m,{location_id:w,partner_id:v,product_id:G[0].product_id,year:0,export_value:0,import_value:0})),G=>G.product_id).values())),e.$$.dirty[0]&8486935&&s&&s.length>0){let G=[];if(u.size==1){let ae=u.entries().next().value[1];console.log(ae);let _e=new Et(new Map,new Map,{location_id:w,partner_id:v,product_id:ae,year:0,export_value:0,import_value:0});_e.product=new Kn({product_id:ae,name:"Sector",level:-1,parent_id:-1}),_e.product.parent_id=null,G.push(_e)}else{let ae=new Et(new Map,new Map,{location_id:w,partner_id:v,product_id:-1,year:0,export_value:0,import_value:0});ae.product=new Kn({product_id:-1,name:"All",level:-1,parent_id:-1}),ae.product.parent_id=null,G.push(ae);let _e=Gr(s,me=>{var X,J;return(J=(X=me.product)==null?void 0:X.parent_id)!=null?J:-1});if(_e.size>1)for(let[me,X]of _e){let J=new Et(new Map,new Map,{location_id:w,partner_id:v,product_id:me,year:0,export_value:0,import_value:0});J.product=new Kn({product_id:me,name:"Something",level:0,parent_id:-1}),G.push(J)}}G=G.concat(s);let W=Dh().id(ae=>{var _e;return(_e=ae.product)==null?void 0:_e.id}).parentId(ae=>{var _e;return(_e=ae.product)==null?void 0:_e.parent_id})(G);W.sum(ae=>Math.max(0,ae[h?"export_value":"import_value"])),Bh().tile(Ph).size([E,U]).padding(2)(W),n(8,P=W.leaves())}},[E,U,s,f,h,g,S,Y,P,c,R,x,O,q,_,w,v,p,k,m,i,a,r,u,I,M,te,oe,ie]}class rd extends st{constructor(t){super(),ut(this,t,nd,j0,ft,{data:14},null,[-1,-1])}}const id=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),Bn=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=id.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function ld(e){let t,n,r,i,a,l;return{c(){t=he("div"),n=he("h3"),r=ke("Loading data..."),i=Ae(),a=ne("svg"),l=ne("circle"),this.h()},l(o){t=de(o,"DIV",{class:!0});var s=B(t);n=de(s,"H3",{});var u=B(n);r=Ee(u,"Loading data..."),u.forEach(b),i=Ie(s),a=re(s,"svg",{class:!0,viewBox:!0});var f=B(a);l=re(f,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),B(l).forEach(b),f.forEach(b),s.forEach(b),this.h()},h(){d(l,"class","path svelte-y1v82d"),d(l,"cx","25"),d(l,"cy","25"),d(l,"r","20"),d(l,"fill","none"),d(l,"stroke-width","5"),d(a,"class","spinner svelte-y1v82d"),d(a,"viewBox","0 0 50 50"),d(t,"class","loading svelte-y1v82d")},m(o,s){K(o,t,s),H(t,n),H(n,r),H(t,i),H(t,a),H(a,l)},p:Ne,i:Ne,o:Ne,d(o){o&&b(t)}}}function ad(e){var W,ae,_e,me;let t,n,r,i,a,l,o,s,u,f,h,c,_,w,v,g,p,S,k,m,E,U,Y,P,z,C,R,x,O,q,I,M,te,oe,ie,F,G;return u=new Pl({props:{optionIdentifier:ha,labelIdentifier:da,items:Array.from(e[0].values()),value:e[2]}}),u.$on("select",e[9]),k=new Pl({props:{optionIdentifier:ha,labelIdentifier:da,items:Array.from(e[0].values()),value:e[8]}}),k.$on("select",e[10]),O=new J0({props:{data:{bilateralData:e[5],country1_id:(ae=(W=e[2])==null?void 0:W.id)!=null?ae:0,country2_id:(me=(_e=e[8])==null?void 0:_e.id)!=null?me:0,productData:e[1],locationData:e[0],countryColorScale:e[3]}}}),I=new U0({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[5],loadingDrilldown:e[7],productColorScale:e[4],country1:e[2],country2:e[8],countryColorScale:e[3]}}}),oe=new rd({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7]}}}),{c(){t=he("div"),n=he("img"),i=Ae(),a=he("div"),l=he("span"),o=ke("Country"),s=Ae(),Ce(u.$$.fragment),f=Ae(),h=he("div"),c=he("button"),_=ke("\u2194"),w=Ae(),v=he("div"),g=he("span"),p=ke("Partner"),S=Ae(),Ce(k.$$.fragment),m=Ae(),E=he("img"),Y=Ae(),P=he("div"),z=Ae(),C=he("div"),R=he("div"),x=he("div"),Ce(O.$$.fragment),q=Ae(),Ce(I.$$.fragment),M=Ae(),te=he("div"),Ce(oe.$$.fragment),this.h()},l(X){t=de(X,"DIV",{class:!0});var J=B(t);n=de(J,"IMG",{class:!0,alt:!0,src:!0}),i=Ie(J),a=de(J,"DIV",{class:!0});var D=B(a);l=de(D,"SPAN",{class:!0});var Q=B(l);o=Ee(Q,"Country"),Q.forEach(b),s=Ie(D),je(u.$$.fragment,D),D.forEach(b),f=Ie(J),h=de(J,"DIV",{class:!0});var fe=B(h);c=de(fe,"BUTTON",{class:!0});var L=B(c);_=Ee(L,"\u2194"),L.forEach(b),fe.forEach(b),w=Ie(J),v=de(J,"DIV",{class:!0});var $=B(v);g=de($,"SPAN",{class:!0});var N=B(g);p=Ee(N,"Partner"),N.forEach(b),S=Ie($),je(k.$$.fragment,$),$.forEach(b),m=Ie(J),E=de(J,"IMG",{class:!0,alt:!0,src:!0}),J.forEach(b),Y=Ie(X),P=de(X,"DIV",{class:!0});var V=B(P);V.forEach(b),z=Ie(X),C=de(X,"DIV",{id:!0,class:!0});var j=B(C);R=de(j,"DIV",{id:!0,class:!0});var be=B(R);x=de(be,"DIV",{class:!0});var ee=B(x);je(O.$$.fragment,ee),q=Ie(ee),je(I.$$.fragment,ee),ee.forEach(b),M=Ie(be),te=de(be,"DIV",{class:!0});var T=B(te);je(oe.$$.fragment,T),T.forEach(b),be.forEach(b),j.forEach(b),this.h()},h(){var X,J,D,Q;d(n,"class","country-icon svelte-y1v82d"),d(n,"alt","Select a country"),Tn(n.src,r=Bn((J=(X=e[2])==null?void 0:X.code)!=null?J:"ATA"))||d(n,"src",r),d(l,"class","svelte-y1v82d"),d(a,"class","dropdown svelte-y1v82d"),d(c,"class","switch-btn svelte-y1v82d"),d(h,"class","switch-btn-container svelte-y1v82d"),d(g,"class","svelte-y1v82d"),d(v,"class","dropdown svelte-y1v82d"),d(E,"class","country-icon svelte-y1v82d"),d(E,"alt","Select a partner"),Tn(E.src,U=Bn((Q=(D=e[8])==null?void 0:D.code)!=null?Q:"ATA"))||d(E,"src",U),d(t,"class","selectors svelte-y1v82d"),d(P,"class","svelte-y1v82d"),d(x,"class","viz-row svelte-y1v82d"),d(te,"class","viz-row svelte-y1v82d"),d(R,"id","content"),d(R,"class","svelte-y1v82d"),d(C,"id","container"),d(C,"class","svelte-y1v82d")},m(X,J){K(X,t,J),H(t,n),H(t,i),H(t,a),H(a,l),H(l,o),H(a,s),Le(u,a,null),H(t,f),H(t,h),H(h,c),H(c,_),H(t,w),H(t,v),H(v,g),H(g,p),H(v,S),Le(k,v,null),H(t,m),H(t,E),K(X,Y,J),K(X,P,J),K(X,z,J),K(X,C,J),H(C,R),H(R,x),Le(O,x,null),H(x,q),Le(I,x,null),H(R,M),H(R,te),Le(oe,te,null),ie=!0,F||(G=Z(c,"click",e[11]),F=!0)},p(X,J){var N,V,j,be,ee,T,A,le;(!ie||J&4&&!Tn(n.src,r=Bn((V=(N=X[2])==null?void 0:N.code)!=null?V:"ATA")))&&d(n,"src",r);const D={};J&1&&(D.items=Array.from(X[0].values())),J&4&&(D.value=X[2]),u.$set(D);const Q={};J&1&&(Q.items=Array.from(X[0].values())),J&256&&(Q.value=X[8]),k.$set(Q),(!ie||J&256&&!Tn(E.src,U=Bn((be=(j=X[8])==null?void 0:j.code)!=null?be:"ATA")))&&d(E,"src",U);const fe={};J&303&&(fe.data={bilateralData:X[5],country1_id:(T=(ee=X[2])==null?void 0:ee.id)!=null?T:0,country2_id:(le=(A=X[8])==null?void 0:A.id)!=null?le:0,productData:X[1],locationData:X[0],countryColorScale:X[3]}),O.$set(fe);const L={};J&447&&(L.data={productData:X[1],locationData:X[0],bilateralData:X[5],loadingDrilldown:X[7],productColorScale:X[4],country1:X[2],country2:X[8],countryColorScale:X[3]}),I.$set(L);const $={};J&471&&($.data={locationData:X[0],productData:X[1],productColorScale:X[4],country1:X[2],country2:X[8],drilldownBilateral:X[6],loadingDrilldown:X[7]}),oe.$set($)},i(X){ie||(ue(u.$$.fragment,X),ue(k.$$.fragment,X),ue(O.$$.fragment,X),ue(I.$$.fragment,X),ue(oe.$$.fragment,X),ie=!0)},o(X){pe(u.$$.fragment,X),pe(k.$$.fragment,X),pe(O.$$.fragment,X),pe(I.$$.fragment,X),pe(oe.$$.fragment,X),ie=!1},d(X){X&&b(t),De(u),De(k),X&&b(Y),X&&b(P),X&&b(z),X&&b(C),De(O),De(I),De(oe),F=!1,G()}}}function od(e){let t,n,r,i,a,l,o,s,u,f,h,c,_;const w=[ad,ld],v=[];function g(p,S){return p[0]&&p[5]&&p[1]&&p[3]?0:1}return f=g(e),h=v[f]=w[f](e),{c(){t=he("link"),n=Ae(),r=he("div"),i=he("h1"),a=ke("Commerce Among Nations"),l=Ae(),o=he("h2"),s=ke("A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),u=Ae(),h.c(),c=ge(),this.h()},l(p){const S=Uo("svelte-1ivyzxx",document.head);t=de(S,"LINK",{rel:!0,href:!0}),S.forEach(b),n=Ie(p),r=de(p,"DIV",{class:!0});var k=B(r);i=de(k,"H1",{class:!0});var m=B(i);a=Ee(m,"Commerce Among Nations"),m.forEach(b),l=Ie(k),o=de(k,"H2",{class:!0});var E=B(o);s=Ee(E,"A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),E.forEach(b),k.forEach(b),u=Ie(p),h.l(p),c=ge(),this.h()},h(){d(t,"rel","icon"),d(t,"href",`${dn}/favicon.png`),d(i,"class","svelte-y1v82d"),d(o,"class","svelte-y1v82d"),d(r,"class","heading svelte-y1v82d")},m(p,S){H(document.head,t),K(p,n,S),K(p,r,S),H(r,i),H(i,a),H(r,l),H(r,o),H(o,s),K(p,u,S),v[f].m(p,S),K(p,c,S),_=!0},p(p,[S]){let k=f;f=g(p),f===k?v[f].p(p,S):(He(),pe(v[k],1,1,()=>{v[k]=null}),Ve(),h=v[f],h?h.p(p,S):(h=v[f]=w[f](p),h.c()),ue(h,1),h.m(c.parentNode,c))},i(p){_||(ue(h),_=!0)},o(p){pe(h),_=!1},d(p){b(t),p&&b(n),p&&b(r),p&&b(u),v[f].d(p),p&&b(c)}}}const ha="id",da="name",sd=231,ud=43;function fd(e,t,n){let r,i;const a=v=>{let g=v.detail;n(2,r=u.get(g.id))},l=v=>{let g=v.detail;n(8,i=u.get(g.id))};let o,s,u=new Map,f=new Map,h,c,_=!1;function w(){let v=r;n(2,r=i),n(8,i=v)}return cr(async()=>{Promise.all([Ln(`${dn}/data/location.csv`),Ln(`${dn}/data/hs_product.csv`),Ln(`${dn}/data/hs_2010_to_2020.csv`)]).then(([v,g,p])=>{var k;n(0,u=Ri(v.map(m=>new M0(m)).filter(m=>m.level=="country"),m=>m.id)),n(1,f=Ri(g.map(m=>new Kn(m)),m=>m.id));for(let[m,E]of f)E.parent=(k=f.get(E.parent_id))!=null?k:null,f.set(m,E);let S=p.map(m=>new Et(u,f,m));n(5,h=Gr(S,m=>m.location_id,m=>m.partner_id,m=>m.year)),ya(p,m=>+m.export_value),n(3,o=oi(u.keys(),ml)),n(4,s=oi(Array.from(f).map(([m,E])=>E.level).filter(m=>m=="section"),ml))})}),e.$$.update=()=>{var v,g,p,S;e.$$.dirty&1&&n(2,r=(v=u==null?void 0:u.get(sd))!=null?v:null),e.$$.dirty&1&&n(8,i=(g=u==null?void 0:u.get(ud))!=null?g:null),e.$$.dirty&7&&(n(6,c=null),n(7,_=!0),Ln(`${dn}/data/${(p=r==null?void 0:r.code)!=null?p:"USA"}/${(S=r==null?void 0:r.code)!=null?S:"USA"}_hs2_2010_to_2020.csv`).then(k=>{n(6,c=Gr(k.map(m=>new Et(u,f,m)),m=>m.partner_id,m=>m.year)),n(7,_=!1)}))},[u,f,r,o,s,h,c,_,i,a,l,w]}class _d extends st{constructor(t){super(),ut(this,t,fd,od,ft,{})}}export{_d as default};
