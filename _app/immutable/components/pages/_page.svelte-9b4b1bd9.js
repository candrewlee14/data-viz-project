var yo=Object.defineProperty;var vo=(e,t,n)=>t in e?yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Re=(e,t,n)=>(vo(e,typeof t!="symbol"?t+"":t,n),n);import{S as st,i as ut,s as ft,k as se,l as ue,m as B,h as A,n as d,b as q,B as Te,I as tt,J as j,g as He,t as de,d as Ve,f as le,K as ct,L as ti,o as nr,M as aa,N as Ye,e as he,O as ni,v as Ue,w as Ne,x as Je,y as Ce,z as Le,q as ye,r as ve,G as O,u as qe,A as On,a as ke,c as Ae,P as $,Q as ee,p as Gt,R as Nr,T as wn,U as rr,V as Mt,W as wo,C as bo,D as ko,E as Ao,F as Eo,X as ri,Y as bi,Z as ki,_ as ii,$ as oa,a0 as Io,a1 as Ai,a2 as So,a3 as Mo,a4 as To,a5 as nt,a6 as No,H as Tt,a7 as it,a8 as Co,a9 as Jt,aa as Lo,ab as Do,ac as Ro,ad as Oo,ae as Fo,af as En}from"../../chunks/index-72a7da8c.js";import{w as li,b as un}from"../../chunks/paths-13e8d3f3.js";function Fn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ho(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sa(e){let t,n,r;e.length!==2?(t=Fn,n=(o,s)=>Fn(e(o),s),r=(o,s)=>e(o)-s):(t=e===Fn||e===Ho?e:Vo,n=e,r=e);function i(o,s,u=0,f=o.length){if(u<f){if(t(s,s)!==0)return f;do{const h=u+f>>>1;n(o[h],s)<0?u=h+1:f=h}while(u<f)}return u}function a(o,s,u=0,f=o.length){if(u<f){if(t(s,s)!==0)return f;do{const h=u+f>>>1;n(o[h],s)<=0?u=h+1:f=h}while(u<f)}return u}function l(o,s,u=0,f=o.length){const h=i(o,s,u,f-1);return h>u&&r(o[h-1],s)>-r(o[h],s)?h-1:h}return{left:i,center:l,right:a}}function Vo(){return 0}function Bo(e){return e===null?NaN:+e}const Po=sa(Fn),Go=Po.right;sa(Bo).center;const Uo=Go;function ua(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Cr extends Map{constructor(t,n=xo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Ei(this,t))}has(t){return super.has(Ei(this,t))}set(t,n){return super.set(zo(this,t),n)}delete(t){return super.delete(Yo(this,t))}}function Ei({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function zo({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Yo({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function xo(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yn(e){return e}function Lr(e,...t){return ai(e,Yn,Yn,t)}function fa(e,t,...n){return ai(e,Yn,t,n)}function Ii(e,...t){return ai(e,Yn,Xo,t)}function Xo(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function ai(e,t,n,r){return function i(a,l){if(l>=r.length)return n(a);const o=new Cr,s=r[l++];let u=-1;for(const f of a){const h=s(f,++u,a),c=o.get(h);c?c.push(f):o.set(h,[f])}for(const[f,h]of o)o.set(f,i(h,l));return t(o)}(e,0)}var Dr=Math.sqrt(50),Rr=Math.sqrt(10),Or=Math.sqrt(2);function qo(e,t,n){var r,i=-1,a,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=ca(e,t,n))===0||!isFinite(o))return[];if(o>0){let s=Math.round(e/o),u=Math.round(t/o);for(s*o<e&&++s,u*o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)*o}else{o=-o;let s=Math.round(e*o),u=Math.round(t*o);for(s/o<e&&++s,u/o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)/o}return r&&l.reverse(),l}function ca(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Dr?10:a>=Rr?5:a>=Or?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Dr?10:a>=Rr?5:a>=Or?2:1)}function Ko(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Dr?i*=10:a>=Rr?i*=5:a>=Or&&(i*=2),t<e?-i:i}function dn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Si(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Mi(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Wo(e){return e}var _r=1,Hn=2,Fr=3,fn=4,Ti=1e-6;function Zo(e){return"translate("+e+",0)"}function Jo(e){return"translate(0,"+e+")"}function Qo(e){return t=>+e(t)}function jo(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function $o(){return!this.__axis}function oi(e,t){var n=[],r=null,i=null,a=6,l=6,o=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===_r||e===fn?-1:1,f=e===fn||e===Hn?"x":"y",h=e===_r||e===Fr?Zo:Jo;function c(_){var v=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,b=i==null?t.tickFormat?t.tickFormat.apply(t,n):Wo:i,p=Math.max(a,0)+o,g=t.range(),S=+g[0]+s,w=+g[g.length-1]+s,m=(t.bandwidth?jo:Qo)(t.copy(),s),E=_.selection?_.selection():_,U=E.selectAll(".domain").data([null]),P=E.selectAll(".tick").data(v,t).order(),V=P.exit(),Y=P.enter().append("g").attr("class","tick"),N=P.select("line"),M=P.select("text");U=U.merge(U.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(Y),N=N.merge(Y.append("line").attr("stroke","currentColor").attr(f+"2",u*a)),M=M.merge(Y.append("text").attr("fill","currentColor").attr(f,u*p).attr("dy",e===_r?"0em":e===Fr?"0.71em":"0.32em")),_!==E&&(U=U.transition(_),P=P.transition(_),N=N.transition(_),M=M.transition(_),V=V.transition(_).attr("opacity",Ti).attr("transform",function(G){return isFinite(G=m(G))?h(G+s):this.getAttribute("transform")}),Y.attr("opacity",Ti).attr("transform",function(G){var D=this.parentNode.__axis;return h((D&&isFinite(D=D(G))?D:m(G))+s)})),V.remove(),U.attr("d",e===fn||e===Hn?l?"M"+u*l+","+S+"H"+s+"V"+w+"H"+u*l:"M"+s+","+S+"V"+w:l?"M"+S+","+u*l+"V"+s+"H"+w+"V"+u*l:"M"+S+","+s+"H"+w),P.attr("opacity",1).attr("transform",function(G){return h(m(G)+s)}),N.attr(f+"2",u*a),M.attr(f,u*p).text(b),E.filter($o).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Hn?"start":e===fn?"end":"middle"),E.each(function(){this.__axis=m})}return c.scale=function(_){return arguments.length?(t=_,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),c):n.slice()},c.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),c):r&&r.slice()},c.tickFormat=function(_){return arguments.length?(i=_,c):i},c.tickSize=function(_){return arguments.length?(a=l=+_,c):a},c.tickSizeInner=function(_){return arguments.length?(a=+_,c):a},c.tickSizeOuter=function(_){return arguments.length?(l=+_,c):l},c.tickPadding=function(_){return arguments.length?(o=+_,c):o},c.offset=function(_){return arguments.length?(s=+_,c):s},c}function es(e){return oi(Hn,e)}function ha(e){return oi(Fr,e)}function ts(e){return oi(fn,e)}var ns={value:()=>{}};function si(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Vn(n)}function Vn(e){this._=e}function rs(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Vn.prototype=si.prototype={constructor:Vn,on:function(e,t){var n=this._,r=rs(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=is(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=Ni(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ni(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function is(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ni(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ns,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hr="http://www.w3.org/1999/xhtml";const Ci={svg:"http://www.w3.org/2000/svg",xhtml:Hr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ir(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ci.hasOwnProperty(t)?{space:Ci[t],local:e}:e}function ls(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hr&&t.documentElement.namespaceURI===Hr?t.createElement(e):t.createElementNS(n,e)}}function as(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function da(e){var t=ir(e);return(t.local?as:ls)(t)}function os(){}function ui(e){return e==null?os:function(){return this.querySelector(e)}}function ss(e){typeof e!="function"&&(e=ui(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=new Array(l),s,u,f=0;f<l;++f)(s=a[f])&&(u=e.call(s,s.__data__,f,a))&&("__data__"in s&&(u.__data__=s.__data__),o[f]=u);return new Qe(r,this._parents)}function us(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fs(){return[]}function _a(e){return e==null?fs:function(){return this.querySelectorAll(e)}}function cs(e){return function(){return us(e.apply(this,arguments))}}function hs(e){typeof e=="function"?e=cs(e):e=_a(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new Qe(r,i)}function ma(e){return function(){return this.matches(e)}}function ga(e){return function(t){return t.matches(e)}}var ds=Array.prototype.find;function _s(e){return function(){return ds.call(this.children,e)}}function ms(){return this.firstElementChild}function gs(e){return this.select(e==null?ms:_s(typeof e=="function"?e:ga(e)))}var ps=Array.prototype.filter;function ys(){return Array.from(this.children)}function vs(e){return function(){return ps.call(this.children,e)}}function ws(e){return this.selectAll(e==null?ys:vs(typeof e=="function"?e:ga(e)))}function bs(e){typeof e!="function"&&(e=ma(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new Qe(r,this._parents)}function pa(e){return new Array(e.length)}function ks(){return new Qe(this._enter||this._groups.map(pa),this._parents)}function xn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xn.prototype={constructor:xn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function As(e){return function(){return e}}function Es(e,t,n,r,i,a){for(var l=0,o,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new xn(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function Is(e,t,n,r,i,a,l){var o,s,u=new Map,f=t.length,h=a.length,c=new Array(f),_;for(o=0;o<f;++o)(s=t[o])&&(c[o]=_=l.call(s,s.__data__,o,t)+"",u.has(_)?i[o]=s:u.set(_,s));for(o=0;o<h;++o)_=l.call(e,a[o],o,a)+"",(s=u.get(_))?(r[o]=s,s.__data__=a[o],u.delete(_)):n[o]=new xn(e,a[o]);for(o=0;o<f;++o)(s=t[o])&&u.get(c[o])===s&&(i[o]=s)}function Ss(e){return e.__data__}function Ms(e,t){if(!arguments.length)return Array.from(this,Ss);var n=t?Is:Es,r=this._parents,i=this._groups;typeof e!="function"&&(e=As(e));for(var a=i.length,l=new Array(a),o=new Array(a),s=new Array(a),u=0;u<a;++u){var f=r[u],h=i[u],c=h.length,_=Ts(e.call(f,f&&f.__data__,u,r)),v=_.length,b=o[u]=new Array(v),p=l[u]=new Array(v),g=s[u]=new Array(c);n(f,h,b,p,g,_,t);for(var S=0,w=0,m,E;S<v;++S)if(m=b[S]){for(S>=w&&(w=S+1);!(E=p[w])&&++w<v;);m._next=E||null}}return l=new Qe(l,r),l._enter=o,l._exit=s,l}function Ts(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ns(){return new Qe(this._exit||this._groups.map(pa),this._parents)}function Cs(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Ls(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),o=new Array(i),s=0;s<l;++s)for(var u=n[s],f=r[s],h=u.length,c=o[s]=new Array(h),_,v=0;v<h;++v)(_=u[v]||f[v])&&(c[v]=_);for(;s<i;++s)o[s]=n[s];return new Qe(o,this._parents)}function Ds(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Rs(e){e||(e=Os);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],o=l.length,s=i[a]=new Array(o),u,f=0;f<o;++f)(u=l[f])&&(s[f]=u);s.sort(t)}return new Qe(i,this._parents).order()}function Os(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Fs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Hs(){return Array.from(this)}function Vs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function Bs(){let e=0;for(const t of this)++e;return e}function Ps(){return!this.node()}function Gs(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,o;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function Us(e){return function(){this.removeAttribute(e)}}function zs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ys(e,t){return function(){this.setAttribute(e,t)}}function xs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function qs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ks(e,t){var n=ir(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?zs:Us:typeof t=="function"?n.local?qs:Xs:n.local?xs:Ys)(n,t))}function ya(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ws(e){return function(){this.style.removeProperty(e)}}function Zs(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Js(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Qs(e,t,n){return arguments.length>1?this.each((t==null?Ws:typeof t=="function"?Js:Zs)(e,t,n==null?"":n)):jt(this.node(),e)}function jt(e,t){return e.style.getPropertyValue(t)||ya(e).getComputedStyle(e,null).getPropertyValue(t)}function js(e){return function(){delete this[e]}}function $s(e,t){return function(){this[e]=t}}function eu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tu(e,t){return arguments.length>1?this.each((t==null?js:typeof t=="function"?eu:$s)(e,t)):this.node()[e]}function va(e){return e.trim().split(/^|\s+/)}function fi(e){return e.classList||new wa(e)}function wa(e){this._node=e,this._names=va(e.getAttribute("class")||"")}wa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ba(e,t){for(var n=fi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ka(e,t){for(var n=fi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function nu(e){return function(){ba(this,e)}}function ru(e){return function(){ka(this,e)}}function iu(e,t){return function(){(t.apply(this,arguments)?ba:ka)(this,e)}}function lu(e,t){var n=va(e+"");if(arguments.length<2){for(var r=fi(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?iu:t?nu:ru)(n,t))}function au(){this.textContent=""}function ou(e){return function(){this.textContent=e}}function su(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function uu(e){return arguments.length?this.each(e==null?au:(typeof e=="function"?su:ou)(e)):this.node().textContent}function fu(){this.innerHTML=""}function cu(e){return function(){this.innerHTML=e}}function hu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function du(e){return arguments.length?this.each(e==null?fu:(typeof e=="function"?hu:cu)(e)):this.node().innerHTML}function _u(){this.nextSibling&&this.parentNode.appendChild(this)}function mu(){return this.each(_u)}function gu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pu(){return this.each(gu)}function yu(e){var t=typeof e=="function"?e:da(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function vu(){return null}function wu(e,t){var n=typeof e=="function"?e:da(e),r=t==null?vu:typeof t=="function"?t:ui(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function bu(){var e=this.parentNode;e&&e.removeChild(this)}function ku(){return this.each(bu)}function Au(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Eu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Iu(e){return this.select(e?Eu:Au)}function Su(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Mu(e){return function(t){e.call(this,t,this.__data__)}}function Tu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Nu(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Cu(e,t,n){return function(){var r=this.__on,i,a=Mu(t);if(r){for(var l=0,o=r.length;l<o;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Lu(e,t,n){var r=Tu(e+""),i,a=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var s=0,u=o.length,f;s<u;++s)for(i=0,f=o[s];i<a;++i)if((l=r[i]).type===f.type&&l.name===f.name)return f.value}return}for(o=t?Cu:Nu,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function Aa(e,t,n){var r=ya(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Du(e,t){return function(){return Aa(this,e,t)}}function Ru(e,t){return function(){return Aa(this,e,t.apply(this,arguments))}}function Ou(e,t){return this.each((typeof t=="function"?Ru:Du)(e,t))}function*Fu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var Ea=[null];function Qe(e,t){this._groups=e,this._parents=t}function bn(){return new Qe([[document.documentElement]],Ea)}function Hu(){return this}Qe.prototype=bn.prototype={constructor:Qe,select:ss,selectAll:hs,selectChild:gs,selectChildren:ws,filter:bs,data:Ms,enter:ks,exit:Ns,join:Cs,merge:Ls,selection:Hu,order:Ds,sort:Rs,call:Fs,nodes:Hs,node:Vs,size:Bs,empty:Ps,each:Gs,attr:Ks,style:Qs,property:tu,classed:lu,text:uu,html:du,raise:mu,lower:pu,append:yu,insert:wu,remove:ku,clone:Iu,datum:Su,on:Lu,dispatch:Ou,[Symbol.iterator]:Fu};function we(e){return typeof e=="string"?new Qe([[document.querySelector(e)]],[document.documentElement]):new Qe([[e]],Ea)}function Vu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Li(e,t){if(e=Vu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Vr={capture:!0,passive:!1};function Br(e){e.preventDefault(),e.stopImmediatePropagation()}function Bu(e){var t=e.document.documentElement,n=we(e).on("dragstart.drag",Br,Vr);"onselectstart"in t?n.on("selectstart.drag",Br,Vr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Pu(e,t){var n=e.document.documentElement,r=we(e).on("dragstart.drag",null);t&&(r.on("click.drag",Br,Vr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ci(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ia(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kn(){}var gn=.7,Xn=1/gn,Qt="\\s*([+-]?\\d+)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gu=/^#([0-9a-f]{3,8})$/,Uu=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),zu=new RegExp(`^rgb\\(${mt},${mt},${mt}\\)$`),Yu=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${pn}\\)$`),xu=new RegExp(`^rgba\\(${mt},${mt},${mt},${pn}\\)$`),Xu=new RegExp(`^hsl\\(${pn},${mt},${mt}\\)$`),qu=new RegExp(`^hsla\\(${pn},${mt},${mt},${pn}\\)$`),Di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ci(kn,Ft,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ri,formatHex:Ri,formatHex8:Ku,formatHsl:Wu,formatRgb:Oi,toString:Oi});function Ri(){return this.rgb().formatHex()}function Ku(){return this.rgb().formatHex8()}function Wu(){return Sa(this).formatHsl()}function Oi(){return this.rgb().formatRgb()}function Ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Gu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Fi(t):n===3?new We(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?In(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?In(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Uu.exec(e))?new We(t[1],t[2],t[3],1):(t=zu.exec(e))?new We(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yu.exec(e))?In(t[1],t[2],t[3],t[4]):(t=xu.exec(e))?In(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xu.exec(e))?Bi(t[1],t[2]/100,t[3]/100,1):(t=qu.exec(e))?Bi(t[1],t[2]/100,t[3]/100,t[4]):Di.hasOwnProperty(e)?Fi(Di[e]):e==="transparent"?new We(NaN,NaN,NaN,0):null}function Fi(e){return new We(e>>16&255,e>>8&255,e&255,1)}function In(e,t,n,r){return r<=0&&(e=t=n=NaN),new We(e,t,n,r)}function Zu(e){return e instanceof kn||(e=Ft(e)),e?(e=e.rgb(),new We(e.r,e.g,e.b,e.opacity)):new We}function Pr(e,t,n,r){return arguments.length===1?Zu(e):new We(e,t,n,r==null?1:r)}function We(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ci(We,Pr,Ia(kn,{brighter(e){return e=e==null?Xn:Math.pow(Xn,e),new We(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gn:Math.pow(gn,e),new We(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new We(Ot(this.r),Ot(this.g),Ot(this.b),qn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hi,formatHex:Hi,formatHex8:Ju,formatRgb:Vi,toString:Vi}));function Hi(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function Ju(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vi(){const e=qn(this.opacity);return`${e===1?"rgb(":"rgba("}${Ot(this.r)}, ${Ot(this.g)}, ${Ot(this.b)}${e===1?")":`, ${e})`}`}function qn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dt(e){return e=Ot(e),(e<16?"0":"")+e.toString(16)}function Bi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ot(e,t,n,r)}function Sa(e){if(e instanceof ot)return new ot(e.h,e.s,e.l,e.opacity);if(e instanceof kn||(e=Ft(e)),!e)return new ot;if(e instanceof ot)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,o=a-i,s=(a+i)/2;return o?(t===a?l=(n-r)/o+(n<r)*6:n===a?l=(r-t)/o+2:l=(t-n)/o+4,o/=s<.5?a+i:2-a-i,l*=60):o=s>0&&s<1?0:l,new ot(l,o,s,e.opacity)}function Qu(e,t,n,r){return arguments.length===1?Sa(e):new ot(e,t,n,r==null?1:r)}function ot(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ci(ot,Qu,Ia(kn,{brighter(e){return e=e==null?Xn:Math.pow(Xn,e),new ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gn:Math.pow(gn,e),new ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new We(mr(e>=240?e-240:e+120,i,r),mr(e,i,r),mr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ot(Pi(this.h),Sn(this.s),Sn(this.l),qn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qn(this.opacity);return`${e===1?"hsl(":"hsla("}${Pi(this.h)}, ${Sn(this.s)*100}%, ${Sn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pi(e){return e=(e||0)%360,e<0?e+360:e}function Sn(e){return Math.max(0,Math.min(1,e||0))}function mr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const hi=e=>()=>e;function ju(e,t){return function(n){return e+n*t}}function $u(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ef(e){return(e=+e)==1?Ma:function(t,n){return n-t?$u(t,n,e):hi(isNaN(t)?n:t)}}function Ma(e,t){var n=t-e;return n?ju(e,n):hi(isNaN(e)?t:e)}const Kn=function e(t){var n=ef(t);function r(i,a){var l=n((i=Pr(i)).r,(a=Pr(a)).r),o=n(i.g,a.g),s=n(i.b,a.b),u=Ma(i.opacity,a.opacity);return function(f){return i.r=l(f),i.g=o(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function tf(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function nf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function rf(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=lr(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(o){for(l=0;l<r;++l)a[l]=i[l](o);return a}}function lf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function lt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function af(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=lr(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Gr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gr=new RegExp(Gr.source,"g");function of(e){return function(){return e}}function sf(e){return function(t){return e(t)+""}}function Ta(e,t){var n=Gr.lastIndex=gr.lastIndex=0,r,i,a,l=-1,o=[],s=[];for(e=e+"",t=t+"";(r=Gr.exec(e))&&(i=gr.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[l]?o[l]+=a:o[++l]=a),(r=r[0])===(i=i[0])?o[l]?o[l]+=i:o[++l]=i:(o[++l]=null,s.push({i:l,x:lt(r,i)})),n=gr.lastIndex;return n<t.length&&(a=t.slice(n),o[l]?o[l]+=a:o[++l]=a),o.length<2?s[0]?sf(s[0].x):of(t):(t=s.length,function(u){for(var f=0,h;f<t;++f)o[(h=s[f]).i]=h.x(u);return o.join("")})}function lr(e,t){var n=typeof t,r;return t==null||n==="boolean"?hi(t):(n==="number"?lt:n==="string"?(r=Ft(t))?(t=r,Kn):Ta:t instanceof Ft?Kn:t instanceof Date?lf:nf(t)?tf:Array.isArray(t)?rf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?af:lt)(e,t)}function uf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Gi=180/Math.PI,Ur={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Na(e,t,n,r,i,a){var l,o,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,s/=o),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Gi,skewX:Math.atan(s)*Gi,scaleX:l,scaleY:o}}var Mn;function ff(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ur:Na(t.a,t.b,t.c,t.d,t.e,t.f)}function cf(e){return e==null||(Mn||(Mn=document.createElementNS("http://www.w3.org/2000/svg","g")),Mn.setAttribute("transform",e),!(e=Mn.transform.baseVal.consolidate()))?Ur:(e=e.matrix,Na(e.a,e.b,e.c,e.d,e.e,e.f))}function Ca(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,f,h,c,_,v){if(u!==h||f!==c){var b=_.push("translate(",null,t,null,n);v.push({i:b-4,x:lt(u,h)},{i:b-2,x:lt(f,c)})}else(h||c)&&_.push("translate("+h+t+c+n)}function l(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:lt(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function o(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:lt(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function s(u,f,h,c,_,v){if(u!==h||f!==c){var b=_.push(i(_)+"scale(",null,",",null,")");v.push({i:b-4,x:lt(u,h)},{i:b-2,x:lt(f,c)})}else(h!==1||c!==1)&&_.push(i(_)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),a(u.translateX,u.translateY,f.translateX,f.translateY,h,c),l(u.rotate,f.rotate,h,c),o(u.skewX,f.skewX,h,c),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(_){for(var v=-1,b=c.length,p;++v<b;)h[(p=c[v]).i]=p.x(_);return h.join("")}}}var hf=Ca(ff,"px, ","px)","deg)"),df=Ca(cf,", ",")",")"),$t=0,cn=0,rn=0,La=1e3,Wn,hn,Zn=0,Ht=0,ar=0,yn=typeof performance=="object"&&performance.now?performance:Date,Da=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function di(){return Ht||(Da(_f),Ht=yn.now()+ar)}function _f(){Ht=0}function Jn(){this._call=this._time=this._next=null}Jn.prototype=Ra.prototype={constructor:Jn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?di():+n)+(t==null?0:+t),!this._next&&hn!==this&&(hn?hn._next=this:Wn=this,hn=this),this._call=e,this._time=n,zr()},stop:function(){this._call&&(this._call=null,this._time=1/0,zr())}};function Ra(e,t,n){var r=new Jn;return r.restart(e,t,n),r}function mf(){di(),++$t;for(var e=Wn,t;e;)(t=Ht-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$t}function Ui(){Ht=(Zn=yn.now())+ar,$t=cn=0;try{mf()}finally{$t=0,pf(),Ht=0}}function gf(){var e=yn.now(),t=e-Zn;t>La&&(ar-=t,Zn=e)}function pf(){for(var e,t=Wn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Wn=n);hn=e,zr(r)}function zr(e){if(!$t){cn&&(cn=clearTimeout(cn));var t=e-Ht;t>24?(e<1/0&&(cn=setTimeout(Ui,e-yn.now()-ar)),rn&&(rn=clearInterval(rn))):(rn||(Zn=yn.now(),rn=setInterval(gf,La)),$t=1,Da(Ui))}}function zi(e,t,n){var r=new Jn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var yf=si("start","end","cancel","interrupt"),vf=[],Oa=0,Yi=1,Yr=2,Bn=3,xi=4,xr=5,Pn=6;function or(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;wf(e,n,{name:t,index:r,group:i,on:yf,tween:vf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Oa})}function _i(e,t){var n=ht(e,t);if(n.state>Oa)throw new Error("too late; already scheduled");return n}function gt(e,t){var n=ht(e,t);if(n.state>Bn)throw new Error("too late; already running");return n}function ht(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ra(a,0,n.time);function a(u){n.state=Yi,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,h,c,_;if(n.state!==Yi)return s();for(f in r)if(_=r[f],_.name===n.name){if(_.state===Bn)return zi(l);_.state===xi?(_.state=Pn,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[f]):+f<t&&(_.state=Pn,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[f])}if(zi(function(){n.state===Bn&&(n.state=xi,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Yr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Yr){for(n.state=Bn,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(_=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=_);i.length=h+1}}function o(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=xr,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===xr&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Pn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Xr(e,t){var n=e.__transition,r,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>Yr&&r.state<xr,r.state=Pn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function bf(e){return this.each(function(){Xr(this,e)})}function kf(e,t){var n,r;return function(){var i=gt(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,o=r.length;l<o;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function Af(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=gt(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var o={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=o;break}s===u&&i.push(o)}a.tween=i}}function Ef(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ht(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?kf:Af)(n,e,t))}function mi(e,t,n){var r=e._id;return e.each(function(){var i=gt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ht(i,r).value[t]}}function Fa(e,t){var n;return(typeof t=="number"?lt:t instanceof Ft?Kn:(n=Ft(t))?(t=n,Kn):Ta)(e,t)}function If(e){return function(){this.removeAttribute(e)}}function Sf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function Tf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function Nf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Cf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Lf(e,t){var n=ir(e),r=n==="transform"?df:Fa;return this.attrTween(e,typeof t=="function"?(n.local?Cf:Nf)(n,r,mi(this,"attr."+e,t)):t==null?(n.local?Sf:If)(n):(n.local?Tf:Mf)(n,r,t))}function Df(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Rf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Of(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Rf(e,a)),n}return i._value=t,i}function Ff(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Df(e,a)),n}return i._value=t,i}function Hf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ir(e);return this.tween(n,(r.local?Of:Ff)(r,t))}function Vf(e,t){return function(){_i(this,e).delay=+t.apply(this,arguments)}}function Bf(e,t){return t=+t,function(){_i(this,e).delay=t}}function Pf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Vf:Bf)(t,e)):ht(this.node(),t).delay}function Gf(e,t){return function(){gt(this,e).duration=+t.apply(this,arguments)}}function Uf(e,t){return t=+t,function(){gt(this,e).duration=t}}function zf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Gf:Uf)(t,e)):ht(this.node(),t).duration}function Yf(e,t){if(typeof t!="function")throw new Error;return function(){gt(this,e).ease=t}}function xf(e){var t=this._id;return arguments.length?this.each(Yf(t,e)):ht(this.node(),t).ease}function Xf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;gt(this,e).ease=n}}function qf(e){if(typeof e!="function")throw new Error;return this.each(Xf(this._id,e))}function Kf(e){typeof e!="function"&&(e=ma(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new At(r,this._parents,this._name,this._id)}function Wf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),o=0;o<a;++o)for(var s=t[o],u=n[o],f=s.length,h=l[o]=new Array(f),c,_=0;_<f;++_)(c=s[_]||u[_])&&(h[_]=c);for(;o<r;++o)l[o]=t[o];return new At(l,this._parents,this._name,this._id)}function Zf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Jf(e,t,n){var r,i,a=Zf(t)?_i:gt;return function(){var l=a(this,e),o=l.on;o!==r&&(i=(r=o).copy()).on(t,n),l.on=i}}function Qf(e,t){var n=this._id;return arguments.length<2?ht(this.node(),n).on.on(e):this.each(Jf(n,e,t))}function jf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $f(){return this.on("end.remove",jf(this._id))}function ec(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ui(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var o=r[l],s=o.length,u=a[l]=new Array(s),f,h,c=0;c<s;++c)(f=o[c])&&(h=e.call(f,f.__data__,c,o))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,or(u[c],t,n,c,u,ht(f,n)));return new At(a,this._parents,t,n)}function tc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_a(e));for(var r=this._groups,i=r.length,a=[],l=[],o=0;o<i;++o)for(var s=r[o],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var c=e.call(f,f.__data__,h,s),_,v=ht(f,n),b=0,p=c.length;b<p;++b)(_=c[b])&&or(_,t,n,b,c,v);a.push(c),l.push(f)}return new At(a,l,t,n)}var nc=bn.prototype.constructor;function rc(){return new nc(this._groups,this._parents)}function ic(e,t){var n,r,i;return function(){var a=jt(this,e),l=(this.style.removeProperty(e),jt(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function Ha(e){return function(){this.style.removeProperty(e)}}function lc(e,t,n){var r,i=n+"",a;return function(){var l=jt(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function ac(e,t,n){var r,i,a;return function(){var l=jt(this,e),o=n(this),s=o+"";return o==null&&(s=o=(this.style.removeProperty(e),jt(this,e))),l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o))}}function oc(e,t){var n,r,i,a="style."+t,l="end."+a,o;return function(){var s=gt(this,e),u=s.on,f=s.value[a]==null?o||(o=Ha(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(l,i=f),s.on=r}}function sc(e,t,n){var r=(e+="")=="transform"?hf:Fa;return t==null?this.styleTween(e,ic(e,r)).on("end.style."+e,Ha(e)):typeof t=="function"?this.styleTween(e,ac(e,r,mi(this,"style."+e,t))).each(oc(this._id,e)):this.styleTween(e,lc(e,r,t),n).on("end.style."+e,null)}function uc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function fc(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&uc(e,l,n)),r}return a._value=t,a}function cc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,fc(e,t,n==null?"":n))}function hc(e){return function(){this.textContent=e}}function dc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function _c(e){return this.tween("text",typeof e=="function"?dc(mi(this,"text",e)):hc(e==null?"":e+""))}function mc(e){return function(t){this.textContent=e.call(this,t)}}function gc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&mc(i)),t}return r._value=e,r}function pc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,gc(e))}function yc(){for(var e=this._name,t=this._id,n=Va(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)if(s=l[u]){var f=ht(s,t);or(s,e,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new At(r,this._parents,e,n)}function vc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var o={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var u=gt(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(s)),u.on=t}),i===0&&a()})}var wc=0;function At(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Va(){return++wc}var vt=bn.prototype;At.prototype={constructor:At,select:ec,selectAll:tc,selectChild:vt.selectChild,selectChildren:vt.selectChildren,filter:Kf,merge:Wf,selection:rc,transition:yc,call:vt.call,nodes:vt.nodes,node:vt.node,size:vt.size,empty:vt.empty,each:vt.each,on:Qf,attr:Lf,attrTween:Hf,style:sc,styleTween:cc,text:_c,textTween:pc,remove:$f,tween:Ef,delay:Pf,duration:zf,ease:xf,easeVarying:qf,end:vc,[Symbol.iterator]:vt[Symbol.iterator]};function bc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var kc={time:null,delay:0,duration:250,ease:bc};function Ac(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ec(e){var t,n;e instanceof At?(t=e._id,e=e._name):(t=Va(),(n=kc).time=di(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&or(s,e,t,u,l,n||Ac(s,t));return new At(r,this._parents,e,t)}bn.prototype.interrupt=bf;bn.prototype.transition=Ec;const pr=e=>()=>e;function Ic(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Sc(e){e.stopImmediatePropagation()}function yr(e){e.preventDefault(),e.stopImmediatePropagation()}var Xi={name:"drag"},vr={name:"space"},Ut={name:"handle"},zt={name:"center"};const{abs:qi,max:Pe,min:Ge}=Math;function Ki(e){return[+e[0],+e[1]]}function Wi(e){return[Ki(e[0]),Ki(e[1])]}var Gn={name:"x",handles:["w","e"].map(Qn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},wr={name:"y",handles:["n","s"].map(Qn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},wt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ji={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Mc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Tc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Qn(e){return{type:e}}function Nc(e){return!e.ctrlKey&&!e.button}function Cc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Lc(){return navigator.maxTouchPoints||"ontouchstart"in this}function br(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Dc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Rc(){return Oc(Gn)}function Oc(e){var t=Cc,n=Nc,r=Lc,i=!0,a=si("start","brush","end"),l=6,o;function s(p){var g=p.property("__brush",b).selectAll(".overlay").data([Qn("overlay")]);g.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wt.overlay).merge(g).each(function(){var w=br(this).extent;we(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),p.selectAll(".selection").data([Qn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=p.selectAll(".handle").data(e.handles,function(w){return w.type});S.exit().remove(),S.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return wt[w.type]}),p.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",c).filter(r).on("touchstart.brush",c).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(p,g,S){p.tween?p.on("start.brush",function(w){f(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){f(this,arguments).end(w)}).tween("brush",function(){var w=this,m=w.__brush,E=f(w,arguments),U=m.selection,P=e.input(typeof g=="function"?g.apply(this,arguments):g,m.extent),V=lr(U,P);function Y(N){m.selection=N===1&&P===null?null:V(N),u.call(w),E.brush()}return U!==null&&P!==null?Y:Y(1)}):p.each(function(){var w=this,m=arguments,E=w.__brush,U=e.input(typeof g=="function"?g.apply(w,m):g,E.extent),P=f(w,m).beforestart();Xr(w),E.selection=U===null?null:U,u.call(w),P.start(S).brush(S).end(S)})},s.clear=function(p,g){s.move(p,null,g)};function u(){var p=we(this),g=br(this).selection;g?(p.selectAll(".selection").style("display",null).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?g[1][0]-l/2:g[0][0]-l/2}).attr("y",function(S){return S.type[0]==="s"?g[1][1]-l/2:g[0][1]-l/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?g[1][0]-g[0][0]+l:l}).attr("height",function(S){return S.type==="e"||S.type==="w"?g[1][1]-g[0][1]+l:l})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(p,g,S){var w=p.__brush.emitter;return w&&(!S||!w.clean)?w:new h(p,g,S)}function h(p,g,S){this.that=p,this.args=g,this.state=p.__brush,this.active=0,this.clean=S}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,g){return this.starting?(this.starting=!1,this.emit("start",p,g)):this.emit("brush",p),this},brush:function(p,g){return this.emit("brush",p,g),this},end:function(p,g){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,g)),this},emit:function(p,g,S){var w=we(this.that).datum();a.call(p,this.that,new Ic(p,{sourceEvent:g,target:s,selection:e.output(this.state.selection),mode:S,dispatch:a}),w)}};function c(p){if(o&&!p.touches||!n.apply(this,arguments))return;var g=this,S=p.target.__data__.type,w=(i&&p.metaKey?S="overlay":S)==="selection"?Xi:i&&p.altKey?zt:Ut,m=e===wr?null:Mc[S],E=e===Gn?null:Tc[S],U=br(g),P=U.extent,V=U.selection,Y=P[0][0],N,M,G=P[0][1],D,H,I=P[1][0],L,Z,re=P[1][1],J,F,K=0,Q=0,ge,pe=m&&E&&i&&p.shiftKey,_e,Me,ce=Array.from(p.touches||[p],ne=>{const k=ne.identifier;return ne=Li(ne,g),ne.point0=ne.slice(),ne.identifier=k,ne});Xr(g);var R=f(g,arguments,!0).beforestart();if(S==="overlay"){V&&(ge=!0);const ne=[ce[0],ce[1]||ce[0]];U.selection=V=[[N=e===wr?Y:Ge(ne[0][0],ne[1][0]),D=e===Gn?G:Ge(ne[0][1],ne[1][1])],[L=e===wr?I:Pe(ne[0][0],ne[1][0]),J=e===Gn?re:Pe(ne[0][1],ne[1][1])]],ce.length>1&&T(p)}else N=V[0][0],D=V[0][1],L=V[1][0],J=V[1][1];M=N,H=D,Z=L,F=J;var te=we(g).attr("pointer-events","none"),C=te.selectAll(".overlay").attr("cursor",wt[S]);if(p.touches)R.moved=ae,R.ended=z;else{var X=we(p.view).on("mousemove.brush",ae,!0).on("mouseup.brush",z,!0);i&&X.on("keydown.brush",fe,!0).on("keyup.brush",Ee,!0),Bu(p.view)}u.call(g),R.start(p,w.name);function ae(ne){for(const k of ne.changedTouches||[ne])for(const x of ce)x.identifier===k.identifier&&(x.cur=Li(k,g));if(pe&&!_e&&!Me&&ce.length===1){const k=ce[0];qi(k.cur[0]-k[0])>qi(k.cur[1]-k[1])?Me=!0:_e=!0}for(const k of ce)k.cur&&(k[0]=k.cur[0],k[1]=k.cur[1]);ge=!0,yr(ne),T(ne)}function T(ne){const k=ce[0],x=k.point0;var W;switch(K=k[0]-x[0],Q=k[1]-x[1],w){case vr:case Xi:{m&&(K=Pe(Y-N,Ge(I-L,K)),M=N+K,Z=L+K),E&&(Q=Pe(G-D,Ge(re-J,Q)),H=D+Q,F=J+Q);break}case Ut:{ce[1]?(m&&(M=Pe(Y,Ge(I,ce[0][0])),Z=Pe(Y,Ge(I,ce[1][0])),m=1),E&&(H=Pe(G,Ge(re,ce[0][1])),F=Pe(G,Ge(re,ce[1][1])),E=1)):(m<0?(K=Pe(Y-N,Ge(I-N,K)),M=N+K,Z=L):m>0&&(K=Pe(Y-L,Ge(I-L,K)),M=N,Z=L+K),E<0?(Q=Pe(G-D,Ge(re-D,Q)),H=D+Q,F=J):E>0&&(Q=Pe(G-J,Ge(re-J,Q)),H=D,F=J+Q));break}case zt:{m&&(M=Pe(Y,Ge(I,N-K*m)),Z=Pe(Y,Ge(I,L+K*m))),E&&(H=Pe(G,Ge(re,D-Q*E)),F=Pe(G,Ge(re,J+Q*E)));break}}Z<M&&(m*=-1,W=N,N=L,L=W,W=M,M=Z,Z=W,S in Zi&&C.attr("cursor",wt[S=Zi[S]])),F<H&&(E*=-1,W=D,D=J,J=W,W=H,H=F,F=W,S in Ji&&C.attr("cursor",wt[S=Ji[S]])),U.selection&&(V=U.selection),_e&&(M=V[0][0],Z=V[1][0]),Me&&(H=V[0][1],F=V[1][1]),(V[0][0]!==M||V[0][1]!==H||V[1][0]!==Z||V[1][1]!==F)&&(U.selection=[[M,H],[Z,F]],u.call(g),R.brush(ne,w.name))}function z(ne){if(Sc(ne),ne.touches){if(ne.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Pu(ne.view,ge),X.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);te.attr("pointer-events","all"),C.attr("cursor",wt.overlay),U.selection&&(V=U.selection),Dc(V)&&(U.selection=null,u.call(g)),R.end(ne,w.name)}function fe(ne){switch(ne.keyCode){case 16:{pe=m&&E;break}case 18:{w===Ut&&(m&&(L=Z-K*m,N=M+K*m),E&&(J=F-Q*E,D=H+Q*E),w=zt,T(ne));break}case 32:{(w===Ut||w===zt)&&(m<0?L=Z-K:m>0&&(N=M-K),E<0?J=F-Q:E>0&&(D=H-Q),w=vr,C.attr("cursor",wt.selection),T(ne));break}default:return}yr(ne)}function Ee(ne){switch(ne.keyCode){case 16:{pe&&(_e=Me=pe=!1,T(ne));break}case 18:{w===zt&&(m<0?L=Z:m>0&&(N=M),E<0?J=F:E>0&&(D=H),w=Ut,T(ne));break}case 32:{w===vr&&(ne.altKey?(m&&(L=Z-K*m,N=M+K*m),E&&(J=F-Q*E,D=H+Q*E),w=zt):(m<0?L=Z:m>0&&(N=M),E<0?J=F:E>0&&(D=H),w=Ut),C.attr("cursor",wt[S]),T(ne));break}default:return}yr(ne)}}function _(p){f(this,arguments).moved(p)}function v(p){f(this,arguments).ended(p)}function b(){var p=this.__brush||{selection:null};return p.extent=Wi(t.apply(this,arguments)),p.dim=e,p}return s.extent=function(p){return arguments.length?(t=typeof p=="function"?p:pr(Wi(p)),s):t},s.filter=function(p){return arguments.length?(n=typeof p=="function"?p:pr(!!p),s):n},s.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:pr(!!p),s):r},s.handleSize=function(p){return arguments.length?(l=+p,s):l},s.keyModifiers=function(p){return arguments.length?(i=!!p,s):i},s.on=function(){var p=a.on.apply(a,arguments);return p===a?s:p},s}const qr=Math.PI,Kr=2*qr,Lt=1e-6,Fc=Kr-Lt;function Wr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zr(){return new Wr}Wr.prototype=Zr.prototype={constructor:Wr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,l=this._y1,o=n-e,s=r-t,u=a-e,f=l-t,h=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>Lt)if(!(Math.abs(f*o-s*u)>Lt)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var c=n-a,_=r-l,v=o*o+s*s,b=c*c+_*_,p=Math.sqrt(v),g=Math.sqrt(h),S=i*Math.tan((qr-Math.acos((v+h-b)/(2*p*g)))/2),w=S/g,m=S/p;Math.abs(w-1)>Lt&&(this._+="L"+(e+w*u)+","+(t+w*f)),this._+="A"+i+","+i+",0,0,"+ +(f*c>u*_)+","+(this._x1=e+m*o)+","+(this._y1=t+m*s)}},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n,a=!!a;var l=n*Math.cos(r),o=n*Math.sin(r),s=e+l,u=t+o,f=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>Lt||Math.abs(this._y1-u)>Lt)&&(this._+="L"+s+","+u),n&&(h<0&&(h=h%Kr+Kr),h>Fc?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+f+","+(this._x1=s)+","+(this._y1=u):h>Lt&&(this._+="A"+n+","+n+",0,"+ +(h>=qr)+","+f+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Qi={},kr={},Ar=34,ln=10,Er=13;function Ba(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Hc(e,t){var n=Ba(e);return function(r,i){return t(n(r),i,e)}}function ji(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Xe(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Vc(e){return e<0?"-"+Xe(-e,6):e>9999?"+"+Xe(e,6):Xe(e,4)}function Bc(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Vc(e.getUTCFullYear())+"-"+Xe(e.getUTCMonth()+1,2)+"-"+Xe(e.getUTCDate(),2)+(i?"T"+Xe(t,2)+":"+Xe(n,2)+":"+Xe(r,2)+"."+Xe(i,3)+"Z":r?"T"+Xe(t,2)+":"+Xe(n,2)+":"+Xe(r,2)+"Z":n||t?"T"+Xe(t,2)+":"+Xe(n,2)+"Z":"")}function Pc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,c){var _,v,b=i(h,function(p,g){if(_)return _(p,g-1);v=p,_=c?Hc(p,c):Ba(p)});return b.columns=v||[],b}function i(h,c){var _=[],v=h.length,b=0,p=0,g,S=v<=0,w=!1;h.charCodeAt(v-1)===ln&&--v,h.charCodeAt(v-1)===Er&&--v;function m(){if(S)return kr;if(w)return w=!1,Qi;var U,P=b,V;if(h.charCodeAt(P)===Ar){for(;b++<v&&h.charCodeAt(b)!==Ar||h.charCodeAt(++b)===Ar;);return(U=b)>=v?S=!0:(V=h.charCodeAt(b++))===ln?w=!0:V===Er&&(w=!0,h.charCodeAt(b)===ln&&++b),h.slice(P+1,U-1).replace(/""/g,'"')}for(;b<v;){if((V=h.charCodeAt(U=b++))===ln)w=!0;else if(V===Er)w=!0,h.charCodeAt(b)===ln&&++b;else if(V!==n)continue;return h.slice(P,U)}return S=!0,h.slice(P,v)}for(;(g=m())!==kr;){for(var E=[];g!==Qi&&g!==kr;)E.push(g),g=m();c&&(E=c(E,p++))==null||_.push(E)}return _}function a(h,c){return h.map(function(_){return c.map(function(v){return f(_[v])}).join(e)})}function l(h,c){return c==null&&(c=ji(h)),[c.map(f).join(e)].concat(a(h,c)).join(`
`)}function o(h,c){return c==null&&(c=ji(h)),a(h,c).join(`
`)}function s(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?Bc(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:l,formatBody:o,formatRows:s,formatRow:u,formatValue:f}}var Gc=Pc(","),Uc=Gc.parse;function zc(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Yc(e,t){return fetch(e,t).then(zc)}function xc(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Yc(t,n).then(function(i){return e(i,r)})}}var Tn=xc(Uc);function Xc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function jn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function en(e){return e=jn(Math.abs(e)),e?e[1]:NaN}function qc(e,t){return function(n,r){for(var i=n.length,a=[],l=0,o=e[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),a.push(n.substring(i-=o,i+o)),!((s+=o+1)>r));)o=e[l=(l+1)%e.length];return a.reverse().join(t)}}function Kc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Wc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $n(e){if(!(t=Wc.exec(e)))throw new Error("invalid format: "+e);var t;return new gi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$n.prototype=gi.prototype;function gi(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zc(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Pa;function Jc(e,t){var n=jn(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Pa=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+jn(e,Math.max(0,t+a-1))[0]}function $i(e,t){var n=jn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const el={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>$i(e*100,t),r:$i,s:Jc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tl(e){return e}var nl=Array.prototype.map,rl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Qc(e){var t=e.grouping===void 0||e.thousands===void 0?tl:qc(nl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?tl:Kc(nl.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(h){h=$n(h);var c=h.fill,_=h.align,v=h.sign,b=h.symbol,p=h.zero,g=h.width,S=h.comma,w=h.precision,m=h.trim,E=h.type;E==="n"?(S=!0,E="g"):el[E]||(w===void 0&&(w=12),m=!0,E="g"),(p||c==="0"&&_==="=")&&(p=!0,c="0",_="=");var U=b==="$"?n:b==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",P=b==="$"?r:/[%p]/.test(E)?l:"",V=el[E],Y=/[defgprs%]/.test(E);w=w===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function N(M){var G=U,D=P,H,I,L;if(E==="c")D=V(M)+D,M="";else{M=+M;var Z=M<0||1/M<0;if(M=isNaN(M)?s:V(Math.abs(M),w),m&&(M=Zc(M)),Z&&+M==0&&v!=="+"&&(Z=!1),G=(Z?v==="("?v:o:v==="-"||v==="("?"":v)+G,D=(E==="s"?rl[8+Pa/3]:"")+D+(Z&&v==="("?")":""),Y){for(H=-1,I=M.length;++H<I;)if(L=M.charCodeAt(H),48>L||L>57){D=(L===46?i+M.slice(H+1):M.slice(H))+D,M=M.slice(0,H);break}}}S&&!p&&(M=t(M,1/0));var re=G.length+M.length+D.length,J=re<g?new Array(g-re+1).join(c):"";switch(S&&p&&(M=t(J+M,J.length?g-D.length:1/0),J=""),_){case"<":M=G+M+D+J;break;case"=":M=G+J+M+D;break;case"^":M=J.slice(0,re=J.length>>1)+G+M+D+J.slice(re);break;default:M=J+G+M+D;break}return a(M)}return N.toString=function(){return h+""},N}function f(h,c){var _=u((h=$n(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(en(c)/3)))*3,b=Math.pow(10,-v),p=rl[8+v/3];return function(g){return _(b*g)+p}}return{format:u,formatPrefix:f}}var Nn,Vt,Ga;jc({thousands:",",grouping:[3],currency:["$",""]});function jc(e){return Nn=Qc(e),Vt=Nn.format,Ga=Nn.formatPrefix,Nn}function $c(e){return Math.max(0,-en(Math.abs(e)))}function eh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(en(t)/3)))*3-en(Math.abs(e)))}function th(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,en(t)-en(e))+1}function nh(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function rh(){return this.eachAfter(nh)}function ih(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function lh(e,t){for(var n=this,r=[n],i,a,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function ah(e,t){for(var n=this,r=[n],i=[],a,l,o,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(l=0,o=a.length;l<o;++l)r.push(a[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function oh(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function sh(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function uh(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function fh(e){for(var t=this,n=ch(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function ch(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function hh(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function dh(){return Array.from(this)}function _h(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function mh(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*gh(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Ua(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=vh)):t===void 0&&(t=yh);for(var n=new vn(e),r,i=[n],a,l,o,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,o=s-1;o>=0;--o)i.push(a=l[o]=new vn(l[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(za)}function ph(){return Ua(this).eachBefore(wh)}function yh(e){return e.children}function vh(e){return Array.isArray(e)?e[1]:null}function wh(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function za(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function vn(e){this.data=e,this.depth=this.height=0,this.parent=null}vn.prototype=Ua.prototype={constructor:vn,count:rh,each:ih,eachAfter:ah,eachBefore:lh,find:oh,sum:sh,sort:uh,path:fh,ancestors:hh,descendants:dh,leaves:_h,links:mh,copy:ph,[Symbol.iterator]:gh};function Ir(e){return e==null?null:Ya(e)}function Ya(e){if(typeof e!="function")throw new Error;return e}function an(){return 0}function on(e){return function(){return e}}function bh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function kh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(r-t)/e.value;++o<s;)l=a[o],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var Ah={depth:-1},il={},Sr={};function Eh(e){return e.id}function Ih(e){return e.parentId}function Sh(){var e=Eh,t=Ih,n;function r(i){var a=Array.from(i),l=e,o=t,s,u,f,h,c,_,v,b,p=new Map;if(n!=null){const g=a.map((m,E)=>Mh(n(m,E,i))),S=g.map(ll),w=new Set(g).add("");for(const m of S)w.has(m)||(w.add(m),g.push(m),S.push(ll(m)),a.push(Sr));l=(m,E)=>g[E],o=(m,E)=>S[E]}for(f=0,s=a.length;f<s;++f)u=a[f],_=a[f]=new vn(u),(v=l(u,f,i))!=null&&(v+="")&&(b=_.id=v,p.set(b,p.has(b)?il:_)),(v=o(u,f,i))!=null&&(v+="")&&(_.parent=v);for(f=0;f<s;++f)if(_=a[f],v=_.parent){if(c=p.get(v),!c)throw new Error("missing: "+v);if(c===il)throw new Error("ambiguous: "+v);c.children?c.children.push(_):c.children=[_],_.parent=c}else{if(h)throw new Error("multiple roots");h=_}if(!h)throw new Error("no root");if(n!=null){for(;h.data===Sr&&h.children.length===1;)h=h.children[0],--s;for(let g=a.length-1;g>=0&&(_=a[g],_.data===Sr);--g)_.data=null}if(h.parent=Ah,h.eachBefore(function(g){g.depth=g.parent.depth+1,--s}).eachBefore(za),h.parent=null,s>0)throw new Error("cycle");return h}return r.id=function(i){return arguments.length?(e=Ir(i),r):e},r.parentId=function(i){return arguments.length?(t=Ir(i),r):t},r.path=function(i){return arguments.length?(n=Ir(i),r):n},r}function Mh(e){e=`${e}`;let t=e.length;return Jr(e,t-1)&&!Jr(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ll(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Jr(e,t););return e.slice(0,t)}function Jr(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Th(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(i-n)/e.value;++o<s;)l=a[o],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var Nh=(1+Math.sqrt(5))/2;function Ch(e,t,n,r,i,a){for(var l=[],o=t.children,s,u,f=0,h=0,c=o.length,_,v,b=t.value,p,g,S,w,m,E,U;f<c;){_=i-n,v=a-r;do p=o[h++].value;while(!p&&h<c);for(g=S=p,E=Math.max(v/_,_/v)/(b*e),U=p*p*E,m=Math.max(S/U,U/g);h<c;++h){if(p+=u=o[h].value,u<g&&(g=u),u>S&&(S=u),U=p*p*E,w=Math.max(S/U,U/g),w>m){p-=u;break}m=w}l.push(s={value:p,dice:_<v,children:o.slice(f,h)}),s.dice?kh(s,n,r,i,b?r+=v*p/b:a):Th(s,n,r,b?n+=_*p/b:i,a),b-=p,f=h}return l}const Lh=function e(t){function n(r,i,a,l,o){Ch(t,r,i,a,l,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Nh);function Dh(){var e=Lh,t=!1,n=1,r=1,i=[0],a=an,l=an,o=an,s=an,u=an;function f(c){return c.x0=c.y0=0,c.x1=n,c.y1=r,c.eachBefore(h),i=[0],t&&c.eachBefore(bh),c}function h(c){var _=i[c.depth],v=c.x0+_,b=c.y0+_,p=c.x1-_,g=c.y1-_;p<v&&(v=p=(v+p)/2),g<b&&(b=g=(b+g)/2),c.x0=v,c.y0=b,c.x1=p,c.y1=g,c.children&&(_=i[c.depth+1]=a(c)/2,v+=u(c)-_,b+=l(c)-_,p-=o(c)-_,g-=s(c)-_,p<v&&(v=p=(v+p)/2),g<b&&(b=g=(b+g)/2),e(c,v,b,p,g))}return f.round=function(c){return arguments.length?(t=!!c,f):t},f.size=function(c){return arguments.length?(n=+c[0],r=+c[1],f):[n,r]},f.tile=function(c){return arguments.length?(e=Ya(c),f):e},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(a=typeof c=="function"?c:on(+c),f):a},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(l=typeof c=="function"?c:on(+c),f):l},f.paddingRight=function(c){return arguments.length?(o=typeof c=="function"?c:on(+c),f):o},f.paddingBottom=function(c){return arguments.length?(s=typeof c=="function"?c:on(+c),f):s},f.paddingLeft=function(c){return arguments.length?(u=typeof c=="function"?c:on(+c),f):u},f}function Rh(e,t,n,r,i){var a=e.children,l,o=a.length,s,u=new Array(o+1);for(u[0]=s=l=0;l<o;++l)u[l+1]=s+=a[l].value;f(0,o,e.value,t,n,r,i);function f(h,c,_,v,b,p,g){if(h>=c-1){var S=a[h];S.x0=v,S.y0=b,S.x1=p,S.y1=g;return}for(var w=u[h],m=_/2+w,E=h+1,U=c-1;E<U;){var P=E+U>>>1;u[P]<m?E=P+1:U=P}m-u[E-1]<u[E]-m&&h+1<E&&--E;var V=u[E]-w,Y=_-V;if(p-v>g-b){var N=_?(v*Y+p*V)/_:p;f(h,E,V,v,b,N,g),f(E,c,Y,N,b,p,g)}else{var M=_?(b*Y+g*V)/_:g;f(h,E,V,v,b,p,M),f(E,c,Y,v,M,p,g)}}}function xa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const al=Symbol("implicit");function Qr(){var e=new Cr,t=[],n=[],r=al;function i(a){let l=e.get(a);if(l===void 0){if(r!==al)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Cr;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Qr(t,n).unknown(r)},xa.apply(i,arguments),i}function Oh(e){return function(){return e}}function Fh(e){return+e}var ol=[0,1];function Kt(e){return e}function jr(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Oh(isNaN(t)?NaN:.5)}function Hh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Vh(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=jr(i,r),a=n(l,a)):(r=jr(r,i),a=n(a,l)),function(o){return a(r(o))}}function Bh(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=jr(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(o){var s=Uo(e,o,1,r)-1;return a[s](i[s](o))}}function Ph(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gh(){var e=ol,t=ol,n=lr,r,i,a,l=Kt,o,s,u;function f(){var c=Math.min(e.length,t.length);return l!==Kt&&(l=Hh(e[0],e[c-1])),o=c>2?Bh:Vh,s=u=null,h}function h(c){return c==null||isNaN(c=+c)?a:(s||(s=o(e.map(r),t,n)))(r(l(c)))}return h.invert=function(c){return l(i((u||(u=o(t,e.map(r),lt)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,Fh),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=uf,f()},h.clamp=function(c){return arguments.length?(l=c?!0:Kt,f()):l!==Kt},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(a=c,h):a},function(c,_){return r=c,i=_,f()}}function Uh(){return Gh()(Kt,Kt)}function zh(e,t,n,r){var i=Ko(e,t,n),a;switch(r=$n(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=eh(i,l))&&(r.precision=a),Ga(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=th(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=$c(i))&&(r.precision=a-(r.type==="%")*2);break}}return Vt(r)}function Yh(e){var t=e.domain;return e.ticks=function(n){var r=t();return qo(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return zh(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],o=r[a],s,u,f=10;for(o<l&&(u=l,l=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=ca(l,o,n),u===s)return r[i]=l,r[a]=o,t(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;s=u}return e},e}function _n(){var e=Uh();return e.copy=function(){return Ph(e,_n())},xa.apply(e,arguments),Yh(e)}function xh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const sl=xh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Wt(e,t,n){this.k=e,this.x=t,this.y=n}Wt.prototype={constructor:Wt,scale:function(e){return e===1?this:new Wt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Wt(1,0,0);Wt.prototype;function Xh(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function qh(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=se("div"),this.h()},l(i){t=ue(i,"DIV",{class:!0});var a=B(t);a.forEach(A),this.h()},h(){d(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,a){q(i,t,a),t.innerHTML=n},p(i,[a]){a&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),a&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&d(t,"class",r)},i:Te,o:Te,d(i){i&&A(t)}}}function Kh(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:a=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,f="";return e.$$set=h=>{"isActive"in h&&n(4,r=h.isActive),"isFirst"in h&&n(5,i=h.isFirst),"isHover"in h&&n(6,a=h.isHover),"isSelectable"in h&&n(7,l=h.isSelectable),"getOptionLabel"in h&&n(0,o=h.getOptionLabel),"item"in h&&n(1,s=h.item),"filterText"in h&&n(2,u=h.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const h=[];r&&h.push("active"),i&&h.push("first"),a&&h.push("hover"),s.isGroupHeader&&h.push("groupHeader"),s.isGroupItem&&h.push("groupItem"),l||h.push("notSelectable"),n(3,f=h.join(" "))}},[o,s,u,f,r,i,a,l]}class Xa extends st{constructor(t){super(),ut(this,t,Kh,qh,ft,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function ul(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function Wh(e){let t,n,r=e[1],i=[];for(let o=0;o<r.length;o+=1)i[o]=hl(ul(e,r,o));const a=o=>de(i[o],1,1,()=>{i[o]=null});let l=null;return r.length||(l=fl(e)),{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=he(),l&&l.c()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);t=he(),l&&l.l(o)},m(o,s){for(let u=0;u<i.length;u+=1)i[u].m(o,s);q(o,t,s),l&&l.m(o,s),n=!0},p(o,s){if(s[0]&114390){r=o[1];let u;for(u=0;u<r.length;u+=1){const f=ul(o,r,u);i[u]?(i[u].p(f,s),le(i[u],1)):(i[u]=hl(f),i[u].c(),le(i[u],1),i[u].m(t.parentNode,t))}for(He(),u=r.length;u<i.length;u+=1)a(u);Ve(),!r.length&&l?l.p(o,s):r.length?l&&(l.d(1),l=null):(l=fl(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let s=0;s<r.length;s+=1)le(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)de(i[s]);n=!1},d(o){ni(i,o),o&&A(t),l&&l.d(o)}}}function Zh(e){let t,n,r;var i=e[3];function a(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[jh,({item:o,i:s})=>({41:o,42:s}),({item:o,i:s})=>[0,(o?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=Ue(i,a(e))),{c(){t&&Ne(t.$$.fragment),n=he()},l(l){t&&Je(t.$$.fragment,l),n=he()},m(l,o){t&&Ce(t,l,o),q(l,n,o),r=!0},p(l,o){const s={};if(o[0]&2&&(s.items=l[1]),o[0]&256&&(s.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(s.$$scope={dirty:o,ctx:l}),i!==(i=l[3])){if(t){He();const u=t;de(u.$$.fragment,1,0,()=>{Le(u,1)}),Ve()}i?(t=Ue(i,a(l)),Ne(t.$$.fragment),le(t.$$.fragment,1),Ce(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&le(t.$$.fragment,l),r=!0)},o(l){t&&de(t.$$.fragment,l),r=!1},d(l){l&&A(n),t&&Le(t,l)}}}function fl(e){let t,n=!e[11]&&cl(e);return{c(){n&&n.c(),t=he()},l(r){n&&n.l(r),t=he()},m(r,i){n&&n.m(r,i),q(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=cl(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&A(t)}}}function cl(e){let t,n;return{c(){t=se("div"),n=ye(e[12]),this.h()},l(r){t=ue(r,"DIV",{class:!0});var i=B(t);n=ve(i,e[12]),i.forEach(A),this.h()},h(){d(t,"class","empty svelte-1uyqfml")},m(r,i){q(r,t,i),O(t,n)},p(r,i){i[0]&4096&&qe(n,r[12])},d(r){r&&A(t)}}}function Jh(e){let t,n,r,i,a,l;var o=e[4];function s(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:$r(c[42]),isActive:er(c[41],c[9],c[10]),isHover:tr(c[2],c[41],c[42],c[1]),isSelectable:Bt(c[41])}}}o&&(n=Ue(o,s(e)));function u(){return e[29](e[42])}function f(){return e[30](e[42])}function h(...c){return e[31](e[41],e[42],...c)}return{c(){t=se("div"),n&&Ne(n.$$.fragment),r=ke(),this.h()},l(c){t=ue(c,"DIV",{class:!0,tabindex:!0});var _=B(t);n&&Je(n.$$.fragment,_),r=Ae(_),_.forEach(A),this.h()},h(){d(t,"class","listItem"),d(t,"tabindex","-1")},m(c,_){q(c,t,_),n&&Ce(n,t,null),O(t,r),i=!0,a||(l=[j(t,"mouseover",u),j(t,"focus",f),j(t,"click",h)],a=!0)},p(c,_){e=c;const v={};if(_[0]&2&&(v.item=e[41]),_[0]&8192&&(v.filterText=e[13]),_[0]&64&&(v.getOptionLabel=e[6]),_[0]&1538&&(v.isActive=er(e[41],e[9],e[10])),_[0]&6&&(v.isHover=tr(e[2],e[41],e[42],e[1])),_[0]&2&&(v.isSelectable=Bt(e[41])),o!==(o=e[4])){if(n){He();const b=n;de(b.$$.fragment,1,0,()=>{Le(b,1)}),Ve()}o?(n=Ue(o,s(e)),Ne(n.$$.fragment),le(n.$$.fragment,1),Ce(n,t,r)):n=null}else o&&n.$set(v)},i(c){i||(n&&le(n.$$.fragment,c),i=!0)},o(c){n&&de(n.$$.fragment,c),i=!1},d(c){c&&A(t),n&&Le(n),a=!1,ct(l)}}}function Qh(e){let t,n=e[7](e[41])+"",r;return{c(){t=se("div"),r=ye(n),this.h()},l(i){t=ue(i,"DIV",{class:!0});var a=B(t);r=ve(a,n),a.forEach(A),this.h()},h(){d(t,"class","listGroupTitle svelte-1uyqfml")},m(i,a){q(i,t,a),O(t,r)},p(i,a){a[0]&130&&n!==(n=i[7](i[41])+"")&&qe(r,n)},i:Te,o:Te,d(i){i&&A(t)}}}function hl(e){let t,n,r,i;const a=[Qh,Jh],l=[];function o(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=o(e),n=l[t]=a[t](e),{c(){n.c(),r=he()},l(s){n.l(s),r=he()},m(s,u){l[t].m(s,u),q(s,r,u),i=!0},p(s,u){let f=t;t=o(s),t===f?l[t].p(s,u):(He(),de(l[f],1,1,()=>{l[f]=null}),Ve(),n=l[t],n?n.p(s,u):(n=l[t]=a[t](s),n.c()),le(n,1),n.m(r.parentNode,r))},i(s){i||(le(n),i=!0)},o(s){de(n),i=!1},d(s){l[t].d(s),s&&A(r)}}}function jh(e){let t,n,r,i,a;var l=e[4];function o(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:$r(h[42]),isActive:er(h[41],h[9],h[10]),isHover:tr(h[2],h[41],h[42],h[1]),isSelectable:Bt(h[41])}}}l&&(n=Ue(l,o(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function f(...h){return e[28](e[41],e[42],...h)}return{c(){t=se("div"),n&&Ne(n.$$.fragment),this.h()},l(h){t=ue(h,"DIV",{class:!0});var c=B(t);n&&Je(n.$$.fragment,c),c.forEach(A),this.h()},h(){d(t,"class","listItem")},m(h,c){q(h,t,c),n&&Ce(n,t,null),r=!0,i||(a=[j(t,"mouseover",s),j(t,"focus",u),j(t,"click",f)],i=!0)},p(h,c){e=h;const _={};if(c[1]&1024&&(_.item=e[41]),c[0]&8192&&(_.filterText=e[13]),c[0]&64&&(_.getOptionLabel=e[6]),c[1]&2048&&(_.isFirst=$r(e[42])),c[0]&1536|c[1]&1024&&(_.isActive=er(e[41],e[9],e[10])),c[0]&6|c[1]&3072&&(_.isHover=tr(e[2],e[41],e[42],e[1])),c[1]&1024&&(_.isSelectable=Bt(e[41])),l!==(l=e[4])){if(n){He();const v=n;de(v.$$.fragment,1,0,()=>{Le(v,1)}),Ve()}l?(n=Ue(l,o(e)),Ne(n.$$.fragment),le(n.$$.fragment,1),Ce(n,t,null)):n=null}else l&&n.$set(_)},i(h){r||(n&&le(n.$$.fragment,h),r=!0)},o(h){n&&de(n.$$.fragment,h),r=!1},d(h){h&&A(t),n&&Le(n),i=!1,ct(a)}}}function $h(e){let t,n,r,i,a,l;const o=[Zh,Wh],s=[];function u(f,h){return f[5]?0:1}return n=u(e),r=s[n]=o[n](e),{c(){t=se("div"),r.c(),this.h()},l(f){t=ue(f,"DIV",{class:!0,style:!0});var h=B(t);r.l(h),h.forEach(A),this.h()},h(){d(t,"class","listContainer svelte-1uyqfml"),d(t,"style",e[14]),tt(t,"virtualList",e[5])},m(f,h){q(f,t,h),s[n].m(t,null),e[32](t),i=!0,a||(l=[j(window,"keydown",e[17]),j(window,"resize",e[18])],a=!0)},p(f,h){let c=n;n=u(f),n===c?s[n].p(f,h):(He(),de(s[c],1,1,()=>{s[c]=null}),Ve(),r=s[n],r?r.p(f,h):(r=s[n]=o[n](f),r.c()),le(r,1),r.m(t,null)),(!i||h[0]&16384)&&d(t,"style",f[14]),(!i||h[0]&32)&&tt(t,"virtualList",f[5])},i(f){i||(le(r),i=!0)},o(f){de(r),i=!1},d(f){f&&A(t),s[n].d(),e[32](null),a=!1,ct(l)}}}function er(e,t,n){return t&&t[n]===e[n]}function $r(e){return e===0}function tr(e,t,n,r){return Bt(t)&&(e===n||r.length===1)}function Bt(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function e0(e,t,n){const r=ti();let{container:i=void 0}=t,{VirtualList:a=null}=t,{Item:l=Xa}=t,{isVirtualList:o=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:f=(R,te)=>{if(R)return R.isCreator?`Create "${te}"`:R[u]}}=t,{getGroupHeaderLabel:h=null}=t,{itemHeight:c=40}=t,{hoverItemIndex:_=0}=t,{value:v=void 0}=t,{optionIdentifier:b="value"}=t,{hideEmptyState:p=!1}=t,{noOptionsMessage:g="No options"}=t,{isMulti:S=!1}=t,{activeItemIndex:w=0}=t,{filterText:m=""}=t,{parent:E=null}=t,{listPlacement:U=null}=t,{listAutoWidth:P=null}=t,{listOffset:V=5}=t,Y=0,N=!1,M;nr(()=>{if(s.length>0&&!S&&v){const R=s.findIndex(te=>te[b]===v[b]);R&&n(2,_=R)}re("active"),i.addEventListener("scroll",()=>{clearTimeout(Y),Y=setTimeout(()=>{N=!1},100)},!1)}),aa(()=>{s||n(1,s=[]),s!==M&&s.length>0&&n(2,_=0),M=s});function G(R){R.isCreator||r("itemSelected",R)}function D(R){N||n(2,_=R)}function H(R){const{item:te,i:C,event:X}=R;if(X.stopPropagation(),v&&!S&&v[b]===te[b])return I();te.isCreator?r("itemCreated",m):Bt(te)&&(n(19,w=C),n(2,_=C),G(te))}function I(){r("closeList")}async function L(R){if(o)return;let te=!0;for(;te;)R>0&&_===s.length-1?n(2,_=0):R<0&&_===0?n(2,_=s.length-1):n(2,_=_+R),te=!Bt(s[_]);await On(),re("hover")}function Z(R){switch(R.key){case"Escape":R.preventDefault(),I();break;case"ArrowDown":R.preventDefault(),s.length&&L(1);break;case"ArrowUp":R.preventDefault(),s.length&&L(-1);break;case"Enter":if(R.preventDefault(),s.length===0)break;const te=s[_];if(v&&!S&&v[b]===te[b]){I();break}te.isCreator?r("itemCreated",m):(n(19,w=_),G(s[_]));break;case"Tab":if(R.preventDefault(),s.length===0||v&&v[b]===s[_][b])return I();n(19,w=_),G(s[_]);break}}function re(R){if(o||!i)return;let te;const C=i.querySelector(`.listItem .${R}`);C&&(te=i.getBoundingClientRect().bottom-C.getBoundingClientRect().bottom),n(0,i.scrollTop-=te,i)}let J;function F(){const{height:R,width:te}=E.getBoundingClientRect();n(14,J=""),n(14,J+=`min-width:${te}px;width:${P?"auto":"100%"};`),U==="top"||U==="auto"&&Xh(E,i).bottom?n(14,J+=`bottom:${R+V}px;`):n(14,J+=`top:${R+V}px;`)}const K=R=>D(R),Q=R=>D(R),ge=(R,te,C)=>H({item:R,i:te,event:C}),pe=R=>D(R),_e=R=>D(R),Me=(R,te,C)=>H({item:R,i:te,event:C});function ce(R){Ye[R?"unshift":"push"](()=>{i=R,n(0,i)})}return e.$$set=R=>{"container"in R&&n(0,i=R.container),"VirtualList"in R&&n(3,a=R.VirtualList),"Item"in R&&n(4,l=R.Item),"isVirtualList"in R&&n(5,o=R.isVirtualList),"items"in R&&n(1,s=R.items),"labelIdentifier"in R&&n(20,u=R.labelIdentifier),"getOptionLabel"in R&&n(6,f=R.getOptionLabel),"getGroupHeaderLabel"in R&&n(7,h=R.getGroupHeaderLabel),"itemHeight"in R&&n(8,c=R.itemHeight),"hoverItemIndex"in R&&n(2,_=R.hoverItemIndex),"value"in R&&n(9,v=R.value),"optionIdentifier"in R&&n(10,b=R.optionIdentifier),"hideEmptyState"in R&&n(11,p=R.hideEmptyState),"noOptionsMessage"in R&&n(12,g=R.noOptionsMessage),"isMulti"in R&&n(21,S=R.isMulti),"activeItemIndex"in R&&n(19,w=R.activeItemIndex),"filterText"in R&&n(13,m=R.filterText),"parent"in R&&n(22,E=R.parent),"listPlacement"in R&&n(23,U=R.listPlacement),"listAutoWidth"in R&&n(24,P=R.listAutoWidth),"listOffset"in R&&n(25,V=R.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&E&&i&&F()},[i,s,_,a,l,o,f,h,c,v,b,p,g,m,J,D,H,Z,F,w,u,S,E,U,P,V,K,Q,ge,pe,_e,Me,ce]}class t0 extends st{constructor(t){super(),ut(this,t,e0,$h,ft,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function n0(e){let t,n=e[0](e[1])+"";return{c(){t=se("div"),this.h()},l(r){t=ue(r,"DIV",{class:!0});var i=B(t);i.forEach(A),this.h()},h(){d(t,"class","selection svelte-pu1q1n")},m(r,i){q(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Te,o:Te,d(r){r&&A(t)}}}function r0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=a=>{"getSelectionLabel"in a&&n(0,r=a.getSelectionLabel),"item"in a&&n(1,i=a.item)},[r,i]}class i0 extends st{constructor(t){super(),ut(this,t,r0,n0,ft,{getSelectionLabel:0,item:1})}}function dl(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function _l(e){let t,n,r,i,a;function l(...o){return e[6](e[11],...o)}return{c(){t=se("div"),n=$("svg"),r=$("path"),this.h()},l(o){t=ue(o,"DIV",{class:!0});var s=B(t);n=ee(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=B(n);r=ee(u,"path",{d:!0}),B(r).forEach(A),u.forEach(A),s.forEach(A),this.h()},h(){d(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),d(n,"width","100%"),d(n,"height","100%"),d(n,"viewBox","-2 -2 50 50"),d(n,"focusable","false"),d(n,"aria-hidden","true"),d(n,"role","presentation"),d(n,"class","svelte-liu9pa"),d(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){q(o,t,s),O(t,n),O(n,r),i||(a=j(t,"click",l),i=!0)},p(o,s){e=o},d(o){o&&A(t),i=!1,a()}}}function ml(e){let t,n,r=e[4](e[9])+"",i,a,l,o,s,u=!e[2]&&!e[3]&&_l(e);function f(...h){return e[7](e[11],...h)}return{c(){t=se("div"),n=se("div"),i=ke(),u&&u.c(),a=ke(),this.h()},l(h){t=ue(h,"DIV",{class:!0});var c=B(t);n=ue(c,"DIV",{class:!0});var _=B(n);_.forEach(A),i=Ae(c),u&&u.l(c),a=Ae(c),c.forEach(A),this.h()},h(){d(n,"class","multiSelectItem_label svelte-liu9pa"),d(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(h,c){q(h,t,c),O(t,n),n.innerHTML=r,O(t,i),u&&u.m(t,null),O(t,a),o||(s=j(t,"click",f),o=!0)},p(h,c){e=h,c&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,c):(u=_l(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),c&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&d(t,"class",l)},d(h){h&&A(t),u&&u.d(),o=!1,s()}}}function l0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=ml(dl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=he()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=he()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);q(i,t,a)},p(i,[a]){if(a&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const o=dl(i,n,l);r[l]?r[l].p(o,a):(r[l]=ml(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Te,o:Te,d(i){ni(r,i),i&&A(t)}}}function a0(e,t,n){const r=ti();let{value:i=[]}=t,{activeValue:a=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:s=void 0}=t;function u(c,_){_.stopPropagation(),r("multiItemClear",{i:c})}const f=(c,_)=>u(c,_),h=(c,_)=>o?u(c,_):{};return e.$$set=c=>{"value"in c&&n(0,i=c.value),"activeValue"in c&&n(1,a=c.activeValue),"isDisabled"in c&&n(2,l=c.isDisabled),"multiFullItemClearable"in c&&n(3,o=c.multiFullItemClearable),"getSelectionLabel"in c&&n(4,s=c.getSelectionLabel)},[i,a,l,o,s,u,f,h]}class o0 extends st{constructor(t){super(),ut(this,t,a0,l0,ft,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function gl(e,t,n){const r=e.slice();return r[23]=t[n],r}const s0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),pl=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function u0(e){let t;return{c(){t=ye("Missing template")},l(n){t=ve(n,"Missing template")},m(n,r){q(n,t,r)},d(n){n&&A(t)}}}function yl(e,t){let n,r,i;const a=t[15].default,l=bo(a,t,t[14],pl),o=l||u0();return{key:e,first:null,c(){n=se("svelte-virtual-list-row"),o&&o.c(),r=ke(),this.h()},l(s){n=ue(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=B(n);o&&o.l(u),r=Ae(u),u.forEach(A),this.h()},h(){Nr(n,"class","svelte-g2cagw"),this.first=n},m(s,u){q(s,n,u),o&&o.m(n,null),O(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&ko(l,a,t,t[14],i?Eo(a,t[14],u,s0):Ao(t[14]),pl)},i(s){i||(le(o,s),i=!0)},o(s){de(o,s),i=!1},d(s){s&&A(n),o&&o.d(s)}}}function f0(e){let t,n,r=[],i=new Map,a,l,o,s,u=e[5];const f=h=>h[23].index;for(let h=0;h<u.length;h+=1){let c=gl(e,u,h),_=f(c);i.set(_,r[h]=yl(_,c))}return{c(){t=se("svelte-virtual-list-viewport"),n=se("svelte-virtual-list-contents");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){t=ue(h,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var c=B(t);n=ue(c,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=B(n);for(let v=0;v<r.length;v+=1)r[v].l(_);_.forEach(A),c.forEach(A),this.h()},h(){Gt(n,"padding-top",e[6]+"px"),Gt(n,"padding-bottom",e[7]+"px"),Nr(n,"class","svelte-g2cagw"),Gt(t,"height",e[0]),Nr(t,"class","svelte-g2cagw"),wn(()=>e[18].call(t))},m(h,c){q(h,t,c),O(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),a=rr(t,e[18].bind(t)),l=!0,o||(s=j(t,"scroll",e[8]),o=!0)},p(h,[c]){c&16418&&(u=h[5],He(),r=Mt(r,c,f,1,h,u,i,n,wo,yl,null,gl),Ve()),(!l||c&64)&&Gt(n,"padding-top",h[6]+"px"),(!l||c&128)&&Gt(n,"padding-bottom",h[7]+"px"),(!l||c&1)&&Gt(t,"height",h[0])},i(h){if(!l){for(let c=0;c<u.length;c+=1)le(r[c]);l=!0}},o(h){for(let c=0;c<r.length;c+=1)de(r[c]);l=!1},d(h){h&&A(t);for(let c=0;c<r.length;c+=1)r[c].d();e[16](null),e[17](null),a(),o=!1,s()}}}function c0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:a=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:f=0}=t,h=[],c,_,v,b=0,p,g,S=0,w=0,m;async function E(N,M,G){const{scrollTop:D}=_;await On();let H=S-D,I=u;for(;H<M&&I<N.length;){let Z=c[I-u];Z||(n(10,f=I+1),await On(),Z=c[I-u]);const re=h[I]=G||Z.offsetHeight;H+=re,I+=1}n(10,f=I);const L=N.length-f;m=(S+H)/f,n(7,w=L*m),h.length=N.length,_&&n(3,_.scrollTop=0,_)}async function U(){const{scrollTop:N}=_,M=u;for(let I=0;I<c.length;I+=1)h[u+I]=o||c[I].offsetHeight;let G=0,D=0;for(;G<a.length;){const I=h[G]||m;if(D+I>N){n(9,u=G),n(6,S=D);break}D+=I,G+=1}for(;G<a.length&&(D+=h[G]||m,G+=1,!(D>N+b)););n(10,f=G);const H=a.length-f;for(m=D/f;G<a.length;)h[G++]=m;if(n(7,w=H*m),u<M){await On();let I=0,L=0;for(let re=u;re<M;re+=1)c[re-u]&&(I+=h[re],L+=o||c[re-u].offsetHeight);const Z=L-I;_.scrollTo(0,N+Z)}}nr(()=>{c=v.getElementsByTagName("svelte-virtual-list-row"),n(13,g=!0)});function P(N){Ye[N?"unshift":"push"](()=>{v=N,n(4,v)})}function V(N){Ye[N?"unshift":"push"](()=>{_=N,n(3,_)})}function Y(){b=this.offsetHeight,n(2,b)}return e.$$set=N=>{"items"in N&&n(11,a=N.items),"height"in N&&n(0,l=N.height),"itemHeight"in N&&n(12,o=N.itemHeight),"hoverItemIndex"in N&&n(1,s=N.hoverItemIndex),"start"in N&&n(9,u=N.start),"end"in N&&n(10,f=N.end),"$$scope"in N&&n(14,i=N.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,p=a.slice(u,f).map((N,M)=>({index:M+u,data:N}))),e.$$.dirty&14340&&g&&E(a,b,o)},[l,s,b,_,v,p,S,w,U,u,f,a,o,g,i,r,P,V,Y]}class h0 extends st{constructor(t){super(),ut(this,t,c0,f0,ft,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function d0(e){let t,n;return{c(){t=$("svg"),n=$("path"),this.h()},l(r){t=ee(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=B(t);n=ee(i,"path",{fill:!0,d:!0}),B(n).forEach(A),i.forEach(A),this.h()},h(){d(n,"fill","currentColor"),d(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","-2 -2 50 50"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"role","presentation")},m(r,i){q(r,t,i),O(t,n)},p:Te,i:Te,o:Te,d(r){r&&A(t)}}}class _0 extends st{constructor(t){super(),ut(this,t,null,d0,ft,{})}}function m0(e,t,n){let r;return function(){let a=this,l=arguments,o=function(){r=null,n||e.apply(a,l)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,l)}}function vl(e,t,n){const r=e.slice();return r[103]=t[n],r}function wl(e){let t,n,r,i,a;return{c(){t=se("span"),n=ye(e[33]),r=ke(),i=se("span"),a=ye(e[32]),this.h()},l(l){t=ue(l,"SPAN",{id:!0});var o=B(t);n=ve(o,e[33]),o.forEach(A),r=Ae(l),i=ue(l,"SPAN",{id:!0});var s=B(i);a=ve(s,e[32]),s.forEach(A),this.h()},h(){d(t,"id","aria-selection"),d(i,"id","aria-context")},m(l,o){q(l,t,o),O(t,n),q(l,r,o),q(l,i,o),O(i,a)},p(l,o){o[1]&4&&qe(n,l[33]),o[1]&2&&qe(a,l[32])},d(l){l&&A(t),l&&A(r),l&&A(i)}}}function bl(e){let t,n,r;const i=[e[18]];var a=e[17];function l(o){let s={};for(let u=0;u<i.length;u+=1)s=ri(s,i[u]);return{props:s}}return a&&(t=Ue(a,l())),{c(){t&&Ne(t.$$.fragment),n=he()},l(o){t&&Je(t.$$.fragment,o),n=he()},m(o,s){t&&Ce(t,o,s),q(o,n,s),r=!0},p(o,s){const u=s[0]&262144?ii(i,[oa(o[18])]):{};if(a!==(a=o[17])){if(t){He();const f=t;de(f.$$.fragment,1,0,()=>{Le(f,1)}),Ve()}a?(t=Ue(a,l()),Ne(t.$$.fragment),le(t.$$.fragment,1),Ce(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(o){r||(t&&le(t.$$.fragment,o),r=!0)},o(o){t&&de(t.$$.fragment,o),r=!1},d(o){o&&A(n),t&&Le(t,o)}}}function kl(e){let t,n,r;var i=e[26];function a(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=Ue(i,a(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Ne(t.$$.fragment),n=he()},l(l){t&&Je(t.$$.fragment,l),n=he()},m(l,o){t&&Ce(t,l,o),q(l,n,o),r=!0},p(l,o){const s={};if(o[0]&4&&(s.value=l[2]),o[0]&4096&&(s.getSelectionLabel=l[12]),o[0]&1073741824&&(s.activeValue=l[30]),o[0]&512&&(s.isDisabled=l[9]),o[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){He();const u=t;de(u.$$.fragment,1,0,()=>{Le(u,1)}),Ve()}i?(t=Ue(i,a(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),Ne(t.$$.fragment),le(t.$$.fragment,1),Ce(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&le(t.$$.fragment,l),r=!0)},o(l){t&&de(t.$$.fragment,l),r=!1},d(l){l&&A(n),t&&Le(t,l)}}}function Al(e){let t,n,r,i,a;var l=e[25];function o(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=Ue(l,o(e))),{c(){t=se("div"),n&&Ne(n.$$.fragment),this.h()},l(s){t=ue(s,"DIV",{class:!0});var u=B(t);n&&Je(n.$$.fragment,u),u.forEach(A),this.h()},h(){d(t,"class","selectedItem svelte-17l1npl")},m(s,u){q(s,t,u),n&&Ce(n,t,null),r=!0,i||(a=j(t,"focus",e[40]),i=!0)},p(s,u){const f={};if(u[0]&4&&(f.item=s[2]),u[0]&4096&&(f.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){He();const h=n;de(h.$$.fragment,1,0,()=>{Le(h,1)}),Ve()}l?(n=Ue(l,o(s)),Ne(n.$$.fragment),le(n.$$.fragment,1),Ce(n,t,null)):n=null}else l&&n.$set(f)},i(s){r||(n&&le(n.$$.fragment,s),r=!0)},o(s){n&&de(n.$$.fragment,s),r=!1},d(s){s&&A(t),n&&Le(n),i=!1,a()}}}function El(e){let t,n,r,i,a;var l=e[23];function o(s){return{}}return l&&(n=Ue(l,o())),{c(){t=se("div"),n&&Ne(n.$$.fragment),this.h()},l(s){t=ue(s,"DIV",{class:!0,"aria-hidden":!0});var u=B(t);n&&Je(n.$$.fragment,u),u.forEach(A),this.h()},h(){d(t,"class","clearSelect svelte-17l1npl"),d(t,"aria-hidden","true")},m(s,u){q(s,t,u),n&&Ce(n,t,null),r=!0,i||(a=j(t,"click",Io(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){He();const f=n;de(f.$$.fragment,1,0,()=>{Le(f,1)}),Ve()}l?(n=Ue(l,o()),Ne(n.$$.fragment),le(n.$$.fragment,1),Ce(n,t,null)):n=null}},i(s){r||(n&&le(n.$$.fragment,s),r=!0)},o(s){n&&de(n.$$.fragment,s),r=!1},d(s){s&&A(t),n&&Le(n),i=!1,a()}}}function Il(e){let t;function n(a,l){return a[22]?p0:g0}let r=n(e),i=r(e);return{c(){t=se("div"),i.c(),this.h()},l(a){t=ue(a,"DIV",{class:!0,"aria-hidden":!0});var l=B(t);i.l(l),l.forEach(A),this.h()},h(){d(t,"class","indicator svelte-17l1npl"),d(t,"aria-hidden","true")},m(a,l){q(a,t,l),i.m(t,null)},p(a,l){r===(r=n(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,null)))},d(a){a&&A(t),i.d()}}}function g0(e){let t,n;return{c(){t=$("svg"),n=$("path"),this.h()},l(r){t=ee(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=B(t);n=ee(i,"path",{d:!0}),B(n).forEach(A),i.forEach(A),this.h()},h(){d(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","0 0 20 20"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"class","svelte-17l1npl")},m(r,i){q(r,t,i),O(t,n)},p:Te,d(r){r&&A(t)}}}function p0(e){let t,n;return{c(){t=new Mo(!1),n=he(),this.h()},l(r){t=To(r,!1),n=he(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),q(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&A(n),r&&t.d()}}}function Sl(e){let t,n,r;return{c(){t=se("div"),n=$("svg"),r=$("circle"),this.h()},l(i){t=ue(i,"DIV",{class:!0});var a=B(t);n=ee(a,"svg",{class:!0,viewBox:!0});var l=B(n);r=ee(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),B(r).forEach(A),l.forEach(A),a.forEach(A),this.h()},h(){d(r,"class","spinner_path svelte-17l1npl"),d(r,"cx","50"),d(r,"cy","50"),d(r,"r","20"),d(r,"fill","none"),d(r,"stroke","currentColor"),d(r,"stroke-width","5"),d(r,"stroke-miterlimit","10"),d(n,"class","spinner_icon svelte-17l1npl"),d(n,"viewBox","25 25 50 50"),d(t,"class","spinner svelte-17l1npl")},m(i,a){q(i,t,a),O(t,n),O(n,r)},d(i){i&&A(t)}}}function Ml(e){let t,n,r,i;const a=[e[34]];function l(u){e[84](u)}var o=e[24];function s(u){let f={};for(let h=0;h<a.length;h+=1)f=ri(f,a[h]);return u[28]!==void 0&&(f.hoverItemIndex=u[28]),{props:f}}return o&&(t=Ue(o,s(e)),Ye.push(()=>Ai(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Ne(t.$$.fragment),r=he()},l(u){t&&Je(t.$$.fragment,u),r=he()},m(u,f){t&&Ce(t,u,f),q(u,r,f),i=!0},p(u,f){const h=f[1]&8?ii(a,[oa(u[34])]):{};if(!n&&f[0]&268435456&&(n=!0,h.hoverItemIndex=u[28],So(()=>n=!1)),o!==(o=u[24])){if(t){He();const c=t;de(c.$$.fragment,1,0,()=>{Le(c,1)}),Ve()}o?(t=Ue(o,s(u)),Ye.push(()=>Ai(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),Ne(t.$$.fragment),le(t.$$.fragment,1),Ce(t,r.parentNode,r)):t=null}else o&&t.$set(h)},i(u){i||(t&&le(t.$$.fragment,u),i=!0)},o(u){t&&de(t.$$.fragment,u),i=!1},d(u){u&&A(r),t&&Le(t,u)}}}function Tl(e){let t,n,r;return{c(){t=se("input"),this.h()},l(i){t=ue(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,d(t,"class","svelte-17l1npl")},m(i,a){q(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&A(t)}}}function Nl(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=Cl(vl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=he()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=he()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);q(i,t,a)},p(i,a){if(a[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const o=vl(i,n,l);r[l]?r[l].p(o,a):(r[l]=Cl(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){ni(r,i),i&&A(t)}}}function Cl(e){let t,n,r;return{c(){t=se("input"),this.h()},l(i){t=ue(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,d(t,"class","svelte-17l1npl")},m(i,a){q(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&A(t)}}}function y0(e){let t,n,r,i,a,l,o,s,u,f,h,c,_,v,b,p,g,S,w=e[1]&&wl(e),m=e[17]&&bl(e),E=e[35]&&kl(e),U=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],P={};for(let I=0;I<U.length;I+=1)P=ri(P,U[I]);let V=!e[7]&&e[29]&&Al(e),Y=e[37]&&El(e),N=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&Il(e),M=e[4]&&Sl(),G=e[5]&&Ml(e),D=(!e[7]||e[7]&&!e[35])&&Tl(e),H=e[7]&&e[35]&&Nl(e);return{c(){t=se("div"),n=se("span"),w&&w.c(),r=ke(),m&&m.c(),i=ke(),E&&E.c(),a=ke(),l=se("input"),s=ke(),V&&V.c(),u=ke(),Y&&Y.c(),f=ke(),N&&N.c(),h=ke(),M&&M.c(),c=ke(),G&&G.c(),_=ke(),D&&D.c(),v=ke(),H&&H.c(),this.h()},l(I){t=ue(I,"DIV",{class:!0,style:!0});var L=B(t);n=ue(L,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var Z=B(n);w&&w.l(Z),Z.forEach(A),r=Ae(L),m&&m.l(L),i=Ae(L),E&&E.l(L),a=Ae(L),l=ue(L,"INPUT",{placeholder:!0,style:!0}),s=Ae(L),V&&V.l(L),u=Ae(L),Y&&Y.l(L),f=Ae(L),N&&N.l(L),h=Ae(L),M&&M.l(L),c=Ae(L),G&&G.l(L),_=Ae(L),D&&D.l(L),v=Ae(L),H&&H.l(L),L.forEach(A),this.h()},h(){d(n,"aria-live","polite"),d(n,"aria-atomic","false"),d(n,"aria-relevant","additions text"),d(n,"class","a11yText svelte-17l1npl"),bi(l,P),tt(l,"svelte-17l1npl",!0),d(t,"class",b="selectContainer "+e[21]+" svelte-17l1npl"),d(t,"style",e[11]),tt(t,"hasError",e[10]),tt(t,"multiSelect",e[7]),tt(t,"disabled",e[9]),tt(t,"focused",e[1])},m(I,L){q(I,t,L),O(t,n),w&&w.m(n,null),O(t,r),m&&m.m(t,null),O(t,i),E&&E.m(t,null),O(t,a),O(t,l),l.autofocus&&l.focus(),e[82](l),ki(l,e[3]),O(t,s),V&&V.m(t,null),O(t,u),Y&&Y.m(t,null),O(t,f),N&&N.m(t,null),O(t,h),M&&M.m(t,null),O(t,c),G&&G.m(t,null),O(t,_),D&&D.m(t,null),O(t,v),H&&H.m(t,null),e[85](t),p=!0,g||(S=[j(window,"click",e[41]),j(window,"focusin",e[41]),j(window,"keydown",e[39]),j(l,"focus",e[40]),j(l,"input",e[83]),j(t,"click",e[42])],g=!0)},p(I,L){I[1]?w?w.p(I,L):(w=wl(I),w.c(),w.m(n,null)):w&&(w.d(1),w=null),I[17]?m?(m.p(I,L),L[0]&131072&&le(m,1)):(m=bl(I),m.c(),le(m,1),m.m(t,i)):m&&(He(),de(m,1,1,()=>{m=null}),Ve()),I[35]?E?(E.p(I,L),L[1]&16&&le(E,1)):(E=kl(I),E.c(),le(E,1),E.m(t,a)):E&&(He(),de(E,1,1,()=>{E=null}),Ve()),bi(l,P=ii(U,[(!p||L[0]&8192&&o!==(o=!I[13]))&&{readOnly:o},L[1]&1&&I[31],(!p||L[1]&32)&&{placeholder:I[36]},(!p||L[0]&16384)&&{style:I[14]},(!p||L[0]&512)&&{disabled:I[9]}])),L[0]&8&&l.value!==I[3]&&ki(l,I[3]),tt(l,"svelte-17l1npl",!0),!I[7]&&I[29]?V?(V.p(I,L),L[0]&536871040&&le(V,1)):(V=Al(I),V.c(),le(V,1),V.m(t,u)):V&&(He(),de(V,1,1,()=>{V=null}),Ve()),I[37]?Y?(Y.p(I,L),L[1]&64&&le(Y,1)):(Y=El(I),Y.c(),le(Y,1),Y.m(t,f)):Y&&(He(),de(Y,1,1,()=>{Y=null}),Ve()),!I[37]&&(I[20]||I[19]&&!I[2]||!I[13]&&!I[9]&&!I[4]&&(I[29]&&!I[15]||!I[29]))?N?N.p(I,L):(N=Il(I),N.c(),N.m(t,h)):N&&(N.d(1),N=null),I[4]?M||(M=Sl(),M.c(),M.m(t,c)):M&&(M.d(1),M=null),I[5]?G?(G.p(I,L),L[0]&32&&le(G,1)):(G=Ml(I),G.c(),le(G,1),G.m(t,_)):G&&(He(),de(G,1,1,()=>{G=null}),Ve()),!I[7]||I[7]&&!I[35]?D?D.p(I,L):(D=Tl(I),D.c(),D.m(t,v)):D&&(D.d(1),D=null),I[7]&&I[35]?H?H.p(I,L):(H=Nl(I),H.c(),H.m(t,null)):H&&(H.d(1),H=null),(!p||L[0]&2097152&&b!==(b="selectContainer "+I[21]+" svelte-17l1npl"))&&d(t,"class",b),(!p||L[0]&2048)&&d(t,"style",I[11]),(!p||L[0]&2098176)&&tt(t,"hasError",I[10]),(!p||L[0]&2097280)&&tt(t,"multiSelect",I[7]),(!p||L[0]&2097664)&&tt(t,"disabled",I[9]),(!p||L[0]&2097154)&&tt(t,"focused",I[1])},i(I){p||(le(m),le(E),le(V),le(Y),le(G),p=!0)},o(I){de(m),de(E),de(V),de(Y),de(G),p=!1},d(I){I&&A(t),w&&w.d(),m&&m.d(),E&&E.d(),e[82](null),V&&V.d(),Y&&Y.d(),N&&N.d(),M&&M.d(),G&&G.d(),D&&D.d(),H&&H.d(),e[85](null),g=!1,ct(S)}}}function Ll(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function v0(e,t,n){let r,i,a,l,o,s,u,f;const h=ti();let{id:c=null}=t,{container:_=void 0}=t,{input:v=void 0}=t,{isMulti:b=!1}=t,{multiFullItemClearable:p=!1}=t,{isDisabled:g=!1}=t,{isCreatable:S=!1}=t,{isFocused:w=!1}=t,{value:m=null}=t,{filterText:E=""}=t,{placeholder:U="Select..."}=t,{placeholderAlwaysShow:P=!1}=t,{items:V=null}=t,{itemFilter:Y=(y,ie,be)=>`${y}`.toLowerCase().includes(ie.toLowerCase())}=t,{groupBy:N=void 0}=t,{groupFilter:M=y=>y}=t,{isGroupHeaderSelectable:G=!1}=t,{getGroupHeaderLabel:D=y=>y[H]||y.id}=t,{labelIdentifier:H="label"}=t,{getOptionLabel:I=(y,ie)=>y.isCreator?`Create "${ie}"`:y[H]}=t,{optionIdentifier:L="value"}=t,{loadOptions:Z=void 0}=t,{hasError:re=!1}=t,{containerStyles:J=""}=t,{getSelectionLabel:F=y=>y?y[H]:null}=t,{createGroupHeaderItem:K=y=>({value:y,label:y})}=t,{createItem:Q=y=>({value:y,label:y})}=t;const ge=()=>r;let{isSearchable:pe=!0}=t,{inputStyles:_e=""}=t,{isClearable:Me=!0}=t,{isWaiting:ce=!1}=t,{listPlacement:R="auto"}=t,{listOpen:te=!1}=t,{isVirtualList:C=!1}=t,{loadOptionsInterval:X=300}=t,{noOptionsMessage:ae="No options"}=t,{hideEmptyState:T=!1}=t,{inputAttributes:z={}}=t,{listAutoWidth:fe=!0}=t,{itemHeight:Ee=40}=t,{Icon:ne=void 0}=t,{iconProps:k={}}=t,{showChevron:x=!1}=t,{showIndicator:W=!1}=t,{containerClasses:Ie=""}=t,{indicatorSvg:Oe=void 0}=t,{listOffset:je=5}=t,{ClearIcon:rt=_0}=t,{Item:ze=Xa}=t,{List:xe=t0}=t,{Selection:oe=i0}=t,{MultiSelection:me=o0}=t,{VirtualList:De=h0}=t;function Be(y){if(y.loadOptions&&y.filterText.length>0)return;if(!y.items)return[];y.items&&y.items.length>0&&typeof y.items[0]!="object"&&(y.items=Ll(y.items));let ie=y.items.filter(be=>{let $e=Y(I(be,y.filterText),y.filterText,be);return $e&&y.isMulti&&y.value&&Array.isArray(y.value)&&($e=!y.value.some(Ct=>Ct[y.optionIdentifier]===be[y.optionIdentifier])),$e});return y.groupBy&&(ie=Qa(ie)),y.isCreatable&&(ie=Fe(ie,y.filterText)),ie}function Fe(y,ie){if(ie.length===0)return y;const be=Q(ie);return y[0]&&ie===y[0][H]?y:(be.isCreator=!0,[...y,be])}let{selectedValue:nn=null}=t,Se,pt,Nt,sr,ur,An;const Wa=m0(async()=>{n(4,ce=!0);let y=await Z(E).catch(ie=>{console.warn("svelte-select loadOptions error :>> ",ie),h("error",{type:"loadOptions",details:ie})});y&&!y.cancelled&&(y?(y&&y.length>0&&typeof y[0]!="object"&&(y=Ll(y)),n(81,r=[...y]),h("loaded",{items:r})):n(81,r=[]),S&&n(81,r=Fe(r,E)),n(4,ce=!1),n(1,w=!0),n(5,te=!0))},X);function Za(){typeof m=="string"?n(2,m={[L]:m,label:m}):b&&Array.isArray(m)&&m.length>0&&n(2,m=m.map(y=>typeof y=="string"?{value:y,label:y}:y))}let Pt;function Ja(){n(31,Pt=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},z)),c&&n(31,Pt.id=c,Pt),pe||n(31,Pt.readonly=!0,Pt)}function Qa(y){const ie=[],be={};y.forEach(Ct=>{const yt=N(Ct);ie.includes(yt)||(ie.push(yt),be[yt]=[],yt&&be[yt].push(Object.assign(K(yt,Ct),{id:yt,isGroupHeader:!0,isSelectable:G}))),be[yt].push(Object.assign({isGroupItem:!!yt},Ct))});const $e=[];return M(ie).forEach(Ct=>{$e.push(...be[Ct])}),$e}function ja(){if(b){JSON.stringify(m)!==JSON.stringify(pt)&&yi()&&h("select",m);return}(!pt||JSON.stringify(m[L])!==JSON.stringify(pt[L]))&&h("select",m)}function $a(){w||te?fr():v&&v.blur()}function eo(){m&&(Array.isArray(m)?n(2,m=[...m]):n(2,m=[m]))}function to(){m&&n(2,m=null)}function no(){E.length!==0&&(n(1,w=!0),n(5,te=!0),Z?Wa():(n(5,te=!0),b&&n(30,Se=void 0)))}aa(async()=>{n(77,pt=m),n(78,Nt=E),n(79,sr=w),n(80,ur=b)});function yi(){let y=!0;if(m){const ie=[],be=[];m.forEach($e=>{ie.includes($e[L])?y=!1:(ie.push($e[L]),be.push($e))}),y||n(2,m=be)}return y}function vi(y){let ie=y?y[L]:m[L];return V.find(be=>be[L]===ie)}function ro(y){!y||y.length===0||y.some(ie=>typeof ie!="object")||!m||(b?m.some(ie=>!ie||!ie[L]):!m[L])||(Array.isArray(m)?n(2,m=m.map(ie=>vi(ie)||ie)):n(2,m=vi()||m))}function wi(y){const{detail:ie}=y,be=m[ie?ie.i:m.length-1];m.length===1?n(2,m=void 0):n(2,m=m.filter($e=>$e!==be)),h("clear",be)}function io(y){if(!!w)switch(y.key){case"ArrowDown":y.preventDefault(),n(5,te=!0),n(30,Se=void 0);break;case"ArrowUp":y.preventDefault(),n(5,te=!0),n(30,Se=void 0);break;case"Tab":te||n(1,w=!1);break;case"Backspace":if(!b||E.length>0)return;if(b&&m&&m.length>0){if(wi(Se!==void 0?Se:m.length-1),Se===0||Se===void 0)break;n(30,Se=m.length>Se?Se-1:void 0)}break;case"ArrowLeft":if(!b||E.length>0)return;Se===void 0?n(30,Se=m.length-1):m.length>Se&&Se!==0&&n(30,Se-=1);break;case"ArrowRight":if(!b||E.length>0||Se===void 0)return;Se===m.length-1?n(30,Se=void 0):Se<m.length-1&&n(30,Se+=1);break}}function fr(){n(1,w=!0),v&&v.focus()}function lo(y){if(!_)return;const ie=y.path&&y.path.length>0?y.path[0]:y.target;_.contains(ie)||_.contains(y.relatedTarget)||(n(1,w=!1),n(5,te=!1),n(30,Se=void 0),v&&v.blur())}function ao(){g||(n(1,w=!0),n(5,te=!te))}function oo(){n(2,m=void 0),n(5,te=!1),h("clear",m),fr()}nr(()=>{w&&v&&v.focus()});function so(y){const{detail:ie}=y;if(ie){n(3,E="");const be=Object.assign({},ie);(!be.isGroupHeader||be.isSelectable)&&(b?n(2,m=m?m.concat([be]):[be]):n(2,m=be),n(2,m),setTimeout(()=>{n(5,te=!1),n(30,Se=void 0)}))}}function uo(y){const{detail:ie}=y;b?(n(2,m=m||[]),n(2,m=[...m,Q(ie)])):n(2,m=Q(ie)),h("itemCreated",ie),n(3,E=""),n(5,te=!1),n(30,Se=void 0)}function fo(){n(3,E=""),n(5,te=!1)}let{ariaValues:cr=y=>`Option ${y}, selected.`}=t,{ariaListOpen:hr=(y,ie)=>`You are currently focused on option ${y}. There are ${ie} results available.`}=t,{ariaFocused:dr=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function co(){let y;return b&&m.length>0?y=m.map(ie=>F(ie)).join(", "):y=F(m),cr(y)}function ho(){if(!w||!r||r.length===0)return"";let y=r[An];if(te&&y){let ie=F(y),be=r?r.length:0;return hr(ie,be)}else return dr()}function _o(y){Ye[y?"unshift":"push"](()=>{v=y,n(6,v)})}function mo(){E=this.value,n(3,E)}function go(y){An=y,n(28,An)}function po(y){Ye[y?"unshift":"push"](()=>{_=y,n(0,_)})}return e.$$set=y=>{"id"in y&&n(46,c=y.id),"container"in y&&n(0,_=y.container),"input"in y&&n(6,v=y.input),"isMulti"in y&&n(7,b=y.isMulti),"multiFullItemClearable"in y&&n(8,p=y.multiFullItemClearable),"isDisabled"in y&&n(9,g=y.isDisabled),"isCreatable"in y&&n(47,S=y.isCreatable),"isFocused"in y&&n(1,w=y.isFocused),"value"in y&&n(2,m=y.value),"filterText"in y&&n(3,E=y.filterText),"placeholder"in y&&n(48,U=y.placeholder),"placeholderAlwaysShow"in y&&n(49,P=y.placeholderAlwaysShow),"items"in y&&n(50,V=y.items),"itemFilter"in y&&n(51,Y=y.itemFilter),"groupBy"in y&&n(52,N=y.groupBy),"groupFilter"in y&&n(53,M=y.groupFilter),"isGroupHeaderSelectable"in y&&n(54,G=y.isGroupHeaderSelectable),"getGroupHeaderLabel"in y&&n(55,D=y.getGroupHeaderLabel),"labelIdentifier"in y&&n(56,H=y.labelIdentifier),"getOptionLabel"in y&&n(57,I=y.getOptionLabel),"optionIdentifier"in y&&n(58,L=y.optionIdentifier),"loadOptions"in y&&n(59,Z=y.loadOptions),"hasError"in y&&n(10,re=y.hasError),"containerStyles"in y&&n(11,J=y.containerStyles),"getSelectionLabel"in y&&n(12,F=y.getSelectionLabel),"createGroupHeaderItem"in y&&n(60,K=y.createGroupHeaderItem),"createItem"in y&&n(61,Q=y.createItem),"isSearchable"in y&&n(13,pe=y.isSearchable),"inputStyles"in y&&n(14,_e=y.inputStyles),"isClearable"in y&&n(15,Me=y.isClearable),"isWaiting"in y&&n(4,ce=y.isWaiting),"listPlacement"in y&&n(63,R=y.listPlacement),"listOpen"in y&&n(5,te=y.listOpen),"isVirtualList"in y&&n(64,C=y.isVirtualList),"loadOptionsInterval"in y&&n(65,X=y.loadOptionsInterval),"noOptionsMessage"in y&&n(66,ae=y.noOptionsMessage),"hideEmptyState"in y&&n(67,T=y.hideEmptyState),"inputAttributes"in y&&n(16,z=y.inputAttributes),"listAutoWidth"in y&&n(68,fe=y.listAutoWidth),"itemHeight"in y&&n(69,Ee=y.itemHeight),"Icon"in y&&n(17,ne=y.Icon),"iconProps"in y&&n(18,k=y.iconProps),"showChevron"in y&&n(19,x=y.showChevron),"showIndicator"in y&&n(20,W=y.showIndicator),"containerClasses"in y&&n(21,Ie=y.containerClasses),"indicatorSvg"in y&&n(22,Oe=y.indicatorSvg),"listOffset"in y&&n(70,je=y.listOffset),"ClearIcon"in y&&n(23,rt=y.ClearIcon),"Item"in y&&n(71,ze=y.Item),"List"in y&&n(24,xe=y.List),"Selection"in y&&n(25,oe=y.Selection),"MultiSelection"in y&&n(26,me=y.MultiSelection),"VirtualList"in y&&n(72,De=y.VirtualList),"selectedValue"in y&&n(73,nn=y.selectedValue),"ariaValues"in y&&n(74,cr=y.ariaValues),"ariaListOpen"in y&&n(75,hr=y.ariaListOpen),"ariaFocused"in y&&n(76,dr=y.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Be({loadOptions:Z,filterText:E,items:V,value:m,isMulti:b,optionIdentifier:L,groupBy:N,isCreatable:S})),e.$$.dirty[2]&2048&&nn&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&ro(V),e.$$.dirty[0]&4&&m&&Za(),e.$$.dirty[0]&73728&&(z||!pe)&&Ja(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(b&&eo(),ur&&!b&&to()),e.$$.dirty[0]&132&&b&&m&&m.length>1&&yi(),e.$$.dirty[0]&4&&m&&ja(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!m&&b&&pt&&h("select",m),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&w!==sr&&$a(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&E!==Nt&&no(),e.$$.dirty[0]&12&&n(29,i=m&&E.length===0),e.$$.dirty[0]&536904208&&n(37,a=i&&Me&&!g&&!ce),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=P&&b?U:m?"":U),e.$$.dirty[0]&132&&n(35,o=b&&m&&m.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:ze,filterText:E,optionIdentifier:L,noOptionsMessage:ae,hideEmptyState:T,isVirtualList:C,VirtualList:De,value:m,isMulti:b,getGroupHeaderLabel:D,items:r,itemHeight:Ee,getOptionLabel:I,listPlacement:R,parent:_,listAutoWidth:fe,listOffset:je}),e.$$.dirty[0]&132&&n(33,u=m?co():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,f=ho())},[_,w,m,E,ce,te,v,b,p,g,re,J,F,pe,_e,Me,z,ne,k,x,W,Ie,Oe,rt,xe,oe,me,oo,An,i,Se,Pt,f,u,s,o,l,a,wi,io,fr,lo,ao,so,uo,fo,c,S,U,P,V,Y,N,M,G,D,H,I,L,Z,K,Q,ge,R,C,X,ae,T,fe,Ee,je,ze,De,nn,cr,hr,dr,pt,Nt,sr,ur,r,_o,mo,go,po]}class Dl extends st{constructor(t){super(),ut(this,t,v0,y0,ft,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function w0(e){const t=e-1;return t*t*t+1}function b0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),a=i.transform==="none"?"":i.transform,[l,o]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*o/n.height-(n.top+o),{delay:f=0,duration:h=_=>Math.sqrt(_)*120,easing:c=w0}=r;return{delay:f,duration:nt(h)?h(Math.sqrt(s*s+u*u)):h,easing:c,css:(_,v)=>{const b=v*s,p=v*u,g=_+v*t.width/n.width,S=_+v*t.height/n.height;return`transform: ${a} translate(${b}px, ${p}px) scale(${g}, ${S});`}}}function k0(e,{delay:t=0,duration:n=400,easing:r=No}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}const Zt=li([2020]),Ze=li(new Set),Un=li(!0);class A0{constructor(t){Re(this,"id");Re(this,"code");Re(this,"name");Re(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class zn{constructor(t){Re(this,"id");Re(this,"code");Re(this,"name");Re(this,"level");Re(this,"parent_id");Re(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class St{constructor(t,n,r){Re(this,"location_id");Re(this,"location");Re(this,"partner_id");Re(this,"partner");Re(this,"product_id");Re(this,"product");Re(this,"year");Re(this,"export_value");Re(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}function Rl(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function Ol(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function Fl(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function E0(e){let t,n,r,i,a;return{c(){t=$("text"),n=ye("No valid data for this pair."),this.h()},l(l){t=ee(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=B(t);n=ve(o,"No valid data for this pair."),o.forEach(A),this.h()},h(){d(t,"x",r=e[4]/2),d(t,"y",i=e[10]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){q(l,t,o),O(t,n)},p(l,o){o[0]&16&&r!==(r=l[4]/2)&&d(t,"x",r),o[0]&1024&&i!==(i=l[10]/2)&&d(t,"y",i)},i(l){a||wn(()=>{a=Co(t,k0,{}),a.start()})},o:Te,d(l){l&&A(t)}}}function I0(e){var X,ae;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,a,l,o=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",s,u,f,h,c=((X=e[2])==null?void 0:X.name)+" ",_,v=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",b,p,g=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",S,w,m=((ae=e[3])==null?void 0:ae.name)+"",E,U,P,V=[],Y=new Map,N,M=[],G=new Map,D,H=[],I=new Map,L,Z,re,J,F,K,Q,ge,pe,_e=e[11];const Me=T=>T[44].product_id;for(let T=0;T<_e.length;T+=1){let z=Fl(e,_e,T),fe=Me(z);Y.set(fe,V[T]=Vl(fe,z))}let ce=e[11];const R=T=>T[46];for(let T=0;T<ce.length;T+=1){let z=Ol(e,ce,T),fe=R(z);G.set(fe,M[T]=Bl(fe,z))}let te=e[11];const C=T=>T[44].product_id;for(let T=0;T<te.length;T+=1){let z=Rl(e,te,T),fe=C(z);I.set(fe,H[T]=Pl(fe,z))}return{c(){t=$("text"),n=ye("Sector "),i=ye(r),a=$("text"),l=ye("Trade Flow "),s=ye(o),f=$("text"),h=ye("From "),_=ye(c),b=ye(v),p=$("text"),S=ye(g),w=ye("\xA0From "),E=ye(m),P=$("g");for(let T=0;T<V.length;T+=1)V[T].c();N=he();for(let T=0;T<M.length;T+=1)M[T].c();D=he();for(let T=0;T<H.length;T+=1)H[T].c();L=$("line"),J=$("line"),K=$("g"),Q=$("g"),this.h()},l(T){t=ee(T,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var z=B(t);n=ve(z,"Sector "),i=ve(z,r),z.forEach(A),a=ee(T,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var fe=B(a);l=ve(fe,"Trade Flow "),s=ve(fe,o),fe.forEach(A),f=ee(T,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var Ee=B(f);h=ve(Ee,"From "),_=ve(Ee,c),b=ve(Ee,v),Ee.forEach(A),p=ee(T,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var ne=B(p);S=ve(ne,g),w=ve(ne,"\xA0From "),E=ve(ne,m),ne.forEach(A),P=ee(T,"g",{id:!0,transform:!0});var k=B(P);for(let x=0;x<V.length;x+=1)V[x].l(k);N=he();for(let x=0;x<M.length;x+=1)M[x].l(k);D=he();for(let x=0;x<H.length;x+=1)H[x].l(k);L=ee(k,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),B(L).forEach(A),J=ee(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),B(J).forEach(A),K=ee(k,"g",{id:!0}),B(K).forEach(A),k.forEach(A),Q=ee(T,"g",{id:!0,class:!0}),B(Q).forEach(A),this.h()},h(){var T,z,fe,Ee;d(t,"text-anchor","start"),d(t,"class","chart-header sortable svelte-1dlqwym"),d(t,"x",15),d(t,"y",sn/2),d(t,"alignment-baseline","hanging"),d(a,"text-anchor","middle"),d(a,"class","chart-header sortable svelte-1dlqwym"),d(a,"x",u=(e[4]-_t)/2+_t),d(a,"y",sn/2-7),d(a,"alignment-baseline","hanging"),d(f,"class","from-label sortable svelte-1dlqwym"),d(f,"x",_t+20),d(f,"y",sn/2-5),d(f,"alignment-baseline","hanging"),d(f,"font-size","13"),d(p,"class","from-label sortable svelte-1dlqwym"),d(p,"x",U=e[4]-20),d(p,"y",sn/2-5),d(p,"text-anchor","end"),d(p,"alignment-baseline","hanging"),d(p,"font-size","13"),d(L,"id","midline"),d(L,"transform",Z=`translate(${e[6](0)},0)`),d(L,"y1",20),d(L,"y2",re=(((z=(T=e[11])==null?void 0:T.length)!=null?z:0)+1)*Ke),d(L,"stroke","rgba(0,0,0,0.7)"),d(L,"stroke-width","1"),d(L,"class","svelte-1dlqwym"),d(J,"x1",_t),d(J,"y1",0),d(J,"x2",_t),d(J,"y2",F=(((Ee=(fe=e[11])==null?void 0:fe.length)!=null?Ee:0)+1)*Ke),d(J,"stroke","rgba(0,0,0,0.1)"),d(J,"stroke-width","1"),d(K,"id","axis"),d(P,"id","bar-content"),d(P,"transform",`translate(${0},${sn})`),d(Q,"id","bar-chart-tooltip"),d(Q,"class","tooltip")},m(T,z){q(T,t,z),O(t,n),O(t,i),q(T,a,z),O(a,l),O(a,s),q(T,f,z),O(f,h),O(f,_),O(f,b),q(T,p,z),O(p,S),O(p,w),O(p,E),q(T,P,z);for(let fe=0;fe<V.length;fe+=1)V[fe].m(P,null);O(P,N);for(let fe=0;fe<M.length;fe+=1)M[fe].m(P,null);O(P,D);for(let fe=0;fe<H.length;fe+=1)H[fe].m(P,null);O(P,L),O(P,J),O(P,K),e[37](K),q(T,Q,z),ge||(pe=[j(t,"click",e[30]),j(t,"keydown",T0),j(a,"click",e[31]),j(a,"keydown",N0),j(f,"keydown",C0),j(f,"click",e[32]),j(p,"click",e[33]),j(p,"keydown",L0)],ge=!0)},p(T,z){var fe,Ee,ne,k,x,W;if(z[0]&3&&r!==(r=T[1]==T[0].AlphaUp?"\u2191":T[1]==T[0].AlphaDown?"\u2193":" ")&&qe(i,r),z[0]&3&&o!==(o=T[1]==T[0].Up?"\u2191":T[1]==T[0].Down?"\u2193":" ")&&qe(s,o),z[0]&16&&u!==(u=(T[4]-_t)/2+_t)&&d(a,"x",u),z[0]&4&&c!==(c=((fe=T[2])==null?void 0:fe.name)+" ")&&qe(_,c),z[0]&3&&v!==(v=T[1]==T[0].LeftUp?"\u2191":T[1]==T[0].LeftDown?"\u2193":" ")&&qe(b,v),z[0]&3&&g!==(g=T[1]==T[0].RightUp?"\u2191":T[1]==T[0].RightDown?"\u2193":" ")&&qe(S,g),z[0]&8&&m!==(m=((Ee=T[3])==null?void 0:Ee.name)+"")&&qe(E,m),z[0]&16&&U!==(U=T[4]-20)&&d(p,"x",U),z[0]&2064&&(_e=T[11],V=Mt(V,z,Me,1,T,_e,Y,P,Jt,Vl,N,Fl)),z[0]&129472&&(ce=T[11],M=Mt(M,z,R,1,T,ce,G,P,Jt,Bl,D,Ol)),z[0]&6144){te=T[11];for(let Ie=0;Ie<H.length;Ie+=1)H[Ie].r();H=Mt(H,z,C,1,T,te,I,P,Lo,Pl,L,Rl);for(let Ie=0;Ie<H.length;Ie+=1)H[Ie].a()}z[0]&64&&Z!==(Z=`translate(${T[6](0)},0)`)&&d(L,"transform",Z),z[0]&2048&&re!==(re=(((k=(ne=T[11])==null?void 0:ne.length)!=null?k:0)+1)*Ke)&&d(L,"y2",re),z[0]&2048&&F!==(F=(((W=(x=T[11])==null?void 0:x.length)!=null?W:0)+1)*Ke)&&d(J,"y2",F)},i:Te,o:Te,d(T){T&&A(t),T&&A(a),T&&A(f),T&&A(p),T&&A(P);for(let z=0;z<V.length;z+=1)V[z].d();for(let z=0;z<M.length;z+=1)M[z].d();for(let z=0;z<H.length;z+=1)H[z].d();e[37](null),T&&A(Q),ge=!1,ct(pe)}}}function Hl(e){let t,n;return{c(){t=$("rect"),this.h()},l(r){t=ee(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),B(t).forEach(A),this.h()},h(){d(t,"x","0"),d(t,"y",n=e[46]*Ke+tn),d(t,"height",Ke),d(t,"width",e[4]),d(t,"fill","rgba(0,0,0,0.04)"),d(t,"class","svelte-1dlqwym")},m(r,i){q(r,t,i)},p(r,i){i[0]&2048&&n!==(n=r[46]*Ke+tn)&&d(t,"y",n),i[0]&16&&d(t,"width",r[4])},d(r){r&&A(t)}}}function Vl(e,t){let n,r,i=t[46]%2==0&&Hl(t);return{key:e,first:null,c(){n=he(),i&&i.c(),r=he(),this.h()},l(a){n=he(),i&&i.l(a),r=he(),this.h()},h(){this.first=n},m(a,l){q(a,n,l),i&&i.m(a,l),q(a,r,l)},p(a,l){t=a,t[46]%2==0?i?i.p(t,l):(i=Hl(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&A(n),i&&i.d(a),a&&A(r)}}}function Bl(e,t){let n,r,i,a,l,o,s,u,f,h,c,_,v,b,p;function g(){return t[34](t[44])}function S(){return t[35](t[44])}return{key:e,first:null,c(){n=$("g"),r=$("rect"),l=$("rect"),f=$("rect"),this.h()},l(w){n=ee(w,"g",{class:!0,transform:!0});var m=B(n);r=ee(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),B(r).forEach(A),l=ee(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),B(l).forEach(A),f=ee(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),B(f).forEach(A),m.forEach(A),this.h()},h(){d(r,"class","tab svelte-1dlqwym"),d(r,"x","0"),d(r,"y","2"),d(r,"height",Ke-4),d(r,"width",i=t[12].size>0&&t[12].has(t[44].product_id)?_t-1:6),d(r,"fill",a=t[7]?t[7](t[44].product.name):"white"),d(l,"class","country1-bar svelte-1dlqwym"),d(l,"x",o=t[6](-t[44].export_value)),d(l,"y",Cn/2),d(l,"height",Ke-Cn),d(l,"width",s=t[6](0)-t[6](-t[44].export_value)),d(l,"fill",u=t[8](t[44].location_id)),d(f,"class","country2-bar svelte-1dlqwym"),d(f,"x",h=t[6](0)),d(f,"y",Cn/2),d(f,"height",Ke-Cn),d(f,"width",c=t[6](t[44].import_value)-t[6](0)),d(f,"fill",_=t[8](t[44].partner_id)),d(n,"class","bar-row"),d(n,"transform",v=`translate(0, ${t[46]*Ke+tn})`),this.first=n},m(w,m){q(w,n,m),O(n,r),O(n,l),O(n,f),b||(p=[j(l,"focus",t[29]),j(l,"mouseover",function(){nt(t[14](t[44],!0))&&t[14](t[44],!0).apply(this,arguments)}),j(l,"mousemove",t[15]()),j(l,"mouseleave",t[16]()),j(l,"click",g),j(f,"focus",t[28]),j(f,"mouseover",function(){nt(t[14](t[44],!1))&&t[14](t[44],!1).apply(this,arguments)}),j(f,"mousemove",t[15]()),j(f,"mouseleave",t[16]()),j(f,"click",S)],b=!0)},p(w,m){t=w,m[0]&6144&&i!==(i=t[12].size>0&&t[12].has(t[44].product_id)?_t-1:6)&&d(r,"width",i),m[0]&2176&&a!==(a=t[7]?t[7](t[44].product.name):"white")&&d(r,"fill",a),m[0]&2112&&o!==(o=t[6](-t[44].export_value))&&d(l,"x",o),m[0]&2112&&s!==(s=t[6](0)-t[6](-t[44].export_value))&&d(l,"width",s),m[0]&2304&&u!==(u=t[8](t[44].location_id))&&d(l,"fill",u),m[0]&64&&h!==(h=t[6](0))&&d(f,"x",h),m[0]&2112&&c!==(c=t[6](t[44].import_value)-t[6](0))&&d(f,"width",c),m[0]&2304&&_!==(_=t[8](t[44].partner_id))&&d(f,"fill",_),m[0]&2048&&v!==(v=`translate(0, ${t[46]*Ke+tn})`)&&d(n,"transform",v)},d(w){w&&A(n),b=!1,ct(p)}}}function Pl(e,t){let n,r=t[44].product.name+"",i,a,l,o=Te,s,u;function f(){return t[36](t[44])}return{key:e,first:null,c(){n=$("text"),i=ye(r),this.h()},l(h){n=ee(h,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var c=B(n);i=ve(c,r),c.forEach(A),this.h()},h(){d(n,"class","product-text svelte-1dlqwym"),d(n,"alignment-baseline","hanging"),d(n,"x","10"),d(n,"y",a=t[46]*Ke+tn+6),this.first=n},m(h,c){q(h,n,c),O(n,i),s||(u=[j(n,"click",f),j(n,"keydown",D0)],s=!0)},p(h,c){t=h,c[0]&2048&&r!==(r=t[44].product.name+"")&&qe(i,r),c[0]&2048&&a!==(a=t[46]*Ke+tn+6)&&d(n,"y",a)},r(){l=n.getBoundingClientRect()},f(){Do(n),o()},a(){o(),o=Ro(n,l,b0,{duration:400,delay:20})},d(h){h&&A(n),s=!1,ct(u)}}}function Gl(e){let t,n,r,i,a;return{c(){t=$("rect"),n=$("text"),r=ye("Loading..."),this.h()},l(l){t=ee(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),B(t).forEach(A),n=ee(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=B(n);r=ve(o,"Loading..."),o.forEach(A),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[4]),d(t,"height",e[10]),d(t,"fill","rgba(255,255,255,0.9)"),d(t,"class","svelte-1dlqwym"),d(n,"x",i=e[4]/2),d(n,"y",a=e[10]/2),d(n,"alignment-baseline","central"),d(n,"text-anchor","middle")},m(l,o){q(l,t,o),q(l,n,o),O(n,r)},p(l,o){o[0]&16&&d(t,"width",l[4]),o[0]&1024&&d(t,"height",l[10]),o[0]&16&&i!==(i=l[4]/2)&&d(n,"x",i),o[0]&1024&&a!==(a=l[10]/2)&&d(n,"y",a)},d(l){l&&A(t),l&&A(n)}}}function S0(e){let t,n,r,i;function a(u,f){return u[11]&&u[11].length>0?I0:E0}let l=a(e),o=l(e),s=e[9]&&Gl(e);return{c(){t=se("div"),n=$("svg"),o.c(),r=he(),s&&s.c(),this.h()},l(u){t=ue(u,"DIV",{id:!0,class:!0});var f=B(t);n=ee(f,"svg",{class:!0});var h=B(n);o.l(h),r=he(),s&&s.l(h),h.forEach(A),f.forEach(A),this.h()},h(){d(n,"class","svelte-1dlqwym"),d(t,"id","bar-chart"),d(t,"class","viz-section svelte-1dlqwym"),wn(()=>e[38].call(t))},m(u,f){q(u,t,f),O(t,n),o.m(n,null),O(n,r),s&&s.m(n,null),i=rr(t,e[38].bind(t))},p(u,f){l===(l=a(u))&&o?o.p(u,f):(o.d(1),o=l(u),o&&(o.c(),le(o,1),o.m(n,r))),u[9]?s?s.p(u,f):(s=Gl(u),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i(u){le(o)},o:Te,d(u){u&&A(t),o.d(),s&&s.d(),i()}}}const sn=40,Ke=30,Ul=0,M0=10,tn=30,_t=100,Cn=4,Ln=10,zl=140,Yl=25,ei=105,Et=20,It=35,Yt=22;function dt(e,t){return e+ei<350?e+t:e+t-ei}const T0=()=>{},N0=()=>{},C0=()=>{},L0=()=>{},D0=()=>{};function R0(e,t,n){let r,i,a,l,o,s,u,f,h,c,_,v,b;Tt(e,Zt,C=>n(27,_=C)),Tt(e,Ze,C=>n(12,v=C)),Tt(e,Un,C=>n(13,b=C));let{data:p}=t;var g;(function(C){C[C.LeftUp=0]="LeftUp",C[C.LeftDown=1]="LeftDown",C[C.RightUp=2]="RightUp",C[C.RightDown=3]="RightDown",C[C.Up=4]="Up",C[C.Down=5]="Down",C[C.AlphaUp=6]="AlphaUp",C[C.AlphaDown=7]="AlphaDown"})(g||(g={}));let S=g.AlphaDown,{bilateralData:w,productColorScale:m,countryColorScale:E,country1:U,country2:P,loadingDrilldown:V,productData:Y,locationData:N}=p,M=800,G=550,D;const H=C=>Vt("$.3s")(C).replace(/G/,"B");function I(C,X,ae){return C+ae<M?C+X:C+X-ae}function L(C,X){return ae=>{let T=we("#bar-chart-tooltip"),z=zl+_.length*Yl;T.append("rect").attr("id","tooltip-rect").attr("width",z).attr("height",ei).attr("x",I(ae.layerX,Ln,z)).attr("y",dt(ae.layerY,Ln)),T.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",I(ae.layerX,Et,z)).attr("y",dt(ae.layerY,It)).style("fill",E?E(X?C.location_id:C.partner_id):"black").text(`${C.product.name}`),T.append("text").attr("id","tooltip-text2").attr("x",I(ae.layerX,Et,z)).attr("y",dt(ae.layerY,It+Yt)).text((X?"Export: ":"Import: ")+`${H(X?C.export_value:C.import_value)}`),T.append("text").attr("id","tooltip-text3").attr("x",I(ae.layerX,Et,z)).attr("y",dt(ae.layerY,It+2*Yt)).text(`Share: ${Vt(".2%")(X?C.export_value/f:C.import_value/h)}`),T.append("text").attr("id","tooltip-text4").attr("x",I(ae.layerX,Et,z)).attr("y",dt(ae.layerY,It+3*Yt)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function Z(){return C=>{let X=zl+_.length*Yl;we("#tooltip-rect").attr("x",I(C.layerX,Ln,X)).attr("y",dt(C.layerY,Ln)),we("#tooltip-text1").attr("x",I(C.layerX,Et,X)).attr("y",dt(C.layerY,It)),we("#tooltip-text2").attr("x",I(C.layerX,Et,X)).attr("y",dt(C.layerY,It+Yt)),we("#tooltip-text3").attr("x",I(C.layerX,Et,X)).attr("y",dt(C.layerY,It+2*Yt)),we("#tooltip-text4").attr("x",I(C.layerX,Et,X)).attr("y",dt(C.layerY,It+3*Yt))}}function re(){return C=>{we("#bar-chart-tooltip").selectAll("rect").remove(),we("#bar-chart-tooltip").selectAll("text").remove()}}function J(C){it.call(this,e,C)}function F(C){it.call(this,e,C)}const K=()=>{S==g.AlphaDown?n(1,S=g.AlphaUp):n(1,S=g.AlphaDown)},Q=()=>{S==g.Down?n(1,S=g.Up):n(1,S=g.Down)},ge=()=>{S==g.LeftDown?n(1,S=g.LeftUp):n(1,S=g.LeftDown)},pe=()=>{S==g.RightDown?n(1,S=g.RightUp):n(1,S=g.RightDown)},_e=C=>{b||(Un.set(!0),Ze.update(X=>(X.clear(),X))),v.has(C==null?void 0:C.product_id)?Ze.update(X=>{var ae;return X.delete((ae=C==null?void 0:C.product_id)!=null?ae:-1),console.log(X),X}):(C==null?void 0:C.product_id)>=0&&Ze.update(X=>{var ae;return X.add((ae=C==null?void 0:C.product_id)!=null?ae:-1),console.log(X),X})},Me=C=>{b&&(Un.set(!1),Ze.update(X=>(X.clear(),X))),v.has(C==null?void 0:C.product_id)?Ze.update(X=>{var ae;return X.delete((ae=C==null?void 0:C.product_id)!=null?ae:-1),console.log(X),X}):(C==null?void 0:C.product_id)>=0&&Ze.update(X=>{var ae;return X.add((ae=C==null?void 0:C.product_id)!=null?ae:-1),console.log(X),X})},ce=C=>{v.has(C.product_id)?Ze.update(X=>(X.delete(C.product_id),X)):Ze.update(X=>(X.add(C.product_id),X))};function R(C){Ye[C?"unshift":"push"](()=>{D=C,n(5,D)})}function te(){M=this.clientWidth,G=this.clientHeight,n(4,M),n(10,G)}return e.$$set=C=>{"data"in C&&n(17,p=C.data)},e.$$.update=()=>{var C,X,ae;if(e.$$.dirty[0]&131072&&n(18,{bilateralData:w,productColorScale:m,countryColorScale:E,country1:U,country2:P,loadingDrilldown:V,productData:Y,locationData:N}=p,w,(n(7,m),n(17,p)),(n(8,E),n(17,p)),(n(2,U),n(17,p)),(n(3,P),n(17,p)),(n(9,V),n(17,p)),(n(19,Y),n(17,p)),(n(20,N),n(17,p))),e.$$.dirty[0]&262156&&n(26,r=(ae=w==null?void 0:w.get((C=U==null?void 0:U.id)!=null?C:0))==null?void 0:ae.get((X=P==null?void 0:P.id)!=null?X:0)),e.$$.dirty[0]&201326592&&n(25,i=_.map(T=>{var z;return(z=r==null?void 0:r.get(T))!=null?z:new Array}).flat()),e.$$.dirty[0]&35127308&&n(23,a=Array.from(fa(i,T=>{var z,fe;return T.reduce((Ee,ne)=>(Ee.export_value+=ne.export_value,Ee.import_value+=ne.import_value,Ee),new St(N,Y,{location_id:(z=U==null?void 0:U.id)!=null?z:0,partner_id:(fe=P==null?void 0:P.id)!=null?fe:0,product_id:T[0].product_id,year:0,export_value:0,import_value:0}))},T=>T.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=a.filter(T=>T.product.level=="section")),e.$$.dirty[0]&16777219&&n(11,o=l.sort((T,z)=>{switch(S){case g.LeftUp:return T.export_value-z.export_value;case g.LeftDown:return z.export_value-T.export_value;case g.RightUp:return T.import_value-z.import_value;case g.RightDown:return z.import_value-T.import_value;case g.Up:return T.import_value+T.export_value-(z.import_value+z.export_value);case g.Down:return z.import_value+z.export_value-(T.import_value+T.export_value);case g.AlphaDown:return T.product.name.localeCompare(z.product.name);case g.AlphaUp:return z.product.name.localeCompare(T.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=dn(a,T=>T.export_value)),e.$$.dirty[0]&8388608&&n(21,u=dn(a,T=>T.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(f=Mi(a,T=>T.export_value)),e.$$.dirty[0]&8388608&&(h=Mi(a,T=>T.import_value)),e.$$.dirty[0]&6291472&&n(6,c=_n().domain([-s,u]).range([_t+Ul,M-Ul-M0])),e.$$.dirty[0]&96){let T=ha(c).tickFormat(z=>H(Math.abs(z)));we(D).transition().call(T)}},[g,S,U,P,M,D,c,m,E,V,G,o,v,b,L,Z,re,p,w,Y,N,u,s,a,l,i,r,_,J,F,K,Q,ge,pe,_e,Me,ce,R,te]}class O0 extends st{constructor(t){super(),ut(this,t,R0,S0,ft,{data:17},null,[-1,-1])}}function xl(e,t,n){const r=e.slice();return r[51]=t[n],r}function Xl(e,t,n){const r=e.slice();return r[51]=t[n],r}function ql(e,t,n){const r=e.slice();return r[51]=t[n],r}function Kl(e){let t,n,r;return{c(){t=$("rect"),this.h()},l(i){t=ee(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),B(t).forEach(A),this.h()},h(){d(t,"class","timebar svelte-o11v01"),d(t,"x",n=e[14](e[18][0])-12),d(t,"y",44),d(t,"width","24"),d(t,"height",r=e[3]-44-at),d(t,"fill","rgba(0,0,0,0.2)")},m(i,a){q(i,t,a)},p(i,a){a[0]&278528&&n!==(n=i[14](i[18][0])-12)&&d(t,"x",n),a[0]&8&&r!==(r=i[3]-44-at)&&d(t,"height",r)},d(i){i&&A(t)}}}function Wl(e){let t,n,r,i;return{c(){t=$("line"),this.h()},l(a){t=ee(a,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),B(t).forEach(A),this.h()},h(){d(t,"id","zeroline"),d(t,"x1",pi),d(t,"x2",n=e[2]-Rt),d(t,"y1",r=e[10](0)),d(t,"y2",i=e[10](0)),d(t,"stroke","rgba(0,0,0,0.7)"),d(t,"stroke-width","1")},m(a,l){q(a,t,l)},p(a,l){l[0]&4&&n!==(n=a[2]-Rt)&&d(t,"x2",n),l[0]&1024&&r!==(r=a[10](0))&&d(t,"y1",r),l[0]&1024&&i!==(i=a[10](0))&&d(t,"y2",i)},d(a){a&&A(t)}}}function Zl(e,t){let n,r,i,a,l,o,s,u;return{key:e,first:null,c(){n=$("rect"),this.h()},l(f){n=ee(f,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),B(n).forEach(A),this.h()},h(){d(n,"x",r=t[14](t[51].year)-mn/2),d(n,"width",mn),d(n,"y",i=t[24](t[51])),d(n,"height",a=t[25](t[51])),d(n,"fill",l=t[51].export_value<t[51].import_value?"#e41a1c":"#4daf4a"),d(n,"stroke",o=t[18].includes(t[51].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"opacity","0.6"),d(n,"class","svelte-o11v01"),this.first=n},m(f,h){q(f,n,h),s||(u=[j(n,"click",function(){nt(t[19](t[51].year))&&t[19](t[51].year).apply(this,arguments)}),j(n,"keydown",V0),j(n,"keypress",t[37]),j(n,"click",function(){nt(t[19](t[51].year))&&t[19](t[51].year).apply(this,arguments)}),j(n,"focus",t[38]),j(n,"blur",t[39]),j(n,"mouseover",function(){nt(t[21](t[51]))&&t[21](t[51]).apply(this,arguments)}),j(n,"mousemove",t[22]()),j(n,"mouseout",t[23]())],s=!0)},p(f,h){t=f,h[0]&49152&&r!==(r=t[14](t[51].year)-mn/2)&&d(n,"x",r),h[0]&32768&&i!==(i=t[24](t[51]))&&d(n,"y",i),h[0]&32768&&a!==(a=t[25](t[51]))&&d(n,"height",a),h[0]&32768&&l!==(l=t[51].export_value<t[51].import_value?"#e41a1c":"#4daf4a")&&d(n,"fill",l),h[0]&294912&&o!==(o=t[18].includes(t[51].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",o)},d(f){f&&A(n),s=!1,ct(u)}}}function Jl(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=$("circle"),this.h()},l(u){n=ee(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),B(n).forEach(A),this.h()},h(){d(n,"class","circ1 svelte-o11v01"),d(n,"cx",r=t[14](t[51].year)),d(n,"cy",i=t[13](t[51].export_value)),d(n,"r","6"),d(n,"fill",a=t[16](t[0])),d(n,"stroke",l=t[18].includes(t[51].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),this.first=n},m(u,f){q(u,n,f),o||(s=[j(n,"click",function(){nt(t[19](t[51].year))&&t[19](t[51].year).apply(this,arguments)}),j(n,"keydown",B0),j(n,"keypress",t[34]),j(n,"click",function(){nt(t[19](t[51].year))&&t[19](t[51].year).apply(this,arguments)}),j(n,"focus",t[35]),j(n,"blur",t[36]),j(n,"mouseover",function(){nt(t[20](t[51],!0))&&t[20](t[51],!0).apply(this,arguments)}),j(n,"mouseout",t[23]())],o=!0)},p(u,f){t=u,f[0]&49152&&r!==(r=t[14](t[51].year))&&d(n,"cx",r),f[0]&40960&&i!==(i=t[13](t[51].export_value))&&d(n,"cy",i),f[0]&65537&&a!==(a=t[16](t[0]))&&d(n,"fill",a),f[0]&294912&&l!==(l=t[18].includes(t[51].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&A(n),o=!1,ct(s)}}}function Ql(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=$("circle"),this.h()},l(u){n=ee(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),B(n).forEach(A),this.h()},h(){d(n,"cx",r=t[14](t[51].year)),d(n,"cy",i=t[13](t[51].import_value)),d(n,"r","6"),d(n,"fill",a=t[16](t[1])),d(n,"stroke",l=t[18].includes(t[51].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),d(n,"class","svelte-o11v01"),this.first=n},m(u,f){q(u,n,f),o||(s=[j(n,"click",function(){nt(t[19](t[51].year))&&t[19](t[51].year).apply(this,arguments)}),j(n,"keydown",P0),j(n,"keypress",t[31]),j(n,"click",function(){nt(t[19](t[51].year))&&t[19](t[51].year).apply(this,arguments)}),j(n,"focus",t[32]),j(n,"blur",t[33]),j(n,"mouseover",function(){nt(t[20](t[51],!1))&&t[20](t[51],!1).apply(this,arguments)}),j(n,"mouseout",t[23]())],o=!0)},p(u,f){t=u,f[0]&49152&&r!==(r=t[14](t[51].year))&&d(n,"cx",r),f[0]&40960&&i!==(i=t[13](t[51].import_value))&&d(n,"cy",i),f[0]&65538&&a!==(a=t[16](t[1]))&&d(n,"fill",a),f[0]&294912&&l!==(l=t[18].includes(t[51].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&A(n),o=!1,ct(s)}}}function F0(e){let t,n,r,i,a,l,o,s,u,f,h,c,_,v,b,p,g,S,w,m,E,U,P,V,Y,N,M,G,D,H,I=[],L=new Map,Z,re,J,F=[],K=new Map,Q,ge,pe,_e=[],Me=new Map,ce,R,te,C=!e[17]&&Kl(e),X=e[12]>0&&e[11]<0&&Wl(e),ae=e[15];const T=k=>k[51].year;for(let k=0;k<ae.length;k+=1){let x=ql(e,ae,k),W=T(x);L.set(W,I[k]=Zl(W,x))}let z=e[15];const fe=k=>k[51].year;for(let k=0;k<z.length;k+=1){let x=Xl(e,z,k),W=fe(x);K.set(W,F[k]=Jl(W,x))}let Ee=e[15];const ne=k=>k[51].year;for(let k=0;k<Ee.length;k+=1){let x=xl(e,Ee,k),W=ne(x);Me.set(W,_e[k]=Ql(W,x))}return{c(){t=se("div"),n=$("svg"),r=$("text"),i=ye("Total Trade Over Time"),l=$("g"),C&&C.c(),o=$("g"),u=$("g"),f=$("g"),c=$("g"),_=$("circle"),b=$("text"),p=ye("Export"),g=$("circle"),w=$("text"),m=ye("Import"),E=$("g"),U=$("rect"),P=$("text"),V=ye("Deficit"),Y=$("rect"),N=$("text"),M=ye("Surplus"),D=$("g"),X&&X.c(),H=he();for(let k=0;k<I.length;k+=1)I[k].c();Z=$("g"),re=$("path");for(let k=0;k<F.length;k+=1)F[k].c();Q=$("g"),ge=$("path");for(let k=0;k<_e.length;k+=1)_e[k].c();ce=$("g"),R=$("g"),this.h()},l(k){t=ue(k,"DIV",{id:!0,class:!0});var x=B(t);n=ee(x,"svg",{width:!0,height:!0});var W=B(n);r=ee(W,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var Ie=B(r);i=ve(Ie,"Total Trade Over Time"),Ie.forEach(A),l=ee(W,"g",{class:!0}),B(l).forEach(A),C&&C.l(W),o=ee(W,"g",{id:!0,transform:!0}),B(o).forEach(A),u=ee(W,"g",{id:!0,transform:!0}),B(u).forEach(A),f=ee(W,"g",{id:!0,transform:!0}),B(f).forEach(A),c=ee(W,"g",{id:!0,transform:!0});var Oe=B(c);_=ee(Oe,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),B(_).forEach(A),b=ee(Oe,"text",{x:!0,y:!0,"text-anchor":!0});var je=B(b);p=ve(je,"Export"),je.forEach(A),g=ee(Oe,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),B(g).forEach(A),w=ee(Oe,"text",{x:!0,y:!0,"text-anchor":!0});var rt=B(w);m=ve(rt,"Import"),rt.forEach(A),Oe.forEach(A),E=ee(W,"g",{id:!0,transform:!0});var ze=B(E);U=ee(ze,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),B(U).forEach(A),P=ee(ze,"text",{x:!0,y:!0,"text-anchor":!0});var xe=B(P);V=ve(xe,"Deficit"),xe.forEach(A),Y=ee(ze,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),B(Y).forEach(A),N=ee(ze,"text",{x:!0,y:!0,"text-anchor":!0});var oe=B(N);M=ve(oe,"Surplus"),oe.forEach(A),ze.forEach(A),D=ee(W,"g",{id:!0});var me=B(D);X&&X.l(me),H=he();for(let Fe=0;Fe<I.length;Fe+=1)I[Fe].l(me);me.forEach(A),Z=ee(W,"g",{class:!0});var De=B(Z);re=ee(De,"path",{fill:!0,stroke:!0,"stroke-width":!0}),B(re).forEach(A);for(let Fe=0;Fe<F.length;Fe+=1)F[Fe].l(De);De.forEach(A),Q=ee(W,"g",{class:!0});var Be=B(Q);ge=ee(Be,"path",{fill:!0,stroke:!0,"stroke-width":!0}),B(ge).forEach(A);for(let Fe=0;Fe<_e.length;Fe+=1)_e[Fe].l(Be);Be.forEach(A),ce=ee(W,"g",{}),B(ce).forEach(A),R=ee(W,"g",{id:!0,class:!0}),B(R).forEach(A),W.forEach(A),x.forEach(A),this.h()},h(){d(r,"class","chart-header"),d(r,"x",a=e[2]/2),d(r,"y",at-5),d(r,"text-anchor","middle"),d(l,"class","brush"),d(o,"id","xAxis"),d(o,"transform",s=`translate(${0},${e[3]-at})`),d(u,"id","yAisLeft"),d(u,"transform",`translate(${pi},${0})`),d(f,"id","yAisRight"),d(f,"transform",h=`translate(${e[2]-Rt},${0})`),d(_,"class","circ1"),d(_,"cx","20"),d(_,"cy","10"),d(_,"r","5"),d(_,"fill",v=e[16](e[0])),d(_,"stroke","rgba(0,0,0,0)"),d(_,"stroke-width","2"),d(b,"x","30"),d(b,"y","15"),d(b,"text-anchor","start"),d(g,"class","circ2"),d(g,"cx","20"),d(g,"cy","25"),d(g,"r","5"),d(g,"fill",S=e[16](e[1])),d(g,"stroke","rgba(0,0,0,0)"),d(g,"stroke-width","2"),d(w,"x","30"),d(w,"y","30"),d(w,"text-anchor","start"),d(c,"id","legendLeft"),d(c,"transform","translate(10,6)"),d(U,"class","deficit svelte-o11v01"),d(U,"x","15"),d(U,"y","5"),d(U,"width","10"),d(U,"height","10"),d(U,"fill",Ka),d(U,"opacity","0.6"),d(P,"x","30"),d(P,"y","15"),d(P,"text-anchor","start"),d(Y,"class","surplus svelte-o11v01"),d(Y,"x","15"),d(Y,"y","20"),d(Y,"width","10"),d(Y,"height","10"),d(Y,"fill",qa),d(Y,"opacity","0.6"),d(N,"x","30"),d(N,"y","30"),d(N,"text-anchor","start"),d(E,"id","legendRight"),d(E,"transform",G=`translate(${e[2]-2*Rt+5},6)`),d(D,"id","net-values-group"),d(re,"fill","none"),d(re,"stroke",J=e[16](e[0])),d(re,"stroke-width","2"),d(Z,"class","country1-group country-group svelte-o11v01"),d(ge,"fill","none"),d(ge,"stroke",pe=e[16](e[1])),d(ge,"stroke-width","2"),d(Q,"class","country2-group country-group svelte-o11v01"),d(R,"id","line-chart-tooltip"),d(R,"class","tooltip"),d(n,"width",e[2]),d(n,"height",e[3]),d(t,"id","line-chart"),d(t,"class","viz-section"),wn(()=>e[46].call(t))},m(k,x){q(k,t,x),O(t,n),O(n,r),O(r,i),O(n,l),e[40](l),C&&C.m(n,null),O(n,o),e[41](o),O(n,u),e[42](u),O(n,f),e[43](f),O(n,c),O(c,_),O(c,b),O(b,p),O(c,g),O(c,w),O(w,m),O(n,E),O(E,U),O(E,P),O(P,V),O(E,Y),O(E,N),O(N,M),O(n,D),X&&X.m(D,null),O(D,H);for(let W=0;W<I.length;W+=1)I[W].m(D,null);O(n,Z),O(Z,re),e[44](re);for(let W=0;W<F.length;W+=1)F[W].m(Z,null);O(n,Q),O(Q,ge),e[45](ge);for(let W=0;W<_e.length;W+=1)_e[W].m(Q,null);O(n,ce),O(n,R),te=rr(t,e[46].bind(t))},p(k,x){x[0]&4&&a!==(a=k[2]/2)&&d(r,"x",a),k[17]?C&&(C.d(1),C=null):C?C.p(k,x):(C=Kl(k),C.c(),C.m(n,o)),x[0]&8&&s!==(s=`translate(${0},${k[3]-at})`)&&d(o,"transform",s),x[0]&4&&h!==(h=`translate(${k[2]-Rt},${0})`)&&d(f,"transform",h),x[0]&65537&&v!==(v=k[16](k[0]))&&d(_,"fill",v),x[0]&65538&&S!==(S=k[16](k[1]))&&d(g,"fill",S),x[0]&4&&G!==(G=`translate(${k[2]-2*Rt+5},6)`)&&d(E,"transform",G),k[12]>0&&k[11]<0?X?X.p(k,x):(X=Wl(k),X.c(),X.m(D,H)):X&&(X.d(1),X=null),x[0]&65847296&&(ae=k[15],I=Mt(I,x,T,1,k,ae,L,D,Jt,Zl,null,ql)),x[0]&65537&&J!==(J=k[16](k[0]))&&d(re,"stroke",J),x[0]&10346497&&(z=k[15],F=Mt(F,x,fe,1,k,z,K,Z,Jt,Jl,null,Xl)),x[0]&65538&&pe!==(pe=k[16](k[1]))&&d(ge,"stroke",pe),x[0]&10346498&&(Ee=k[15],_e=Mt(_e,x,ne,1,k,Ee,Me,Q,Jt,Ql,null,xl)),x[0]&4&&d(n,"width",k[2]),x[0]&8&&d(n,"height",k[3])},i:Te,o:Te,d(k){k&&A(t),e[40](null),C&&C.d(),e[41](null),e[42](null),e[43](null),X&&X.d();for(let x=0;x<I.length;x+=1)I[x].d();e[44](null);for(let x=0;x<F.length;x+=1)F[x].d();e[45](null);for(let x=0;x<_e.length;x+=1)_e[x].d();te()}}}const at=35,Mr=15,pi=50,Rt=50,mn=16,xt=10,Dn=180,kt=68,H0=22,bt=20,Tr=35,Xt=37,qt=22,qa="#4daf4a",Ka="#e41a1c";function et(e,t,n){return e+n<350?e+t:e+t-kt}const V0=()=>{},B0=()=>{},P0=()=>{};function G0(e,t,n){let r,i,a,l,o,s,u,f,h;Tt(e,Ze,k=>n(30,f=k)),Tt(e,Zt,k=>n(18,h=k));let{data:c}=t,{bilateralData:_,locationData:v,productData:b,country1_id:p,country2_id:g,countryColorScale:S}=c,w=800,m=400;const E=k=>Vt("$.2s")(k).replace(/G/,"B");let U,P,V,Y,N,M,G=!1,D;function H(k){return()=>Zt.set([k])}function I(k,x){return k+Dn<w?k+x:k+x-Dn}function L(k,x){return W=>{var je,rt,ze;let Ie=we("#line-chart-tooltip"),Oe=kt+D.length*H0;if(Ie.append("rect").attr("width",Dn).attr("height",Oe).attr("x",I(W.layerX,xt)).attr("y",et(W.layerY,xt,Oe)),Ie.append("text").attr("class","title").attr("x",I(W.layerX,bt)).attr("y",et(W.layerY,Tr,Oe)).style("fill",S?S(x?k.location_id:k.partner_id):"black").text(`${k.year} `+(x?"Export":"Import")),f.size>0){for(let xe=0;xe<D.length;xe++){let oe=(je=i==null?void 0:i.get(k.year))==null?void 0:je.filter(me=>me.product.name==D[xe])[0];Ie.append("text").attr("x",I(W.layerX,bt)).attr("y",et(W.layerY,Xt+(xe+1)*qt,Oe)).text(`${D[xe]}: ${E(x?(rt=oe==null?void 0:oe.export_value)!=null?rt:0:(ze=oe==null?void 0:oe.import_value)!=null?ze:0)}`)}Ie.append("text").attr("x",I(W.layerX,bt)).attr("y",et(W.layerY,Xt+(D.length+1)*qt,Oe)).style("font-weight","bold").text(`Selected Total:  ${E(x?k.export_value:k.import_value)}`)}else Ie.append("text").attr("x",I(W.layerX,bt)).attr("y",et(W.layerY,Xt+qt,Oe)).text((f.size==0?"Total: ":"Selected Total: ")+`${E(x?k.export_value:k.import_value)}`),Ie.append("text").attr("x",I(W.layerX,bt)).attr("y",et(W.layerY,Xt+2*qt,Oe)).text("Sectors: All")}}function Z(k){return x=>{let W=we("#line-chart-tooltip"),Ie=k.export_value-k.import_value;W.append("rect").attr("id","tooltip-rect").attr("width",Dn).attr("height",kt).attr("x",I(x.layerX,xt)).attr("y",et(x.layerY,xt,kt)),W.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",I(x.layerX,bt)).attr("y",et(x.layerY,Tr,kt)).style("fill",Ie<0?Ka:qa).text(`${k.year} `+(Ie<0?"Deficit":"Surplus")),W.append("text").attr("id","tooltip-text2").attr("x",I(x.layerX,bt)).attr("y",et(x.layerY,Xt+qt,kt)).text((f.size>0?"Selected ":"")+`Total: ${E(Math.abs(k.export_value-k.import_value))}`)}}function re(){return k=>{we("#tooltip-rect").attr("x",I(k.layerX,xt)).attr("y",et(k.layerY,xt,kt)),we("#tooltip-text1").attr("x",I(k.layerX,bt)).attr("y",et(k.layerY,Tr,kt)),we("#tooltip-text2").attr("x",I(k.layerX,bt)).attr("y",et(k.layerY,Xt+qt,kt))}}function J(){return k=>{we("#line-chart-tooltip").selectAll("rect").remove(),we("#line-chart-tooltip").selectAll("text").remove()}}function F(k){return k.export_value<k.import_value?o<0?at+Mr:u(0):(s>0,u(k.export_value-k.import_value))}function K(k){return k.export_value<k.import_value?o<0?u(k.export_value-k.import_value)-u(o):u(k.export_value-k.import_value)-u(0):s>0?m-at-u(k.export_value-k.import_value):u(0)-u(k.export_value-k.import_value)}function Q(k){it.call(this,e,k)}function ge(k){it.call(this,e,k)}function pe(k){it.call(this,e,k)}function _e(k){it.call(this,e,k)}function Me(k){it.call(this,e,k)}function ce(k){it.call(this,e,k)}function R(k){it.call(this,e,k)}function te(k){it.call(this,e,k)}function C(k){it.call(this,e,k)}function X(k){Ye[k?"unshift":"push"](()=>{Y=k,n(7,Y)})}function ae(k){Ye[k?"unshift":"push"](()=>{U=k,n(4,U)})}function T(k){Ye[k?"unshift":"push"](()=>{P=k,n(5,P)})}function z(k){Ye[k?"unshift":"push"](()=>{V=k,n(6,V)})}function fe(k){Ye[k?"unshift":"push"](()=>{N=k,n(8,N)})}function Ee(k){Ye[k?"unshift":"push"](()=>{M=k,n(9,M)})}function ne(){w=this.clientWidth,m=this.clientHeight,n(2,w),n(3,m)}return e.$$set=k=>{"data"in k&&n(26,c=k.data)},e.$$.update=()=>{var k,x,W,Ie,Oe,je,rt,ze,xe;if(e.$$.dirty[0]&67108864&&n(27,{bilateralData:_,locationData:v,productData:b,country1_id:p,country2_id:g,countryColorScale:S}=c,_,(n(28,v),n(26,c)),(n(29,b),n(26,c)),(n(0,p),n(26,c)),(n(1,g),n(26,c)),(n(16,S),n(26,c))),e.$$.dirty[0]&2013265923&&n(15,r=Array.from((W=(x=(k=_==null?void 0:_.get(p))==null?void 0:k.get(g))==null?void 0:x.entries())!=null?W:new Array).map(oe=>{let me=oe[0],De=oe[1];return De=f.size==0?De:De.filter(Be=>f.has(Be.product_id)),De.reduce((Be,Fe)=>(Be.export_value+=Fe.export_value,Be.import_value+=Fe.import_value,Be),new St(v,b,{location_id:p,partner_id:g,product_id:0,year:me,export_value:0,import_value:0}))}).sort((oe,me)=>oe.year-me.year)),e.$$.dirty[0]&32772&&n(14,a=_n().domain(ua(r,oe=>oe.year)).range([pi+mn/2,w-Rt-mn/2])),e.$$.dirty[0]&16512){let oe=Rc().on("start brush end",me=>{if((me==null?void 0:me.selection)===null||(me==null?void 0:me.selection[1])-(me==null?void 0:me.selection[0])<5)Zt.set([2020]),n(17,G=!1);else{n(17,G=!0);let De=me.selection;const Be=De[0],Fe=De[1];let nn=Math.ceil(a.invert(Be)),Se=Math.floor(a.invert(Fe)),pt=[];for(let Nt=nn;Nt<=Se;Nt++)pt.push(Nt);Zt.set(pt)}});we(Y).call(oe)}if(e.$$.dirty[0]&134217731&&(i=(Ie=_==null?void 0:_.get(p))==null?void 0:Ie.get(g)),e.$$.dirty[0]&32776&&n(13,l=_n().domain([0,(Oe=dn(r,oe=>Math.max(oe.export_value,oe.import_value)))!=null?Oe:0]).range([m-at,at+Mr]).nice()),e.$$.dirty[0]&32768&&n(12,o=(je=dn(r,oe=>oe.export_value-oe.import_value))!=null?je:0),e.$$.dirty[0]&32768&&n(11,s=(rt=Si(r,oe=>oe.export_value-oe.import_value))!=null?rt:0),e.$$.dirty[0]&6144&&console.log(o,s),e.$$.dirty[0]&32776&&n(10,u=_n().domain([(ze=Si(r,oe=>oe.export_value-oe.import_value))!=null?ze:0,(xe=dn(r,oe=>oe.export_value-oe.import_value))!=null?xe:0]).range([m-at,at+Mr]).nice()),e.$$.dirty[0]&25712){let oe=ha(a).tickFormat(Vt("d"));we(U).transition().call(oe);let me=ts(l).tickFormat(Be=>E(Be));we(P).transition().call(me);let De=es(u).tickFormat(Be=>E(Be));we(V).transition().call(De)}if(e.$$.dirty[0]&57600){let oe=Zr();r.length>0&&(r.sort(me=>me.year),oe.moveTo(a(r[0].year),l(r[0].export_value))),r.forEach(me=>{oe.lineTo(a(me.year),l(me.export_value))}),we(N).transition().attr("d",oe.toString())}if(e.$$.dirty[0]&57856){let oe=Zr();r.length>0&&oe.moveTo(a(r[0].year),l(r[0].import_value)),r.forEach(me=>{oe.lineTo(a(me.year),l(me.import_value))}),we(M).transition().attr("d",oe.toString())}e.$$.dirty[0]&1610612736&&(D=f.size==0?["All"]:Array.from(f.values()).map(oe=>{var me,De;return(De=(me=b==null?void 0:b.get(oe))==null?void 0:me.name)!=null?De:"something"}).sort())},[p,g,w,m,U,P,V,Y,N,M,u,s,o,l,a,r,S,G,h,H,L,Z,re,J,F,K,c,_,v,b,f,Q,ge,pe,_e,Me,ce,R,te,C,X,ae,T,z,fe,Ee,ne]}class U0 extends st{constructor(t){super(),ut(this,t,G0,F0,ft,{data:26},null,[-1,-1])}}const{Map:z0}=Oo;function jl(e,t,n){const r=e.slice();return r[23]=t[n],r}function $l(e){let t,n,r,i,a,l,o,s,u;function f(){return e[19](e[23])}let h=e[23].x1-e[23].x0>40&&e[23].y1-e[23].y0>10&&ea(e),c=e[23].x1-e[23].x0>40&&e[23].y1-e[23].y0>30&&ta(e);return{c(){t=$("rect"),h&&h.c(),l=he(),c&&c.c(),o=he(),this.h()},l(_){t=ee(_,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),B(t).forEach(A),h&&h.l(_),l=he(),c&&c.l(_),o=he(),this.h()},h(){var _,v,b,p;d(t,"class","leaf svelte-sixlpg"),d(t,"transform",n=`translate(${e[23].x0},${e[23].y0})`),d(t,"width",r=e[23].x1-e[23].x0),d(t,"height",i=e[23].y1-e[23].y0),d(t,"fill",a=e[6]?e[6]((p=(b=(v=(_=e[23].data)==null?void 0:_.product)==null?void 0:v.parent)==null?void 0:b.name)!=null?p:""):"white")},m(_,v){q(_,t,v),h&&h.m(_,v),q(_,l,v),c&&c.m(_,v),q(_,o,v),s||(u=[j(t,"keydown",x0),j(t,"click",f)],s=!0)},p(_,v){var b,p,g,S;e=_,v&512&&n!==(n=`translate(${e[23].x0},${e[23].y0})`)&&d(t,"transform",n),v&512&&r!==(r=e[23].x1-e[23].x0)&&d(t,"width",r),v&512&&i!==(i=e[23].y1-e[23].y0)&&d(t,"height",i),v&576&&a!==(a=e[6]?e[6]((S=(g=(p=(b=e[23].data)==null?void 0:b.product)==null?void 0:p.parent)==null?void 0:g.name)!=null?S:""):"white")&&d(t,"fill",a),e[23].x1-e[23].x0>40&&e[23].y1-e[23].y0>10?h?h.p(e,v):(h=ea(e),h.c(),h.m(l.parentNode,l)):h&&(h.d(1),h=null),e[23].x1-e[23].x0>40&&e[23].y1-e[23].y0>30?c?c.p(e,v):(c=ta(e),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},d(_){_&&A(t),h&&h.d(_),_&&A(l),c&&c.d(_),_&&A(o),s=!1,ct(u)}}}function ea(e){var l,o,s;let t,n=((s=(o=(l=e[23].data)==null?void 0:l.product.name)==null?void 0:o.substring(0,40))!=null?s:"")+"",r,i,a;return{c(){t=$("text"),r=ye(n),this.h()},l(u){t=ee(u,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var f=B(t);r=ve(f,n),f.forEach(A),this.h()},h(){d(t,"class","label svelte-sixlpg"),d(t,"transform",i=`translate(${e[23].x0+3},${e[23].y0+3})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[23].x1-e[23].x0)/15,8))},m(u,f){q(u,t,f),O(t,r)},p(u,f){var h,c,_;f&512&&n!==(n=((_=(c=(h=u[23].data)==null?void 0:h.product.name)==null?void 0:c.substring(0,40))!=null?_:"")+"")&&qe(r,n),f&512&&i!==(i=`translate(${u[23].x0+3},${u[23].y0+3})`)&&d(t,"transform",i),f&512&&a!==(a=Math.max((u[23].x1-u[23].x0)/15,8))&&d(t,"font-size",a)},d(u){u&&A(t)}}}function ta(e){let t,n=e[10](e[3]?e[23].data.export_value:e[23].data.import_value)+"",r,i,a;return{c(){t=$("text"),r=ye(n),this.h()},l(l){t=ee(l,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var o=B(t);r=ve(o,n),o.forEach(A),this.h()},h(){d(t,"class","label-num svelte-sixlpg"),d(t,"transform",i=`translate(${e[23].x0+5},${e[23].y0+1+Math.max((e[23].x1-e[23].x0)/10,8)})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[23].x1-e[23].x0)/15,8)-1),d(t,"font-weight","300")},m(l,o){q(l,t,o),O(t,r)},p(l,o){o&520&&n!==(n=l[10](l[3]?l[23].data.export_value:l[23].data.import_value)+"")&&qe(r,n),o&512&&i!==(i=`translate(${l[23].x0+5},${l[23].y0+1+Math.max((l[23].x1-l[23].x0)/10,8)})`)&&d(t,"transform",i),o&512&&a!==(a=Math.max((l[23].x1-l[23].x0)/15,8)-1)&&d(t,"font-size",a)},d(l){l&&A(t)}}}function na(e,t){let n,r,i=t[5].length>0&&t[23].x1!=NaN&&t[23].x0!=NaN&&t[23].y0!=NaN&&t[23].y1!=NaN&&$l(t);return{key:e,first:null,c(){n=he(),i&&i.c(),r=he(),this.h()},l(a){n=he(),i&&i.l(a),r=he(),this.h()},h(){this.first=n},m(a,l){q(a,n,l),i&&i.m(a,l),q(a,r,l)},p(a,l){t=a,t[5].length>0&&t[23].x1!=NaN&&t[23].x0!=NaN&&t[23].y0!=NaN&&t[23].y1!=NaN?i?i.p(t,l):(i=$l(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&A(n),i&&i.d(a),a&&A(r)}}}function ra(e){let t,n,r,i=e[7]?"Loading...":"No Data",a,l,o;return{c(){t=$("rect"),r=$("text"),a=ye(i),this.h()},l(s){t=ee(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),B(t).forEach(A),r=ee(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=B(r);a=ve(u,i),u.forEach(A),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[0]),d(t,"height",e[1]),d(t,"fill",n=e[7]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),d(r,"x",l=e[0]/2),d(r,"y",o=e[1]/2),d(r,"alignment-baseline","central"),d(r,"text-anchor","middle")},m(s,u){q(s,t,u),q(s,r,u),O(r,a)},p(s,u){u&1&&d(t,"width",s[0]),u&2&&d(t,"height",s[1]),u&128&&n!==(n=s[7]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&d(t,"fill",n),u&128&&i!==(i=s[7]?"Loading...":"No Data")&&qe(a,i),u&1&&l!==(l=s[0]/2)&&d(r,"x",l),u&2&&o!==(o=s[1]/2)&&d(r,"y",o)},d(s){s&&A(t),s&&A(r)}}}function Y0(e){var h,c;let t,n,r,i=[],a=new z0,l,o,s=e[9];const u=_=>_[23].data.product_id;for(let _=0;_<s.length;_+=1){let v=jl(e,s,_),b=u(v);a.set(b,i[_]=na(b,v))}let f=((c=(h=e[2])==null?void 0:h.length)!=null?c:0)===0&&ra(e);return{c(){t=se("div"),n=$("svg"),r=$("g");for(let _=0;_<i.length;_+=1)i[_].c();f&&f.c(),l=$("g"),this.h()},l(_){t=ue(_,"DIV",{class:!0});var v=B(t);n=ee(v,"svg",{class:!0});var b=B(n);r=ee(b,"g",{class:!0});var p=B(r);for(let g=0;g<i.length;g+=1)i[g].l(p);p.forEach(A),f&&f.l(b),l=ee(b,"g",{id:!0,class:!0}),B(l).forEach(A),b.forEach(A),v.forEach(A),this.h()},h(){d(r,"class","treemap svelte-sixlpg"),d(l,"id","treemap-tooltip"),d(l,"class","tooltip"),d(n,"class","svelte-sixlpg"),d(t,"class","viz-section-full"),wn(()=>e[21].call(t))},m(_,v){q(_,t,v),O(t,n),O(n,r);for(let b=0;b<i.length;b+=1)i[b].m(r,null);e[20](r),f&&f.m(n,null),O(n,l),o=rr(t,e[21].bind(t))},p(_,[v]){var b,p;v&1656&&(s=_[9],i=Mt(i,v,u,1,_,s,a,r,Jt,na,null,jl)),((p=(b=_[2])==null?void 0:b.length)!=null?p:0)===0?f?f.p(_,v):(f=ra(_),f.c(),f.m(n,l)):f&&(f.d(1),f=null)},i:Te,o:Te,d(_){_&&A(t);for(let v=0;v<i.length;v+=1)i[v].d();e[20](null),f&&f.d(),o()}}}const x0=()=>{};function X0(e,t,n){let r,i,a,l,o,s;Tt(e,Un,N=>n(3,l=N)),Tt(e,Ze,N=>n(4,o=N)),Tt(e,Zt,N=>n(5,s=N));const u=N=>Vt("$.2s")(N).replace(/G/,"B");let{data:f}=t,{country1:h,country2:c,valueField:_,productColorScale:v,drilldownBilateral:b,loadingDrilldown:p,locationData:g,productData:S}=f,w=0,m=0,E,U=new Array;const P=N=>{var M,G,D,H,I,L,Z;((G=(M=N.data)==null?void 0:M.product)==null?void 0:G.parent)&&o.has((I=(H=(D=N.data)==null?void 0:D.product)==null?void 0:H.parent)==null?void 0:I.id)?Ze.update(re=>{var J,F,K,Q;return re.delete((Q=(K=(F=(J=N.data)==null?void 0:J.product)==null?void 0:F.parent)==null?void 0:K.id)!=null?Q:-1),console.log(re),re}):((Z=(L=N.data)==null?void 0:L.product)==null?void 0:Z.parent)!=null&&Ze.update(re=>{var J,F,K,Q;return re.add((Q=(K=(F=(J=N.data)==null?void 0:J.product)==null?void 0:F.parent)==null?void 0:K.id)!=null?Q:-1),console.log(re),re})};function V(N){Ye[N?"unshift":"push"](()=>{E=N,n(8,E)})}function Y(){w=this.clientWidth,m=this.clientHeight,n(0,w),n(1,m)}return e.$$set=N=>{"data"in N&&n(11,f=N.data)},e.$$.update=()=>{var N;if(e.$$.dirty&2048&&n(14,{drilldownBilateral:b,valueField:_,productColorScale:v,country1:h,country2:c,loadingDrilldown:p,locationData:g,productData:S}=f,b,(n(6,v),n(11,f)),(n(12,h),n(11,f)),(n(13,c),n(11,f)),(n(7,p),n(11,f)),(n(15,g),n(11,f)),(n(16,S),n(11,f))),e.$$.dirty&24576&&n(18,r=b==null?void 0:b.get((N=c==null?void 0:c.id)!=null?N:0)),e.$$.dirty&262176&&n(17,i=s.map(M=>{var G;return(G=r==null?void 0:r.get(M))!=null?G:new Array}).flat()),e.$$.dirty&241680&&n(2,a=Array.from(fa(o.size==0?i:i.filter(M=>o.has(M.product.parent_id)),M=>M.reduce((G,D)=>(G.export_value+=D.export_value,G.import_value+=D.import_value,G),new St(g,S,{location_id:h,partner_id:c,product_id:M[0].product_id,year:0,export_value:0,import_value:0})),M=>M.product_id).values())),e.$$.dirty&12319&&a&&a.length>0){let M=[];if(o.size==1){let D=o.entries().next().value[1];console.log(D);let H=new St(new Map,new Map,{location_id:h,partner_id:c,product_id:D,year:0,export_value:0,import_value:0});H.product=new zn({product_id:D,name:"Sector",level:-1,parent_id:-1}),H.product.parent_id=null,M.push(H)}else{let D=new St(new Map,new Map,{location_id:h,partner_id:c,product_id:-1,year:0,export_value:0,import_value:0});D.product=new zn({product_id:-1,name:"All",level:-1,parent_id:-1}),D.product.parent_id=null,M.push(D);let H=Lr(a,I=>{var L,Z;return(Z=(L=I.product)==null?void 0:L.parent_id)!=null?Z:-1});if(H.size>1)for(let[I,L]of H){let Z=new St(new Map,new Map,{location_id:h,partner_id:c,product_id:I,year:0,export_value:0,import_value:0});Z.product=new zn({product_id:I,name:"Something",level:0,parent_id:-1}),M.push(Z)}}M=M.concat(a);let G=Sh().id(D=>{var H;return(H=D.product)==null?void 0:H.id}).parentId(D=>{var H;return(H=D.product)==null?void 0:H.parent_id})(M);G.sum(D=>Math.max(0,D[l?"export_value":"import_value"])),Dh().tile(Rh).size([w,m]).padding(2)(G),n(9,U=G.leaves())}},[w,m,a,l,o,s,v,p,E,U,u,f,h,c,b,g,S,i,r,P,V,Y]}class q0 extends st{constructor(t){super(),ut(this,t,X0,Y0,ft,{data:11})}}const K0=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),Rn=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=K0.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function W0(e){let t,n,r,i,a,l;return{c(){t=se("div"),n=se("h3"),r=ye("Loading data..."),i=ke(),a=$("svg"),l=$("circle"),this.h()},l(o){t=ue(o,"DIV",{class:!0});var s=B(t);n=ue(s,"H3",{});var u=B(n);r=ve(u,"Loading data..."),u.forEach(A),i=Ae(s),a=ee(s,"svg",{class:!0,viewBox:!0});var f=B(a);l=ee(f,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),B(l).forEach(A),f.forEach(A),s.forEach(A),this.h()},h(){d(l,"class","path svelte-14xfwmf"),d(l,"cx","25"),d(l,"cy","25"),d(l,"r","20"),d(l,"fill","none"),d(l,"stroke-width","5"),d(a,"class","spinner svelte-14xfwmf"),d(a,"viewBox","0 0 50 50"),d(t,"class","loading svelte-14xfwmf")},m(o,s){q(o,t,s),O(t,n),O(n,r),O(t,i),O(t,a),O(a,l)},p:Te,i:Te,o:Te,d(o){o&&A(t)}}}function Z0(e){var L,Z,re,J;let t,n,r,i,a,l,o,s,u,f,h,c,_,v,b,p,g,S,w,m,E,U,P,V,Y,N,M,G,D,H,I;return u=new Dl({props:{optionIdentifier:ia,labelIdentifier:la,items:Array.from(e[0].values()),value:e[2]}}),u.$on("select",e[9]),b=new Dl({props:{optionIdentifier:ia,labelIdentifier:la,items:Array.from(e[0].values()),value:e[8]}}),b.$on("select",e[10]),Y=new U0({props:{data:{bilateralData:e[5],country1_id:(Z=(L=e[2])==null?void 0:L.id)!=null?Z:0,country2_id:(J=(re=e[8])==null?void 0:re.id)!=null?J:0,productData:e[1],locationData:e[0],countryColorScale:e[3]}}}),M=new O0({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[5],loadingDrilldown:e[7],productColorScale:e[4],country1:e[2],country2:e[8],countryColorScale:e[3]}}}),H=new q0({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7],valueField:"export_value"}}}),{c(){t=se("div"),n=se("img"),i=ke(),a=se("div"),l=se("span"),o=ye("Country"),s=ke(),Ne(u.$$.fragment),f=ke(),h=se("div"),c=se("span"),_=ye("Partner"),v=ke(),Ne(b.$$.fragment),p=ke(),g=se("img"),w=ke(),m=se("div"),E=ke(),U=se("div"),P=se("div"),V=se("div"),Ne(Y.$$.fragment),N=ke(),Ne(M.$$.fragment),G=ke(),D=se("div"),Ne(H.$$.fragment),this.h()},l(F){t=ue(F,"DIV",{class:!0});var K=B(t);n=ue(K,"IMG",{class:!0,src:!0}),i=Ae(K),a=ue(K,"DIV",{class:!0});var Q=B(a);l=ue(Q,"SPAN",{class:!0});var ge=B(l);o=ve(ge,"Country"),ge.forEach(A),s=Ae(Q),Je(u.$$.fragment,Q),Q.forEach(A),f=Ae(K),h=ue(K,"DIV",{class:!0});var pe=B(h);c=ue(pe,"SPAN",{class:!0});var _e=B(c);_=ve(_e,"Partner"),_e.forEach(A),v=Ae(pe),Je(b.$$.fragment,pe),pe.forEach(A),p=Ae(K),g=ue(K,"IMG",{class:!0,src:!0}),K.forEach(A),w=Ae(F),m=ue(F,"DIV",{class:!0});var Me=B(m);Me.forEach(A),E=Ae(F),U=ue(F,"DIV",{id:!0,class:!0});var ce=B(U);P=ue(ce,"DIV",{id:!0,class:!0});var R=B(P);V=ue(R,"DIV",{class:!0});var te=B(V);Je(Y.$$.fragment,te),N=Ae(te),Je(M.$$.fragment,te),te.forEach(A),G=Ae(R),D=ue(R,"DIV",{class:!0});var C=B(D);Je(H.$$.fragment,C),C.forEach(A),R.forEach(A),ce.forEach(A),this.h()},h(){var F,K,Q,ge;d(n,"class","country-icon svelte-14xfwmf"),En(n.src,r=Rn((K=(F=e[2])==null?void 0:F.code)!=null?K:"ATA"))||d(n,"src",r),d(l,"class","svelte-14xfwmf"),d(a,"class","dropdown svelte-14xfwmf"),d(c,"class","svelte-14xfwmf"),d(h,"class","dropdown svelte-14xfwmf"),d(g,"class","country-icon svelte-14xfwmf"),En(g.src,S=Rn((ge=(Q=e[8])==null?void 0:Q.code)!=null?ge:"ATA"))||d(g,"src",S),d(t,"class","selectors svelte-14xfwmf"),d(m,"class","svelte-14xfwmf"),d(V,"class","viz-row svelte-14xfwmf"),d(D,"class","viz-row svelte-14xfwmf"),d(P,"id","content"),d(P,"class","svelte-14xfwmf"),d(U,"id","container"),d(U,"class","svelte-14xfwmf")},m(F,K){q(F,t,K),O(t,n),O(t,i),O(t,a),O(a,l),O(l,o),O(a,s),Ce(u,a,null),O(t,f),O(t,h),O(h,c),O(c,_),O(h,v),Ce(b,h,null),O(t,p),O(t,g),q(F,w,K),q(F,m,K),q(F,E,K),q(F,U,K),O(U,P),O(P,V),Ce(Y,V,null),O(V,N),Ce(M,V,null),O(P,G),O(P,D),Ce(H,D,null),I=!0},p(F,K){var ce,R,te,C,X,ae,T,z;(!I||K&4&&!En(n.src,r=Rn((R=(ce=F[2])==null?void 0:ce.code)!=null?R:"ATA")))&&d(n,"src",r);const Q={};K&1&&(Q.items=Array.from(F[0].values())),K&4&&(Q.value=F[2]),u.$set(Q);const ge={};K&1&&(ge.items=Array.from(F[0].values())),K&256&&(ge.value=F[8]),b.$set(ge),(!I||K&256&&!En(g.src,S=Rn((C=(te=F[8])==null?void 0:te.code)!=null?C:"ATA")))&&d(g,"src",S);const pe={};K&303&&(pe.data={bilateralData:F[5],country1_id:(ae=(X=F[2])==null?void 0:X.id)!=null?ae:0,country2_id:(z=(T=F[8])==null?void 0:T.id)!=null?z:0,productData:F[1],locationData:F[0],countryColorScale:F[3]}),Y.$set(pe);const _e={};K&447&&(_e.data={productData:F[1],locationData:F[0],bilateralData:F[5],loadingDrilldown:F[7],productColorScale:F[4],country1:F[2],country2:F[8],countryColorScale:F[3]}),M.$set(_e);const Me={};K&471&&(Me.data={locationData:F[0],productData:F[1],productColorScale:F[4],country1:F[2],country2:F[8],drilldownBilateral:F[6],loadingDrilldown:F[7],valueField:"export_value"}),H.$set(Me)},i(F){I||(le(u.$$.fragment,F),le(b.$$.fragment,F),le(Y.$$.fragment,F),le(M.$$.fragment,F),le(H.$$.fragment,F),I=!0)},o(F){de(u.$$.fragment,F),de(b.$$.fragment,F),de(Y.$$.fragment,F),de(M.$$.fragment,F),de(H.$$.fragment,F),I=!1},d(F){F&&A(t),Le(u),Le(b),F&&A(w),F&&A(m),F&&A(E),F&&A(U),Le(Y),Le(M),Le(H)}}}function J0(e){let t,n,r,i,a,l,o,s,u,f,h,c,_;const v=[Z0,W0],b=[];function p(g,S){return g[0]&&g[5]&&g[1]&&g[3]?0:1}return f=p(e),h=b[f]=v[f](e),{c(){t=se("link"),n=ke(),r=se("div"),i=se("h1"),a=ye("Commerce Among Nations"),l=ke(),o=se("h2"),s=ye("A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),u=ke(),h.c(),c=he(),this.h()},l(g){const S=Fo("svelte-1ivyzxx",document.head);t=ue(S,"LINK",{rel:!0,href:!0}),S.forEach(A),n=Ae(g),r=ue(g,"DIV",{class:!0});var w=B(r);i=ue(w,"H1",{class:!0});var m=B(i);a=ve(m,"Commerce Among Nations"),m.forEach(A),l=Ae(w),o=ue(w,"H2",{class:!0});var E=B(o);s=ve(E,"A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),E.forEach(A),w.forEach(A),u=Ae(g),h.l(g),c=he(),this.h()},h(){d(t,"rel","icon"),d(t,"href",`${un}/favicon.png`),d(i,"class","svelte-14xfwmf"),d(o,"class","svelte-14xfwmf"),d(r,"class","heading svelte-14xfwmf")},m(g,S){O(document.head,t),q(g,n,S),q(g,r,S),O(r,i),O(i,a),O(r,l),O(r,o),O(o,s),q(g,u,S),b[f].m(g,S),q(g,c,S),_=!0},p(g,[S]){let w=f;f=p(g),f===w?b[f].p(g,S):(He(),de(b[w],1,1,()=>{b[w]=null}),Ve(),h=b[f],h?h.p(g,S):(h=b[f]=v[f](g),h.c()),le(h,1),h.m(c.parentNode,c))},i(g){_||(le(h),_=!0)},o(g){de(h),_=!1},d(g){A(t),g&&A(n),g&&A(r),g&&A(u),b[f].d(g),g&&A(c)}}}const ia="id",la="name",Q0=231,j0=43;function $0(e,t,n){let r,i;const a=v=>{let b=v.detail;n(2,r=u.get(b.id))},l=v=>{let b=v.detail;n(8,i=u.get(b.id))};let o,s,u=new Map,f=new Map,h,c,_=!1;return nr(async()=>{Promise.all([Tn(`${un}/data/location.csv`),Tn(`${un}/data/hs_product.csv`),Tn(`${un}/data/hs_2010_to_2020.csv`)]).then(([v,b,p])=>{var S;n(0,u=Ii(v.map(w=>new A0(w)).filter(w=>w.level=="country"),w=>w.id)),n(1,f=Ii(b.map(w=>new zn(w)),w=>w.id));for(let[w,m]of f)m.parent=(S=f.get(m.parent_id))!=null?S:null,f.set(w,m);let g=p.map(w=>new St(u,f,w));n(5,h=Lr(g,w=>w.location_id,w=>w.partner_id,w=>w.year)),ua(p,w=>+w.export_value),n(3,o=Qr(u.keys(),sl)),n(4,s=Qr(Array.from(f).map(([w,m])=>m.level).filter(w=>w=="section"),sl))})}),e.$$.update=()=>{var v,b,p,g;e.$$.dirty&1&&n(2,r=(v=u==null?void 0:u.get(Q0))!=null?v:null),e.$$.dirty&1&&n(8,i=(b=u==null?void 0:u.get(j0))!=null?b:null),e.$$.dirty&7&&(n(6,c=null),n(7,_=!0),Tn(`${un}/data/${(p=r==null?void 0:r.code)!=null?p:"USA"}/${(g=r==null?void 0:r.code)!=null?g:"USA"}_hs2_2010_to_2020.csv`).then(S=>{n(6,c=Lr(S.map(w=>new St(u,f,w)),w=>w.partner_id,w=>w.year)),n(7,_=!1)}))},[u,f,r,o,s,h,c,_,i,a,l]}class r1 extends st{constructor(t){super(),ut(this,t,$0,J0,ft,{})}}export{r1 as default};
