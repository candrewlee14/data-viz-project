var Bs=Object.defineProperty;var qs=(e,t,n)=>t in e?Bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var we=(e,t,n)=>(qs(e,typeof t!="symbol"?t+"":t,n),n);import{S as qe,i as xe,s as Ge,k as Z,l as J,m as R,h as S,n as d,b as B,B as he,I as Re,J as ye,g as ke,t as Q,d as Ie,f as U,K as vn,L as Ii,o as yn,M as Il,N as De,e as ne,O as Si,v as Me,w as ge,x as Le,y as pe,z as ve,q as fe,r as ce,G as H,u as We,A as Zt,a as le,c as se,P as W,Q as K,p as mt,R as Zn,T as Bt,U as wn,V as Ft,W as xs,C as Gs,D as Xs,E as js,F as Us,X as Ei,Y as Wi,Z as Ki,_ as Ai,$ as Sl,a0 as Ys,a1 as Zi,a2 as Ws,a3 as Ks,a4 as Zs,H as Mi,a5 as El,a6 as nn,a7 as Js,a8 as Qs,a9 as $s}from"../../chunks/index-dec2a072.js";import{w as ea,b as Xt}from"../../chunks/paths-f8804f37.js";function Jt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ta(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Al(e){let t,n,i;e.length!==2?(t=Jt,n=(o,a)=>Jt(e(o),a),i=(o,a)=>e(o)-a):(t=e===Jt||e===ta?e:na,n=e,i=e);function r(o,a,u=0,f=o.length){if(u<f){if(t(a,a)!==0)return f;do{const h=u+f>>>1;n(o[h],a)<0?u=h+1:f=h}while(u<f)}return u}function s(o,a,u=0,f=o.length){if(u<f){if(t(a,a)!==0)return f;do{const h=u+f>>>1;n(o[h],a)<=0?u=h+1:f=h}while(u<f)}return u}function l(o,a,u=0,f=o.length){const h=r(o,a,u,f-1);return h>u&&i(o[h-1],a)>-i(o[h],a)?h-1:h}return{left:r,center:l,right:s}}function na(){return 0}function ia(e){return e===null?NaN:+e}const ra=Al(Jt),la=ra.right;Al(ia).center;const sa=la;function Ml(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Jn extends Map{constructor(t,n=ua){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Ji(this,t))}has(t){return super.has(Ji(this,t))}set(t,n){return super.set(aa(this,t),n)}delete(t){return super.delete(oa(this,t))}}function Ji({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function aa({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function oa({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function ua(e){return e!==null&&typeof e=="object"?e.valueOf():e}function rn(e){return e}function Qn(e,...t){return Ci(e,rn,rn,t)}function Cl(e,t,...n){return Ci(e,rn,t,n)}function Qi(e,...t){return Ci(e,rn,fa,t)}function fa(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Ci(e,t,n,i){return function r(s,l){if(l>=i.length)return n(s);const o=new Jn,a=i[l++];let u=-1;for(const f of s){const h=a(f,++u,s),c=o.get(h);c?c.push(f):o.set(h,[f])}for(const[f,h]of o)o.set(f,r(h,l));return t(o)}(e,0)}var $n=Math.sqrt(50),ei=Math.sqrt(10),ti=Math.sqrt(2);function ca(e,t,n){var i,r=-1,s,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(s=e,e=t,t=s),(o=Nl(e,t,n))===0||!isFinite(o))return[];if(o>0){let a=Math.round(e/o),u=Math.round(t/o);for(a*o<e&&++a,u*o>t&&--u,l=new Array(s=u-a+1);++r<s;)l[r]=(a+r)*o}else{o=-o;let a=Math.round(e*o),u=Math.round(t*o);for(a/o<e&&++a,u/o>t&&--u,l=new Array(s=u-a+1);++r<s;)l[r]=(a+r)/o}return i&&l.reverse(),l}function Nl(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=$n?10:s>=ei?5:s>=ti?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=$n?10:s>=ei?5:s>=ti?2:1)}function ha(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=$n?r*=10:s>=ei?r*=5:s>=ti&&(r*=2),t<e?-r:r}function ni(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function da(e){return e}var Hn=1,Rn=2,ii=3,Dt=4,$i=1e-6;function _a(e){return"translate("+e+",0)"}function ma(e){return"translate(0,"+e+")"}function ga(e){return t=>+e(t)}function pa(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function va(){return!this.__axis}function Tl(e,t){var n=[],i=null,r=null,s=6,l=6,o=3,a=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Hn||e===Dt?-1:1,f=e===Dt||e===Rn?"x":"y",h=e===Hn||e===ii?_a:ma;function c(_){var y=i==null?t.ticks?t.ticks.apply(t,n):t.domain():i,m=r==null?t.tickFormat?t.tickFormat.apply(t,n):da:r,v=Math.max(s,0)+o,k=t.range(),A=+k[0]+a,w=+k[k.length-1]+a,g=(t.bandwidth?pa:ga)(t.copy(),a),b=_.selection?_.selection():_,D=b.selectAll(".domain").data([null]),P=b.selectAll(".tick").data(y,t).order(),F=P.exit(),z=P.enter().append("g").attr("class","tick"),I=P.select("line"),M=P.select("text");D=D.merge(D.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(z),I=I.merge(z.append("line").attr("stroke","currentColor").attr(f+"2",u*s)),M=M.merge(z.append("text").attr("fill","currentColor").attr(f,u*v).attr("dy",e===Hn?"0em":e===ii?"0.71em":"0.32em")),_!==b&&(D=D.transition(_),P=P.transition(_),I=I.transition(_),M=M.transition(_),F=F.transition(_).attr("opacity",$i).attr("transform",function(E){return isFinite(E=g(E))?h(E+a):this.getAttribute("transform")}),z.attr("opacity",$i).attr("transform",function(E){var C=this.parentNode.__axis;return h((C&&isFinite(C=C(E))?C:g(E))+a)})),F.remove(),D.attr("d",e===Dt||e===Rn?l?"M"+u*l+","+A+"H"+a+"V"+w+"H"+u*l:"M"+a+","+A+"V"+w:l?"M"+A+","+u*l+"V"+a+"H"+w+"V"+u*l:"M"+A+","+a+"H"+w),P.attr("opacity",1).attr("transform",function(E){return h(g(E)+a)}),I.attr(f+"2",u*s),M.attr(f,u*v).text(m),b.filter(va).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Rn?"start":e===Dt?"end":"middle"),b.each(function(){this.__axis=g})}return c.scale=function(_){return arguments.length?(t=_,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),c):n.slice()},c.tickValues=function(_){return arguments.length?(i=_==null?null:Array.from(_),c):i&&i.slice()},c.tickFormat=function(_){return arguments.length?(r=_,c):r},c.tickSize=function(_){return arguments.length?(s=l=+_,c):s},c.tickSizeInner=function(_){return arguments.length?(s=+_,c):s},c.tickSizeOuter=function(_){return arguments.length?(l=+_,c):l},c.tickPadding=function(_){return arguments.length?(o=+_,c):o},c.offset=function(_){return arguments.length?(a=+_,c):a},c}function Ll(e){return Tl(ii,e)}function ya(e){return Tl(Dt,e)}var wa={value:()=>{}};function Ni(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Qt(n)}function Qt(e){this._=e}function ba(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Qt.prototype=Ni.prototype={constructor:Qt,on:function(e,t){var n=this._,i=ba(e+"",n),r,s=-1,l=i.length;if(arguments.length<2){for(;++s<l;)if((r=(e=i[s]).type)&&(r=ka(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<l;)if(r=(e=i[s]).type)n[r]=er(n[r],e.name,t);else if(t==null)for(r in n)n[r]=er(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function ka(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function er(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=wa,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ri="http://www.w3.org/1999/xhtml";const tr={svg:"http://www.w3.org/2000/svg",xhtml:ri,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),tr.hasOwnProperty(t)?{space:tr[t],local:e}:e}function Ia(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ri&&t.documentElement.namespaceURI===ri?t.createElement(e):t.createElementNS(n,e)}}function Sa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dl(e){var t=bn(e);return(t.local?Sa:Ia)(t)}function Ea(){}function Ti(e){return e==null?Ea:function(){return this.querySelector(e)}}function Aa(e){typeof e!="function"&&(e=Ti(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,o=i[r]=new Array(l),a,u,f=0;f<l;++f)(a=s[f])&&(u=e.call(a,a.__data__,f,s))&&("__data__"in a&&(u.__data__=a.__data__),o[f]=u);return new Fe(i,this._parents)}function Ma(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ca(){return[]}function Vl(e){return e==null?Ca:function(){return this.querySelectorAll(e)}}function Na(e){return function(){return Ma(e.apply(this,arguments))}}function Ta(e){typeof e=="function"?e=Na(e):e=Vl(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var l=t[s],o=l.length,a,u=0;u<o;++u)(a=l[u])&&(i.push(e.call(a,a.__data__,u,l)),r.push(a));return new Fe(i,r)}function Ol(e){return function(){return this.matches(e)}}function Fl(e){return function(t){return t.matches(e)}}var La=Array.prototype.find;function Da(e){return function(){return La.call(this.children,e)}}function Va(){return this.firstElementChild}function Oa(e){return this.select(e==null?Va:Da(typeof e=="function"?e:Fl(e)))}var Fa=Array.prototype.filter;function Ha(){return Array.from(this.children)}function Ra(e){return function(){return Fa.call(this.children,e)}}function Pa(e){return this.selectAll(e==null?Ha:Ra(typeof e=="function"?e:Fl(e)))}function za(e){typeof e!="function"&&(e=Ol(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,o=i[r]=[],a,u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&o.push(a);return new Fe(i,this._parents)}function Hl(e){return new Array(e.length)}function Ba(){return new Fe(this._enter||this._groups.map(Hl),this._parents)}function ln(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ln.prototype={constructor:ln,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qa(e){return function(){return e}}function xa(e,t,n,i,r,s){for(var l=0,o,a=t.length,u=s.length;l<u;++l)(o=t[l])?(o.__data__=s[l],i[l]=o):n[l]=new ln(e,s[l]);for(;l<a;++l)(o=t[l])&&(r[l]=o)}function Ga(e,t,n,i,r,s,l){var o,a,u=new Map,f=t.length,h=s.length,c=new Array(f),_;for(o=0;o<f;++o)(a=t[o])&&(c[o]=_=l.call(a,a.__data__,o,t)+"",u.has(_)?r[o]=a:u.set(_,a));for(o=0;o<h;++o)_=l.call(e,s[o],o,s)+"",(a=u.get(_))?(i[o]=a,a.__data__=s[o],u.delete(_)):n[o]=new ln(e,s[o]);for(o=0;o<f;++o)(a=t[o])&&u.get(c[o])===a&&(r[o]=a)}function Xa(e){return e.__data__}function ja(e,t){if(!arguments.length)return Array.from(this,Xa);var n=t?Ga:xa,i=this._parents,r=this._groups;typeof e!="function"&&(e=qa(e));for(var s=r.length,l=new Array(s),o=new Array(s),a=new Array(s),u=0;u<s;++u){var f=i[u],h=r[u],c=h.length,_=Ua(e.call(f,f&&f.__data__,u,i)),y=_.length,m=o[u]=new Array(y),v=l[u]=new Array(y),k=a[u]=new Array(c);n(f,h,m,v,k,_,t);for(var A=0,w=0,g,b;A<y;++A)if(g=m[A]){for(A>=w&&(w=A+1);!(b=v[w])&&++w<y;);g._next=b||null}}return l=new Fe(l,i),l._enter=o,l._exit=a,l}function Ua(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ya(){return new Fe(this._exit||this._groups.map(Hl),this._parents)}function Wa(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Ka(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,l=Math.min(r,s),o=new Array(r),a=0;a<l;++a)for(var u=n[a],f=i[a],h=u.length,c=o[a]=new Array(h),_,y=0;y<h;++y)(_=u[y]||f[y])&&(c[y]=_);for(;a<r;++a)o[a]=n[a];return new Fe(o,this._parents)}function Za(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],l;--r>=0;)(l=i[r])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function Ja(e){e||(e=Qa);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var l=n[s],o=l.length,a=r[s]=new Array(o),u,f=0;f<o;++f)(u=l[f])&&(a[f]=u);a.sort(t)}return new Fe(r,this._parents).order()}function Qa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $a(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function eo(){return Array.from(this)}function to(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var l=i[r];if(l)return l}return null}function no(){let e=0;for(const t of this)++e;return e}function io(){return!this.node()}function ro(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,l=r.length,o;s<l;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function lo(e){return function(){this.removeAttribute(e)}}function so(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ao(e,t){return function(){this.setAttribute(e,t)}}function oo(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function fo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function co(e,t){var n=bn(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?so:lo:typeof t=="function"?n.local?fo:uo:n.local?oo:ao)(n,t))}function Rl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ho(e){return function(){this.style.removeProperty(e)}}function _o(e,t,n){return function(){this.style.setProperty(e,t,n)}}function mo(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function go(e,t,n){return arguments.length>1?this.each((t==null?ho:typeof t=="function"?mo:_o)(e,t,n==null?"":n)):It(this.node(),e)}function It(e,t){return e.style.getPropertyValue(t)||Rl(e).getComputedStyle(e,null).getPropertyValue(t)}function po(e){return function(){delete this[e]}}function vo(e,t){return function(){this[e]=t}}function yo(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function wo(e,t){return arguments.length>1?this.each((t==null?po:typeof t=="function"?yo:vo)(e,t)):this.node()[e]}function Pl(e){return e.trim().split(/^|\s+/)}function Li(e){return e.classList||new zl(e)}function zl(e){this._node=e,this._names=Pl(e.getAttribute("class")||"")}zl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Bl(e,t){for(var n=Li(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function ql(e,t){for(var n=Li(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function bo(e){return function(){Bl(this,e)}}function ko(e){return function(){ql(this,e)}}function Io(e,t){return function(){(t.apply(this,arguments)?Bl:ql)(this,e)}}function So(e,t){var n=Pl(e+"");if(arguments.length<2){for(var i=Li(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Io:t?bo:ko)(n,t))}function Eo(){this.textContent=""}function Ao(e){return function(){this.textContent=e}}function Mo(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Co(e){return arguments.length?this.each(e==null?Eo:(typeof e=="function"?Mo:Ao)(e)):this.node().textContent}function No(){this.innerHTML=""}function To(e){return function(){this.innerHTML=e}}function Lo(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Do(e){return arguments.length?this.each(e==null?No:(typeof e=="function"?Lo:To)(e)):this.node().innerHTML}function Vo(){this.nextSibling&&this.parentNode.appendChild(this)}function Oo(){return this.each(Vo)}function Fo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ho(){return this.each(Fo)}function Ro(e){var t=typeof e=="function"?e:Dl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Po(){return null}function zo(e,t){var n=typeof e=="function"?e:Dl(e),i=t==null?Po:typeof t=="function"?t:Ti(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Bo(){var e=this.parentNode;e&&e.removeChild(this)}function qo(){return this.each(Bo)}function xo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Go(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xo(e){return this.select(e?Go:xo)}function jo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Uo(e){return function(t){e.call(this,t,this.__data__)}}function Yo(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Wo(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function Ko(e,t,n){return function(){var i=this.__on,r,s=Uo(t);if(i){for(var l=0,o=i.length;l<o;++l)if((r=i[l]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function Zo(e,t,n){var i=Yo(e+""),r,s=i.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var a=0,u=o.length,f;a<u;++a)for(r=0,f=o[a];r<s;++r)if((l=i[r]).type===f.type&&l.name===f.name)return f.value}return}for(o=t?Ko:Wo,r=0;r<s;++r)this.each(o(i[r],t,n));return this}function xl(e,t,n){var i=Rl(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Jo(e,t){return function(){return xl(this,e,t)}}function Qo(e,t){return function(){return xl(this,e,t.apply(this,arguments))}}function $o(e,t){return this.each((typeof t=="function"?Qo:Jo)(e,t))}function*eu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,l;r<s;++r)(l=i[r])&&(yield l)}var Gl=[null];function Fe(e,t){this._groups=e,this._parents=t}function qt(){return new Fe([[document.documentElement]],Gl)}function tu(){return this}Fe.prototype=qt.prototype={constructor:Fe,select:Aa,selectAll:Ta,selectChild:Oa,selectChildren:Pa,filter:za,data:ja,enter:Ba,exit:Ya,join:Wa,merge:Ka,selection:tu,order:Za,sort:Ja,call:$a,nodes:eo,node:to,size:no,empty:io,each:ro,attr:co,style:go,property:wo,classed:So,text:Co,html:Do,raise:Oo,lower:Ho,append:Ro,insert:zo,remove:qo,clone:Xo,datum:jo,on:Zo,dispatch:$o,[Symbol.iterator]:eu};function Oe(e){return typeof e=="string"?new Fe([[document.querySelector(e)]],[document.documentElement]):new Fe([[e]],Gl)}function nu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function nr(e,t){if(e=nu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const li={capture:!0,passive:!1};function si(e){e.preventDefault(),e.stopImmediatePropagation()}function iu(e){var t=e.document.documentElement,n=Oe(e).on("dragstart.drag",si,li);"onselectstart"in t?n.on("selectstart.drag",si,li):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ru(e,t){var n=e.document.documentElement,i=Oe(e).on("dragstart.drag",null);t&&(i.on("click.drag",si,li),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Di(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Xl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function xt(){}var Ht=.7,sn=1/Ht,kt="\\s*([+-]?\\d+)\\s*",Rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lu=/^#([0-9a-f]{3,8})$/,su=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),au=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),ou=new RegExp(`^rgba\\(${kt},${kt},${kt},${Rt}\\)$`),uu=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${Rt}\\)$`),fu=new RegExp(`^hsl\\(${Rt},${Ye},${Ye}\\)$`),cu=new RegExp(`^hsla\\(${Rt},${Ye},${Ye},${Rt}\\)$`),ir={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Di(xt,ft,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rr,formatHex:rr,formatHex8:hu,formatHsl:du,formatRgb:lr,toString:lr});function rr(){return this.rgb().formatHex()}function hu(){return this.rgb().formatHex8()}function du(){return jl(this).formatHsl()}function lr(){return this.rgb().formatRgb()}function ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=lu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sr(t):n===3?new Ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=su.exec(e))?new Ve(t[1],t[2],t[3],1):(t=au.exec(e))?new Ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ou.exec(e))?jt(t[1],t[2],t[3],t[4]):(t=uu.exec(e))?jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fu.exec(e))?ur(t[1],t[2]/100,t[3]/100,1):(t=cu.exec(e))?ur(t[1],t[2]/100,t[3]/100,t[4]):ir.hasOwnProperty(e)?sr(ir[e]):e==="transparent"?new Ve(NaN,NaN,NaN,0):null}function sr(e){return new Ve(e>>16&255,e>>8&255,e&255,1)}function jt(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ve(e,t,n,i)}function _u(e){return e instanceof xt||(e=ft(e)),e?(e=e.rgb(),new Ve(e.r,e.g,e.b,e.opacity)):new Ve}function ai(e,t,n,i){return arguments.length===1?_u(e):new Ve(e,t,n,i==null?1:i)}function Ve(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Di(Ve,ai,Xl(xt,{brighter(e){return e=e==null?sn:Math.pow(sn,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ve(ot(this.r),ot(this.g),ot(this.b),an(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ar,formatHex:ar,formatHex8:mu,formatRgb:or,toString:or}));function ar(){return`#${at(this.r)}${at(this.g)}${at(this.b)}`}function mu(){return`#${at(this.r)}${at(this.g)}${at(this.b)}${at((isNaN(this.opacity)?1:this.opacity)*255)}`}function or(){const e=an(this.opacity);return`${e===1?"rgb(":"rgba("}${ot(this.r)}, ${ot(this.g)}, ${ot(this.b)}${e===1?")":`, ${e})`}`}function an(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function at(e){return e=ot(e),(e<16?"0":"")+e.toString(16)}function ur(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Be(e,t,n,i)}function jl(e){if(e instanceof Be)return new Be(e.h,e.s,e.l,e.opacity);if(e instanceof xt||(e=ft(e)),!e)return new Be;if(e instanceof Be)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),l=NaN,o=s-r,a=(s+r)/2;return o?(t===s?l=(n-i)/o+(n<i)*6:n===s?l=(i-t)/o+2:l=(t-n)/o+4,o/=a<.5?s+r:2-s-r,l*=60):o=a>0&&a<1?0:l,new Be(l,o,a,e.opacity)}function gu(e,t,n,i){return arguments.length===1?jl(e):new Be(e,t,n,i==null?1:i)}function Be(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Di(Be,gu,Xl(xt,{brighter(e){return e=e==null?sn:Math.pow(sn,e),new Be(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new Be(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ve(Pn(e>=240?e-240:e+120,r,i),Pn(e,r,i),Pn(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Be(fr(this.h),Ut(this.s),Ut(this.l),an(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=an(this.opacity);return`${e===1?"hsl(":"hsla("}${fr(this.h)}, ${Ut(this.s)*100}%, ${Ut(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fr(e){return e=(e||0)%360,e<0?e+360:e}function Ut(e){return Math.max(0,Math.min(1,e||0))}function Pn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vi=e=>()=>e;function pu(e,t){return function(n){return e+n*t}}function vu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function yu(e){return(e=+e)==1?Ul:function(t,n){return n-t?vu(t,n,e):Vi(isNaN(t)?n:t)}}function Ul(e,t){var n=t-e;return n?pu(e,n):Vi(isNaN(e)?t:e)}const on=function e(t){var n=yu(t);function i(r,s){var l=n((r=ai(r)).r,(s=ai(s)).r),o=n(r.g,s.g),a=n(r.b,s.b),u=Ul(r.opacity,s.opacity);return function(f){return r.r=l(f),r.g=o(f),r.b=a(f),r.opacity=u(f),r+""}}return i.gamma=e,i}(1);function wu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function bu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ku(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),l;for(l=0;l<i;++l)r[l]=kn(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(o){for(l=0;l<i;++l)s[l]=r[l](o);return s}}function Iu(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ze(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Su(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=kn(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var oi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zn=new RegExp(oi.source,"g");function Eu(e){return function(){return e}}function Au(e){return function(t){return e(t)+""}}function Yl(e,t){var n=oi.lastIndex=zn.lastIndex=0,i,r,s,l=-1,o=[],a=[];for(e=e+"",t=t+"";(i=oi.exec(e))&&(r=zn.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[l]?o[l]+=s:o[++l]=s),(i=i[0])===(r=r[0])?o[l]?o[l]+=r:o[++l]=r:(o[++l]=null,a.push({i:l,x:ze(i,r)})),n=zn.lastIndex;return n<t.length&&(s=t.slice(n),o[l]?o[l]+=s:o[++l]=s),o.length<2?a[0]?Au(a[0].x):Eu(t):(t=a.length,function(u){for(var f=0,h;f<t;++f)o[(h=a[f]).i]=h.x(u);return o.join("")})}function kn(e,t){var n=typeof t,i;return t==null||n==="boolean"?Vi(t):(n==="number"?ze:n==="string"?(i=ft(t))?(t=i,on):Yl:t instanceof ft?on:t instanceof Date?Iu:bu(t)?wu:Array.isArray(t)?ku:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Su:ze)(e,t)}function Mu(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var cr=180/Math.PI,ui={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wl(e,t,n,i,r,s){var l,o,a;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(a=e*n+t*i)&&(n-=e*a,i-=t*a),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,a/=o),e*i<t*n&&(e=-e,t=-t,a=-a,l=-l),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*cr,skewX:Math.atan(a)*cr,scaleX:l,scaleY:o}}var Yt;function Cu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ui:Wl(t.a,t.b,t.c,t.d,t.e,t.f)}function Nu(e){return e==null||(Yt||(Yt=document.createElementNS("http://www.w3.org/2000/svg","g")),Yt.setAttribute("transform",e),!(e=Yt.transform.baseVal.consolidate()))?ui:(e=e.matrix,Wl(e.a,e.b,e.c,e.d,e.e,e.f))}function Kl(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,f,h,c,_,y){if(u!==h||f!==c){var m=_.push("translate(",null,t,null,n);y.push({i:m-4,x:ze(u,h)},{i:m-2,x:ze(f,c)})}else(h||c)&&_.push("translate("+h+t+c+n)}function l(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(r(h)+"rotate(",null,i)-2,x:ze(u,f)})):f&&h.push(r(h)+"rotate("+f+i)}function o(u,f,h,c){u!==f?c.push({i:h.push(r(h)+"skewX(",null,i)-2,x:ze(u,f)}):f&&h.push(r(h)+"skewX("+f+i)}function a(u,f,h,c,_,y){if(u!==h||f!==c){var m=_.push(r(_)+"scale(",null,",",null,")");y.push({i:m-4,x:ze(u,h)},{i:m-2,x:ze(f,c)})}else(h!==1||c!==1)&&_.push(r(_)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),s(u.translateX,u.translateY,f.translateX,f.translateY,h,c),l(u.rotate,f.rotate,h,c),o(u.skewX,f.skewX,h,c),a(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(_){for(var y=-1,m=c.length,v;++y<m;)h[(v=c[y]).i]=v.x(_);return h.join("")}}}var Tu=Kl(Cu,"px, ","px)","deg)"),Lu=Kl(Nu,", ",")",")"),St=0,Vt=0,Mt=0,Zl=1e3,un,Ot,fn=0,ct=0,In=0,Pt=typeof performance=="object"&&performance.now?performance:Date,Jl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Oi(){return ct||(Jl(Du),ct=Pt.now()+In)}function Du(){ct=0}function cn(){this._call=this._time=this._next=null}cn.prototype=Ql.prototype={constructor:cn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Oi():+n)+(t==null?0:+t),!this._next&&Ot!==this&&(Ot?Ot._next=this:un=this,Ot=this),this._call=e,this._time=n,fi()},stop:function(){this._call&&(this._call=null,this._time=1/0,fi())}};function Ql(e,t,n){var i=new cn;return i.restart(e,t,n),i}function Vu(){Oi(),++St;for(var e=un,t;e;)(t=ct-e._time)>=0&&e._call.call(void 0,t),e=e._next;--St}function hr(){ct=(fn=Pt.now())+In,St=Vt=0;try{Vu()}finally{St=0,Fu(),ct=0}}function Ou(){var e=Pt.now(),t=e-fn;t>Zl&&(In-=t,fn=e)}function Fu(){for(var e,t=un,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:un=n);Ot=e,fi(i)}function fi(e){if(!St){Vt&&(Vt=clearTimeout(Vt));var t=e-ct;t>24?(e<1/0&&(Vt=setTimeout(hr,e-Pt.now()-In)),Mt&&(Mt=clearInterval(Mt))):(Mt||(fn=Pt.now(),Mt=setInterval(Ou,Zl)),St=1,Jl(hr))}}function dr(e,t,n){var i=new cn;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Hu=Ni("start","end","cancel","interrupt"),Ru=[],$l=0,_r=1,ci=2,$t=3,mr=4,hi=5,en=6;function Sn(e,t,n,i,r,s){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Pu(e,n,{name:t,index:i,group:r,on:Hu,tween:Ru,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$l})}function Fi(e,t){var n=Xe(e,t);if(n.state>$l)throw new Error("too late; already scheduled");return n}function Ke(e,t){var n=Xe(e,t);if(n.state>$t)throw new Error("too late; already running");return n}function Xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Pu(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Ql(s,0,n.time);function s(u){n.state=_r,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,h,c,_;if(n.state!==_r)return a();for(f in i)if(_=i[f],_.name===n.name){if(_.state===$t)return dr(l);_.state===mr?(_.state=en,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete i[f]):+f<t&&(_.state=en,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete i[f])}if(dr(function(){n.state===$t&&(n.state=mr,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=ci,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ci){for(n.state=$t,r=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(_=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=_);r.length=h+1}}function o(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=hi,1),h=-1,c=r.length;++h<c;)r[h].call(e,f);n.state===hi&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=en,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function di(e,t){var n=e.__transition,i,r,s=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((i=n[l]).name!==t){s=!1;continue}r=i.state>ci&&i.state<hi,i.state=en,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[l]}s&&delete e.__transition}}function zu(e){return this.each(function(){di(this,e)})}function Bu(e,t){var n,i;return function(){var r=Ke(this,e),s=r.tween;if(s!==n){i=n=s;for(var l=0,o=i.length;l<o;++l)if(i[l].name===t){i=i.slice(),i.splice(l,1);break}}r.tween=i}}function qu(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Ke(this,e),l=s.tween;if(l!==i){r=(i=l).slice();for(var o={name:t,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===t){r[a]=o;break}a===u&&r.push(o)}s.tween=r}}function xu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Xe(this.node(),n).tween,r=0,s=i.length,l;r<s;++r)if((l=i[r]).name===e)return l.value;return null}return this.each((t==null?Bu:qu)(n,e,t))}function Hi(e,t,n){var i=e._id;return e.each(function(){var r=Ke(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Xe(r,i).value[t]}}function es(e,t){var n;return(typeof t=="number"?ze:t instanceof ft?on:(n=ft(t))?(t=n,on):Yl)(e,t)}function Gu(e){return function(){this.removeAttribute(e)}}function Xu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ju(e,t,n){var i,r=n+"",s;return function(){var l=this.getAttribute(e);return l===r?null:l===i?s:s=t(i=l,n)}}function Uu(e,t,n){var i,r=n+"",s;return function(){var l=this.getAttributeNS(e.space,e.local);return l===r?null:l===i?s:s=t(i=l,n)}}function Yu(e,t,n){var i,r,s;return function(){var l,o=n(this),a;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),a=o+"",l===a?null:l===i&&a===r?s:(r=a,s=t(i=l,o)))}}function Wu(e,t,n){var i,r,s;return function(){var l,o=n(this),a;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),a=o+"",l===a?null:l===i&&a===r?s:(r=a,s=t(i=l,o)))}}function Ku(e,t){var n=bn(e),i=n==="transform"?Lu:es;return this.attrTween(e,typeof t=="function"?(n.local?Wu:Yu)(n,i,Hi(this,"attr."+e,t)):t==null?(n.local?Xu:Gu)(n):(n.local?Uu:ju)(n,i,t))}function Zu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ju(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Qu(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&Ju(e,s)),n}return r._value=t,r}function $u(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&Zu(e,s)),n}return r._value=t,r}function ef(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=bn(e);return this.tween(n,(i.local?Qu:$u)(i,t))}function tf(e,t){return function(){Fi(this,e).delay=+t.apply(this,arguments)}}function nf(e,t){return t=+t,function(){Fi(this,e).delay=t}}function rf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tf:nf)(t,e)):Xe(this.node(),t).delay}function lf(e,t){return function(){Ke(this,e).duration=+t.apply(this,arguments)}}function sf(e,t){return t=+t,function(){Ke(this,e).duration=t}}function af(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lf:sf)(t,e)):Xe(this.node(),t).duration}function of(e,t){if(typeof t!="function")throw new Error;return function(){Ke(this,e).ease=t}}function uf(e){var t=this._id;return arguments.length?this.each(of(t,e)):Xe(this.node(),t).ease}function ff(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ke(this,e).ease=n}}function cf(e){if(typeof e!="function")throw new Error;return this.each(ff(this._id,e))}function hf(e){typeof e!="function"&&(e=Ol(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,o=i[r]=[],a,u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&o.push(a);return new $e(i,this._parents,this._name,this._id)}function df(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),l=new Array(i),o=0;o<s;++o)for(var a=t[o],u=n[o],f=a.length,h=l[o]=new Array(f),c,_=0;_<f;++_)(c=a[_]||u[_])&&(h[_]=c);for(;o<i;++o)l[o]=t[o];return new $e(l,this._parents,this._name,this._id)}function _f(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mf(e,t,n){var i,r,s=_f(t)?Fi:Ke;return function(){var l=s(this,e),o=l.on;o!==i&&(r=(i=o).copy()).on(t,n),l.on=r}}function gf(e,t){var n=this._id;return arguments.length<2?Xe(this.node(),n).on.on(e):this.each(mf(n,e,t))}function pf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function vf(){return this.on("end.remove",pf(this._id))}function yf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ti(e));for(var i=this._groups,r=i.length,s=new Array(r),l=0;l<r;++l)for(var o=i[l],a=o.length,u=s[l]=new Array(a),f,h,c=0;c<a;++c)(f=o[c])&&(h=e.call(f,f.__data__,c,o))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,Sn(u[c],t,n,c,u,Xe(f,n)));return new $e(s,this._parents,t,n)}function wf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Vl(e));for(var i=this._groups,r=i.length,s=[],l=[],o=0;o<r;++o)for(var a=i[o],u=a.length,f,h=0;h<u;++h)if(f=a[h]){for(var c=e.call(f,f.__data__,h,a),_,y=Xe(f,n),m=0,v=c.length;m<v;++m)(_=c[m])&&Sn(_,t,n,m,c,y);s.push(c),l.push(f)}return new $e(s,l,t,n)}var bf=qt.prototype.constructor;function kf(){return new bf(this._groups,this._parents)}function If(e,t){var n,i,r;return function(){var s=It(this,e),l=(this.style.removeProperty(e),It(this,e));return s===l?null:s===n&&l===i?r:r=t(n=s,i=l)}}function ts(e){return function(){this.style.removeProperty(e)}}function Sf(e,t,n){var i,r=n+"",s;return function(){var l=It(this,e);return l===r?null:l===i?s:s=t(i=l,n)}}function Ef(e,t,n){var i,r,s;return function(){var l=It(this,e),o=n(this),a=o+"";return o==null&&(a=o=(this.style.removeProperty(e),It(this,e))),l===a?null:l===i&&a===r?s:(r=a,s=t(i=l,o))}}function Af(e,t){var n,i,r,s="style."+t,l="end."+s,o;return function(){var a=Ke(this,e),u=a.on,f=a.value[s]==null?o||(o=ts(t)):void 0;(u!==n||r!==f)&&(i=(n=u).copy()).on(l,r=f),a.on=i}}function Mf(e,t,n){var i=(e+="")=="transform"?Tu:es;return t==null?this.styleTween(e,If(e,i)).on("end.style."+e,ts(e)):typeof t=="function"?this.styleTween(e,Ef(e,i,Hi(this,"style."+e,t))).each(Af(this._id,e)):this.styleTween(e,Sf(e,i,t),n).on("end.style."+e,null)}function Cf(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Nf(e,t,n){var i,r;function s(){var l=t.apply(this,arguments);return l!==r&&(i=(r=l)&&Cf(e,l,n)),i}return s._value=t,s}function Tf(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Nf(e,t,n==null?"":n))}function Lf(e){return function(){this.textContent=e}}function Df(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Vf(e){return this.tween("text",typeof e=="function"?Df(Hi(this,"text",e)):Lf(e==null?"":e+""))}function Of(e){return function(t){this.textContent=e.call(this,t)}}function Ff(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Of(r)),t}return i._value=e,i}function Hf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ff(e))}function Rf(){for(var e=this._name,t=this._id,n=ns(),i=this._groups,r=i.length,s=0;s<r;++s)for(var l=i[s],o=l.length,a,u=0;u<o;++u)if(a=l[u]){var f=Xe(a,t);Sn(a,e,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new $e(i,this._parents,e,n)}function Pf(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,l){var o={value:l},a={value:function(){--r===0&&s()}};n.each(function(){var u=Ke(this,i),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(a)),u.on=t}),r===0&&s()})}var zf=0;function $e(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ns(){return++zf}var Je=qt.prototype;$e.prototype={constructor:$e,select:yf,selectAll:wf,selectChild:Je.selectChild,selectChildren:Je.selectChildren,filter:hf,merge:df,selection:kf,transition:Rf,call:Je.call,nodes:Je.nodes,node:Je.node,size:Je.size,empty:Je.empty,each:Je.each,on:gf,attr:Ku,attrTween:ef,style:Mf,styleTween:Tf,text:Vf,textTween:Hf,remove:vf,tween:xu,delay:rf,duration:af,ease:uf,easeVarying:cf,end:Pf,[Symbol.iterator]:Je[Symbol.iterator]};function Bf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qf={time:null,delay:0,duration:250,ease:Bf};function xf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Gf(e){var t,n;e instanceof $e?(t=e._id,e=e._name):(t=ns(),(n=qf).time=Oi(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var l=i[s],o=l.length,a,u=0;u<o;++u)(a=l[u])&&Sn(a,e,t,u,l,n||xf(a,t));return new $e(i,this._parents,e,t)}qt.prototype.interrupt=zu;qt.prototype.transition=Gf;const Bn=e=>()=>e;function Xf(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function jf(e){e.stopImmediatePropagation()}function qn(e){e.preventDefault(),e.stopImmediatePropagation()}var gr={name:"drag"},xn={name:"space"},gt={name:"handle"},pt={name:"center"};const{abs:pr,max:Ee,min:Ae}=Math;function vr(e){return[+e[0],+e[1]]}function yr(e){return[vr(e[0]),vr(e[1])]}var tn={name:"x",handles:["w","e"].map(hn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Gn={name:"y",handles:["n","s"].map(hn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Qe={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},wr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},br={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Uf={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Yf={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function hn(e){return{type:e}}function Wf(e){return!e.ctrlKey&&!e.button}function Kf(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Zf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Jf(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Qf(){return $f(tn)}function $f(e){var t=Kf,n=Wf,i=Zf,r=!0,s=Ni("start","brush","end"),l=6,o;function a(v){var k=v.property("__brush",m).selectAll(".overlay").data([hn("overlay")]);k.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Qe.overlay).merge(k).each(function(){var w=Xn(this).extent;Oe(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),v.selectAll(".selection").data([hn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Qe.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var A=v.selectAll(".handle").data(e.handles,function(w){return w.type});A.exit().remove(),A.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return Qe[w.type]}),v.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",c).filter(i).on("touchstart.brush",c).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}a.move=function(v,k,A){v.tween?v.on("start.brush",function(w){f(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){f(this,arguments).end(w)}).tween("brush",function(){var w=this,g=w.__brush,b=f(w,arguments),D=g.selection,P=e.input(typeof k=="function"?k.apply(this,arguments):k,g.extent),F=kn(D,P);function z(I){g.selection=I===1&&P===null?null:F(I),u.call(w),b.brush()}return D!==null&&P!==null?z:z(1)}):v.each(function(){var w=this,g=arguments,b=w.__brush,D=e.input(typeof k=="function"?k.apply(w,g):k,b.extent),P=f(w,g).beforestart();di(w),b.selection=D===null?null:D,u.call(w),P.start(A).brush(A).end(A)})},a.clear=function(v,k){a.move(v,null,k)};function u(){var v=Oe(this),k=Xn(this).selection;k?(v.selectAll(".selection").style("display",null).attr("x",k[0][0]).attr("y",k[0][1]).attr("width",k[1][0]-k[0][0]).attr("height",k[1][1]-k[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(A){return A.type[A.type.length-1]==="e"?k[1][0]-l/2:k[0][0]-l/2}).attr("y",function(A){return A.type[0]==="s"?k[1][1]-l/2:k[0][1]-l/2}).attr("width",function(A){return A.type==="n"||A.type==="s"?k[1][0]-k[0][0]+l:l}).attr("height",function(A){return A.type==="e"||A.type==="w"?k[1][1]-k[0][1]+l:l})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(v,k,A){var w=v.__brush.emitter;return w&&(!A||!w.clean)?w:new h(v,k,A)}function h(v,k,A){this.that=v,this.args=k,this.state=v.__brush,this.active=0,this.clean=A}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,k){return this.starting?(this.starting=!1,this.emit("start",v,k)):this.emit("brush",v),this},brush:function(v,k){return this.emit("brush",v,k),this},end:function(v,k){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,k)),this},emit:function(v,k,A){var w=Oe(this.that).datum();s.call(v,this.that,new Xf(v,{sourceEvent:k,target:a,selection:e.output(this.state.selection),mode:A,dispatch:s}),w)}};function c(v){if(o&&!v.touches||!n.apply(this,arguments))return;var k=this,A=v.target.__data__.type,w=(r&&v.metaKey?A="overlay":A)==="selection"?gr:r&&v.altKey?pt:gt,g=e===Gn?null:Uf[A],b=e===tn?null:Yf[A],D=Xn(k),P=D.extent,F=D.selection,z=P[0][0],I,M,E=P[0][1],C,L,N=P[1][0],T,x,G=P[1][1],q,ee,te=0,V=0,$,oe=g&&b&&r&&v.shiftKey,de,_e,ie=Array.from(v.touches||[v],Y=>{const me=Y.identifier;return Y=nr(Y,k),Y.point0=Y.slice(),Y.identifier=me,Y});di(k);var O=f(k,arguments,!0).beforestart();if(A==="overlay"){F&&($=!0);const Y=[ie[0],ie[1]||ie[0]];D.selection=F=[[I=e===Gn?z:Ae(Y[0][0],Y[1][0]),C=e===tn?E:Ae(Y[0][1],Y[1][1])],[T=e===Gn?N:Ee(Y[0][0],Y[1][0]),q=e===tn?G:Ee(Y[0][1],Y[1][1])]],ie.length>1&&Ne(v)}else I=F[0][0],C=F[0][1],T=F[1][0],q=F[1][1];M=I,L=C,x=T,ee=q;var j=Oe(k).attr("pointer-events","none"),ae=j.selectAll(".overlay").attr("cursor",Qe[A]);if(v.touches)O.moved=Ce,O.ended=je;else{var Se=Oe(v.view).on("mousemove.brush",Ce,!0).on("mouseup.brush",je,!0);r&&Se.on("keydown.brush",et,!0).on("keyup.brush",tt,!0),iu(v.view)}u.call(k),O.start(v,w.name);function Ce(Y){for(const me of Y.changedTouches||[Y])for(const nt of ie)nt.identifier===me.identifier&&(nt.cur=nr(me,k));if(oe&&!de&&!_e&&ie.length===1){const me=ie[0];pr(me.cur[0]-me[0])>pr(me.cur[1]-me[1])?_e=!0:de=!0}for(const me of ie)me.cur&&(me[0]=me.cur[0],me[1]=me.cur[1]);$=!0,qn(Y),Ne(Y)}function Ne(Y){const me=ie[0],nt=me.point0;var Pe;switch(te=me[0]-nt[0],V=me[1]-nt[1],w){case xn:case gr:{g&&(te=Ee(z-I,Ae(N-T,te)),M=I+te,x=T+te),b&&(V=Ee(E-C,Ae(G-q,V)),L=C+V,ee=q+V);break}case gt:{ie[1]?(g&&(M=Ee(z,Ae(N,ie[0][0])),x=Ee(z,Ae(N,ie[1][0])),g=1),b&&(L=Ee(E,Ae(G,ie[0][1])),ee=Ee(E,Ae(G,ie[1][1])),b=1)):(g<0?(te=Ee(z-I,Ae(N-I,te)),M=I+te,x=T):g>0&&(te=Ee(z-T,Ae(N-T,te)),M=I,x=T+te),b<0?(V=Ee(E-C,Ae(G-C,V)),L=C+V,ee=q):b>0&&(V=Ee(E-q,Ae(G-q,V)),L=C,ee=q+V));break}case pt:{g&&(M=Ee(z,Ae(N,I-te*g)),x=Ee(z,Ae(N,T+te*g))),b&&(L=Ee(E,Ae(G,C-V*b)),ee=Ee(E,Ae(G,q+V*b)));break}}x<M&&(g*=-1,Pe=I,I=T,T=Pe,Pe=M,M=x,x=Pe,A in wr&&ae.attr("cursor",Qe[A=wr[A]])),ee<L&&(b*=-1,Pe=C,C=q,q=Pe,Pe=L,L=ee,ee=Pe,A in br&&ae.attr("cursor",Qe[A=br[A]])),D.selection&&(F=D.selection),de&&(M=F[0][0],x=F[1][0]),_e&&(L=F[0][1],ee=F[1][1]),(F[0][0]!==M||F[0][1]!==L||F[1][0]!==x||F[1][1]!==ee)&&(D.selection=[[M,L],[x,ee]],u.call(k),O.brush(Y,w.name))}function je(Y){if(jf(Y),Y.touches){if(Y.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else ru(Y.view,$),Se.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);j.attr("pointer-events","all"),ae.attr("cursor",Qe.overlay),D.selection&&(F=D.selection),Jf(F)&&(D.selection=null,u.call(k)),O.end(Y,w.name)}function et(Y){switch(Y.keyCode){case 16:{oe=g&&b;break}case 18:{w===gt&&(g&&(T=x-te*g,I=M+te*g),b&&(q=ee-V*b,C=L+V*b),w=pt,Ne(Y));break}case 32:{(w===gt||w===pt)&&(g<0?T=x-te:g>0&&(I=M-te),b<0?q=ee-V:b>0&&(C=L-V),w=xn,ae.attr("cursor",Qe.selection),Ne(Y));break}default:return}qn(Y)}function tt(Y){switch(Y.keyCode){case 16:{oe&&(de=_e=oe=!1,Ne(Y));break}case 18:{w===pt&&(g<0?T=x:g>0&&(I=M),b<0?q=ee:b>0&&(C=L),w=gt,Ne(Y));break}case 32:{w===xn&&(Y.altKey?(g&&(T=x-te*g,I=M+te*g),b&&(q=ee-V*b,C=L+V*b),w=pt):(g<0?T=x:g>0&&(I=M),b<0?q=ee:b>0&&(C=L),w=gt),ae.attr("cursor",Qe[A]),Ne(Y));break}default:return}qn(Y)}}function _(v){f(this,arguments).moved(v)}function y(v){f(this,arguments).ended(v)}function m(){var v=this.__brush||{selection:null};return v.extent=yr(t.apply(this,arguments)),v.dim=e,v}return a.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Bn(yr(v)),a):t},a.filter=function(v){return arguments.length?(n=typeof v=="function"?v:Bn(!!v),a):n},a.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Bn(!!v),a):i},a.handleSize=function(v){return arguments.length?(l=+v,a):l},a.keyModifiers=function(v){return arguments.length?(r=!!v,a):r},a.on=function(){var v=s.on.apply(s,arguments);return v===s?a:v},a}const _i=Math.PI,mi=2*_i,st=1e-6,ec=mi-st;function gi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function pi(){return new gi}gi.prototype=pi.prototype={constructor:gi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var s=this._x1,l=this._y1,o=n-e,a=i-t,u=s-e,f=l-t,h=u*u+f*f;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>st)if(!(Math.abs(f*o-a*u)>st)||!r)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var c=n-s,_=i-l,y=o*o+a*a,m=c*c+_*_,v=Math.sqrt(y),k=Math.sqrt(h),A=r*Math.tan((_i-Math.acos((y+h-m)/(2*v*k)))/2),w=A/k,g=A/v;Math.abs(w-1)>st&&(this._+="L"+(e+w*u)+","+(t+w*f)),this._+="A"+r+","+r+",0,0,"+ +(f*c>u*_)+","+(this._x1=e+g*o)+","+(this._y1=t+g*a)}},arc:function(e,t,n,i,r,s){e=+e,t=+t,n=+n,s=!!s;var l=n*Math.cos(i),o=n*Math.sin(i),a=e+l,u=t+o,f=1^s,h=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+a+","+u:(Math.abs(this._x1-a)>st||Math.abs(this._y1-u)>st)&&(this._+="L"+a+","+u),n&&(h<0&&(h=h%mi+mi),h>ec?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+f+","+(this._x1=a)+","+(this._y1=u):h>st&&(this._+="A"+n+","+n+",0,"+ +(h>=_i)+","+f+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var kr={},jn={},Un=34,Ct=10,Yn=13;function is(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function tc(e,t){var n=is(e);return function(i,r){return t(n(i),r,e)}}function Ir(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Te(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function nc(e){return e<0?"-"+Te(-e,6):e>9999?"+"+Te(e,6):Te(e,4)}function ic(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":nc(e.getUTCFullYear())+"-"+Te(e.getUTCMonth()+1,2)+"-"+Te(e.getUTCDate(),2)+(r?"T"+Te(t,2)+":"+Te(n,2)+":"+Te(i,2)+"."+Te(r,3)+"Z":i?"T"+Te(t,2)+":"+Te(n,2)+":"+Te(i,2)+"Z":n||t?"T"+Te(t,2)+":"+Te(n,2)+"Z":"")}function rc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,c){var _,y,m=r(h,function(v,k){if(_)return _(v,k-1);y=v,_=c?tc(v,c):is(v)});return m.columns=y||[],m}function r(h,c){var _=[],y=h.length,m=0,v=0,k,A=y<=0,w=!1;h.charCodeAt(y-1)===Ct&&--y,h.charCodeAt(y-1)===Yn&&--y;function g(){if(A)return jn;if(w)return w=!1,kr;var D,P=m,F;if(h.charCodeAt(P)===Un){for(;m++<y&&h.charCodeAt(m)!==Un||h.charCodeAt(++m)===Un;);return(D=m)>=y?A=!0:(F=h.charCodeAt(m++))===Ct?w=!0:F===Yn&&(w=!0,h.charCodeAt(m)===Ct&&++m),h.slice(P+1,D-1).replace(/""/g,'"')}for(;m<y;){if((F=h.charCodeAt(D=m++))===Ct)w=!0;else if(F===Yn)w=!0,h.charCodeAt(m)===Ct&&++m;else if(F!==n)continue;return h.slice(P,D)}return A=!0,h.slice(P,y)}for(;(k=g())!==jn;){for(var b=[];k!==kr&&k!==jn;)b.push(k),k=g();c&&(b=c(b,v++))==null||_.push(b)}return _}function s(h,c){return h.map(function(_){return c.map(function(y){return f(_[y])}).join(e)})}function l(h,c){return c==null&&(c=Ir(h)),[c.map(f).join(e)].concat(s(h,c)).join(`
`)}function o(h,c){return c==null&&(c=Ir(h)),s(h,c).join(`
`)}function a(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?ic(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:l,formatBody:o,formatRows:a,formatRow:u,formatValue:f}}var lc=rc(","),sc=lc.parse;function ac(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function oc(e,t){return fetch(e,t).then(ac)}function uc(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),oc(t,n).then(function(r){return e(r,i)})}}var Wt=uc(sc);function fc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function dn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Et(e){return e=dn(Math.abs(e)),e?e[1]:NaN}function cc(e,t){return function(n,i){for(var r=n.length,s=[],l=0,o=e[0],a=0;r>0&&o>0&&(a+o+1>i&&(o=Math.max(1,i-a)),s.push(n.substring(r-=o,r+o)),!((a+=o+1)>i));)o=e[l=(l+1)%e.length];return s.reverse().join(t)}}function hc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var dc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _n(e){if(!(t=dc.exec(e)))throw new Error("invalid format: "+e);var t;return new Ri({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_n.prototype=Ri.prototype;function Ri(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ri.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _c(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var rs;function mc(e,t){var n=dn(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(rs=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,l=i.length;return s===l?i:s>l?i+new Array(s-l+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+dn(e,Math.max(0,t+s-1))[0]}function Sr(e,t){var n=dn(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Er={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:fc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sr(e*100,t),r:Sr,s:mc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ar(e){return e}var Mr=Array.prototype.map,Cr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function gc(e){var t=e.grouping===void 0||e.thousands===void 0?Ar:cc(Mr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ar:hc(Mr.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function u(h){h=_n(h);var c=h.fill,_=h.align,y=h.sign,m=h.symbol,v=h.zero,k=h.width,A=h.comma,w=h.precision,g=h.trim,b=h.type;b==="n"?(A=!0,b="g"):Er[b]||(w===void 0&&(w=12),g=!0,b="g"),(v||c==="0"&&_==="=")&&(v=!0,c="0",_="=");var D=m==="$"?n:m==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",P=m==="$"?i:/[%p]/.test(b)?l:"",F=Er[b],z=/[defgprs%]/.test(b);w=w===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function I(M){var E=D,C=P,L,N,T;if(b==="c")C=F(M)+C,M="";else{M=+M;var x=M<0||1/M<0;if(M=isNaN(M)?a:F(Math.abs(M),w),g&&(M=_c(M)),x&&+M==0&&y!=="+"&&(x=!1),E=(x?y==="("?y:o:y==="-"||y==="("?"":y)+E,C=(b==="s"?Cr[8+rs/3]:"")+C+(x&&y==="("?")":""),z){for(L=-1,N=M.length;++L<N;)if(T=M.charCodeAt(L),48>T||T>57){C=(T===46?r+M.slice(L+1):M.slice(L))+C,M=M.slice(0,L);break}}}A&&!v&&(M=t(M,1/0));var G=E.length+M.length+C.length,q=G<k?new Array(k-G+1).join(c):"";switch(A&&v&&(M=t(q+M,q.length?k-C.length:1/0),q=""),_){case"<":M=E+M+C+q;break;case"=":M=E+q+M+C;break;case"^":M=q.slice(0,G=q.length>>1)+E+M+C+q.slice(G);break;default:M=q+E+M+C;break}return s(M)}return I.toString=function(){return h+""},I}function f(h,c){var _=u((h=_n(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(Et(c)/3)))*3,m=Math.pow(10,-y),v=Cr[8+y/3];return function(k){return _(m*k)+v}}return{format:u,formatPrefix:f}}var Kt,At,ls;pc({thousands:",",grouping:[3],currency:["$",""]});function pc(e){return Kt=gc(e),At=Kt.format,ls=Kt.formatPrefix,Kt}function vc(e){return Math.max(0,-Et(Math.abs(e)))}function yc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Et(t)/3)))*3-Et(Math.abs(e)))}function wc(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Et(t)-Et(e))+1}function bc(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function kc(){return this.eachAfter(bc)}function Ic(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Sc(e,t){for(var n=this,i=[n],r,s,l=-1;n=i.pop();)if(e.call(t,n,++l,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function Ec(e,t){for(var n=this,i=[n],r=[],s,l,o,a=-1;n=i.pop();)if(r.push(n),s=n.children)for(l=0,o=s.length;l<o;++l)i.push(s[l]);for(;n=r.pop();)e.call(t,n,++a,this);return this}function Ac(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Mc(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Cc(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Nc(e){for(var t=this,n=Tc(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Tc(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Lc(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Dc(){return Array.from(this)}function Vc(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Oc(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Fc(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function ss(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Pc)):t===void 0&&(t=Rc);for(var n=new zt(e),i,r=[n],s,l,o,a;i=r.pop();)if((l=t(i.data))&&(a=(l=Array.from(l)).length))for(i.children=l,o=a-1;o>=0;--o)r.push(s=l[o]=new zt(l[o])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(as)}function Hc(){return ss(this).eachBefore(zc)}function Rc(e){return e.children}function Pc(e){return Array.isArray(e)?e[1]:null}function zc(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function as(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function zt(e){this.data=e,this.depth=this.height=0,this.parent=null}zt.prototype=ss.prototype={constructor:zt,count:kc,each:Ic,eachAfter:Ec,eachBefore:Sc,find:Ac,sum:Mc,sort:Cc,path:Nc,ancestors:Lc,descendants:Dc,leaves:Vc,links:Oc,copy:Hc,[Symbol.iterator]:Fc};function Wn(e){return e==null?null:os(e)}function os(e){if(typeof e!="function")throw new Error;return e}function Nt(){return 0}function Tt(e){return function(){return e}}function Bc(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function us(e,t,n,i,r){for(var s=e.children,l,o=-1,a=s.length,u=e.value&&(i-t)/e.value;++o<a;)l=s[o],l.y0=n,l.y1=r,l.x0=t,l.x1=t+=l.value*u}var qc={depth:-1},Nr={},Kn={};function xc(e){return e.id}function Gc(e){return e.parentId}function Xc(){var e=xc,t=Gc,n;function i(r){var s=Array.from(r),l=e,o=t,a,u,f,h,c,_,y,m,v=new Map;if(n!=null){const k=s.map((g,b)=>jc(n(g,b,r))),A=k.map(Tr),w=new Set(k).add("");for(const g of A)w.has(g)||(w.add(g),k.push(g),A.push(Tr(g)),s.push(Kn));l=(g,b)=>k[b],o=(g,b)=>A[b]}for(f=0,a=s.length;f<a;++f)u=s[f],_=s[f]=new zt(u),(y=l(u,f,r))!=null&&(y+="")&&(m=_.id=y,v.set(m,v.has(m)?Nr:_)),(y=o(u,f,r))!=null&&(y+="")&&(_.parent=y);for(f=0;f<a;++f)if(_=s[f],y=_.parent){if(c=v.get(y),!c)throw new Error("missing: "+y);if(c===Nr)throw new Error("ambiguous: "+y);c.children?c.children.push(_):c.children=[_],_.parent=c}else{if(h)throw new Error("multiple roots");h=_}if(!h)throw new Error("no root");if(n!=null){for(;h.data===Kn&&h.children.length===1;)h=h.children[0],--a;for(let k=s.length-1;k>=0&&(_=s[k],_.data===Kn);--k)_.data=null}if(h.parent=qc,h.eachBefore(function(k){k.depth=k.parent.depth+1,--a}).eachBefore(as),h.parent=null,a>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=Wn(r),i):e},i.parentId=function(r){return arguments.length?(t=Wn(r),i):t},i.path=function(r){return arguments.length?(n=Wn(r),i):n},i}function jc(e){e=`${e}`;let t=e.length;return vi(e,t-1)&&!vi(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Tr(e){let t=e.length;if(t<2)return"";for(;--t>1&&!vi(e,t););return e.slice(0,t)}function vi(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function fs(e,t,n,i,r){for(var s=e.children,l,o=-1,a=s.length,u=e.value&&(r-n)/e.value;++o<a;)l=s[o],l.x0=t,l.x1=i,l.y0=n,l.y1=n+=l.value*u}var cs=(1+Math.sqrt(5))/2;function hs(e,t,n,i,r,s){for(var l=[],o=t.children,a,u,f=0,h=0,c=o.length,_,y,m=t.value,v,k,A,w,g,b,D;f<c;){_=r-n,y=s-i;do v=o[h++].value;while(!v&&h<c);for(k=A=v,b=Math.max(y/_,_/y)/(m*e),D=v*v*b,g=Math.max(A/D,D/k);h<c;++h){if(v+=u=o[h].value,u<k&&(k=u),u>A&&(A=u),D=v*v*b,w=Math.max(A/D,D/k),w>g){v-=u;break}g=w}l.push(a={value:v,dice:_<y,children:o.slice(f,h)}),a.dice?us(a,n,i,r,m?i+=y*v/m:s):fs(a,n,i,m?n+=_*v/m:r,s),m-=v,f=h}return l}const Uc=function e(t){function n(i,r,s,l,o){hs(t,i,r,s,l,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(cs);function Yc(){var e=Uc,t=!1,n=1,i=1,r=[0],s=Nt,l=Nt,o=Nt,a=Nt,u=Nt;function f(c){return c.x0=c.y0=0,c.x1=n,c.y1=i,c.eachBefore(h),r=[0],t&&c.eachBefore(Bc),c}function h(c){var _=r[c.depth],y=c.x0+_,m=c.y0+_,v=c.x1-_,k=c.y1-_;v<y&&(y=v=(y+v)/2),k<m&&(m=k=(m+k)/2),c.x0=y,c.y0=m,c.x1=v,c.y1=k,c.children&&(_=r[c.depth+1]=s(c)/2,y+=u(c)-_,m+=l(c)-_,v-=o(c)-_,k-=a(c)-_,v<y&&(y=v=(y+v)/2),k<m&&(m=k=(m+k)/2),e(c,y,m,v,k))}return f.round=function(c){return arguments.length?(t=!!c,f):t},f.size=function(c){return arguments.length?(n=+c[0],i=+c[1],f):[n,i]},f.tile=function(c){return arguments.length?(e=os(c),f):e},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(s=typeof c=="function"?c:Tt(+c),f):s},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(l=typeof c=="function"?c:Tt(+c),f):l},f.paddingRight=function(c){return arguments.length?(o=typeof c=="function"?c:Tt(+c),f):o},f.paddingBottom=function(c){return arguments.length?(a=typeof c=="function"?c:Tt(+c),f):a},f.paddingLeft=function(c){return arguments.length?(u=typeof c=="function"?c:Tt(+c),f):u},f}const Wc=function e(t){function n(i,r,s,l,o){if((a=i._squarify)&&a.ratio===t)for(var a,u,f,h,c=-1,_,y=a.length,m=i.value;++c<y;){for(u=a[c],f=u.children,h=u.value=0,_=f.length;h<_;++h)u.value+=f[h].value;u.dice?us(u,r,s,l,m?s+=(o-s)*u.value/m:o):fs(u,r,s,m?r+=(l-r)*u.value/m:l,o),m-=u.value}else i._squarify=a=hs(t,i,r,s,l,o),a.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(cs);function ds(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Lr=Symbol("implicit");function yi(){var e=new Jn,t=[],n=[],i=Lr;function r(s){let l=e.get(s);if(l===void 0){if(i!==Lr)return i;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Jn;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return yi(t,n).unknown(i)},ds.apply(r,arguments),r}function Kc(e){return function(){return e}}function Zc(e){return+e}var Dr=[0,1];function yt(e){return e}function wi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Kc(isNaN(t)?NaN:.5)}function Jc(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Qc(e,t,n){var i=e[0],r=e[1],s=t[0],l=t[1];return r<i?(i=wi(r,i),s=n(l,s)):(i=wi(i,r),s=n(s,l)),function(o){return s(i(o))}}function $c(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),l=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<i;)r[l]=wi(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(o){var a=sa(e,o,1,i)-1;return s[a](r[a](o))}}function eh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function th(){var e=Dr,t=Dr,n=kn,i,r,s,l=yt,o,a,u;function f(){var c=Math.min(e.length,t.length);return l!==yt&&(l=Jc(e[0],e[c-1])),o=c>2?$c:Qc,a=u=null,h}function h(c){return c==null||isNaN(c=+c)?s:(a||(a=o(e.map(i),t,n)))(i(l(c)))}return h.invert=function(c){return l(r((u||(u=o(t,e.map(i),ze)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,Zc),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=Mu,f()},h.clamp=function(c){return arguments.length?(l=c?!0:yt,f()):l!==yt},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(s=c,h):s},function(c,_){return i=c,r=_,f()}}function nh(){return th()(yt,yt)}function ih(e,t,n,i){var r=ha(e,t,n),s;switch(i=_n(i==null?",f":i),i.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=yc(r,l))&&(i.precision=s),ls(i,l)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=wc(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=vc(r))&&(i.precision=s-(i.type==="%")*2);break}}return At(i)}function rh(e){var t=e.domain;return e.ticks=function(n){var i=t();return ca(i[0],i[i.length-1],n==null?10:n)},e.tickFormat=function(n,i){var r=t();return ih(r[0],r[r.length-1],n==null?10:n,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,l=i[r],o=i[s],a,u,f=10;for(o<l&&(u=l,l=o,o=u,u=r,r=s,s=u);f-- >0;){if(u=Nl(l,o,n),u===a)return i[r]=l,i[s]=o,t(i);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;a=u}return e},e}function mn(){var e=nh();return e.copy=function(){return eh(e,mn())},ds.apply(e,arguments),rh(e)}function lh(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Vr=lh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function wt(e,t,n){this.k=e,this.x=t,this.y=n}wt.prototype={constructor:wt,scale:function(e){return e===1?this:new wt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new wt(1,0,0);wt.prototype;const bt=ea([2020]);class sh{constructor(t){we(this,"id");we(this,"code");we(this,"name");we(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class bi{constructor(t){we(this,"id");we(this,"code");we(this,"name");we(this,"level");we(this,"parent_id");we(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class ut{constructor(t,n,i){we(this,"location_id");we(this,"location");we(this,"partner_id");we(this,"partner");we(this,"product_id");we(this,"product");we(this,"year");we(this,"export_value");we(this,"import_value");this.location_id=+i.location_id,this.location=t.get(this.location_id),this.partner_id=+i.partner_id,this.partner=t.get(this.partner_id),this.product_id=+i.product_id,this.product=n.get(this.product_id),this.year=+i.year,this.export_value=+i.export_value,this.import_value=+i.import_value}}function ah(e,t){const n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r={};return r.top=n.top<0,r.left=n.left<0,r.bottom=n.bottom+i.height>(window.innerHeight||document.documentElement.clientHeight),r.right=n.right>(window.innerWidth||document.documentElement.clientWidth),r.any=r.top||r.left||r.bottom||r.right,r}function oh(e){let t,n=e[0](e[1],e[2])+"",i;return{c(){t=Z("div"),this.h()},l(r){t=J(r,"DIV",{class:!0});var s=R(t);s.forEach(S),this.h()},h(){d(t,"class",i="item "+e[3]+" svelte-3e0qet")},m(r,s){B(r,t,s),t.innerHTML=n},p(r,[s]){s&7&&n!==(n=r[0](r[1],r[2])+"")&&(t.innerHTML=n),s&8&&i!==(i="item "+r[3]+" svelte-3e0qet")&&d(t,"class",i)},i:he,o:he,d(r){r&&S(t)}}}function uh(e,t,n){let{isActive:i=!1}=t,{isFirst:r=!1}=t,{isHover:s=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:a=void 0}=t,{filterText:u=""}=t,f="";return e.$$set=h=>{"isActive"in h&&n(4,i=h.isActive),"isFirst"in h&&n(5,r=h.isFirst),"isHover"in h&&n(6,s=h.isHover),"isSelectable"in h&&n(7,l=h.isSelectable),"getOptionLabel"in h&&n(0,o=h.getOptionLabel),"item"in h&&n(1,a=h.item),"filterText"in h&&n(2,u=h.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const h=[];i&&h.push("active"),r&&h.push("first"),s&&h.push("hover"),a.isGroupHeader&&h.push("groupHeader"),a.isGroupItem&&h.push("groupItem"),l||h.push("notSelectable"),n(3,f=h.join(" "))}},[o,a,u,f,i,r,s,l]}class _s extends qe{constructor(t){super(),xe(this,t,uh,oh,Ge,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Or(e,t,n){const i=e.slice();return i[41]=t[n],i[42]=n,i}function fh(e){let t,n,i=e[1],r=[];for(let o=0;o<i.length;o+=1)r[o]=Rr(Or(e,i,o));const s=o=>Q(r[o],1,1,()=>{r[o]=null});let l=null;return i.length||(l=Fr(e)),{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=ne(),l&&l.c()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);t=ne(),l&&l.l(o)},m(o,a){for(let u=0;u<r.length;u+=1)r[u].m(o,a);B(o,t,a),l&&l.m(o,a),n=!0},p(o,a){if(a[0]&114390){i=o[1];let u;for(u=0;u<i.length;u+=1){const f=Or(o,i,u);r[u]?(r[u].p(f,a),U(r[u],1)):(r[u]=Rr(f),r[u].c(),U(r[u],1),r[u].m(t.parentNode,t))}for(ke(),u=i.length;u<r.length;u+=1)s(u);Ie(),!i.length&&l?l.p(o,a):i.length?l&&(l.d(1),l=null):(l=Fr(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let a=0;a<i.length;a+=1)U(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Q(r[a]);n=!1},d(o){Si(r,o),o&&S(t),l&&l.d(o)}}}function ch(e){let t,n,i;var r=e[3];function s(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[_h,({item:o,i:a})=>({41:o,42:a}),({item:o,i:a})=>[0,(o?1024:0)|(a?2048:0)]]},$$scope:{ctx:l}}}}return r&&(t=Me(r,s(e))),{c(){t&&ge(t.$$.fragment),n=ne()},l(l){t&&Le(t.$$.fragment,l),n=ne()},m(l,o){t&&pe(t,l,o),B(l,n,o),i=!0},p(l,o){const a={};if(o[0]&2&&(a.items=l[1]),o[0]&256&&(a.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(a.$$scope={dirty:o,ctx:l}),r!==(r=l[3])){if(t){ke();const u=t;Q(u.$$.fragment,1,0,()=>{ve(u,1)}),Ie()}r?(t=Me(r,s(l)),ge(t.$$.fragment),U(t.$$.fragment,1),pe(t,n.parentNode,n)):t=null}else r&&t.$set(a)},i(l){i||(t&&U(t.$$.fragment,l),i=!0)},o(l){t&&Q(t.$$.fragment,l),i=!1},d(l){l&&S(n),t&&ve(t,l)}}}function Fr(e){let t,n=!e[11]&&Hr(e);return{c(){n&&n.c(),t=ne()},l(i){n&&n.l(i),t=ne()},m(i,r){n&&n.m(i,r),B(i,t,r)},p(i,r){i[11]?n&&(n.d(1),n=null):n?n.p(i,r):(n=Hr(i),n.c(),n.m(t.parentNode,t))},d(i){n&&n.d(i),i&&S(t)}}}function Hr(e){let t,n;return{c(){t=Z("div"),n=fe(e[12]),this.h()},l(i){t=J(i,"DIV",{class:!0});var r=R(t);n=ce(r,e[12]),r.forEach(S),this.h()},h(){d(t,"class","empty svelte-1uyqfml")},m(i,r){B(i,t,r),H(t,n)},p(i,r){r[0]&4096&&We(n,i[12])},d(i){i&&S(t)}}}function hh(e){let t,n,i,r,s,l;var o=e[4];function a(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:ki(c[42]),isActive:gn(c[41],c[9],c[10]),isHover:pn(c[2],c[41],c[42],c[1]),isSelectable:ht(c[41])}}}o&&(n=Me(o,a(e)));function u(){return e[29](e[42])}function f(){return e[30](e[42])}function h(...c){return e[31](e[41],e[42],...c)}return{c(){t=Z("div"),n&&ge(n.$$.fragment),i=le(),this.h()},l(c){t=J(c,"DIV",{class:!0,tabindex:!0});var _=R(t);n&&Le(n.$$.fragment,_),i=se(_),_.forEach(S),this.h()},h(){d(t,"class","listItem"),d(t,"tabindex","-1")},m(c,_){B(c,t,_),n&&pe(n,t,null),H(t,i),r=!0,s||(l=[ye(t,"mouseover",u),ye(t,"focus",f),ye(t,"click",h)],s=!0)},p(c,_){e=c;const y={};if(_[0]&2&&(y.item=e[41]),_[0]&8192&&(y.filterText=e[13]),_[0]&64&&(y.getOptionLabel=e[6]),_[0]&1538&&(y.isActive=gn(e[41],e[9],e[10])),_[0]&6&&(y.isHover=pn(e[2],e[41],e[42],e[1])),_[0]&2&&(y.isSelectable=ht(e[41])),o!==(o=e[4])){if(n){ke();const m=n;Q(m.$$.fragment,1,0,()=>{ve(m,1)}),Ie()}o?(n=Me(o,a(e)),ge(n.$$.fragment),U(n.$$.fragment,1),pe(n,t,i)):n=null}else o&&n.$set(y)},i(c){r||(n&&U(n.$$.fragment,c),r=!0)},o(c){n&&Q(n.$$.fragment,c),r=!1},d(c){c&&S(t),n&&ve(n),s=!1,vn(l)}}}function dh(e){let t,n=e[7](e[41])+"",i;return{c(){t=Z("div"),i=fe(n),this.h()},l(r){t=J(r,"DIV",{class:!0});var s=R(t);i=ce(s,n),s.forEach(S),this.h()},h(){d(t,"class","listGroupTitle svelte-1uyqfml")},m(r,s){B(r,t,s),H(t,i)},p(r,s){s[0]&130&&n!==(n=r[7](r[41])+"")&&We(i,n)},i:he,o:he,d(r){r&&S(t)}}}function Rr(e){let t,n,i,r;const s=[dh,hh],l=[];function o(a,u){return a[41].isGroupHeader&&!a[41].isSelectable?0:1}return t=o(e),n=l[t]=s[t](e),{c(){n.c(),i=ne()},l(a){n.l(a),i=ne()},m(a,u){l[t].m(a,u),B(a,i,u),r=!0},p(a,u){let f=t;t=o(a),t===f?l[t].p(a,u):(ke(),Q(l[f],1,1,()=>{l[f]=null}),Ie(),n=l[t],n?n.p(a,u):(n=l[t]=s[t](a),n.c()),U(n,1),n.m(i.parentNode,i))},i(a){r||(U(n),r=!0)},o(a){Q(n),r=!1},d(a){l[t].d(a),a&&S(i)}}}function _h(e){let t,n,i,r,s;var l=e[4];function o(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:ki(h[42]),isActive:gn(h[41],h[9],h[10]),isHover:pn(h[2],h[41],h[42],h[1]),isSelectable:ht(h[41])}}}l&&(n=Me(l,o(e)));function a(){return e[26](e[42])}function u(){return e[27](e[42])}function f(...h){return e[28](e[41],e[42],...h)}return{c(){t=Z("div"),n&&ge(n.$$.fragment),this.h()},l(h){t=J(h,"DIV",{class:!0});var c=R(t);n&&Le(n.$$.fragment,c),c.forEach(S),this.h()},h(){d(t,"class","listItem")},m(h,c){B(h,t,c),n&&pe(n,t,null),i=!0,r||(s=[ye(t,"mouseover",a),ye(t,"focus",u),ye(t,"click",f)],r=!0)},p(h,c){e=h;const _={};if(c[1]&1024&&(_.item=e[41]),c[0]&8192&&(_.filterText=e[13]),c[0]&64&&(_.getOptionLabel=e[6]),c[1]&2048&&(_.isFirst=ki(e[42])),c[0]&1536|c[1]&1024&&(_.isActive=gn(e[41],e[9],e[10])),c[0]&6|c[1]&3072&&(_.isHover=pn(e[2],e[41],e[42],e[1])),c[1]&1024&&(_.isSelectable=ht(e[41])),l!==(l=e[4])){if(n){ke();const y=n;Q(y.$$.fragment,1,0,()=>{ve(y,1)}),Ie()}l?(n=Me(l,o(e)),ge(n.$$.fragment),U(n.$$.fragment,1),pe(n,t,null)):n=null}else l&&n.$set(_)},i(h){i||(n&&U(n.$$.fragment,h),i=!0)},o(h){n&&Q(n.$$.fragment,h),i=!1},d(h){h&&S(t),n&&ve(n),r=!1,vn(s)}}}function mh(e){let t,n,i,r,s,l;const o=[ch,fh],a=[];function u(f,h){return f[5]?0:1}return n=u(e),i=a[n]=o[n](e),{c(){t=Z("div"),i.c(),this.h()},l(f){t=J(f,"DIV",{class:!0,style:!0});var h=R(t);i.l(h),h.forEach(S),this.h()},h(){d(t,"class","listContainer svelte-1uyqfml"),d(t,"style",e[14]),Re(t,"virtualList",e[5])},m(f,h){B(f,t,h),a[n].m(t,null),e[32](t),r=!0,s||(l=[ye(window,"keydown",e[17]),ye(window,"resize",e[18])],s=!0)},p(f,h){let c=n;n=u(f),n===c?a[n].p(f,h):(ke(),Q(a[c],1,1,()=>{a[c]=null}),Ie(),i=a[n],i?i.p(f,h):(i=a[n]=o[n](f),i.c()),U(i,1),i.m(t,null)),(!r||h[0]&16384)&&d(t,"style",f[14]),(!r||h[0]&32)&&Re(t,"virtualList",f[5])},i(f){r||(U(i),r=!0)},o(f){Q(i),r=!1},d(f){f&&S(t),a[n].d(),e[32](null),s=!1,vn(l)}}}function gn(e,t,n){return t&&t[n]===e[n]}function ki(e){return e===0}function pn(e,t,n,i){return ht(t)&&(e===n||i.length===1)}function ht(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function gh(e,t,n){const i=Ii();let{container:r=void 0}=t,{VirtualList:s=null}=t,{Item:l=_s}=t,{isVirtualList:o=!1}=t,{items:a=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:f=(O,j)=>{if(O)return O.isCreator?`Create "${j}"`:O[u]}}=t,{getGroupHeaderLabel:h=null}=t,{itemHeight:c=40}=t,{hoverItemIndex:_=0}=t,{value:y=void 0}=t,{optionIdentifier:m="value"}=t,{hideEmptyState:v=!1}=t,{noOptionsMessage:k="No options"}=t,{isMulti:A=!1}=t,{activeItemIndex:w=0}=t,{filterText:g=""}=t,{parent:b=null}=t,{listPlacement:D=null}=t,{listAutoWidth:P=null}=t,{listOffset:F=5}=t,z=0,I=!1,M;yn(()=>{if(a.length>0&&!A&&y){const O=a.findIndex(j=>j[m]===y[m]);O&&n(2,_=O)}G("active"),r.addEventListener("scroll",()=>{clearTimeout(z),z=setTimeout(()=>{I=!1},100)},!1)}),Il(()=>{a||n(1,a=[]),a!==M&&a.length>0&&n(2,_=0),M=a});function E(O){O.isCreator||i("itemSelected",O)}function C(O){I||n(2,_=O)}function L(O){const{item:j,i:ae,event:Se}=O;if(Se.stopPropagation(),y&&!A&&y[m]===j[m])return N();j.isCreator?i("itemCreated",g):ht(j)&&(n(19,w=ae),n(2,_=ae),E(j))}function N(){i("closeList")}async function T(O){if(o)return;let j=!0;for(;j;)O>0&&_===a.length-1?n(2,_=0):O<0&&_===0?n(2,_=a.length-1):n(2,_=_+O),j=!ht(a[_]);await Zt(),G("hover")}function x(O){switch(O.key){case"Escape":O.preventDefault(),N();break;case"ArrowDown":O.preventDefault(),a.length&&T(1);break;case"ArrowUp":O.preventDefault(),a.length&&T(-1);break;case"Enter":if(O.preventDefault(),a.length===0)break;const j=a[_];if(y&&!A&&y[m]===j[m]){N();break}j.isCreator?i("itemCreated",g):(n(19,w=_),E(a[_]));break;case"Tab":if(O.preventDefault(),a.length===0||y&&y[m]===a[_][m])return N();n(19,w=_),E(a[_]);break}}function G(O){if(o||!r)return;let j;const ae=r.querySelector(`.listItem .${O}`);ae&&(j=r.getBoundingClientRect().bottom-ae.getBoundingClientRect().bottom),n(0,r.scrollTop-=j,r)}let q;function ee(){const{height:O,width:j}=b.getBoundingClientRect();n(14,q=""),n(14,q+=`min-width:${j}px;width:${P?"auto":"100%"};`),D==="top"||D==="auto"&&ah(b,r).bottom?n(14,q+=`bottom:${O+F}px;`):n(14,q+=`top:${O+F}px;`)}const te=O=>C(O),V=O=>C(O),$=(O,j,ae)=>L({item:O,i:j,event:ae}),oe=O=>C(O),de=O=>C(O),_e=(O,j,ae)=>L({item:O,i:j,event:ae});function ie(O){De[O?"unshift":"push"](()=>{r=O,n(0,r)})}return e.$$set=O=>{"container"in O&&n(0,r=O.container),"VirtualList"in O&&n(3,s=O.VirtualList),"Item"in O&&n(4,l=O.Item),"isVirtualList"in O&&n(5,o=O.isVirtualList),"items"in O&&n(1,a=O.items),"labelIdentifier"in O&&n(20,u=O.labelIdentifier),"getOptionLabel"in O&&n(6,f=O.getOptionLabel),"getGroupHeaderLabel"in O&&n(7,h=O.getGroupHeaderLabel),"itemHeight"in O&&n(8,c=O.itemHeight),"hoverItemIndex"in O&&n(2,_=O.hoverItemIndex),"value"in O&&n(9,y=O.value),"optionIdentifier"in O&&n(10,m=O.optionIdentifier),"hideEmptyState"in O&&n(11,v=O.hideEmptyState),"noOptionsMessage"in O&&n(12,k=O.noOptionsMessage),"isMulti"in O&&n(21,A=O.isMulti),"activeItemIndex"in O&&n(19,w=O.activeItemIndex),"filterText"in O&&n(13,g=O.filterText),"parent"in O&&n(22,b=O.parent),"listPlacement"in O&&n(23,D=O.listPlacement),"listAutoWidth"in O&&n(24,P=O.listAutoWidth),"listOffset"in O&&n(25,F=O.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&b&&r&&ee()},[r,a,_,s,l,o,f,h,c,y,m,v,k,g,q,C,L,x,ee,w,u,A,b,D,P,F,te,V,$,oe,de,_e,ie]}class ph extends qe{constructor(t){super(),xe(this,t,gh,mh,Ge,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function vh(e){let t,n=e[0](e[1])+"";return{c(){t=Z("div"),this.h()},l(i){t=J(i,"DIV",{class:!0});var r=R(t);r.forEach(S),this.h()},h(){d(t,"class","selection svelte-pu1q1n")},m(i,r){B(i,t,r),t.innerHTML=n},p(i,[r]){r&3&&n!==(n=i[0](i[1])+"")&&(t.innerHTML=n)},i:he,o:he,d(i){i&&S(t)}}}function yh(e,t,n){let{getSelectionLabel:i=void 0}=t,{item:r=void 0}=t;return e.$$set=s=>{"getSelectionLabel"in s&&n(0,i=s.getSelectionLabel),"item"in s&&n(1,r=s.item)},[i,r]}class wh extends qe{constructor(t){super(),xe(this,t,yh,vh,Ge,{getSelectionLabel:0,item:1})}}function Pr(e,t,n){const i=e.slice();return i[9]=t[n],i[11]=n,i}function zr(e){let t,n,i,r,s;function l(...o){return e[6](e[11],...o)}return{c(){t=Z("div"),n=W("svg"),i=W("path"),this.h()},l(o){t=J(o,"DIV",{class:!0});var a=R(t);n=K(a,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=R(n);i=K(u,"path",{d:!0}),R(i).forEach(S),u.forEach(S),a.forEach(S),this.h()},h(){d(i,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),d(n,"width","100%"),d(n,"height","100%"),d(n,"viewBox","-2 -2 50 50"),d(n,"focusable","false"),d(n,"aria-hidden","true"),d(n,"role","presentation"),d(n,"class","svelte-liu9pa"),d(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,a){B(o,t,a),H(t,n),H(n,i),r||(s=ye(t,"click",l),r=!0)},p(o,a){e=o},d(o){o&&S(t),r=!1,s()}}}function Br(e){let t,n,i=e[4](e[9])+"",r,s,l,o,a,u=!e[2]&&!e[3]&&zr(e);function f(...h){return e[7](e[11],...h)}return{c(){t=Z("div"),n=Z("div"),r=le(),u&&u.c(),s=le(),this.h()},l(h){t=J(h,"DIV",{class:!0});var c=R(t);n=J(c,"DIV",{class:!0});var _=R(n);_.forEach(S),r=se(c),u&&u.l(c),s=se(c),c.forEach(S),this.h()},h(){d(n,"class","multiSelectItem_label svelte-liu9pa"),d(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(h,c){B(h,t,c),H(t,n),n.innerHTML=i,H(t,r),u&&u.m(t,null),H(t,s),o||(a=ye(t,"click",f),o=!0)},p(h,c){e=h,c&17&&i!==(i=e[4](e[9])+"")&&(n.innerHTML=i),!e[2]&&!e[3]?u?u.p(e,c):(u=zr(e),u.c(),u.m(t,s)):u&&(u.d(1),u=null),c&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&d(t,"class",l)},d(h){h&&S(t),u&&u.d(),o=!1,a()}}}function bh(e){let t,n=e[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=Br(Pr(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=ne()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);t=ne()},m(r,s){for(let l=0;l<i.length;l+=1)i[l].m(r,s);B(r,t,s)},p(r,[s]){if(s&63){n=r[0];let l;for(l=0;l<n.length;l+=1){const o=Pr(r,n,l);i[l]?i[l].p(o,s):(i[l]=Br(o),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},i:he,o:he,d(r){Si(i,r),r&&S(t)}}}function kh(e,t,n){const i=Ii();let{value:r=[]}=t,{activeValue:s=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:a=void 0}=t;function u(c,_){_.stopPropagation(),i("multiItemClear",{i:c})}const f=(c,_)=>u(c,_),h=(c,_)=>o?u(c,_):{};return e.$$set=c=>{"value"in c&&n(0,r=c.value),"activeValue"in c&&n(1,s=c.activeValue),"isDisabled"in c&&n(2,l=c.isDisabled),"multiFullItemClearable"in c&&n(3,o=c.multiFullItemClearable),"getSelectionLabel"in c&&n(4,a=c.getSelectionLabel)},[r,s,l,o,a,u,f,h]}class Ih extends qe{constructor(t){super(),xe(this,t,kh,bh,Ge,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function qr(e,t,n){const i=e.slice();return i[23]=t[n],i}const Sh=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),xr=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function Eh(e){let t;return{c(){t=fe("Missing template")},l(n){t=ce(n,"Missing template")},m(n,i){B(n,t,i)},d(n){n&&S(t)}}}function Gr(e,t){let n,i,r;const s=t[15].default,l=Gs(s,t,t[14],xr),o=l||Eh();return{key:e,first:null,c(){n=Z("svelte-virtual-list-row"),o&&o.c(),i=le(),this.h()},l(a){n=J(a,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=R(n);o&&o.l(u),i=se(u),u.forEach(S),this.h()},h(){Zn(n,"class","svelte-g2cagw"),this.first=n},m(a,u){B(a,n,u),o&&o.m(n,null),H(n,i),r=!0},p(a,u){t=a,l&&l.p&&(!r||u&16418)&&Xs(l,s,t,t[14],r?Us(s,t[14],u,Sh):js(t[14]),xr)},i(a){r||(U(o,a),r=!0)},o(a){Q(o,a),r=!1},d(a){a&&S(n),o&&o.d(a)}}}function Ah(e){let t,n,i=[],r=new Map,s,l,o,a,u=e[5];const f=h=>h[23].index;for(let h=0;h<u.length;h+=1){let c=qr(e,u,h),_=f(c);r.set(_,i[h]=Gr(_,c))}return{c(){t=Z("svelte-virtual-list-viewport"),n=Z("svelte-virtual-list-contents");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){t=J(h,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var c=R(t);n=J(c,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=R(n);for(let y=0;y<i.length;y+=1)i[y].l(_);_.forEach(S),c.forEach(S),this.h()},h(){mt(n,"padding-top",e[6]+"px"),mt(n,"padding-bottom",e[7]+"px"),Zn(n,"class","svelte-g2cagw"),mt(t,"height",e[0]),Zn(t,"class","svelte-g2cagw"),Bt(()=>e[18].call(t))},m(h,c){B(h,t,c),H(t,n);for(let _=0;_<i.length;_+=1)i[_].m(n,null);e[16](n),e[17](t),s=wn(t,e[18].bind(t)),l=!0,o||(a=ye(t,"scroll",e[8]),o=!0)},p(h,[c]){c&16418&&(u=h[5],ke(),i=Ft(i,c,f,1,h,u,r,n,xs,Gr,null,qr),Ie()),(!l||c&64)&&mt(n,"padding-top",h[6]+"px"),(!l||c&128)&&mt(n,"padding-bottom",h[7]+"px"),(!l||c&1)&&mt(t,"height",h[0])},i(h){if(!l){for(let c=0;c<u.length;c+=1)U(i[c]);l=!0}},o(h){for(let c=0;c<i.length;c+=1)Q(i[c]);l=!1},d(h){h&&S(t);for(let c=0;c<i.length;c+=1)i[c].d();e[16](null),e[17](null),s(),o=!1,a()}}}function Mh(e,t,n){let{$$slots:i={},$$scope:r}=t,{items:s=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:a=0}=t,{start:u=0}=t,{end:f=0}=t,h=[],c,_,y,m=0,v,k,A=0,w=0,g;async function b(I,M,E){const{scrollTop:C}=_;await Zt();let L=A-C,N=u;for(;L<M&&N<I.length;){let x=c[N-u];x||(n(10,f=N+1),await Zt(),x=c[N-u]);const G=h[N]=E||x.offsetHeight;L+=G,N+=1}n(10,f=N);const T=I.length-f;g=(A+L)/f,n(7,w=T*g),h.length=I.length,_&&n(3,_.scrollTop=0,_)}async function D(){const{scrollTop:I}=_,M=u;for(let N=0;N<c.length;N+=1)h[u+N]=o||c[N].offsetHeight;let E=0,C=0;for(;E<s.length;){const N=h[E]||g;if(C+N>I){n(9,u=E),n(6,A=C);break}C+=N,E+=1}for(;E<s.length&&(C+=h[E]||g,E+=1,!(C>I+m)););n(10,f=E);const L=s.length-f;for(g=C/f;E<s.length;)h[E++]=g;if(n(7,w=L*g),u<M){await Zt();let N=0,T=0;for(let G=u;G<M;G+=1)c[G-u]&&(N+=h[G],T+=o||c[G-u].offsetHeight);const x=T-N;_.scrollTo(0,I+x)}}yn(()=>{c=y.getElementsByTagName("svelte-virtual-list-row"),n(13,k=!0)});function P(I){De[I?"unshift":"push"](()=>{y=I,n(4,y)})}function F(I){De[I?"unshift":"push"](()=>{_=I,n(3,_)})}function z(){m=this.offsetHeight,n(2,m)}return e.$$set=I=>{"items"in I&&n(11,s=I.items),"height"in I&&n(0,l=I.height),"itemHeight"in I&&n(12,o=I.itemHeight),"hoverItemIndex"in I&&n(1,a=I.hoverItemIndex),"start"in I&&n(9,u=I.start),"end"in I&&n(10,f=I.end),"$$scope"in I&&n(14,r=I.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,v=s.slice(u,f).map((I,M)=>({index:M+u,data:I}))),e.$$.dirty&14340&&k&&b(s,m,o)},[l,a,m,_,y,v,A,w,D,u,f,s,o,k,r,i,P,F,z]}class Ch extends qe{constructor(t){super(),xe(this,t,Mh,Ah,Ge,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function Nh(e){let t,n;return{c(){t=W("svg"),n=W("path"),this.h()},l(i){t=K(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var r=R(t);n=K(r,"path",{fill:!0,d:!0}),R(n).forEach(S),r.forEach(S),this.h()},h(){d(n,"fill","currentColor"),d(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","-2 -2 50 50"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"role","presentation")},m(i,r){B(i,t,r),H(t,n)},p:he,i:he,o:he,d(i){i&&S(t)}}}class Th extends qe{constructor(t){super(),xe(this,t,null,Nh,Ge,{})}}function Lh(e,t,n){let i;return function(){let s=this,l=arguments,o=function(){i=null,n||e.apply(s,l)},a=n&&!i;clearTimeout(i),i=setTimeout(o,t),a&&e.apply(s,l)}}function Xr(e,t,n){const i=e.slice();return i[103]=t[n],i}function jr(e){let t,n,i,r,s;return{c(){t=Z("span"),n=fe(e[33]),i=le(),r=Z("span"),s=fe(e[32]),this.h()},l(l){t=J(l,"SPAN",{id:!0});var o=R(t);n=ce(o,e[33]),o.forEach(S),i=se(l),r=J(l,"SPAN",{id:!0});var a=R(r);s=ce(a,e[32]),a.forEach(S),this.h()},h(){d(t,"id","aria-selection"),d(r,"id","aria-context")},m(l,o){B(l,t,o),H(t,n),B(l,i,o),B(l,r,o),H(r,s)},p(l,o){o[1]&4&&We(n,l[33]),o[1]&2&&We(s,l[32])},d(l){l&&S(t),l&&S(i),l&&S(r)}}}function Ur(e){let t,n,i;const r=[e[18]];var s=e[17];function l(o){let a={};for(let u=0;u<r.length;u+=1)a=Ei(a,r[u]);return{props:a}}return s&&(t=Me(s,l())),{c(){t&&ge(t.$$.fragment),n=ne()},l(o){t&&Le(t.$$.fragment,o),n=ne()},m(o,a){t&&pe(t,o,a),B(o,n,a),i=!0},p(o,a){const u=a[0]&262144?Ai(r,[Sl(o[18])]):{};if(s!==(s=o[17])){if(t){ke();const f=t;Q(f.$$.fragment,1,0,()=>{ve(f,1)}),Ie()}s?(t=Me(s,l()),ge(t.$$.fragment),U(t.$$.fragment,1),pe(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&U(t.$$.fragment,o),i=!0)},o(o){t&&Q(t.$$.fragment,o),i=!1},d(o){o&&S(n),t&&ve(t,o)}}}function Yr(e){let t,n,i;var r=e[26];function s(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return r&&(t=Me(r,s(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&ge(t.$$.fragment),n=ne()},l(l){t&&Le(t.$$.fragment,l),n=ne()},m(l,o){t&&pe(t,l,o),B(l,n,o),i=!0},p(l,o){const a={};if(o[0]&4&&(a.value=l[2]),o[0]&4096&&(a.getSelectionLabel=l[12]),o[0]&1073741824&&(a.activeValue=l[30]),o[0]&512&&(a.isDisabled=l[9]),o[0]&256&&(a.multiFullItemClearable=l[8]),r!==(r=l[26])){if(t){ke();const u=t;Q(u.$$.fragment,1,0,()=>{ve(u,1)}),Ie()}r?(t=Me(r,s(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),ge(t.$$.fragment),U(t.$$.fragment,1),pe(t,n.parentNode,n)):t=null}else r&&t.$set(a)},i(l){i||(t&&U(t.$$.fragment,l),i=!0)},o(l){t&&Q(t.$$.fragment,l),i=!1},d(l){l&&S(n),t&&ve(t,l)}}}function Wr(e){let t,n,i,r,s;var l=e[25];function o(a){return{props:{item:a[2],getSelectionLabel:a[12]}}}return l&&(n=Me(l,o(e))),{c(){t=Z("div"),n&&ge(n.$$.fragment),this.h()},l(a){t=J(a,"DIV",{class:!0});var u=R(t);n&&Le(n.$$.fragment,u),u.forEach(S),this.h()},h(){d(t,"class","selectedItem svelte-17l1npl")},m(a,u){B(a,t,u),n&&pe(n,t,null),i=!0,r||(s=ye(t,"focus",e[40]),r=!0)},p(a,u){const f={};if(u[0]&4&&(f.item=a[2]),u[0]&4096&&(f.getSelectionLabel=a[12]),l!==(l=a[25])){if(n){ke();const h=n;Q(h.$$.fragment,1,0,()=>{ve(h,1)}),Ie()}l?(n=Me(l,o(a)),ge(n.$$.fragment),U(n.$$.fragment,1),pe(n,t,null)):n=null}else l&&n.$set(f)},i(a){i||(n&&U(n.$$.fragment,a),i=!0)},o(a){n&&Q(n.$$.fragment,a),i=!1},d(a){a&&S(t),n&&ve(n),r=!1,s()}}}function Kr(e){let t,n,i,r,s;var l=e[23];function o(a){return{}}return l&&(n=Me(l,o())),{c(){t=Z("div"),n&&ge(n.$$.fragment),this.h()},l(a){t=J(a,"DIV",{class:!0,"aria-hidden":!0});var u=R(t);n&&Le(n.$$.fragment,u),u.forEach(S),this.h()},h(){d(t,"class","clearSelect svelte-17l1npl"),d(t,"aria-hidden","true")},m(a,u){B(a,t,u),n&&pe(n,t,null),i=!0,r||(s=ye(t,"click",Ys(e[27])),r=!0)},p(a,u){if(l!==(l=a[23])){if(n){ke();const f=n;Q(f.$$.fragment,1,0,()=>{ve(f,1)}),Ie()}l?(n=Me(l,o()),ge(n.$$.fragment),U(n.$$.fragment,1),pe(n,t,null)):n=null}},i(a){i||(n&&U(n.$$.fragment,a),i=!0)},o(a){n&&Q(n.$$.fragment,a),i=!1},d(a){a&&S(t),n&&ve(n),r=!1,s()}}}function Zr(e){let t;function n(s,l){return s[22]?Vh:Dh}let i=n(e),r=i(e);return{c(){t=Z("div"),r.c(),this.h()},l(s){t=J(s,"DIV",{class:!0,"aria-hidden":!0});var l=R(t);r.l(l),l.forEach(S),this.h()},h(){d(t,"class","indicator svelte-17l1npl"),d(t,"aria-hidden","true")},m(s,l){B(s,t,l),r.m(t,null)},p(s,l){i===(i=n(s))&&r?r.p(s,l):(r.d(1),r=i(s),r&&(r.c(),r.m(t,null)))},d(s){s&&S(t),r.d()}}}function Dh(e){let t,n;return{c(){t=W("svg"),n=W("path"),this.h()},l(i){t=K(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var r=R(t);n=K(r,"path",{d:!0}),R(n).forEach(S),r.forEach(S),this.h()},h(){d(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","0 0 20 20"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"class","svelte-17l1npl")},m(i,r){B(i,t,r),H(t,n)},p:he,d(i){i&&S(t)}}}function Vh(e){let t,n;return{c(){t=new Ks(!1),n=ne(),this.h()},l(i){t=Zs(i,!1),n=ne(),this.h()},h(){t.a=n},m(i,r){t.m(e[22],i,r),B(i,n,r)},p(i,r){r[0]&4194304&&t.p(i[22])},d(i){i&&S(n),i&&t.d()}}}function Jr(e){let t,n,i;return{c(){t=Z("div"),n=W("svg"),i=W("circle"),this.h()},l(r){t=J(r,"DIV",{class:!0});var s=R(t);n=K(s,"svg",{class:!0,viewBox:!0});var l=R(n);i=K(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),R(i).forEach(S),l.forEach(S),s.forEach(S),this.h()},h(){d(i,"class","spinner_path svelte-17l1npl"),d(i,"cx","50"),d(i,"cy","50"),d(i,"r","20"),d(i,"fill","none"),d(i,"stroke","currentColor"),d(i,"stroke-width","5"),d(i,"stroke-miterlimit","10"),d(n,"class","spinner_icon svelte-17l1npl"),d(n,"viewBox","25 25 50 50"),d(t,"class","spinner svelte-17l1npl")},m(r,s){B(r,t,s),H(t,n),H(n,i)},d(r){r&&S(t)}}}function Qr(e){let t,n,i,r;const s=[e[34]];function l(u){e[84](u)}var o=e[24];function a(u){let f={};for(let h=0;h<s.length;h+=1)f=Ei(f,s[h]);return u[28]!==void 0&&(f.hoverItemIndex=u[28]),{props:f}}return o&&(t=Me(o,a(e)),De.push(()=>Zi(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&ge(t.$$.fragment),i=ne()},l(u){t&&Le(t.$$.fragment,u),i=ne()},m(u,f){t&&pe(t,u,f),B(u,i,f),r=!0},p(u,f){const h=f[1]&8?Ai(s,[Sl(u[34])]):{};if(!n&&f[0]&268435456&&(n=!0,h.hoverItemIndex=u[28],Ws(()=>n=!1)),o!==(o=u[24])){if(t){ke();const c=t;Q(c.$$.fragment,1,0,()=>{ve(c,1)}),Ie()}o?(t=Me(o,a(u)),De.push(()=>Zi(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),ge(t.$$.fragment),U(t.$$.fragment,1),pe(t,i.parentNode,i)):t=null}else o&&t.$set(h)},i(u){r||(t&&U(t.$$.fragment,u),r=!0)},o(u){t&&Q(t.$$.fragment,u),r=!1},d(u){u&&S(i),t&&ve(t,u)}}}function $r(e){let t,n,i;return{c(){t=Z("input"),this.h()},l(r){t=J(r,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=i=e[2]?e[12](e[2]):null,d(t,"class","svelte-17l1npl")},m(r,s){B(r,t,s)},p(r,s){s[0]&65536&&n!==(n=r[16].name)&&d(t,"name",n),s[0]&4100&&i!==(i=r[2]?r[12](r[2]):null)&&(t.value=i)},d(r){r&&S(t)}}}function el(e){let t,n=e[2],i=[];for(let r=0;r<n.length;r+=1)i[r]=tl(Xr(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=ne()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);t=ne()},m(r,s){for(let l=0;l<i.length;l+=1)i[l].m(r,s);B(r,t,s)},p(r,s){if(s[0]&69636){n=r[2];let l;for(l=0;l<n.length;l+=1){const o=Xr(r,n,l);i[l]?i[l].p(o,s):(i[l]=tl(o),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(r){Si(i,r),r&&S(t)}}}function tl(e){let t,n,i;return{c(){t=Z("input"),this.h()},l(r){t=J(r,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=i=e[103]?e[12](e[103]):null,d(t,"class","svelte-17l1npl")},m(r,s){B(r,t,s)},p(r,s){s[0]&65536&&n!==(n=r[16].name)&&d(t,"name",n),s[0]&4100&&i!==(i=r[103]?r[12](r[103]):null)&&(t.value=i)},d(r){r&&S(t)}}}function Oh(e){let t,n,i,r,s,l,o,a,u,f,h,c,_,y,m,v,k,A,w=e[1]&&jr(e),g=e[17]&&Ur(e),b=e[35]&&Yr(e),D=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],P={};for(let N=0;N<D.length;N+=1)P=Ei(P,D[N]);let F=!e[7]&&e[29]&&Wr(e),z=e[37]&&Kr(e),I=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&Zr(e),M=e[4]&&Jr(),E=e[5]&&Qr(e),C=(!e[7]||e[7]&&!e[35])&&$r(e),L=e[7]&&e[35]&&el(e);return{c(){t=Z("div"),n=Z("span"),w&&w.c(),i=le(),g&&g.c(),r=le(),b&&b.c(),s=le(),l=Z("input"),a=le(),F&&F.c(),u=le(),z&&z.c(),f=le(),I&&I.c(),h=le(),M&&M.c(),c=le(),E&&E.c(),_=le(),C&&C.c(),y=le(),L&&L.c(),this.h()},l(N){t=J(N,"DIV",{class:!0,style:!0});var T=R(t);n=J(T,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var x=R(n);w&&w.l(x),x.forEach(S),i=se(T),g&&g.l(T),r=se(T),b&&b.l(T),s=se(T),l=J(T,"INPUT",{placeholder:!0,style:!0}),a=se(T),F&&F.l(T),u=se(T),z&&z.l(T),f=se(T),I&&I.l(T),h=se(T),M&&M.l(T),c=se(T),E&&E.l(T),_=se(T),C&&C.l(T),y=se(T),L&&L.l(T),T.forEach(S),this.h()},h(){d(n,"aria-live","polite"),d(n,"aria-atomic","false"),d(n,"aria-relevant","additions text"),d(n,"class","a11yText svelte-17l1npl"),Wi(l,P),Re(l,"svelte-17l1npl",!0),d(t,"class",m="selectContainer "+e[21]+" svelte-17l1npl"),d(t,"style",e[11]),Re(t,"hasError",e[10]),Re(t,"multiSelect",e[7]),Re(t,"disabled",e[9]),Re(t,"focused",e[1])},m(N,T){B(N,t,T),H(t,n),w&&w.m(n,null),H(t,i),g&&g.m(t,null),H(t,r),b&&b.m(t,null),H(t,s),H(t,l),l.autofocus&&l.focus(),e[82](l),Ki(l,e[3]),H(t,a),F&&F.m(t,null),H(t,u),z&&z.m(t,null),H(t,f),I&&I.m(t,null),H(t,h),M&&M.m(t,null),H(t,c),E&&E.m(t,null),H(t,_),C&&C.m(t,null),H(t,y),L&&L.m(t,null),e[85](t),v=!0,k||(A=[ye(window,"click",e[41]),ye(window,"focusin",e[41]),ye(window,"keydown",e[39]),ye(l,"focus",e[40]),ye(l,"input",e[83]),ye(t,"click",e[42])],k=!0)},p(N,T){N[1]?w?w.p(N,T):(w=jr(N),w.c(),w.m(n,null)):w&&(w.d(1),w=null),N[17]?g?(g.p(N,T),T[0]&131072&&U(g,1)):(g=Ur(N),g.c(),U(g,1),g.m(t,r)):g&&(ke(),Q(g,1,1,()=>{g=null}),Ie()),N[35]?b?(b.p(N,T),T[1]&16&&U(b,1)):(b=Yr(N),b.c(),U(b,1),b.m(t,s)):b&&(ke(),Q(b,1,1,()=>{b=null}),Ie()),Wi(l,P=Ai(D,[(!v||T[0]&8192&&o!==(o=!N[13]))&&{readOnly:o},T[1]&1&&N[31],(!v||T[1]&32)&&{placeholder:N[36]},(!v||T[0]&16384)&&{style:N[14]},(!v||T[0]&512)&&{disabled:N[9]}])),T[0]&8&&l.value!==N[3]&&Ki(l,N[3]),Re(l,"svelte-17l1npl",!0),!N[7]&&N[29]?F?(F.p(N,T),T[0]&536871040&&U(F,1)):(F=Wr(N),F.c(),U(F,1),F.m(t,u)):F&&(ke(),Q(F,1,1,()=>{F=null}),Ie()),N[37]?z?(z.p(N,T),T[1]&64&&U(z,1)):(z=Kr(N),z.c(),U(z,1),z.m(t,f)):z&&(ke(),Q(z,1,1,()=>{z=null}),Ie()),!N[37]&&(N[20]||N[19]&&!N[2]||!N[13]&&!N[9]&&!N[4]&&(N[29]&&!N[15]||!N[29]))?I?I.p(N,T):(I=Zr(N),I.c(),I.m(t,h)):I&&(I.d(1),I=null),N[4]?M||(M=Jr(),M.c(),M.m(t,c)):M&&(M.d(1),M=null),N[5]?E?(E.p(N,T),T[0]&32&&U(E,1)):(E=Qr(N),E.c(),U(E,1),E.m(t,_)):E&&(ke(),Q(E,1,1,()=>{E=null}),Ie()),!N[7]||N[7]&&!N[35]?C?C.p(N,T):(C=$r(N),C.c(),C.m(t,y)):C&&(C.d(1),C=null),N[7]&&N[35]?L?L.p(N,T):(L=el(N),L.c(),L.m(t,null)):L&&(L.d(1),L=null),(!v||T[0]&2097152&&m!==(m="selectContainer "+N[21]+" svelte-17l1npl"))&&d(t,"class",m),(!v||T[0]&2048)&&d(t,"style",N[11]),(!v||T[0]&2098176)&&Re(t,"hasError",N[10]),(!v||T[0]&2097280)&&Re(t,"multiSelect",N[7]),(!v||T[0]&2097664)&&Re(t,"disabled",N[9]),(!v||T[0]&2097154)&&Re(t,"focused",N[1])},i(N){v||(U(g),U(b),U(F),U(z),U(E),v=!0)},o(N){Q(g),Q(b),Q(F),Q(z),Q(E),v=!1},d(N){N&&S(t),w&&w.d(),g&&g.d(),b&&b.d(),e[82](null),F&&F.d(),z&&z.d(),I&&I.d(),M&&M.d(),E&&E.d(),C&&C.d(),L&&L.d(),e[85](null),k=!1,vn(A)}}}function nl(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function Fh(e,t,n){let i,r,s,l,o,a,u,f;const h=Ii();let{id:c=null}=t,{container:_=void 0}=t,{input:y=void 0}=t,{isMulti:m=!1}=t,{multiFullItemClearable:v=!1}=t,{isDisabled:k=!1}=t,{isCreatable:A=!1}=t,{isFocused:w=!1}=t,{value:g=null}=t,{filterText:b=""}=t,{placeholder:D="Select..."}=t,{placeholderAlwaysShow:P=!1}=t,{items:F=null}=t,{itemFilter:z=(p,X,re)=>`${p}`.toLowerCase().includes(X.toLowerCase())}=t,{groupBy:I=void 0}=t,{groupFilter:M=p=>p}=t,{isGroupHeaderSelectable:E=!1}=t,{getGroupHeaderLabel:C=p=>p[L]||p.id}=t,{labelIdentifier:L="label"}=t,{getOptionLabel:N=(p,X)=>p.isCreator?`Create "${X}"`:p[L]}=t,{optionIdentifier:T="value"}=t,{loadOptions:x=void 0}=t,{hasError:G=!1}=t,{containerStyles:q=""}=t,{getSelectionLabel:ee=p=>p?p[L]:null}=t,{createGroupHeaderItem:te=p=>({value:p,label:p})}=t,{createItem:V=p=>({value:p,label:p})}=t;const $=()=>i;let{isSearchable:oe=!0}=t,{inputStyles:de=""}=t,{isClearable:_e=!0}=t,{isWaiting:ie=!1}=t,{listPlacement:O="auto"}=t,{listOpen:j=!1}=t,{isVirtualList:ae=!1}=t,{loadOptionsInterval:Se=300}=t,{noOptionsMessage:Ce="No options"}=t,{hideEmptyState:Ne=!1}=t,{inputAttributes:je={}}=t,{listAutoWidth:et=!0}=t,{itemHeight:tt=40}=t,{Icon:Y=void 0}=t,{iconProps:me={}}=t,{showChevron:nt=!1}=t,{showIndicator:Pe=!1}=t,{containerClasses:Pi=""}=t,{indicatorSvg:zi=void 0}=t,{listOffset:En=5}=t,{ClearIcon:Bi=Th}=t,{Item:An=_s}=t,{List:qi=ph}=t,{Selection:xi=wh}=t,{MultiSelection:Gi=Ih}=t,{VirtualList:Mn=Ch}=t;function gs(p){if(p.loadOptions&&p.filterText.length>0)return;if(!p.items)return[];p.items&&p.items.length>0&&typeof p.items[0]!="object"&&(p.items=nl(p.items));let X=p.items.filter(re=>{let He=z(N(re,p.filterText),p.filterText,re);return He&&p.isMulti&&p.value&&Array.isArray(p.value)&&(He=!p.value.some(lt=>lt[p.optionIdentifier]===re[p.optionIdentifier])),He});return p.groupBy&&(X=ws(X)),p.isCreatable&&(X=Xi(X,p.filterText)),X}function Xi(p,X){if(X.length===0)return p;const re=V(X);return p[0]&&X===p[0][L]?p:(re.isCreator=!0,[...p,re])}let{selectedValue:Cn=null}=t,ue,dt,Nn,Tn,Ln,Gt;const ps=Lh(async()=>{n(4,ie=!0);let p=await x(b).catch(X=>{console.warn("svelte-select loadOptions error :>> ",X),h("error",{type:"loadOptions",details:X})});p&&!p.cancelled&&(p?(p&&p.length>0&&typeof p[0]!="object"&&(p=nl(p)),n(81,i=[...p]),h("loaded",{items:i})):n(81,i=[]),A&&n(81,i=Xi(i,b)),n(4,ie=!1),n(1,w=!0),n(5,j=!0))},Se);function vs(){typeof g=="string"?n(2,g={[T]:g,label:g}):m&&Array.isArray(g)&&g.length>0&&n(2,g=g.map(p=>typeof p=="string"?{value:p,label:p}:p))}let _t;function ys(){n(31,_t=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},je)),c&&n(31,_t.id=c,_t),oe||n(31,_t.readonly=!0,_t)}function ws(p){const X=[],re={};p.forEach(lt=>{const Ze=I(lt);X.includes(Ze)||(X.push(Ze),re[Ze]=[],Ze&&re[Ze].push(Object.assign(te(Ze,lt),{id:Ze,isGroupHeader:!0,isSelectable:E}))),re[Ze].push(Object.assign({isGroupItem:!!Ze},lt))});const He=[];return M(X).forEach(lt=>{He.push(...re[lt])}),He}function bs(){if(m){JSON.stringify(g)!==JSON.stringify(dt)&&ji()&&h("select",g);return}(!dt||JSON.stringify(g[T])!==JSON.stringify(dt[T]))&&h("select",g)}function ks(){w||j?Dn():y&&y.blur()}function Is(){g&&(Array.isArray(g)?n(2,g=[...g]):n(2,g=[g]))}function Ss(){g&&n(2,g=null)}function Es(){b.length!==0&&(n(1,w=!0),n(5,j=!0),x?ps():(n(5,j=!0),m&&n(30,ue=void 0)))}Il(async()=>{n(77,dt=g),n(78,Nn=b),n(79,Tn=w),n(80,Ln=m)});function ji(){let p=!0;if(g){const X=[],re=[];g.forEach(He=>{X.includes(He[T])?p=!1:(X.push(He[T]),re.push(He))}),p||n(2,g=re)}return p}function Ui(p){let X=p?p[T]:g[T];return F.find(re=>re[T]===X)}function As(p){!p||p.length===0||p.some(X=>typeof X!="object")||!g||(m?g.some(X=>!X||!X[T]):!g[T])||(Array.isArray(g)?n(2,g=g.map(X=>Ui(X)||X)):n(2,g=Ui()||g))}function Yi(p){const{detail:X}=p,re=g[X?X.i:g.length-1];g.length===1?n(2,g=void 0):n(2,g=g.filter(He=>He!==re)),h("clear",re)}function Ms(p){if(!!w)switch(p.key){case"ArrowDown":p.preventDefault(),n(5,j=!0),n(30,ue=void 0);break;case"ArrowUp":p.preventDefault(),n(5,j=!0),n(30,ue=void 0);break;case"Tab":j||n(1,w=!1);break;case"Backspace":if(!m||b.length>0)return;if(m&&g&&g.length>0){if(Yi(ue!==void 0?ue:g.length-1),ue===0||ue===void 0)break;n(30,ue=g.length>ue?ue-1:void 0)}break;case"ArrowLeft":if(!m||b.length>0)return;ue===void 0?n(30,ue=g.length-1):g.length>ue&&ue!==0&&n(30,ue-=1);break;case"ArrowRight":if(!m||b.length>0||ue===void 0)return;ue===g.length-1?n(30,ue=void 0):ue<g.length-1&&n(30,ue+=1);break}}function Dn(){n(1,w=!0),y&&y.focus()}function Cs(p){if(!_)return;const X=p.path&&p.path.length>0?p.path[0]:p.target;_.contains(X)||_.contains(p.relatedTarget)||(n(1,w=!1),n(5,j=!1),n(30,ue=void 0),y&&y.blur())}function Ns(){k||(n(1,w=!0),n(5,j=!j))}function Ts(){n(2,g=void 0),n(5,j=!1),h("clear",g),Dn()}yn(()=>{w&&y&&y.focus()});function Ls(p){const{detail:X}=p;if(X){n(3,b="");const re=Object.assign({},X);(!re.isGroupHeader||re.isSelectable)&&(m?n(2,g=g?g.concat([re]):[re]):n(2,g=re),n(2,g),setTimeout(()=>{n(5,j=!1),n(30,ue=void 0)}))}}function Ds(p){const{detail:X}=p;m?(n(2,g=g||[]),n(2,g=[...g,V(X)])):n(2,g=V(X)),h("itemCreated",X),n(3,b=""),n(5,j=!1),n(30,ue=void 0)}function Vs(){n(3,b=""),n(5,j=!1)}let{ariaValues:Vn=p=>`Option ${p}, selected.`}=t,{ariaListOpen:On=(p,X)=>`You are currently focused on option ${p}. There are ${X} results available.`}=t,{ariaFocused:Fn=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function Os(){let p;return m&&g.length>0?p=g.map(X=>ee(X)).join(", "):p=ee(g),Vn(p)}function Fs(){if(!w||!i||i.length===0)return"";let p=i[Gt];if(j&&p){let X=ee(p),re=i?i.length:0;return On(X,re)}else return Fn()}function Hs(p){De[p?"unshift":"push"](()=>{y=p,n(6,y)})}function Rs(){b=this.value,n(3,b)}function Ps(p){Gt=p,n(28,Gt)}function zs(p){De[p?"unshift":"push"](()=>{_=p,n(0,_)})}return e.$$set=p=>{"id"in p&&n(46,c=p.id),"container"in p&&n(0,_=p.container),"input"in p&&n(6,y=p.input),"isMulti"in p&&n(7,m=p.isMulti),"multiFullItemClearable"in p&&n(8,v=p.multiFullItemClearable),"isDisabled"in p&&n(9,k=p.isDisabled),"isCreatable"in p&&n(47,A=p.isCreatable),"isFocused"in p&&n(1,w=p.isFocused),"value"in p&&n(2,g=p.value),"filterText"in p&&n(3,b=p.filterText),"placeholder"in p&&n(48,D=p.placeholder),"placeholderAlwaysShow"in p&&n(49,P=p.placeholderAlwaysShow),"items"in p&&n(50,F=p.items),"itemFilter"in p&&n(51,z=p.itemFilter),"groupBy"in p&&n(52,I=p.groupBy),"groupFilter"in p&&n(53,M=p.groupFilter),"isGroupHeaderSelectable"in p&&n(54,E=p.isGroupHeaderSelectable),"getGroupHeaderLabel"in p&&n(55,C=p.getGroupHeaderLabel),"labelIdentifier"in p&&n(56,L=p.labelIdentifier),"getOptionLabel"in p&&n(57,N=p.getOptionLabel),"optionIdentifier"in p&&n(58,T=p.optionIdentifier),"loadOptions"in p&&n(59,x=p.loadOptions),"hasError"in p&&n(10,G=p.hasError),"containerStyles"in p&&n(11,q=p.containerStyles),"getSelectionLabel"in p&&n(12,ee=p.getSelectionLabel),"createGroupHeaderItem"in p&&n(60,te=p.createGroupHeaderItem),"createItem"in p&&n(61,V=p.createItem),"isSearchable"in p&&n(13,oe=p.isSearchable),"inputStyles"in p&&n(14,de=p.inputStyles),"isClearable"in p&&n(15,_e=p.isClearable),"isWaiting"in p&&n(4,ie=p.isWaiting),"listPlacement"in p&&n(63,O=p.listPlacement),"listOpen"in p&&n(5,j=p.listOpen),"isVirtualList"in p&&n(64,ae=p.isVirtualList),"loadOptionsInterval"in p&&n(65,Se=p.loadOptionsInterval),"noOptionsMessage"in p&&n(66,Ce=p.noOptionsMessage),"hideEmptyState"in p&&n(67,Ne=p.hideEmptyState),"inputAttributes"in p&&n(16,je=p.inputAttributes),"listAutoWidth"in p&&n(68,et=p.listAutoWidth),"itemHeight"in p&&n(69,tt=p.itemHeight),"Icon"in p&&n(17,Y=p.Icon),"iconProps"in p&&n(18,me=p.iconProps),"showChevron"in p&&n(19,nt=p.showChevron),"showIndicator"in p&&n(20,Pe=p.showIndicator),"containerClasses"in p&&n(21,Pi=p.containerClasses),"indicatorSvg"in p&&n(22,zi=p.indicatorSvg),"listOffset"in p&&n(70,En=p.listOffset),"ClearIcon"in p&&n(23,Bi=p.ClearIcon),"Item"in p&&n(71,An=p.Item),"List"in p&&n(24,qi=p.List),"Selection"in p&&n(25,xi=p.Selection),"MultiSelection"in p&&n(26,Gi=p.MultiSelection),"VirtualList"in p&&n(72,Mn=p.VirtualList),"selectedValue"in p&&n(73,Cn=p.selectedValue),"ariaValues"in p&&n(74,Vn=p.ariaValues),"ariaListOpen"in p&&n(75,On=p.ariaListOpen),"ariaFocused"in p&&n(76,Fn=p.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,i=gs({loadOptions:x,filterText:b,items:F,value:g,isMulti:m,optionIdentifier:T,groupBy:I,isCreatable:A})),e.$$.dirty[2]&2048&&Cn&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&As(F),e.$$.dirty[0]&4&&g&&vs(),e.$$.dirty[0]&73728&&(je||!oe)&&ys(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(m&&Is(),Ln&&!m&&Ss()),e.$$.dirty[0]&132&&m&&g&&g.length>1&&ji(),e.$$.dirty[0]&4&&g&&bs(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!g&&m&&dt&&h("select",g),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&w!==Tn&&ks(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&b!==Nn&&Es(),e.$$.dirty[0]&12&&n(29,r=g&&b.length===0),e.$$.dirty[0]&536904208&&n(37,s=r&&_e&&!k&&!ie),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=P&&m?D:g?"":D),e.$$.dirty[0]&132&&n(35,o=m&&g&&g.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,a={Item:An,filterText:b,optionIdentifier:T,noOptionsMessage:Ce,hideEmptyState:Ne,isVirtualList:ae,VirtualList:Mn,value:g,isMulti:m,getGroupHeaderLabel:C,items:i,itemHeight:tt,getOptionLabel:N,listPlacement:O,parent:_,listAutoWidth:et,listOffset:En}),e.$$.dirty[0]&132&&n(33,u=g?Os():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,f=Fs())},[_,w,g,b,ie,j,y,m,v,k,G,q,ee,oe,de,_e,je,Y,me,nt,Pe,Pi,zi,Bi,qi,xi,Gi,Ts,Gt,r,ue,_t,f,u,a,o,l,s,Yi,Ms,Dn,Cs,Ns,Ls,Ds,Vs,c,A,D,P,F,z,I,M,E,C,L,N,T,x,te,V,$,O,ae,Se,Ce,Ne,et,tt,En,An,Mn,Cn,Vn,On,Fn,dt,Nn,Tn,Ln,i,Hs,Rs,Ps,zs]}class il extends qe{constructor(t){super(),xe(this,t,Fh,Oh,Ge,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function rl(e,t,n){const i=e.slice();return i[27]=t[n],i}function ll(e,t,n){const i=e.slice();return i[27]=t[n],i}function sl(e){let t,n,i;return{c(){t=W("rect"),this.h()},l(r){t=K(r,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),R(t).forEach(S),this.h()},h(){d(t,"class","timebar"),d(t,"x",n=e[10](e[14][0])-12),d(t,"y",35),d(t,"width","24"),d(t,"height",i=e[3]-35-rt),d(t,"fill","rgba(0,0,0,0.2)")},m(r,s){B(r,t,s)},p(r,s){s[0]&17408&&n!==(n=r[10](r[14][0])-12)&&d(t,"x",n),s[0]&8&&i!==(i=r[3]-35-rt)&&d(t,"height",i)},d(r){r&&S(t)}}}function al(e,t){let n,i,r,s,l,o;return{key:e,first:null,c(){n=W("circle"),this.h()},l(a){n=K(a,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0}),R(n).forEach(S),this.h()},h(){d(n,"class","circ1 svelte-wx1vup"),d(n,"cx",i=t[10](t[27].year)),d(n,"cy",r=t[9](t[27].export_value)),d(n,"r","5"),d(n,"fill",s=t[12](t[0])),this.first=n},m(a,u){B(a,n,u),l||(o=ye(n,"click",function(){El(t[15](t[27].year))&&t[15](t[27].year).apply(this,arguments)}),l=!0)},p(a,u){t=a,u[0]&3072&&i!==(i=t[10](t[27].year))&&d(n,"cx",i),u[0]&2560&&r!==(r=t[9](t[27].export_value))&&d(n,"cy",r),u[0]&4097&&s!==(s=t[12](t[0]))&&d(n,"fill",s)},d(a){a&&S(n),l=!1,o()}}}function ol(e,t){let n,i,r,s,l,o;return{key:e,first:null,c(){n=W("circle"),this.h()},l(a){n=K(a,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),R(n).forEach(S),this.h()},h(){d(n,"cx",i=t[10](t[27].year)),d(n,"cy",r=t[9](t[27].import_value)),d(n,"r","5"),d(n,"fill",s=t[12](t[1])),d(n,"class","svelte-wx1vup"),this.first=n},m(a,u){B(a,n,u),l||(o=ye(n,"click",function(){El(t[15](t[27].year))&&t[15](t[27].year).apply(this,arguments)}),l=!0)},p(a,u){t=a,u[0]&3072&&i!==(i=t[10](t[27].year))&&d(n,"cx",i),u[0]&2560&&r!==(r=t[9](t[27].import_value))&&d(n,"cy",r),u[0]&4098&&s!==(s=t[12](t[1]))&&d(n,"fill",s)},d(a){a&&S(n),l=!1,o()}}}function Hh(e){let t,n,i,r,s,l,o,a,u,f,h,c,_=[],y=new Map,m,v,k,A=[],w=new Map,g,b=!e[13]&&sl(e),D=e[11];const P=I=>I[27].year;for(let I=0;I<D.length;I+=1){let M=ll(e,D,I),E=P(M);y.set(E,_[I]=al(E,M))}let F=e[11];const z=I=>I[27].year;for(let I=0;I<F.length;I+=1){let M=rl(e,F,I),E=z(M);w.set(E,A[I]=ol(E,M))}return{c(){t=Z("div"),n=W("svg"),i=W("text"),r=fe("Total Trade Over Time"),l=W("g"),b&&b.c(),o=W("g"),u=W("g"),f=W("g"),h=W("path");for(let I=0;I<_.length;I+=1)_[I].c();m=W("g"),v=W("path");for(let I=0;I<A.length;I+=1)A[I].c();this.h()},l(I){t=J(I,"DIV",{id:!0,class:!0});var M=R(t);n=K(M,"svg",{width:!0,height:!0});var E=R(n);i=K(E,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var C=R(i);r=ce(C,"Total Trade Over Time"),C.forEach(S),l=K(E,"g",{class:!0}),R(l).forEach(S),b&&b.l(E),o=K(E,"g",{id:!0,transform:!0}),R(o).forEach(S),u=K(E,"g",{id:!0,transform:!0}),R(u).forEach(S),f=K(E,"g",{class:!0});var L=R(f);h=K(L,"path",{fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(S);for(let T=0;T<_.length;T+=1)_[T].l(L);L.forEach(S),m=K(E,"g",{class:!0});var N=R(m);v=K(N,"path",{fill:!0,stroke:!0,"stroke-width":!0}),R(v).forEach(S);for(let T=0;T<A.length;T+=1)A[T].l(N);N.forEach(S),E.forEach(S),M.forEach(S),this.h()},h(){d(i,"class","chart-header"),d(i,"x",s=e[2]/2),d(i,"y",rt-5),d(i,"text-anchor","middle"),d(l,"class","brush"),d(o,"id","xAxis"),d(o,"transform",a=`translate(${0},${e[3]-rt})`),d(u,"id","yAis"),d(u,"transform",`translate(${ms},${0})`),d(h,"fill","none"),d(h,"stroke",c=e[12](e[0])),d(h,"stroke-width","2"),d(f,"class","country1-group country-group svelte-wx1vup"),d(v,"fill","none"),d(v,"stroke",k=e[12](e[1])),d(v,"stroke-width","2"),d(m,"class","country2-group country-group svelte-wx1vup"),d(n,"width",e[2]),d(n,"height",e[3]),d(t,"id","line-chart"),d(t,"class","viz-section"),Bt(()=>e[25].call(t))},m(I,M){B(I,t,M),H(t,n),H(n,i),H(i,r),H(n,l),e[20](l),b&&b.m(n,null),H(n,o),e[21](o),H(n,u),e[22](u),H(n,f),H(f,h),e[23](h);for(let E=0;E<_.length;E+=1)_[E].m(f,null);H(n,m),H(m,v),e[24](v);for(let E=0;E<A.length;E+=1)A[E].m(m,null);g=wn(t,e[25].bind(t))},p(I,M){M[0]&4&&s!==(s=I[2]/2)&&d(i,"x",s),I[13]?b&&(b.d(1),b=null):b?b.p(I,M):(b=sl(I),b.c(),b.m(n,o)),M[0]&8&&a!==(a=`translate(${0},${I[3]-rt})`)&&d(o,"transform",a),M[0]&4097&&c!==(c=I[12](I[0]))&&d(h,"stroke",c),M[0]&40449&&(D=I[11],_=Ft(_,M,P,1,I,D,y,f,nn,al,null,ll)),M[0]&4098&&k!==(k=I[12](I[1]))&&d(v,"stroke",k),M[0]&40450&&(F=I[11],A=Ft(A,M,z,1,I,F,w,m,nn,ol,null,rl)),M[0]&4&&d(n,"width",I[2]),M[0]&8&&d(n,"height",I[3])},i:he,o:he,d(I){I&&S(t),e[20](null),b&&b.d(),e[21](null),e[22](null),e[23](null);for(let M=0;M<_.length;M+=1)_[M].d();e[24](null);for(let M=0;M<A.length;M+=1)A[M].d();g()}}}const rt=35,Rh=15,ms=50;function Ph(e,t,n){let i,r,s,l;Mi(e,bt,L=>n(14,l=L));let{data:o}=t,{bilateralData:a,locationData:u,productData:f,country1_id:h,country2_id:c,countryColorScale:_}=o,y=800,m=400;const v=L=>At("$.2s")(L).replace(/G/,"B");let k,A,w,g,b,D=!1;function P(L){return()=>bt.set([L])}function F(L){De[L?"unshift":"push"](()=>{w=L,n(6,w)})}function z(L){De[L?"unshift":"push"](()=>{k=L,n(4,k)})}function I(L){De[L?"unshift":"push"](()=>{A=L,n(5,A)})}function M(L){De[L?"unshift":"push"](()=>{g=L,n(7,g)})}function E(L){De[L?"unshift":"push"](()=>{b=L,n(8,b)})}function C(){y=this.clientWidth,m=this.clientHeight,n(2,y),n(3,m)}return e.$$set=L=>{"data"in L&&n(16,o=L.data)},e.$$.update=()=>{var L,N,T,x;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:a,locationData:u,productData:f,country1_id:h,country2_id:c,countryColorScale:_}=o,a,(n(18,u),n(16,o)),(n(19,f),n(16,o)),(n(0,h),n(16,o)),(n(1,c),n(16,o)),(n(12,_),n(16,o))),e.$$.dirty[0]&917507&&n(11,i=Array.from((T=(N=(L=a==null?void 0:a.get(h))==null?void 0:L.get(c))==null?void 0:N.entries())!=null?T:new Array).map(G=>{let q=G[0];return G[1].reduce((te,V)=>(te.export_value+=V.export_value,te.import_value+=V.import_value,te),new ut(u,f,{location_id:h,partner_id:c,product_id:0,year:q,export_value:0,import_value:0}))}).sort((G,q)=>G.year-q.year)),e.$$.dirty[0]&2052&&n(10,s=mn().domain(Ml(i,G=>G.year)).range([ms,y-rt])),e.$$.dirty[0]&1088){let G=Qf().on("start brush end",q=>{if((q==null?void 0:q.selection)===null||(q==null?void 0:q.selection[1])-(q==null?void 0:q.selection[0])<5)bt.set([2020]),n(13,D=!1);else{n(13,D=!0);let ee=q.selection;const te=ee[0],V=ee[1];let $=Math.ceil(s.invert(te)),oe=Math.floor(s.invert(V)),de=[];for(let _e=$;_e<=oe;_e++)de.push(_e);bt.set(de)}});Oe(w).call(G)}if(e.$$.dirty[0]&2048&&console.log(i),e.$$.dirty[0]&2056&&n(9,r=mn().domain([0,(x=ni(i,G=>Math.max(G.export_value,G.import_value)))!=null?x:0]).range([m-rt,rt+Rh])),e.$$.dirty[0]&1584){let G=Ll(s).tickFormat(At("d"));Oe(k).transition().call(G);let q=ya(r).tickFormat(ee=>v(ee));Oe(A).transition().call(q)}if(e.$$.dirty[0]&3712){let G=pi();i.length>0&&(i.sort(q=>q.year),G.moveTo(s(i[0].year),r(i[0].export_value))),i.forEach(q=>{G.lineTo(s(q.year),r(q.export_value))}),Oe(g).transition().attr("d",G.toString())}if(e.$$.dirty[0]&3840){let G=pi();i.length>0&&G.moveTo(s(i[0].year),r(i[0].import_value)),i.forEach(q=>{G.lineTo(s(q.year),r(q.import_value))}),Oe(b).transition().attr("d",G.toString())}},[h,c,y,m,k,A,w,g,b,r,s,i,_,D,l,P,o,a,u,f,F,z,I,M,E,C]}class zh extends qe{constructor(t){super(),xe(this,t,Ph,Hh,Ge,{data:16},null,[-1,-1])}}function Bh(e,{delay:t=0,duration:n=400,easing:i=Js}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*r}`}}function ul(e,t,n){const i=e.slice();return i[24]=t[n],i[26]=n,i}function qh(e){let t,n,i,r,s;return{c(){t=W("text"),n=fe("No valid data for this pair."),this.h()},l(l){t=K(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=R(t);n=ce(o,"No valid data for this pair."),o.forEach(S),this.h()},h(){d(t,"x",i=e[2]/2),d(t,"y",r=e[8]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){B(l,t,o),H(t,n)},p(l,o){o&4&&i!==(i=l[2]/2)&&d(t,"x",i),o&256&&r!==(r=l[8]/2)&&d(t,"y",r)},i(l){s||Bt(()=>{s=Qs(t,Bh,{}),s.start()})},o:he,d(l){l&&S(t)}}}function xh(e){var I,M;let t,n,i,r,s,l,o,a=((I=e[0])==null?void 0:I.name)+"",u,f,h,c=((M=e[1])==null?void 0:M.name)+"",_,y,m,v=[],k=new Map,A,w,g,b,D,P,F=e[9];const z=E=>E[24].product.name;for(let E=0;E<F.length;E+=1){let C=ul(e,F,E),L=z(C);k.set(L,v[E]=cl(L,C))}return{c(){t=W("text"),n=fe(`Sector
      `),i=W("text"),r=fe(`Trade Flow
      `),l=W("text"),o=fe("From "),u=fe(a),f=W("text"),h=fe("From "),_=fe(c),m=W("g");for(let E=0;E<v.length;E+=1)v[E].c();A=W("line"),b=W("line"),P=W("g"),this.h()},l(E){t=K(E,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var C=R(t);n=ce(C,`Sector
      `),C.forEach(S),i=K(E,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var L=R(i);r=ce(L,`Trade Flow
      `),L.forEach(S),l=K(E,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var N=R(l);o=ce(N,"From "),u=ce(N,a),N.forEach(S),f=K(E,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var T=R(f);h=ce(T,"From "),_=ce(T,c),T.forEach(S),m=K(E,"g",{id:!0,transform:!0});var x=R(m);for(let G=0;G<v.length;G+=1)v[G].l(x);A=K(x,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),R(A).forEach(S),b=K(x,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),R(b).forEach(S),P=K(x,"g",{id:!0}),R(P).forEach(S),x.forEach(S),this.h()},h(){var E,C,L,N;d(t,"text-anchor","start"),d(t,"class","chart-header"),d(t,"x",15),d(t,"y",Lt/2),d(t,"alignment-baseline","hanging"),d(i,"text-anchor","middle"),d(i,"class","chart-header"),d(i,"x",s=(e[2]-it)/2+it),d(i,"y",Lt/2-7),d(i,"alignment-baseline","hanging"),d(l,"class","from-label"),d(l,"x",it+20),d(l,"y",Lt/2-5),d(l,"alignment-baseline","hanging"),d(l,"font-size","13"),d(f,"class","from-label"),d(f,"x",y=e[2]-20),d(f,"y",Lt/2-5),d(f,"text-anchor","end"),d(f,"alignment-baseline","hanging"),d(f,"font-size","13"),d(A,"id","midline"),d(A,"transform",w=`translate(${e[4](0)},0)`),d(A,"y1",20),d(A,"y2",g=(((C=(E=e[9])==null?void 0:E.length)!=null?C:0)+1)*be),d(A,"stroke","rgba(0,0,0,0.7)"),d(A,"stroke-width","1"),d(A,"class","svelte-g5tcaj"),d(b,"x1",it),d(b,"y1",0),d(b,"x2",it),d(b,"y2",D=(((N=(L=e[9])==null?void 0:L.length)!=null?N:0)+1)*be),d(b,"stroke","rgba(0,0,0,0.1)"),d(b,"stroke-width","1"),d(P,"id","axis"),d(m,"id","bar-content"),d(m,"transform",`translate(${0},${Lt})`)},m(E,C){B(E,t,C),H(t,n),B(E,i,C),H(i,r),B(E,l,C),H(l,o),H(l,u),B(E,f,C),H(f,h),H(f,_),B(E,m,C);for(let L=0;L<v.length;L+=1)v[L].m(m,null);H(m,A),H(m,b),H(m,P),e[20](P)},p(E,C){var L,N,T,x,G,q;C&4&&s!==(s=(E[2]-it)/2+it)&&d(i,"x",s),C&1&&a!==(a=((L=E[0])==null?void 0:L.name)+"")&&We(u,a),C&2&&c!==(c=((N=E[1])==null?void 0:N.name)+"")&&We(_,c),C&4&&y!==(y=E[2]-20)&&d(f,"x",y),C&628&&(F=E[9],v=Ft(v,C,z,1,E,F,k,m,nn,cl,A,ul)),C&16&&w!==(w=`translate(${E[4](0)},0)`)&&d(A,"transform",w),C&512&&g!==(g=(((x=(T=E[9])==null?void 0:T.length)!=null?x:0)+1)*be)&&d(A,"y2",g),C&512&&D!==(D=(((q=(G=E[9])==null?void 0:G.length)!=null?q:0)+1)*be)&&d(b,"y2",D)},i:he,o:he,d(E){E&&S(t),E&&S(i),E&&S(l),E&&S(f),E&&S(m);for(let C=0;C<v.length;C+=1)v[C].d();e[20](null)}}}function fl(e){let t,n;return{c(){t=W("rect"),this.h()},l(i){t=K(i,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),R(t).forEach(S),this.h()},h(){d(t,"x","0"),d(t,"y",n=e[26]*be+Ue),d(t,"height",be),d(t,"width",e[2]),d(t,"fill","rgba(0,0,0,0.04)"),d(t,"class","svelte-g5tcaj")},m(i,r){B(i,t,r)},p(i,r){r&512&&n!==(n=i[26]*be+Ue)&&d(t,"y",n),r&4&&d(t,"width",i[2])},d(i){i&&S(t)}}}function cl(e,t){let n,i,r,s,l,o=t[24].product.name+"",a,u,f,h,c,_,y,m,v,k,A,w,g=t[26]%2==0&&fl(t);return{key:e,first:null,c(){n=W("g"),i=W("rect"),g&&g.c(),l=W("text"),a=fe(o),f=W("rect"),m=W("rect"),this.h()},l(b){n=K(b,"g",{});var D=R(n);i=K(D,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),R(i).forEach(S),g&&g.l(D),l=K(D,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var P=R(l);a=ce(P,o),P.forEach(S),f=K(D,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),R(f).forEach(S),m=K(D,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),R(m).forEach(S),D.forEach(S),this.h()},h(){d(i,"x","0"),d(i,"y",r=t[26]*be+Ue+2),d(i,"height",be-4),d(i,"width","6"),d(i,"fill",s=t[5]?t[5](t[24].product.name):"white"),d(i,"class","svelte-g5tcaj"),d(l,"class","product-text"),d(l,"alignment-baseline","hanging"),d(l,"x",10),d(l,"y",u=t[26]*be+Ue+5),d(f,"class","country1-bar svelte-g5tcaj"),d(f,"x",h=t[4](-t[24].export_value)),d(f,"y",c=t[26]*be+Ue+vt/2),d(f,"height",be-vt),d(f,"width",_=t[4](0)-t[4](-t[24].export_value)),d(f,"fill",y=t[6](t[24].location_id)),d(m,"class","country2-bar svelte-g5tcaj"),d(m,"x",v=t[4](0)),d(m,"y",k=t[26]*be+Ue+vt/2),d(m,"height",be-vt),d(m,"width",A=t[4](t[24].import_value)-t[4](0)),d(m,"fill",w=t[6](t[24].partner_id)),this.first=n},m(b,D){B(b,n,D),H(n,i),g&&g.m(n,null),H(n,l),H(l,a),H(n,f),H(n,m)},p(b,D){t=b,D&512&&r!==(r=t[26]*be+Ue+2)&&d(i,"y",r),D&544&&s!==(s=t[5]?t[5](t[24].product.name):"white")&&d(i,"fill",s),t[26]%2==0?g?g.p(t,D):(g=fl(t),g.c(),g.m(n,l)):g&&(g.d(1),g=null),D&512&&o!==(o=t[24].product.name+"")&&We(a,o),D&512&&u!==(u=t[26]*be+Ue+5)&&d(l,"y",u),D&528&&h!==(h=t[4](-t[24].export_value))&&d(f,"x",h),D&512&&c!==(c=t[26]*be+Ue+vt/2)&&d(f,"y",c),D&528&&_!==(_=t[4](0)-t[4](-t[24].export_value))&&d(f,"width",_),D&576&&y!==(y=t[6](t[24].location_id))&&d(f,"fill",y),D&16&&v!==(v=t[4](0))&&d(m,"x",v),D&512&&k!==(k=t[26]*be+Ue+vt/2)&&d(m,"y",k),D&528&&A!==(A=t[4](t[24].import_value)-t[4](0))&&d(m,"width",A),D&576&&w!==(w=t[6](t[24].partner_id))&&d(m,"fill",w)},d(b){b&&S(n),g&&g.d()}}}function hl(e){let t,n,i,r,s;return{c(){t=W("rect"),n=W("text"),i=fe("Loading..."),this.h()},l(l){t=K(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),R(t).forEach(S),n=K(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=R(n);i=ce(o,"Loading..."),o.forEach(S),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[2]),d(t,"height",e[8]),d(t,"fill","rgba(255,255,255,0.9)"),d(t,"class","svelte-g5tcaj"),d(n,"x",r=e[2]/2),d(n,"y",s=e[8]/2),d(n,"alignment-baseline","central"),d(n,"text-anchor","middle")},m(l,o){B(l,t,o),B(l,n,o),H(n,i)},p(l,o){o&4&&d(t,"width",l[2]),o&256&&d(t,"height",l[8]),o&4&&r!==(r=l[2]/2)&&d(n,"x",r),o&256&&s!==(s=l[8]/2)&&d(n,"y",s)},d(l){l&&S(t),l&&S(n)}}}function Gh(e){let t,n,i,r;function s(u,f){return u[9]&&u[9].length>0?xh:qh}let l=s(e),o=l(e),a=e[7]&&hl(e);return{c(){t=Z("div"),n=W("svg"),o.c(),i=ne(),a&&a.c(),this.h()},l(u){t=J(u,"DIV",{id:!0,class:!0});var f=R(t);n=K(f,"svg",{class:!0});var h=R(n);o.l(h),i=ne(),a&&a.l(h),h.forEach(S),f.forEach(S),this.h()},h(){d(n,"class","svelte-g5tcaj"),d(t,"id","bar-chart"),d(t,"class","viz-section svelte-g5tcaj"),Bt(()=>e[21].call(t))},m(u,f){B(u,t,f),H(t,n),o.m(n,null),H(n,i),a&&a.m(n,null),r=wn(t,e[21].bind(t))},p(u,[f]){l===(l=s(u))&&o?o.p(u,f):(o.d(1),o=l(u),o&&(o.c(),U(o,1),o.m(n,i))),u[7]?a?a.p(u,f):(a=hl(u),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i(u){U(o)},o:he,d(u){u&&S(t),o.d(),a&&a.d(),r()}}}const Lt=40,be=30,dl=0,Xh=10,Ue=30,it=100,vt=4;function jh(e,t,n){let i,r,s,l,o,a,u,f;Mi(e,bt,I=>n(19,f=I));let{data:h}=t,{bilateralData:c,productColorScale:_,countryColorScale:y,country1:m,country2:v,loadingDrilldown:k,productData:A,locationData:w}=h,g=800,b=500,D;const P=I=>At("$.2s")(I).replace(/G/,"B");function F(I){De[I?"unshift":"push"](()=>{D=I,n(3,D)})}function z(){g=this.clientWidth,b=this.clientHeight,n(2,g),n(8,b)}return e.$$set=I=>{"data"in I&&n(10,h=I.data)},e.$$.update=()=>{var I,M,E;if(e.$$.dirty&1024&&n(11,{bilateralData:c,productColorScale:_,countryColorScale:y,country1:m,country2:v,loadingDrilldown:k,productData:A,locationData:w}=h,c,(n(5,_),n(10,h)),(n(6,y),n(10,h)),(n(0,m),n(10,h)),(n(1,v),n(10,h)),(n(7,k),n(10,h)),(n(12,A),n(10,h)),(n(13,w),n(10,h))),e.$$.dirty&2051&&n(18,i=(E=c==null?void 0:c.get((I=m==null?void 0:m.id)!=null?I:0))==null?void 0:E.get((M=v==null?void 0:v.id)!=null?M:0)),e.$$.dirty&786432&&n(17,r=f.map(C=>{var L;return(L=i==null?void 0:i.get(C))!=null?L:new Array}).flat()),e.$$.dirty&143363&&n(16,s=Array.from(Cl(r,C=>{var L,N;return C.reduce((T,x)=>(T.export_value+=x.export_value,T.import_value+=x.import_value,T),new ut(w,A,{location_id:(L=m==null?void 0:m.id)!=null?L:0,partner_id:(N=v==null?void 0:v.id)!=null?N:0,product_id:C[0].product_id,year:0,export_value:0,import_value:0}))},C=>C.product_id).values())),e.$$.dirty&65536&&n(9,l=s.filter(C=>C.product.level=="section")),e.$$.dirty&65536&&n(15,o=ni(s,C=>C.export_value)),e.$$.dirty&65536&&n(14,a=ni(s,C=>C.import_value)),e.$$.dirty&49152,e.$$.dirty&49156&&n(4,u=mn().domain([-o,a]).range([it+dl,g-dl-Xh])),e.$$.dirty&24){let C=Ll(u).tickFormat(L=>P(Math.abs(L)));Oe(D).transition().call(C)}},[m,v,g,D,u,_,y,k,b,l,h,c,A,w,a,o,s,r,i,f,F,z]}class Uh extends qe{constructor(t){super(),xe(this,t,jh,Gh,Ge,{data:10})}}const{Map:Yh}=$s;function _l(e,t,n){const i=e.slice();return i[20]=t[n],i}function ml(e){let t,n,i,r,s,l,o,a=e[20].x1-e[20].x0>40&&e[20].y1-e[20].y0>10&&gl(e),u=e[20].x1-e[20].x0>40&&e[20].y1-e[20].y0>30&&pl(e);return{c(){t=W("rect"),a&&a.c(),l=ne(),u&&u.c(),o=ne(),this.h()},l(f){t=K(f,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),R(t).forEach(S),a&&a.l(f),l=ne(),u&&u.l(f),o=ne(),this.h()},h(){var f,h,c,_;d(t,"class","leaf svelte-sixlpg"),d(t,"transform",n=`translate(${e[20].x0},${e[20].y0})`),d(t,"width",i=e[20].x1-e[20].x0),d(t,"height",r=e[20].y1-e[20].y0),d(t,"fill",s=e[5]?e[5]((_=(c=(h=(f=e[20].data)==null?void 0:f.product)==null?void 0:h.parent)==null?void 0:c.name)!=null?_:""):"white")},m(f,h){B(f,t,h),a&&a.m(f,h),B(f,l,h),u&&u.m(f,h),B(f,o,h)},p(f,h){var c,_,y,m;h&256&&n!==(n=`translate(${f[20].x0},${f[20].y0})`)&&d(t,"transform",n),h&256&&i!==(i=f[20].x1-f[20].x0)&&d(t,"width",i),h&256&&r!==(r=f[20].y1-f[20].y0)&&d(t,"height",r),h&288&&s!==(s=f[5]?f[5]((m=(y=(_=(c=f[20].data)==null?void 0:c.product)==null?void 0:_.parent)==null?void 0:y.name)!=null?m:""):"white")&&d(t,"fill",s),f[20].x1-f[20].x0>40&&f[20].y1-f[20].y0>10?a?a.p(f,h):(a=gl(f),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),f[20].x1-f[20].x0>40&&f[20].y1-f[20].y0>30?u?u.p(f,h):(u=pl(f),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},d(f){f&&S(t),a&&a.d(f),f&&S(l),u&&u.d(f),f&&S(o)}}}function gl(e){var l,o,a;let t,n=((a=(o=(l=e[20].data)==null?void 0:l.product.name)==null?void 0:o.substring(0,40))!=null?a:"")+"",i,r,s;return{c(){t=W("text"),i=fe(n),this.h()},l(u){t=K(u,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var f=R(t);i=ce(f,n),f.forEach(S),this.h()},h(){d(t,"class","label svelte-sixlpg"),d(t,"transform",r=`translate(${e[20].x0+3},${e[20].y0+3})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",s=Math.max((e[20].x1-e[20].x0)/15,8))},m(u,f){B(u,t,f),H(t,i)},p(u,f){var h,c,_;f&256&&n!==(n=((_=(c=(h=u[20].data)==null?void 0:h.product.name)==null?void 0:c.substring(0,40))!=null?_:"")+"")&&We(i,n),f&256&&r!==(r=`translate(${u[20].x0+3},${u[20].y0+3})`)&&d(t,"transform",r),f&256&&s!==(s=Math.max((u[20].x1-u[20].x0)/15,8))&&d(t,"font-size",s)},d(u){u&&S(t)}}}function pl(e){let t,n=e[9](e[0]==="export_value"?e[20].data.export_value:e[20].data.import_value)+"",i,r,s;return{c(){t=W("text"),i=fe(n),this.h()},l(l){t=K(l,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var o=R(t);i=ce(o,n),o.forEach(S),this.h()},h(){d(t,"class","label-num svelte-sixlpg"),d(t,"transform",r=`translate(${e[20].x0+5},${e[20].y0+1+Math.max((e[20].x1-e[20].x0)/10,8)})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",s=Math.max((e[20].x1-e[20].x0)/15,8)-1),d(t,"font-weight","300")},m(l,o){B(l,t,o),H(t,i)},p(l,o){o&257&&n!==(n=l[9](l[0]==="export_value"?l[20].data.export_value:l[20].data.import_value)+"")&&We(i,n),o&256&&r!==(r=`translate(${l[20].x0+5},${l[20].y0+1+Math.max((l[20].x1-l[20].x0)/10,8)})`)&&d(t,"transform",r),o&256&&s!==(s=Math.max((l[20].x1-l[20].x0)/15,8)-1)&&d(t,"font-size",s)},d(l){l&&S(t)}}}function vl(e,t){let n,i,r=t[4].length>0&&t[20].x1!=NaN&&t[20].x0!=NaN&&t[20].y0!=NaN&&t[20].y1!=NaN&&ml(t);return{key:e,first:null,c(){n=ne(),r&&r.c(),i=ne(),this.h()},l(s){n=ne(),r&&r.l(s),i=ne(),this.h()},h(){this.first=n},m(s,l){B(s,n,l),r&&r.m(s,l),B(s,i,l)},p(s,l){t=s,t[4].length>0&&t[20].x1!=NaN&&t[20].x0!=NaN&&t[20].y0!=NaN&&t[20].y1!=NaN?r?r.p(t,l):(r=ml(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&S(n),r&&r.d(s),s&&S(i)}}}function yl(e){let t,n,i,r=e[6]?"Loading...":"No Data",s,l,o;return{c(){t=W("rect"),i=W("text"),s=fe(r),this.h()},l(a){t=K(a,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(t).forEach(S),i=K(a,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=R(i);s=ce(u,r),u.forEach(S),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[1]),d(t,"height",e[2]),d(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),d(i,"x",l=e[1]/2),d(i,"y",o=e[2]/2),d(i,"alignment-baseline","central"),d(i,"text-anchor","middle")},m(a,u){B(a,t,u),B(a,i,u),H(i,s)},p(a,u){u&2&&d(t,"width",a[1]),u&4&&d(t,"height",a[2]),u&64&&n!==(n=a[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&d(t,"fill",n),u&64&&r!==(r=a[6]?"Loading...":"No Data")&&We(s,r),u&2&&l!==(l=a[1]/2)&&d(i,"x",l),u&4&&o!==(o=a[2]/2)&&d(i,"y",o)},d(a){a&&S(t),a&&S(i)}}}function Wh(e){var f,h;let t,n,i,r=[],s=new Yh,l,o=e[8];const a=c=>c[20].data.product_id;for(let c=0;c<o.length;c+=1){let _=_l(e,o,c),y=a(_);s.set(y,r[c]=vl(y,_))}let u=((h=(f=e[3])==null?void 0:f.length)!=null?h:0)===0&&yl(e);return{c(){t=Z("div"),n=W("svg"),i=W("g");for(let c=0;c<r.length;c+=1)r[c].c();u&&u.c(),this.h()},l(c){t=J(c,"DIV",{class:!0});var _=R(t);n=K(_,"svg",{class:!0});var y=R(n);i=K(y,"g",{class:!0});var m=R(i);for(let v=0;v<r.length;v+=1)r[v].l(m);m.forEach(S),u&&u.l(y),y.forEach(S),_.forEach(S),this.h()},h(){d(i,"class","treemap svelte-sixlpg"),d(n,"class","svelte-sixlpg"),d(t,"class","viz-section"),Bt(()=>e[19].call(t))},m(c,_){B(c,t,_),H(t,n),H(n,i);for(let y=0;y<r.length;y+=1)r[y].m(i,null);e[18](i),u&&u.m(n,null),l=wn(t,e[19].bind(t))},p(c,[_]){var y,m;_&817&&(o=c[8],r=Ft(r,_,a,1,c,o,s,i,nn,vl,null,_l)),((m=(y=c[3])==null?void 0:y.length)!=null?m:0)===0?u?u.p(c,_):(u=yl(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i:he,o:he,d(c){c&&S(t);for(let _=0;_<r.length;_+=1)r[_].d();e[18](null),u&&u.d(),l()}}}function Kh(e,t,n){let i,r,s,l;Mi(e,bt,P=>n(4,l=P));const o=P=>At("$.2s")(P).replace(/G/,"B");let{data:a}=t,{country1:u,country2:f,valueField:h,productColorScale:c,drilldownBilateral:_,loadingDrilldown:y,locationData:m,productData:v}=a,k=0,A=0,w,g=new Array;function b(P){De[P?"unshift":"push"](()=>{w=P,n(7,w)})}function D(){k=this.clientWidth,A=this.clientHeight,n(1,k),n(2,A)}return e.$$set=P=>{"data"in P&&n(10,a=P.data)},e.$$.update=()=>{var P;if(e.$$.dirty&1024&&n(13,{drilldownBilateral:_,valueField:h,productColorScale:c,country1:u,country2:f,loadingDrilldown:y,locationData:m,productData:v}=a,_,(n(0,h),n(10,a)),(n(5,c),n(10,a)),(n(11,u),n(10,a)),(n(12,f),n(10,a)),(n(6,y),n(10,a)),(n(14,m),n(10,a)),(n(15,v),n(10,a))),e.$$.dirty&12288&&n(17,i=_==null?void 0:_.get((P=f==null?void 0:f.id)!=null?P:0)),e.$$.dirty&131088&&n(16,r=l.map(F=>{var z;return(z=i==null?void 0:i.get(F))!=null?z:new Array}).flat()),e.$$.dirty&120832&&n(3,s=Array.from(Cl(r,F=>F.reduce((z,I)=>(z.export_value+=I.export_value,z.import_value+=I.import_value,z),new ut(m,v,{location_id:u,partner_id:f,product_id:F[0].product_id,year:0,export_value:0,import_value:0})),F=>F.product_id).values())),e.$$.dirty&6159&&s&&s.length>0){let F=new ut(new Map,new Map,{location_id:u,partner_id:f,product_id:-1,year:0,export_value:0,import_value:0});F.product=new bi({product_id:-1,name:"All",level:-1,parent_id:-1}),F.product.parent_id=null;let z=[F],I=Qn(s,M=>{var E,C;return(C=(E=M.product)==null?void 0:E.parent_id)!=null?C:-1});if(I.size>1){for(let[E,C]of I){let L=new ut(new Map,new Map,{location_id:u,partner_id:f,product_id:E,year:0,export_value:0,import_value:0});L.product=new bi({product_id:E,name:"Something",level:0,parent_id:-1}),z.push(L)}z=z.concat(s);let M=Xc().id(E=>{var C;return(C=E.product)==null?void 0:C.id}).parentId(E=>{var C;return(C=E.product)==null?void 0:C.parent_id})(z);M.sum(E=>Math.max(0,E[h])),Yc().tile(Wc).size([k,A]).padding(2)(M),n(8,g=M.leaves())}}},[h,k,A,s,l,c,y,w,g,o,a,u,f,_,m,v,r,i,b,D]}class wl extends qe{constructor(t){super(),xe(this,t,Kh,Wh,Ge,{data:10})}}function Zh(e){let t,n,i,r,s,l;return{c(){t=Z("div"),n=Z("h3"),i=fe("Loading data..."),r=le(),s=W("svg"),l=W("circle"),this.h()},l(o){t=J(o,"DIV",{class:!0});var a=R(t);n=J(a,"H3",{});var u=R(n);i=ce(u,"Loading data..."),u.forEach(S),r=se(a),s=K(a,"svg",{class:!0,viewBox:!0});var f=R(s);l=K(f,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),R(l).forEach(S),f.forEach(S),a.forEach(S),this.h()},h(){d(l,"class","path svelte-jcbfjt"),d(l,"cx","25"),d(l,"cy","25"),d(l,"r","20"),d(l,"fill","none"),d(l,"stroke-width","5"),d(s,"class","spinner svelte-jcbfjt"),d(s,"viewBox","0 0 50 50"),d(t,"class","loading svelte-jcbfjt")},m(o,a){B(o,t,a),H(t,n),H(n,i),H(t,r),H(t,s),H(s,l)},p:he,i:he,o:he,d(o){o&&S(t)}}}function Jh(e){var G,q,ee,te;let t,n,i,r,s,l,o,a,u,f,h,c,_,y,m,v,k,A,w,g,b,D,P,F,z,I,M,E,C,L,N,T,x;return u=new il({props:{optionIdentifier:bl,labelIdentifier:kl,items:Array.from(e[0].values()),value:e[2]}}),u.$on("select",e[9]),m=new il({props:{optionIdentifier:bl,labelIdentifier:kl,items:Array.from(e[0].values()),value:e[8]}}),m.$on("select",e[10]),z=new zh({props:{data:{bilateralData:e[5],country1_id:(q=(G=e[2])==null?void 0:G.id)!=null?q:0,country2_id:(te=(ee=e[8])==null?void 0:ee.id)!=null?te:0,productData:e[1],locationData:e[0],countryColorScale:e[3]}}}),M=new Uh({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[5],loadingDrilldown:e[7],productColorScale:e[4],country1:e[2],country2:e[8],countryColorScale:e[3]}}}),L=new wl({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7],valueField:"export_value"}}}),T=new wl({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7],valueField:"import_value"}}}),{c(){t=Z("div"),n=Z("div"),r=le(),s=Z("div"),l=Z("span"),o=fe("Country 1"),a=le(),ge(u.$$.fragment),f=le(),h=Z("div"),c=Z("span"),_=fe("Country 2"),y=le(),ge(m.$$.fragment),v=le(),k=Z("div"),w=le(),g=Z("div"),b=le(),D=Z("div"),P=Z("div"),F=Z("div"),ge(z.$$.fragment),I=le(),ge(M.$$.fragment),E=le(),C=Z("div"),ge(L.$$.fragment),N=le(),ge(T.$$.fragment),this.h()},l(V){t=J(V,"DIV",{class:!0});var $=R(t);n=J($,"DIV",{class:!0,style:!0}),R(n).forEach(S),r=se($),s=J($,"DIV",{class:!0});var oe=R(s);l=J(oe,"SPAN",{class:!0});var de=R(l);o=ce(de,"Country 1"),de.forEach(S),a=se(oe),Le(u.$$.fragment,oe),oe.forEach(S),f=se($),h=J($,"DIV",{class:!0});var _e=R(h);c=J(_e,"SPAN",{class:!0});var ie=R(c);_=ce(ie,"Country 2"),ie.forEach(S),y=se(_e),Le(m.$$.fragment,_e),_e.forEach(S),v=se($),k=J($,"DIV",{class:!0,style:!0}),R(k).forEach(S),$.forEach(S),w=se(V),g=J(V,"DIV",{class:!0});var O=R(g);O.forEach(S),b=se(V),D=J(V,"DIV",{id:!0,class:!0});var j=R(D);P=J(j,"DIV",{id:!0,class:!0});var ae=R(P);F=J(ae,"DIV",{class:!0});var Se=R(F);Le(z.$$.fragment,Se),I=se(Se),Le(M.$$.fragment,Se),Se.forEach(S),E=se(ae),C=J(ae,"DIV",{class:!0});var Ce=R(C);Le(L.$$.fragment,Ce),N=se(Ce),Le(T.$$.fragment,Ce),Ce.forEach(S),ae.forEach(S),j.forEach(S),this.h()},h(){var V,$,oe,de;d(n,"class","country-icon svelte-jcbfjt"),d(n,"style",i=`background:${e[3](($=(V=e[2])==null?void 0:V.id)!=null?$:0)}`),d(l,"class","svelte-jcbfjt"),d(s,"class","dropdown svelte-jcbfjt"),d(c,"class","svelte-jcbfjt"),d(h,"class","dropdown svelte-jcbfjt"),d(k,"class","country-icon svelte-jcbfjt"),d(k,"style",A=`background:${e[3]?e[3]((de=(oe=e[8])==null?void 0:oe.id)!=null?de:0):"white"}`),d(t,"class","selectors svelte-jcbfjt"),d(g,"class","svelte-jcbfjt"),d(F,"class","viz-row svelte-jcbfjt"),d(C,"class","viz-row svelte-jcbfjt"),d(P,"id","content"),d(P,"class","svelte-jcbfjt"),d(D,"id","container"),d(D,"class","svelte-jcbfjt")},m(V,$){B(V,t,$),H(t,n),H(t,r),H(t,s),H(s,l),H(l,o),H(s,a),pe(u,s,null),H(t,f),H(t,h),H(h,c),H(c,_),H(h,y),pe(m,h,null),H(t,v),H(t,k),B(V,w,$),B(V,g,$),B(V,b,$),B(V,D,$),H(D,P),H(P,F),pe(z,F,null),H(F,I),pe(M,F,null),H(P,E),H(P,C),pe(L,C,null),H(C,N),pe(T,C,null),x=!0},p(V,$){var ae,Se,Ce,Ne,je,et,tt,Y;(!x||$&12&&i!==(i=`background:${V[3]((Se=(ae=V[2])==null?void 0:ae.id)!=null?Se:0)}`))&&d(n,"style",i);const oe={};$&1&&(oe.items=Array.from(V[0].values())),$&4&&(oe.value=V[2]),u.$set(oe);const de={};$&1&&(de.items=Array.from(V[0].values())),$&256&&(de.value=V[8]),m.$set(de),(!x||$&264&&A!==(A=`background:${V[3]?V[3]((Ne=(Ce=V[8])==null?void 0:Ce.id)!=null?Ne:0):"white"}`))&&d(k,"style",A);const _e={};$&303&&(_e.data={bilateralData:V[5],country1_id:(et=(je=V[2])==null?void 0:je.id)!=null?et:0,country2_id:(Y=(tt=V[8])==null?void 0:tt.id)!=null?Y:0,productData:V[1],locationData:V[0],countryColorScale:V[3]}),z.$set(_e);const ie={};$&447&&(ie.data={productData:V[1],locationData:V[0],bilateralData:V[5],loadingDrilldown:V[7],productColorScale:V[4],country1:V[2],country2:V[8],countryColorScale:V[3]}),M.$set(ie);const O={};$&471&&(O.data={locationData:V[0],productData:V[1],productColorScale:V[4],country1:V[2],country2:V[8],drilldownBilateral:V[6],loadingDrilldown:V[7],valueField:"export_value"}),L.$set(O);const j={};$&471&&(j.data={locationData:V[0],productData:V[1],productColorScale:V[4],country1:V[2],country2:V[8],drilldownBilateral:V[6],loadingDrilldown:V[7],valueField:"import_value"}),T.$set(j)},i(V){x||(U(u.$$.fragment,V),U(m.$$.fragment,V),U(z.$$.fragment,V),U(M.$$.fragment,V),U(L.$$.fragment,V),U(T.$$.fragment,V),x=!0)},o(V){Q(u.$$.fragment,V),Q(m.$$.fragment,V),Q(z.$$.fragment,V),Q(M.$$.fragment,V),Q(L.$$.fragment,V),Q(T.$$.fragment,V),x=!1},d(V){V&&S(t),ve(u),ve(m),V&&S(w),V&&S(g),V&&S(b),V&&S(D),ve(z),ve(M),ve(L),ve(T)}}}function Qh(e){let t,n,i,r,s,l,o,a,u,f,h;const c=[Jh,Zh],_=[];function y(m,v){return m[0]&&m[5]&&m[1]&&m[3]?0:1}return a=y(e),u=_[a]=c[a](e),{c(){t=Z("div"),n=Z("h1"),i=fe("Commerce Among Nations"),r=le(),s=Z("h2"),l=fe("A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),o=le(),u.c(),f=ne(),this.h()},l(m){t=J(m,"DIV",{class:!0});var v=R(t);n=J(v,"H1",{class:!0});var k=R(n);i=ce(k,"Commerce Among Nations"),k.forEach(S),r=se(v),s=J(v,"H2",{class:!0});var A=R(s);l=ce(A,"A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),A.forEach(S),v.forEach(S),o=se(m),u.l(m),f=ne(),this.h()},h(){d(n,"class","svelte-jcbfjt"),d(s,"class","svelte-jcbfjt"),d(t,"class","heading svelte-jcbfjt")},m(m,v){B(m,t,v),H(t,n),H(n,i),H(t,r),H(t,s),H(s,l),B(m,o,v),_[a].m(m,v),B(m,f,v),h=!0},p(m,[v]){let k=a;a=y(m),a===k?_[a].p(m,v):(ke(),Q(_[k],1,1,()=>{_[k]=null}),Ie(),u=_[a],u?u.p(m,v):(u=_[a]=c[a](m),u.c()),U(u,1),u.m(f.parentNode,f))},i(m){h||(U(u),h=!0)},o(m){Q(u),h=!1},d(m){m&&S(t),m&&S(o),_[a].d(m),m&&S(f)}}}const bl="id",kl="name",$h=231,e0=43;function t0(e,t,n){let i,r;const s=y=>{let m=y.detail;n(2,i=u.get(m.id))},l=y=>{let m=y.detail;n(8,r=u.get(m.id))};let o,a,u=new Map,f=new Map,h,c,_=!1;return yn(async()=>{Promise.all([Wt(`${Xt}/data/location.csv`),Wt(`${Xt}/data/hs_product.csv`),Wt(`${Xt}/data/hs_2010_to_2020.csv`)]).then(([y,m,v])=>{var A;n(0,u=Qi(y.map(w=>new sh(w)).filter(w=>w.level=="country"),w=>w.id)),n(1,f=Qi(m.map(w=>new bi(w)),w=>w.id));for(let[w,g]of f)g.parent=(A=f.get(g.parent_id))!=null?A:null,f.set(w,g);let k=v.map(w=>new ut(u,f,w));n(5,h=Qn(k,w=>w.location_id,w=>w.partner_id,w=>w.year)),Ml(v,w=>+w.export_value),n(3,o=yi(u.keys(),Vr)),n(4,a=yi(Array.from(f).map(([w,g])=>g.level).filter(w=>w=="section"),Vr))})}),e.$$.update=()=>{var y,m,v,k;e.$$.dirty&1&&n(2,i=(y=u==null?void 0:u.get($h))!=null?y:null),e.$$.dirty&1&&n(8,r=(m=u==null?void 0:u.get(e0))!=null?m:null),e.$$.dirty&7&&(n(6,c=null),n(7,_=!0),Wt(`${Xt}/data/${(v=i==null?void 0:i.code)!=null?v:"USA"}/${(k=i==null?void 0:i.code)!=null?k:"USA"}_hs2_2010_to_2020.csv`).then(A=>{n(6,c=Qn(A.map(w=>new ut(u,f,w)),w=>w.partner_id,w=>w.year)),n(7,_=!1)}))},[u,f,i,o,a,h,c,_,r,s,l]}class l0 extends qe{constructor(t){super(),xe(this,t,t0,Qh,Ge,{})}}export{l0 as default};
