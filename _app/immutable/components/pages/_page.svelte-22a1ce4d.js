var Ma=Object.defineProperty;var Na=(e,t,n)=>t in e?Ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var We=(e,t,n)=>(Na(e,typeof t!="symbol"?t+"":t,n),n);import{S as It,i as St,s as Tt,k as ae,l as se,m as L,h as v,n as d,b as K,B as Ve,I as $e,J as Z,g as xe,t as ve,d as Ze,f as he,K as ht,L as Vi,o as Yr,M as Yo,N as ot,e as ke,O as Bi,v as nt,w as Ge,x as _t,y as Ue,z as ze,q as me,r as ge,G as I,u as Ke,A as yr,a as Ae,c as Ie,P as re,Q as ie,p as _n,R as ci,T as hn,U as Xr,V as jt,W as Ca,C as La,D as Da,E as Oa,F as Ra,X as Pi,Y as el,Z as tl,_ as Gi,$ as Xo,a0 as Fa,a1 as nl,a2 as Ha,a3 as Va,a4 as Ba,a5 as Pa,a6 as Ye,H as At,a7 as ft,a8 as Ui,a9 as An,aa as Ga,ab as Ua,ac as za,ad as Ya,ae as Xa,af as rl,ag as lr,ah as qa}from"../../chunks/index-5ece49a7.js";import{b as bn}from"../../chunks/paths-6cd3a76e.js";import{w as zi}from"../../chunks/index-747ceb65.js";import{f as il}from"../../chunks/feather-e249e621.js";function vr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qo(e){let t,n,r;e.length!==2?(t=vr,n=(a,s)=>vr(e(a),s),r=(a,s)=>e(a)-s):(t=e===vr||e===Wa?e:Ka,n=e,r=e);function i(a,s,u=0,f=a.length){if(u<f){if(t(s,s)!==0)return f;do{const h=u+f>>>1;n(a[h],s)<0?u=h+1:f=h}while(u<f)}return u}function o(a,s,u=0,f=a.length){if(u<f){if(t(s,s)!==0)return f;do{const h=u+f>>>1;n(a[h],s)<=0?u=h+1:f=h}while(u<f)}return u}function l(a,s,u=0,f=a.length){const h=i(a,s,u,f-1);return h>u&&r(a[h-1],s)>-r(a[h],s)?h-1:h}return{left:i,center:l,right:o}}function Ka(){return 0}function xa(e){return e===null?NaN:+e}const Za=qo(vr),ja=Za.right;qo(xa).center;const Ja=ja;function Wo(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class hi extends Map{constructor(t,n=es){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ll(this,t))}has(t){return super.has(ll(this,t))}set(t,n){return super.set(Qa(this,t),n)}delete(t){return super.delete($a(this,t))}}function ll({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Qa({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function $a({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function es(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Sr(e){return e}function di(e,...t){return Yi(e,Sr,Sr,t)}function _i(e,t,...n){return Yi(e,Sr,t,n)}function ol(e,...t){return Yi(e,Sr,ts,t)}function ts(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Yi(e,t,n,r){return function i(o,l){if(l>=r.length)return n(o);const a=new hi,s=r[l++];let u=-1;for(const f of o){const h=s(f,++u,o),c=a.get(h);c?c.push(f):a.set(h,[f])}for(const[f,h]of a)a.set(f,i(h,l));return t(a)}(e,0)}var mi=Math.sqrt(50),gi=Math.sqrt(10),pi=Math.sqrt(2);function ns(e,t,n){var r,i=-1,o,l,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),(a=Ko(e,t,n))===0||!isFinite(a))return[];if(a>0){let s=Math.round(e/a),u=Math.round(t/a);for(s*a<e&&++s,u*a>t&&--u,l=new Array(o=u-s+1);++i<o;)l[i]=(s+i)*a}else{a=-a;let s=Math.round(e*a),u=Math.round(t*a);for(s/a<e&&++s,u/a>t&&--u,l=new Array(o=u-s+1);++i<o;)l[i]=(s+i)/a}return r&&l.reverse(),l}function Ko(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=mi?10:o>=gi?5:o>=pi?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=mi?10:o>=gi?5:o>=pi?2:1)}function rs(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=mi?i*=10:o>=gi?i*=5:o>=pi&&(i*=2),t<e?-i:i}function Bn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function al(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Tr(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function is(e){return e}var Zr=1,wr=2,yi=3,Fn=4,sl=1e-6;function ls(e){return"translate("+e+",0)"}function os(e){return"translate(0,"+e+")"}function as(e){return t=>+e(t)}function ss(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function us(){return!this.__axis}function Xi(e,t){var n=[],r=null,i=null,o=6,l=6,a=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Zr||e===Fn?-1:1,f=e===Fn||e===wr?"x":"y",h=e===Zr||e===yi?ls:os;function c(_){var w=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,y=i==null?t.tickFormat?t.tickFormat.apply(t,n):is:i,m=Math.max(o,0)+a,k=t.range(),T=+k[0]+s,E=+k[k.length-1]+s,g=(t.bandwidth?ss:as)(t.copy(),s),b=_.selection?_.selection():_,B=b.selectAll(".domain").data([null]),V=b.selectAll(".tick").data(w,t).order(),D=V.exit(),z=V.enter().append("g").attr("class","tick"),A=V.select("line"),S=V.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),V=V.merge(z),A=A.merge(z.append("line").attr("stroke","currentColor").attr(f+"2",u*o)),S=S.merge(z.append("text").attr("fill","currentColor").attr(f,u*m).attr("dy",e===Zr?"0em":e===yi?"0.71em":"0.32em")),_!==b&&(B=B.transition(_),V=V.transition(_),A=A.transition(_),S=S.transition(_),D=D.transition(_).attr("opacity",sl).attr("transform",function(X){return isFinite(X=g(X))?h(X+s):this.getAttribute("transform")}),z.attr("opacity",sl).attr("transform",function(X){var P=this.parentNode.__axis;return h((P&&isFinite(P=P(X))?P:g(X))+s)})),D.remove(),B.attr("d",e===Fn||e===wr?l?"M"+u*l+","+T+"H"+s+"V"+E+"H"+u*l:"M"+s+","+T+"V"+E:l?"M"+T+","+u*l+"V"+s+"H"+E+"V"+u*l:"M"+T+","+s+"H"+E),V.attr("opacity",1).attr("transform",function(X){return h(g(X)+s)}),A.attr(f+"2",u*o),S.attr(f,u*m).text(y),b.filter(us).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===wr?"start":e===Fn?"end":"middle"),b.each(function(){this.__axis=g})}return c.scale=function(_){return arguments.length?(t=_,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),c):n.slice()},c.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),c):r&&r.slice()},c.tickFormat=function(_){return arguments.length?(i=_,c):i},c.tickSize=function(_){return arguments.length?(o=l=+_,c):o},c.tickSizeInner=function(_){return arguments.length?(o=+_,c):o},c.tickSizeOuter=function(_){return arguments.length?(l=+_,c):l},c.tickPadding=function(_){return arguments.length?(a=+_,c):a},c.offset=function(_){return arguments.length?(s=+_,c):s},c}function fs(e){return Xi(wr,e)}function xo(e){return Xi(yi,e)}function cs(e){return Xi(Fn,e)}var hs={value:()=>{}};function qi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new br(n)}function br(e){this._=e}function ds(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}br.prototype=qi.prototype={constructor:br,on:function(e,t){var n=this._,r=ds(e+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(e=r[o]).type)&&(i=_s(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=r[o]).type)n[i]=ul(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ul(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new br(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function _s(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ul(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=hs,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var vi="http://www.w3.org/1999/xhtml";const fl={svg:"http://www.w3.org/2000/svg",xhtml:vi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),fl.hasOwnProperty(t)?{space:fl[t],local:e}:e}function ms(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vi&&t.documentElement.namespaceURI===vi?t.createElement(e):t.createElementNS(n,e)}}function gs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zo(e){var t=qr(e);return(t.local?gs:ms)(t)}function ps(){}function Wi(e){return e==null?ps:function(){return this.querySelector(e)}}function ys(e){typeof e!="function"&&(e=Wi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,a=r[i]=new Array(l),s,u,f=0;f<l;++f)(s=o[f])&&(u=e.call(s,s.__data__,f,o))&&("__data__"in s&&(u.__data__=s.__data__),a[f]=u);return new mt(r,this._parents)}function vs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ws(){return[]}function jo(e){return e==null?ws:function(){return this.querySelectorAll(e)}}function bs(e){return function(){return vs(e.apply(this,arguments))}}function ks(e){typeof e=="function"?e=bs(e):e=jo(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var l=t[o],a=l.length,s,u=0;u<a;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new mt(r,i)}function Jo(e){return function(){return this.matches(e)}}function Qo(e){return function(t){return t.matches(e)}}var Es=Array.prototype.find;function As(e){return function(){return Es.call(this.children,e)}}function Is(){return this.firstElementChild}function Ss(e){return this.select(e==null?Is:As(typeof e=="function"?e:Qo(e)))}var Ts=Array.prototype.filter;function Ms(){return Array.from(this.children)}function Ns(e){return function(){return Ts.call(this.children,e)}}function Cs(e){return this.selectAll(e==null?Ms:Ns(typeof e=="function"?e:Qo(e)))}function Ls(e){typeof e!="function"&&(e=Jo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,a=r[i]=[],s,u=0;u<l;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&a.push(s);return new mt(r,this._parents)}function $o(e){return new Array(e.length)}function Ds(){return new mt(this._enter||this._groups.map($o),this._parents)}function Mr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mr.prototype={constructor:Mr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Os(e){return function(){return e}}function Rs(e,t,n,r,i,o){for(var l=0,a,s=t.length,u=o.length;l<u;++l)(a=t[l])?(a.__data__=o[l],r[l]=a):n[l]=new Mr(e,o[l]);for(;l<s;++l)(a=t[l])&&(i[l]=a)}function Fs(e,t,n,r,i,o,l){var a,s,u=new Map,f=t.length,h=o.length,c=new Array(f),_;for(a=0;a<f;++a)(s=t[a])&&(c[a]=_=l.call(s,s.__data__,a,t)+"",u.has(_)?i[a]=s:u.set(_,s));for(a=0;a<h;++a)_=l.call(e,o[a],a,o)+"",(s=u.get(_))?(r[a]=s,s.__data__=o[a],u.delete(_)):n[a]=new Mr(e,o[a]);for(a=0;a<f;++a)(s=t[a])&&u.get(c[a])===s&&(i[a]=s)}function Hs(e){return e.__data__}function Vs(e,t){if(!arguments.length)return Array.from(this,Hs);var n=t?Fs:Rs,r=this._parents,i=this._groups;typeof e!="function"&&(e=Os(e));for(var o=i.length,l=new Array(o),a=new Array(o),s=new Array(o),u=0;u<o;++u){var f=r[u],h=i[u],c=h.length,_=Bs(e.call(f,f&&f.__data__,u,r)),w=_.length,y=a[u]=new Array(w),m=l[u]=new Array(w),k=s[u]=new Array(c);n(f,h,y,m,k,_,t);for(var T=0,E=0,g,b;T<w;++T)if(g=y[T]){for(T>=E&&(E=T+1);!(b=m[E])&&++E<w;);g._next=b||null}}return l=new mt(l,r),l._enter=a,l._exit=s,l}function Bs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ps(){return new mt(this._exit||this._groups.map($o),this._parents)}function Gs(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Us(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,l=Math.min(i,o),a=new Array(i),s=0;s<l;++s)for(var u=n[s],f=r[s],h=u.length,c=a[s]=new Array(h),_,w=0;w<h;++w)(_=u[w]||f[w])&&(c[w]=_);for(;s<i;++s)a[s]=n[s];return new mt(a,this._parents)}function zs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Ys(e){e||(e=Xs);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],a=l.length,s=i[o]=new Array(a),u,f=0;f<a;++f)(u=l[f])&&(s[f]=u);s.sort(t)}return new mt(i,this._parents).order()}function Xs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ws(){return Array.from(this)}function Ks(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function xs(){let e=0;for(const t of this)++e;return e}function Zs(){return!this.node()}function js(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,l=i.length,a;o<l;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function Js(e){return function(){this.removeAttribute(e)}}function Qs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $s(e,t){return function(){this.setAttribute(e,t)}}function eu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function tu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function nu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ru(e,t){var n=qr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Qs:Js:typeof t=="function"?n.local?nu:tu:n.local?eu:$s)(n,t))}function ea(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function iu(e){return function(){this.style.removeProperty(e)}}function lu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ou(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function au(e,t,n){return arguments.length>1?this.each((t==null?iu:typeof t=="function"?ou:lu)(e,t,n==null?"":n)):Sn(this.node(),e)}function Sn(e,t){return e.style.getPropertyValue(t)||ea(e).getComputedStyle(e,null).getPropertyValue(t)}function su(e){return function(){delete this[e]}}function uu(e,t){return function(){this[e]=t}}function fu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function cu(e,t){return arguments.length>1?this.each((t==null?su:typeof t=="function"?fu:uu)(e,t)):this.node()[e]}function ta(e){return e.trim().split(/^|\s+/)}function Ki(e){return e.classList||new na(e)}function na(e){this._node=e,this._names=ta(e.getAttribute("class")||"")}na.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ra(e,t){for(var n=Ki(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ia(e,t){for(var n=Ki(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function hu(e){return function(){ra(this,e)}}function du(e){return function(){ia(this,e)}}function _u(e,t){return function(){(t.apply(this,arguments)?ra:ia)(this,e)}}function mu(e,t){var n=ta(e+"");if(arguments.length<2){for(var r=Ki(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?_u:t?hu:du)(n,t))}function gu(){this.textContent=""}function pu(e){return function(){this.textContent=e}}function yu(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function vu(e){return arguments.length?this.each(e==null?gu:(typeof e=="function"?yu:pu)(e)):this.node().textContent}function wu(){this.innerHTML=""}function bu(e){return function(){this.innerHTML=e}}function ku(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Eu(e){return arguments.length?this.each(e==null?wu:(typeof e=="function"?ku:bu)(e)):this.node().innerHTML}function Au(){this.nextSibling&&this.parentNode.appendChild(this)}function Iu(){return this.each(Au)}function Su(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tu(){return this.each(Su)}function Mu(e){var t=typeof e=="function"?e:Zo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Nu(){return null}function Cu(e,t){var n=typeof e=="function"?e:Zo(e),r=t==null?Nu:typeof t=="function"?t:Wi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Lu(){var e=this.parentNode;e&&e.removeChild(this)}function Du(){return this.each(Lu)}function Ou(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ru(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fu(e){return this.select(e?Ru:Ou)}function Hu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Vu(e){return function(t){e.call(this,t,this.__data__)}}function Bu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Pu(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Gu(e,t,n){return function(){var r=this.__on,i,o=Vu(t);if(r){for(var l=0,a=r.length;l<a;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Uu(e,t,n){var r=Bu(e+""),i,o=r.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var s=0,u=a.length,f;s<u;++s)for(i=0,f=a[s];i<o;++i)if((l=r[i]).type===f.type&&l.name===f.name)return f.value}return}for(a=t?Gu:Pu,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function la(e,t,n){var r=ea(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function zu(e,t){return function(){return la(this,e,t)}}function Yu(e,t){return function(){return la(this,e,t.apply(this,arguments))}}function Xu(e,t){return this.each((typeof t=="function"?Yu:zu)(e,t))}function*qu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var oa=[null];function mt(e,t){this._groups=e,this._parents=t}function Wn(){return new mt([[document.documentElement]],oa)}function Wu(){return this}mt.prototype=Wn.prototype={constructor:mt,select:ys,selectAll:ks,selectChild:Ss,selectChildren:Cs,filter:Ls,data:Vs,enter:Ds,exit:Ps,join:Gs,merge:Us,selection:Wu,order:zs,sort:Ys,call:qs,nodes:Ws,node:Ks,size:xs,empty:Zs,each:js,attr:ru,style:au,property:cu,classed:mu,text:vu,html:Eu,raise:Iu,lower:Tu,append:Mu,insert:Cu,remove:Du,clone:Fu,datum:Hu,on:Uu,dispatch:Xu,[Symbol.iterator]:qu};function Me(e){return typeof e=="string"?new mt([[document.querySelector(e)]],[document.documentElement]):new mt([[e]],oa)}function Ku(e){let t;for(;t=e.sourceEvent;)e=t;return e}function cl(e,t){if(e=Ku(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const wi={capture:!0,passive:!1};function bi(e){e.preventDefault(),e.stopImmediatePropagation()}function xu(e){var t=e.document.documentElement,n=Me(e).on("dragstart.drag",bi,wi);"onselectstart"in t?n.on("selectstart.drag",bi,wi):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zu(e,t){var n=e.document.documentElement,r=Me(e).on("dragstart.drag",null);t&&(r.on("click.drag",bi,wi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function xi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function aa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Kn(){}var Un=.7,Nr=1/Un,In="\\s*([+-]?\\d+)\\s*",zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ju=/^#([0-9a-f]{3,8})$/,Ju=new RegExp(`^rgb\\(${In},${In},${In}\\)$`),Qu=new RegExp(`^rgb\\(${Rt},${Rt},${Rt}\\)$`),$u=new RegExp(`^rgba\\(${In},${In},${In},${zn}\\)$`),ef=new RegExp(`^rgba\\(${Rt},${Rt},${Rt},${zn}\\)$`),tf=new RegExp(`^hsl\\(${zn},${Rt},${Rt}\\)$`),nf=new RegExp(`^hsla\\(${zn},${Rt},${Rt},${zn}\\)$`),hl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xi(Kn,un,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dl,formatHex:dl,formatHex8:rf,formatHsl:lf,formatRgb:_l,toString:_l});function dl(){return this.rgb().formatHex()}function rf(){return this.rgb().formatHex8()}function lf(){return sa(this).formatHsl()}function _l(){return this.rgb().formatRgb()}function un(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ju.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ml(t):n===3?new ct(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?or(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?or(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ju.exec(e))?new ct(t[1],t[2],t[3],1):(t=Qu.exec(e))?new ct(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$u.exec(e))?or(t[1],t[2],t[3],t[4]):(t=ef.exec(e))?or(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=tf.exec(e))?yl(t[1],t[2]/100,t[3]/100,1):(t=nf.exec(e))?yl(t[1],t[2]/100,t[3]/100,t[4]):hl.hasOwnProperty(e)?ml(hl[e]):e==="transparent"?new ct(NaN,NaN,NaN,0):null}function ml(e){return new ct(e>>16&255,e>>8&255,e&255,1)}function or(e,t,n,r){return r<=0&&(e=t=n=NaN),new ct(e,t,n,r)}function of(e){return e instanceof Kn||(e=un(e)),e?(e=e.rgb(),new ct(e.r,e.g,e.b,e.opacity)):new ct}function ki(e,t,n,r){return arguments.length===1?of(e):new ct(e,t,n,r==null?1:r)}function ct(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}xi(ct,ki,aa(Kn,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Un:Math.pow(Un,e),new ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ct(an(this.r),an(this.g),an(this.b),Cr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gl,formatHex:gl,formatHex8:af,formatRgb:pl,toString:pl}));function gl(){return`#${ln(this.r)}${ln(this.g)}${ln(this.b)}`}function af(){return`#${ln(this.r)}${ln(this.g)}${ln(this.b)}${ln((isNaN(this.opacity)?1:this.opacity)*255)}`}function pl(){const e=Cr(this.opacity);return`${e===1?"rgb(":"rgba("}${an(this.r)}, ${an(this.g)}, ${an(this.b)}${e===1?")":`, ${e})`}`}function Cr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function an(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ln(e){return e=an(e),(e<16?"0":"")+e.toString(16)}function yl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Et(e,t,n,r)}function sa(e){if(e instanceof Et)return new Et(e.h,e.s,e.l,e.opacity);if(e instanceof Kn||(e=un(e)),!e)return new Et;if(e instanceof Et)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,a=o-i,s=(o+i)/2;return a?(t===o?l=(n-r)/a+(n<r)*6:n===o?l=(r-t)/a+2:l=(t-n)/a+4,a/=s<.5?o+i:2-o-i,l*=60):a=s>0&&s<1?0:l,new Et(l,a,s,e.opacity)}function sf(e,t,n,r){return arguments.length===1?sa(e):new Et(e,t,n,r==null?1:r)}function Et(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}xi(Et,sf,aa(Kn,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new Et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Un:Math.pow(Un,e),new Et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ct(jr(e>=240?e-240:e+120,i,r),jr(e,i,r),jr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Et(vl(this.h),ar(this.s),ar(this.l),Cr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cr(this.opacity);return`${e===1?"hsl(":"hsla("}${vl(this.h)}, ${ar(this.s)*100}%, ${ar(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vl(e){return e=(e||0)%360,e<0?e+360:e}function ar(e){return Math.max(0,Math.min(1,e||0))}function jr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Zi=e=>()=>e;function uf(e,t){return function(n){return e+n*t}}function ff(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function cf(e){return(e=+e)==1?ua:function(t,n){return n-t?ff(t,n,e):Zi(isNaN(t)?n:t)}}function ua(e,t){var n=t-e;return n?uf(e,n):Zi(isNaN(e)?t:e)}const Lr=function e(t){var n=cf(t);function r(i,o){var l=n((i=ki(i)).r,(o=ki(o)).r),a=n(i.g,o.g),s=n(i.b,o.b),u=ua(i.opacity,o.opacity);return function(f){return i.r=l(f),i.g=a(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function hf(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function df(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _f(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=Wr(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(a){for(l=0;l<r;++l)o[l]=i[l](a);return o}}function mf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gf(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Wr(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Ei=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jr=new RegExp(Ei.source,"g");function pf(e){return function(){return e}}function yf(e){return function(t){return e(t)+""}}function fa(e,t){var n=Ei.lastIndex=Jr.lastIndex=0,r,i,o,l=-1,a=[],s=[];for(e=e+"",t=t+"";(r=Ei.exec(e))&&(i=Jr.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[l]?a[l]+=o:a[++l]=o),(r=r[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,s.push({i:l,x:kt(r,i)})),n=Jr.lastIndex;return n<t.length&&(o=t.slice(n),a[l]?a[l]+=o:a[++l]=o),a.length<2?s[0]?yf(s[0].x):pf(t):(t=s.length,function(u){for(var f=0,h;f<t;++f)a[(h=s[f]).i]=h.x(u);return a.join("")})}function Wr(e,t){var n=typeof t,r;return t==null||n==="boolean"?Zi(t):(n==="number"?kt:n==="string"?(r=un(t))?(t=r,Lr):fa:t instanceof un?Lr:t instanceof Date?mf:df(t)?hf:Array.isArray(t)?_f:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gf:kt)(e,t)}function vf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var wl=180/Math.PI,Ai={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ca(e,t,n,r,i,o){var l,a,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,s/=a),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*wl,skewX:Math.atan(s)*wl,scaleX:l,scaleY:a}}var sr;function wf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ai:ca(t.a,t.b,t.c,t.d,t.e,t.f)}function bf(e){return e==null||(sr||(sr=document.createElementNS("http://www.w3.org/2000/svg","g")),sr.setAttribute("transform",e),!(e=sr.transform.baseVal.consolidate()))?Ai:(e=e.matrix,ca(e.a,e.b,e.c,e.d,e.e,e.f))}function ha(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,h,c,_,w){if(u!==h||f!==c){var y=_.push("translate(",null,t,null,n);w.push({i:y-4,x:kt(u,h)},{i:y-2,x:kt(f,c)})}else(h||c)&&_.push("translate("+h+t+c+n)}function l(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:kt(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function a(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:kt(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function s(u,f,h,c,_,w){if(u!==h||f!==c){var y=_.push(i(_)+"scale(",null,",",null,")");w.push({i:y-4,x:kt(u,h)},{i:y-2,x:kt(f,c)})}else(h!==1||c!==1)&&_.push(i(_)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,c),l(u.rotate,f.rotate,h,c),a(u.skewX,f.skewX,h,c),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(_){for(var w=-1,y=c.length,m;++w<y;)h[(m=c[w]).i]=m.x(_);return h.join("")}}}var kf=ha(wf,"px, ","px)","deg)"),Ef=ha(bf,", ",")",")"),Tn=0,Hn=0,Cn=0,da=1e3,Dr,Vn,Or=0,fn=0,Kr=0,Yn=typeof performance=="object"&&performance.now?performance:Date,_a=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ji(){return fn||(_a(Af),fn=Yn.now()+Kr)}function Af(){fn=0}function Rr(){this._call=this._time=this._next=null}Rr.prototype=ma.prototype={constructor:Rr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ji():+n)+(t==null?0:+t),!this._next&&Vn!==this&&(Vn?Vn._next=this:Dr=this,Vn=this),this._call=e,this._time=n,Ii()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ii())}};function ma(e,t,n){var r=new Rr;return r.restart(e,t,n),r}function If(){ji(),++Tn;for(var e=Dr,t;e;)(t=fn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Tn}function bl(){fn=(Or=Yn.now())+Kr,Tn=Hn=0;try{If()}finally{Tn=0,Tf(),fn=0}}function Sf(){var e=Yn.now(),t=e-Or;t>da&&(Kr-=t,Or=e)}function Tf(){for(var e,t=Dr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Dr=n);Vn=e,Ii(r)}function Ii(e){if(!Tn){Hn&&(Hn=clearTimeout(Hn));var t=e-fn;t>24?(e<1/0&&(Hn=setTimeout(bl,e-Yn.now()-Kr)),Cn&&(Cn=clearInterval(Cn))):(Cn||(Or=Yn.now(),Cn=setInterval(Sf,da)),Tn=1,_a(bl))}}function kl(e,t,n){var r=new Rr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Mf=qi("start","end","cancel","interrupt"),Nf=[],ga=0,El=1,Si=2,kr=3,Al=4,Ti=5,Er=6;function xr(e,t,n,r,i,o){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Cf(e,n,{name:t,index:r,group:i,on:Mf,tween:Nf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ga})}function Ji(e,t){var n=Mt(e,t);if(n.state>ga)throw new Error("too late; already scheduled");return n}function Ft(e,t){var n=Mt(e,t);if(n.state>kr)throw new Error("too late; already running");return n}function Mt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Cf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ma(o,0,n.time);function o(u){n.state=El,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,h,c,_;if(n.state!==El)return s();for(f in r)if(_=r[f],_.name===n.name){if(_.state===kr)return kl(l);_.state===Al?(_.state=Er,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[f]):+f<t&&(_.state=Er,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[f])}if(kl(function(){n.state===kr&&(n.state=Al,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Si,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Si){for(n.state=kr,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(_=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=_);i.length=h+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Ti,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===Ti&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Er,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Mi(e,t){var n=e.__transition,r,i,o=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){o=!1;continue}i=r.state>Si&&r.state<Ti,r.state=Er,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}o&&delete e.__transition}}function Lf(e){return this.each(function(){Mi(this,e)})}function Df(e,t){var n,r;return function(){var i=Ft(this,e),o=i.tween;if(o!==n){r=n=o;for(var l=0,a=r.length;l<a;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function Of(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ft(this,e),l=o.tween;if(l!==r){i=(r=l).slice();for(var a={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=a;break}s===u&&i.push(a)}o.tween=i}}function Rf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Mt(this.node(),n).tween,i=0,o=r.length,l;i<o;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?Df:Of)(n,e,t))}function Qi(e,t,n){var r=e._id;return e.each(function(){var i=Ft(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Mt(i,r).value[t]}}function pa(e,t){var n;return(typeof t=="number"?kt:t instanceof un?Lr:(n=un(t))?(t=n,Lr):fa)(e,t)}function Ff(e){return function(){this.removeAttribute(e)}}function Hf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vf(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===r?o:o=t(r=l,n)}}function Bf(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?o:o=t(r=l,n)}}function Pf(e,t,n){var r,i,o;return function(){var l,a=n(this),s;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=a+"",l===s?null:l===r&&s===i?o:(i=s,o=t(r=l,a)))}}function Gf(e,t,n){var r,i,o;return function(){var l,a=n(this),s;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=a+"",l===s?null:l===r&&s===i?o:(i=s,o=t(r=l,a)))}}function Uf(e,t){var n=qr(e),r=n==="transform"?Ef:pa;return this.attrTween(e,typeof t=="function"?(n.local?Gf:Pf)(n,r,Qi(this,"attr."+e,t)):t==null?(n.local?Hf:Ff)(n):(n.local?Bf:Vf)(n,r,t))}function zf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Xf(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Yf(e,o)),n}return i._value=t,i}function qf(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&zf(e,o)),n}return i._value=t,i}function Wf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=qr(e);return this.tween(n,(r.local?Xf:qf)(r,t))}function Kf(e,t){return function(){Ji(this,e).delay=+t.apply(this,arguments)}}function xf(e,t){return t=+t,function(){Ji(this,e).delay=t}}function Zf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Kf:xf)(t,e)):Mt(this.node(),t).delay}function jf(e,t){return function(){Ft(this,e).duration=+t.apply(this,arguments)}}function Jf(e,t){return t=+t,function(){Ft(this,e).duration=t}}function Qf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jf:Jf)(t,e)):Mt(this.node(),t).duration}function $f(e,t){if(typeof t!="function")throw new Error;return function(){Ft(this,e).ease=t}}function ec(e){var t=this._id;return arguments.length?this.each($f(t,e)):Mt(this.node(),t).ease}function tc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ft(this,e).ease=n}}function nc(e){if(typeof e!="function")throw new Error;return this.each(tc(this._id,e))}function rc(e){typeof e!="function"&&(e=Jo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,a=r[i]=[],s,u=0;u<l;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&a.push(s);return new qt(r,this._parents,this._name,this._id)}function ic(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),l=new Array(r),a=0;a<o;++a)for(var s=t[a],u=n[a],f=s.length,h=l[a]=new Array(f),c,_=0;_<f;++_)(c=s[_]||u[_])&&(h[_]=c);for(;a<r;++a)l[a]=t[a];return new qt(l,this._parents,this._name,this._id)}function lc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function oc(e,t,n){var r,i,o=lc(t)?Ji:Ft;return function(){var l=o(this,e),a=l.on;a!==r&&(i=(r=a).copy()).on(t,n),l.on=i}}function ac(e,t){var n=this._id;return arguments.length<2?Mt(this.node(),n).on.on(e):this.each(oc(n,e,t))}function sc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function uc(){return this.on("end.remove",sc(this._id))}function fc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wi(e));for(var r=this._groups,i=r.length,o=new Array(i),l=0;l<i;++l)for(var a=r[l],s=a.length,u=o[l]=new Array(s),f,h,c=0;c<s;++c)(f=a[c])&&(h=e.call(f,f.__data__,c,a))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,xr(u[c],t,n,c,u,Mt(f,n)));return new qt(o,this._parents,t,n)}function cc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jo(e));for(var r=this._groups,i=r.length,o=[],l=[],a=0;a<i;++a)for(var s=r[a],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var c=e.call(f,f.__data__,h,s),_,w=Mt(f,n),y=0,m=c.length;y<m;++y)(_=c[y])&&xr(_,t,n,y,c,w);o.push(c),l.push(f)}return new qt(o,l,t,n)}var hc=Wn.prototype.constructor;function dc(){return new hc(this._groups,this._parents)}function _c(e,t){var n,r,i;return function(){var o=Sn(this,e),l=(this.style.removeProperty(e),Sn(this,e));return o===l?null:o===n&&l===r?i:i=t(n=o,r=l)}}function ya(e){return function(){this.style.removeProperty(e)}}function mc(e,t,n){var r,i=n+"",o;return function(){var l=Sn(this,e);return l===i?null:l===r?o:o=t(r=l,n)}}function gc(e,t,n){var r,i,o;return function(){var l=Sn(this,e),a=n(this),s=a+"";return a==null&&(s=a=(this.style.removeProperty(e),Sn(this,e))),l===s?null:l===r&&s===i?o:(i=s,o=t(r=l,a))}}function pc(e,t){var n,r,i,o="style."+t,l="end."+o,a;return function(){var s=Ft(this,e),u=s.on,f=s.value[o]==null?a||(a=ya(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(l,i=f),s.on=r}}function yc(e,t,n){var r=(e+="")=="transform"?kf:pa;return t==null?this.styleTween(e,_c(e,r)).on("end.style."+e,ya(e)):typeof t=="function"?this.styleTween(e,gc(e,r,Qi(this,"style."+e,t))).each(pc(this._id,e)):this.styleTween(e,mc(e,r,t),n).on("end.style."+e,null)}function vc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function wc(e,t,n){var r,i;function o(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&vc(e,l,n)),r}return o._value=t,o}function bc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,wc(e,t,n==null?"":n))}function kc(e){return function(){this.textContent=e}}function Ec(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Ac(e){return this.tween("text",typeof e=="function"?Ec(Qi(this,"text",e)):kc(e==null?"":e+""))}function Ic(e){return function(t){this.textContent=e.call(this,t)}}function Sc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ic(i)),t}return r._value=e,r}function Tc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Sc(e))}function Mc(){for(var e=this._name,t=this._id,n=va(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],a=l.length,s,u=0;u<a;++u)if(s=l[u]){var f=Mt(s,t);xr(s,e,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new qt(r,this._parents,e,n)}function Nc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,l){var a={value:l},s={value:function(){--i===0&&o()}};n.each(function(){var u=Ft(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),u.on=t}),i===0&&o()})}var Cc=0;function qt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function va(){return++Cc}var Gt=Wn.prototype;qt.prototype={constructor:qt,select:fc,selectAll:cc,selectChild:Gt.selectChild,selectChildren:Gt.selectChildren,filter:rc,merge:ic,selection:dc,transition:Mc,call:Gt.call,nodes:Gt.nodes,node:Gt.node,size:Gt.size,empty:Gt.empty,each:Gt.each,on:ac,attr:Uf,attrTween:Wf,style:yc,styleTween:bc,text:Ac,textTween:Tc,remove:uc,tween:Rf,delay:Zf,duration:Qf,ease:ec,easeVarying:nc,end:Nc,[Symbol.iterator]:Gt[Symbol.iterator]};function Lc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dc={time:null,delay:0,duration:250,ease:Lc};function Oc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Rc(e){var t,n;e instanceof qt?(t=e._id,e=e._name):(t=va(),(n=Dc).time=ji(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],a=l.length,s,u=0;u<a;++u)(s=l[u])&&xr(s,e,t,u,l,n||Oc(s,t));return new qt(r,this._parents,e,t)}Wn.prototype.interrupt=Lf;Wn.prototype.transition=Rc;const Qr=e=>()=>e;function Fc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Hc(e){e.stopImmediatePropagation()}function $r(e){e.preventDefault(),e.stopImmediatePropagation()}var Il={name:"drag"},ei={name:"space"},mn={name:"handle"},gn={name:"center"};const{abs:Sl,max:Je,min:Qe}=Math;function Tl(e){return[+e[0],+e[1]]}function Ml(e){return[Tl(e[0]),Tl(e[1])]}var Ar={name:"x",handles:["w","e"].map(Fr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ti={name:"y",handles:["n","s"].map(Fr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ut={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Nl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Cl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Vc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Bc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Fr(e){return{type:e}}function Pc(e){return!e.ctrlKey&&!e.button}function Gc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function ni(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function zc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Yc(){return Xc(Ar)}function Xc(e){var t=Gc,n=Pc,r=Uc,i=!0,o=qi("start","brush","end"),l=6,a;function s(m){var k=m.property("__brush",y).selectAll(".overlay").data([Fr("overlay")]);k.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ut.overlay).merge(k).each(function(){var E=ni(this).extent;Me(this).attr("x",E[0][0]).attr("y",E[0][1]).attr("width",E[1][0]-E[0][0]).attr("height",E[1][1]-E[0][1])}),m.selectAll(".selection").data([Fr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ut.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var T=m.selectAll(".handle").data(e.handles,function(E){return E.type});T.exit().remove(),T.enter().append("rect").attr("class",function(E){return"handle handle--"+E.type}).attr("cursor",function(E){return Ut[E.type]}),m.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",c).filter(r).on("touchstart.brush",c).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(m,k,T){m.tween?m.on("start.brush",function(E){f(this,arguments).beforestart().start(E)}).on("interrupt.brush end.brush",function(E){f(this,arguments).end(E)}).tween("brush",function(){var E=this,g=E.__brush,b=f(E,arguments),B=g.selection,V=e.input(typeof k=="function"?k.apply(this,arguments):k,g.extent),D=Wr(B,V);function z(A){g.selection=A===1&&V===null?null:D(A),u.call(E),b.brush()}return B!==null&&V!==null?z:z(1)}):m.each(function(){var E=this,g=arguments,b=E.__brush,B=e.input(typeof k=="function"?k.apply(E,g):k,b.extent),V=f(E,g).beforestart();Mi(E),b.selection=B===null?null:B,u.call(E),V.start(T).brush(T).end(T)})},s.clear=function(m,k){s.move(m,null,k)};function u(){var m=Me(this),k=ni(this).selection;k?(m.selectAll(".selection").style("display",null).attr("x",k[0][0]).attr("y",k[0][1]).attr("width",k[1][0]-k[0][0]).attr("height",k[1][1]-k[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(T){return T.type[T.type.length-1]==="e"?k[1][0]-l/2:k[0][0]-l/2}).attr("y",function(T){return T.type[0]==="s"?k[1][1]-l/2:k[0][1]-l/2}).attr("width",function(T){return T.type==="n"||T.type==="s"?k[1][0]-k[0][0]+l:l}).attr("height",function(T){return T.type==="e"||T.type==="w"?k[1][1]-k[0][1]+l:l})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(m,k,T){var E=m.__brush.emitter;return E&&(!T||!E.clean)?E:new h(m,k,T)}function h(m,k,T){this.that=m,this.args=k,this.state=m.__brush,this.active=0,this.clean=T}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,k){return this.starting?(this.starting=!1,this.emit("start",m,k)):this.emit("brush",m),this},brush:function(m,k){return this.emit("brush",m,k),this},end:function(m,k){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,k)),this},emit:function(m,k,T){var E=Me(this.that).datum();o.call(m,this.that,new Fc(m,{sourceEvent:k,target:s,selection:e.output(this.state.selection),mode:T,dispatch:o}),E)}};function c(m){if(a&&!m.touches||!n.apply(this,arguments))return;var k=this,T=m.target.__data__.type,E=(i&&m.metaKey?T="overlay":T)==="selection"?Il:i&&m.altKey?gn:mn,g=e===ti?null:Vc[T],b=e===Ar?null:Bc[T],B=ni(k),V=B.extent,D=B.selection,z=V[0][0],A,S,X=V[0][1],P,q,M=V[1][0],N,te,le=V[1][1],Q,Y,G=0,W=0,fe,de=g&&b&&i&&m.shiftKey,we,ye,ue=Array.from(m.touches||[m],oe=>{const _e=oe.identifier;return oe=cl(oe,k),oe.point0=oe.slice(),oe.identifier=_e,oe});Mi(k);var O=f(k,arguments,!0).beforestart();if(T==="overlay"){D&&(fe=!0);const oe=[ue[0],ue[1]||ue[0]];B.selection=D=[[A=e===ti?z:Qe(oe[0][0],oe[1][0]),P=e===Ar?X:Qe(oe[0][1],oe[1][1])],[N=e===ti?M:Je(oe[0][0],oe[1][0]),Q=e===Ar?le:Je(oe[0][1],oe[1][1])]],ue.length>1&&C(m)}else A=D[0][0],P=D[0][1],N=D[1][0],Q=D[1][1];S=A,q=P,te=N,Y=Q;var J=Me(k).attr("pointer-events","none"),Le=J.selectAll(".overlay").attr("cursor",Ut[T]);if(m.touches)O.moved=ne,O.ended=H;else{var R=Me(m.view).on("mousemove.brush",ne,!0).on("mouseup.brush",H,!0);i&&R.on("keydown.brush",j,!0).on("keyup.brush",Oe,!0),xu(m.view)}u.call(k),O.start(m,E.name);function ne(oe){for(const _e of oe.changedTouches||[oe])for(const Ne of ue)Ne.identifier===_e.identifier&&(Ne.cur=cl(_e,k));if(de&&!we&&!ye&&ue.length===1){const _e=ue[0];Sl(_e.cur[0]-_e[0])>Sl(_e.cur[1]-_e[1])?ye=!0:we=!0}for(const _e of ue)_e.cur&&(_e[0]=_e.cur[0],_e[1]=_e.cur[1]);fe=!0,$r(oe),C(oe)}function C(oe){const _e=ue[0],Ne=_e.point0;var U;switch(G=_e[0]-Ne[0],W=_e[1]-Ne[1],E){case ei:case Il:{g&&(G=Je(z-A,Qe(M-N,G)),S=A+G,te=N+G),b&&(W=Je(X-P,Qe(le-Q,W)),q=P+W,Y=Q+W);break}case mn:{ue[1]?(g&&(S=Je(z,Qe(M,ue[0][0])),te=Je(z,Qe(M,ue[1][0])),g=1),b&&(q=Je(X,Qe(le,ue[0][1])),Y=Je(X,Qe(le,ue[1][1])),b=1)):(g<0?(G=Je(z-A,Qe(M-A,G)),S=A+G,te=N):g>0&&(G=Je(z-N,Qe(M-N,G)),S=A,te=N+G),b<0?(W=Je(X-P,Qe(le-P,W)),q=P+W,Y=Q):b>0&&(W=Je(X-Q,Qe(le-Q,W)),q=P,Y=Q+W));break}case gn:{g&&(S=Je(z,Qe(M,A-G*g)),te=Je(z,Qe(M,N+G*g))),b&&(q=Je(X,Qe(le,P-W*b)),Y=Je(X,Qe(le,Q+W*b)));break}}te<S&&(g*=-1,U=A,A=N,N=U,U=S,S=te,te=U,T in Nl&&Le.attr("cursor",Ut[T=Nl[T]])),Y<q&&(b*=-1,U=P,P=Q,Q=U,U=q,q=Y,Y=U,T in Cl&&Le.attr("cursor",Ut[T=Cl[T]])),B.selection&&(D=B.selection),we&&(S=D[0][0],te=D[1][0]),ye&&(q=D[0][1],Y=D[1][1]),(D[0][0]!==S||D[0][1]!==q||D[1][0]!==te||D[1][1]!==Y)&&(B.selection=[[S,q],[te,Y]],u.call(k),O.brush(oe,E.name))}function H(oe){if(Hc(oe),oe.touches){if(oe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Zu(oe.view,fe),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);J.attr("pointer-events","all"),Le.attr("cursor",Ut.overlay),B.selection&&(D=B.selection),zc(D)&&(B.selection=null,u.call(k)),O.end(oe,E.name)}function j(oe){switch(oe.keyCode){case 16:{de=g&&b;break}case 18:{E===mn&&(g&&(N=te-G*g,A=S+G*g),b&&(Q=Y-W*b,P=q+W*b),E=gn,C(oe));break}case 32:{(E===mn||E===gn)&&(g<0?N=te-G:g>0&&(A=S-G),b<0?Q=Y-W:b>0&&(P=q-W),E=ei,Le.attr("cursor",Ut.selection),C(oe));break}default:return}$r(oe)}function Oe(oe){switch(oe.keyCode){case 16:{de&&(we=ye=de=!1,C(oe));break}case 18:{E===gn&&(g<0?N=te:g>0&&(A=S),b<0?Q=Y:b>0&&(P=q),E=mn,C(oe));break}case 32:{E===ei&&(oe.altKey?(g&&(N=te-G*g,A=S+G*g),b&&(Q=Y-W*b,P=q+W*b),E=gn):(g<0?N=te:g>0&&(A=S),b<0?Q=Y:b>0&&(P=q),E=mn),Le.attr("cursor",Ut[T]),C(oe));break}default:return}$r(oe)}}function _(m){f(this,arguments).moved(m)}function w(m){f(this,arguments).ended(m)}function y(){var m=this.__brush||{selection:null};return m.extent=Ml(t.apply(this,arguments)),m.dim=e,m}return s.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Qr(Ml(m)),s):t},s.filter=function(m){return arguments.length?(n=typeof m=="function"?m:Qr(!!m),s):n},s.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Qr(!!m),s):r},s.handleSize=function(m){return arguments.length?(l=+m,s):l},s.keyModifiers=function(m){return arguments.length?(i=!!m,s):i},s.on=function(){var m=o.on.apply(o,arguments);return m===o?s:m},s}const Ni=Math.PI,Ci=2*Ni,rn=1e-6,qc=Ci-rn;function Li(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Di(){return new Li}Li.prototype=Di.prototype={constructor:Li,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,l=this._y1,a=n-e,s=r-t,u=o-e,f=l-t,h=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>rn)if(!(Math.abs(f*a-s*u)>rn)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var c=n-o,_=r-l,w=a*a+s*s,y=c*c+_*_,m=Math.sqrt(w),k=Math.sqrt(h),T=i*Math.tan((Ni-Math.acos((w+h-y)/(2*m*k)))/2),E=T/k,g=T/m;Math.abs(E-1)>rn&&(this._+="L"+(e+E*u)+","+(t+E*f)),this._+="A"+i+","+i+",0,0,"+ +(f*c>u*_)+","+(this._x1=e+g*a)+","+(this._y1=t+g*s)}},arc:function(e,t,n,r,i,o){e=+e,t=+t,n=+n,o=!!o;var l=n*Math.cos(r),a=n*Math.sin(r),s=e+l,u=t+a,f=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>rn||Math.abs(this._y1-u)>rn)&&(this._+="L"+s+","+u),n&&(h<0&&(h=h%Ci+Ci),h>qc?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-a)+"A"+n+","+n+",0,1,"+f+","+(this._x1=s)+","+(this._y1=u):h>rn&&(this._+="A"+n+","+n+",0,"+ +(h>=Ni)+","+f+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Ll={},ri={},ii=34,Ln=10,li=13;function wa(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Wc(e,t){var n=wa(e);return function(r,i){return t(n(r),i,e)}}function Dl(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ut(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Kc(e){return e<0?"-"+ut(-e,6):e>9999?"+"+ut(e,6):ut(e,4)}function xc(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Kc(e.getUTCFullYear())+"-"+ut(e.getUTCMonth()+1,2)+"-"+ut(e.getUTCDate(),2)+(i?"T"+ut(t,2)+":"+ut(n,2)+":"+ut(r,2)+"."+ut(i,3)+"Z":r?"T"+ut(t,2)+":"+ut(n,2)+":"+ut(r,2)+"Z":n||t?"T"+ut(t,2)+":"+ut(n,2)+"Z":"")}function Zc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,c){var _,w,y=i(h,function(m,k){if(_)return _(m,k-1);w=m,_=c?Wc(m,c):wa(m)});return y.columns=w||[],y}function i(h,c){var _=[],w=h.length,y=0,m=0,k,T=w<=0,E=!1;h.charCodeAt(w-1)===Ln&&--w,h.charCodeAt(w-1)===li&&--w;function g(){if(T)return ri;if(E)return E=!1,Ll;var B,V=y,D;if(h.charCodeAt(V)===ii){for(;y++<w&&h.charCodeAt(y)!==ii||h.charCodeAt(++y)===ii;);return(B=y)>=w?T=!0:(D=h.charCodeAt(y++))===Ln?E=!0:D===li&&(E=!0,h.charCodeAt(y)===Ln&&++y),h.slice(V+1,B-1).replace(/""/g,'"')}for(;y<w;){if((D=h.charCodeAt(B=y++))===Ln)E=!0;else if(D===li)E=!0,h.charCodeAt(y)===Ln&&++y;else if(D!==n)continue;return h.slice(V,B)}return T=!0,h.slice(V,w)}for(;(k=g())!==ri;){for(var b=[];k!==Ll&&k!==ri;)b.push(k),k=g();c&&(b=c(b,m++))==null||_.push(b)}return _}function o(h,c){return h.map(function(_){return c.map(function(w){return f(_[w])}).join(e)})}function l(h,c){return c==null&&(c=Dl(h)),[c.map(f).join(e)].concat(o(h,c)).join(`
`)}function a(h,c){return c==null&&(c=Dl(h)),o(h,c).join(`
`)}function s(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?xc(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:l,formatBody:a,formatRows:s,formatRow:u,formatValue:f}}var jc=Zc(","),Jc=jc.parse;function Qc(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function $c(e,t){return fetch(e,t).then(Qc)}function eh(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),$c(t,n).then(function(i){return e(i,r)})}}var ur=eh(Jc);function th(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Hr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Mn(e){return e=Hr(Math.abs(e)),e?e[1]:NaN}function nh(e,t){return function(n,r){for(var i=n.length,o=[],l=0,a=e[0],s=0;i>0&&a>0&&(s+a+1>r&&(a=Math.max(1,r-s)),o.push(n.substring(i-=a,i+a)),!((s+=a+1)>r));)a=e[l=(l+1)%e.length];return o.reverse().join(t)}}function rh(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ih=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vr(e){if(!(t=ih.exec(e)))throw new Error("invalid format: "+e);var t;return new $i({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vr.prototype=$i.prototype;function $i(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lh(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ba;function oh(e,t){var n=Hr(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(ba=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Hr(e,Math.max(0,t+o-1))[0]}function Ol(e,t){var n=Hr(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Rl={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:th,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ol(e*100,t),r:Ol,s:oh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Fl(e){return e}var Hl=Array.prototype.map,Vl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function ah(e){var t=e.grouping===void 0||e.thousands===void 0?Fl:nh(Hl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Fl:rh(Hl.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Vr(h);var c=h.fill,_=h.align,w=h.sign,y=h.symbol,m=h.zero,k=h.width,T=h.comma,E=h.precision,g=h.trim,b=h.type;b==="n"?(T=!0,b="g"):Rl[b]||(E===void 0&&(E=12),g=!0,b="g"),(m||c==="0"&&_==="=")&&(m=!0,c="0",_="=");var B=y==="$"?n:y==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",V=y==="$"?r:/[%p]/.test(b)?l:"",D=Rl[b],z=/[defgprs%]/.test(b);E=E===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function A(S){var X=B,P=V,q,M,N;if(b==="c")P=D(S)+P,S="";else{S=+S;var te=S<0||1/S<0;if(S=isNaN(S)?s:D(Math.abs(S),E),g&&(S=lh(S)),te&&+S==0&&w!=="+"&&(te=!1),X=(te?w==="("?w:a:w==="-"||w==="("?"":w)+X,P=(b==="s"?Vl[8+ba/3]:"")+P+(te&&w==="("?")":""),z){for(q=-1,M=S.length;++q<M;)if(N=S.charCodeAt(q),48>N||N>57){P=(N===46?i+S.slice(q+1):S.slice(q))+P,S=S.slice(0,q);break}}}T&&!m&&(S=t(S,1/0));var le=X.length+S.length+P.length,Q=le<k?new Array(k-le+1).join(c):"";switch(T&&m&&(S=t(Q+S,Q.length?k-P.length:1/0),Q=""),_){case"<":S=X+S+P+Q;break;case"=":S=X+Q+S+P;break;case"^":S=Q.slice(0,le=Q.length>>1)+X+S+P+Q.slice(le);break;default:S=Q+X+S+P;break}return o(S)}return A.toString=function(){return h+""},A}function f(h,c){var _=u((h=Vr(h),h.type="f",h)),w=Math.max(-8,Math.min(8,Math.floor(Mn(c)/3)))*3,y=Math.pow(10,-w),m=Vl[8+w/3];return function(k){return _(y*k)+m}}return{format:u,formatPrefix:f}}var fr,Jt,ka;sh({thousands:",",grouping:[3],currency:["$",""]});function sh(e){return fr=ah(e),Jt=fr.format,ka=fr.formatPrefix,fr}function uh(e){return Math.max(0,-Mn(Math.abs(e)))}function fh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mn(t)/3)))*3-Mn(Math.abs(e)))}function ch(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mn(t)-Mn(e))+1}function hh(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function dh(){return this.eachAfter(hh)}function _h(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function mh(e,t){for(var n=this,r=[n],i,o,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function gh(e,t){for(var n=this,r=[n],i=[],o,l,a,s=-1;n=r.pop();)if(i.push(n),o=n.children)for(l=0,a=o.length;l<a;++l)r.push(o[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function ph(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function yh(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function vh(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function wh(e){for(var t=this,n=bh(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function bh(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function kh(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Eh(){return Array.from(this)}function Ah(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ih(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Sh(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Ea(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Nh)):t===void 0&&(t=Mh);for(var n=new Xn(e),r,i=[n],o,l,a,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,a=s-1;a>=0;--a)i.push(o=l[a]=new Xn(l[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Aa)}function Th(){return Ea(this).eachBefore(Ch)}function Mh(e){return e.children}function Nh(e){return Array.isArray(e)?e[1]:null}function Ch(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Aa(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Xn(e){this.data=e,this.depth=this.height=0,this.parent=null}Xn.prototype=Ea.prototype={constructor:Xn,count:dh,each:_h,eachAfter:gh,eachBefore:mh,find:ph,sum:yh,sort:vh,path:wh,ancestors:kh,descendants:Eh,leaves:Ah,links:Ih,copy:Th,[Symbol.iterator]:Sh};function oi(e){return e==null?null:Ia(e)}function Ia(e){if(typeof e!="function")throw new Error;return e}function Dn(){return 0}function On(e){return function(){return e}}function Lh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Dh(e,t,n,r,i){for(var o=e.children,l,a=-1,s=o.length,u=e.value&&(r-t)/e.value;++a<s;)l=o[a],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var Oh={depth:-1},Bl={},ai={};function Rh(e){return e.id}function Fh(e){return e.parentId}function Hh(){var e=Rh,t=Fh,n;function r(i){var o=Array.from(i),l=e,a=t,s,u,f,h,c,_,w,y,m=new Map;if(n!=null){const k=o.map((g,b)=>Vh(n(g,b,i))),T=k.map(Pl),E=new Set(k).add("");for(const g of T)E.has(g)||(E.add(g),k.push(g),T.push(Pl(g)),o.push(ai));l=(g,b)=>k[b],a=(g,b)=>T[b]}for(f=0,s=o.length;f<s;++f)u=o[f],_=o[f]=new Xn(u),(w=l(u,f,i))!=null&&(w+="")&&(y=_.id=w,m.set(y,m.has(y)?Bl:_)),(w=a(u,f,i))!=null&&(w+="")&&(_.parent=w);for(f=0;f<s;++f)if(_=o[f],w=_.parent){if(c=m.get(w),!c)throw new Error("missing: "+w);if(c===Bl)throw new Error("ambiguous: "+w);c.children?c.children.push(_):c.children=[_],_.parent=c}else{if(h)throw new Error("multiple roots");h=_}if(!h)throw new Error("no root");if(n!=null){for(;h.data===ai&&h.children.length===1;)h=h.children[0],--s;for(let k=o.length-1;k>=0&&(_=o[k],_.data===ai);--k)_.data=null}if(h.parent=Oh,h.eachBefore(function(k){k.depth=k.parent.depth+1,--s}).eachBefore(Aa),h.parent=null,s>0)throw new Error("cycle");return h}return r.id=function(i){return arguments.length?(e=oi(i),r):e},r.parentId=function(i){return arguments.length?(t=oi(i),r):t},r.path=function(i){return arguments.length?(n=oi(i),r):n},r}function Vh(e){e=`${e}`;let t=e.length;return Oi(e,t-1)&&!Oi(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Pl(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Oi(e,t););return e.slice(0,t)}function Oi(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Bh(e,t,n,r,i){for(var o=e.children,l,a=-1,s=o.length,u=e.value&&(i-n)/e.value;++a<s;)l=o[a],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var Ph=(1+Math.sqrt(5))/2;function Gh(e,t,n,r,i,o){for(var l=[],a=t.children,s,u,f=0,h=0,c=a.length,_,w,y=t.value,m,k,T,E,g,b,B;f<c;){_=i-n,w=o-r;do m=a[h++].value;while(!m&&h<c);for(k=T=m,b=Math.max(w/_,_/w)/(y*e),B=m*m*b,g=Math.max(T/B,B/k);h<c;++h){if(m+=u=a[h].value,u<k&&(k=u),u>T&&(T=u),B=m*m*b,E=Math.max(T/B,B/k),E>g){m-=u;break}g=E}l.push(s={value:m,dice:_<w,children:a.slice(f,h)}),s.dice?Dh(s,n,r,i,y?r+=w*m/y:o):Bh(s,n,r,y?n+=_*m/y:i,o),y-=m,f=h}return l}const Uh=function e(t){function n(r,i,o,l,a){Gh(t,r,i,o,l,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Ph);function zh(){var e=Uh,t=!1,n=1,r=1,i=[0],o=Dn,l=Dn,a=Dn,s=Dn,u=Dn;function f(c){return c.x0=c.y0=0,c.x1=n,c.y1=r,c.eachBefore(h),i=[0],t&&c.eachBefore(Lh),c}function h(c){var _=i[c.depth],w=c.x0+_,y=c.y0+_,m=c.x1-_,k=c.y1-_;m<w&&(w=m=(w+m)/2),k<y&&(y=k=(y+k)/2),c.x0=w,c.y0=y,c.x1=m,c.y1=k,c.children&&(_=i[c.depth+1]=o(c)/2,w+=u(c)-_,y+=l(c)-_,m-=a(c)-_,k-=s(c)-_,m<w&&(w=m=(w+m)/2),k<y&&(y=k=(y+k)/2),e(c,w,y,m,k))}return f.round=function(c){return arguments.length?(t=!!c,f):t},f.size=function(c){return arguments.length?(n=+c[0],r=+c[1],f):[n,r]},f.tile=function(c){return arguments.length?(e=Ia(c),f):e},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(o=typeof c=="function"?c:On(+c),f):o},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(l=typeof c=="function"?c:On(+c),f):l},f.paddingRight=function(c){return arguments.length?(a=typeof c=="function"?c:On(+c),f):a},f.paddingBottom=function(c){return arguments.length?(s=typeof c=="function"?c:On(+c),f):s},f.paddingLeft=function(c){return arguments.length?(u=typeof c=="function"?c:On(+c),f):u},f}function Yh(e,t,n,r,i){var o=e.children,l,a=o.length,s,u=new Array(a+1);for(u[0]=s=l=0;l<a;++l)u[l+1]=s+=o[l].value;f(0,a,e.value,t,n,r,i);function f(h,c,_,w,y,m,k){if(h>=c-1){var T=o[h];T.x0=w,T.y0=y,T.x1=m,T.y1=k;return}for(var E=u[h],g=_/2+E,b=h+1,B=c-1;b<B;){var V=b+B>>>1;u[V]<g?b=V+1:B=V}g-u[b-1]<u[b]-g&&h+1<b&&--b;var D=u[b]-E,z=_-D;if(m-w>k-y){var A=_?(w*z+m*D)/_:m;f(h,b,D,w,y,A,k),f(b,c,z,A,y,m,k)}else{var S=_?(y*z+k*D)/_:k;f(h,b,D,w,y,m,S),f(b,c,z,w,S,m,k)}}}function Sa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Gl=Symbol("implicit");function Ri(){var e=new hi,t=[],n=[],r=Gl;function i(o){let l=e.get(o);if(l===void 0){if(r!==Gl)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new hi;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Ri(t,n).unknown(r)},Sa.apply(i,arguments),i}function Xh(e){return function(){return e}}function qh(e){return+e}var Ul=[0,1];function kn(e){return e}function Fi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Xh(isNaN(t)?NaN:.5)}function Wh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Kh(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=Fi(i,r),o=n(l,o)):(r=Fi(r,i),o=n(o,l)),function(a){return o(r(a))}}function xh(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Fi(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(a){var s=Ja(e,a,1,r)-1;return o[s](i[s](a))}}function Zh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function jh(){var e=Ul,t=Ul,n=Wr,r,i,o,l=kn,a,s,u;function f(){var c=Math.min(e.length,t.length);return l!==kn&&(l=Wh(e[0],e[c-1])),a=c>2?xh:Kh,s=u=null,h}function h(c){return c==null||isNaN(c=+c)?o:(s||(s=a(e.map(r),t,n)))(r(l(c)))}return h.invert=function(c){return l(i((u||(u=a(t,e.map(r),kt)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,qh),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=vf,f()},h.clamp=function(c){return arguments.length?(l=c?!0:kn,f()):l!==kn},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,_){return r=c,i=_,f()}}function Jh(){return jh()(kn,kn)}function Qh(e,t,n,r){var i=rs(e,t,n),o;switch(r=Vr(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=fh(i,l))&&(r.precision=o),ka(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=ch(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=uh(i))&&(r.precision=o-(r.type==="%")*2);break}}return Jt(r)}function $h(e){var t=e.domain;return e.ticks=function(n){var r=t();return ns(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Qh(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],a=r[o],s,u,f=10;for(a<l&&(u=l,l=a,a=u,u=i,i=o,o=u);f-- >0;){if(u=Ko(l,a,n),u===s)return r[i]=l,r[o]=a,t(r);if(u>0)l=Math.floor(l/u)*u,a=Math.ceil(a/u)*u;else if(u<0)l=Math.ceil(l*u)/u,a=Math.floor(a*u)/u;else break;s=u}return e},e}function Pn(){var e=Jh();return e.copy=function(){return Zh(e,Pn())},Sa.apply(e,arguments),$h(e)}function e0(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const zl=e0("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function En(e,t,n){this.k=e,this.x=t,this.y=n}En.prototype={constructor:En,scale:function(e){return e===1?this:new En(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new En(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new En(1,0,0);En.prototype;function t0(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function n0(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=ae("div"),this.h()},l(i){t=se(i,"DIV",{class:!0});var o=L(t);o.forEach(v),this.h()},h(){d(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,o){K(i,t,o),t.innerHTML=n},p(i,[o]){o&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),o&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&d(t,"class",r)},i:Ve,o:Ve,d(i){i&&v(t)}}}function r0(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:o=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:a=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,f="";return e.$$set=h=>{"isActive"in h&&n(4,r=h.isActive),"isFirst"in h&&n(5,i=h.isFirst),"isHover"in h&&n(6,o=h.isHover),"isSelectable"in h&&n(7,l=h.isSelectable),"getOptionLabel"in h&&n(0,a=h.getOptionLabel),"item"in h&&n(1,s=h.item),"filterText"in h&&n(2,u=h.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const h=[];r&&h.push("active"),i&&h.push("first"),o&&h.push("hover"),s.isGroupHeader&&h.push("groupHeader"),s.isGroupItem&&h.push("groupItem"),l||h.push("notSelectable"),n(3,f=h.join(" "))}},[a,s,u,f,r,i,o,l]}class Ta extends It{constructor(t){super(),St(this,t,r0,n0,Tt,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Yl(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function i0(e){let t,n,r=e[1],i=[];for(let a=0;a<r.length;a+=1)i[a]=Wl(Yl(e,r,a));const o=a=>ve(i[a],1,1,()=>{i[a]=null});let l=null;return r.length||(l=Xl(e)),{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=ke(),l&&l.c()},l(a){for(let s=0;s<i.length;s+=1)i[s].l(a);t=ke(),l&&l.l(a)},m(a,s){for(let u=0;u<i.length;u+=1)i[u].m(a,s);K(a,t,s),l&&l.m(a,s),n=!0},p(a,s){if(s[0]&114390){r=a[1];let u;for(u=0;u<r.length;u+=1){const f=Yl(a,r,u);i[u]?(i[u].p(f,s),he(i[u],1)):(i[u]=Wl(f),i[u].c(),he(i[u],1),i[u].m(t.parentNode,t))}for(xe(),u=r.length;u<i.length;u+=1)o(u);Ze(),!r.length&&l?l.p(a,s):r.length?l&&(l.d(1),l=null):(l=Xl(a),l.c(),l.m(t.parentNode,t))}},i(a){if(!n){for(let s=0;s<r.length;s+=1)he(i[s]);n=!0}},o(a){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)ve(i[s]);n=!1},d(a){Bi(i,a),a&&v(t),l&&l.d(a)}}}function l0(e){let t,n,r;var i=e[3];function o(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[s0,({item:a,i:s})=>({41:a,42:s}),({item:a,i:s})=>[0,(a?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=nt(i,o(e))),{c(){t&&Ge(t.$$.fragment),n=ke()},l(l){t&&_t(t.$$.fragment,l),n=ke()},m(l,a){t&&Ue(t,l,a),K(l,n,a),r=!0},p(l,a){const s={};if(a[0]&2&&(s.items=l[1]),a[0]&256&&(s.itemHeight=l[8]),a[0]&9814|a[1]&11264&&(s.$$scope={dirty:a,ctx:l}),i!==(i=l[3])){if(t){xe();const u=t;ve(u.$$.fragment,1,0,()=>{ze(u,1)}),Ze()}i?(t=nt(i,o(l)),Ge(t.$$.fragment),he(t.$$.fragment,1),Ue(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&he(t.$$.fragment,l),r=!0)},o(l){t&&ve(t.$$.fragment,l),r=!1},d(l){l&&v(n),t&&ze(t,l)}}}function Xl(e){let t,n=!e[11]&&ql(e);return{c(){n&&n.c(),t=ke()},l(r){n&&n.l(r),t=ke()},m(r,i){n&&n.m(r,i),K(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=ql(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&v(t)}}}function ql(e){let t,n;return{c(){t=ae("div"),n=me(e[12]),this.h()},l(r){t=se(r,"DIV",{class:!0});var i=L(t);n=ge(i,e[12]),i.forEach(v),this.h()},h(){d(t,"class","empty svelte-1uyqfml")},m(r,i){K(r,t,i),I(t,n)},p(r,i){i[0]&4096&&Ke(n,r[12])},d(r){r&&v(t)}}}function o0(e){let t,n,r,i,o,l;var a=e[4];function s(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:Hi(c[42]),isActive:Br(c[41],c[9],c[10]),isHover:Pr(c[2],c[41],c[42],c[1]),isSelectable:cn(c[41])}}}a&&(n=nt(a,s(e)));function u(){return e[29](e[42])}function f(){return e[30](e[42])}function h(...c){return e[31](e[41],e[42],...c)}return{c(){t=ae("div"),n&&Ge(n.$$.fragment),r=Ae(),this.h()},l(c){t=se(c,"DIV",{class:!0,tabindex:!0});var _=L(t);n&&_t(n.$$.fragment,_),r=Ie(_),_.forEach(v),this.h()},h(){d(t,"class","listItem"),d(t,"tabindex","-1")},m(c,_){K(c,t,_),n&&Ue(n,t,null),I(t,r),i=!0,o||(l=[Z(t,"mouseover",u),Z(t,"focus",f),Z(t,"click",h)],o=!0)},p(c,_){e=c;const w={};if(_[0]&2&&(w.item=e[41]),_[0]&8192&&(w.filterText=e[13]),_[0]&64&&(w.getOptionLabel=e[6]),_[0]&1538&&(w.isActive=Br(e[41],e[9],e[10])),_[0]&6&&(w.isHover=Pr(e[2],e[41],e[42],e[1])),_[0]&2&&(w.isSelectable=cn(e[41])),a!==(a=e[4])){if(n){xe();const y=n;ve(y.$$.fragment,1,0,()=>{ze(y,1)}),Ze()}a?(n=nt(a,s(e)),Ge(n.$$.fragment),he(n.$$.fragment,1),Ue(n,t,r)):n=null}else a&&n.$set(w)},i(c){i||(n&&he(n.$$.fragment,c),i=!0)},o(c){n&&ve(n.$$.fragment,c),i=!1},d(c){c&&v(t),n&&ze(n),o=!1,ht(l)}}}function a0(e){let t,n=e[7](e[41])+"",r;return{c(){t=ae("div"),r=me(n),this.h()},l(i){t=se(i,"DIV",{class:!0});var o=L(t);r=ge(o,n),o.forEach(v),this.h()},h(){d(t,"class","listGroupTitle svelte-1uyqfml")},m(i,o){K(i,t,o),I(t,r)},p(i,o){o[0]&130&&n!==(n=i[7](i[41])+"")&&Ke(r,n)},i:Ve,o:Ve,d(i){i&&v(t)}}}function Wl(e){let t,n,r,i;const o=[a0,o0],l=[];function a(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=a(e),n=l[t]=o[t](e),{c(){n.c(),r=ke()},l(s){n.l(s),r=ke()},m(s,u){l[t].m(s,u),K(s,r,u),i=!0},p(s,u){let f=t;t=a(s),t===f?l[t].p(s,u):(xe(),ve(l[f],1,1,()=>{l[f]=null}),Ze(),n=l[t],n?n.p(s,u):(n=l[t]=o[t](s),n.c()),he(n,1),n.m(r.parentNode,r))},i(s){i||(he(n),i=!0)},o(s){ve(n),i=!1},d(s){l[t].d(s),s&&v(r)}}}function s0(e){let t,n,r,i,o;var l=e[4];function a(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:Hi(h[42]),isActive:Br(h[41],h[9],h[10]),isHover:Pr(h[2],h[41],h[42],h[1]),isSelectable:cn(h[41])}}}l&&(n=nt(l,a(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function f(...h){return e[28](e[41],e[42],...h)}return{c(){t=ae("div"),n&&Ge(n.$$.fragment),this.h()},l(h){t=se(h,"DIV",{class:!0});var c=L(t);n&&_t(n.$$.fragment,c),c.forEach(v),this.h()},h(){d(t,"class","listItem")},m(h,c){K(h,t,c),n&&Ue(n,t,null),r=!0,i||(o=[Z(t,"mouseover",s),Z(t,"focus",u),Z(t,"click",f)],i=!0)},p(h,c){e=h;const _={};if(c[1]&1024&&(_.item=e[41]),c[0]&8192&&(_.filterText=e[13]),c[0]&64&&(_.getOptionLabel=e[6]),c[1]&2048&&(_.isFirst=Hi(e[42])),c[0]&1536|c[1]&1024&&(_.isActive=Br(e[41],e[9],e[10])),c[0]&6|c[1]&3072&&(_.isHover=Pr(e[2],e[41],e[42],e[1])),c[1]&1024&&(_.isSelectable=cn(e[41])),l!==(l=e[4])){if(n){xe();const w=n;ve(w.$$.fragment,1,0,()=>{ze(w,1)}),Ze()}l?(n=nt(l,a(e)),Ge(n.$$.fragment),he(n.$$.fragment,1),Ue(n,t,null)):n=null}else l&&n.$set(_)},i(h){r||(n&&he(n.$$.fragment,h),r=!0)},o(h){n&&ve(n.$$.fragment,h),r=!1},d(h){h&&v(t),n&&ze(n),i=!1,ht(o)}}}function u0(e){let t,n,r,i,o,l;const a=[l0,i0],s=[];function u(f,h){return f[5]?0:1}return n=u(e),r=s[n]=a[n](e),{c(){t=ae("div"),r.c(),this.h()},l(f){t=se(f,"DIV",{class:!0,style:!0});var h=L(t);r.l(h),h.forEach(v),this.h()},h(){d(t,"class","listContainer svelte-1uyqfml"),d(t,"style",e[14]),$e(t,"virtualList",e[5])},m(f,h){K(f,t,h),s[n].m(t,null),e[32](t),i=!0,o||(l=[Z(window,"keydown",e[17]),Z(window,"resize",e[18])],o=!0)},p(f,h){let c=n;n=u(f),n===c?s[n].p(f,h):(xe(),ve(s[c],1,1,()=>{s[c]=null}),Ze(),r=s[n],r?r.p(f,h):(r=s[n]=a[n](f),r.c()),he(r,1),r.m(t,null)),(!i||h[0]&16384)&&d(t,"style",f[14]),(!i||h[0]&32)&&$e(t,"virtualList",f[5])},i(f){i||(he(r),i=!0)},o(f){ve(r),i=!1},d(f){f&&v(t),s[n].d(),e[32](null),o=!1,ht(l)}}}function Br(e,t,n){return t&&t[n]===e[n]}function Hi(e){return e===0}function Pr(e,t,n,r){return cn(t)&&(e===n||r.length===1)}function cn(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function f0(e,t,n){const r=Vi();let{container:i=void 0}=t,{VirtualList:o=null}=t,{Item:l=Ta}=t,{isVirtualList:a=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:f=(O,J)=>{if(O)return O.isCreator?`Create "${J}"`:O[u]}}=t,{getGroupHeaderLabel:h=null}=t,{itemHeight:c=40}=t,{hoverItemIndex:_=0}=t,{value:w=void 0}=t,{optionIdentifier:y="value"}=t,{hideEmptyState:m=!1}=t,{noOptionsMessage:k="No options"}=t,{isMulti:T=!1}=t,{activeItemIndex:E=0}=t,{filterText:g=""}=t,{parent:b=null}=t,{listPlacement:B=null}=t,{listAutoWidth:V=null}=t,{listOffset:D=5}=t,z=0,A=!1,S;Yr(()=>{if(s.length>0&&!T&&w){const O=s.findIndex(J=>J[y]===w[y]);O&&n(2,_=O)}le("active"),i.addEventListener("scroll",()=>{clearTimeout(z),z=setTimeout(()=>{A=!1},100)},!1)}),Yo(()=>{s||n(1,s=[]),s!==S&&s.length>0&&n(2,_=0),S=s});function X(O){O.isCreator||r("itemSelected",O)}function P(O){A||n(2,_=O)}function q(O){const{item:J,i:Le,event:R}=O;if(R.stopPropagation(),w&&!T&&w[y]===J[y])return M();J.isCreator?r("itemCreated",g):cn(J)&&(n(19,E=Le),n(2,_=Le),X(J))}function M(){r("closeList")}async function N(O){if(a)return;let J=!0;for(;J;)O>0&&_===s.length-1?n(2,_=0):O<0&&_===0?n(2,_=s.length-1):n(2,_=_+O),J=!cn(s[_]);await yr(),le("hover")}function te(O){switch(O.key){case"Escape":O.preventDefault(),M();break;case"ArrowDown":O.preventDefault(),s.length&&N(1);break;case"ArrowUp":O.preventDefault(),s.length&&N(-1);break;case"Enter":if(O.preventDefault(),s.length===0)break;const J=s[_];if(w&&!T&&w[y]===J[y]){M();break}J.isCreator?r("itemCreated",g):(n(19,E=_),X(s[_]));break;case"Tab":if(O.preventDefault(),s.length===0||w&&w[y]===s[_][y])return M();n(19,E=_),X(s[_]);break}}function le(O){if(a||!i)return;let J;const Le=i.querySelector(`.listItem .${O}`);Le&&(J=i.getBoundingClientRect().bottom-Le.getBoundingClientRect().bottom),n(0,i.scrollTop-=J,i)}let Q;function Y(){const{height:O,width:J}=b.getBoundingClientRect();n(14,Q=""),n(14,Q+=`min-width:${J}px;width:${V?"auto":"100%"};`),B==="top"||B==="auto"&&t0(b,i).bottom?n(14,Q+=`bottom:${O+D}px;`):n(14,Q+=`top:${O+D}px;`)}const G=O=>P(O),W=O=>P(O),fe=(O,J,Le)=>q({item:O,i:J,event:Le}),de=O=>P(O),we=O=>P(O),ye=(O,J,Le)=>q({item:O,i:J,event:Le});function ue(O){ot[O?"unshift":"push"](()=>{i=O,n(0,i)})}return e.$$set=O=>{"container"in O&&n(0,i=O.container),"VirtualList"in O&&n(3,o=O.VirtualList),"Item"in O&&n(4,l=O.Item),"isVirtualList"in O&&n(5,a=O.isVirtualList),"items"in O&&n(1,s=O.items),"labelIdentifier"in O&&n(20,u=O.labelIdentifier),"getOptionLabel"in O&&n(6,f=O.getOptionLabel),"getGroupHeaderLabel"in O&&n(7,h=O.getGroupHeaderLabel),"itemHeight"in O&&n(8,c=O.itemHeight),"hoverItemIndex"in O&&n(2,_=O.hoverItemIndex),"value"in O&&n(9,w=O.value),"optionIdentifier"in O&&n(10,y=O.optionIdentifier),"hideEmptyState"in O&&n(11,m=O.hideEmptyState),"noOptionsMessage"in O&&n(12,k=O.noOptionsMessage),"isMulti"in O&&n(21,T=O.isMulti),"activeItemIndex"in O&&n(19,E=O.activeItemIndex),"filterText"in O&&n(13,g=O.filterText),"parent"in O&&n(22,b=O.parent),"listPlacement"in O&&n(23,B=O.listPlacement),"listAutoWidth"in O&&n(24,V=O.listAutoWidth),"listOffset"in O&&n(25,D=O.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&b&&i&&Y()},[i,s,_,o,l,a,f,h,c,w,y,m,k,g,Q,P,q,te,Y,E,u,T,b,B,V,D,G,W,fe,de,we,ye,ue]}class c0 extends It{constructor(t){super(),St(this,t,f0,u0,Tt,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function h0(e){let t,n=e[0](e[1])+"";return{c(){t=ae("div"),this.h()},l(r){t=se(r,"DIV",{class:!0});var i=L(t);i.forEach(v),this.h()},h(){d(t,"class","selection svelte-pu1q1n")},m(r,i){K(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Ve,o:Ve,d(r){r&&v(t)}}}function d0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=o=>{"getSelectionLabel"in o&&n(0,r=o.getSelectionLabel),"item"in o&&n(1,i=o.item)},[r,i]}class _0 extends It{constructor(t){super(),St(this,t,d0,h0,Tt,{getSelectionLabel:0,item:1})}}function Kl(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function xl(e){let t,n,r,i,o;function l(...a){return e[6](e[11],...a)}return{c(){t=ae("div"),n=re("svg"),r=re("path"),this.h()},l(a){t=se(a,"DIV",{class:!0});var s=L(t);n=ie(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=L(n);r=ie(u,"path",{d:!0}),L(r).forEach(v),u.forEach(v),s.forEach(v),this.h()},h(){d(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),d(n,"width","100%"),d(n,"height","100%"),d(n,"viewBox","-2 -2 50 50"),d(n,"focusable","false"),d(n,"aria-hidden","true"),d(n,"role","presentation"),d(n,"class","svelte-liu9pa"),d(t,"class","multiSelectItem_clear svelte-liu9pa")},m(a,s){K(a,t,s),I(t,n),I(n,r),i||(o=Z(t,"click",l),i=!0)},p(a,s){e=a},d(a){a&&v(t),i=!1,o()}}}function Zl(e){let t,n,r=e[4](e[9])+"",i,o,l,a,s,u=!e[2]&&!e[3]&&xl(e);function f(...h){return e[7](e[11],...h)}return{c(){t=ae("div"),n=ae("div"),i=Ae(),u&&u.c(),o=Ae(),this.h()},l(h){t=se(h,"DIV",{class:!0});var c=L(t);n=se(c,"DIV",{class:!0});var _=L(n);_.forEach(v),i=Ie(c),u&&u.l(c),o=Ie(c),c.forEach(v),this.h()},h(){d(n,"class","multiSelectItem_label svelte-liu9pa"),d(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(h,c){K(h,t,c),I(t,n),n.innerHTML=r,I(t,i),u&&u.m(t,null),I(t,o),a||(s=Z(t,"click",f),a=!0)},p(h,c){e=h,c&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,c):(u=xl(e),u.c(),u.m(t,o)):u&&(u.d(1),u=null),c&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&d(t,"class",l)},d(h){h&&v(t),u&&u.d(),a=!1,s()}}}function m0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=Zl(Kl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=ke()},l(i){for(let o=0;o<r.length;o+=1)r[o].l(i);t=ke()},m(i,o){for(let l=0;l<r.length;l+=1)r[l].m(i,o);K(i,t,o)},p(i,[o]){if(o&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const a=Kl(i,n,l);r[l]?r[l].p(a,o):(r[l]=Zl(a),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Ve,o:Ve,d(i){Bi(r,i),i&&v(t)}}}function g0(e,t,n){const r=Vi();let{value:i=[]}=t,{activeValue:o=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:a=!1}=t,{getSelectionLabel:s=void 0}=t;function u(c,_){_.stopPropagation(),r("multiItemClear",{i:c})}const f=(c,_)=>u(c,_),h=(c,_)=>a?u(c,_):{};return e.$$set=c=>{"value"in c&&n(0,i=c.value),"activeValue"in c&&n(1,o=c.activeValue),"isDisabled"in c&&n(2,l=c.isDisabled),"multiFullItemClearable"in c&&n(3,a=c.multiFullItemClearable),"getSelectionLabel"in c&&n(4,s=c.getSelectionLabel)},[i,o,l,a,s,u,f,h]}class p0 extends It{constructor(t){super(),St(this,t,g0,m0,Tt,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function jl(e,t,n){const r=e.slice();return r[23]=t[n],r}const y0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),Jl=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function v0(e){let t;return{c(){t=me("Missing template")},l(n){t=ge(n,"Missing template")},m(n,r){K(n,t,r)},d(n){n&&v(t)}}}function Ql(e,t){let n,r,i;const o=t[15].default,l=La(o,t,t[14],Jl),a=l||v0();return{key:e,first:null,c(){n=ae("svelte-virtual-list-row"),a&&a.c(),r=Ae(),this.h()},l(s){n=se(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=L(n);a&&a.l(u),r=Ie(u),u.forEach(v),this.h()},h(){ci(n,"class","svelte-g2cagw"),this.first=n},m(s,u){K(s,n,u),a&&a.m(n,null),I(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&Da(l,o,t,t[14],i?Ra(o,t[14],u,y0):Oa(t[14]),Jl)},i(s){i||(he(a,s),i=!0)},o(s){ve(a,s),i=!1},d(s){s&&v(n),a&&a.d(s)}}}function w0(e){let t,n,r=[],i=new Map,o,l,a,s,u=e[5];const f=h=>h[23].index;for(let h=0;h<u.length;h+=1){let c=jl(e,u,h),_=f(c);i.set(_,r[h]=Ql(_,c))}return{c(){t=ae("svelte-virtual-list-viewport"),n=ae("svelte-virtual-list-contents");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){t=se(h,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var c=L(t);n=se(c,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=L(n);for(let w=0;w<r.length;w+=1)r[w].l(_);_.forEach(v),c.forEach(v),this.h()},h(){_n(n,"padding-top",e[6]+"px"),_n(n,"padding-bottom",e[7]+"px"),ci(n,"class","svelte-g2cagw"),_n(t,"height",e[0]),ci(t,"class","svelte-g2cagw"),hn(()=>e[18].call(t))},m(h,c){K(h,t,c),I(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),o=Xr(t,e[18].bind(t)),l=!0,a||(s=Z(t,"scroll",e[8]),a=!0)},p(h,[c]){c&16418&&(u=h[5],xe(),r=jt(r,c,f,1,h,u,i,n,Ca,Ql,null,jl),Ze()),(!l||c&64)&&_n(n,"padding-top",h[6]+"px"),(!l||c&128)&&_n(n,"padding-bottom",h[7]+"px"),(!l||c&1)&&_n(t,"height",h[0])},i(h){if(!l){for(let c=0;c<u.length;c+=1)he(r[c]);l=!0}},o(h){for(let c=0;c<r.length;c+=1)ve(r[c]);l=!1},d(h){h&&v(t);for(let c=0;c<r.length;c+=1)r[c].d();e[16](null),e[17](null),o(),a=!1,s()}}}function b0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:o=void 0}=t,{height:l="100%"}=t,{itemHeight:a=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:f=0}=t,h=[],c,_,w,y=0,m,k,T=0,E=0,g;async function b(A,S,X){const{scrollTop:P}=_;await yr();let q=T-P,M=u;for(;q<S&&M<A.length;){let te=c[M-u];te||(n(10,f=M+1),await yr(),te=c[M-u]);const le=h[M]=X||te.offsetHeight;q+=le,M+=1}n(10,f=M);const N=A.length-f;g=(T+q)/f,n(7,E=N*g),h.length=A.length,_&&n(3,_.scrollTop=0,_)}async function B(){const{scrollTop:A}=_,S=u;for(let M=0;M<c.length;M+=1)h[u+M]=a||c[M].offsetHeight;let X=0,P=0;for(;X<o.length;){const M=h[X]||g;if(P+M>A){n(9,u=X),n(6,T=P);break}P+=M,X+=1}for(;X<o.length&&(P+=h[X]||g,X+=1,!(P>A+y)););n(10,f=X);const q=o.length-f;for(g=P/f;X<o.length;)h[X++]=g;if(n(7,E=q*g),u<S){await yr();let M=0,N=0;for(let le=u;le<S;le+=1)c[le-u]&&(M+=h[le],N+=a||c[le-u].offsetHeight);const te=N-M;_.scrollTo(0,A+te)}}Yr(()=>{c=w.getElementsByTagName("svelte-virtual-list-row"),n(13,k=!0)});function V(A){ot[A?"unshift":"push"](()=>{w=A,n(4,w)})}function D(A){ot[A?"unshift":"push"](()=>{_=A,n(3,_)})}function z(){y=this.offsetHeight,n(2,y)}return e.$$set=A=>{"items"in A&&n(11,o=A.items),"height"in A&&n(0,l=A.height),"itemHeight"in A&&n(12,a=A.itemHeight),"hoverItemIndex"in A&&n(1,s=A.hoverItemIndex),"start"in A&&n(9,u=A.start),"end"in A&&n(10,f=A.end),"$$scope"in A&&n(14,i=A.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,m=o.slice(u,f).map((A,S)=>({index:S+u,data:A}))),e.$$.dirty&14340&&k&&b(o,y,a)},[l,s,y,_,w,m,T,E,B,u,f,o,a,k,i,r,V,D,z]}class k0 extends It{constructor(t){super(),St(this,t,b0,w0,Tt,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function E0(e){let t,n;return{c(){t=re("svg"),n=re("path"),this.h()},l(r){t=ie(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=L(t);n=ie(i,"path",{fill:!0,d:!0}),L(n).forEach(v),i.forEach(v),this.h()},h(){d(n,"fill","currentColor"),d(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","-2 -2 50 50"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"role","presentation")},m(r,i){K(r,t,i),I(t,n)},p:Ve,i:Ve,o:Ve,d(r){r&&v(t)}}}class A0 extends It{constructor(t){super(),St(this,t,null,E0,Tt,{})}}function I0(e,t,n){let r;return function(){let o=this,l=arguments,a=function(){r=null,n||e.apply(o,l)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(o,l)}}function $l(e,t,n){const r=e.slice();return r[103]=t[n],r}function eo(e){let t,n,r,i,o;return{c(){t=ae("span"),n=me(e[33]),r=Ae(),i=ae("span"),o=me(e[32]),this.h()},l(l){t=se(l,"SPAN",{id:!0});var a=L(t);n=ge(a,e[33]),a.forEach(v),r=Ie(l),i=se(l,"SPAN",{id:!0});var s=L(i);o=ge(s,e[32]),s.forEach(v),this.h()},h(){d(t,"id","aria-selection"),d(i,"id","aria-context")},m(l,a){K(l,t,a),I(t,n),K(l,r,a),K(l,i,a),I(i,o)},p(l,a){a[1]&4&&Ke(n,l[33]),a[1]&2&&Ke(o,l[32])},d(l){l&&v(t),l&&v(r),l&&v(i)}}}function to(e){let t,n,r;const i=[e[18]];var o=e[17];function l(a){let s={};for(let u=0;u<i.length;u+=1)s=Pi(s,i[u]);return{props:s}}return o&&(t=nt(o,l())),{c(){t&&Ge(t.$$.fragment),n=ke()},l(a){t&&_t(t.$$.fragment,a),n=ke()},m(a,s){t&&Ue(t,a,s),K(a,n,s),r=!0},p(a,s){const u=s[0]&262144?Gi(i,[Xo(a[18])]):{};if(o!==(o=a[17])){if(t){xe();const f=t;ve(f.$$.fragment,1,0,()=>{ze(f,1)}),Ze()}o?(t=nt(o,l()),Ge(t.$$.fragment),he(t.$$.fragment,1),Ue(t,n.parentNode,n)):t=null}else o&&t.$set(u)},i(a){r||(t&&he(t.$$.fragment,a),r=!0)},o(a){t&&ve(t.$$.fragment,a),r=!1},d(a){a&&v(n),t&&ze(t,a)}}}function no(e){let t,n,r;var i=e[26];function o(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=nt(i,o(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Ge(t.$$.fragment),n=ke()},l(l){t&&_t(t.$$.fragment,l),n=ke()},m(l,a){t&&Ue(t,l,a),K(l,n,a),r=!0},p(l,a){const s={};if(a[0]&4&&(s.value=l[2]),a[0]&4096&&(s.getSelectionLabel=l[12]),a[0]&1073741824&&(s.activeValue=l[30]),a[0]&512&&(s.isDisabled=l[9]),a[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){xe();const u=t;ve(u.$$.fragment,1,0,()=>{ze(u,1)}),Ze()}i?(t=nt(i,o(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),Ge(t.$$.fragment),he(t.$$.fragment,1),Ue(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&he(t.$$.fragment,l),r=!0)},o(l){t&&ve(t.$$.fragment,l),r=!1},d(l){l&&v(n),t&&ze(t,l)}}}function ro(e){let t,n,r,i,o;var l=e[25];function a(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=nt(l,a(e))),{c(){t=ae("div"),n&&Ge(n.$$.fragment),this.h()},l(s){t=se(s,"DIV",{class:!0});var u=L(t);n&&_t(n.$$.fragment,u),u.forEach(v),this.h()},h(){d(t,"class","selectedItem svelte-17l1npl")},m(s,u){K(s,t,u),n&&Ue(n,t,null),r=!0,i||(o=Z(t,"focus",e[40]),i=!0)},p(s,u){const f={};if(u[0]&4&&(f.item=s[2]),u[0]&4096&&(f.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){xe();const h=n;ve(h.$$.fragment,1,0,()=>{ze(h,1)}),Ze()}l?(n=nt(l,a(s)),Ge(n.$$.fragment),he(n.$$.fragment,1),Ue(n,t,null)):n=null}else l&&n.$set(f)},i(s){r||(n&&he(n.$$.fragment,s),r=!0)},o(s){n&&ve(n.$$.fragment,s),r=!1},d(s){s&&v(t),n&&ze(n),i=!1,o()}}}function io(e){let t,n,r,i,o;var l=e[23];function a(s){return{}}return l&&(n=nt(l,a())),{c(){t=ae("div"),n&&Ge(n.$$.fragment),this.h()},l(s){t=se(s,"DIV",{class:!0,"aria-hidden":!0});var u=L(t);n&&_t(n.$$.fragment,u),u.forEach(v),this.h()},h(){d(t,"class","clearSelect svelte-17l1npl"),d(t,"aria-hidden","true")},m(s,u){K(s,t,u),n&&Ue(n,t,null),r=!0,i||(o=Z(t,"click",Fa(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){xe();const f=n;ve(f.$$.fragment,1,0,()=>{ze(f,1)}),Ze()}l?(n=nt(l,a()),Ge(n.$$.fragment),he(n.$$.fragment,1),Ue(n,t,null)):n=null}},i(s){r||(n&&he(n.$$.fragment,s),r=!0)},o(s){n&&ve(n.$$.fragment,s),r=!1},d(s){s&&v(t),n&&ze(n),i=!1,o()}}}function lo(e){let t;function n(o,l){return o[22]?T0:S0}let r=n(e),i=r(e);return{c(){t=ae("div"),i.c(),this.h()},l(o){t=se(o,"DIV",{class:!0,"aria-hidden":!0});var l=L(t);i.l(l),l.forEach(v),this.h()},h(){d(t,"class","indicator svelte-17l1npl"),d(t,"aria-hidden","true")},m(o,l){K(o,t,l),i.m(t,null)},p(o,l){r===(r=n(o))&&i?i.p(o,l):(i.d(1),i=r(o),i&&(i.c(),i.m(t,null)))},d(o){o&&v(t),i.d()}}}function S0(e){let t,n;return{c(){t=re("svg"),n=re("path"),this.h()},l(r){t=ie(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=L(t);n=ie(i,"path",{d:!0}),L(n).forEach(v),i.forEach(v),this.h()},h(){d(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","0 0 20 20"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"class","svelte-17l1npl")},m(r,i){K(r,t,i),I(t,n)},p:Ve,d(r){r&&v(t)}}}function T0(e){let t,n;return{c(){t=new Va(!1),n=ke(),this.h()},l(r){t=Ba(r,!1),n=ke(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),K(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&v(n),r&&t.d()}}}function oo(e){let t,n,r;return{c(){t=ae("div"),n=re("svg"),r=re("circle"),this.h()},l(i){t=se(i,"DIV",{class:!0});var o=L(t);n=ie(o,"svg",{class:!0,viewBox:!0});var l=L(n);r=ie(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),L(r).forEach(v),l.forEach(v),o.forEach(v),this.h()},h(){d(r,"class","spinner_path svelte-17l1npl"),d(r,"cx","50"),d(r,"cy","50"),d(r,"r","20"),d(r,"fill","none"),d(r,"stroke","currentColor"),d(r,"stroke-width","5"),d(r,"stroke-miterlimit","10"),d(n,"class","spinner_icon svelte-17l1npl"),d(n,"viewBox","25 25 50 50"),d(t,"class","spinner svelte-17l1npl")},m(i,o){K(i,t,o),I(t,n),I(n,r)},d(i){i&&v(t)}}}function ao(e){let t,n,r,i;const o=[e[34]];function l(u){e[84](u)}var a=e[24];function s(u){let f={};for(let h=0;h<o.length;h+=1)f=Pi(f,o[h]);return u[28]!==void 0&&(f.hoverItemIndex=u[28]),{props:f}}return a&&(t=nt(a,s(e)),ot.push(()=>nl(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Ge(t.$$.fragment),r=ke()},l(u){t&&_t(t.$$.fragment,u),r=ke()},m(u,f){t&&Ue(t,u,f),K(u,r,f),i=!0},p(u,f){const h=f[1]&8?Gi(o,[Xo(u[34])]):{};if(!n&&f[0]&268435456&&(n=!0,h.hoverItemIndex=u[28],Ha(()=>n=!1)),a!==(a=u[24])){if(t){xe();const c=t;ve(c.$$.fragment,1,0,()=>{ze(c,1)}),Ze()}a?(t=nt(a,s(u)),ot.push(()=>nl(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),Ge(t.$$.fragment),he(t.$$.fragment,1),Ue(t,r.parentNode,r)):t=null}else a&&t.$set(h)},i(u){i||(t&&he(t.$$.fragment,u),i=!0)},o(u){t&&ve(t.$$.fragment,u),i=!1},d(u){u&&v(r),t&&ze(t,u)}}}function so(e){let t,n,r;return{c(){t=ae("input"),this.h()},l(i){t=se(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,d(t,"class","svelte-17l1npl")},m(i,o){K(i,t,o)},p(i,o){o[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),o[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&v(t)}}}function uo(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=fo($l(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=ke()},l(i){for(let o=0;o<r.length;o+=1)r[o].l(i);t=ke()},m(i,o){for(let l=0;l<r.length;l+=1)r[l].m(i,o);K(i,t,o)},p(i,o){if(o[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const a=$l(i,n,l);r[l]?r[l].p(a,o):(r[l]=fo(a),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){Bi(r,i),i&&v(t)}}}function fo(e){let t,n,r;return{c(){t=ae("input"),this.h()},l(i){t=se(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,d(t,"class","svelte-17l1npl")},m(i,o){K(i,t,o)},p(i,o){o[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),o[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&v(t)}}}function M0(e){let t,n,r,i,o,l,a,s,u,f,h,c,_,w,y,m,k,T,E=e[1]&&eo(e),g=e[17]&&to(e),b=e[35]&&no(e),B=[{readOnly:a=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],V={};for(let M=0;M<B.length;M+=1)V=Pi(V,B[M]);let D=!e[7]&&e[29]&&ro(e),z=e[37]&&io(e),A=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&lo(e),S=e[4]&&oo(),X=e[5]&&ao(e),P=(!e[7]||e[7]&&!e[35])&&so(e),q=e[7]&&e[35]&&uo(e);return{c(){t=ae("div"),n=ae("span"),E&&E.c(),r=Ae(),g&&g.c(),i=Ae(),b&&b.c(),o=Ae(),l=ae("input"),s=Ae(),D&&D.c(),u=Ae(),z&&z.c(),f=Ae(),A&&A.c(),h=Ae(),S&&S.c(),c=Ae(),X&&X.c(),_=Ae(),P&&P.c(),w=Ae(),q&&q.c(),this.h()},l(M){t=se(M,"DIV",{class:!0,style:!0});var N=L(t);n=se(N,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var te=L(n);E&&E.l(te),te.forEach(v),r=Ie(N),g&&g.l(N),i=Ie(N),b&&b.l(N),o=Ie(N),l=se(N,"INPUT",{placeholder:!0,style:!0}),s=Ie(N),D&&D.l(N),u=Ie(N),z&&z.l(N),f=Ie(N),A&&A.l(N),h=Ie(N),S&&S.l(N),c=Ie(N),X&&X.l(N),_=Ie(N),P&&P.l(N),w=Ie(N),q&&q.l(N),N.forEach(v),this.h()},h(){d(n,"aria-live","polite"),d(n,"aria-atomic","false"),d(n,"aria-relevant","additions text"),d(n,"class","a11yText svelte-17l1npl"),el(l,V),$e(l,"svelte-17l1npl",!0),d(t,"class",y="selectContainer "+e[21]+" svelte-17l1npl"),d(t,"style",e[11]),$e(t,"hasError",e[10]),$e(t,"multiSelect",e[7]),$e(t,"disabled",e[9]),$e(t,"focused",e[1])},m(M,N){K(M,t,N),I(t,n),E&&E.m(n,null),I(t,r),g&&g.m(t,null),I(t,i),b&&b.m(t,null),I(t,o),I(t,l),l.autofocus&&l.focus(),e[82](l),tl(l,e[3]),I(t,s),D&&D.m(t,null),I(t,u),z&&z.m(t,null),I(t,f),A&&A.m(t,null),I(t,h),S&&S.m(t,null),I(t,c),X&&X.m(t,null),I(t,_),P&&P.m(t,null),I(t,w),q&&q.m(t,null),e[85](t),m=!0,k||(T=[Z(window,"click",e[41]),Z(window,"focusin",e[41]),Z(window,"keydown",e[39]),Z(l,"focus",e[40]),Z(l,"input",e[83]),Z(t,"click",e[42])],k=!0)},p(M,N){M[1]?E?E.p(M,N):(E=eo(M),E.c(),E.m(n,null)):E&&(E.d(1),E=null),M[17]?g?(g.p(M,N),N[0]&131072&&he(g,1)):(g=to(M),g.c(),he(g,1),g.m(t,i)):g&&(xe(),ve(g,1,1,()=>{g=null}),Ze()),M[35]?b?(b.p(M,N),N[1]&16&&he(b,1)):(b=no(M),b.c(),he(b,1),b.m(t,o)):b&&(xe(),ve(b,1,1,()=>{b=null}),Ze()),el(l,V=Gi(B,[(!m||N[0]&8192&&a!==(a=!M[13]))&&{readOnly:a},N[1]&1&&M[31],(!m||N[1]&32)&&{placeholder:M[36]},(!m||N[0]&16384)&&{style:M[14]},(!m||N[0]&512)&&{disabled:M[9]}])),N[0]&8&&l.value!==M[3]&&tl(l,M[3]),$e(l,"svelte-17l1npl",!0),!M[7]&&M[29]?D?(D.p(M,N),N[0]&536871040&&he(D,1)):(D=ro(M),D.c(),he(D,1),D.m(t,u)):D&&(xe(),ve(D,1,1,()=>{D=null}),Ze()),M[37]?z?(z.p(M,N),N[1]&64&&he(z,1)):(z=io(M),z.c(),he(z,1),z.m(t,f)):z&&(xe(),ve(z,1,1,()=>{z=null}),Ze()),!M[37]&&(M[20]||M[19]&&!M[2]||!M[13]&&!M[9]&&!M[4]&&(M[29]&&!M[15]||!M[29]))?A?A.p(M,N):(A=lo(M),A.c(),A.m(t,h)):A&&(A.d(1),A=null),M[4]?S||(S=oo(),S.c(),S.m(t,c)):S&&(S.d(1),S=null),M[5]?X?(X.p(M,N),N[0]&32&&he(X,1)):(X=ao(M),X.c(),he(X,1),X.m(t,_)):X&&(xe(),ve(X,1,1,()=>{X=null}),Ze()),!M[7]||M[7]&&!M[35]?P?P.p(M,N):(P=so(M),P.c(),P.m(t,w)):P&&(P.d(1),P=null),M[7]&&M[35]?q?q.p(M,N):(q=uo(M),q.c(),q.m(t,null)):q&&(q.d(1),q=null),(!m||N[0]&2097152&&y!==(y="selectContainer "+M[21]+" svelte-17l1npl"))&&d(t,"class",y),(!m||N[0]&2048)&&d(t,"style",M[11]),(!m||N[0]&2098176)&&$e(t,"hasError",M[10]),(!m||N[0]&2097280)&&$e(t,"multiSelect",M[7]),(!m||N[0]&2097664)&&$e(t,"disabled",M[9]),(!m||N[0]&2097154)&&$e(t,"focused",M[1])},i(M){m||(he(g),he(b),he(D),he(z),he(X),m=!0)},o(M){ve(g),ve(b),ve(D),ve(z),ve(X),m=!1},d(M){M&&v(t),E&&E.d(),g&&g.d(),b&&b.d(),e[82](null),D&&D.d(),z&&z.d(),A&&A.d(),S&&S.d(),X&&X.d(),P&&P.d(),q&&q.d(),e[85](null),k=!1,ht(T)}}}function co(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function N0(e,t,n){let r,i,o,l,a,s,u,f;const h=Vi();let{id:c=null}=t,{container:_=void 0}=t,{input:w=void 0}=t,{isMulti:y=!1}=t,{multiFullItemClearable:m=!1}=t,{isDisabled:k=!1}=t,{isCreatable:T=!1}=t,{isFocused:E=!1}=t,{value:g=null}=t,{filterText:b=""}=t,{placeholder:B="Select..."}=t,{placeholderAlwaysShow:V=!1}=t,{items:D=null}=t,{itemFilter:z=(p,ce,Ce)=>`${p}`.toLowerCase().includes(ce.toLowerCase())}=t,{groupBy:A=void 0}=t,{groupFilter:S=p=>p}=t,{isGroupHeaderSelectable:X=!1}=t,{getGroupHeaderLabel:P=p=>p[q]||p.id}=t,{labelIdentifier:q="label"}=t,{getOptionLabel:M=(p,ce)=>p.isCreator?`Create "${ce}"`:p[q]}=t,{optionIdentifier:N="value"}=t,{loadOptions:te=void 0}=t,{hasError:le=!1}=t,{containerStyles:Q=""}=t,{getSelectionLabel:Y=p=>p?p[q]:null}=t,{createGroupHeaderItem:G=p=>({value:p,label:p})}=t,{createItem:W=p=>({value:p,label:p})}=t;const fe=()=>r;let{isSearchable:de=!0}=t,{inputStyles:we=""}=t,{isClearable:ye=!0}=t,{isWaiting:ue=!1}=t,{listPlacement:O="auto"}=t,{listOpen:J=!1}=t,{isVirtualList:Le=!1}=t,{loadOptionsInterval:R=300}=t,{noOptionsMessage:ne="No options"}=t,{hideEmptyState:C=!1}=t,{inputAttributes:H={}}=t,{listAutoWidth:j=!0}=t,{itemHeight:Oe=40}=t,{Icon:oe=void 0}=t,{iconProps:_e={}}=t,{showChevron:Ne=!1}=t,{showIndicator:U=!1}=t,{containerClasses:Ee=""}=t,{indicatorSvg:De=void 0}=t,{listOffset:Pe=5}=t,{ClearIcon:Xe=A0}=t,{Item:qe=Ta}=t,{List:F=c0}=t,{Selection:ee=_0}=t,{MultiSelection:pe=p0}=t,{VirtualList:x=k0}=t;function Se(p){if(p.loadOptions&&p.filterText.length>0)return;if(!p.items)return[];p.items&&p.items.length>0&&typeof p.items[0]!="object"&&(p.items=co(p.items));let ce=p.items.filter(Ce=>{let it=z(M(Ce,p.filterText),p.filterText,Ce);return it&&p.isMulti&&p.value&&Array.isArray(p.value)&&(it=!p.value.some(Nt=>Nt[p.optionIdentifier]===Ce[p.optionIdentifier])),it});return p.groupBy&&(ce=jn(ce)),p.isCreatable&&(ce=Re(ce,p.filterText)),ce}function Re(p,ce){if(ce.length===0)return p;const Ce=W(ce);return p[0]&&ce===p[0][q]?p:(Ce.isCreator=!0,[...p,Ce])}let{selectedValue:Be=null}=t,Te,rt,at,je,gt,Fe;const Nn=I0(async()=>{n(4,ue=!0);let p=await te(b).catch(ce=>{console.warn("svelte-select loadOptions error :>> ",ce),h("error",{type:"loadOptions",details:ce})});p&&!p.cancelled&&(p?(p&&p.length>0&&typeof p[0]!="object"&&(p=co(p)),n(81,r=[...p]),h("loaded",{items:r})):n(81,r=[]),T&&n(81,r=Re(r,b)),n(4,ue=!1),n(1,E=!0),n(5,J=!0))},R);function xn(){typeof g=="string"?n(2,g={[N]:g,label:g}):y&&Array.isArray(g)&&g.length>0&&n(2,g=g.map(p=>typeof p=="string"?{value:p,label:p}:p))}let He;function Zn(){n(31,He=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},H)),c&&n(31,He.id=c,He),de||n(31,He.readonly=!0,He)}function jn(p){const ce=[],Ce={};p.forEach(Nt=>{const Pt=A(Nt);ce.includes(Pt)||(ce.push(Pt),Ce[Pt]=[],Pt&&Ce[Pt].push(Object.assign(G(Pt,Nt),{id:Pt,isGroupHeader:!0,isSelectable:X}))),Ce[Pt].push(Object.assign({isGroupItem:!!Pt},Nt))});const it=[];return S(ce).forEach(Nt=>{it.push(...Ce[Nt])}),it}function Jn(){if(y){JSON.stringify(g)!==JSON.stringify(rt)&&be()&&h("select",g);return}(!rt||JSON.stringify(g[N])!==JSON.stringify(rt[N]))&&h("select",g)}function Qn(){E||J?yt():w&&w.blur()}function $n(){g&&(Array.isArray(g)?n(2,g=[...g]):n(2,g=[g]))}function er(){g&&n(2,g=null)}function $(){b.length!==0&&(n(1,E=!0),n(5,J=!0),te?Nn():(n(5,J=!0),y&&n(30,Te=void 0)))}Yo(async()=>{n(77,rt=g),n(78,at=b),n(79,je=E),n(80,gt=y)});function be(){let p=!0;if(g){const ce=[],Ce=[];g.forEach(it=>{ce.includes(it[N])?p=!1:(ce.push(it[N]),Ce.push(it))}),p||n(2,g=Ce)}return p}function st(p){let ce=p?p[N]:g[N];return D.find(Ce=>Ce[N]===ce)}function pt(p){!p||p.length===0||p.some(ce=>typeof ce!="object")||!g||(y?g.some(ce=>!ce||!ce[N]):!g[N])||(Array.isArray(g)?n(2,g=g.map(ce=>st(ce)||ce)):n(2,g=st()||g))}function Wt(p){const{detail:ce}=p,Ce=g[ce?ce.i:g.length-1];g.length===1?n(2,g=void 0):n(2,g=g.filter(it=>it!==Ce)),h("clear",Ce)}function $t(p){if(!!E)switch(p.key){case"ArrowDown":p.preventDefault(),n(5,J=!0),n(30,Te=void 0);break;case"ArrowUp":p.preventDefault(),n(5,J=!0),n(30,Te=void 0);break;case"Tab":J||n(1,E=!1);break;case"Backspace":if(!y||b.length>0)return;if(y&&g&&g.length>0){if(Wt(Te!==void 0?Te:g.length-1),Te===0||Te===void 0)break;n(30,Te=g.length>Te?Te-1:void 0)}break;case"ArrowLeft":if(!y||b.length>0)return;Te===void 0?n(30,Te=g.length-1):g.length>Te&&Te!==0&&n(30,Te-=1);break;case"ArrowRight":if(!y||b.length>0||Te===void 0)return;Te===g.length-1?n(30,Te=void 0):Te<g.length-1&&n(30,Te+=1);break}}function yt(){n(1,E=!0),w&&w.focus()}function en(p){if(!_)return;const ce=p.path&&p.path.length>0?p.path[0]:p.target;_.contains(ce)||_.contains(p.relatedTarget)||(n(1,E=!1),n(5,J=!1),n(30,Te=void 0),w&&w.blur())}function dn(){k||(n(1,E=!0),n(5,J=!J))}function tn(){n(2,g=void 0),n(5,J=!1),h("clear",g),yt()}Yr(()=>{E&&w&&w.focus()});function vt(p){const{detail:ce}=p;if(ce){n(3,b="");const Ce=Object.assign({},ce);(!Ce.isGroupHeader||Ce.isSelectable)&&(y?n(2,g=g?g.concat([Ce]):[Ce]):n(2,g=Ce),n(2,g),setTimeout(()=>{n(5,J=!1),n(30,Te=void 0)}))}}function Ht(p){const{detail:ce}=p;y?(n(2,g=g||[]),n(2,g=[...g,W(ce)])):n(2,g=W(ce)),h("itemCreated",ce),n(3,b=""),n(5,J=!1),n(30,Te=void 0)}function wt(){n(3,b=""),n(5,J=!1)}let{ariaValues:dt=p=>`Option ${p}, selected.`}=t,{ariaListOpen:Vt=(p,ce)=>`You are currently focused on option ${p}. There are ${ce} results available.`}=t,{ariaFocused:Bt=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function nn(){let p;return y&&g.length>0?p=g.map(ce=>Y(ce)).join(", "):p=Y(g),dt(p)}function tr(){if(!E||!r||r.length===0)return"";let p=r[Fe];if(J&&p){let ce=Y(p),Ce=r?r.length:0;return Vt(ce,Ce)}else return Bt()}function bt(p){ot[p?"unshift":"push"](()=>{w=p,n(6,w)})}function nr(){b=this.value,n(3,b)}function rr(p){Fe=p,n(28,Fe)}function ir(p){ot[p?"unshift":"push"](()=>{_=p,n(0,_)})}return e.$$set=p=>{"id"in p&&n(46,c=p.id),"container"in p&&n(0,_=p.container),"input"in p&&n(6,w=p.input),"isMulti"in p&&n(7,y=p.isMulti),"multiFullItemClearable"in p&&n(8,m=p.multiFullItemClearable),"isDisabled"in p&&n(9,k=p.isDisabled),"isCreatable"in p&&n(47,T=p.isCreatable),"isFocused"in p&&n(1,E=p.isFocused),"value"in p&&n(2,g=p.value),"filterText"in p&&n(3,b=p.filterText),"placeholder"in p&&n(48,B=p.placeholder),"placeholderAlwaysShow"in p&&n(49,V=p.placeholderAlwaysShow),"items"in p&&n(50,D=p.items),"itemFilter"in p&&n(51,z=p.itemFilter),"groupBy"in p&&n(52,A=p.groupBy),"groupFilter"in p&&n(53,S=p.groupFilter),"isGroupHeaderSelectable"in p&&n(54,X=p.isGroupHeaderSelectable),"getGroupHeaderLabel"in p&&n(55,P=p.getGroupHeaderLabel),"labelIdentifier"in p&&n(56,q=p.labelIdentifier),"getOptionLabel"in p&&n(57,M=p.getOptionLabel),"optionIdentifier"in p&&n(58,N=p.optionIdentifier),"loadOptions"in p&&n(59,te=p.loadOptions),"hasError"in p&&n(10,le=p.hasError),"containerStyles"in p&&n(11,Q=p.containerStyles),"getSelectionLabel"in p&&n(12,Y=p.getSelectionLabel),"createGroupHeaderItem"in p&&n(60,G=p.createGroupHeaderItem),"createItem"in p&&n(61,W=p.createItem),"isSearchable"in p&&n(13,de=p.isSearchable),"inputStyles"in p&&n(14,we=p.inputStyles),"isClearable"in p&&n(15,ye=p.isClearable),"isWaiting"in p&&n(4,ue=p.isWaiting),"listPlacement"in p&&n(63,O=p.listPlacement),"listOpen"in p&&n(5,J=p.listOpen),"isVirtualList"in p&&n(64,Le=p.isVirtualList),"loadOptionsInterval"in p&&n(65,R=p.loadOptionsInterval),"noOptionsMessage"in p&&n(66,ne=p.noOptionsMessage),"hideEmptyState"in p&&n(67,C=p.hideEmptyState),"inputAttributes"in p&&n(16,H=p.inputAttributes),"listAutoWidth"in p&&n(68,j=p.listAutoWidth),"itemHeight"in p&&n(69,Oe=p.itemHeight),"Icon"in p&&n(17,oe=p.Icon),"iconProps"in p&&n(18,_e=p.iconProps),"showChevron"in p&&n(19,Ne=p.showChevron),"showIndicator"in p&&n(20,U=p.showIndicator),"containerClasses"in p&&n(21,Ee=p.containerClasses),"indicatorSvg"in p&&n(22,De=p.indicatorSvg),"listOffset"in p&&n(70,Pe=p.listOffset),"ClearIcon"in p&&n(23,Xe=p.ClearIcon),"Item"in p&&n(71,qe=p.Item),"List"in p&&n(24,F=p.List),"Selection"in p&&n(25,ee=p.Selection),"MultiSelection"in p&&n(26,pe=p.MultiSelection),"VirtualList"in p&&n(72,x=p.VirtualList),"selectedValue"in p&&n(73,Be=p.selectedValue),"ariaValues"in p&&n(74,dt=p.ariaValues),"ariaListOpen"in p&&n(75,Vt=p.ariaListOpen),"ariaFocused"in p&&n(76,Bt=p.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Se({loadOptions:te,filterText:b,items:D,value:g,isMulti:y,optionIdentifier:N,groupBy:A,isCreatable:T})),e.$$.dirty[2]&2048&&Be&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&pt(D),e.$$.dirty[0]&4&&g&&xn(),e.$$.dirty[0]&73728&&(H||!de)&&Zn(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(y&&$n(),gt&&!y&&er()),e.$$.dirty[0]&132&&y&&g&&g.length>1&&be(),e.$$.dirty[0]&4&&g&&Jn(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!g&&y&&rt&&h("select",g),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&E!==je&&Qn(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&b!==at&&$(),e.$$.dirty[0]&12&&n(29,i=g&&b.length===0),e.$$.dirty[0]&536904208&&n(37,o=i&&ye&&!k&&!ue),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=V&&y?B:g?"":B),e.$$.dirty[0]&132&&n(35,a=y&&g&&g.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:qe,filterText:b,optionIdentifier:N,noOptionsMessage:ne,hideEmptyState:C,isVirtualList:Le,VirtualList:x,value:g,isMulti:y,getGroupHeaderLabel:P,items:r,itemHeight:Oe,getOptionLabel:M,listPlacement:O,parent:_,listAutoWidth:j,listOffset:Pe}),e.$$.dirty[0]&132&&n(33,u=g?nn():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,f=tr())},[_,E,g,b,ue,J,w,y,m,k,le,Q,Y,de,we,ye,H,oe,_e,Ne,U,Ee,De,Xe,F,ee,pe,tn,Fe,i,Te,He,f,u,s,a,l,o,Wt,$t,yt,en,dn,vt,Ht,wt,c,T,B,V,D,z,A,S,X,P,q,M,N,te,G,W,fe,O,Le,R,ne,C,j,Oe,Pe,qe,x,Be,dt,Vt,Bt,rt,at,je,gt,r,bt,nr,rr,ir]}class ho extends It{constructor(t){super(),St(this,t,N0,M0,Tt,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function C0(e){const t=e-1;return t*t*t+1}function Gr(e,{delay:t=0,duration:n=400,easing:r=Pa}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function L0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),o=i.transform==="none"?"":i.transform,[l,a]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*a/n.height-(n.top+a),{delay:f=0,duration:h=_=>Math.sqrt(_)*120,easing:c=C0}=r;return{delay:f,duration:Ye(h)?h(Math.sqrt(s*s+u*u)):h,easing:c,css:(_,w)=>{const y=w*s,m=w*u,k=_+w*t.width/n.width,T=_+w*t.height/n.height;return`transform: ${o} translate(${y}px, ${m}px) scale(${k}, ${T});`}}}const on=zi([2020]),lt=zi(new Set),sn=zi(!0);class D0{constructor(t){We(this,"id");We(this,"code");We(this,"name");We(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class Ir{constructor(t){We(this,"id");We(this,"code");We(this,"name");We(this,"level");We(this,"parent_id");We(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class Xt{constructor(t,n,r){We(this,"location_id");We(this,"location");We(this,"partner_id");We(this,"partner");We(this,"product_id");We(this,"product");We(this,"year");We(this,"export_value");We(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}function _o(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function mo(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function go(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function O0(e){let t,n,r,i,o;return{c(){t=re("text"),n=me("No valid data for this pair."),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var a=L(t);n=ge(a,"No valid data for this pair."),a.forEach(v),this.h()},h(){d(t,"x",r=e[3]/2),d(t,"y",i=e[9]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,a){K(l,t,a),I(t,n)},p(l,a){a[0]&8&&r!==(r=l[3]/2)&&d(t,"x",r),a[0]&512&&i!==(i=l[9]/2)&&d(t,"y",i)},i(l){o||hn(()=>{o=Ui(t,Gr,{}),o.start()})},o:Ve,d(l){l&&v(t)}}}function R0(e){var R,ne;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,o,l,a=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",s,u,f,h,c=((R=e[2])==null?void 0:R.name)+" ",_,w=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",y,m,k=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",T,E,g=((ne=e[2])==null?void 0:ne.name)+"",b,B,V,D=[],z=new Map,A,S=[],X=new Map,P,q=[],M=new Map,N,te,le,Q,Y,G,W,fe,de,we=e[10];const ye=C=>C[45].product_id;for(let C=0;C<we.length;C+=1){let H=go(e,we,C),j=ye(H);z.set(j,D[C]=yo(j,H))}let ue=e[10];const O=C=>C[47];for(let C=0;C<ue.length;C+=1){let H=mo(e,ue,C),j=O(H);X.set(j,S[C]=vo(j,H))}let J=e[10];const Le=C=>C[45].product_id;for(let C=0;C<J.length;C+=1){let H=_o(e,J,C),j=Le(H);M.set(j,q[C]=wo(j,H))}return{c(){t=re("text"),n=me("Sector "),i=me(r),o=re("text"),l=me("Trade Flow "),s=me(a),f=re("text"),h=me("Export to "),_=me(c),y=me(w),m=re("text"),T=me(k),E=me("\xA0Import from "),b=me(g),V=re("g");for(let C=0;C<D.length;C+=1)D[C].c();A=ke();for(let C=0;C<S.length;C+=1)S[C].c();P=ke();for(let C=0;C<q.length;C+=1)q[C].c();N=re("line"),Q=re("line"),G=re("g"),W=re("g"),this.h()},l(C){t=ie(C,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var H=L(t);n=ge(H,"Sector "),i=ge(H,r),H.forEach(v),o=ie(C,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var j=L(o);l=ge(j,"Trade Flow "),s=ge(j,a),j.forEach(v),f=ie(C,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var Oe=L(f);h=ge(Oe,"Export to "),_=ge(Oe,c),y=ge(Oe,w),Oe.forEach(v),m=ie(C,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var oe=L(m);T=ge(oe,k),E=ge(oe,"\xA0Import from "),b=ge(oe,g),oe.forEach(v),V=ie(C,"g",{id:!0,transform:!0});var _e=L(V);for(let Ne=0;Ne<D.length;Ne+=1)D[Ne].l(_e);A=ke();for(let Ne=0;Ne<S.length;Ne+=1)S[Ne].l(_e);P=ke();for(let Ne=0;Ne<q.length;Ne+=1)q[Ne].l(_e);N=ie(_e,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),L(N).forEach(v),Q=ie(_e,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),L(Q).forEach(v),G=ie(_e,"g",{id:!0}),L(G).forEach(v),_e.forEach(v),W=ie(C,"g",{id:!0,class:!0}),L(W).forEach(v),this.h()},h(){var C,H,j,Oe;d(t,"text-anchor","start"),d(t,"class","chart-header sortable svelte-ko6qof"),d(t,"x",15),d(t,"y",Rn/2),d(t,"alignment-baseline","hanging"),d(o,"text-anchor","middle"),d(o,"class","chart-header sortable svelte-ko6qof"),d(o,"x",u=(e[3]-Dt)/2+Dt-20),d(o,"y",Rn/2-7),d(o,"alignment-baseline","hanging"),d(f,"class","from-label sortable svelte-ko6qof"),d(f,"x",Dt),d(f,"y",Rn/2-5),d(f,"alignment-baseline","hanging"),d(f,"font-size","13"),d(m,"class","from-label sortable svelte-ko6qof"),d(m,"x",B=e[3]-20),d(m,"y",Rn/2-5),d(m,"text-anchor","end"),d(m,"alignment-baseline","hanging"),d(m,"font-size","13"),d(N,"id","midline"),d(N,"transform",te=`translate(${e[5](0)},0)`),d(N,"y1",20),d(N,"y2",le=(((H=(C=e[10])==null?void 0:C.length)!=null?H:0)+1)*tt),d(N,"stroke","rgba(0,0,0,0.7)"),d(N,"stroke-width","1"),d(N,"class","svelte-ko6qof"),d(Q,"x1",Dt),d(Q,"y1",0),d(Q,"x2",Dt),d(Q,"y2",Y=(((Oe=(j=e[10])==null?void 0:j.length)!=null?Oe:0)+1)*tt),d(Q,"stroke","rgba(0,0,0,0.1)"),d(Q,"stroke-width","1"),d(G,"id","axis"),d(V,"id","bar-content"),d(V,"transform",`translate(${0},${Rn})`),d(W,"id","bar-chart-tooltip"),d(W,"class","tooltip")},m(C,H){K(C,t,H),I(t,n),I(t,i),K(C,o,H),I(o,l),I(o,s),K(C,f,H),I(f,h),I(f,_),I(f,y),K(C,m,H),I(m,T),I(m,E),I(m,b),K(C,V,H);for(let j=0;j<D.length;j+=1)D[j].m(V,null);I(V,A);for(let j=0;j<S.length;j+=1)S[j].m(V,null);I(V,P);for(let j=0;j<q.length;j+=1)q[j].m(V,null);I(V,N),I(V,Q),I(V,G),e[37](G),K(C,W,H),fe||(de=[Z(t,"click",e[30]),Z(t,"keydown",V0),Z(o,"click",e[31]),Z(o,"keydown",B0),Z(f,"keydown",P0),Z(f,"click",e[32]),Z(m,"click",e[33]),Z(m,"keydown",G0)],fe=!0)},p(C,H){var j,Oe,oe,_e,Ne,U;if(H[0]&3&&r!==(r=C[1]==C[0].AlphaUp?"\u2191":C[1]==C[0].AlphaDown?"\u2193":" ")&&Ke(i,r),H[0]&3&&a!==(a=C[1]==C[0].Up?"\u2191":C[1]==C[0].Down?"\u2193":" ")&&Ke(s,a),H[0]&8&&u!==(u=(C[3]-Dt)/2+Dt-20)&&d(o,"x",u),H[0]&4&&c!==(c=((j=C[2])==null?void 0:j.name)+" ")&&Ke(_,c),H[0]&3&&w!==(w=C[1]==C[0].LeftUp?"\u2191":C[1]==C[0].LeftDown?"\u2193":" ")&&Ke(y,w),H[0]&3&&k!==(k=C[1]==C[0].RightUp?"\u2191":C[1]==C[0].RightDown?"\u2193":" ")&&Ke(T,k),H[0]&4&&g!==(g=((Oe=C[2])==null?void 0:Oe.name)+"")&&Ke(b,g),H[0]&8&&B!==(B=C[3]-20)&&d(m,"x",B),H[0]&1032&&(we=C[10],D=jt(D,H,ye,1,C,we,z,V,An,yo,A,go)),H[0]&64736&&(ue=C[10],S=jt(S,H,O,1,C,ue,X,V,An,vo,P,mo)),H[0]&3072){J=C[10];for(let Ee=0;Ee<q.length;Ee+=1)q[Ee].r();q=jt(q,H,Le,1,C,J,M,V,Ga,wo,N,_o);for(let Ee=0;Ee<q.length;Ee+=1)q[Ee].a()}H[0]&32&&te!==(te=`translate(${C[5](0)},0)`)&&d(N,"transform",te),H[0]&1024&&le!==(le=(((_e=(oe=C[10])==null?void 0:oe.length)!=null?_e:0)+1)*tt)&&d(N,"y2",le),H[0]&1024&&Y!==(Y=(((U=(Ne=C[10])==null?void 0:Ne.length)!=null?U:0)+1)*tt)&&d(Q,"y2",Y)},i:Ve,o:Ve,d(C){C&&v(t),C&&v(o),C&&v(f),C&&v(m),C&&v(V);for(let H=0;H<D.length;H+=1)D[H].d();for(let H=0;H<S.length;H+=1)S[H].d();for(let H=0;H<q.length;H+=1)q[H].d();e[37](null),C&&v(W),fe=!1,ht(de)}}}function po(e){let t,n;return{c(){t=re("rect"),this.h()},l(r){t=ie(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),L(t).forEach(v),this.h()},h(){d(t,"x","0"),d(t,"y",n=e[47]*tt+Qt),d(t,"height",tt),d(t,"width",e[3]),d(t,"fill","rgba(0,0,0,0.04)"),d(t,"class","svelte-ko6qof")},m(r,i){K(r,t,i)},p(r,i){i[0]&1024&&n!==(n=r[47]*tt+Qt)&&d(t,"y",n),i[0]&8&&d(t,"width",r[3])},d(r){r&&v(t)}}}function yo(e,t){let n,r,i=t[47]%2==0&&po(t);return{key:e,first:null,c(){n=ke(),i&&i.c(),r=ke(),this.h()},l(o){n=ke(),i&&i.l(o),r=ke(),this.h()},h(){this.first=n},m(o,l){K(o,n,l),i&&i.m(o,l),K(o,r,l)},p(o,l){t=o,t[47]%2==0?i?i.p(t,l):(i=po(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(o){o&&v(n),i&&i.d(o),o&&v(r)}}}function vo(e,t){let n,r,i,o,l,a,s,u,f,h,c,_,w,y,m;function k(){return t[34](t[45])}function T(){return t[35](t[45])}return{key:e,first:null,c(){n=re("g"),r=re("rect"),l=re("rect"),f=re("rect"),this.h()},l(E){n=ie(E,"g",{class:!0,transform:!0});var g=L(n);r=ie(g,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),L(r).forEach(v),l=ie(g,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),L(l).forEach(v),f=ie(g,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),L(f).forEach(v),g.forEach(v),this.h()},h(){d(r,"class","tab svelte-ko6qof"),d(r,"x","0"),d(r,"y","2"),d(r,"height",tt-4),d(r,"width",i=t[11].size>0&&t[11].has(t[45].product_id)?Dt-1:6),d(r,"fill",o=t[6]?t[6](t[45].product.name):"white"),d(l,"class","country1-bar svelte-ko6qof"),d(l,"x",a=t[5](-t[45].export_value)),d(l,"y",cr/2),d(l,"height",tt-cr),d(l,"width",s=t[5](0)-t[5](-t[45].export_value)),d(l,"fill",u=t[7](t[45].location_id)),d(f,"class","country2-bar svelte-ko6qof"),d(f,"x",h=t[5](0)),d(f,"y",cr/2),d(f,"height",tt-cr),d(f,"width",c=t[5](t[45].import_value)-t[5](0)),d(f,"fill",_=t[7](t[45].partner_id)),d(n,"class","bar-row"),d(n,"transform",w=`translate(0, ${t[47]*tt+Qt})`),this.first=n},m(E,g){K(E,n,g),I(n,r),I(n,l),I(n,f),y||(m=[Z(l,"focus",t[29]),Z(l,"keydown",U0),Z(l,"mouseover",function(){Ye(t[13](t[45],!0))&&t[13](t[45],!0).apply(this,arguments)}),Z(l,"mousemove",t[14]()),Z(l,"mouseleave",t[15]()),Z(l,"click",k),Z(f,"focus",t[28]),Z(f,"keydown",z0),Z(f,"mouseover",function(){Ye(t[13](t[45],!1))&&t[13](t[45],!1).apply(this,arguments)}),Z(f,"mousemove",t[14]()),Z(f,"mouseleave",t[15]()),Z(f,"click",T)],y=!0)},p(E,g){t=E,g[0]&3072&&i!==(i=t[11].size>0&&t[11].has(t[45].product_id)?Dt-1:6)&&d(r,"width",i),g[0]&1088&&o!==(o=t[6]?t[6](t[45].product.name):"white")&&d(r,"fill",o),g[0]&1056&&a!==(a=t[5](-t[45].export_value))&&d(l,"x",a),g[0]&1056&&s!==(s=t[5](0)-t[5](-t[45].export_value))&&d(l,"width",s),g[0]&1152&&u!==(u=t[7](t[45].location_id))&&d(l,"fill",u),g[0]&32&&h!==(h=t[5](0))&&d(f,"x",h),g[0]&1056&&c!==(c=t[5](t[45].import_value)-t[5](0))&&d(f,"width",c),g[0]&1152&&_!==(_=t[7](t[45].partner_id))&&d(f,"fill",_),g[0]&1024&&w!==(w=`translate(0, ${t[47]*tt+Qt})`)&&d(n,"transform",w)},d(E){E&&v(n),y=!1,ht(m)}}}function wo(e,t){let n,r=t[45].product.name+"",i,o,l,a=Ve,s,u;function f(){return t[36](t[45])}return{key:e,first:null,c(){n=re("text"),i=me(r),this.h()},l(h){n=ie(h,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var c=L(n);i=ge(c,r),c.forEach(v),this.h()},h(){d(n,"class","product-text svelte-ko6qof"),d(n,"alignment-baseline","hanging"),d(n,"x","10"),d(n,"y",o=t[47]*tt+Qt+6),this.first=n},m(h,c){K(h,n,c),I(n,i),s||(u=[Z(n,"click",f),Z(n,"keydown",Y0)],s=!0)},p(h,c){t=h,c[0]&1024&&r!==(r=t[45].product.name+"")&&Ke(i,r),c[0]&1024&&o!==(o=t[47]*tt+Qt+6)&&d(n,"y",o)},r(){l=n.getBoundingClientRect()},f(){Ua(n),a()},a(){a(),a=za(n,l,L0,{duration:400,delay:20})},d(h){h&&v(n),s=!1,ht(u)}}}function bo(e){let t,n,r,i,o;return{c(){t=re("rect"),n=re("text"),r=me("Loading..."),this.h()},l(l){t=ie(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),L(t).forEach(v),n=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var a=L(n);r=ge(a,"Loading..."),a.forEach(v),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[3]),d(t,"height",e[9]),d(t,"fill","rgba(255,255,255,0.9)"),d(t,"class","svelte-ko6qof"),d(n,"x",i=e[3]/2),d(n,"y",o=e[9]/2),d(n,"alignment-baseline","central"),d(n,"text-anchor","middle")},m(l,a){K(l,t,a),K(l,n,a),I(n,r)},p(l,a){a[0]&8&&d(t,"width",l[3]),a[0]&512&&d(t,"height",l[9]),a[0]&8&&i!==(i=l[3]/2)&&d(n,"x",i),a[0]&512&&o!==(o=l[9]/2)&&d(n,"y",o)},d(l){l&&v(t),l&&v(n)}}}function F0(e){let t,n,r,i,o;function l(f,h){return f[10]&&f[10].length>0?R0:O0}let a=l(e),s=a(e),u=e[8]&&bo(e);return{c(){t=ae("div"),n=re("svg"),s.c(),r=ke(),u&&u.c(),this.h()},l(f){t=se(f,"DIV",{id:!0,class:!0});var h=L(t);n=ie(h,"svg",{height:!0,class:!0});var c=L(n);s.l(c),r=ke(),u&&u.l(c),c.forEach(v),h.forEach(v),this.h()},h(){var f,h;d(n,"height",i=Math.max(e[9],(((h=(f=e[10])==null?void 0:f.length)!=null?h:0)+1)*tt+Qt)),d(n,"class","svelte-ko6qof"),d(t,"id","bar-chart"),d(t,"class","viz-section svelte-ko6qof"),hn(()=>e[38].call(t))},m(f,h){K(f,t,h),I(t,n),s.m(n,null),I(n,r),u&&u.m(n,null),o=Xr(t,e[38].bind(t))},p(f,h){var c,_;a===(a=l(f))&&s?s.p(f,h):(s.d(1),s=a(f),s&&(s.c(),he(s,1),s.m(n,r))),f[8]?u?u.p(f,h):(u=bo(f),u.c(),u.m(n,null)):u&&(u.d(1),u=null),h[0]&1536&&i!==(i=Math.max(f[9],(((_=(c=f[10])==null?void 0:c.length)!=null?_:0)+1)*tt+Qt))&&d(n,"height",i)},i(f){he(s)},o:Ve,d(f){f&&v(t),s.d(),u&&u.d(),o()}}}const Rn=40,tt=30,ko=0,H0=10,Qt=30,Dt=100,cr=4,hr=10,Eo=140,Ao=25,si=105,Kt=20,xt=35,pn=22,V0=()=>{},B0=()=>{},P0=()=>{},G0=()=>{},U0=()=>{},z0=()=>{},Y0=()=>{};function X0(e,t,n){let r,i,o,l,a,s,u,f,h,c,_,w,y;At(e,on,R=>n(27,_=R)),At(e,lt,R=>n(11,w=R)),At(e,sn,R=>n(12,y=R));let{data:m}=t;var k;(function(R){R[R.LeftUp=0]="LeftUp",R[R.LeftDown=1]="LeftDown",R[R.RightUp=2]="RightUp",R[R.RightDown=3]="RightDown",R[R.Up=4]="Up",R[R.Down=5]="Down",R[R.AlphaUp=6]="AlphaUp",R[R.AlphaDown=7]="AlphaDown"})(k||(k={}));let T=k.AlphaDown,{bilateralData:E,productColorScale:g,countryColorScale:b,country1:B,country2:V,loadingDrilldown:D,productData:z,locationData:A}=m,S=800,X=550,P;const q=R=>Jt("$.3s")(R).replace(/G/,"B");function M(R,ne,C){return R+C<S?R+ne:R+ne-C}function N(R,ne){return R+si<X?R+ne:R+ne-si}function te(R,ne){return C=>{let H=Me("#bar-chart-tooltip"),j=Eo+_.length*Ao;H.append("rect").attr("id","tooltip-rect").attr("width",j).attr("height",si).attr("x",M(C.layerX,hr,j)).attr("y",N(C.layerY,hr)),H.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",M(C.layerX,Kt,j)).attr("y",N(C.layerY,xt)).style("fill",b?b(ne?R.location_id:R.partner_id):"black").text(`${R.product.name}`),H.append("text").attr("id","tooltip-text2").attr("x",M(C.layerX,Kt,j)).attr("y",N(C.layerY,xt+pn)).text((ne?"Export: ":"Import: ")+`${q(ne?R.export_value:R.import_value)}`),H.append("text").attr("id","tooltip-text3").attr("x",M(C.layerX,Kt,j)).attr("y",N(C.layerY,xt+2*pn)).text(`Share: ${Jt(".2%")(ne?R.export_value/f:R.import_value/h)}`),H.append("text").attr("id","tooltip-text4").attr("x",M(C.layerX,Kt,j)).attr("y",N(C.layerY,xt+3*pn)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function le(){return R=>{let ne=Eo+_.length*Ao;Me("#tooltip-rect").attr("x",M(R.layerX,hr,ne)).attr("y",N(R.layerY,hr)),Me("#tooltip-text1").attr("x",M(R.layerX,Kt,ne)).attr("y",N(R.layerY,xt)),Me("#tooltip-text2").attr("x",M(R.layerX,Kt,ne)).attr("y",N(R.layerY,xt+pn)),Me("#tooltip-text3").attr("x",M(R.layerX,Kt,ne)).attr("y",N(R.layerY,xt+2*pn)),Me("#tooltip-text4").attr("x",M(R.layerX,Kt,ne)).attr("y",N(R.layerY,xt+3*pn))}}function Q(){return R=>{Me("#bar-chart-tooltip").selectAll("rect").remove(),Me("#bar-chart-tooltip").selectAll("text").remove()}}function Y(R){ft.call(this,e,R)}function G(R){ft.call(this,e,R)}const W=()=>{T==k.AlphaDown?n(1,T=k.AlphaUp):n(1,T=k.AlphaDown)},fe=()=>{T==k.Down?n(1,T=k.Up):n(1,T=k.Down)},de=()=>{T==k.LeftDown?n(1,T=k.LeftUp):n(1,T=k.LeftDown)},we=()=>{T==k.RightDown?n(1,T=k.RightUp):n(1,T=k.RightDown)},ye=R=>{y||(sn.set(!0),lt.update(ne=>(ne.clear(),ne))),w.has(R==null?void 0:R.product_id)?lt.update(ne=>{var C;return ne.delete((C=R==null?void 0:R.product_id)!=null?C:-1),ne}):(R==null?void 0:R.product_id)>=0&&lt.update(ne=>{var C;return ne.add((C=R==null?void 0:R.product_id)!=null?C:-1),ne})},ue=R=>{y&&(sn.set(!1),lt.update(ne=>(ne.clear(),ne))),w.has(R==null?void 0:R.product_id)?lt.update(ne=>{var C;return ne.delete((C=R==null?void 0:R.product_id)!=null?C:-1),ne}):(R==null?void 0:R.product_id)>=0&&lt.update(ne=>{var C;return ne.add((C=R==null?void 0:R.product_id)!=null?C:-1),ne})},O=R=>{w.has(R.product_id)?lt.update(ne=>(ne.delete(R.product_id),ne)):lt.update(ne=>(ne.add(R.product_id),ne))};function J(R){ot[R?"unshift":"push"](()=>{P=R,n(4,P)})}function Le(){S=this.clientWidth,X=this.clientHeight,n(3,S),n(9,X)}return e.$$set=R=>{"data"in R&&n(16,m=R.data)},e.$$.update=()=>{var R,ne,C;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:E,productColorScale:g,countryColorScale:b,country1:B,country2:V,loadingDrilldown:D,productData:z,locationData:A}=m,E,(n(6,g),n(16,m)),(n(7,b),n(16,m)),(n(18,B),n(16,m)),(n(2,V),n(16,m)),(n(8,D),n(16,m)),(n(19,z),n(16,m)),(n(20,A),n(16,m))),e.$$.dirty[0]&393220&&n(26,r=(C=E==null?void 0:E.get((R=B==null?void 0:B.id)!=null?R:0))==null?void 0:C.get((ne=V==null?void 0:V.id)!=null?ne:0)),e.$$.dirty[0]&201326592&&n(25,i=_.map(H=>{var j;return(j=r==null?void 0:r.get(H))!=null?j:new Array}).flat()),e.$$.dirty[0]&35389444&&n(23,o=Array.from(_i(i,H=>{var j,Oe;return H.reduce((oe,_e)=>(oe.export_value+=_e.export_value,oe.import_value+=_e.import_value,oe),new Xt(A,z,{location_id:(j=B==null?void 0:B.id)!=null?j:0,partner_id:(Oe=V==null?void 0:V.id)!=null?Oe:0,product_id:H[0].product_id,year:0,export_value:0,import_value:0}))},H=>H.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=o.filter(H=>H.product.level=="section")),e.$$.dirty[0]&16777219&&n(10,a=l.sort((H,j)=>{switch(T){case k.LeftUp:return H.export_value-j.export_value;case k.LeftDown:return j.export_value-H.export_value;case k.RightUp:return H.import_value-j.import_value;case k.RightDown:return j.import_value-H.import_value;case k.Up:return H.import_value+H.export_value-(j.import_value+j.export_value);case k.Down:return j.import_value+j.export_value-(H.import_value+H.export_value);case k.AlphaDown:return H.product.name.localeCompare(j.product.name);case k.AlphaUp:return j.product.name.localeCompare(H.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=Bn(o,H=>H.export_value)),e.$$.dirty[0]&8388608&&n(21,u=Bn(o,H=>H.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(f=Tr(o,H=>H.export_value)),e.$$.dirty[0]&8388608&&(h=Tr(o,H=>H.import_value)),e.$$.dirty[0]&6291464&&n(5,c=Pn().domain([-s,u]).range([Dt+ko,S-ko-H0])),e.$$.dirty[0]&48){let H=xo(c).tickFormat(j=>q(Math.abs(j)));Me(P).transition().call(H)}},[k,T,V,S,P,c,g,b,D,X,a,w,y,te,le,Q,m,E,B,z,A,u,s,o,l,i,r,_,Y,G,W,fe,de,we,ye,ue,O,J,Le]}class q0 extends It{constructor(t){super(),St(this,t,X0,F0,Tt,{data:16},null,[-1,-1])}}function Io(e,t,n){const r=e.slice();return r[54]=t[n],r}function So(e,t,n){const r=e.slice();return r[54]=t[n],r}function To(e,t,n){const r=e.slice();return r[54]=t[n],r}function W0(e){let t,n,r,i,o;return{c(){t=re("text"),n=me("No valid data for this pair."),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var a=L(t);n=ge(a,"No valid data for this pair."),a.forEach(v),this.h()},h(){d(t,"x",r=e[3]/2),d(t,"y",i=e[4]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,a){K(l,t,a),I(t,n)},p(l,a){a[0]&8&&r!==(r=l[3]/2)&&d(t,"x",r),a[0]&16&&i!==(i=l[4]/2)&&d(t,"y",i)},i(l){o||hn(()=>{o=Ui(t,Gr,{}),o.start()})},o:Ve,d(l){l&&v(t)}}}function K0(e){var De,Pe,Xe,qe;let t,n,r,i,o,l,a,s,u,f,h,c,_,w,y,m,k=((Pe=`to ${(De=e[0].get(e[2]))==null?void 0:De.name}`)!=null?Pe:"")+"",T,E,g,b,B,V=((qe=`from ${(Xe=e[0].get(e[2]))==null?void 0:Xe.name}`)!=null?qe:"")+"",D,z,A,S,X,P,q,M,N,te,le,Q=[],Y=new Map,G,W,fe,de=[],we=new Map,ye,ue,O,J=[],Le=new Map,R,ne,C,H=!e[18]&&Mo(e),j=e[13]>0&&e[12]<0&&No(e),Oe=e[16];const oe=F=>F[54].year;for(let F=0;F<Oe.length;F+=1){let ee=To(e,Oe,F),pe=oe(ee);Y.set(pe,Q[F]=Co(pe,ee))}let _e=e[16];const Ne=F=>F[54].year;for(let F=0;F<_e.length;F+=1){let ee=So(e,_e,F),pe=Ne(ee);we.set(pe,de[F]=Lo(pe,ee))}let U=e[16];const Ee=F=>F[54].year;for(let F=0;F<U.length;F+=1){let ee=Io(e,U,F),pe=Ee(ee);Le.set(pe,J[F]=Do(pe,ee))}return{c(){t=re("text"),n=me("Trade Over Time"),i=re("g"),H&&H.c(),o=re("g"),l=re("line"),u=re("g"),f=re("g"),c=re("g"),_=re("circle"),y=re("text"),m=me("Export "),T=me(k),E=re("circle"),b=re("text"),B=me("Import "),D=me(V),z=re("g"),A=re("rect"),S=re("text"),X=me("Trade Deficit"),P=re("rect"),q=re("text"),M=me("Trade Surplus"),te=re("g"),j&&j.c(),le=ke();for(let F=0;F<Q.length;F+=1)Q[F].c();G=re("g"),W=re("path");for(let F=0;F<de.length;F+=1)de[F].c();ye=re("g"),ue=re("path");for(let F=0;F<J.length;F+=1)J[F].c();R=re("g"),ne=re("g"),C=me("''"),this.h()},l(F){t=ie(F,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var ee=L(t);n=ge(ee,"Trade Over Time"),ee.forEach(v),i=ie(F,"g",{class:!0}),L(i).forEach(v),H&&H.l(F),o=ie(F,"g",{id:!0,transform:!0});var pe=L(o);l=ie(pe,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),L(l).forEach(v),pe.forEach(v),u=ie(F,"g",{id:!0,transform:!0}),L(u).forEach(v),f=ie(F,"g",{id:!0,transform:!0}),L(f).forEach(v),c=ie(F,"g",{id:!0,transform:!0});var x=L(c);_=ie(x,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(_).forEach(v),y=ie(x,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Se=L(y);m=ge(Se,"Export "),T=ge(Se,k),Se.forEach(v),E=ie(x,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(E).forEach(v),b=ie(x,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Re=L(b);B=ge(Re,"Import "),D=ge(Re,V),Re.forEach(v),x.forEach(v),z=ie(F,"g",{id:!0,transform:!0});var Be=L(z);A=ie(Be,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),L(A).forEach(v),S=ie(Be,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Te=L(S);X=ge(Te,"Trade Deficit"),Te.forEach(v),P=ie(Be,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),L(P).forEach(v),q=ie(Be,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var rt=L(q);M=ge(rt,"Trade Surplus"),rt.forEach(v),Be.forEach(v),te=ie(F,"g",{id:!0});var at=L(te);j&&j.l(at),le=ke();for(let Fe=0;Fe<Q.length;Fe+=1)Q[Fe].l(at);at.forEach(v),G=ie(F,"g",{class:!0});var je=L(G);W=ie(je,"path",{fill:!0,stroke:!0,"stroke-width":!0}),L(W).forEach(v);for(let Fe=0;Fe<de.length;Fe+=1)de[Fe].l(je);je.forEach(v),ye=ie(F,"g",{class:!0});var gt=L(ye);ue=ie(gt,"path",{fill:!0,stroke:!0,"stroke-width":!0}),L(ue).forEach(v);for(let Fe=0;Fe<J.length;Fe+=1)J[Fe].l(gt);gt.forEach(v),R=ie(F,"g",{}),L(R).forEach(v),ne=ie(F,"g",{id:!0,class:!0}),L(ne).forEach(v),C=ge(F,"''"),this.h()},h(){d(t,"class","chart-header"),d(t,"x",r=e[3]/2+10),d(t,"y",et-5),d(t,"text-anchor","middle"),d(i,"class","brush"),d(l,"id","xAxisLine"),d(l,"x1",qn),d(l,"x2",a=e[3]-Ot),d(l,"y1","0"),d(l,"y2","0"),d(l,"stroke","rgba(0,0,0,0.7)"),d(l,"stroke-width","1"),d(o,"id","xAxis"),d(o,"transform",s=`translate(${0},${e[4]-et})`),d(u,"id","yAisLeft"),d(u,"transform",`translate(${qn},${0})`),d(f,"id","yAisRight"),d(f,"transform",h=`translate(${e[3]-Ot},${0})`),d(_,"class","circ1"),d(_,"cx","20"),d(_,"cy","10"),d(_,"r","5"),d(_,"fill",w=e[17](e[1])),d(_,"stroke","rgba(0,0,0,0)"),d(_,"stroke-width","2"),d(y,"x","30"),d(y,"y","15"),d(y,"font-size","13"),d(y,"text-anchor","start"),d(E,"class","circ2"),d(E,"cx","20"),d(E,"cy","25"),d(E,"r","5"),d(E,"fill",g=e[17](e[2])),d(E,"stroke","rgba(0,0,0,0)"),d(E,"stroke-width","2"),d(b,"x","30"),d(b,"y","30"),d(b,"font-size","13"),d(b,"text-anchor","start"),d(c,"id","legendLeft"),d(c,"transform","translate(10,6)"),d(A,"class","deficit svelte-o11v01"),d(A,"x","15"),d(A,"y","5"),d(A,"width","10"),d(A,"height","10"),d(A,"fill",zr),d(A,"opacity","0.6"),d(S,"x","30"),d(S,"y","15"),d(S,"font-size","13"),d(S,"text-anchor","start"),d(P,"class","surplus svelte-o11v01"),d(P,"x","15"),d(P,"y","20"),d(P,"width","10"),d(P,"height","10"),d(P,"fill",Ur),d(P,"opacity","0.6"),d(q,"x","30"),d(q,"y","30"),d(q,"font-size","13"),d(q,"text-anchor","start"),d(z,"id","legendRight"),d(z,"transform",N=`translate(${e[3]-3*Ot+30},6)`),d(te,"id","net-values-group"),d(W,"fill","none"),d(W,"stroke",fe=e[17](e[1])),d(W,"stroke-width","2"),d(G,"class","country1-group country-group svelte-o11v01"),d(ue,"fill","none"),d(ue,"stroke",O=e[17](e[2])),d(ue,"stroke-width","2"),d(ye,"class","country2-group country-group svelte-o11v01"),d(ne,"id","line-chart-tooltip"),d(ne,"class","tooltip")},m(F,ee){K(F,t,ee),I(t,n),K(F,i,ee),e[41](i),H&&H.m(F,ee),K(F,o,ee),I(o,l),e[42](o),K(F,u,ee),e[43](u),K(F,f,ee),e[44](f),K(F,c,ee),I(c,_),I(c,y),I(y,m),I(y,T),I(c,E),I(c,b),I(b,B),I(b,D),K(F,z,ee),I(z,A),I(z,S),I(S,X),I(z,P),I(z,q),I(q,M),K(F,te,ee),j&&j.m(te,null),I(te,le);for(let pe=0;pe<Q.length;pe+=1)Q[pe].m(te,null);K(F,G,ee),I(G,W),e[45](W);for(let pe=0;pe<de.length;pe+=1)de[pe].m(G,null);K(F,ye,ee),I(ye,ue),e[46](ue);for(let pe=0;pe<J.length;pe+=1)J[pe].m(ye,null);K(F,R,ee),K(F,ne,ee),K(F,C,ee)},p(F,ee){var pe,x,Se,Re;ee[0]&8&&r!==(r=F[3]/2+10)&&d(t,"x",r),F[18]?H&&(H.d(1),H=null):H?H.p(F,ee):(H=Mo(F),H.c(),H.m(o.parentNode,o)),ee[0]&8&&a!==(a=F[3]-Ot)&&d(l,"x2",a),ee[0]&16&&s!==(s=`translate(${0},${F[4]-et})`)&&d(o,"transform",s),ee[0]&8&&h!==(h=`translate(${F[3]-Ot},${0})`)&&d(f,"transform",h),ee[0]&131074&&w!==(w=F[17](F[1]))&&d(_,"fill",w),ee[0]&5&&k!==(k=((x=`to ${(pe=F[0].get(F[2]))==null?void 0:pe.name}`)!=null?x:"")+"")&&Ke(T,k),ee[0]&131076&&g!==(g=F[17](F[2]))&&d(E,"fill",g),ee[0]&5&&V!==(V=((Re=`from ${(Se=F[0].get(F[2]))==null?void 0:Se.name}`)!=null?Re:"")+"")&&Ke(D,V),ee[0]&8&&N!==(N=`translate(${F[3]-3*Ot+30},6)`)&&d(z,"transform",N),F[13]>0&&F[12]<0?j?j.p(F,ee):(j=No(F),j.c(),j.m(te,le)):j&&(j.d(1),j=null),ee[0]&125403136&&(Oe=F[16],Q=jt(Q,ee,oe,1,F,Oe,Y,te,An,Co,null,To)),ee[0]&131074&&fe!==(fe=F[17](F[1]))&&d(W,"stroke",fe),ee[0]&82034690&&(_e=F[16],de=jt(de,ee,Ne,1,F,_e,we,G,An,Lo,null,So)),ee[0]&131076&&O!==(O=F[17](F[2]))&&d(ue,"stroke",O),ee[0]&82034692&&(U=F[16],J=jt(J,ee,Ee,1,F,U,Le,ye,An,Do,null,Io))},i:Ve,o:Ve,d(F){F&&v(t),F&&v(i),e[41](null),H&&H.d(F),F&&v(o),e[42](null),F&&v(u),e[43](null),F&&v(f),e[44](null),F&&v(c),F&&v(z),F&&v(te),j&&j.d();for(let ee=0;ee<Q.length;ee+=1)Q[ee].d();F&&v(G),e[45](null);for(let ee=0;ee<de.length;ee+=1)de[ee].d();F&&v(ye),e[46](null);for(let ee=0;ee<J.length;ee+=1)J[ee].d();F&&v(R),F&&v(ne),F&&v(C)}}}function Mo(e){let t,n,r;return{c(){t=re("rect"),this.h()},l(i){t=ie(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),L(t).forEach(v),this.h()},h(){d(t,"class","timebar svelte-o11v01"),d(t,"x",n=e[15](e[21][0])-12),d(t,"y",44),d(t,"width","24"),d(t,"height",r=e[4]-44-et>0?e[4]-44-et:0),d(t,"fill","rgba(0,0,0,0.2)")},m(i,o){K(i,t,o)},p(i,o){o[0]&2129920&&n!==(n=i[15](i[21][0])-12)&&d(t,"x",n),o[0]&16&&r!==(r=i[4]-44-et>0?i[4]-44-et:0)&&d(t,"height",r)},d(i){i&&v(t)}}}function No(e){let t,n,r,i;return{c(){t=re("line"),this.h()},l(o){t=ie(o,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),L(t).forEach(v),this.h()},h(){d(t,"id","zeroline"),d(t,"x1",qn),d(t,"x2",n=e[3]-Ot),d(t,"y1",r=e[11](0)),d(t,"y2",i=e[11](0)),d(t,"stroke","rgba(0,0,0,0.7)"),d(t,"stroke-width","1")},m(o,l){K(o,t,l)},p(o,l){l[0]&8&&n!==(n=o[3]-Ot)&&d(t,"x2",n),l[0]&2048&&r!==(r=o[11](0))&&d(t,"y1",r),l[0]&2048&&i!==(i=o[11](0))&&d(t,"y2",i)},d(o){o&&v(t)}}}function Co(e,t){let n,r,i,o,l,a,s,u;return{key:e,first:null,c(){n=re("rect"),this.h()},l(f){n=ie(f,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),L(n).forEach(v),this.h()},h(){d(n,"x",r=t[15](t[54].year)-Gn/2),d(n,"width",Gn),d(n,"y",i=t[20](t[54])),d(n,"height",o=t[19](t[54])>0?t[19](t[54]):0),d(n,"fill",l=t[54].export_value<t[54].import_value?zr:Ur),d(n,"stroke",a=t[21].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"opacity","0.6"),d(n,"class","svelte-o11v01"),this.first=n},m(f,h){K(f,n,h),s||(u=[Z(n,"click",function(){Ye(t[22](t[54].year))&&t[22](t[54].year).apply(this,arguments)}),Z(n,"keydown",j0),Z(n,"keypress",t[38]),Z(n,"click",function(){Ye(t[22](t[54].year))&&t[22](t[54].year).apply(this,arguments)}),Z(n,"focus",t[39]),Z(n,"blur",t[40]),Z(n,"mouseover",function(){Ye(t[24](t[54]))&&t[24](t[54]).apply(this,arguments)}),Z(n,"mousemove",t[25]()),Z(n,"mouseout",t[26]())],s=!0)},p(f,h){t=f,h[0]&98304&&r!==(r=t[15](t[54].year)-Gn/2)&&d(n,"x",r),h[0]&1114112&&i!==(i=t[20](t[54]))&&d(n,"y",i),h[0]&589824&&o!==(o=t[19](t[54])>0?t[19](t[54]):0)&&d(n,"height",o),h[0]&65536&&l!==(l=t[54].export_value<t[54].import_value?zr:Ur)&&d(n,"fill",l),h[0]&2162688&&a!==(a=t[21].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",a)},d(f){f&&v(n),s=!1,ht(u)}}}function Lo(e,t){let n,r,i,o,l,a,s;return{key:e,first:null,c(){n=re("circle"),this.h()},l(u){n=ie(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(n).forEach(v),this.h()},h(){d(n,"class","circ1 svelte-o11v01"),d(n,"cx",r=t[15](t[54].year)),d(n,"cy",i=t[14](t[54].export_value)),d(n,"r","6"),d(n,"fill",o=t[17](t[1])),d(n,"stroke",l=t[21].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),this.first=n},m(u,f){K(u,n,f),a||(s=[Z(n,"click",function(){Ye(t[22](t[54].year))&&t[22](t[54].year).apply(this,arguments)}),Z(n,"keydown",J0),Z(n,"keypress",t[35]),Z(n,"click",function(){Ye(t[22](t[54].year))&&t[22](t[54].year).apply(this,arguments)}),Z(n,"focus",t[36]),Z(n,"blur",t[37]),Z(n,"mouseover",function(){Ye(t[23](t[54],!0))&&t[23](t[54],!0).apply(this,arguments)}),Z(n,"mouseout",t[26]())],a=!0)},p(u,f){t=u,f[0]&98304&&r!==(r=t[15](t[54].year))&&d(n,"cx",r),f[0]&81920&&i!==(i=t[14](t[54].export_value))&&d(n,"cy",i),f[0]&131074&&o!==(o=t[17](t[1]))&&d(n,"fill",o),f[0]&2162688&&l!==(l=t[21].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&v(n),a=!1,ht(s)}}}function Do(e,t){let n,r,i,o,l,a,s;return{key:e,first:null,c(){n=re("circle"),this.h()},l(u){n=ie(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),L(n).forEach(v),this.h()},h(){d(n,"cx",r=t[15](t[54].year)),d(n,"cy",i=t[14](t[54].import_value)),d(n,"r","6"),d(n,"fill",o=t[17](t[2])),d(n,"stroke",l=t[21].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),d(n,"class","svelte-o11v01"),this.first=n},m(u,f){K(u,n,f),a||(s=[Z(n,"click",function(){Ye(t[22](t[54].year))&&t[22](t[54].year).apply(this,arguments)}),Z(n,"keydown",Q0),Z(n,"keypress",t[32]),Z(n,"click",function(){Ye(t[22](t[54].year))&&t[22](t[54].year).apply(this,arguments)}),Z(n,"focus",t[33]),Z(n,"blur",t[34]),Z(n,"mouseover",function(){Ye(t[23](t[54],!1))&&t[23](t[54],!1).apply(this,arguments)}),Z(n,"mouseout",t[26]())],a=!0)},p(u,f){t=u,f[0]&98304&&r!==(r=t[15](t[54].year))&&d(n,"cx",r),f[0]&81920&&i!==(i=t[14](t[54].import_value))&&d(n,"cy",i),f[0]&131076&&o!==(o=t[17](t[2]))&&d(n,"fill",o),f[0]&2162688&&l!==(l=t[21].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&v(n),a=!1,ht(s)}}}function x0(e){let t,n,r;function i(a,s){return a[16].length>0?K0:W0}let o=i(e),l=o(e);return{c(){t=ae("div"),n=re("svg"),l.c(),this.h()},l(a){t=se(a,"DIV",{id:!0,class:!0});var s=L(t);n=ie(s,"svg",{width:!0,height:!0});var u=L(n);l.l(u),u.forEach(v),s.forEach(v),this.h()},h(){d(n,"width",e[3]),d(n,"height",e[4]),d(t,"id","line-chart"),d(t,"class","viz-section"),hn(()=>e[47].call(t))},m(a,s){K(a,t,s),I(t,n),l.m(n,null),r=Xr(t,e[47].bind(t))},p(a,s){o===(o=i(a))&&l?l.p(a,s):(l.d(1),l=o(a),l&&(l.c(),he(l,1),l.m(n,null))),s[0]&8&&d(n,"width",a[3]),s[0]&16&&d(n,"height",a[4])},i(a){he(l)},o:Ve,d(a){a&&v(t),l.d(),r()}}}const et=35,dr=15,qn=50,Ot=50,Gn=16,yn=10,_r=180,zt=68,Z0=22,Yt=20,ui=35,vn=37,wn=22,Ur="#4daf4a",zr="#e41a1c",j0=()=>{},J0=()=>{},Q0=()=>{};function $0(e,t,n){let r,i,o,l,a,s,u,f,h,c,_,w;At(e,lt,U=>n(31,_=U)),At(e,on,U=>n(21,w=U));let{data:y}=t,{bilateralData:m,locationData:k,productData:T,country1_id:E,country2_id:g,countryColorScale:b}=y,B=0,V=0;const D=U=>Jt("$.3s")(U).replace(/G/,"B");let z,A,S,X,P,q,M=!1,N;function te(U){return()=>on.set([U])}function le(U,Ee){return U+_r<B?U+Ee:U+Ee-_r}function Q(U,Ee,De){return U+De<V?U+Ee:U+Ee-zt}function Y(U,Ee){return De=>{var qe,F,ee;let Pe=Me("#line-chart-tooltip"),Xe=zt+N.length*Z0;if(Pe.append("rect").attr("width",_r).attr("height",Xe).attr("x",le(De.layerX,yn)).attr("y",Q(De.layerY,yn,Xe)),Pe.append("text").attr("class","title").attr("x",le(De.layerX,Yt)).attr("y",Q(De.layerY,ui,Xe)).style("fill",b?b(Ee?U.location_id:U.partner_id):"black").text(`${U.year} `+(Ee?"Export":"Import")),_.size>0){for(let pe=0;pe<N.length;pe++){let x=(qe=i==null?void 0:i.get(U.year))==null?void 0:qe.filter(Se=>Se.product.name==N[pe])[0];Pe.append("text").attr("x",le(De.layerX,Yt)).attr("y",Q(De.layerY,vn+(pe+1)*wn,Xe)).text(`${N[pe]}: ${D(Ee?(F=x==null?void 0:x.export_value)!=null?F:0:(ee=x==null?void 0:x.import_value)!=null?ee:0)}`)}Pe.append("text").attr("x",le(De.layerX,Yt)).attr("y",Q(De.layerY,vn+(N.length+1)*wn,Xe)).style("font-weight","bold").text(`Selected Total:  ${D(Ee?U.export_value:U.import_value)}`)}else Pe.append("text").attr("x",le(De.layerX,Yt)).attr("y",Q(De.layerY,vn+wn,Xe)).text((_.size==0?"Total: ":"Selected Total: ")+`${D(Ee?U.export_value:U.import_value)}`),Pe.append("text").attr("x",le(De.layerX,Yt)).attr("y",Q(De.layerY,vn+2*wn,Xe)).text("Sectors: All")}}function G(U){return Ee=>{let De=Me("#line-chart-tooltip"),Pe=U.export_value-U.import_value;De.append("rect").attr("id","tooltip-rect").attr("width",_r).attr("height",zt).attr("x",le(Ee.layerX,yn)).attr("y",Q(Ee.layerY,yn,zt)),De.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",le(Ee.layerX,Yt)).attr("y",Q(Ee.layerY,ui,zt)).style("fill",Pe<0?zr:Ur).text(`${U.year} `+(Pe<0?"Deficit":"Surplus")),De.append("text").attr("id","tooltip-text2").attr("x",le(Ee.layerX,Yt)).attr("y",Q(Ee.layerY,vn+wn,zt)).text((_.size>0?"Selected ":"")+`Total: ${D(Math.abs(U.export_value-U.import_value))}`)}}function W(){return U=>{Me("#tooltip-rect").attr("x",le(U.layerX,yn)).attr("y",Q(U.layerY,yn,zt)),Me("#tooltip-text1").attr("x",le(U.layerX,Yt)).attr("y",Q(U.layerY,ui,zt)),Me("#tooltip-text2").attr("x",le(U.layerX,Yt)).attr("y",Q(U.layerY,vn+wn,zt))}}function fe(){return U=>{Me("#line-chart-tooltip").selectAll("rect").remove(),Me("#line-chart-tooltip").selectAll("text").remove()}}function de(U){ft.call(this,e,U)}function we(U){ft.call(this,e,U)}function ye(U){ft.call(this,e,U)}function ue(U){ft.call(this,e,U)}function O(U){ft.call(this,e,U)}function J(U){ft.call(this,e,U)}function Le(U){ft.call(this,e,U)}function R(U){ft.call(this,e,U)}function ne(U){ft.call(this,e,U)}function C(U){ot[U?"unshift":"push"](()=>{X=U,n(8,X)})}function H(U){ot[U?"unshift":"push"](()=>{z=U,n(5,z)})}function j(U){ot[U?"unshift":"push"](()=>{A=U,n(6,A)})}function Oe(U){ot[U?"unshift":"push"](()=>{S=U,n(7,S)})}function oe(U){ot[U?"unshift":"push"](()=>{P=U,n(9,P)})}function _e(U){ot[U?"unshift":"push"](()=>{q=U,n(10,q)})}function Ne(){B=this.clientWidth,V=this.clientHeight,n(3,B),n(4,V)}return e.$$set=U=>{"data"in U&&n(27,y=U.data)},e.$$.update=()=>{var U,Ee,De,Pe,Xe,qe,F,ee,pe;if(e.$$.dirty[0]&134217728&&n(28,{bilateralData:m,locationData:k,productData:T,country1_id:E,country2_id:g,countryColorScale:b}=y,m,(n(0,k),n(27,y)),(n(29,T),n(27,y)),(n(1,E),n(27,y)),(n(2,g),n(27,y)),(n(17,b),n(27,y))),e.$$.dirty[0]&805306375|e.$$.dirty[1]&1&&n(16,r=Array.from((De=(Ee=(U=m==null?void 0:m.get(E))==null?void 0:U.get(g))==null?void 0:Ee.entries())!=null?De:new Array).map(x=>{let Se=x[0],Re=x[1];return Re=_.size==0?Re:Re.filter(Be=>_.has(Be.product_id)),Re.reduce((Be,Te)=>(Be.export_value+=Te.export_value,Be.import_value+=Te.import_value,Be),new Xt(k,T,{location_id:E,partner_id:g,product_id:0,year:Se,export_value:0,import_value:0}))}).sort((x,Se)=>x.year-Se.year)),e.$$.dirty[0]&268435462&&(i=(Pe=m==null?void 0:m.get(E))==null?void 0:Pe.get(g)),e.$$.dirty[0]&65544&&n(15,o=Pn().domain(Wo(r,x=>x.year)).range([qn+Gn/2,B-Ot-Gn/2])),e.$$.dirty[0]&65552&&n(14,l=Pn().domain([0,(Xe=Bn(r,x=>Math.max(x.export_value,x.import_value)))!=null?Xe:0]).range([V-et,et+dr]).nice()),e.$$.dirty[0]&32768&&n(30,a=x=>{if((x==null?void 0:x.selection)===null||(x==null?void 0:x.selection[1])-(x==null?void 0:x.selection[0])<5)on.set([2020]),n(18,M=!1);else{n(18,M=!0);let Se=x.selection;const Re=Se[0],Be=Se[1];let Te=Math.ceil(o.invert(Re)),rt=Math.floor(o.invert(Be)),at=[];for(let je=Te;je<=rt;je++)at.push(je);on.set(at)}}),e.$$.dirty[0]&1073742104){let x=Yc().extent([[qn-1,et+10],[B-Ot+1,V-et]]).on("start brush end",a);Me(X).call(x)}if(e.$$.dirty[0]&65536&&n(13,s=(qe=Bn(r,x=>x.export_value-x.import_value))!=null?qe:0),e.$$.dirty[0]&65536&&n(12,u=(F=al(r,x=>x.export_value-x.import_value))!=null?F:0),e.$$.dirty[0]&65552&&n(11,f=Pn().domain([(ee=al(r,x=>x.export_value-x.import_value))!=null?ee:0,(pe=Bn(r,x=>x.export_value-x.import_value))!=null?pe:0]).range([V-et,et+dr]).nice()),e.$$.dirty[0]&51424){let x=xo(o).tickFormat(Jt("d"));Me(z).transition().call(x).select(".domain").attr("stroke-width",0);let Se=cs(l).tickFormat(Be=>D(Be));Me(A).transition().call(Se);let Re=fs(f).tickFormat(Be=>D(Be));Me(S).transition().call(Re)}if(e.$$.dirty[0]&115200){let x=Di();r.length>0&&(r.sort(Se=>Se.year),x.moveTo(o(r[0].year),l(r[0].export_value))),r.forEach(Se=>{x.lineTo(o(Se.year),l(Se.export_value))}),Me(P).transition().attr("d",x.toString())}if(e.$$.dirty[0]&115712){let x=Di();r.length>0&&x.moveTo(o(r[0].year),l(r[0].import_value)),r.forEach(Se=>{x.lineTo(o(Se.year),l(Se.import_value))}),Me(q).transition().attr("d",x.toString())}e.$$.dirty[0]&536870912|e.$$.dirty[1]&1&&(N=_.size==0?["All"]:Array.from(_.values()).map(x=>{var Se,Re;return(Re=(Se=T==null?void 0:T.get(x))==null?void 0:Se.name)!=null?Re:"something"}).sort()),e.$$.dirty[0]&14336&&n(20,h=x=>x.export_value<x.import_value?s<0?et+dr:f(0):(u>0,f(x.export_value-x.import_value))),e.$$.dirty[0]&14352&&n(19,c=x=>x.export_value<x.import_value?s<0?f(x.export_value-x.import_value)-et-dr:f(x.export_value-x.import_value)-f(0):u>0?V-et-f(x.export_value-x.import_value):f(0)-f(x.export_value-x.import_value))},[k,E,g,B,V,z,A,S,X,P,q,f,u,s,l,o,r,b,M,c,h,w,te,Y,G,W,fe,y,m,T,a,_,de,we,ye,ue,O,J,Le,R,ne,C,H,j,Oe,oe,_e,Ne]}class ed extends It{constructor(t){super(),St(this,t,$0,x0,Tt,{data:27},null,[-1,-1])}}const{Map:td}=Ya;function Oo(e,t,n){const r=e.slice();return r[33]=t[n],r}function Ro(e){let t,n,r,i,o,l,a,s,u,f=e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>10&&Fo(e),h=e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>30&&Ho(e);return{c(){t=re("rect"),f&&f.c(),l=ke(),h&&h.c(),a=ke(),this.h()},l(c){t=ie(c,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),L(t).forEach(v),f&&f.l(c),l=ke(),h&&h.l(c),a=ke(),this.h()},h(){var c,_,w,y;d(t,"class","leaf svelte-sixlpg"),d(t,"transform",n=`translate(${e[33].x0},${e[33].y0})`),d(t,"width",r=e[33].x1-e[33].x0),d(t,"height",i=e[33].y1-e[33].y0),d(t,"fill",o=e[5]?e[5]((y=(w=(_=(c=e[33].data)==null?void 0:c.product)==null?void 0:_.parent)==null?void 0:w.name)!=null?y:""):"white")},m(c,_){K(c,t,_),f&&f.m(c,_),K(c,l,_),h&&h.m(c,_),K(c,a,_),s||(u=[Z(t,"keydown",rd),Z(t,"click",function(){Ye(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[26]),Z(t,"mouseover",function(){Ye(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){Ye(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],s=!0)},p(c,_){var w,y,m,k;e=c,_[0]&256&&n!==(n=`translate(${e[33].x0},${e[33].y0})`)&&d(t,"transform",n),_[0]&256&&r!==(r=e[33].x1-e[33].x0)&&d(t,"width",r),_[0]&256&&i!==(i=e[33].y1-e[33].y0)&&d(t,"height",i),_[0]&288&&o!==(o=e[5]?e[5]((k=(m=(y=(w=e[33].data)==null?void 0:w.product)==null?void 0:y.parent)==null?void 0:m.name)!=null?k:""):"white")&&d(t,"fill",o),e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>10?f?f.p(e,_):(f=Fo(e),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>30?h?h.p(e,_):(h=Ho(e),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null)},d(c){c&&v(t),f&&f.d(c),c&&v(l),h&&h.d(c),c&&v(a),s=!1,ht(u)}}}function Fo(e){var s,u,f;let t,n=((f=(u=(s=e[33].data)==null?void 0:s.product.name)==null?void 0:u.substring(0,40))!=null?f:"")+"",r,i,o,l,a;return{c(){t=re("text"),r=me(n),this.h()},l(h){t=ie(h,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var c=L(t);r=ge(c,n),c.forEach(v),this.h()},h(){d(t,"class","label svelte-sixlpg"),d(t,"transform",i=`translate(${e[33].x0+3},${e[33].y0+3})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",o=Math.max((e[33].x1-e[33].x0)/15,8))},m(h,c){K(h,t,c),I(t,r),l||(a=[Z(t,"keydown",id),Z(t,"click",function(){Ye(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[25]),Z(t,"mouseover",function(){Ye(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){Ye(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],l=!0)},p(h,c){var _,w,y;e=h,c[0]&256&&n!==(n=((y=(w=(_=e[33].data)==null?void 0:_.product.name)==null?void 0:w.substring(0,40))!=null?y:"")+"")&&Ke(r,n),c[0]&256&&i!==(i=`translate(${e[33].x0+3},${e[33].y0+3})`)&&d(t,"transform",i),c[0]&256&&o!==(o=Math.max((e[33].x1-e[33].x0)/15,8))&&d(t,"font-size",o)},d(h){h&&v(t),l=!1,ht(a)}}}function Ho(e){let t,n=e[9](e[4]?e[33].data.export_value:e[33].data.import_value)+"",r,i,o,l,a;return{c(){t=re("text"),r=me(n),this.h()},l(s){t=ie(s,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var u=L(t);r=ge(u,n),u.forEach(v),this.h()},h(){d(t,"class","label-num svelte-sixlpg"),d(t,"transform",i=`translate(${e[33].x0+5},${e[33].y0+1+Math.max((e[33].x1-e[33].x0)/10,8)})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",o=Math.max((e[33].x1-e[33].x0)/15,8)-1),d(t,"font-weight","300")},m(s,u){K(s,t,u),I(t,r),l||(a=[Z(t,"keydown",ld),Z(t,"click",function(){Ye(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[24]),Z(t,"mouseover",function(){Ye(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){Ye(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],l=!0)},p(s,u){e=s,u[0]&272&&n!==(n=e[9](e[4]?e[33].data.export_value:e[33].data.import_value)+"")&&Ke(r,n),u[0]&256&&i!==(i=`translate(${e[33].x0+5},${e[33].y0+1+Math.max((e[33].x1-e[33].x0)/10,8)})`)&&d(t,"transform",i),u[0]&256&&o!==(o=Math.max((e[33].x1-e[33].x0)/15,8)-1)&&d(t,"font-size",o)},d(s){s&&v(t),l=!1,ht(a)}}}function Vo(e,t){let n,r,i=t[3].length>0&&t[33].x1!=NaN&&t[33].x0!=NaN&&t[33].y0!=NaN&&t[33].y1!=NaN&&Ro(t);return{key:e,first:null,c(){n=ke(),i&&i.c(),r=ke(),this.h()},l(o){n=ke(),i&&i.l(o),r=ke(),this.h()},h(){this.first=n},m(o,l){K(o,n,l),i&&i.m(o,l),K(o,r,l)},p(o,l){t=o,t[3].length>0&&t[33].x1!=NaN&&t[33].x0!=NaN&&t[33].y0!=NaN&&t[33].y1!=NaN?i?i.p(t,l):(i=Ro(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(o){o&&v(n),i&&i.d(o),o&&v(r)}}}function Bo(e){let t,n,r,i=e[6]?"Loading...":"No valid data for this pair.",o,l,a;return{c(){t=re("rect"),r=re("text"),o=me(i),this.h()},l(s){t=ie(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),L(t).forEach(v),r=ie(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=L(r);o=ge(u,i),u.forEach(v),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[0]),d(t,"height",e[1]),d(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),d(r,"x",l=e[0]/2),d(r,"y",a=e[1]/2),d(r,"alignment-baseline","central"),d(r,"text-anchor","middle")},m(s,u){K(s,t,u),K(s,r,u),I(r,o)},p(s,u){u[0]&1&&d(t,"width",s[0]),u[0]&2&&d(t,"height",s[1]),u[0]&64&&n!==(n=s[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&d(t,"fill",n),u[0]&64&&i!==(i=s[6]?"Loading...":"No valid data for this pair.")&&Ke(o,i),u[0]&1&&l!==(l=s[0]/2)&&d(r,"x",l),u[0]&2&&a!==(a=s[1]/2)&&d(r,"y",a)},d(s){s&&v(t),s&&v(r)}}}function nd(e){var h,c;let t,n,r,i=[],o=new td,l,a,s=e[8];const u=_=>_[33].data.product_id;for(let _=0;_<s.length;_+=1){let w=Oo(e,s,_),y=u(w);o.set(y,i[_]=Vo(y,w))}let f=((c=(h=e[2])==null?void 0:h.length)!=null?c:0)===0&&Bo(e);return{c(){t=ae("div"),n=re("svg"),r=re("g");for(let _=0;_<i.length;_+=1)i[_].c();l=re("g"),f&&f.c(),this.h()},l(_){t=se(_,"DIV",{class:!0});var w=L(t);n=ie(w,"svg",{class:!0});var y=L(n);r=ie(y,"g",{class:!0});var m=L(r);for(let k=0;k<i.length;k+=1)i[k].l(m);m.forEach(v),l=ie(y,"g",{id:!0,class:!0}),L(l).forEach(v),f&&f.l(y),y.forEach(v),w.forEach(v),this.h()},h(){d(r,"class","treemap svelte-sixlpg"),d(l,"id","treemap-tooltip"),d(l,"class","tooltip"),d(n,"class","svelte-sixlpg"),d(t,"class","viz-section-full"),hn(()=>e[28].call(t))},m(_,w){K(_,t,w),I(t,n),I(n,r);for(let y=0;y<i.length;y+=1)i[y].m(r,null);e[27](r),I(n,l),f&&f.m(n,null),a=Xr(t,e[28].bind(t))},p(_,w){var y,m;w[0]&16184&&(s=_[8],i=jt(i,w,u,1,_,s,o,r,An,Vo,null,Oo)),((m=(y=_[2])==null?void 0:y.length)!=null?m:0)===0?f?f.p(_,w):(f=Bo(_),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i:Ve,o:Ve,d(_){_&&v(t);for(let w=0;w<i.length;w+=1)i[w].d();e[27](null),f&&f.d(),a()}}}const mr=10,gr=120,Po=25,fi=90,Ct=20,Lt=28,Zt=15,rd=()=>{},id=()=>{},ld=()=>{};function od(e,t,n){let r,i,o,l,a,s,u,f,h;At(e,lt,Y=>n(23,u=Y)),At(e,on,Y=>n(3,f=Y)),At(e,sn,Y=>n(4,h=Y));const c=Y=>Jt("$.3s")(Y).replace(/G/,"B");let{data:_}=t,{country1:w,country2:y,productColorScale:m,drilldownBilateral:k,loadingDrilldown:T,locationData:E,productData:g}=_,b=0,B=0,V,D=new Array;function z(Y,G,W){return Y+W<b?Y+G:Y+G-W}function A(Y,G){return Y+fi<B?Y+G:Y+G-fi}function S(Y){return G=>{var de,we,ye;let W=Me("#treemap-tooltip"),fe=Math.max(gr+f.length*Po,gr+10+(Y.product.name.length-20)*8);W.append("rect").attr("id","tooltip-rect").attr("width",fe).attr("height",fi).attr("x",z(G.layerX,mr,fe)).attr("y",A(G.layerY,mr)),W.append("text").attr("class","treemap").attr("id","tooltip-text1").attr("x",z(G.layerX,Ct,fe)).attr("y",A(G.layerY,Lt)).style("font-weight","bold").text(`${Y.product.name}`),W.append("text").attr("class","treemap").attr("id","tooltip-text2").attr("x",z(G.layerX,Ct,fe)).attr("y",A(G.layerY,Lt+Zt)).text(`Sector: ${(ye=(we=(de=Y.product)==null?void 0:de.parent)==null?void 0:we.name)!=null?ye:""}`),W.append("text").attr("class","treemap").attr("id","tooltip-text3").attr("x",z(G.layerX,Ct,fe)).attr("y",A(G.layerY,Lt+2*Zt)).text((h?"Export: ":"Import: ")+`${c(h?Y.export_value:Y.import_value)}`),W.append("text").attr("class","treemap").attr("id","tooltip-text4").attr("x",z(G.layerX,Ct,fe)).attr("y",A(G.layerY,Lt+3*Zt)).text(`Share: ${Jt(".2%")(h?Y.export_value/l:Y.import_value/a)}`),W.append("text").attr("class","treemap").attr("id","tooltip-text5").attr("x",z(G.layerX,Ct,fe)).attr("y",A(G.layerY,Lt+4*Zt)).text((f.length>1?"Years: ":"Year: ")+`${f.join(", ")}`)}}function X(Y){return G=>{let W=Math.max(gr+f.length*Po,gr+10+(Y.product.name.length-20)*8);Me("#tooltip-rect").attr("x",z(G.layerX,mr,W)).attr("y",A(G.layerY,mr)),Me("#tooltip-text1").attr("x",z(G.layerX,Ct,W)).attr("y",A(G.layerY,Lt)),Me("#tooltip-text2").attr("x",z(G.layerX,Ct,W)).attr("y",A(G.layerY,Lt+Zt)),Me("#tooltip-text3").attr("x",z(G.layerX,Ct,W)).attr("y",A(G.layerY,Lt+2*Zt)),Me("#tooltip-text4").attr("x",z(G.layerX,Ct,W)).attr("y",A(G.layerY,Lt+3*Zt)),Me("#tooltip-text5").attr("x",z(G.layerX,Ct,W)).attr("y",A(G.layerY,Lt+4*Zt))}}function P(){return Y=>{Me("#treemap-tooltip").selectAll("rect").remove(),Me("#treemap-tooltip").selectAll("text").remove()}}function q(Y){return G=>{var W,fe,de,we;((W=Y==null?void 0:Y.product)==null?void 0:W.parent)&&u.has((de=(fe=Y==null?void 0:Y.product)==null?void 0:fe.parent)==null?void 0:de.id)?lt.update(ye=>{var ue,O,J;return ye.delete((J=(O=(ue=Y==null?void 0:Y.product)==null?void 0:ue.parent)==null?void 0:O.id)!=null?J:-1),ye}):((we=Y==null?void 0:Y.product)==null?void 0:we.parent)!=null&&lt.update(ye=>{var ue,O,J;return ye.add((J=(O=(ue=Y==null?void 0:Y.product)==null?void 0:ue.parent)==null?void 0:O.id)!=null?J:-1),ye})}}function M(Y){ft.call(this,e,Y)}function N(Y){ft.call(this,e,Y)}function te(Y){ft.call(this,e,Y)}function le(Y){ot[Y?"unshift":"push"](()=>{V=Y,n(7,V)})}function Q(){b=this.clientWidth,B=this.clientHeight,n(0,b),n(1,B)}return e.$$set=Y=>{"data"in Y&&n(14,_=Y.data)},e.$$.update=()=>{var Y;if(e.$$.dirty[0]&16384&&n(17,{drilldownBilateral:k,productColorScale:m,country1:w,country2:y,loadingDrilldown:T,locationData:E,productData:g}=_,k,(n(5,m),n(14,_)),(n(15,w),n(14,_)),(n(16,y),n(14,_)),(n(6,T),n(14,_)),(n(18,E),n(14,_)),(n(19,g),n(14,_))),e.$$.dirty[0]&196608&&n(22,r=k==null?void 0:k.get((Y=y==null?void 0:y.id)!=null?Y:0)),e.$$.dirty[0]&4194312&&n(20,i=f.map(G=>{var W;return(W=r==null?void 0:r.get(G))!=null?W:new Array}).flat()),e.$$.dirty[0]&1933312&&n(21,o=Array.from(_i(i,G=>G.reduce((W,fe)=>(W.export_value+=fe.export_value,W.import_value+=fe.import_value,W),new Xt(E,g,{location_id:w,partner_id:y,product_id:G[0].product_id,year:0,export_value:0,import_value:0})),G=>G.product_id).values())),e.$$.dirty[0]&2097152&&(l=Tr(o,G=>G.export_value)),e.$$.dirty[0]&2097152&&(a=Tr(o,G=>G.import_value)),e.$$.dirty[0]&12419072&&n(2,s=u.size==0?o:Array.from(_i(i.filter(G=>u.has(G.product.parent_id)),G=>G.reduce((W,fe)=>(W.export_value+=fe.export_value,W.import_value+=fe.import_value,W),new Xt(E,g,{location_id:w,partner_id:y,product_id:G[0].product_id,year:0,export_value:0,import_value:0})),G=>G.product_id).values())),e.$$.dirty[0]&8486935&&s&&s.length>0){let G=[];if(u.size==1){let fe=u.entries().next().value[1],de=new Xt(new Map,new Map,{location_id:w,partner_id:y,product_id:fe,year:0,export_value:0,import_value:0});de.product=new Ir({product_id:fe,name:"Sector",level:-1,parent_id:-1}),de.product.parent_id=null,G.push(de)}else{let fe=new Xt(new Map,new Map,{location_id:w,partner_id:y,product_id:-1,year:0,export_value:0,import_value:0});fe.product=new Ir({product_id:-1,name:"All",level:-1,parent_id:-1}),fe.product.parent_id=null,G.push(fe);let de=di(s,we=>{var ye,ue;return(ue=(ye=we.product)==null?void 0:ye.parent_id)!=null?ue:-1});if(de.size>1)for(let[we,ye]of de){let ue=new Xt(new Map,new Map,{location_id:w,partner_id:y,product_id:we,year:0,export_value:0,import_value:0});ue.product=new Ir({product_id:we,name:"Something",level:0,parent_id:-1}),G.push(ue)}}G=G.concat(s);let W=Hh().id(fe=>{var de;return(de=fe.product)==null?void 0:de.id}).parentId(fe=>{var de;return(de=fe.product)==null?void 0:de.parent_id})(G);W.sum(fe=>Math.max(0,fe[h?"export_value":"import_value"])),zh().tile(Yh).size([b,B]).padding(2)(W),n(8,D=W.leaves())}},[b,B,s,f,h,m,T,V,D,c,S,X,P,q,_,w,y,k,E,g,i,o,r,u,M,N,te,le,Q]}class ad extends It{constructor(t){super(),St(this,t,od,nd,Tt,{data:14},null,[-1,-1])}}const sd=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),pr=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=sd.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function ud(e){let t,n,r,i,o,l;return{c(){t=ae("div"),n=ae("h3"),r=me("Loading data..."),i=Ae(),o=re("svg"),l=re("circle"),this.h()},l(a){t=se(a,"DIV",{class:!0});var s=L(t);n=se(s,"H3",{});var u=L(n);r=ge(u,"Loading data..."),u.forEach(v),i=Ie(s),o=ie(s,"svg",{class:!0,viewBox:!0});var f=L(o);l=ie(f,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),L(l).forEach(v),f.forEach(v),s.forEach(v),this.h()},h(){d(l,"class","path svelte-1o4rlrj"),d(l,"cx","25"),d(l,"cy","25"),d(l,"r","20"),d(l,"fill","none"),d(l,"stroke-width","5"),d(o,"class","spinner svelte-1o4rlrj"),d(o,"viewBox","0 0 50 50"),d(t,"class","loading svelte-1o4rlrj")},m(a,s){K(a,t,s),I(t,n),I(n,r),I(t,i),I(t,o),I(o,l)},p:Ve,i:Ve,o:Ve,d(a){a&&v(t)}}}function fd(e){var Zn,jn,Jn,Qn,$n,er;let t,n,r,i,o,l,a,s,u,f,h,c,_,w,y,m,k,T,E,g,b,B,V,D,z,A,S,X,P,q,M,N,te,le,Q,Y,G,W,fe,de,we,ye,ue,O,J,Le,R,ne=((Zn=e[2])==null?void 0:Zn.name)+"",C,H,j=e[9]?"export to ":"import from ",Oe,oe,_e,Ne=((jn=e[8])==null?void 0:jn.name)+"",U,Ee,De=e[10].length>1?`from ${e[10][0]} to ${e[10][e[10].length-1]}?`:`in ${e[10]}?`,Pe,Xe,qe,F,ee,pe,x,Se,Re,Be,Te,rt,at,je,gt,Fe,Nn,xn;u=new ho({props:{optionIdentifier:Uo,labelIdentifier:zo,items:Array.from(e[0].values()),value:e[2]}}),u.$on("select",e[12]),E=new ho({props:{optionIdentifier:Uo,labelIdentifier:zo,items:Array.from(e[0].values()),value:e[8]}}),E.$on("select",e[13]),P=new ed({props:{data:{bilateralData:e[5],country1_id:(Qn=(Jn=e[2])==null?void 0:Jn.id)!=null?Qn:0,country2_id:(er=($n=e[8])==null?void 0:$n.id)!=null?er:0,productData:e[1],locationData:e[0],countryColorScale:e[3]}}}),M=new q0({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[5],loadingDrilldown:e[7],productColorScale:e[4],country1:e[2],country2:e[8],countryColorScale:e[3]}}});let He=e[11].size>0&&Go(e);return pe=new ad({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7]}}}),{c(){t=ae("div"),n=ae("img"),i=Ae(),o=ae("div"),l=ae("span"),a=me("Country"),s=Ae(),Ge(u.$$.fragment),f=Ae(),h=ae("div"),c=ae("button"),_=me("\u2194"),w=Ae(),y=ae("div"),m=ae("span"),k=me("Partner"),T=Ae(),Ge(E.$$.fragment),g=Ae(),b=ae("img"),V=Ae(),D=ae("div"),z=Ae(),A=ae("div"),S=ae("div"),X=ae("div"),Ge(P.$$.fragment),q=Ae(),Ge(M.$$.fragment),N=Ae(),te=ae("div"),le=ae("div"),Q=ae("span"),Y=me("Showing"),G=Ae(),W=ae("button"),fe=me("Export"),de=Ae(),we=ae("button"),ye=me("Import"),ue=Ae(),O=ae("div"),J=ae("h2"),Le=me(`What did 
            `),R=ae("b"),C=me(ne),H=Ae(),Oe=me(j),oe=Ae(),_e=ae("b"),U=me(Ne),Ee=Ae(),Pe=me(De),Xe=Ae(),qe=ae("div"),He&&He.c(),F=Ae(),ee=ae("div"),Ge(pe.$$.fragment),x=Ae(),Se=ae("footer"),Re=ae("center"),Be=me("A Bilateral Trade Data Visualization by "),Te=ae("b"),rt=me("Andrew Lee"),at=me(" & "),je=ae("b"),gt=me("Franklin Yuan"),this.h()},l($){t=se($,"DIV",{class:!0});var be=L(t);n=se(be,"IMG",{class:!0,alt:!0,src:!0}),i=Ie(be),o=se(be,"DIV",{class:!0});var st=L(o);l=se(st,"SPAN",{class:!0});var pt=L(l);a=ge(pt,"Country"),pt.forEach(v),s=Ie(st),_t(u.$$.fragment,st),st.forEach(v),f=Ie(be),h=se(be,"DIV",{class:!0});var Wt=L(h);c=se(Wt,"BUTTON",{class:!0});var $t=L(c);_=ge($t,"\u2194"),$t.forEach(v),Wt.forEach(v),w=Ie(be),y=se(be,"DIV",{class:!0});var yt=L(y);m=se(yt,"SPAN",{class:!0});var en=L(m);k=ge(en,"Partner"),en.forEach(v),T=Ie(yt),_t(E.$$.fragment,yt),yt.forEach(v),g=Ie(be),b=se(be,"IMG",{class:!0,alt:!0,src:!0}),be.forEach(v),V=Ie($),D=se($,"DIV",{});var dn=L(D);dn.forEach(v),z=Ie($),A=se($,"DIV",{id:!0,class:!0});var tn=L(A);S=se(tn,"DIV",{id:!0,class:!0});var vt=L(S);X=se(vt,"DIV",{class:!0});var Ht=L(X);_t(P.$$.fragment,Ht),q=Ie(Ht),_t(M.$$.fragment,Ht),Ht.forEach(v),N=Ie(vt),te=se(vt,"DIV",{class:!0});var wt=L(te);le=se(wt,"DIV",{class:!0});var dt=L(le);Q=se(dt,"SPAN",{});var Vt=L(Q);Y=ge(Vt,"Showing"),Vt.forEach(v),G=Ie(dt),W=se(dt,"BUTTON",{class:!0});var Bt=L(W);fe=ge(Bt,"Export"),Bt.forEach(v),de=Ie(dt),we=se(dt,"BUTTON",{class:!0});var nn=L(we);ye=ge(nn,"Import"),nn.forEach(v),dt.forEach(v),ue=Ie(wt),O=se(wt,"DIV",{});var tr=L(O);J=se(tr,"H2",{class:!0});var bt=L(J);Le=ge(bt,`What did 
            `),R=se(bt,"B",{});var nr=L(R);C=ge(nr,ne),nr.forEach(v),H=Ie(bt),Oe=ge(bt,j),oe=Ie(bt),_e=se(bt,"B",{});var rr=L(_e);U=ge(rr,Ne),rr.forEach(v),Ee=Ie(bt),Pe=ge(bt,De),bt.forEach(v),tr.forEach(v),Xe=Ie(wt),qe=se(wt,"DIV",{class:!0});var ir=L(qe);He&&He.l(ir),ir.forEach(v),wt.forEach(v),F=Ie(vt),ee=se(vt,"DIV",{class:!0});var p=L(ee);_t(pe.$$.fragment,p),p.forEach(v),vt.forEach(v),tn.forEach(v),x=Ie($),Se=se($,"FOOTER",{class:!0});var ce=L(Se);Re=se(ce,"CENTER",{});var Ce=L(Re);Be=ge(Ce,"A Bilateral Trade Data Visualization by "),Te=se(Ce,"B",{});var it=L(Te);rt=ge(it,"Andrew Lee"),it.forEach(v),at=ge(Ce," & "),je=se(Ce,"B",{});var Nt=L(je);gt=ge(Nt,"Franklin Yuan"),Nt.forEach(v),Ce.forEach(v),ce.forEach(v),this.h()},h(){var $,be,st,pt;d(n,"class","country-icon svelte-1o4rlrj"),d(n,"alt","Select a country"),lr(n.src,r=pr((be=($=e[2])==null?void 0:$.code)!=null?be:"ATA"))||d(n,"src",r),d(l,"class","svelte-1o4rlrj"),d(o,"class","dropdown svelte-1o4rlrj"),d(c,"class","switch-btn svelte-1o4rlrj"),d(h,"class","switch-btn-container svelte-1o4rlrj"),d(m,"class","svelte-1o4rlrj"),d(y,"class","dropdown svelte-1o4rlrj"),d(b,"class","country-icon svelte-1o4rlrj"),d(b,"alt","Select a partner"),lr(b.src,B=pr((pt=(st=e[8])==null?void 0:st.code)!=null?pt:"ATA"))||d(b,"src",B),d(t,"class","selectors svelte-1o4rlrj"),d(X,"class","viz-row svelte-1o4rlrj"),d(W,"class","svelte-1o4rlrj"),$e(W,"btn-active",e[9]),d(we,"class","svelte-1o4rlrj"),$e(we,"btn-active",!e[9]),d(le,"class","export-import-btn-container svelte-1o4rlrj"),d(J,"class","chart-header svelte-1o4rlrj"),d(qe,"class","clear-sectors svelte-1o4rlrj"),d(te,"class","spacer svelte-1o4rlrj"),d(ee,"class","viz-row svelte-1o4rlrj"),d(S,"id","content"),d(S,"class","svelte-1o4rlrj"),d(A,"id","container"),d(A,"class","svelte-1o4rlrj"),d(Se,"class","svelte-1o4rlrj")},m($,be){K($,t,be),I(t,n),I(t,i),I(t,o),I(o,l),I(l,a),I(o,s),Ue(u,o,null),I(t,f),I(t,h),I(h,c),I(c,_),I(t,w),I(t,y),I(y,m),I(m,k),I(y,T),Ue(E,y,null),I(t,g),I(t,b),K($,V,be),K($,D,be),K($,z,be),K($,A,be),I(A,S),I(S,X),Ue(P,X,null),I(X,q),Ue(M,X,null),I(S,N),I(S,te),I(te,le),I(le,Q),I(Q,Y),I(le,G),I(le,W),I(W,fe),I(le,de),I(le,we),I(we,ye),I(te,ue),I(te,O),I(O,J),I(J,Le),I(J,R),I(R,C),I(J,H),I(J,Oe),I(J,oe),I(J,_e),I(_e,U),I(J,Ee),I(J,Pe),I(te,Xe),I(te,qe),He&&He.m(qe,null),I(S,F),I(S,ee),Ue(pe,ee,null),K($,x,be),K($,Se,be),I(Se,Re),I(Re,Be),I(Re,Te),I(Te,rt),I(Re,at),I(Re,je),I(je,gt),Fe=!0,Nn||(xn=[Z(c,"click",e[14]),Z(W,"click",e[15]),Z(we,"click",e[16])],Nn=!0)},p($,be){var en,dn,tn,vt,Ht,wt,dt,Vt,Bt,nn;(!Fe||be&4&&!lr(n.src,r=pr((dn=(en=$[2])==null?void 0:en.code)!=null?dn:"ATA")))&&d(n,"src",r);const st={};be&1&&(st.items=Array.from($[0].values())),be&4&&(st.value=$[2]),u.$set(st);const pt={};be&1&&(pt.items=Array.from($[0].values())),be&256&&(pt.value=$[8]),E.$set(pt),(!Fe||be&256&&!lr(b.src,B=pr((vt=(tn=$[8])==null?void 0:tn.code)!=null?vt:"ATA")))&&d(b,"src",B);const Wt={};be&303&&(Wt.data={bilateralData:$[5],country1_id:(wt=(Ht=$[2])==null?void 0:Ht.id)!=null?wt:0,country2_id:(Vt=(dt=$[8])==null?void 0:dt.id)!=null?Vt:0,productData:$[1],locationData:$[0],countryColorScale:$[3]}),P.$set(Wt);const $t={};be&447&&($t.data={productData:$[1],locationData:$[0],bilateralData:$[5],loadingDrilldown:$[7],productColorScale:$[4],country1:$[2],country2:$[8],countryColorScale:$[3]}),M.$set($t),(!Fe||be&512)&&$e(W,"btn-active",$[9]),(!Fe||be&512)&&$e(we,"btn-active",!$[9]),(!Fe||be&4)&&ne!==(ne=((Bt=$[2])==null?void 0:Bt.name)+"")&&Ke(C,ne),(!Fe||be&512)&&j!==(j=$[9]?"export to ":"import from ")&&Ke(Oe,j),(!Fe||be&256)&&Ne!==(Ne=((nn=$[8])==null?void 0:nn.name)+"")&&Ke(U,Ne),(!Fe||be&1024)&&De!==(De=$[10].length>1?`from ${$[10][0]} to ${$[10][$[10].length-1]}?`:`in ${$[10]}?`)&&Ke(Pe,De),$[11].size>0?He?(He.p($,be),be&2048&&he(He,1)):(He=Go($),He.c(),he(He,1),He.m(qe,null)):He&&(xe(),ve(He,1,1,()=>{He=null}),Ze());const yt={};be&471&&(yt.data={locationData:$[0],productData:$[1],productColorScale:$[4],country1:$[2],country2:$[8],drilldownBilateral:$[6],loadingDrilldown:$[7]}),pe.$set(yt)},i($){Fe||(he(u.$$.fragment,$),he(E.$$.fragment,$),he(P.$$.fragment,$),he(M.$$.fragment,$),he(He),he(pe.$$.fragment,$),Fe=!0)},o($){ve(u.$$.fragment,$),ve(E.$$.fragment,$),ve(P.$$.fragment,$),ve(M.$$.fragment,$),ve(He),ve(pe.$$.fragment,$),Fe=!1},d($){$&&v(t),ze(u),ze(E),$&&v(V),$&&v(D),$&&v(z),$&&v(A),ze(P),ze(M),He&&He.d(),ze(pe),$&&v(x),$&&v(Se),Nn=!1,ht(xn)}}}function Go(e){let t,n,r,i,o,l,a;return{c(){t=ae("button"),n=me("Clear Sector Selection"),this.h()},l(s){t=se(s,"BUTTON",{height:!0,class:!0});var u=L(t);n=ge(u,"Clear Sector Selection"),u.forEach(v),this.h()},h(){d(t,"height","10"),d(t,"class","svelte-1o4rlrj")},m(s,u){K(s,t,u),I(t,n),o=!0,l||(a=Z(t,"click",e[17]),l=!0)},p:Ve,i(s){o||(hn(()=>{i&&i.end(1),r=Ui(t,Gr,{duration:200}),r.start()}),o=!0)},o(s){r&&r.invalidate(),i=qa(t,Gr,{duration:200}),o=!1},d(s){s&&v(t),s&&i&&i.end(),l=!1,a()}}}function cd(e){let t,n,r,i,o,l=il.exports.icons["book-open"].toSvg()+"",a,s,u=il.exports.icons.github.toSvg()+"",f,h,c,_,w,y,m,k;const T=[fd,ud],E=[];function g(b,B){return b[0]&&b[5]&&b[1]?0:1}return y=g(e),m=E[y]=T[y](e),{c(){t=ae("link"),n=Ae(),r=ae("div"),i=ae("div"),o=ae("a"),a=Ae(),s=ae("a"),f=Ae(),h=ae("div"),c=ae("h1"),_=me("Commerce Among Nations"),w=Ae(),m.c(),this.h()},l(b){const B=Xa("svelte-tu7v51",document.head);t=se(B,"LINK",{rel:!0,href:!0}),B.forEach(v),n=Ie(b),r=se(b,"DIV",{class:!0});var V=L(r);i=se(V,"DIV",{class:!0});var D=L(i);o=se(D,"A",{href:!0,title:!0,class:!0});var z=L(o);z.forEach(v),a=Ie(D),s=se(D,"A",{href:!0,title:!0,class:!0});var A=L(s);A.forEach(v),D.forEach(v),f=Ie(V),h=se(V,"DIV",{class:!0});var S=L(h);c=se(S,"H1",{class:!0});var X=L(c);_=ge(X,"Commerce Among Nations"),X.forEach(v),S.forEach(v),w=Ie(V),m.l(V),V.forEach(v),this.h()},h(){d(t,"rel","icon"),d(t,"href",`${bn}/favicon.png`),document.title="Commerce Among Nations",d(o,"href",bn+"/processbook"),d(o,"title","process-book"),d(o,"class","svelte-1o4rlrj"),d(s,"href","https://github.com/candrewlee14/data-viz-project"),d(s,"title","github"),d(s,"class","svelte-1o4rlrj"),d(i,"class","nav svelte-1o4rlrj"),d(c,"class","svelte-1o4rlrj"),d(h,"class","heading svelte-1o4rlrj"),d(r,"class","outer svelte-1o4rlrj")},m(b,B){I(document.head,t),K(b,n,B),K(b,r,B),I(r,i),I(i,o),o.innerHTML=l,I(i,a),I(i,s),s.innerHTML=u,I(r,f),I(r,h),I(h,c),I(c,_),I(r,w),E[y].m(r,null),k=!0},p(b,[B]){let V=y;y=g(b),y===V?E[y].p(b,B):(xe(),ve(E[V],1,1,()=>{E[V]=null}),Ze(),m=E[y],m?m.p(b,B):(m=E[y]=T[y](b),m.c()),he(m,1),m.m(r,null))},i(b){k||(he(m),k=!0)},o(b){ve(m),k=!1},d(b){v(t),b&&v(n),b&&v(r),E[y].d()}}}const Uo="id",zo="name",hd=231,dd=43;function _d(e,t,n){let r,i,o,l,a;At(e,sn,b=>n(9,o=b)),At(e,on,b=>n(10,l=b)),At(e,lt,b=>n(11,a=b));const s=b=>{let B=b.detail;n(2,r=c.get(B.id))},u=b=>{let B=b.detail;n(8,i=c.get(B.id))};let f,h,c=new Map,_=new Map,w,y,m=!1;function k(){let b=r;n(2,r=i),n(8,i=b)}function T(){rl(sn,o=!0,o)}function E(){rl(sn,o=!1,o)}Yr(async()=>{Promise.all([ur(`${bn}/data/location.csv`),ur(`${bn}/data/hs_product.csv`),ur(`${bn}/data/hs_2010_to_2020.csv`)]).then(([b,B,V])=>{var z;n(0,c=ol(b.map(A=>new D0(A)).filter(A=>A.level=="country"),A=>A.id)),n(1,_=ol(B.map(A=>new Ir(A)),A=>A.id));for(let[A,S]of _)S.parent=(z=_.get(S.parent_id))!=null?z:null,_.set(A,S);let D=V.map(A=>new Xt(c,_,A));n(5,w=di(D,A=>A.location_id,A=>A.partner_id,A=>A.year)),Wo(V,A=>+A.export_value),n(3,f=Ri(c.keys(),zl)),n(4,h=Ri(Array.from(_).map(([A,S])=>S.level).filter(A=>A=="section"),zl))})});const g=()=>{lt.set(new Set)};return e.$$.update=()=>{var b,B,V,D;e.$$.dirty&1&&n(2,r=(b=c==null?void 0:c.get(hd))!=null?b:null),e.$$.dirty&1&&n(8,i=(B=c==null?void 0:c.get(dd))!=null?B:null),e.$$.dirty&7&&(n(6,y=null),n(7,m=!0),ur(`${bn}/data/${(V=r==null?void 0:r.code)!=null?V:"USA"}/${(D=r==null?void 0:r.code)!=null?D:"USA"}_hs2_2010_to_2020.csv`).then(z=>{n(6,y=di(z.map(A=>new Xt(c,_,A)),A=>A.partner_id,A=>A.year)),n(7,m=!1)}))},[c,_,r,f,h,w,y,m,i,o,l,a,s,u,k,T,E,g]}class wd extends It{constructor(t){super(),St(this,t,_d,cd,Tt,{})}}export{wd as default};
