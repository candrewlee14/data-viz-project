var Lo=Object.defineProperty;var Do=(e,t,n)=>t in e?Lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xe=(e,t,n)=>(Do(e,typeof t!="symbol"?t+"":t,n),n);import{S as Et,i as At,s as It,k as re,l as ie,m as D,h as v,n as d,b as x,B as Fe,I as $e,J as q,g as Ke,t as ke,d as qe,f as he,K as ft,L as Pi,o as Wr,M as za,N as lt,e as Te,O as Gi,v as nt,w as Ue,x as ht,y as ze,z as Ye,q as pe,r as ye,G as T,u as Ge,A as vr,a as Ae,c as Ie,P as le,Q as ae,p as _n,R as _i,T as hn,U as Kr,V as Zt,W as Oo,C as Ro,D as Fo,E as Ho,F as Vo,X as Ui,Y as nl,Z as rl,_ as zi,$ as Ya,a0 as Bo,a1 as il,a2 as Po,a3 as Go,a4 as Uo,a5 as zo,a6 as Xe,H as kt,a7 as st,a8 as Yi,a9 as An,aa as Yo,ab as Xo,ac as xo,ad as Wo,ae as Ko,af as ll,ag as lr,ah as qo}from"../../chunks/index-5ece49a7.js";import{b as bn}from"../../chunks/paths-6cd3a76e.js";import{w as Xi}from"../../chunks/index-747ceb65.js";import{f as ar}from"../../chunks/feather-e249e621.js";function wr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Xa(e){let t,n,r;e.length!==2?(t=wr,n=(o,s)=>wr(e(o),s),r=(o,s)=>e(o)-s):(t=e===wr||e===Zo?e:Jo,n=e,r=e);function i(o,s,u=0,h=o.length){if(u<h){if(t(s,s)!==0)return h;do{const c=u+h>>>1;n(o[c],s)<0?u=c+1:h=c}while(u<h)}return u}function a(o,s,u=0,h=o.length){if(u<h){if(t(s,s)!==0)return h;do{const c=u+h>>>1;n(o[c],s)<=0?u=c+1:h=c}while(u<h)}return u}function l(o,s,u=0,h=o.length){const c=i(o,s,u,h-1);return c>u&&r(o[c-1],s)>-r(o[c],s)?c-1:c}return{left:i,center:l,right:a}}function Jo(){return 0}function Qo(e){return e===null?NaN:+e}const jo=Xa(wr),$o=jo.right;Xa(Qo).center;const es=$o;function xa(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class mi extends Map{constructor(t,n=rs){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(al(this,t))}has(t){return super.has(al(this,t))}set(t,n){return super.set(ts(this,t),n)}delete(t){return super.delete(ns(this,t))}}function al({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ts({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ns({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function rs(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Sr(e){return e}function gi(e,...t){return xi(e,Sr,Sr,t)}function pi(e,t,...n){return xi(e,Sr,t,n)}function ol(e,...t){return xi(e,Sr,is,t)}function is(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function xi(e,t,n,r){return function i(a,l){if(l>=r.length)return n(a);const o=new mi,s=r[l++];let u=-1;for(const h of a){const c=s(h,++u,a),f=o.get(c);f?f.push(h):o.set(c,[h])}for(const[h,c]of o)o.set(h,i(c,l));return t(o)}(e,0)}var yi=Math.sqrt(50),vi=Math.sqrt(10),wi=Math.sqrt(2);function ls(e,t,n){var r,i=-1,a,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=Wa(e,t,n))===0||!isFinite(o))return[];if(o>0){let s=Math.round(e/o),u=Math.round(t/o);for(s*o<e&&++s,u*o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)*o}else{o=-o;let s=Math.round(e*o),u=Math.round(t*o);for(s/o<e&&++s,u/o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)/o}return r&&l.reverse(),l}function Wa(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=yi?10:a>=vi?5:a>=wi?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=yi?10:a>=vi?5:a>=wi?2:1)}function as(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=yi?i*=10:a>=vi?i*=5:a>=wi&&(i*=2),t<e?-i:i}function Bn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function sl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Mr(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function os(e){return e}var jr=1,br=2,bi=3,Fn=4,ul=1e-6;function ss(e){return"translate("+e+",0)"}function us(e){return"translate(0,"+e+")"}function fs(e){return t=>+e(t)}function cs(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function hs(){return!this.__axis}function Wi(e,t){var n=[],r=null,i=null,a=6,l=6,o=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===jr||e===Fn?-1:1,h=e===Fn||e===br?"x":"y",c=e===jr||e===bi?ss:us;function f(_){var y=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,b=i==null?t.tickFormat?t.tickFormat.apply(t,n):os:i,p=Math.max(a,0)+o,w=t.range(),E=+w[0]+s,A=+w[w.length-1]+s,m=(t.bandwidth?cs:fs)(t.copy(),s),k=_.selection?_.selection():_,H=k.selectAll(".domain").data([null]),Y=k.selectAll(".tick").data(y,t).order(),V=Y.exit(),S=Y.enter().append("g").attr("class","tick"),N=Y.select("line"),M=Y.select("text");H=H.merge(H.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Y=Y.merge(S),N=N.merge(S.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),M=M.merge(S.append("text").attr("fill","currentColor").attr(h,u*p).attr("dy",e===jr?"0em":e===bi?"0.71em":"0.32em")),_!==k&&(H=H.transition(_),Y=Y.transition(_),N=N.transition(_),M=M.transition(_),V=V.transition(_).attr("opacity",ul).attr("transform",function(P){return isFinite(P=m(P))?c(P+s):this.getAttribute("transform")}),S.attr("opacity",ul).attr("transform",function(P){var F=this.parentNode.__axis;return c((F&&isFinite(F=F(P))?F:m(P))+s)})),V.remove(),H.attr("d",e===Fn||e===br?l?"M"+u*l+","+E+"H"+s+"V"+A+"H"+u*l:"M"+s+","+E+"V"+A:l?"M"+E+","+u*l+"V"+s+"H"+A+"V"+u*l:"M"+E+","+s+"H"+A),Y.attr("opacity",1).attr("transform",function(P){return c(m(P)+s)}),N.attr(h+"2",u*a),M.attr(h,u*p).text(b),k.filter(hs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===br?"start":e===Fn?"end":"middle"),k.each(function(){this.__axis=m})}return f.scale=function(_){return arguments.length?(t=_,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),f):n.slice()},f.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),f):r&&r.slice()},f.tickFormat=function(_){return arguments.length?(i=_,f):i},f.tickSize=function(_){return arguments.length?(a=l=+_,f):a},f.tickSizeInner=function(_){return arguments.length?(a=+_,f):a},f.tickSizeOuter=function(_){return arguments.length?(l=+_,f):l},f.tickPadding=function(_){return arguments.length?(o=+_,f):o},f.offset=function(_){return arguments.length?(s=+_,f):s},f}function ds(e){return Wi(br,e)}function Ka(e){return Wi(bi,e)}function _s(e){return Wi(Fn,e)}var ms={value:()=>{}};function Ki(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new kr(n)}function kr(e){this._=e}function gs(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}kr.prototype=Ki.prototype={constructor:kr,on:function(e,t){var n=this._,r=gs(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=ps(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=fl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=fl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new kr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function ps(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function fl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ms,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ki="http://www.w3.org/1999/xhtml";const cl={svg:"http://www.w3.org/2000/svg",xhtml:ki,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cl.hasOwnProperty(t)?{space:cl[t],local:e}:e}function ys(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ki&&t.documentElement.namespaceURI===ki?t.createElement(e):t.createElementNS(n,e)}}function vs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qa(e){var t=qr(e);return(t.local?vs:ys)(t)}function ws(){}function qi(e){return e==null?ws:function(){return this.querySelector(e)}}function bs(e){typeof e!="function"&&(e=qi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=new Array(l),s,u,h=0;h<l;++h)(s=a[h])&&(u=e.call(s,s.__data__,h,a))&&("__data__"in s&&(u.__data__=s.__data__),o[h]=u);return new dt(r,this._parents)}function ks(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Es(){return[]}function Za(e){return e==null?Es:function(){return this.querySelectorAll(e)}}function As(e){return function(){return ks(e.apply(this,arguments))}}function Is(e){typeof e=="function"?e=As(e):e=Za(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new dt(r,i)}function Ja(e){return function(){return this.matches(e)}}function Qa(e){return function(t){return t.matches(e)}}var Ts=Array.prototype.find;function Ss(e){return function(){return Ts.call(this.children,e)}}function Ms(){return this.firstElementChild}function Ns(e){return this.select(e==null?Ms:Ss(typeof e=="function"?e:Qa(e)))}var Cs=Array.prototype.filter;function Ls(){return Array.from(this.children)}function Ds(e){return function(){return Cs.call(this.children,e)}}function Os(e){return this.selectAll(e==null?Ls:Ds(typeof e=="function"?e:Qa(e)))}function Rs(e){typeof e!="function"&&(e=Ja(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new dt(r,this._parents)}function ja(e){return new Array(e.length)}function Fs(){return new dt(this._enter||this._groups.map(ja),this._parents)}function Nr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Nr.prototype={constructor:Nr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hs(e){return function(){return e}}function Vs(e,t,n,r,i,a){for(var l=0,o,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new Nr(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function Bs(e,t,n,r,i,a,l){var o,s,u=new Map,h=t.length,c=a.length,f=new Array(h),_;for(o=0;o<h;++o)(s=t[o])&&(f[o]=_=l.call(s,s.__data__,o,t)+"",u.has(_)?i[o]=s:u.set(_,s));for(o=0;o<c;++o)_=l.call(e,a[o],o,a)+"",(s=u.get(_))?(r[o]=s,s.__data__=a[o],u.delete(_)):n[o]=new Nr(e,a[o]);for(o=0;o<h;++o)(s=t[o])&&u.get(f[o])===s&&(i[o]=s)}function Ps(e){return e.__data__}function Gs(e,t){if(!arguments.length)return Array.from(this,Ps);var n=t?Bs:Vs,r=this._parents,i=this._groups;typeof e!="function"&&(e=Hs(e));for(var a=i.length,l=new Array(a),o=new Array(a),s=new Array(a),u=0;u<a;++u){var h=r[u],c=i[u],f=c.length,_=Us(e.call(h,h&&h.__data__,u,r)),y=_.length,b=o[u]=new Array(y),p=l[u]=new Array(y),w=s[u]=new Array(f);n(h,c,b,p,w,_,t);for(var E=0,A=0,m,k;E<y;++E)if(m=b[E]){for(E>=A&&(A=E+1);!(k=p[A])&&++A<y;);m._next=k||null}}return l=new dt(l,r),l._enter=o,l._exit=s,l}function Us(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zs(){return new dt(this._exit||this._groups.map(ja),this._parents)}function Ys(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Xs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),o=new Array(i),s=0;s<l;++s)for(var u=n[s],h=r[s],c=u.length,f=o[s]=new Array(c),_,y=0;y<c;++y)(_=u[y]||h[y])&&(f[y]=_);for(;s<i;++s)o[s]=n[s];return new dt(o,this._parents)}function xs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Ws(e){e||(e=Ks);function t(c,f){return c&&f?e(c.__data__,f.__data__):!c-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],o=l.length,s=i[a]=new Array(o),u,h=0;h<o;++h)(u=l[h])&&(s[h]=u);s.sort(t)}return new dt(i,this._parents).order()}function Ks(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zs(){return Array.from(this)}function Js(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function Qs(){let e=0;for(const t of this)++e;return e}function js(){return!this.node()}function $s(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,o;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function eu(e){return function(){this.removeAttribute(e)}}function tu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nu(e,t){return function(){this.setAttribute(e,t)}}function ru(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function iu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function au(e,t){var n=qr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?tu:eu:typeof t=="function"?n.local?lu:iu:n.local?ru:nu)(n,t))}function $a(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ou(e){return function(){this.style.removeProperty(e)}}function su(e,t,n){return function(){this.style.setProperty(e,t,n)}}function uu(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fu(e,t,n){return arguments.length>1?this.each((t==null?ou:typeof t=="function"?uu:su)(e,t,n==null?"":n)):Tn(this.node(),e)}function Tn(e,t){return e.style.getPropertyValue(t)||$a(e).getComputedStyle(e,null).getPropertyValue(t)}function cu(e){return function(){delete this[e]}}function hu(e,t){return function(){this[e]=t}}function du(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function _u(e,t){return arguments.length>1?this.each((t==null?cu:typeof t=="function"?du:hu)(e,t)):this.node()[e]}function eo(e){return e.trim().split(/^|\s+/)}function Zi(e){return e.classList||new to(e)}function to(e){this._node=e,this._names=eo(e.getAttribute("class")||"")}to.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function no(e,t){for(var n=Zi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ro(e,t){for(var n=Zi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function mu(e){return function(){no(this,e)}}function gu(e){return function(){ro(this,e)}}function pu(e,t){return function(){(t.apply(this,arguments)?no:ro)(this,e)}}function yu(e,t){var n=eo(e+"");if(arguments.length<2){for(var r=Zi(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?pu:t?mu:gu)(n,t))}function vu(){this.textContent=""}function wu(e){return function(){this.textContent=e}}function bu(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function ku(e){return arguments.length?this.each(e==null?vu:(typeof e=="function"?bu:wu)(e)):this.node().textContent}function Eu(){this.innerHTML=""}function Au(e){return function(){this.innerHTML=e}}function Iu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Tu(e){return arguments.length?this.each(e==null?Eu:(typeof e=="function"?Iu:Au)(e)):this.node().innerHTML}function Su(){this.nextSibling&&this.parentNode.appendChild(this)}function Mu(){return this.each(Su)}function Nu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cu(){return this.each(Nu)}function Lu(e){var t=typeof e=="function"?e:qa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Du(){return null}function Ou(e,t){var n=typeof e=="function"?e:qa(e),r=t==null?Du:typeof t=="function"?t:qi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ru(){var e=this.parentNode;e&&e.removeChild(this)}function Fu(){return this.each(Ru)}function Hu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bu(e){return this.select(e?Vu:Hu)}function Pu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Gu(e){return function(t){e.call(this,t,this.__data__)}}function Uu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zu(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Yu(e,t,n){return function(){var r=this.__on,i,a=Gu(t);if(r){for(var l=0,o=r.length;l<o;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Xu(e,t,n){var r=Uu(e+""),i,a=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var s=0,u=o.length,h;s<u;++s)for(i=0,h=o[s];i<a;++i)if((l=r[i]).type===h.type&&l.name===h.name)return h.value}return}for(o=t?Yu:zu,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function io(e,t,n){var r=$a(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xu(e,t){return function(){return io(this,e,t)}}function Wu(e,t){return function(){return io(this,e,t.apply(this,arguments))}}function Ku(e,t){return this.each((typeof t=="function"?Wu:xu)(e,t))}function*qu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var lo=[null];function dt(e,t){this._groups=e,this._parents=t}function Wn(){return new dt([[document.documentElement]],lo)}function Zu(){return this}dt.prototype=Wn.prototype={constructor:dt,select:bs,selectAll:Is,selectChild:Ns,selectChildren:Os,filter:Rs,data:Gs,enter:Fs,exit:zs,join:Ys,merge:Xs,selection:Zu,order:xs,sort:Ws,call:qs,nodes:Zs,node:Js,size:Qs,empty:js,each:$s,attr:au,style:fu,property:_u,classed:yu,text:ku,html:Tu,raise:Mu,lower:Cu,append:Lu,insert:Ou,remove:Fu,clone:Bu,datum:Pu,on:Xu,dispatch:Ku,[Symbol.iterator]:qu};function Me(e){return typeof e=="string"?new dt([[document.querySelector(e)]],[document.documentElement]):new dt([[e]],lo)}function Ju(e){let t;for(;t=e.sourceEvent;)e=t;return e}function hl(e,t){if(e=Ju(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ei={capture:!0,passive:!1};function Ai(e){e.preventDefault(),e.stopImmediatePropagation()}function Qu(e){var t=e.document.documentElement,n=Me(e).on("dragstart.drag",Ai,Ei);"onselectstart"in t?n.on("selectstart.drag",Ai,Ei):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ju(e,t){var n=e.document.documentElement,r=Me(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ai,Ei),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ji(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ao(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Kn(){}var Un=.7,Cr=1/Un,In="\\s*([+-]?\\d+)\\s*",zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$u=/^#([0-9a-f]{3,8})$/,ef=new RegExp(`^rgb\\(${In},${In},${In}\\)$`),tf=new RegExp(`^rgb\\(${Dt},${Dt},${Dt}\\)$`),nf=new RegExp(`^rgba\\(${In},${In},${In},${zn}\\)$`),rf=new RegExp(`^rgba\\(${Dt},${Dt},${Dt},${zn}\\)$`),lf=new RegExp(`^hsl\\(${zn},${Dt},${Dt}\\)$`),af=new RegExp(`^hsla\\(${zn},${Dt},${Dt},${zn}\\)$`),dl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ji(Kn,un,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_l,formatHex:_l,formatHex8:of,formatHsl:sf,formatRgb:ml,toString:ml});function _l(){return this.rgb().formatHex()}function of(){return this.rgb().formatHex8()}function sf(){return oo(this).formatHsl()}function ml(){return this.rgb().formatRgb()}function un(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$u.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gl(t):n===3?new ut(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?or(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?or(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ef.exec(e))?new ut(t[1],t[2],t[3],1):(t=tf.exec(e))?new ut(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nf.exec(e))?or(t[1],t[2],t[3],t[4]):(t=rf.exec(e))?or(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lf.exec(e))?vl(t[1],t[2]/100,t[3]/100,1):(t=af.exec(e))?vl(t[1],t[2]/100,t[3]/100,t[4]):dl.hasOwnProperty(e)?gl(dl[e]):e==="transparent"?new ut(NaN,NaN,NaN,0):null}function gl(e){return new ut(e>>16&255,e>>8&255,e&255,1)}function or(e,t,n,r){return r<=0&&(e=t=n=NaN),new ut(e,t,n,r)}function uf(e){return e instanceof Kn||(e=un(e)),e?(e=e.rgb(),new ut(e.r,e.g,e.b,e.opacity)):new ut}function Ii(e,t,n,r){return arguments.length===1?uf(e):new ut(e,t,n,r==null?1:r)}function ut(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ji(ut,Ii,ao(Kn,{brighter(e){return e=e==null?Cr:Math.pow(Cr,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Un:Math.pow(Un,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ut(on(this.r),on(this.g),on(this.b),Lr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pl,formatHex:pl,formatHex8:ff,formatRgb:yl,toString:yl}));function pl(){return`#${ln(this.r)}${ln(this.g)}${ln(this.b)}`}function ff(){return`#${ln(this.r)}${ln(this.g)}${ln(this.b)}${ln((isNaN(this.opacity)?1:this.opacity)*255)}`}function yl(){const e=Lr(this.opacity);return`${e===1?"rgb(":"rgba("}${on(this.r)}, ${on(this.g)}, ${on(this.b)}${e===1?")":`, ${e})`}`}function Lr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function on(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ln(e){return e=on(e),(e<16?"0":"")+e.toString(16)}function vl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bt(e,t,n,r)}function oo(e){if(e instanceof bt)return new bt(e.h,e.s,e.l,e.opacity);if(e instanceof Kn||(e=un(e)),!e)return new bt;if(e instanceof bt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,o=a-i,s=(a+i)/2;return o?(t===a?l=(n-r)/o+(n<r)*6:n===a?l=(r-t)/o+2:l=(t-n)/o+4,o/=s<.5?a+i:2-a-i,l*=60):o=s>0&&s<1?0:l,new bt(l,o,s,e.opacity)}function cf(e,t,n,r){return arguments.length===1?oo(e):new bt(e,t,n,r==null?1:r)}function bt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ji(bt,cf,ao(Kn,{brighter(e){return e=e==null?Cr:Math.pow(Cr,e),new bt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Un:Math.pow(Un,e),new bt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ut($r(e>=240?e-240:e+120,i,r),$r(e,i,r),$r(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new bt(wl(this.h),sr(this.s),sr(this.l),Lr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lr(this.opacity);return`${e===1?"hsl(":"hsla("}${wl(this.h)}, ${sr(this.s)*100}%, ${sr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wl(e){return e=(e||0)%360,e<0?e+360:e}function sr(e){return Math.max(0,Math.min(1,e||0))}function $r(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Qi=e=>()=>e;function hf(e,t){return function(n){return e+n*t}}function df(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function _f(e){return(e=+e)==1?so:function(t,n){return n-t?df(t,n,e):Qi(isNaN(t)?n:t)}}function so(e,t){var n=t-e;return n?hf(e,n):Qi(isNaN(e)?t:e)}const Dr=function e(t){var n=_f(t);function r(i,a){var l=n((i=Ii(i)).r,(a=Ii(a)).r),o=n(i.g,a.g),s=n(i.b,a.b),u=so(i.opacity,a.opacity);return function(h){return i.r=l(h),i.g=o(h),i.b=s(h),i.opacity=u(h),i+""}}return r.gamma=e,r}(1);function mf(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function gf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pf(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=Zr(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(o){for(l=0;l<r;++l)a[l]=i[l](o);return a}}function yf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function wt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vf(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Zr(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ti=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ei=new RegExp(Ti.source,"g");function wf(e){return function(){return e}}function bf(e){return function(t){return e(t)+""}}function uo(e,t){var n=Ti.lastIndex=ei.lastIndex=0,r,i,a,l=-1,o=[],s=[];for(e=e+"",t=t+"";(r=Ti.exec(e))&&(i=ei.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[l]?o[l]+=a:o[++l]=a),(r=r[0])===(i=i[0])?o[l]?o[l]+=i:o[++l]=i:(o[++l]=null,s.push({i:l,x:wt(r,i)})),n=ei.lastIndex;return n<t.length&&(a=t.slice(n),o[l]?o[l]+=a:o[++l]=a),o.length<2?s[0]?bf(s[0].x):wf(t):(t=s.length,function(u){for(var h=0,c;h<t;++h)o[(c=s[h]).i]=c.x(u);return o.join("")})}function Zr(e,t){var n=typeof t,r;return t==null||n==="boolean"?Qi(t):(n==="number"?wt:n==="string"?(r=un(t))?(t=r,Dr):uo:t instanceof un?Dr:t instanceof Date?yf:gf(t)?mf:Array.isArray(t)?pf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vf:wt)(e,t)}function kf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var bl=180/Math.PI,Si={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fo(e,t,n,r,i,a){var l,o,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,s/=o),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*bl,skewX:Math.atan(s)*bl,scaleX:l,scaleY:o}}var ur;function Ef(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Si:fo(t.a,t.b,t.c,t.d,t.e,t.f)}function Af(e){return e==null||(ur||(ur=document.createElementNS("http://www.w3.org/2000/svg","g")),ur.setAttribute("transform",e),!(e=ur.transform.baseVal.consolidate()))?Si:(e=e.matrix,fo(e.a,e.b,e.c,e.d,e.e,e.f))}function co(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,c,f,_,y){if(u!==c||h!==f){var b=_.push("translate(",null,t,null,n);y.push({i:b-4,x:wt(u,c)},{i:b-2,x:wt(h,f)})}else(c||f)&&_.push("translate("+c+t+f+n)}function l(u,h,c,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:c.push(i(c)+"rotate(",null,r)-2,x:wt(u,h)})):h&&c.push(i(c)+"rotate("+h+r)}function o(u,h,c,f){u!==h?f.push({i:c.push(i(c)+"skewX(",null,r)-2,x:wt(u,h)}):h&&c.push(i(c)+"skewX("+h+r)}function s(u,h,c,f,_,y){if(u!==c||h!==f){var b=_.push(i(_)+"scale(",null,",",null,")");y.push({i:b-4,x:wt(u,c)},{i:b-2,x:wt(h,f)})}else(c!==1||f!==1)&&_.push(i(_)+"scale("+c+","+f+")")}return function(u,h){var c=[],f=[];return u=e(u),h=e(h),a(u.translateX,u.translateY,h.translateX,h.translateY,c,f),l(u.rotate,h.rotate,c,f),o(u.skewX,h.skewX,c,f),s(u.scaleX,u.scaleY,h.scaleX,h.scaleY,c,f),u=h=null,function(_){for(var y=-1,b=f.length,p;++y<b;)c[(p=f[y]).i]=p.x(_);return c.join("")}}}var If=co(Ef,"px, ","px)","deg)"),Tf=co(Af,", ",")",")"),Sn=0,Hn=0,Cn=0,ho=1e3,Or,Vn,Rr=0,fn=0,Jr=0,Yn=typeof performance=="object"&&performance.now?performance:Date,_o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ji(){return fn||(_o(Sf),fn=Yn.now()+Jr)}function Sf(){fn=0}function Fr(){this._call=this._time=this._next=null}Fr.prototype=mo.prototype={constructor:Fr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ji():+n)+(t==null?0:+t),!this._next&&Vn!==this&&(Vn?Vn._next=this:Or=this,Vn=this),this._call=e,this._time=n,Mi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mi())}};function mo(e,t,n){var r=new Fr;return r.restart(e,t,n),r}function Mf(){ji(),++Sn;for(var e=Or,t;e;)(t=fn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Sn}function kl(){fn=(Rr=Yn.now())+Jr,Sn=Hn=0;try{Mf()}finally{Sn=0,Cf(),fn=0}}function Nf(){var e=Yn.now(),t=e-Rr;t>ho&&(Jr-=t,Rr=e)}function Cf(){for(var e,t=Or,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Or=n);Vn=e,Mi(r)}function Mi(e){if(!Sn){Hn&&(Hn=clearTimeout(Hn));var t=e-fn;t>24?(e<1/0&&(Hn=setTimeout(kl,e-Yn.now()-Jr)),Cn&&(Cn=clearInterval(Cn))):(Cn||(Rr=Yn.now(),Cn=setInterval(Nf,ho)),Sn=1,_o(kl))}}function El(e,t,n){var r=new Fr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Lf=Ki("start","end","cancel","interrupt"),Df=[],go=0,Al=1,Ni=2,Er=3,Il=4,Ci=5,Ar=6;function Qr(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Of(e,n,{name:t,index:r,group:i,on:Lf,tween:Df,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:go})}function $i(e,t){var n=Tt(e,t);if(n.state>go)throw new Error("too late; already scheduled");return n}function Ot(e,t){var n=Tt(e,t);if(n.state>Er)throw new Error("too late; already running");return n}function Tt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Of(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=mo(a,0,n.time);function a(u){n.state=Al,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var h,c,f,_;if(n.state!==Al)return s();for(h in r)if(_=r[h],_.name===n.name){if(_.state===Er)return El(l);_.state===Il?(_.state=Ar,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[h]):+h<t&&(_.state=Ar,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[h])}if(El(function(){n.state===Er&&(n.state=Il,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Ni,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ni){for(n.state=Er,i=new Array(f=n.tween.length),h=0,c=-1;h<f;++h)(_=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=_);i.length=c+1}}function o(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Ci,1),c=-1,f=i.length;++c<f;)i[c].call(e,h);n.state===Ci&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ar,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Li(e,t){var n=e.__transition,r,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>Ni&&r.state<Ci,r.state=Ar,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function Rf(e){return this.each(function(){Li(this,e)})}function Ff(e,t){var n,r;return function(){var i=Ot(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,o=r.length;l<o;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function Hf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Ot(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var o={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=o;break}s===u&&i.push(o)}a.tween=i}}function Vf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Tt(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?Ff:Hf)(n,e,t))}function el(e,t,n){var r=e._id;return e.each(function(){var i=Ot(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Tt(i,r).value[t]}}function po(e,t){var n;return(typeof t=="number"?wt:t instanceof un?Dr:(n=un(t))?(t=n,Dr):uo)(e,t)}function Bf(e){return function(){this.removeAttribute(e)}}function Pf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function Uf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function zf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Yf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Xf(e,t){var n=qr(e),r=n==="transform"?Tf:po;return this.attrTween(e,typeof t=="function"?(n.local?Yf:zf)(n,r,el(this,"attr."+e,t)):t==null?(n.local?Pf:Bf)(n):(n.local?Uf:Gf)(n,r,t))}function xf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Wf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Kf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Wf(e,a)),n}return i._value=t,i}function qf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&xf(e,a)),n}return i._value=t,i}function Zf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=qr(e);return this.tween(n,(r.local?Kf:qf)(r,t))}function Jf(e,t){return function(){$i(this,e).delay=+t.apply(this,arguments)}}function Qf(e,t){return t=+t,function(){$i(this,e).delay=t}}function jf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jf:Qf)(t,e)):Tt(this.node(),t).delay}function $f(e,t){return function(){Ot(this,e).duration=+t.apply(this,arguments)}}function ec(e,t){return t=+t,function(){Ot(this,e).duration=t}}function tc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$f:ec)(t,e)):Tt(this.node(),t).duration}function nc(e,t){if(typeof t!="function")throw new Error;return function(){Ot(this,e).ease=t}}function rc(e){var t=this._id;return arguments.length?this.each(nc(t,e)):Tt(this.node(),t).ease}function ic(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ot(this,e).ease=n}}function lc(e){if(typeof e!="function")throw new Error;return this.each(ic(this._id,e))}function ac(e){typeof e!="function"&&(e=Ja(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new Xt(r,this._parents,this._name,this._id)}function oc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),o=0;o<a;++o)for(var s=t[o],u=n[o],h=s.length,c=l[o]=new Array(h),f,_=0;_<h;++_)(f=s[_]||u[_])&&(c[_]=f);for(;o<r;++o)l[o]=t[o];return new Xt(l,this._parents,this._name,this._id)}function sc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function uc(e,t,n){var r,i,a=sc(t)?$i:Ot;return function(){var l=a(this,e),o=l.on;o!==r&&(i=(r=o).copy()).on(t,n),l.on=i}}function fc(e,t){var n=this._id;return arguments.length<2?Tt(this.node(),n).on.on(e):this.each(uc(n,e,t))}function cc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hc(){return this.on("end.remove",cc(this._id))}function dc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qi(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var o=r[l],s=o.length,u=a[l]=new Array(s),h,c,f=0;f<s;++f)(h=o[f])&&(c=e.call(h,h.__data__,f,o))&&("__data__"in h&&(c.__data__=h.__data__),u[f]=c,Qr(u[f],t,n,f,u,Tt(h,n)));return new Xt(a,this._parents,t,n)}function _c(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Za(e));for(var r=this._groups,i=r.length,a=[],l=[],o=0;o<i;++o)for(var s=r[o],u=s.length,h,c=0;c<u;++c)if(h=s[c]){for(var f=e.call(h,h.__data__,c,s),_,y=Tt(h,n),b=0,p=f.length;b<p;++b)(_=f[b])&&Qr(_,t,n,b,f,y);a.push(f),l.push(h)}return new Xt(a,l,t,n)}var mc=Wn.prototype.constructor;function gc(){return new mc(this._groups,this._parents)}function pc(e,t){var n,r,i;return function(){var a=Tn(this,e),l=(this.style.removeProperty(e),Tn(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function yo(e){return function(){this.style.removeProperty(e)}}function yc(e,t,n){var r,i=n+"",a;return function(){var l=Tn(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function vc(e,t,n){var r,i,a;return function(){var l=Tn(this,e),o=n(this),s=o+"";return o==null&&(s=o=(this.style.removeProperty(e),Tn(this,e))),l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o))}}function wc(e,t){var n,r,i,a="style."+t,l="end."+a,o;return function(){var s=Ot(this,e),u=s.on,h=s.value[a]==null?o||(o=yo(t)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(l,i=h),s.on=r}}function bc(e,t,n){var r=(e+="")=="transform"?If:po;return t==null?this.styleTween(e,pc(e,r)).on("end.style."+e,yo(e)):typeof t=="function"?this.styleTween(e,vc(e,r,el(this,"style."+e,t))).each(wc(this._id,e)):this.styleTween(e,yc(e,r,t),n).on("end.style."+e,null)}function kc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ec(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&kc(e,l,n)),r}return a._value=t,a}function Ac(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ec(e,t,n==null?"":n))}function Ic(e){return function(){this.textContent=e}}function Tc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Sc(e){return this.tween("text",typeof e=="function"?Tc(el(this,"text",e)):Ic(e==null?"":e+""))}function Mc(e){return function(t){this.textContent=e.call(this,t)}}function Nc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Mc(i)),t}return r._value=e,r}function Cc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Nc(e))}function Lc(){for(var e=this._name,t=this._id,n=vo(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)if(s=l[u]){var h=Tt(s,t);Qr(s,e,n,u,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Xt(r,this._parents,e,n)}function Dc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var o={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var u=Ot(this,r),h=u.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(s)),u.on=t}),i===0&&a()})}var Oc=0;function Xt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vo(){return++Oc}var Pt=Wn.prototype;Xt.prototype={constructor:Xt,select:dc,selectAll:_c,selectChild:Pt.selectChild,selectChildren:Pt.selectChildren,filter:ac,merge:oc,selection:gc,transition:Lc,call:Pt.call,nodes:Pt.nodes,node:Pt.node,size:Pt.size,empty:Pt.empty,each:Pt.each,on:fc,attr:Xf,attrTween:Zf,style:bc,styleTween:Ac,text:Sc,textTween:Cc,remove:hc,tween:Vf,delay:jf,duration:tc,ease:rc,easeVarying:lc,end:Dc,[Symbol.iterator]:Pt[Symbol.iterator]};function Rc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Fc={time:null,delay:0,duration:250,ease:Rc};function Hc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Vc(e){var t,n;e instanceof Xt?(t=e._id,e=e._name):(t=vo(),(n=Fc).time=ji(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&Qr(s,e,t,u,l,n||Hc(s,t));return new Xt(r,this._parents,e,t)}Wn.prototype.interrupt=Rf;Wn.prototype.transition=Vc;const ti=e=>()=>e;function Bc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Pc(e){e.stopImmediatePropagation()}function ni(e){e.preventDefault(),e.stopImmediatePropagation()}var Tl={name:"drag"},ri={name:"space"},mn={name:"handle"},gn={name:"center"};const{abs:Sl,max:Qe,min:je}=Math;function Ml(e){return[+e[0],+e[1]]}function Nl(e){return[Ml(e[0]),Ml(e[1])]}var Ir={name:"x",handles:["w","e"].map(Hr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ii={name:"y",handles:["n","s"].map(Hr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Gt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Cl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ll={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Gc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Uc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Hr(e){return{type:e}}function zc(e){return!e.ctrlKey&&!e.button}function Yc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Xc(){return navigator.maxTouchPoints||"ontouchstart"in this}function li(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function xc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Wc(){return Kc(Ir)}function Kc(e){var t=Yc,n=zc,r=Xc,i=!0,a=Ki("start","brush","end"),l=6,o;function s(p){var w=p.property("__brush",b).selectAll(".overlay").data([Hr("overlay")]);w.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Gt.overlay).merge(w).each(function(){var A=li(this).extent;Me(this).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1])}),p.selectAll(".selection").data([Hr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Gt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var E=p.selectAll(".handle").data(e.handles,function(A){return A.type});E.exit().remove(),E.enter().append("rect").attr("class",function(A){return"handle handle--"+A.type}).attr("cursor",function(A){return Gt[A.type]}),p.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(p,w,E){p.tween?p.on("start.brush",function(A){h(this,arguments).beforestart().start(A)}).on("interrupt.brush end.brush",function(A){h(this,arguments).end(A)}).tween("brush",function(){var A=this,m=A.__brush,k=h(A,arguments),H=m.selection,Y=e.input(typeof w=="function"?w.apply(this,arguments):w,m.extent),V=Zr(H,Y);function S(N){m.selection=N===1&&Y===null?null:V(N),u.call(A),k.brush()}return H!==null&&Y!==null?S:S(1)}):p.each(function(){var A=this,m=arguments,k=A.__brush,H=e.input(typeof w=="function"?w.apply(A,m):w,k.extent),Y=h(A,m).beforestart();Li(A),k.selection=H===null?null:H,u.call(A),Y.start(E).brush(E).end(E)})},s.clear=function(p,w){s.move(p,null,w)};function u(){var p=Me(this),w=li(this).selection;w?(p.selectAll(".selection").style("display",null).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(E){return E.type[E.type.length-1]==="e"?w[1][0]-l/2:w[0][0]-l/2}).attr("y",function(E){return E.type[0]==="s"?w[1][1]-l/2:w[0][1]-l/2}).attr("width",function(E){return E.type==="n"||E.type==="s"?w[1][0]-w[0][0]+l:l}).attr("height",function(E){return E.type==="e"||E.type==="w"?w[1][1]-w[0][1]+l:l})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(p,w,E){var A=p.__brush.emitter;return A&&(!E||!A.clean)?A:new c(p,w,E)}function c(p,w,E){this.that=p,this.args=w,this.state=p.__brush,this.active=0,this.clean=E}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,w){return this.starting?(this.starting=!1,this.emit("start",p,w)):this.emit("brush",p),this},brush:function(p,w){return this.emit("brush",p,w),this},end:function(p,w){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,w)),this},emit:function(p,w,E){var A=Me(this.that).datum();a.call(p,this.that,new Bc(p,{sourceEvent:w,target:s,selection:e.output(this.state.selection),mode:E,dispatch:a}),A)}};function f(p){if(o&&!p.touches||!n.apply(this,arguments))return;var w=this,E=p.target.__data__.type,A=(i&&p.metaKey?E="overlay":E)==="selection"?Tl:i&&p.altKey?gn:mn,m=e===ii?null:Gc[E],k=e===Ir?null:Uc[E],H=li(w),Y=H.extent,V=H.selection,S=Y[0][0],N,M,P=Y[0][1],F,X,I=Y[1][0],L,Z,ne=Y[1][1],oe,U,B=0,J=0,se,fe=m&&k&&i&&p.shiftKey,ge,Ne,de=Array.from(p.touches||[p],K=>{const be=K.identifier;return K=hl(K,w),K.point0=K.slice(),K.identifier=be,K});Li(w);var R=h(w,arguments,!0).beforestart();if(E==="overlay"){V&&(se=!0);const K=[de[0],de[1]||de[0]];H.selection=V=[[N=e===ii?S:je(K[0][0],K[1][0]),F=e===Ir?P:je(K[0][1],K[1][1])],[L=e===ii?I:Qe(K[0][0],K[1][0]),oe=e===Ir?ne:Qe(K[0][1],K[1][1])]],de.length>1&&ue(p)}else N=V[0][0],F=V[0][1],L=V[1][0],oe=V[1][1];M=N,X=F,Z=L,U=oe;var ee=Me(w).attr("pointer-events","none"),C=ee.selectAll(".overlay").attr("cursor",Gt[E]);if(p.touches)R.moved=me,R.ended=ve;else{var Q=Me(p.view).on("mousemove.brush",me,!0).on("mouseup.brush",ve,!0);i&&Q.on("keydown.brush",G,!0).on("keyup.brush",te,!0),Qu(p.view)}u.call(w),R.start(p,A.name);function me(K){for(const be of K.changedTouches||[K])for(const z of de)z.identifier===be.identifier&&(z.cur=hl(be,w));if(fe&&!ge&&!Ne&&de.length===1){const be=de[0];Sl(be.cur[0]-be[0])>Sl(be.cur[1]-be[1])?Ne=!0:ge=!0}for(const be of de)be.cur&&(be[0]=be.cur[0],be[1]=be.cur[1]);se=!0,ni(K),ue(K)}function ue(K){const be=de[0],z=be.point0;var _e;switch(B=be[0]-z[0],J=be[1]-z[1],A){case ri:case Tl:{m&&(B=Qe(S-N,je(I-L,B)),M=N+B,Z=L+B),k&&(J=Qe(P-F,je(ne-oe,J)),X=F+J,U=oe+J);break}case mn:{de[1]?(m&&(M=Qe(S,je(I,de[0][0])),Z=Qe(S,je(I,de[1][0])),m=1),k&&(X=Qe(P,je(ne,de[0][1])),U=Qe(P,je(ne,de[1][1])),k=1)):(m<0?(B=Qe(S-N,je(I-N,B)),M=N+B,Z=L):m>0&&(B=Qe(S-L,je(I-L,B)),M=N,Z=L+B),k<0?(J=Qe(P-F,je(ne-F,J)),X=F+J,U=oe):k>0&&(J=Qe(P-oe,je(ne-oe,J)),X=F,U=oe+J));break}case gn:{m&&(M=Qe(S,je(I,N-B*m)),Z=Qe(S,je(I,L+B*m))),k&&(X=Qe(P,je(ne,F-J*k)),U=Qe(P,je(ne,oe+J*k)));break}}Z<M&&(m*=-1,_e=N,N=L,L=_e,_e=M,M=Z,Z=_e,E in Cl&&C.attr("cursor",Gt[E=Cl[E]])),U<X&&(k*=-1,_e=F,F=oe,oe=_e,_e=X,X=U,U=_e,E in Ll&&C.attr("cursor",Gt[E=Ll[E]])),H.selection&&(V=H.selection),ge&&(M=V[0][0],Z=V[1][0]),Ne&&(X=V[0][1],U=V[1][1]),(V[0][0]!==M||V[0][1]!==X||V[1][0]!==Z||V[1][1]!==U)&&(H.selection=[[M,X],[Z,U]],u.call(w),R.brush(K,A.name))}function ve(K){if(Pc(K),K.touches){if(K.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else ju(K.view,se),Q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ee.attr("pointer-events","all"),C.attr("cursor",Gt.overlay),H.selection&&(V=H.selection),xc(V)&&(H.selection=null,u.call(w)),R.end(K,A.name)}function G(K){switch(K.keyCode){case 16:{fe=m&&k;break}case 18:{A===mn&&(m&&(L=Z-B*m,N=M+B*m),k&&(oe=U-J*k,F=X+J*k),A=gn,ue(K));break}case 32:{(A===mn||A===gn)&&(m<0?L=Z-B:m>0&&(N=M-B),k<0?oe=U-J:k>0&&(F=X-J),A=ri,C.attr("cursor",Gt.selection),ue(K));break}default:return}ni(K)}function te(K){switch(K.keyCode){case 16:{fe&&(ge=Ne=fe=!1,ue(K));break}case 18:{A===gn&&(m<0?L=Z:m>0&&(N=M),k<0?oe=U:k>0&&(F=X),A=mn,ue(K));break}case 32:{A===ri&&(K.altKey?(m&&(L=Z-B*m,N=M+B*m),k&&(oe=U-J*k,F=X+J*k),A=gn):(m<0?L=Z:m>0&&(N=M),k<0?oe=U:k>0&&(F=X),A=mn),C.attr("cursor",Gt[E]),ue(K));break}default:return}ni(K)}}function _(p){h(this,arguments).moved(p)}function y(p){h(this,arguments).ended(p)}function b(){var p=this.__brush||{selection:null};return p.extent=Nl(t.apply(this,arguments)),p.dim=e,p}return s.extent=function(p){return arguments.length?(t=typeof p=="function"?p:ti(Nl(p)),s):t},s.filter=function(p){return arguments.length?(n=typeof p=="function"?p:ti(!!p),s):n},s.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:ti(!!p),s):r},s.handleSize=function(p){return arguments.length?(l=+p,s):l},s.keyModifiers=function(p){return arguments.length?(i=!!p,s):i},s.on=function(){var p=a.on.apply(a,arguments);return p===a?s:p},s}const Di=Math.PI,Oi=2*Di,rn=1e-6,qc=Oi-rn;function Ri(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Fi(){return new Ri}Ri.prototype=Fi.prototype={constructor:Ri,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,l=this._y1,o=n-e,s=r-t,u=a-e,h=l-t,c=u*u+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(c>rn)if(!(Math.abs(h*o-s*u)>rn)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var f=n-a,_=r-l,y=o*o+s*s,b=f*f+_*_,p=Math.sqrt(y),w=Math.sqrt(c),E=i*Math.tan((Di-Math.acos((y+c-b)/(2*p*w)))/2),A=E/w,m=E/p;Math.abs(A-1)>rn&&(this._+="L"+(e+A*u)+","+(t+A*h)),this._+="A"+i+","+i+",0,0,"+ +(h*f>u*_)+","+(this._x1=e+m*o)+","+(this._y1=t+m*s)}},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n,a=!!a;var l=n*Math.cos(r),o=n*Math.sin(r),s=e+l,u=t+o,h=1^a,c=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>rn||Math.abs(this._y1-u)>rn)&&(this._+="L"+s+","+u),n&&(c<0&&(c=c%Oi+Oi),c>qc?this._+="A"+n+","+n+",0,1,"+h+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+h+","+(this._x1=s)+","+(this._y1=u):c>rn&&(this._+="A"+n+","+n+",0,"+ +(c>=Di)+","+h+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Dl={},ai={},oi=34,Ln=10,si=13;function wo(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Zc(e,t){var n=wo(e);return function(r,i){return t(n(r),i,e)}}function Ol(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ot(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Jc(e){return e<0?"-"+ot(-e,6):e>9999?"+"+ot(e,6):ot(e,4)}function Qc(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Jc(e.getUTCFullYear())+"-"+ot(e.getUTCMonth()+1,2)+"-"+ot(e.getUTCDate(),2)+(i?"T"+ot(t,2)+":"+ot(n,2)+":"+ot(r,2)+"."+ot(i,3)+"Z":r?"T"+ot(t,2)+":"+ot(n,2)+":"+ot(r,2)+"Z":n||t?"T"+ot(t,2)+":"+ot(n,2)+"Z":"")}function jc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,f){var _,y,b=i(c,function(p,w){if(_)return _(p,w-1);y=p,_=f?Zc(p,f):wo(p)});return b.columns=y||[],b}function i(c,f){var _=[],y=c.length,b=0,p=0,w,E=y<=0,A=!1;c.charCodeAt(y-1)===Ln&&--y,c.charCodeAt(y-1)===si&&--y;function m(){if(E)return ai;if(A)return A=!1,Dl;var H,Y=b,V;if(c.charCodeAt(Y)===oi){for(;b++<y&&c.charCodeAt(b)!==oi||c.charCodeAt(++b)===oi;);return(H=b)>=y?E=!0:(V=c.charCodeAt(b++))===Ln?A=!0:V===si&&(A=!0,c.charCodeAt(b)===Ln&&++b),c.slice(Y+1,H-1).replace(/""/g,'"')}for(;b<y;){if((V=c.charCodeAt(H=b++))===Ln)A=!0;else if(V===si)A=!0,c.charCodeAt(b)===Ln&&++b;else if(V!==n)continue;return c.slice(Y,H)}return E=!0,c.slice(Y,y)}for(;(w=m())!==ai;){for(var k=[];w!==Dl&&w!==ai;)k.push(w),w=m();f&&(k=f(k,p++))==null||_.push(k)}return _}function a(c,f){return c.map(function(_){return f.map(function(y){return h(_[y])}).join(e)})}function l(c,f){return f==null&&(f=Ol(c)),[f.map(h).join(e)].concat(a(c,f)).join(`
`)}function o(c,f){return f==null&&(f=Ol(c)),a(c,f).join(`
`)}function s(c){return c.map(u).join(`
`)}function u(c){return c.map(h).join(e)}function h(c){return c==null?"":c instanceof Date?Qc(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:l,formatBody:o,formatRows:s,formatRow:u,formatValue:h}}var $c=jc(","),eh=$c.parse;function th(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function nh(e,t){return fetch(e,t).then(th)}function rh(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),nh(t,n).then(function(i){return e(i,r)})}}var fr=rh(eh);function ih(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Vr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Mn(e){return e=Vr(Math.abs(e)),e?e[1]:NaN}function lh(e,t){return function(n,r){for(var i=n.length,a=[],l=0,o=e[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),a.push(n.substring(i-=o,i+o)),!((s+=o+1)>r));)o=e[l=(l+1)%e.length];return a.reverse().join(t)}}function ah(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var oh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Br(e){if(!(t=oh.exec(e)))throw new Error("invalid format: "+e);var t;return new tl({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Br.prototype=tl.prototype;function tl(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}tl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sh(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var bo;function uh(e,t){var n=Vr(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(bo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Vr(e,Math.max(0,t+a-1))[0]}function Rl(e,t){var n=Vr(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Fl={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ih,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Rl(e*100,t),r:Rl,s:uh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Hl(e){return e}var Vl=Array.prototype.map,Bl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function fh(e){var t=e.grouping===void 0||e.thousands===void 0?Hl:lh(Vl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Hl:ah(Vl.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(c){c=Br(c);var f=c.fill,_=c.align,y=c.sign,b=c.symbol,p=c.zero,w=c.width,E=c.comma,A=c.precision,m=c.trim,k=c.type;k==="n"?(E=!0,k="g"):Fl[k]||(A===void 0&&(A=12),m=!0,k="g"),(p||f==="0"&&_==="=")&&(p=!0,f="0",_="=");var H=b==="$"?n:b==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",Y=b==="$"?r:/[%p]/.test(k)?l:"",V=Fl[k],S=/[defgprs%]/.test(k);A=A===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function N(M){var P=H,F=Y,X,I,L;if(k==="c")F=V(M)+F,M="";else{M=+M;var Z=M<0||1/M<0;if(M=isNaN(M)?s:V(Math.abs(M),A),m&&(M=sh(M)),Z&&+M==0&&y!=="+"&&(Z=!1),P=(Z?y==="("?y:o:y==="-"||y==="("?"":y)+P,F=(k==="s"?Bl[8+bo/3]:"")+F+(Z&&y==="("?")":""),S){for(X=-1,I=M.length;++X<I;)if(L=M.charCodeAt(X),48>L||L>57){F=(L===46?i+M.slice(X+1):M.slice(X))+F,M=M.slice(0,X);break}}}E&&!p&&(M=t(M,1/0));var ne=P.length+M.length+F.length,oe=ne<w?new Array(w-ne+1).join(f):"";switch(E&&p&&(M=t(oe+M,oe.length?w-F.length:1/0),oe=""),_){case"<":M=P+M+F+oe;break;case"=":M=P+oe+M+F;break;case"^":M=oe.slice(0,ne=oe.length>>1)+P+M+F+oe.slice(ne);break;default:M=oe+P+M+F;break}return a(M)}return N.toString=function(){return c+""},N}function h(c,f){var _=u((c=Br(c),c.type="f",c)),y=Math.max(-8,Math.min(8,Math.floor(Mn(f)/3)))*3,b=Math.pow(10,-y),p=Bl[8+y/3];return function(w){return _(b*w)+p}}return{format:u,formatPrefix:h}}var cr,Jt,ko;ch({thousands:",",grouping:[3],currency:["$",""]});function ch(e){return cr=fh(e),Jt=cr.format,ko=cr.formatPrefix,cr}function hh(e){return Math.max(0,-Mn(Math.abs(e)))}function dh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mn(t)/3)))*3-Mn(Math.abs(e)))}function _h(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mn(t)-Mn(e))+1}function mh(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function gh(){return this.eachAfter(mh)}function ph(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function yh(e,t){for(var n=this,r=[n],i,a,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function vh(e,t){for(var n=this,r=[n],i=[],a,l,o,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(l=0,o=a.length;l<o;++l)r.push(a[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function wh(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function bh(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function kh(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Eh(e){for(var t=this,n=Ah(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Ah(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Ih(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Th(){return Array.from(this)}function Sh(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Mh(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Nh(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Eo(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Dh)):t===void 0&&(t=Lh);for(var n=new Xn(e),r,i=[n],a,l,o,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,o=s-1;o>=0;--o)i.push(a=l[o]=new Xn(l[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(Ao)}function Ch(){return Eo(this).eachBefore(Oh)}function Lh(e){return e.children}function Dh(e){return Array.isArray(e)?e[1]:null}function Oh(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Ao(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Xn(e){this.data=e,this.depth=this.height=0,this.parent=null}Xn.prototype=Eo.prototype={constructor:Xn,count:gh,each:ph,eachAfter:vh,eachBefore:yh,find:wh,sum:bh,sort:kh,path:Eh,ancestors:Ih,descendants:Th,leaves:Sh,links:Mh,copy:Ch,[Symbol.iterator]:Nh};function ui(e){return e==null?null:Io(e)}function Io(e){if(typeof e!="function")throw new Error;return e}function Dn(){return 0}function On(e){return function(){return e}}function Rh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Fh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(r-t)/e.value;++o<s;)l=a[o],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var Hh={depth:-1},Pl={},fi={};function Vh(e){return e.id}function Bh(e){return e.parentId}function Ph(){var e=Vh,t=Bh,n;function r(i){var a=Array.from(i),l=e,o=t,s,u,h,c,f,_,y,b,p=new Map;if(n!=null){const w=a.map((m,k)=>Gh(n(m,k,i))),E=w.map(Gl),A=new Set(w).add("");for(const m of E)A.has(m)||(A.add(m),w.push(m),E.push(Gl(m)),a.push(fi));l=(m,k)=>w[k],o=(m,k)=>E[k]}for(h=0,s=a.length;h<s;++h)u=a[h],_=a[h]=new Xn(u),(y=l(u,h,i))!=null&&(y+="")&&(b=_.id=y,p.set(b,p.has(b)?Pl:_)),(y=o(u,h,i))!=null&&(y+="")&&(_.parent=y);for(h=0;h<s;++h)if(_=a[h],y=_.parent){if(f=p.get(y),!f)throw new Error("missing: "+y);if(f===Pl)throw new Error("ambiguous: "+y);f.children?f.children.push(_):f.children=[_],_.parent=f}else{if(c)throw new Error("multiple roots");c=_}if(!c)throw new Error("no root");if(n!=null){for(;c.data===fi&&c.children.length===1;)c=c.children[0],--s;for(let w=a.length-1;w>=0&&(_=a[w],_.data===fi);--w)_.data=null}if(c.parent=Hh,c.eachBefore(function(w){w.depth=w.parent.depth+1,--s}).eachBefore(Ao),c.parent=null,s>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=ui(i),r):e},r.parentId=function(i){return arguments.length?(t=ui(i),r):t},r.path=function(i){return arguments.length?(n=ui(i),r):n},r}function Gh(e){e=`${e}`;let t=e.length;return Hi(e,t-1)&&!Hi(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Gl(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Hi(e,t););return e.slice(0,t)}function Hi(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Uh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(i-n)/e.value;++o<s;)l=a[o],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var zh=(1+Math.sqrt(5))/2;function Yh(e,t,n,r,i,a){for(var l=[],o=t.children,s,u,h=0,c=0,f=o.length,_,y,b=t.value,p,w,E,A,m,k,H;h<f;){_=i-n,y=a-r;do p=o[c++].value;while(!p&&c<f);for(w=E=p,k=Math.max(y/_,_/y)/(b*e),H=p*p*k,m=Math.max(E/H,H/w);c<f;++c){if(p+=u=o[c].value,u<w&&(w=u),u>E&&(E=u),H=p*p*k,A=Math.max(E/H,H/w),A>m){p-=u;break}m=A}l.push(s={value:p,dice:_<y,children:o.slice(h,c)}),s.dice?Fh(s,n,r,i,b?r+=y*p/b:a):Uh(s,n,r,b?n+=_*p/b:i,a),b-=p,h=c}return l}const Xh=function e(t){function n(r,i,a,l,o){Yh(t,r,i,a,l,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(zh);function xh(){var e=Xh,t=!1,n=1,r=1,i=[0],a=Dn,l=Dn,o=Dn,s=Dn,u=Dn;function h(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(c),i=[0],t&&f.eachBefore(Rh),f}function c(f){var _=i[f.depth],y=f.x0+_,b=f.y0+_,p=f.x1-_,w=f.y1-_;p<y&&(y=p=(y+p)/2),w<b&&(b=w=(b+w)/2),f.x0=y,f.y0=b,f.x1=p,f.y1=w,f.children&&(_=i[f.depth+1]=a(f)/2,y+=u(f)-_,b+=l(f)-_,p-=o(f)-_,w-=s(f)-_,p<y&&(y=p=(y+p)/2),w<b&&(b=w=(b+w)/2),e(f,y,b,p,w))}return h.round=function(f){return arguments.length?(t=!!f,h):t},h.size=function(f){return arguments.length?(n=+f[0],r=+f[1],h):[n,r]},h.tile=function(f){return arguments.length?(e=Io(f),h):e},h.padding=function(f){return arguments.length?h.paddingInner(f).paddingOuter(f):h.paddingInner()},h.paddingInner=function(f){return arguments.length?(a=typeof f=="function"?f:On(+f),h):a},h.paddingOuter=function(f){return arguments.length?h.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):h.paddingTop()},h.paddingTop=function(f){return arguments.length?(l=typeof f=="function"?f:On(+f),h):l},h.paddingRight=function(f){return arguments.length?(o=typeof f=="function"?f:On(+f),h):o},h.paddingBottom=function(f){return arguments.length?(s=typeof f=="function"?f:On(+f),h):s},h.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:On(+f),h):u},h}function Wh(e,t,n,r,i){var a=e.children,l,o=a.length,s,u=new Array(o+1);for(u[0]=s=l=0;l<o;++l)u[l+1]=s+=a[l].value;h(0,o,e.value,t,n,r,i);function h(c,f,_,y,b,p,w){if(c>=f-1){var E=a[c];E.x0=y,E.y0=b,E.x1=p,E.y1=w;return}for(var A=u[c],m=_/2+A,k=c+1,H=f-1;k<H;){var Y=k+H>>>1;u[Y]<m?k=Y+1:H=Y}m-u[k-1]<u[k]-m&&c+1<k&&--k;var V=u[k]-A,S=_-V;if(p-y>w-b){var N=_?(y*S+p*V)/_:p;h(c,k,V,y,b,N,w),h(k,f,S,N,b,p,w)}else{var M=_?(b*S+w*V)/_:w;h(c,k,V,y,b,p,M),h(k,f,S,y,M,p,w)}}}function To(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Ul=Symbol("implicit");function So(){var e=new mi,t=[],n=[],r=Ul;function i(a){let l=e.get(a);if(l===void 0){if(r!==Ul)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new mi;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return So(t,n).unknown(r)},To.apply(i,arguments),i}function Kh(e){return function(){return e}}function qh(e){return+e}var zl=[0,1];function kn(e){return e}function Vi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Kh(isNaN(t)?NaN:.5)}function Zh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Jh(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=Vi(i,r),a=n(l,a)):(r=Vi(r,i),a=n(a,l)),function(o){return a(r(o))}}function Qh(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Vi(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(o){var s=es(e,o,1,r)-1;return a[s](i[s](o))}}function jh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $h(){var e=zl,t=zl,n=Zr,r,i,a,l=kn,o,s,u;function h(){var f=Math.min(e.length,t.length);return l!==kn&&(l=Zh(e[0],e[f-1])),o=f>2?Qh:Jh,s=u=null,c}function c(f){return f==null||isNaN(f=+f)?a:(s||(s=o(e.map(r),t,n)))(r(l(f)))}return c.invert=function(f){return l(i((u||(u=o(t,e.map(r),wt)))(f)))},c.domain=function(f){return arguments.length?(e=Array.from(f,qh),h()):e.slice()},c.range=function(f){return arguments.length?(t=Array.from(f),h()):t.slice()},c.rangeRound=function(f){return t=Array.from(f),n=kf,h()},c.clamp=function(f){return arguments.length?(l=f?!0:kn,h()):l!==kn},c.interpolate=function(f){return arguments.length?(n=f,h()):n},c.unknown=function(f){return arguments.length?(a=f,c):a},function(f,_){return r=f,i=_,h()}}function e0(){return $h()(kn,kn)}function t0(e,t,n,r){var i=as(e,t,n),a;switch(r=Br(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=dh(i,l))&&(r.precision=a),ko(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=_h(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=hh(i))&&(r.precision=a-(r.type==="%")*2);break}}return Jt(r)}function n0(e){var t=e.domain;return e.ticks=function(n){var r=t();return ls(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return t0(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],o=r[a],s,u,h=10;for(o<l&&(u=l,l=o,o=u,u=i,i=a,a=u);h-- >0;){if(u=Wa(l,o,n),u===s)return r[i]=l,r[a]=o,t(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;s=u}return e},e}function Pn(){var e=e0();return e.copy=function(){return jh(e,Pn())},To.apply(e,arguments),n0(e)}function r0(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const i0=r0("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function En(e,t,n){this.k=e,this.x=t,this.y=n}En.prototype={constructor:En,scale:function(e){return e===1?this:new En(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new En(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new En(1,0,0);En.prototype;function l0(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function a0(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=re("div"),this.h()},l(i){t=ie(i,"DIV",{class:!0});var a=D(t);a.forEach(v),this.h()},h(){d(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,a){x(i,t,a),t.innerHTML=n},p(i,[a]){a&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),a&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&d(t,"class",r)},i:Fe,o:Fe,d(i){i&&v(t)}}}function o0(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:a=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,h="";return e.$$set=c=>{"isActive"in c&&n(4,r=c.isActive),"isFirst"in c&&n(5,i=c.isFirst),"isHover"in c&&n(6,a=c.isHover),"isSelectable"in c&&n(7,l=c.isSelectable),"getOptionLabel"in c&&n(0,o=c.getOptionLabel),"item"in c&&n(1,s=c.item),"filterText"in c&&n(2,u=c.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const c=[];r&&c.push("active"),i&&c.push("first"),a&&c.push("hover"),s.isGroupHeader&&c.push("groupHeader"),s.isGroupItem&&c.push("groupItem"),l||c.push("notSelectable"),n(3,h=c.join(" "))}},[o,s,u,h,r,i,a,l]}class Mo extends Et{constructor(t){super(),At(this,t,o0,a0,It,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Yl(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function s0(e){let t,n,r=e[1],i=[];for(let o=0;o<r.length;o+=1)i[o]=Wl(Yl(e,r,o));const a=o=>ke(i[o],1,1,()=>{i[o]=null});let l=null;return r.length||(l=Xl(e)),{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=Te(),l&&l.c()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);t=Te(),l&&l.l(o)},m(o,s){for(let u=0;u<i.length;u+=1)i[u].m(o,s);x(o,t,s),l&&l.m(o,s),n=!0},p(o,s){if(s[0]&114390){r=o[1];let u;for(u=0;u<r.length;u+=1){const h=Yl(o,r,u);i[u]?(i[u].p(h,s),he(i[u],1)):(i[u]=Wl(h),i[u].c(),he(i[u],1),i[u].m(t.parentNode,t))}for(Ke(),u=r.length;u<i.length;u+=1)a(u);qe(),!r.length&&l?l.p(o,s):r.length?l&&(l.d(1),l=null):(l=Xl(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let s=0;s<r.length;s+=1)he(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)ke(i[s]);n=!1},d(o){Gi(i,o),o&&v(t),l&&l.d(o)}}}function u0(e){let t,n,r;var i=e[3];function a(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[h0,({item:o,i:s})=>({41:o,42:s}),({item:o,i:s})=>[0,(o?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=nt(i,a(e))),{c(){t&&Ue(t.$$.fragment),n=Te()},l(l){t&&ht(t.$$.fragment,l),n=Te()},m(l,o){t&&ze(t,l,o),x(l,n,o),r=!0},p(l,o){const s={};if(o[0]&2&&(s.items=l[1]),o[0]&256&&(s.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(s.$$scope={dirty:o,ctx:l}),i!==(i=l[3])){if(t){Ke();const u=t;ke(u.$$.fragment,1,0,()=>{Ye(u,1)}),qe()}i?(t=nt(i,a(l)),Ue(t.$$.fragment),he(t.$$.fragment,1),ze(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&he(t.$$.fragment,l),r=!0)},o(l){t&&ke(t.$$.fragment,l),r=!1},d(l){l&&v(n),t&&Ye(t,l)}}}function Xl(e){let t,n=!e[11]&&xl(e);return{c(){n&&n.c(),t=Te()},l(r){n&&n.l(r),t=Te()},m(r,i){n&&n.m(r,i),x(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=xl(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&v(t)}}}function xl(e){let t,n;return{c(){t=re("div"),n=pe(e[12]),this.h()},l(r){t=ie(r,"DIV",{class:!0});var i=D(t);n=ye(i,e[12]),i.forEach(v),this.h()},h(){d(t,"class","empty svelte-1uyqfml")},m(r,i){x(r,t,i),T(t,n)},p(r,i){i[0]&4096&&Ge(n,r[12])},d(r){r&&v(t)}}}function f0(e){let t,n,r,i,a,l;var o=e[4];function s(f){return{props:{item:f[41],filterText:f[13],getOptionLabel:f[6],isFirst:Bi(f[42]),isActive:Pr(f[41],f[9],f[10]),isHover:Gr(f[2],f[41],f[42],f[1]),isSelectable:cn(f[41])}}}o&&(n=nt(o,s(e)));function u(){return e[29](e[42])}function h(){return e[30](e[42])}function c(...f){return e[31](e[41],e[42],...f)}return{c(){t=re("div"),n&&Ue(n.$$.fragment),r=Ae(),this.h()},l(f){t=ie(f,"DIV",{class:!0,tabindex:!0});var _=D(t);n&&ht(n.$$.fragment,_),r=Ie(_),_.forEach(v),this.h()},h(){d(t,"class","listItem"),d(t,"tabindex","-1")},m(f,_){x(f,t,_),n&&ze(n,t,null),T(t,r),i=!0,a||(l=[q(t,"mouseover",u),q(t,"focus",h),q(t,"click",c)],a=!0)},p(f,_){e=f;const y={};if(_[0]&2&&(y.item=e[41]),_[0]&8192&&(y.filterText=e[13]),_[0]&64&&(y.getOptionLabel=e[6]),_[0]&1538&&(y.isActive=Pr(e[41],e[9],e[10])),_[0]&6&&(y.isHover=Gr(e[2],e[41],e[42],e[1])),_[0]&2&&(y.isSelectable=cn(e[41])),o!==(o=e[4])){if(n){Ke();const b=n;ke(b.$$.fragment,1,0,()=>{Ye(b,1)}),qe()}o?(n=nt(o,s(e)),Ue(n.$$.fragment),he(n.$$.fragment,1),ze(n,t,r)):n=null}else o&&n.$set(y)},i(f){i||(n&&he(n.$$.fragment,f),i=!0)},o(f){n&&ke(n.$$.fragment,f),i=!1},d(f){f&&v(t),n&&Ye(n),a=!1,ft(l)}}}function c0(e){let t,n=e[7](e[41])+"",r;return{c(){t=re("div"),r=pe(n),this.h()},l(i){t=ie(i,"DIV",{class:!0});var a=D(t);r=ye(a,n),a.forEach(v),this.h()},h(){d(t,"class","listGroupTitle svelte-1uyqfml")},m(i,a){x(i,t,a),T(t,r)},p(i,a){a[0]&130&&n!==(n=i[7](i[41])+"")&&Ge(r,n)},i:Fe,o:Fe,d(i){i&&v(t)}}}function Wl(e){let t,n,r,i;const a=[c0,f0],l=[];function o(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=o(e),n=l[t]=a[t](e),{c(){n.c(),r=Te()},l(s){n.l(s),r=Te()},m(s,u){l[t].m(s,u),x(s,r,u),i=!0},p(s,u){let h=t;t=o(s),t===h?l[t].p(s,u):(Ke(),ke(l[h],1,1,()=>{l[h]=null}),qe(),n=l[t],n?n.p(s,u):(n=l[t]=a[t](s),n.c()),he(n,1),n.m(r.parentNode,r))},i(s){i||(he(n),i=!0)},o(s){ke(n),i=!1},d(s){l[t].d(s),s&&v(r)}}}function h0(e){let t,n,r,i,a;var l=e[4];function o(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:Bi(c[42]),isActive:Pr(c[41],c[9],c[10]),isHover:Gr(c[2],c[41],c[42],c[1]),isSelectable:cn(c[41])}}}l&&(n=nt(l,o(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function h(...c){return e[28](e[41],e[42],...c)}return{c(){t=re("div"),n&&Ue(n.$$.fragment),this.h()},l(c){t=ie(c,"DIV",{class:!0});var f=D(t);n&&ht(n.$$.fragment,f),f.forEach(v),this.h()},h(){d(t,"class","listItem")},m(c,f){x(c,t,f),n&&ze(n,t,null),r=!0,i||(a=[q(t,"mouseover",s),q(t,"focus",u),q(t,"click",h)],i=!0)},p(c,f){e=c;const _={};if(f[1]&1024&&(_.item=e[41]),f[0]&8192&&(_.filterText=e[13]),f[0]&64&&(_.getOptionLabel=e[6]),f[1]&2048&&(_.isFirst=Bi(e[42])),f[0]&1536|f[1]&1024&&(_.isActive=Pr(e[41],e[9],e[10])),f[0]&6|f[1]&3072&&(_.isHover=Gr(e[2],e[41],e[42],e[1])),f[1]&1024&&(_.isSelectable=cn(e[41])),l!==(l=e[4])){if(n){Ke();const y=n;ke(y.$$.fragment,1,0,()=>{Ye(y,1)}),qe()}l?(n=nt(l,o(e)),Ue(n.$$.fragment),he(n.$$.fragment,1),ze(n,t,null)):n=null}else l&&n.$set(_)},i(c){r||(n&&he(n.$$.fragment,c),r=!0)},o(c){n&&ke(n.$$.fragment,c),r=!1},d(c){c&&v(t),n&&Ye(n),i=!1,ft(a)}}}function d0(e){let t,n,r,i,a,l;const o=[u0,s0],s=[];function u(h,c){return h[5]?0:1}return n=u(e),r=s[n]=o[n](e),{c(){t=re("div"),r.c(),this.h()},l(h){t=ie(h,"DIV",{class:!0,style:!0});var c=D(t);r.l(c),c.forEach(v),this.h()},h(){d(t,"class","listContainer svelte-1uyqfml"),d(t,"style",e[14]),$e(t,"virtualList",e[5])},m(h,c){x(h,t,c),s[n].m(t,null),e[32](t),i=!0,a||(l=[q(window,"keydown",e[17]),q(window,"resize",e[18])],a=!0)},p(h,c){let f=n;n=u(h),n===f?s[n].p(h,c):(Ke(),ke(s[f],1,1,()=>{s[f]=null}),qe(),r=s[n],r?r.p(h,c):(r=s[n]=o[n](h),r.c()),he(r,1),r.m(t,null)),(!i||c[0]&16384)&&d(t,"style",h[14]),(!i||c[0]&32)&&$e(t,"virtualList",h[5])},i(h){i||(he(r),i=!0)},o(h){ke(r),i=!1},d(h){h&&v(t),s[n].d(),e[32](null),a=!1,ft(l)}}}function Pr(e,t,n){return t&&t[n]===e[n]}function Bi(e){return e===0}function Gr(e,t,n,r){return cn(t)&&(e===n||r.length===1)}function cn(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function _0(e,t,n){const r=Pi();let{container:i=void 0}=t,{VirtualList:a=null}=t,{Item:l=Mo}=t,{isVirtualList:o=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:h=(R,ee)=>{if(R)return R.isCreator?`Create "${ee}"`:R[u]}}=t,{getGroupHeaderLabel:c=null}=t,{itemHeight:f=40}=t,{hoverItemIndex:_=0}=t,{value:y=void 0}=t,{optionIdentifier:b="value"}=t,{hideEmptyState:p=!1}=t,{noOptionsMessage:w="No options"}=t,{isMulti:E=!1}=t,{activeItemIndex:A=0}=t,{filterText:m=""}=t,{parent:k=null}=t,{listPlacement:H=null}=t,{listAutoWidth:Y=null}=t,{listOffset:V=5}=t,S=0,N=!1,M;Wr(()=>{if(s.length>0&&!E&&y){const R=s.findIndex(ee=>ee[b]===y[b]);R&&n(2,_=R)}ne("active"),i.addEventListener("scroll",()=>{clearTimeout(S),S=setTimeout(()=>{N=!1},100)},!1)}),za(()=>{s||n(1,s=[]),s!==M&&s.length>0&&n(2,_=0),M=s});function P(R){R.isCreator||r("itemSelected",R)}function F(R){N||n(2,_=R)}function X(R){const{item:ee,i:C,event:Q}=R;if(Q.stopPropagation(),y&&!E&&y[b]===ee[b])return I();ee.isCreator?r("itemCreated",m):cn(ee)&&(n(19,A=C),n(2,_=C),P(ee))}function I(){r("closeList")}async function L(R){if(o)return;let ee=!0;for(;ee;)R>0&&_===s.length-1?n(2,_=0):R<0&&_===0?n(2,_=s.length-1):n(2,_=_+R),ee=!cn(s[_]);await vr(),ne("hover")}function Z(R){switch(R.key){case"Escape":R.preventDefault(),I();break;case"ArrowDown":R.preventDefault(),s.length&&L(1);break;case"ArrowUp":R.preventDefault(),s.length&&L(-1);break;case"Enter":if(R.preventDefault(),s.length===0)break;const ee=s[_];if(y&&!E&&y[b]===ee[b]){I();break}ee.isCreator?r("itemCreated",m):(n(19,A=_),P(s[_]));break;case"Tab":if(R.preventDefault(),s.length===0||y&&y[b]===s[_][b])return I();n(19,A=_),P(s[_]);break}}function ne(R){if(o||!i)return;let ee;const C=i.querySelector(`.listItem .${R}`);C&&(ee=i.getBoundingClientRect().bottom-C.getBoundingClientRect().bottom),n(0,i.scrollTop-=ee,i)}let oe;function U(){const{height:R,width:ee}=k.getBoundingClientRect();n(14,oe=""),n(14,oe+=`min-width:${ee}px;width:${Y?"auto":"100%"};`),H==="top"||H==="auto"&&l0(k,i).bottom?n(14,oe+=`bottom:${R+V}px;`):n(14,oe+=`top:${R+V}px;`)}const B=R=>F(R),J=R=>F(R),se=(R,ee,C)=>X({item:R,i:ee,event:C}),fe=R=>F(R),ge=R=>F(R),Ne=(R,ee,C)=>X({item:R,i:ee,event:C});function de(R){lt[R?"unshift":"push"](()=>{i=R,n(0,i)})}return e.$$set=R=>{"container"in R&&n(0,i=R.container),"VirtualList"in R&&n(3,a=R.VirtualList),"Item"in R&&n(4,l=R.Item),"isVirtualList"in R&&n(5,o=R.isVirtualList),"items"in R&&n(1,s=R.items),"labelIdentifier"in R&&n(20,u=R.labelIdentifier),"getOptionLabel"in R&&n(6,h=R.getOptionLabel),"getGroupHeaderLabel"in R&&n(7,c=R.getGroupHeaderLabel),"itemHeight"in R&&n(8,f=R.itemHeight),"hoverItemIndex"in R&&n(2,_=R.hoverItemIndex),"value"in R&&n(9,y=R.value),"optionIdentifier"in R&&n(10,b=R.optionIdentifier),"hideEmptyState"in R&&n(11,p=R.hideEmptyState),"noOptionsMessage"in R&&n(12,w=R.noOptionsMessage),"isMulti"in R&&n(21,E=R.isMulti),"activeItemIndex"in R&&n(19,A=R.activeItemIndex),"filterText"in R&&n(13,m=R.filterText),"parent"in R&&n(22,k=R.parent),"listPlacement"in R&&n(23,H=R.listPlacement),"listAutoWidth"in R&&n(24,Y=R.listAutoWidth),"listOffset"in R&&n(25,V=R.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&k&&i&&U()},[i,s,_,a,l,o,h,c,f,y,b,p,w,m,oe,F,X,Z,U,A,u,E,k,H,Y,V,B,J,se,fe,ge,Ne,de]}class m0 extends Et{constructor(t){super(),At(this,t,_0,d0,It,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function g0(e){let t,n=e[0](e[1])+"";return{c(){t=re("div"),this.h()},l(r){t=ie(r,"DIV",{class:!0});var i=D(t);i.forEach(v),this.h()},h(){d(t,"class","selection svelte-pu1q1n")},m(r,i){x(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Fe,o:Fe,d(r){r&&v(t)}}}function p0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=a=>{"getSelectionLabel"in a&&n(0,r=a.getSelectionLabel),"item"in a&&n(1,i=a.item)},[r,i]}class y0 extends Et{constructor(t){super(),At(this,t,p0,g0,It,{getSelectionLabel:0,item:1})}}function Kl(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function ql(e){let t,n,r,i,a;function l(...o){return e[6](e[11],...o)}return{c(){t=re("div"),n=le("svg"),r=le("path"),this.h()},l(o){t=ie(o,"DIV",{class:!0});var s=D(t);n=ae(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=D(n);r=ae(u,"path",{d:!0}),D(r).forEach(v),u.forEach(v),s.forEach(v),this.h()},h(){d(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),d(n,"width","100%"),d(n,"height","100%"),d(n,"viewBox","-2 -2 50 50"),d(n,"focusable","false"),d(n,"aria-hidden","true"),d(n,"role","presentation"),d(n,"class","svelte-liu9pa"),d(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){x(o,t,s),T(t,n),T(n,r),i||(a=q(t,"click",l),i=!0)},p(o,s){e=o},d(o){o&&v(t),i=!1,a()}}}function Zl(e){let t,n,r=e[4](e[9])+"",i,a,l,o,s,u=!e[2]&&!e[3]&&ql(e);function h(...c){return e[7](e[11],...c)}return{c(){t=re("div"),n=re("div"),i=Ae(),u&&u.c(),a=Ae(),this.h()},l(c){t=ie(c,"DIV",{class:!0});var f=D(t);n=ie(f,"DIV",{class:!0});var _=D(n);_.forEach(v),i=Ie(f),u&&u.l(f),a=Ie(f),f.forEach(v),this.h()},h(){d(n,"class","multiSelectItem_label svelte-liu9pa"),d(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(c,f){x(c,t,f),T(t,n),n.innerHTML=r,T(t,i),u&&u.m(t,null),T(t,a),o||(s=q(t,"click",h),o=!0)},p(c,f){e=c,f&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,f):(u=ql(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),f&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&d(t,"class",l)},d(c){c&&v(t),u&&u.d(),o=!1,s()}}}function v0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=Zl(Kl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Te()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=Te()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);x(i,t,a)},p(i,[a]){if(a&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const o=Kl(i,n,l);r[l]?r[l].p(o,a):(r[l]=Zl(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Fe,o:Fe,d(i){Gi(r,i),i&&v(t)}}}function w0(e,t,n){const r=Pi();let{value:i=[]}=t,{activeValue:a=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:s=void 0}=t;function u(f,_){_.stopPropagation(),r("multiItemClear",{i:f})}const h=(f,_)=>u(f,_),c=(f,_)=>o?u(f,_):{};return e.$$set=f=>{"value"in f&&n(0,i=f.value),"activeValue"in f&&n(1,a=f.activeValue),"isDisabled"in f&&n(2,l=f.isDisabled),"multiFullItemClearable"in f&&n(3,o=f.multiFullItemClearable),"getSelectionLabel"in f&&n(4,s=f.getSelectionLabel)},[i,a,l,o,s,u,h,c]}class b0 extends Et{constructor(t){super(),At(this,t,w0,v0,It,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function Jl(e,t,n){const r=e.slice();return r[23]=t[n],r}const k0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),Ql=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function E0(e){let t;return{c(){t=pe("Missing template")},l(n){t=ye(n,"Missing template")},m(n,r){x(n,t,r)},d(n){n&&v(t)}}}function jl(e,t){let n,r,i;const a=t[15].default,l=Ro(a,t,t[14],Ql),o=l||E0();return{key:e,first:null,c(){n=re("svelte-virtual-list-row"),o&&o.c(),r=Ae(),this.h()},l(s){n=ie(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=D(n);o&&o.l(u),r=Ie(u),u.forEach(v),this.h()},h(){_i(n,"class","svelte-g2cagw"),this.first=n},m(s,u){x(s,n,u),o&&o.m(n,null),T(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&Fo(l,a,t,t[14],i?Vo(a,t[14],u,k0):Ho(t[14]),Ql)},i(s){i||(he(o,s),i=!0)},o(s){ke(o,s),i=!1},d(s){s&&v(n),o&&o.d(s)}}}function A0(e){let t,n,r=[],i=new Map,a,l,o,s,u=e[5];const h=c=>c[23].index;for(let c=0;c<u.length;c+=1){let f=Jl(e,u,c),_=h(f);i.set(_,r[c]=jl(_,f))}return{c(){t=re("svelte-virtual-list-viewport"),n=re("svelte-virtual-list-contents");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){t=ie(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var f=D(t);n=ie(f,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=D(n);for(let y=0;y<r.length;y+=1)r[y].l(_);_.forEach(v),f.forEach(v),this.h()},h(){_n(n,"padding-top",e[6]+"px"),_n(n,"padding-bottom",e[7]+"px"),_i(n,"class","svelte-g2cagw"),_n(t,"height",e[0]),_i(t,"class","svelte-g2cagw"),hn(()=>e[18].call(t))},m(c,f){x(c,t,f),T(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),a=Kr(t,e[18].bind(t)),l=!0,o||(s=q(t,"scroll",e[8]),o=!0)},p(c,[f]){f&16418&&(u=c[5],Ke(),r=Zt(r,f,h,1,c,u,i,n,Oo,jl,null,Jl),qe()),(!l||f&64)&&_n(n,"padding-top",c[6]+"px"),(!l||f&128)&&_n(n,"padding-bottom",c[7]+"px"),(!l||f&1)&&_n(t,"height",c[0])},i(c){if(!l){for(let f=0;f<u.length;f+=1)he(r[f]);l=!0}},o(c){for(let f=0;f<r.length;f+=1)ke(r[f]);l=!1},d(c){c&&v(t);for(let f=0;f<r.length;f+=1)r[f].d();e[16](null),e[17](null),a(),o=!1,s()}}}function I0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:a=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:h=0}=t,c=[],f,_,y,b=0,p,w,E=0,A=0,m;async function k(N,M,P){const{scrollTop:F}=_;await vr();let X=E-F,I=u;for(;X<M&&I<N.length;){let Z=f[I-u];Z||(n(10,h=I+1),await vr(),Z=f[I-u]);const ne=c[I]=P||Z.offsetHeight;X+=ne,I+=1}n(10,h=I);const L=N.length-h;m=(E+X)/h,n(7,A=L*m),c.length=N.length,_&&n(3,_.scrollTop=0,_)}async function H(){const{scrollTop:N}=_,M=u;for(let I=0;I<f.length;I+=1)c[u+I]=o||f[I].offsetHeight;let P=0,F=0;for(;P<a.length;){const I=c[P]||m;if(F+I>N){n(9,u=P),n(6,E=F);break}F+=I,P+=1}for(;P<a.length&&(F+=c[P]||m,P+=1,!(F>N+b)););n(10,h=P);const X=a.length-h;for(m=F/h;P<a.length;)c[P++]=m;if(n(7,A=X*m),u<M){await vr();let I=0,L=0;for(let ne=u;ne<M;ne+=1)f[ne-u]&&(I+=c[ne],L+=o||f[ne-u].offsetHeight);const Z=L-I;_.scrollTo(0,N+Z)}}Wr(()=>{f=y.getElementsByTagName("svelte-virtual-list-row"),n(13,w=!0)});function Y(N){lt[N?"unshift":"push"](()=>{y=N,n(4,y)})}function V(N){lt[N?"unshift":"push"](()=>{_=N,n(3,_)})}function S(){b=this.offsetHeight,n(2,b)}return e.$$set=N=>{"items"in N&&n(11,a=N.items),"height"in N&&n(0,l=N.height),"itemHeight"in N&&n(12,o=N.itemHeight),"hoverItemIndex"in N&&n(1,s=N.hoverItemIndex),"start"in N&&n(9,u=N.start),"end"in N&&n(10,h=N.end),"$$scope"in N&&n(14,i=N.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,p=a.slice(u,h).map((N,M)=>({index:M+u,data:N}))),e.$$.dirty&14340&&w&&k(a,b,o)},[l,s,b,_,y,p,E,A,H,u,h,a,o,w,i,r,Y,V,S]}class T0 extends Et{constructor(t){super(),At(this,t,I0,A0,It,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function S0(e){let t,n;return{c(){t=le("svg"),n=le("path"),this.h()},l(r){t=ae(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=D(t);n=ae(i,"path",{fill:!0,d:!0}),D(n).forEach(v),i.forEach(v),this.h()},h(){d(n,"fill","currentColor"),d(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","-2 -2 50 50"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"role","presentation")},m(r,i){x(r,t,i),T(t,n)},p:Fe,i:Fe,o:Fe,d(r){r&&v(t)}}}class M0 extends Et{constructor(t){super(),At(this,t,null,S0,It,{})}}function N0(e,t,n){let r;return function(){let a=this,l=arguments,o=function(){r=null,n||e.apply(a,l)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,l)}}function $l(e,t,n){const r=e.slice();return r[103]=t[n],r}function ea(e){let t,n,r,i,a;return{c(){t=re("span"),n=pe(e[33]),r=Ae(),i=re("span"),a=pe(e[32]),this.h()},l(l){t=ie(l,"SPAN",{id:!0});var o=D(t);n=ye(o,e[33]),o.forEach(v),r=Ie(l),i=ie(l,"SPAN",{id:!0});var s=D(i);a=ye(s,e[32]),s.forEach(v),this.h()},h(){d(t,"id","aria-selection"),d(i,"id","aria-context")},m(l,o){x(l,t,o),T(t,n),x(l,r,o),x(l,i,o),T(i,a)},p(l,o){o[1]&4&&Ge(n,l[33]),o[1]&2&&Ge(a,l[32])},d(l){l&&v(t),l&&v(r),l&&v(i)}}}function ta(e){let t,n,r;const i=[e[18]];var a=e[17];function l(o){let s={};for(let u=0;u<i.length;u+=1)s=Ui(s,i[u]);return{props:s}}return a&&(t=nt(a,l())),{c(){t&&Ue(t.$$.fragment),n=Te()},l(o){t&&ht(t.$$.fragment,o),n=Te()},m(o,s){t&&ze(t,o,s),x(o,n,s),r=!0},p(o,s){const u=s[0]&262144?zi(i,[Ya(o[18])]):{};if(a!==(a=o[17])){if(t){Ke();const h=t;ke(h.$$.fragment,1,0,()=>{Ye(h,1)}),qe()}a?(t=nt(a,l()),Ue(t.$$.fragment),he(t.$$.fragment,1),ze(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(o){r||(t&&he(t.$$.fragment,o),r=!0)},o(o){t&&ke(t.$$.fragment,o),r=!1},d(o){o&&v(n),t&&Ye(t,o)}}}function na(e){let t,n,r;var i=e[26];function a(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=nt(i,a(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Ue(t.$$.fragment),n=Te()},l(l){t&&ht(t.$$.fragment,l),n=Te()},m(l,o){t&&ze(t,l,o),x(l,n,o),r=!0},p(l,o){const s={};if(o[0]&4&&(s.value=l[2]),o[0]&4096&&(s.getSelectionLabel=l[12]),o[0]&1073741824&&(s.activeValue=l[30]),o[0]&512&&(s.isDisabled=l[9]),o[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){Ke();const u=t;ke(u.$$.fragment,1,0,()=>{Ye(u,1)}),qe()}i?(t=nt(i,a(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),Ue(t.$$.fragment),he(t.$$.fragment,1),ze(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&he(t.$$.fragment,l),r=!0)},o(l){t&&ke(t.$$.fragment,l),r=!1},d(l){l&&v(n),t&&Ye(t,l)}}}function ra(e){let t,n,r,i,a;var l=e[25];function o(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=nt(l,o(e))),{c(){t=re("div"),n&&Ue(n.$$.fragment),this.h()},l(s){t=ie(s,"DIV",{class:!0});var u=D(t);n&&ht(n.$$.fragment,u),u.forEach(v),this.h()},h(){d(t,"class","selectedItem svelte-17l1npl")},m(s,u){x(s,t,u),n&&ze(n,t,null),r=!0,i||(a=q(t,"focus",e[40]),i=!0)},p(s,u){const h={};if(u[0]&4&&(h.item=s[2]),u[0]&4096&&(h.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){Ke();const c=n;ke(c.$$.fragment,1,0,()=>{Ye(c,1)}),qe()}l?(n=nt(l,o(s)),Ue(n.$$.fragment),he(n.$$.fragment,1),ze(n,t,null)):n=null}else l&&n.$set(h)},i(s){r||(n&&he(n.$$.fragment,s),r=!0)},o(s){n&&ke(n.$$.fragment,s),r=!1},d(s){s&&v(t),n&&Ye(n),i=!1,a()}}}function ia(e){let t,n,r,i,a;var l=e[23];function o(s){return{}}return l&&(n=nt(l,o())),{c(){t=re("div"),n&&Ue(n.$$.fragment),this.h()},l(s){t=ie(s,"DIV",{class:!0,"aria-hidden":!0});var u=D(t);n&&ht(n.$$.fragment,u),u.forEach(v),this.h()},h(){d(t,"class","clearSelect svelte-17l1npl"),d(t,"aria-hidden","true")},m(s,u){x(s,t,u),n&&ze(n,t,null),r=!0,i||(a=q(t,"click",Bo(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){Ke();const h=n;ke(h.$$.fragment,1,0,()=>{Ye(h,1)}),qe()}l?(n=nt(l,o()),Ue(n.$$.fragment),he(n.$$.fragment,1),ze(n,t,null)):n=null}},i(s){r||(n&&he(n.$$.fragment,s),r=!0)},o(s){n&&ke(n.$$.fragment,s),r=!1},d(s){s&&v(t),n&&Ye(n),i=!1,a()}}}function la(e){let t;function n(a,l){return a[22]?L0:C0}let r=n(e),i=r(e);return{c(){t=re("div"),i.c(),this.h()},l(a){t=ie(a,"DIV",{class:!0,"aria-hidden":!0});var l=D(t);i.l(l),l.forEach(v),this.h()},h(){d(t,"class","indicator svelte-17l1npl"),d(t,"aria-hidden","true")},m(a,l){x(a,t,l),i.m(t,null)},p(a,l){r===(r=n(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,null)))},d(a){a&&v(t),i.d()}}}function C0(e){let t,n;return{c(){t=le("svg"),n=le("path"),this.h()},l(r){t=ae(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=D(t);n=ae(i,"path",{d:!0}),D(n).forEach(v),i.forEach(v),this.h()},h(){d(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","0 0 20 20"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"class","svelte-17l1npl")},m(r,i){x(r,t,i),T(t,n)},p:Fe,d(r){r&&v(t)}}}function L0(e){let t,n;return{c(){t=new Go(!1),n=Te(),this.h()},l(r){t=Uo(r,!1),n=Te(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),x(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&v(n),r&&t.d()}}}function aa(e){let t,n,r;return{c(){t=re("div"),n=le("svg"),r=le("circle"),this.h()},l(i){t=ie(i,"DIV",{class:!0});var a=D(t);n=ae(a,"svg",{class:!0,viewBox:!0});var l=D(n);r=ae(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),D(r).forEach(v),l.forEach(v),a.forEach(v),this.h()},h(){d(r,"class","spinner_path svelte-17l1npl"),d(r,"cx","50"),d(r,"cy","50"),d(r,"r","20"),d(r,"fill","none"),d(r,"stroke","currentColor"),d(r,"stroke-width","5"),d(r,"stroke-miterlimit","10"),d(n,"class","spinner_icon svelte-17l1npl"),d(n,"viewBox","25 25 50 50"),d(t,"class","spinner svelte-17l1npl")},m(i,a){x(i,t,a),T(t,n),T(n,r)},d(i){i&&v(t)}}}function oa(e){let t,n,r,i;const a=[e[34]];function l(u){e[84](u)}var o=e[24];function s(u){let h={};for(let c=0;c<a.length;c+=1)h=Ui(h,a[c]);return u[28]!==void 0&&(h.hoverItemIndex=u[28]),{props:h}}return o&&(t=nt(o,s(e)),lt.push(()=>il(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Ue(t.$$.fragment),r=Te()},l(u){t&&ht(t.$$.fragment,u),r=Te()},m(u,h){t&&ze(t,u,h),x(u,r,h),i=!0},p(u,h){const c=h[1]&8?zi(a,[Ya(u[34])]):{};if(!n&&h[0]&268435456&&(n=!0,c.hoverItemIndex=u[28],Po(()=>n=!1)),o!==(o=u[24])){if(t){Ke();const f=t;ke(f.$$.fragment,1,0,()=>{Ye(f,1)}),qe()}o?(t=nt(o,s(u)),lt.push(()=>il(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),Ue(t.$$.fragment),he(t.$$.fragment,1),ze(t,r.parentNode,r)):t=null}else o&&t.$set(c)},i(u){i||(t&&he(t.$$.fragment,u),i=!0)},o(u){t&&ke(t.$$.fragment,u),i=!1},d(u){u&&v(r),t&&Ye(t,u)}}}function sa(e){let t,n,r;return{c(){t=re("input"),this.h()},l(i){t=ie(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,d(t,"class","svelte-17l1npl")},m(i,a){x(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&v(t)}}}function ua(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=fa($l(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Te()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=Te()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);x(i,t,a)},p(i,a){if(a[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const o=$l(i,n,l);r[l]?r[l].p(o,a):(r[l]=fa(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){Gi(r,i),i&&v(t)}}}function fa(e){let t,n,r;return{c(){t=re("input"),this.h()},l(i){t=ie(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,d(t,"class","svelte-17l1npl")},m(i,a){x(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&v(t)}}}function D0(e){let t,n,r,i,a,l,o,s,u,h,c,f,_,y,b,p,w,E,A=e[1]&&ea(e),m=e[17]&&ta(e),k=e[35]&&na(e),H=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],Y={};for(let I=0;I<H.length;I+=1)Y=Ui(Y,H[I]);let V=!e[7]&&e[29]&&ra(e),S=e[37]&&ia(e),N=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&la(e),M=e[4]&&aa(),P=e[5]&&oa(e),F=(!e[7]||e[7]&&!e[35])&&sa(e),X=e[7]&&e[35]&&ua(e);return{c(){t=re("div"),n=re("span"),A&&A.c(),r=Ae(),m&&m.c(),i=Ae(),k&&k.c(),a=Ae(),l=re("input"),s=Ae(),V&&V.c(),u=Ae(),S&&S.c(),h=Ae(),N&&N.c(),c=Ae(),M&&M.c(),f=Ae(),P&&P.c(),_=Ae(),F&&F.c(),y=Ae(),X&&X.c(),this.h()},l(I){t=ie(I,"DIV",{class:!0,style:!0});var L=D(t);n=ie(L,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var Z=D(n);A&&A.l(Z),Z.forEach(v),r=Ie(L),m&&m.l(L),i=Ie(L),k&&k.l(L),a=Ie(L),l=ie(L,"INPUT",{placeholder:!0,style:!0}),s=Ie(L),V&&V.l(L),u=Ie(L),S&&S.l(L),h=Ie(L),N&&N.l(L),c=Ie(L),M&&M.l(L),f=Ie(L),P&&P.l(L),_=Ie(L),F&&F.l(L),y=Ie(L),X&&X.l(L),L.forEach(v),this.h()},h(){d(n,"aria-live","polite"),d(n,"aria-atomic","false"),d(n,"aria-relevant","additions text"),d(n,"class","a11yText svelte-17l1npl"),nl(l,Y),$e(l,"svelte-17l1npl",!0),d(t,"class",b="selectContainer "+e[21]+" svelte-17l1npl"),d(t,"style",e[11]),$e(t,"hasError",e[10]),$e(t,"multiSelect",e[7]),$e(t,"disabled",e[9]),$e(t,"focused",e[1])},m(I,L){x(I,t,L),T(t,n),A&&A.m(n,null),T(t,r),m&&m.m(t,null),T(t,i),k&&k.m(t,null),T(t,a),T(t,l),l.autofocus&&l.focus(),e[82](l),rl(l,e[3]),T(t,s),V&&V.m(t,null),T(t,u),S&&S.m(t,null),T(t,h),N&&N.m(t,null),T(t,c),M&&M.m(t,null),T(t,f),P&&P.m(t,null),T(t,_),F&&F.m(t,null),T(t,y),X&&X.m(t,null),e[85](t),p=!0,w||(E=[q(window,"click",e[41]),q(window,"focusin",e[41]),q(window,"keydown",e[39]),q(l,"focus",e[40]),q(l,"input",e[83]),q(t,"click",e[42])],w=!0)},p(I,L){I[1]?A?A.p(I,L):(A=ea(I),A.c(),A.m(n,null)):A&&(A.d(1),A=null),I[17]?m?(m.p(I,L),L[0]&131072&&he(m,1)):(m=ta(I),m.c(),he(m,1),m.m(t,i)):m&&(Ke(),ke(m,1,1,()=>{m=null}),qe()),I[35]?k?(k.p(I,L),L[1]&16&&he(k,1)):(k=na(I),k.c(),he(k,1),k.m(t,a)):k&&(Ke(),ke(k,1,1,()=>{k=null}),qe()),nl(l,Y=zi(H,[(!p||L[0]&8192&&o!==(o=!I[13]))&&{readOnly:o},L[1]&1&&I[31],(!p||L[1]&32)&&{placeholder:I[36]},(!p||L[0]&16384)&&{style:I[14]},(!p||L[0]&512)&&{disabled:I[9]}])),L[0]&8&&l.value!==I[3]&&rl(l,I[3]),$e(l,"svelte-17l1npl",!0),!I[7]&&I[29]?V?(V.p(I,L),L[0]&536871040&&he(V,1)):(V=ra(I),V.c(),he(V,1),V.m(t,u)):V&&(Ke(),ke(V,1,1,()=>{V=null}),qe()),I[37]?S?(S.p(I,L),L[1]&64&&he(S,1)):(S=ia(I),S.c(),he(S,1),S.m(t,h)):S&&(Ke(),ke(S,1,1,()=>{S=null}),qe()),!I[37]&&(I[20]||I[19]&&!I[2]||!I[13]&&!I[9]&&!I[4]&&(I[29]&&!I[15]||!I[29]))?N?N.p(I,L):(N=la(I),N.c(),N.m(t,c)):N&&(N.d(1),N=null),I[4]?M||(M=aa(),M.c(),M.m(t,f)):M&&(M.d(1),M=null),I[5]?P?(P.p(I,L),L[0]&32&&he(P,1)):(P=oa(I),P.c(),he(P,1),P.m(t,_)):P&&(Ke(),ke(P,1,1,()=>{P=null}),qe()),!I[7]||I[7]&&!I[35]?F?F.p(I,L):(F=sa(I),F.c(),F.m(t,y)):F&&(F.d(1),F=null),I[7]&&I[35]?X?X.p(I,L):(X=ua(I),X.c(),X.m(t,null)):X&&(X.d(1),X=null),(!p||L[0]&2097152&&b!==(b="selectContainer "+I[21]+" svelte-17l1npl"))&&d(t,"class",b),(!p||L[0]&2048)&&d(t,"style",I[11]),(!p||L[0]&2098176)&&$e(t,"hasError",I[10]),(!p||L[0]&2097280)&&$e(t,"multiSelect",I[7]),(!p||L[0]&2097664)&&$e(t,"disabled",I[9]),(!p||L[0]&2097154)&&$e(t,"focused",I[1])},i(I){p||(he(m),he(k),he(V),he(S),he(P),p=!0)},o(I){ke(m),ke(k),ke(V),ke(S),ke(P),p=!1},d(I){I&&v(t),A&&A.d(),m&&m.d(),k&&k.d(),e[82](null),V&&V.d(),S&&S.d(),N&&N.d(),M&&M.d(),P&&P.d(),F&&F.d(),X&&X.d(),e[85](null),w=!1,ft(E)}}}function ca(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function O0(e,t,n){let r,i,a,l,o,s,u,h;const c=Pi();let{id:f=null}=t,{container:_=void 0}=t,{input:y=void 0}=t,{isMulti:b=!1}=t,{multiFullItemClearable:p=!1}=t,{isDisabled:w=!1}=t,{isCreatable:E=!1}=t,{isFocused:A=!1}=t,{value:m=null}=t,{filterText:k=""}=t,{placeholder:H="Select..."}=t,{placeholderAlwaysShow:Y=!1}=t,{items:V=null}=t,{itemFilter:S=(g,ce,Le)=>`${g}`.toLowerCase().includes(ce.toLowerCase())}=t,{groupBy:N=void 0}=t,{groupFilter:M=g=>g}=t,{isGroupHeaderSelectable:P=!1}=t,{getGroupHeaderLabel:F=g=>g[X]||g.id}=t,{labelIdentifier:X="label"}=t,{getOptionLabel:I=(g,ce)=>g.isCreator?`Create "${ce}"`:g[X]}=t,{optionIdentifier:L="value"}=t,{loadOptions:Z=void 0}=t,{hasError:ne=!1}=t,{containerStyles:oe=""}=t,{getSelectionLabel:U=g=>g?g[X]:null}=t,{createGroupHeaderItem:B=g=>({value:g,label:g})}=t,{createItem:J=g=>({value:g,label:g})}=t;const se=()=>r;let{isSearchable:fe=!0}=t,{inputStyles:ge=""}=t,{isClearable:Ne=!0}=t,{isWaiting:de=!1}=t,{listPlacement:R="auto"}=t,{listOpen:ee=!1}=t,{isVirtualList:C=!1}=t,{loadOptionsInterval:Q=300}=t,{noOptionsMessage:me="No options"}=t,{hideEmptyState:ue=!1}=t,{inputAttributes:ve={}}=t,{listAutoWidth:G=!0}=t,{itemHeight:te=40}=t,{Icon:K=void 0}=t,{iconProps:be={}}=t,{showChevron:z=!1}=t,{showIndicator:_e=!1}=t,{containerClasses:we=""}=t,{indicatorSvg:O=void 0}=t,{listOffset:j=5}=t,{ClearIcon:Se=M0}=t,{Item:He=Mo}=t,{List:We=m0}=t,{Selection:Ve=y0}=t,{MultiSelection:W=b0}=t,{VirtualList:De=T0}=t;function Pe(g){if(g.loadOptions&&g.filterText.length>0)return;if(!g.items)return[];g.items&&g.items.length>0&&typeof g.items[0]!="object"&&(g.items=ca(g.items));let ce=g.items.filter(Le=>{let rt=S(I(Le,g.filterText),g.filterText,Le);return rt&&g.isMulti&&g.value&&Array.isArray(g.value)&&(rt=!g.value.some(St=>St[g.optionIdentifier]===Le[g.optionIdentifier])),rt});return g.groupBy&&(ce=Jn(ce)),g.isCreatable&&(ce=Oe(ce,g.filterText)),ce}function Oe(g,ce){if(ce.length===0)return g;const Le=J(ce);return g[0]&&ce===g[0][X]?g:(Le.isCreator=!0,[...g,Le])}let{selectedValue:Je=null}=t,Ce,Be,_t,Rt,jt,Ze;const Nn=N0(async()=>{n(4,de=!0);let g=await Z(k).catch(ce=>{console.warn("svelte-select loadOptions error :>> ",ce),c("error",{type:"loadOptions",details:ce})});g&&!g.cancelled&&(g?(g&&g.length>0&&typeof g[0]!="object"&&(g=ca(g)),n(81,r=[...g]),c("loaded",{items:r})):n(81,r=[]),E&&n(81,r=Oe(r,k)),n(4,de=!1),n(1,A=!0),n(5,ee=!0))},Q);function qn(){typeof m=="string"?n(2,m={[L]:m,label:m}):b&&Array.isArray(m)&&m.length>0&&n(2,m=m.map(g=>typeof g=="string"?{value:g,label:g}:g))}let Re;function Zn(){n(31,Re=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ve)),f&&n(31,Re.id=f,Re),fe||n(31,Re.readonly=!0,Re)}function Jn(g){const ce=[],Le={};g.forEach(St=>{const Bt=N(St);ce.includes(Bt)||(ce.push(Bt),Le[Bt]=[],Bt&&Le[Bt].push(Object.assign(B(Bt,St),{id:Bt,isGroupHeader:!0,isSelectable:P}))),Le[Bt].push(Object.assign({isGroupItem:!!Bt},St))});const rt=[];return M(ce).forEach(St=>{rt.push(...Le[St])}),rt}function Qn(){if(b){JSON.stringify(m)!==JSON.stringify(Be)&&Ee()&&c("select",m);return}(!Be||JSON.stringify(m[L])!==JSON.stringify(Be[L]))&&c("select",m)}function jn(){A||ee?gt():y&&y.blur()}function $n(){m&&(Array.isArray(m)?n(2,m=[...m]):n(2,m=[m]))}function er(){m&&n(2,m=null)}function $(){k.length!==0&&(n(1,A=!0),n(5,ee=!0),Z?Nn():(n(5,ee=!0),b&&n(30,Ce=void 0)))}za(async()=>{n(77,Be=m),n(78,_t=k),n(79,Rt=A),n(80,jt=b)});function Ee(){let g=!0;if(m){const ce=[],Le=[];m.forEach(rt=>{ce.includes(rt[L])?g=!1:(ce.push(rt[L]),Le.push(rt))}),g||n(2,m=Le)}return g}function at(g){let ce=g?g[L]:m[L];return V.find(Le=>Le[L]===ce)}function mt(g){!g||g.length===0||g.some(ce=>typeof ce!="object")||!m||(b?m.some(ce=>!ce||!ce[L]):!m[L])||(Array.isArray(m)?n(2,m=m.map(ce=>at(ce)||ce)):n(2,m=at()||m))}function xt(g){const{detail:ce}=g,Le=m[ce?ce.i:m.length-1];m.length===1?n(2,m=void 0):n(2,m=m.filter(rt=>rt!==Le)),c("clear",Le)}function $t(g){if(!!A)switch(g.key){case"ArrowDown":g.preventDefault(),n(5,ee=!0),n(30,Ce=void 0);break;case"ArrowUp":g.preventDefault(),n(5,ee=!0),n(30,Ce=void 0);break;case"Tab":ee||n(1,A=!1);break;case"Backspace":if(!b||k.length>0)return;if(b&&m&&m.length>0){if(xt(Ce!==void 0?Ce:m.length-1),Ce===0||Ce===void 0)break;n(30,Ce=m.length>Ce?Ce-1:void 0)}break;case"ArrowLeft":if(!b||k.length>0)return;Ce===void 0?n(30,Ce=m.length-1):m.length>Ce&&Ce!==0&&n(30,Ce-=1);break;case"ArrowRight":if(!b||k.length>0||Ce===void 0)return;Ce===m.length-1?n(30,Ce=void 0):Ce<m.length-1&&n(30,Ce+=1);break}}function gt(){n(1,A=!0),y&&y.focus()}function en(g){if(!_)return;const ce=g.path&&g.path.length>0?g.path[0]:g.target;_.contains(ce)||_.contains(g.relatedTarget)||(n(1,A=!1),n(5,ee=!1),n(30,Ce=void 0),y&&y.blur())}function dn(){w||(n(1,A=!0),n(5,ee=!ee))}function tn(){n(2,m=void 0),n(5,ee=!1),c("clear",m),gt()}Wr(()=>{A&&y&&y.focus()});function pt(g){const{detail:ce}=g;if(ce){n(3,k="");const Le=Object.assign({},ce);(!Le.isGroupHeader||Le.isSelectable)&&(b?n(2,m=m?m.concat([Le]):[Le]):n(2,m=Le),n(2,m),setTimeout(()=>{n(5,ee=!1),n(30,Ce=void 0)}))}}function Ft(g){const{detail:ce}=g;b?(n(2,m=m||[]),n(2,m=[...m,J(ce)])):n(2,m=J(ce)),c("itemCreated",ce),n(3,k=""),n(5,ee=!1),n(30,Ce=void 0)}function yt(){n(3,k=""),n(5,ee=!1)}let{ariaValues:ct=g=>`Option ${g}, selected.`}=t,{ariaListOpen:Ht=(g,ce)=>`You are currently focused on option ${g}. There are ${ce} results available.`}=t,{ariaFocused:Vt=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function nn(){let g;return b&&m.length>0?g=m.map(ce=>U(ce)).join(", "):g=U(m),ct(g)}function tr(){if(!A||!r||r.length===0)return"";let g=r[Ze];if(ee&&g){let ce=U(g),Le=r?r.length:0;return Ht(ce,Le)}else return Vt()}function vt(g){lt[g?"unshift":"push"](()=>{y=g,n(6,y)})}function nr(){k=this.value,n(3,k)}function rr(g){Ze=g,n(28,Ze)}function ir(g){lt[g?"unshift":"push"](()=>{_=g,n(0,_)})}return e.$$set=g=>{"id"in g&&n(46,f=g.id),"container"in g&&n(0,_=g.container),"input"in g&&n(6,y=g.input),"isMulti"in g&&n(7,b=g.isMulti),"multiFullItemClearable"in g&&n(8,p=g.multiFullItemClearable),"isDisabled"in g&&n(9,w=g.isDisabled),"isCreatable"in g&&n(47,E=g.isCreatable),"isFocused"in g&&n(1,A=g.isFocused),"value"in g&&n(2,m=g.value),"filterText"in g&&n(3,k=g.filterText),"placeholder"in g&&n(48,H=g.placeholder),"placeholderAlwaysShow"in g&&n(49,Y=g.placeholderAlwaysShow),"items"in g&&n(50,V=g.items),"itemFilter"in g&&n(51,S=g.itemFilter),"groupBy"in g&&n(52,N=g.groupBy),"groupFilter"in g&&n(53,M=g.groupFilter),"isGroupHeaderSelectable"in g&&n(54,P=g.isGroupHeaderSelectable),"getGroupHeaderLabel"in g&&n(55,F=g.getGroupHeaderLabel),"labelIdentifier"in g&&n(56,X=g.labelIdentifier),"getOptionLabel"in g&&n(57,I=g.getOptionLabel),"optionIdentifier"in g&&n(58,L=g.optionIdentifier),"loadOptions"in g&&n(59,Z=g.loadOptions),"hasError"in g&&n(10,ne=g.hasError),"containerStyles"in g&&n(11,oe=g.containerStyles),"getSelectionLabel"in g&&n(12,U=g.getSelectionLabel),"createGroupHeaderItem"in g&&n(60,B=g.createGroupHeaderItem),"createItem"in g&&n(61,J=g.createItem),"isSearchable"in g&&n(13,fe=g.isSearchable),"inputStyles"in g&&n(14,ge=g.inputStyles),"isClearable"in g&&n(15,Ne=g.isClearable),"isWaiting"in g&&n(4,de=g.isWaiting),"listPlacement"in g&&n(63,R=g.listPlacement),"listOpen"in g&&n(5,ee=g.listOpen),"isVirtualList"in g&&n(64,C=g.isVirtualList),"loadOptionsInterval"in g&&n(65,Q=g.loadOptionsInterval),"noOptionsMessage"in g&&n(66,me=g.noOptionsMessage),"hideEmptyState"in g&&n(67,ue=g.hideEmptyState),"inputAttributes"in g&&n(16,ve=g.inputAttributes),"listAutoWidth"in g&&n(68,G=g.listAutoWidth),"itemHeight"in g&&n(69,te=g.itemHeight),"Icon"in g&&n(17,K=g.Icon),"iconProps"in g&&n(18,be=g.iconProps),"showChevron"in g&&n(19,z=g.showChevron),"showIndicator"in g&&n(20,_e=g.showIndicator),"containerClasses"in g&&n(21,we=g.containerClasses),"indicatorSvg"in g&&n(22,O=g.indicatorSvg),"listOffset"in g&&n(70,j=g.listOffset),"ClearIcon"in g&&n(23,Se=g.ClearIcon),"Item"in g&&n(71,He=g.Item),"List"in g&&n(24,We=g.List),"Selection"in g&&n(25,Ve=g.Selection),"MultiSelection"in g&&n(26,W=g.MultiSelection),"VirtualList"in g&&n(72,De=g.VirtualList),"selectedValue"in g&&n(73,Je=g.selectedValue),"ariaValues"in g&&n(74,ct=g.ariaValues),"ariaListOpen"in g&&n(75,Ht=g.ariaListOpen),"ariaFocused"in g&&n(76,Vt=g.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Pe({loadOptions:Z,filterText:k,items:V,value:m,isMulti:b,optionIdentifier:L,groupBy:N,isCreatable:E})),e.$$.dirty[2]&2048&&Je&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&mt(V),e.$$.dirty[0]&4&&m&&qn(),e.$$.dirty[0]&73728&&(ve||!fe)&&Zn(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(b&&$n(),jt&&!b&&er()),e.$$.dirty[0]&132&&b&&m&&m.length>1&&Ee(),e.$$.dirty[0]&4&&m&&Qn(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!m&&b&&Be&&c("select",m),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&A!==Rt&&jn(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&k!==_t&&$(),e.$$.dirty[0]&12&&n(29,i=m&&k.length===0),e.$$.dirty[0]&536904208&&n(37,a=i&&Ne&&!w&&!de),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=Y&&b?H:m?"":H),e.$$.dirty[0]&132&&n(35,o=b&&m&&m.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:He,filterText:k,optionIdentifier:L,noOptionsMessage:me,hideEmptyState:ue,isVirtualList:C,VirtualList:De,value:m,isMulti:b,getGroupHeaderLabel:F,items:r,itemHeight:te,getOptionLabel:I,listPlacement:R,parent:_,listAutoWidth:G,listOffset:j}),e.$$.dirty[0]&132&&n(33,u=m?nn():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,h=tr())},[_,A,m,k,de,ee,y,b,p,w,ne,oe,U,fe,ge,Ne,ve,K,be,z,_e,we,O,Se,We,Ve,W,tn,Ze,i,Ce,Re,h,u,s,o,l,a,xt,$t,gt,en,dn,pt,Ft,yt,f,E,H,Y,V,S,N,M,P,F,X,I,L,Z,B,J,se,R,C,Q,me,ue,G,te,j,He,De,Je,ct,Ht,Vt,Be,_t,Rt,jt,r,vt,nr,rr,ir]}class ha extends Et{constructor(t){super(),At(this,t,O0,D0,It,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function R0(e){const t=e-1;return t*t*t+1}function Ur(e,{delay:t=0,duration:n=400,easing:r=zo}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}function F0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),a=i.transform==="none"?"":i.transform,[l,o]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*o/n.height-(n.top+o),{delay:h=0,duration:c=_=>Math.sqrt(_)*120,easing:f=R0}=r;return{delay:h,duration:Xe(c)?c(Math.sqrt(s*s+u*u)):c,easing:f,css:(_,y)=>{const b=y*s,p=y*u,w=_+y*t.width/n.width,E=_+y*t.height/n.height;return`transform: ${a} translate(${b}px, ${p}px) scale(${w}, ${E});`}}}const an=Xi([2020]),it=Xi(new Set),sn=Xi(!0);class H0{constructor(t){xe(this,"id");xe(this,"code");xe(this,"name");xe(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class Tr{constructor(t){xe(this,"id");xe(this,"code");xe(this,"name");xe(this,"level");xe(this,"parent_id");xe(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class Yt{constructor(t,n,r){xe(this,"location_id");xe(this,"location");xe(this,"partner_id");xe(this,"partner");xe(this,"product_id");xe(this,"product");xe(this,"year");xe(this,"export_value");xe(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}function da(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function _a(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function ma(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function V0(e){let t,n,r,i,a;return{c(){t=le("text"),n=pe("No valid data for this pair."),this.h()},l(l){t=ae(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=D(t);n=ye(o,"No valid data for this pair."),o.forEach(v),this.h()},h(){d(t,"x",r=e[3]/2),d(t,"y",i=e[9]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){x(l,t,o),T(t,n)},p(l,o){o[0]&8&&r!==(r=l[3]/2)&&d(t,"x",r),o[0]&512&&i!==(i=l[9]/2)&&d(t,"y",i)},i(l){a||hn(()=>{a=Yi(t,Ur,{}),a.start()})},o:Fe,d(l){l&&v(t)}}}function B0(e){var ue,ve;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,a,l,o=e[6].length>1?`from ${e[6][0]} to ${e[6][e[6].length-1]}`:`in ${e[6]}`,s,u=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",h,c,f,_,y=((ue=e[2])==null?void 0:ue.name)+" ",b,p=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",w,E,A=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",m,k,H=((ve=e[2])==null?void 0:ve.name)+"",Y,V,S,N=[],M=new Map,P,F=[],X=new Map,I,L=[],Z=new Map,ne,oe,U,B,J,se,fe,ge,Ne,de=e[10];const R=G=>G[44].product_id;for(let G=0;G<de.length;G+=1){let te=ma(e,de,G),K=R(te);M.set(K,N[G]=pa(K,te))}let ee=e[10];const C=G=>G[46];for(let G=0;G<ee.length;G+=1){let te=_a(e,ee,G),K=C(te);X.set(K,F[G]=ya(K,te))}let Q=e[10];const me=G=>G[44].product_id;for(let G=0;G<Q.length;G+=1){let te=da(e,Q,G),K=me(te);Z.set(K,L[G]=va(K,te))}return{c(){t=le("text"),n=pe("Sector "),i=pe(r),a=le("text"),l=pe("Trade Flow "),s=pe(o),h=pe(u),f=le("text"),_=pe("Export to "),b=pe(y),w=pe(p),E=le("text"),m=pe(A),k=pe("\xA0Import from "),Y=pe(H),S=le("g");for(let G=0;G<N.length;G+=1)N[G].c();P=Te();for(let G=0;G<F.length;G+=1)F[G].c();I=Te();for(let G=0;G<L.length;G+=1)L[G].c();ne=le("line"),B=le("line"),se=le("g"),fe=le("g"),this.h()},l(G){t=ae(G,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var te=D(t);n=ye(te,"Sector "),i=ye(te,r),te.forEach(v),a=ae(G,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var K=D(a);l=ye(K,"Trade Flow "),s=ye(K,o),h=ye(K,u),K.forEach(v),f=ae(G,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var be=D(f);_=ye(be,"Export to "),b=ye(be,y),w=ye(be,p),be.forEach(v),E=ae(G,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var z=D(E);m=ye(z,A),k=ye(z,"\xA0Import from "),Y=ye(z,H),z.forEach(v),S=ae(G,"g",{id:!0,transform:!0});var _e=D(S);for(let we=0;we<N.length;we+=1)N[we].l(_e);P=Te();for(let we=0;we<F.length;we+=1)F[we].l(_e);I=Te();for(let we=0;we<L.length;we+=1)L[we].l(_e);ne=ae(_e,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),D(ne).forEach(v),B=ae(_e,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),D(B).forEach(v),se=ae(_e,"g",{id:!0}),D(se).forEach(v),_e.forEach(v),fe=ae(G,"g",{id:!0,class:!0}),D(fe).forEach(v),this.h()},h(){var G,te,K,be;d(t,"text-anchor","start"),d(t,"class","chart-header sortable svelte-1uxx7yn"),d(t,"x",15),d(t,"y",Rn/2),d(t,"alignment-baseline","hanging"),d(a,"text-anchor","middle"),d(a,"class","chart-header sortable svelte-1uxx7yn"),d(a,"x",c=(e[3]-Ct)/2+Ct-20),d(a,"y",Rn/2-7),d(a,"alignment-baseline","hanging"),d(f,"class","from-label sortable svelte-1uxx7yn"),d(f,"x",Ct),d(f,"y",Rn/2-5),d(f,"alignment-baseline","hanging"),d(f,"font-size","13"),d(E,"class","from-label sortable svelte-1uxx7yn"),d(E,"x",V=e[3]-20),d(E,"y",Rn/2-5),d(E,"text-anchor","end"),d(E,"alignment-baseline","hanging"),d(E,"font-size","13"),d(ne,"id","midline"),d(ne,"transform",oe=`translate(${e[5](0)},0)`),d(ne,"y1",20),d(ne,"y2",U=(((te=(G=e[10])==null?void 0:G.length)!=null?te:0)+1)*tt),d(ne,"stroke","rgba(0,0,0,0.7)"),d(ne,"stroke-width","1"),d(ne,"class","svelte-1uxx7yn"),d(B,"x1",Ct),d(B,"y1",0),d(B,"x2",Ct),d(B,"y2",J=(((be=(K=e[10])==null?void 0:K.length)!=null?be:0)+1)*tt),d(B,"stroke","rgba(0,0,0,0.1)"),d(B,"stroke-width","1"),d(se,"id","axis"),d(S,"id","bar-content"),d(S,"transform",`translate(${0},${Rn})`),d(fe,"id","bar-chart-tooltip"),d(fe,"class","tooltip")},m(G,te){x(G,t,te),T(t,n),T(t,i),x(G,a,te),T(a,l),T(a,s),T(a,h),x(G,f,te),T(f,_),T(f,b),T(f,w),x(G,E,te),T(E,m),T(E,k),T(E,Y),x(G,S,te);for(let K=0;K<N.length;K+=1)N[K].m(S,null);T(S,P);for(let K=0;K<F.length;K+=1)F[K].m(S,null);T(S,I);for(let K=0;K<L.length;K+=1)L[K].m(S,null);T(S,ne),T(S,B),T(S,se),e[36](se),x(G,fe,te),ge||(Ne=[q(t,"click",e[29]),q(t,"keydown",U0),q(a,"click",e[30]),q(a,"keydown",z0),q(f,"keydown",Y0),q(f,"click",e[31]),q(E,"click",e[32]),q(E,"keydown",X0)],ge=!0)},p(G,te){var K,be,z,_e,we,O;if(te[0]&3&&r!==(r=G[1]==G[0].AlphaUp?"\u2191":G[1]==G[0].AlphaDown?"\u2193":" ")&&Ge(i,r),te[0]&64&&o!==(o=G[6].length>1?`from ${G[6][0]} to ${G[6][G[6].length-1]}`:`in ${G[6]}`)&&Ge(s,o),te[0]&3&&u!==(u=G[1]==G[0].Up?"\u2191":G[1]==G[0].Down?"\u2193":" ")&&Ge(h,u),te[0]&8&&c!==(c=(G[3]-Ct)/2+Ct-20)&&d(a,"x",c),te[0]&4&&y!==(y=((K=G[2])==null?void 0:K.name)+" ")&&Ge(b,y),te[0]&3&&p!==(p=G[1]==G[0].LeftUp?"\u2191":G[1]==G[0].LeftDown?"\u2193":" ")&&Ge(w,p),te[0]&3&&A!==(A=G[1]==G[0].RightUp?"\u2191":G[1]==G[0].RightDown?"\u2193":" ")&&Ge(m,A),te[0]&4&&H!==(H=((be=G[2])==null?void 0:be.name)+"")&&Ge(Y,H),te[0]&8&&V!==(V=G[3]-20)&&d(E,"x",V),te[0]&1032&&(de=G[10],N=Zt(N,te,R,1,G,de,M,S,An,pa,P,ma)),te[0]&64672&&(ee=G[10],F=Zt(F,te,C,1,G,ee,X,S,An,ya,I,_a)),te[0]&3072){Q=G[10];for(let j=0;j<L.length;j+=1)L[j].r();L=Zt(L,te,me,1,G,Q,Z,S,Yo,va,ne,da);for(let j=0;j<L.length;j+=1)L[j].a()}te[0]&32&&oe!==(oe=`translate(${G[5](0)},0)`)&&d(ne,"transform",oe),te[0]&1024&&U!==(U=(((_e=(z=G[10])==null?void 0:z.length)!=null?_e:0)+1)*tt)&&d(ne,"y2",U),te[0]&1024&&J!==(J=(((O=(we=G[10])==null?void 0:we.length)!=null?O:0)+1)*tt)&&d(B,"y2",J)},i:Fe,o:Fe,d(G){G&&v(t),G&&v(a),G&&v(f),G&&v(E),G&&v(S);for(let te=0;te<N.length;te+=1)N[te].d();for(let te=0;te<F.length;te+=1)F[te].d();for(let te=0;te<L.length;te+=1)L[te].d();e[36](null),G&&v(fe),ge=!1,ft(Ne)}}}function ga(e){let t,n;return{c(){t=le("rect"),this.h()},l(r){t=ae(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),D(t).forEach(v),this.h()},h(){d(t,"x","0"),d(t,"y",n=e[46]*tt+Qt),d(t,"height",tt),d(t,"width",e[3]),d(t,"fill","rgba(0,0,0,0.04)"),d(t,"class","svelte-1uxx7yn")},m(r,i){x(r,t,i)},p(r,i){i[0]&1024&&n!==(n=r[46]*tt+Qt)&&d(t,"y",n),i[0]&8&&d(t,"width",r[3])},d(r){r&&v(t)}}}function pa(e,t){let n,r,i=t[46]%2==0&&ga(t);return{key:e,first:null,c(){n=Te(),i&&i.c(),r=Te(),this.h()},l(a){n=Te(),i&&i.l(a),r=Te(),this.h()},h(){this.first=n},m(a,l){x(a,n,l),i&&i.m(a,l),x(a,r,l)},p(a,l){t=a,t[46]%2==0?i?i.p(t,l):(i=ga(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&v(n),i&&i.d(a),a&&v(r)}}}function ya(e,t){let n,r,i,a,l,o,s,u,h,c,f,_,y;function b(){return t[33](t[44])}function p(){return t[34](t[44])}return{key:e,first:null,c(){n=le("g"),r=le("rect"),l=le("rect"),u=le("rect"),this.h()},l(w){n=ae(w,"g",{class:!0,transform:!0});var E=D(n);r=ae(E,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),D(r).forEach(v),l=ae(E,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),D(l).forEach(v),u=ae(E,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),D(u).forEach(v),E.forEach(v),this.h()},h(){d(r,"class","tab svelte-1uxx7yn"),d(r,"x","0"),d(r,"y","2"),d(r,"height",tt-4),d(r,"width",i=t[11].size>0&&t[11].has(t[44].product_id)?Ct-1:6),d(r,"fill",a=t[7]?t[7](t[44].product.name):"white"),d(l,"class","country1-bar svelte-1uxx7yn"),d(l,"x",o=t[5](-t[44].export_value)),d(l,"y",hr/2),d(l,"height",tt-hr),d(l,"width",s=t[5](0)-t[5](-t[44].export_value)),d(l,"fill",No),d(u,"class","country2-bar svelte-1uxx7yn"),d(u,"x",h=t[5](0)),d(u,"y",hr/2),d(u,"height",tt-hr),d(u,"width",c=t[5](t[44].import_value)-t[5](0)),d(u,"fill",Co),d(n,"class","bar-row"),d(n,"transform",f=`translate(0, ${t[46]*tt+Qt})`),this.first=n},m(w,E){x(w,n,E),T(n,r),T(n,l),T(n,u),_||(y=[q(l,"focus",t[28]),q(l,"keydown",x0),q(l,"mouseover",function(){Xe(t[13](t[44],!0))&&t[13](t[44],!0).apply(this,arguments)}),q(l,"mousemove",t[14]()),q(l,"mouseleave",t[15]()),q(l,"click",b),q(u,"focus",t[27]),q(u,"keydown",W0),q(u,"mouseover",function(){Xe(t[13](t[44],!1))&&t[13](t[44],!1).apply(this,arguments)}),q(u,"mousemove",t[14]()),q(u,"mouseleave",t[15]()),q(u,"click",p)],_=!0)},p(w,E){t=w,E[0]&3072&&i!==(i=t[11].size>0&&t[11].has(t[44].product_id)?Ct-1:6)&&d(r,"width",i),E[0]&1152&&a!==(a=t[7]?t[7](t[44].product.name):"white")&&d(r,"fill",a),E[0]&1056&&o!==(o=t[5](-t[44].export_value))&&d(l,"x",o),E[0]&1056&&s!==(s=t[5](0)-t[5](-t[44].export_value))&&d(l,"width",s),E[0]&32&&h!==(h=t[5](0))&&d(u,"x",h),E[0]&1056&&c!==(c=t[5](t[44].import_value)-t[5](0))&&d(u,"width",c),E[0]&1024&&f!==(f=`translate(0, ${t[46]*tt+Qt})`)&&d(n,"transform",f)},d(w){w&&v(n),_=!1,ft(y)}}}function va(e,t){let n,r=t[44].product.name+"",i,a,l,o=Fe,s,u;function h(){return t[35](t[44])}return{key:e,first:null,c(){n=le("text"),i=pe(r),this.h()},l(c){n=ae(c,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var f=D(n);i=ye(f,r),f.forEach(v),this.h()},h(){d(n,"class","product-text svelte-1uxx7yn"),d(n,"alignment-baseline","hanging"),d(n,"x","10"),d(n,"y",a=t[46]*tt+Qt+6),this.first=n},m(c,f){x(c,n,f),T(n,i),s||(u=[q(n,"click",h),q(n,"keydown",K0)],s=!0)},p(c,f){t=c,f[0]&1024&&r!==(r=t[44].product.name+"")&&Ge(i,r),f[0]&1024&&a!==(a=t[46]*tt+Qt+6)&&d(n,"y",a)},r(){l=n.getBoundingClientRect()},f(){Xo(n),o()},a(){o(),o=xo(n,l,F0,{duration:400,delay:20})},d(c){c&&v(n),s=!1,ft(u)}}}function wa(e){let t,n,r,i,a;return{c(){t=le("rect"),n=le("text"),r=pe("Loading..."),this.h()},l(l){t=ae(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),D(t).forEach(v),n=ae(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=D(n);r=ye(o,"Loading..."),o.forEach(v),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[3]),d(t,"height",e[9]),d(t,"fill","rgba(255,255,255,0.9)"),d(t,"class","svelte-1uxx7yn"),d(n,"x",i=e[3]/2),d(n,"y",a=e[9]/2),d(n,"alignment-baseline","central"),d(n,"text-anchor","middle")},m(l,o){x(l,t,o),x(l,n,o),T(n,r)},p(l,o){o[0]&8&&d(t,"width",l[3]),o[0]&512&&d(t,"height",l[9]),o[0]&8&&i!==(i=l[3]/2)&&d(n,"x",i),o[0]&512&&a!==(a=l[9]/2)&&d(n,"y",a)},d(l){l&&v(t),l&&v(n)}}}function P0(e){let t,n,r,i,a;function l(h,c){return h[10]&&h[10].length>0?B0:V0}let o=l(e),s=o(e),u=e[8]&&wa(e);return{c(){t=re("div"),n=le("svg"),s.c(),r=Te(),u&&u.c(),this.h()},l(h){t=ie(h,"DIV",{id:!0,class:!0});var c=D(t);n=ae(c,"svg",{height:!0,class:!0});var f=D(n);s.l(f),r=Te(),u&&u.l(f),f.forEach(v),c.forEach(v),this.h()},h(){var h,c;d(n,"height",i=Math.max(e[9],(((c=(h=e[10])==null?void 0:h.length)!=null?c:0)+1)*tt+Qt)),d(n,"class","svelte-1uxx7yn"),d(t,"id","bar-chart"),d(t,"class","viz-section svelte-1uxx7yn"),hn(()=>e[37].call(t))},m(h,c){x(h,t,c),T(t,n),s.m(n,null),T(n,r),u&&u.m(n,null),a=Kr(t,e[37].bind(t))},p(h,c){var f,_;o===(o=l(h))&&s?s.p(h,c):(s.d(1),s=o(h),s&&(s.c(),he(s,1),s.m(n,r))),h[8]?u?u.p(h,c):(u=wa(h),u.c(),u.m(n,null)):u&&(u.d(1),u=null),c[0]&1536&&i!==(i=Math.max(h[9],(((_=(f=h[10])==null?void 0:f.length)!=null?_:0)+1)*tt+Qt))&&d(n,"height",i)},i(h){he(s)},o:Fe,d(h){h&&v(t),s.d(),u&&u.d(),a()}}}const Rn=40,tt=30,ba=0,G0=10,Qt=30,Ct=100,hr=4,dr=10,ka=140,Ea=25,ci=105,Wt=20,Kt=35,pn=22,No="#377eb8",Co="#ff7f00",U0=()=>{},z0=()=>{},Y0=()=>{},X0=()=>{},x0=()=>{},W0=()=>{},K0=()=>{};function q0(e,t,n){let r,i,a,l,o,s,u,h,c,f,_,y,b;kt(e,an,C=>n(6,_=C)),kt(e,it,C=>n(11,y=C)),kt(e,sn,C=>n(12,b=C));let{data:p}=t;var w;(function(C){C[C.LeftUp=0]="LeftUp",C[C.LeftDown=1]="LeftDown",C[C.RightUp=2]="RightUp",C[C.RightDown=3]="RightDown",C[C.Up=4]="Up",C[C.Down=5]="Down",C[C.AlphaUp=6]="AlphaUp",C[C.AlphaDown=7]="AlphaDown"})(w||(w={}));let E=w.AlphaDown,{bilateralData:A,productColorScale:m,country1:k,country2:H,loadingDrilldown:Y,productData:V,locationData:S}=p,N=800,M=550,P;const F=C=>Jt("$.3s")(C).replace(/G/,"B");function X(C,Q,me){return C+me<N?C+Q:C+Q-me}function I(C,Q){return C+ci<M?C+Q:C+Q-ci}function L(C,Q){return me=>{let ue=Me("#bar-chart-tooltip"),ve=ka+_.length*Ea;ue.append("rect").attr("id","tooltip-rect").attr("width",ve).attr("height",ci).attr("x",X(me.layerX,dr,ve)).attr("y",I(me.layerY,dr)),ue.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",X(me.layerX,Wt,ve)).attr("y",I(me.layerY,Kt)).style("fill",Q?No:Co).text(`${C.product.name}`),ue.append("text").attr("id","tooltip-text2").attr("x",X(me.layerX,Wt,ve)).attr("y",I(me.layerY,Kt+pn)).text((Q?"Export: ":"Import: ")+`${F(Q?C.export_value:C.import_value)}`),ue.append("text").attr("id","tooltip-text3").attr("x",X(me.layerX,Wt,ve)).attr("y",I(me.layerY,Kt+2*pn)).text(`Share: ${Jt(".2%")(Q?C.export_value/h:C.import_value/c)}`),ue.append("text").attr("id","tooltip-text4").attr("x",X(me.layerX,Wt,ve)).attr("y",I(me.layerY,Kt+3*pn)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function Z(){return C=>{let Q=ka+_.length*Ea;Me("#tooltip-rect").attr("x",X(C.layerX,dr,Q)).attr("y",I(C.layerY,dr)),Me("#tooltip-text1").attr("x",X(C.layerX,Wt,Q)).attr("y",I(C.layerY,Kt)),Me("#tooltip-text2").attr("x",X(C.layerX,Wt,Q)).attr("y",I(C.layerY,Kt+pn)),Me("#tooltip-text3").attr("x",X(C.layerX,Wt,Q)).attr("y",I(C.layerY,Kt+2*pn)),Me("#tooltip-text4").attr("x",X(C.layerX,Wt,Q)).attr("y",I(C.layerY,Kt+3*pn))}}function ne(){return C=>{Me("#bar-chart-tooltip").selectAll("rect").remove(),Me("#bar-chart-tooltip").selectAll("text").remove()}}function oe(C){st.call(this,e,C)}function U(C){st.call(this,e,C)}const B=()=>{E==w.AlphaDown?n(1,E=w.AlphaUp):n(1,E=w.AlphaDown)},J=()=>{E==w.Down?n(1,E=w.Up):n(1,E=w.Down)},se=()=>{E==w.LeftDown?n(1,E=w.LeftUp):n(1,E=w.LeftDown)},fe=()=>{E==w.RightDown?n(1,E=w.RightUp):n(1,E=w.RightDown)},ge=C=>{b||(sn.set(!0),it.update(Q=>(Q.clear(),Q))),y.has(C==null?void 0:C.product_id)?it.update(Q=>{var me;return Q.delete((me=C==null?void 0:C.product_id)!=null?me:-1),Q}):(C==null?void 0:C.product_id)>=0&&it.update(Q=>{var me;return Q.add((me=C==null?void 0:C.product_id)!=null?me:-1),Q})},Ne=C=>{b&&(sn.set(!1),it.update(Q=>(Q.clear(),Q))),y.has(C==null?void 0:C.product_id)?it.update(Q=>{var me;return Q.delete((me=C==null?void 0:C.product_id)!=null?me:-1),Q}):(C==null?void 0:C.product_id)>=0&&it.update(Q=>{var me;return Q.add((me=C==null?void 0:C.product_id)!=null?me:-1),Q})},de=C=>{y.has(C.product_id)?it.update(Q=>(Q.delete(C.product_id),Q)):it.update(Q=>(Q.add(C.product_id),Q))};function R(C){lt[C?"unshift":"push"](()=>{P=C,n(4,P)})}function ee(){N=this.clientWidth,M=this.clientHeight,n(3,N),n(9,M)}return e.$$set=C=>{"data"in C&&n(16,p=C.data)},e.$$.update=()=>{var C,Q,me;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:A,productColorScale:m,country1:k,country2:H,loadingDrilldown:Y,productData:V,locationData:S}=p,A,(n(7,m),n(16,p)),(n(18,k),n(16,p)),(n(2,H),n(16,p)),(n(8,Y),n(16,p)),(n(19,V),n(16,p)),(n(20,S),n(16,p))),e.$$.dirty[0]&393220&&n(26,r=(me=A==null?void 0:A.get((C=k==null?void 0:k.id)!=null?C:0))==null?void 0:me.get((Q=H==null?void 0:H.id)!=null?Q:0)),e.$$.dirty[0]&67108928&&n(25,i=_.map(ue=>{var ve;return(ve=r==null?void 0:r.get(ue))!=null?ve:new Array}).flat()),e.$$.dirty[0]&35389444&&n(23,a=Array.from(pi(i,ue=>{var ve,G;return ue.reduce((te,K)=>(te.export_value+=K.export_value,te.import_value+=K.import_value,te),new Yt(S,V,{location_id:(ve=k==null?void 0:k.id)!=null?ve:0,partner_id:(G=H==null?void 0:H.id)!=null?G:0,product_id:ue[0].product_id,year:0,export_value:0,import_value:0}))},ue=>ue.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=a.filter(ue=>ue.product.level=="section")),e.$$.dirty[0]&16777219&&n(10,o=l.sort((ue,ve)=>{switch(E){case w.LeftUp:return ue.export_value-ve.export_value;case w.LeftDown:return ve.export_value-ue.export_value;case w.RightUp:return ue.import_value-ve.import_value;case w.RightDown:return ve.import_value-ue.import_value;case w.Up:return ue.import_value+ue.export_value-(ve.import_value+ve.export_value);case w.Down:return ve.import_value+ve.export_value-(ue.import_value+ue.export_value);case w.AlphaDown:return ue.product.name.localeCompare(ve.product.name);case w.AlphaUp:return ve.product.name.localeCompare(ue.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=Bn(a,ue=>ue.export_value)),e.$$.dirty[0]&8388608&&n(21,u=Bn(a,ue=>ue.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(h=Mr(a,ue=>ue.export_value)),e.$$.dirty[0]&8388608&&(c=Mr(a,ue=>ue.import_value)),e.$$.dirty[0]&6291464&&n(5,f=Pn().domain([-s,u]).range([Ct+ba,N-ba-G0])),e.$$.dirty[0]&48){let ue=Ka(f).tickFormat(ve=>F(Math.abs(ve)));Me(P).transition().call(ue)}},[w,E,H,N,P,f,_,m,Y,M,o,y,b,L,Z,ne,p,A,k,V,S,u,s,a,l,i,r,oe,U,B,J,se,fe,ge,Ne,de,R,ee]}class Z0 extends Et{constructor(t){super(),At(this,t,q0,P0,It,{data:16},null,[-1,-1])}}function Aa(e,t,n){const r=e.slice();return r[53]=t[n],r}function Ia(e,t,n){const r=e.slice();return r[53]=t[n],r}function Ta(e,t,n){const r=e.slice();return r[53]=t[n],r}function J0(e){let t,n,r,i,a;return{c(){t=le("text"),n=pe("No valid data for this pair."),this.h()},l(l){t=ae(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=D(t);n=ye(o,"No valid data for this pair."),o.forEach(v),this.h()},h(){d(t,"x",r=e[2]/2),d(t,"y",i=e[3]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){x(l,t,o),T(t,n)},p(l,o){o[0]&4&&r!==(r=l[2]/2)&&d(t,"x",r),o[0]&8&&i!==(i=l[3]/2)&&d(t,"y",i)},i(l){a||hn(()=>{a=Yi(t,Ur,{}),a.start()})},o:Fe,d(l){l&&v(t)}}}function Q0(e){var be,z,_e,we;let t,n,r,i,a,l,o,s,u,h,c,f,_,y,b,p=((z=`to ${(be=e[0].get(e[1]))==null?void 0:be.name}`)!=null?z:"")+"",w,E,A,m,k=((we=`from ${(_e=e[0].get(e[1]))==null?void 0:_e.name}`)!=null?we:"")+"",H,Y,V,S,N,M,P,F,X,I,L,Z=[],ne=new Map,oe,U,B=[],J=new Map,se,fe,ge=[],Ne=new Map,de,R,ee,C=!e[16]&&Sa(e),Q=e[12]>0&&e[11]<0&&Ma(e),me=e[15];const ue=O=>O[53].year;for(let O=0;O<me.length;O+=1){let j=Ta(e,me,O),Se=ue(j);ne.set(Se,Z[O]=Na(Se,j))}let ve=e[15];const G=O=>O[53].year;for(let O=0;O<ve.length;O+=1){let j=Ia(e,ve,O),Se=G(j);J.set(Se,B[O]=Ca(Se,j))}let te=e[15];const K=O=>O[53].year;for(let O=0;O<te.length;O+=1){let j=Aa(e,te,O),Se=K(j);Ne.set(Se,ge[O]=La(Se,j))}return{c(){t=le("text"),n=pe("Trade Over Time"),i=le("g"),C&&C.c(),a=le("g"),l=le("line"),u=le("g"),h=le("g"),f=le("g"),_=le("circle"),y=le("text"),b=pe("Export "),w=pe(p),E=le("circle"),A=le("text"),m=pe("Import "),H=pe(k),Y=le("g"),V=le("rect"),S=le("text"),N=pe("Trade Deficit"),M=le("rect"),P=le("text"),F=pe("Trade Surplus"),I=le("g"),Q&&Q.c(),L=Te();for(let O=0;O<Z.length;O+=1)Z[O].c();oe=le("g"),U=le("path");for(let O=0;O<B.length;O+=1)B[O].c();se=le("g"),fe=le("path");for(let O=0;O<ge.length;O+=1)ge[O].c();de=le("g"),R=le("g"),ee=pe("''"),this.h()},l(O){t=ae(O,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var j=D(t);n=ye(j,"Trade Over Time"),j.forEach(v),i=ae(O,"g",{class:!0}),D(i).forEach(v),C&&C.l(O),a=ae(O,"g",{id:!0,transform:!0});var Se=D(a);l=ae(Se,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),D(l).forEach(v),Se.forEach(v),u=ae(O,"g",{id:!0,transform:!0}),D(u).forEach(v),h=ae(O,"g",{id:!0,transform:!0}),D(h).forEach(v),f=ae(O,"g",{id:!0,transform:!0});var He=D(f);_=ae(He,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),D(_).forEach(v),y=ae(He,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var We=D(y);b=ye(We,"Export "),w=ye(We,p),We.forEach(v),E=ae(He,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),D(E).forEach(v),A=ae(He,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Ve=D(A);m=ye(Ve,"Import "),H=ye(Ve,k),Ve.forEach(v),He.forEach(v),Y=ae(O,"g",{id:!0,transform:!0});var W=D(Y);V=ae(W,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),D(V).forEach(v),S=ae(W,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var De=D(S);N=ye(De,"Trade Deficit"),De.forEach(v),M=ae(W,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),D(M).forEach(v),P=ae(W,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Pe=D(P);F=ye(Pe,"Trade Surplus"),Pe.forEach(v),W.forEach(v),I=ae(O,"g",{id:!0});var Oe=D(I);Q&&Q.l(Oe),L=Te();for(let Be=0;Be<Z.length;Be+=1)Z[Be].l(Oe);Oe.forEach(v),oe=ae(O,"g",{class:!0});var Je=D(oe);U=ae(Je,"path",{fill:!0,stroke:!0,"stroke-width":!0}),D(U).forEach(v);for(let Be=0;Be<B.length;Be+=1)B[Be].l(Je);Je.forEach(v),se=ae(O,"g",{class:!0});var Ce=D(se);fe=ae(Ce,"path",{fill:!0,stroke:!0,"stroke-width":!0}),D(fe).forEach(v);for(let Be=0;Be<ge.length;Be+=1)ge[Be].l(Ce);Ce.forEach(v),de=ae(O,"g",{}),D(de).forEach(v),R=ae(O,"g",{id:!0,class:!0}),D(R).forEach(v),ee=ye(O,"''"),this.h()},h(){d(t,"class","chart-header"),d(t,"x",r=e[2]/2+10),d(t,"y",et-5),d(t,"text-anchor","middle"),d(i,"class","brush"),d(l,"id","xAxisLine"),d(l,"x1",xn),d(l,"x2",o=e[2]-Lt),d(l,"y1","0"),d(l,"y2","0"),d(l,"stroke","rgba(0,0,0,0.7)"),d(l,"stroke-width","1"),d(a,"id","xAxis"),d(a,"transform",s=`translate(${0},${e[3]-et})`),d(u,"id","yAisLeft"),d(u,"transform",`translate(${xn},${0})`),d(h,"id","yAisRight"),d(h,"transform",c=`translate(${e[2]-Lt},${0})`),d(_,"class","circ1"),d(_,"cx","20"),d(_,"cy","10"),d(_,"r","5"),d(_,"fill",Xr),d(_,"stroke","rgba(0,0,0,0)"),d(_,"stroke-width","2"),d(y,"x","30"),d(y,"y","15"),d(y,"font-size","13"),d(y,"text-anchor","start"),d(E,"class","circ2"),d(E,"cx","20"),d(E,"cy","25"),d(E,"r","5"),d(E,"fill",xr),d(E,"stroke","rgba(0,0,0,0)"),d(E,"stroke-width","2"),d(A,"x","30"),d(A,"y","30"),d(A,"font-size","13"),d(A,"text-anchor","start"),d(f,"id","legendLeft"),d(f,"transform","translate(10,6)"),d(V,"class","deficit svelte-1qejnhv"),d(V,"x","15"),d(V,"y","5"),d(V,"width","10"),d(V,"height","10"),d(V,"fill",Yr),d(V,"opacity","0.6"),d(S,"x","30"),d(S,"y","15"),d(S,"font-size","13"),d(S,"text-anchor","start"),d(M,"class","surplus svelte-1qejnhv"),d(M,"x","15"),d(M,"y","20"),d(M,"width","10"),d(M,"height","10"),d(M,"fill",zr),d(M,"opacity","0.6"),d(P,"x","30"),d(P,"y","30"),d(P,"font-size","13"),d(P,"text-anchor","start"),d(Y,"id","legendRight"),d(Y,"transform",X=`translate(${e[2]-3*Lt+30},6)`),d(I,"id","net-values-group"),d(U,"fill","none"),d(U,"stroke",Xr),d(U,"stroke-width","2"),d(oe,"class","country1-group country-group svelte-1qejnhv"),d(fe,"fill","none"),d(fe,"stroke",xr),d(fe,"stroke-width","2"),d(se,"class","country2-group country-group svelte-1qejnhv"),d(R,"id","line-chart-tooltip"),d(R,"class","tooltip")},m(O,j){x(O,t,j),T(t,n),x(O,i,j),e[40](i),C&&C.m(O,j),x(O,a,j),T(a,l),e[41](a),x(O,u,j),e[42](u),x(O,h,j),e[43](h),x(O,f,j),T(f,_),T(f,y),T(y,b),T(y,w),T(f,E),T(f,A),T(A,m),T(A,H),x(O,Y,j),T(Y,V),T(Y,S),T(S,N),T(Y,M),T(Y,P),T(P,F),x(O,I,j),Q&&Q.m(I,null),T(I,L);for(let Se=0;Se<Z.length;Se+=1)Z[Se].m(I,null);x(O,oe,j),T(oe,U),e[44](U);for(let Se=0;Se<B.length;Se+=1)B[Se].m(oe,null);x(O,se,j),T(se,fe),e[45](fe);for(let Se=0;Se<ge.length;Se+=1)ge[Se].m(se,null);x(O,de,j),x(O,R,j),x(O,ee,j)},p(O,j){var Se,He,We,Ve;j[0]&4&&r!==(r=O[2]/2+10)&&d(t,"x",r),O[16]?C&&(C.d(1),C=null):C?C.p(O,j):(C=Sa(O),C.c(),C.m(a.parentNode,a)),j[0]&4&&o!==(o=O[2]-Lt)&&d(l,"x2",o),j[0]&8&&s!==(s=`translate(${0},${O[3]-et})`)&&d(a,"transform",s),j[0]&4&&c!==(c=`translate(${O[2]-Lt},${0})`)&&d(h,"transform",c),j[0]&3&&p!==(p=((He=`to ${(Se=O[0].get(O[1]))==null?void 0:Se.name}`)!=null?He:"")+"")&&Ge(w,p),j[0]&3&&k!==(k=((Ve=`from ${(We=O[0].get(O[1]))==null?void 0:We.name}`)!=null?Ve:"")+"")&&Ge(H,k),j[0]&4&&X!==(X=`translate(${O[2]-3*Lt+30},6)`)&&d(Y,"transform",X),O[12]>0&&O[11]<0?Q?Q.p(O,j):(Q=Ma(O),Q.c(),Q.m(I,L)):Q&&(Q.d(1),Q=null),j[0]&31375360&&(me=O[15],Z=Zt(Z,j,ue,1,O,me,ne,I,An,Na,null,Ta)),j[0]&20504576&&(ve=O[15],B=Zt(B,j,G,1,O,ve,J,oe,An,Ca,null,Ia)),j[0]&20504576&&(te=O[15],ge=Zt(ge,j,K,1,O,te,Ne,se,An,La,null,Aa))},i:Fe,o:Fe,d(O){O&&v(t),O&&v(i),e[40](null),C&&C.d(O),O&&v(a),e[41](null),O&&v(u),e[42](null),O&&v(h),e[43](null),O&&v(f),O&&v(Y),O&&v(I),Q&&Q.d();for(let j=0;j<Z.length;j+=1)Z[j].d();O&&v(oe),e[44](null);for(let j=0;j<B.length;j+=1)B[j].d();O&&v(se),e[45](null);for(let j=0;j<ge.length;j+=1)ge[j].d();O&&v(de),O&&v(R),O&&v(ee)}}}function Sa(e){let t,n,r;return{c(){t=le("rect"),this.h()},l(i){t=ae(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),D(t).forEach(v),this.h()},h(){d(t,"class","timebar svelte-1qejnhv"),d(t,"x",n=e[14](e[19][0])-12),d(t,"y",44),d(t,"width","24"),d(t,"height",r=e[3]-44-et>0?e[3]-44-et:0),d(t,"fill","rgba(0,0,0,0.2)")},m(i,a){x(i,t,a)},p(i,a){a[0]&540672&&n!==(n=i[14](i[19][0])-12)&&d(t,"x",n),a[0]&8&&r!==(r=i[3]-44-et>0?i[3]-44-et:0)&&d(t,"height",r)},d(i){i&&v(t)}}}function Ma(e){let t,n,r,i;return{c(){t=le("line"),this.h()},l(a){t=ae(a,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),D(t).forEach(v),this.h()},h(){d(t,"id","zeroline"),d(t,"x1",xn),d(t,"x2",n=e[2]-Lt),d(t,"y1",r=e[10](0)),d(t,"y2",i=e[10](0)),d(t,"stroke","rgba(0,0,0,0.7)"),d(t,"stroke-width","1")},m(a,l){x(a,t,l)},p(a,l){l[0]&4&&n!==(n=a[2]-Lt)&&d(t,"x2",n),l[0]&1024&&r!==(r=a[10](0))&&d(t,"y1",r),l[0]&1024&&i!==(i=a[10](0))&&d(t,"y2",i)},d(a){a&&v(t)}}}function Na(e,t){let n,r,i,a,l,o,s,u;return{key:e,first:null,c(){n=le("rect"),this.h()},l(h){n=ae(h,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),D(n).forEach(v),this.h()},h(){d(n,"x",r=t[14](t[53].year)-Gn/2),d(n,"width",Gn),d(n,"y",i=t[18](t[53])),d(n,"height",a=t[17](t[53])>0?t[17](t[53]):0),d(n,"fill",l=t[53].export_value<t[53].import_value?Yr:zr),d(n,"stroke",o=t[19].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"opacity","0.6"),d(n,"class","svelte-1qejnhv"),this.first=n},m(h,c){x(h,n,c),s||(u=[q(n,"click",function(){Xe(t[20](t[53].year))&&t[20](t[53].year).apply(this,arguments)}),q(n,"keydown",ed),q(n,"keypress",t[37]),q(n,"click",function(){Xe(t[20](t[53].year))&&t[20](t[53].year).apply(this,arguments)}),q(n,"focus",t[38]),q(n,"blur",t[39]),q(n,"mouseover",function(){Xe(t[22](t[53]))&&t[22](t[53]).apply(this,arguments)}),q(n,"mousemove",t[23]()),q(n,"mouseout",t[24]())],s=!0)},p(h,c){t=h,c[0]&49152&&r!==(r=t[14](t[53].year)-Gn/2)&&d(n,"x",r),c[0]&294912&&i!==(i=t[18](t[53]))&&d(n,"y",i),c[0]&163840&&a!==(a=t[17](t[53])>0?t[17](t[53]):0)&&d(n,"height",a),c[0]&32768&&l!==(l=t[53].export_value<t[53].import_value?Yr:zr)&&d(n,"fill",l),c[0]&557056&&o!==(o=t[19].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",o)},d(h){h&&v(n),s=!1,ft(u)}}}function Ca(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=le("circle"),this.h()},l(u){n=ae(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),D(n).forEach(v),this.h()},h(){d(n,"class","circ1 svelte-1qejnhv"),d(n,"cx",r=t[14](t[53].year)),d(n,"cy",i=t[13](t[53].export_value)),d(n,"r",a=t[19].includes(t[53].year)?"7":"6"),d(n,"fill",Xr),d(n,"stroke",l=t[19].includes(t[53].year)?"rgba(0,0,0,1)":"#666666"),d(n,"stroke-width","1"),this.first=n},m(u,h){x(u,n,h),o||(s=[q(n,"click",function(){Xe(t[20](t[53].year))&&t[20](t[53].year).apply(this,arguments)}),q(n,"keydown",td),q(n,"keypress",t[34]),q(n,"click",function(){Xe(t[20](t[53].year))&&t[20](t[53].year).apply(this,arguments)}),q(n,"focus",t[35]),q(n,"blur",t[36]),q(n,"mouseover",function(){Xe(t[21](t[53],!0))&&t[21](t[53],!0).apply(this,arguments)}),q(n,"mouseout",t[24]())],o=!0)},p(u,h){t=u,h[0]&49152&&r!==(r=t[14](t[53].year))&&d(n,"cx",r),h[0]&40960&&i!==(i=t[13](t[53].export_value))&&d(n,"cy",i),h[0]&557056&&a!==(a=t[19].includes(t[53].year)?"7":"6")&&d(n,"r",a),h[0]&557056&&l!==(l=t[19].includes(t[53].year)?"rgba(0,0,0,1)":"#666666")&&d(n,"stroke",l)},d(u){u&&v(n),o=!1,ft(s)}}}function La(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=le("circle"),this.h()},l(u){n=ae(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),D(n).forEach(v),this.h()},h(){d(n,"cx",r=t[14](t[53].year)),d(n,"cy",i=t[13](t[53].import_value)),d(n,"r",a=t[19].includes(t[53].year)?"7":"6"),d(n,"fill",xr),d(n,"stroke",l=t[19].includes(t[53].year)?"rgba(0,0,0,1)":"#666666"),d(n,"stroke-width","1"),d(n,"class","svelte-1qejnhv"),this.first=n},m(u,h){x(u,n,h),o||(s=[q(n,"click",function(){Xe(t[20](t[53].year))&&t[20](t[53].year).apply(this,arguments)}),q(n,"keydown",nd),q(n,"keypress",t[31]),q(n,"click",function(){Xe(t[20](t[53].year))&&t[20](t[53].year).apply(this,arguments)}),q(n,"focus",t[32]),q(n,"blur",t[33]),q(n,"mouseover",function(){Xe(t[21](t[53],!1))&&t[21](t[53],!1).apply(this,arguments)}),q(n,"mouseout",t[24]())],o=!0)},p(u,h){t=u,h[0]&49152&&r!==(r=t[14](t[53].year))&&d(n,"cx",r),h[0]&40960&&i!==(i=t[13](t[53].import_value))&&d(n,"cy",i),h[0]&557056&&a!==(a=t[19].includes(t[53].year)?"7":"6")&&d(n,"r",a),h[0]&557056&&l!==(l=t[19].includes(t[53].year)?"rgba(0,0,0,1)":"#666666")&&d(n,"stroke",l)},d(u){u&&v(n),o=!1,ft(s)}}}function j0(e){let t,n,r;function i(o,s){return o[15].length>0?Q0:J0}let a=i(e),l=a(e);return{c(){t=re("div"),n=le("svg"),l.c(),this.h()},l(o){t=ie(o,"DIV",{id:!0,class:!0});var s=D(t);n=ae(s,"svg",{width:!0,height:!0});var u=D(n);l.l(u),u.forEach(v),s.forEach(v),this.h()},h(){d(n,"width",e[2]),d(n,"height",e[3]),d(t,"id","line-chart"),d(t,"class","viz-section"),hn(()=>e[46].call(t))},m(o,s){x(o,t,s),T(t,n),l.m(n,null),r=Kr(t,e[46].bind(t))},p(o,s){a===(a=i(o))&&l?l.p(o,s):(l.d(1),l=a(o),l&&(l.c(),he(l,1),l.m(n,null))),s[0]&4&&d(n,"width",o[2]),s[0]&8&&d(n,"height",o[3])},i(o){he(l)},o:Fe,d(o){o&&v(t),l.d(),r()}}}const et=35,_r=15,xn=50,Lt=50,Gn=16,yn=10,mr=180,Ut=68,$0=22,zt=20,hi=35,vn=37,wn=22,zr="#4daf4a",Yr="#e41a1c",Xr="#377eb8",xr="#ff7f00",ed=()=>{},td=()=>{},nd=()=>{};function rd(e,t,n){let r,i,a,l,o,s,u,h,c,f,_,y;kt(e,it,z=>n(30,_=z)),kt(e,an,z=>n(19,y=z));let{data:b}=t,{bilateralData:p,locationData:w,productData:E,country1_id:A,country2_id:m}=b,k=0,H=0;const Y=z=>Jt("$.3s")(z).replace(/G/,"B");let V,S,N,M,P,F,X=!1,I;function L(z){return()=>an.set([z])}function Z(z,_e){return z+mr<k?z+_e:z+_e-mr}function ne(z,_e,we){return z+we<H?z+_e:z+_e-Ut}function oe(z,_e){return we=>{var Se,He,We;let O=Me("#line-chart-tooltip"),j=Ut+I.length*$0;if(O.append("rect").attr("width",mr).attr("height",j).attr("x",Z(we.layerX,yn)).attr("y",ne(we.layerY,yn,j)),O.append("text").attr("class","title").attr("x",Z(we.layerX,zt)).attr("y",ne(we.layerY,hi,j)).style("fill",_e?Xr:xr).text(`${z.year} `+(_e?"Export":"Import")),_.size>0){for(let Ve=0;Ve<I.length;Ve++){let W=(Se=i==null?void 0:i.get(z.year))==null?void 0:Se.filter(De=>De.product.name==I[Ve])[0];O.append("text").attr("x",Z(we.layerX,zt)).attr("y",ne(we.layerY,vn+(Ve+1)*wn,j)).text(`${I[Ve]}: ${Y(_e?(He=W==null?void 0:W.export_value)!=null?He:0:(We=W==null?void 0:W.import_value)!=null?We:0)}`)}O.append("text").attr("x",Z(we.layerX,zt)).attr("y",ne(we.layerY,vn+(I.length+1)*wn,j)).style("font-weight","bold").text(`Selected Total:  ${Y(_e?z.export_value:z.import_value)}`)}else O.append("text").attr("x",Z(we.layerX,zt)).attr("y",ne(we.layerY,vn+wn,j)).text((_.size==0?"Total: ":"Selected Total: ")+`${Y(_e?z.export_value:z.import_value)}`),O.append("text").attr("x",Z(we.layerX,zt)).attr("y",ne(we.layerY,vn+2*wn,j)).text("Sectors: All")}}function U(z){return _e=>{let we=Me("#line-chart-tooltip"),O=z.export_value-z.import_value;we.append("rect").attr("id","tooltip-rect").attr("width",mr).attr("height",Ut).attr("x",Z(_e.layerX,yn)).attr("y",ne(_e.layerY,yn,Ut)),we.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",Z(_e.layerX,zt)).attr("y",ne(_e.layerY,hi,Ut)).style("fill",O<0?Yr:zr).text(`${z.year} `+(O<0?"Deficit":"Surplus")),we.append("text").attr("id","tooltip-text2").attr("x",Z(_e.layerX,zt)).attr("y",ne(_e.layerY,vn+wn,Ut)).text((_.size>0?"Selected ":"")+`Total: ${Y(Math.abs(z.export_value-z.import_value))}`)}}function B(){return z=>{Me("#tooltip-rect").attr("x",Z(z.layerX,yn)).attr("y",ne(z.layerY,yn,Ut)),Me("#tooltip-text1").attr("x",Z(z.layerX,zt)).attr("y",ne(z.layerY,hi,Ut)),Me("#tooltip-text2").attr("x",Z(z.layerX,zt)).attr("y",ne(z.layerY,vn+wn,Ut))}}function J(){return z=>{Me("#line-chart-tooltip").selectAll("rect").remove(),Me("#line-chart-tooltip").selectAll("text").remove()}}function se(z){st.call(this,e,z)}function fe(z){st.call(this,e,z)}function ge(z){st.call(this,e,z)}function Ne(z){st.call(this,e,z)}function de(z){st.call(this,e,z)}function R(z){st.call(this,e,z)}function ee(z){st.call(this,e,z)}function C(z){st.call(this,e,z)}function Q(z){st.call(this,e,z)}function me(z){lt[z?"unshift":"push"](()=>{M=z,n(7,M)})}function ue(z){lt[z?"unshift":"push"](()=>{V=z,n(4,V)})}function ve(z){lt[z?"unshift":"push"](()=>{S=z,n(5,S)})}function G(z){lt[z?"unshift":"push"](()=>{N=z,n(6,N)})}function te(z){lt[z?"unshift":"push"](()=>{P=z,n(8,P)})}function K(z){lt[z?"unshift":"push"](()=>{F=z,n(9,F)})}function be(){k=this.clientWidth,H=this.clientHeight,n(2,k),n(3,H)}return e.$$set=z=>{"data"in z&&n(25,b=z.data)},e.$$.update=()=>{var z,_e,we,O,j,Se,He,We,Ve;if(e.$$.dirty[0]&33554432&&n(26,{bilateralData:p,locationData:w,productData:E,country1_id:A,country2_id:m}=b,p,(n(0,w),n(25,b)),(n(27,E),n(25,b)),(n(28,A),n(25,b)),(n(1,m),n(25,b))),e.$$.dirty[0]&1543503875&&n(15,r=Array.from((we=(_e=(z=p==null?void 0:p.get(A))==null?void 0:z.get(m))==null?void 0:_e.entries())!=null?we:new Array).map(W=>{let De=W[0],Pe=W[1];return Pe=_.size==0?Pe:Pe.filter(Oe=>_.has(Oe.product_id)),Pe.reduce((Oe,Je)=>(Oe.export_value+=Je.export_value,Oe.import_value+=Je.import_value,Oe),new Yt(w,E,{location_id:A,partner_id:m,product_id:0,year:De,export_value:0,import_value:0}))}).sort((W,De)=>W.year-De.year)),e.$$.dirty[0]&335544322&&(i=(O=p==null?void 0:p.get(A))==null?void 0:O.get(m)),e.$$.dirty[0]&32772&&n(14,a=Pn().domain(xa(r,W=>W.year)).range([xn+Gn/2,k-Lt-Gn/2])),e.$$.dirty[0]&32776&&n(13,l=Pn().domain([0,(j=Bn(r,W=>Math.max(W.export_value,W.import_value)))!=null?j:0]).range([H-et,et+_r]).nice()),e.$$.dirty[0]&16384&&n(29,o=W=>{if((W==null?void 0:W.selection)===null||(W==null?void 0:W.selection[1])-(W==null?void 0:W.selection[0])<5)an.set([2020]),n(16,X=!1);else{n(16,X=!0);let De=W.selection;const Pe=De[0],Oe=De[1];let Je=Math.ceil(a.invert(Pe)),Ce=Math.floor(a.invert(Oe)),Be=[];for(let _t=Je;_t<=Ce;_t++)Be.push(_t);an.set(Be)}}),e.$$.dirty[0]&536871052){let W=Wc().extent([[xn-1,et+10],[k-Lt+1,H-et]]).on("start brush end",o);Me(M).call(W)}if(e.$$.dirty[0]&32768&&n(12,s=(Se=Bn(r,W=>W.export_value-W.import_value))!=null?Se:0),e.$$.dirty[0]&32768&&n(11,u=(He=sl(r,W=>W.export_value-W.import_value))!=null?He:0),e.$$.dirty[0]&32776&&n(10,h=Pn().domain([(We=sl(r,W=>W.export_value-W.import_value))!=null?We:0,(Ve=Bn(r,W=>W.export_value-W.import_value))!=null?Ve:0]).range([H-et,et+_r]).nice()),e.$$.dirty[0]&25712){let W=Ka(a).tickFormat(Jt("d"));Me(V).transition().call(W).select(".domain").attr("stroke-width",0);let De=_s(l).tickFormat(Oe=>Y(Oe));Me(S).transition().call(De);let Pe=ds(h).tickFormat(Oe=>Y(Oe));Me(N).transition().call(Pe)}if(e.$$.dirty[0]&57600){let W=Fi();r.length>0&&(r.sort(De=>De.year),W.moveTo(a(r[0].year),l(r[0].export_value))),r.forEach(De=>{W.lineTo(a(De.year),l(De.export_value))}),Me(P).transition().attr("d",W.toString())}if(e.$$.dirty[0]&57856){let W=Fi();r.length>0&&W.moveTo(a(r[0].year),l(r[0].import_value)),r.forEach(De=>{W.lineTo(a(De.year),l(De.import_value))}),Me(F).transition().attr("d",W.toString())}e.$$.dirty[0]&1207959552&&(I=_.size==0?["All"]:Array.from(_.values()).map(W=>{var De,Pe;return(Pe=(De=E==null?void 0:E.get(W))==null?void 0:De.name)!=null?Pe:"something"}).sort()),e.$$.dirty[0]&7168&&n(18,c=W=>W.export_value<W.import_value?s<0?et+_r:h(0):(u>0,h(W.export_value-W.import_value))),e.$$.dirty[0]&7176&&n(17,f=W=>W.export_value<W.import_value?s<0?h(W.export_value-W.import_value)-et-_r:h(W.export_value-W.import_value)-h(0):u>0?H-et-h(W.export_value-W.import_value):h(0)-h(W.export_value-W.import_value))},[w,m,k,H,V,S,N,M,P,F,h,u,s,l,a,r,X,f,c,y,L,oe,U,B,J,b,p,E,A,o,_,se,fe,ge,Ne,de,R,ee,C,Q,me,ue,ve,G,te,K,be]}class id extends Et{constructor(t){super(),At(this,t,rd,j0,It,{data:25},null,[-1,-1])}}const{Map:ld}=Wo;function Da(e,t,n){const r=e.slice();return r[33]=t[n],r}function Oa(e){let t,n,r,i,a,l,o,s,u,h=e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>10&&Ra(e),c=e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>30&&Fa(e);return{c(){t=le("rect"),h&&h.c(),l=Te(),c&&c.c(),o=Te(),this.h()},l(f){t=ae(f,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),D(t).forEach(v),h&&h.l(f),l=Te(),c&&c.l(f),o=Te(),this.h()},h(){var f,_,y,b;d(t,"class","leaf svelte-sixlpg"),d(t,"transform",n=`translate(${e[33].x0},${e[33].y0})`),d(t,"width",r=e[33].x1-e[33].x0),d(t,"height",i=e[33].y1-e[33].y0),d(t,"fill",a=e[5]?e[5]((b=(y=(_=(f=e[33].data)==null?void 0:f.product)==null?void 0:_.parent)==null?void 0:y.name)!=null?b:""):"white")},m(f,_){x(f,t,_),h&&h.m(f,_),x(f,l,_),c&&c.m(f,_),x(f,o,_),s||(u=[q(t,"keydown",od),q(t,"click",function(){Xe(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),q(t,"focus",e[26]),q(t,"mouseover",function(){Xe(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),q(t,"mousemove",function(){Xe(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),q(t,"mouseleave",e[12]())],s=!0)},p(f,_){var y,b,p,w;e=f,_[0]&256&&n!==(n=`translate(${e[33].x0},${e[33].y0})`)&&d(t,"transform",n),_[0]&256&&r!==(r=e[33].x1-e[33].x0)&&d(t,"width",r),_[0]&256&&i!==(i=e[33].y1-e[33].y0)&&d(t,"height",i),_[0]&288&&a!==(a=e[5]?e[5]((w=(p=(b=(y=e[33].data)==null?void 0:y.product)==null?void 0:b.parent)==null?void 0:p.name)!=null?w:""):"white")&&d(t,"fill",a),e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>10?h?h.p(e,_):(h=Ra(e),h.c(),h.m(l.parentNode,l)):h&&(h.d(1),h=null),e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>30?c?c.p(e,_):(c=Fa(e),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},d(f){f&&v(t),h&&h.d(f),f&&v(l),c&&c.d(f),f&&v(o),s=!1,ft(u)}}}function Ra(e){var s,u,h;let t,n=((h=(u=(s=e[33].data)==null?void 0:s.product.name)==null?void 0:u.substring(0,40))!=null?h:"")+"",r,i,a,l,o;return{c(){t=le("text"),r=pe(n),this.h()},l(c){t=ae(c,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var f=D(t);r=ye(f,n),f.forEach(v),this.h()},h(){d(t,"class","label svelte-sixlpg"),d(t,"transform",i=`translate(${e[33].x0+3},${e[33].y0+3})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[33].x1-e[33].x0)/15,8))},m(c,f){x(c,t,f),T(t,r),l||(o=[q(t,"keydown",sd),q(t,"click",function(){Xe(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),q(t,"focus",e[25]),q(t,"mouseover",function(){Xe(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),q(t,"mousemove",function(){Xe(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),q(t,"mouseleave",e[12]())],l=!0)},p(c,f){var _,y,b;e=c,f[0]&256&&n!==(n=((b=(y=(_=e[33].data)==null?void 0:_.product.name)==null?void 0:y.substring(0,40))!=null?b:"")+"")&&Ge(r,n),f[0]&256&&i!==(i=`translate(${e[33].x0+3},${e[33].y0+3})`)&&d(t,"transform",i),f[0]&256&&a!==(a=Math.max((e[33].x1-e[33].x0)/15,8))&&d(t,"font-size",a)},d(c){c&&v(t),l=!1,ft(o)}}}function Fa(e){let t,n=e[9](e[4]?e[33].data.export_value:e[33].data.import_value)+"",r,i,a,l,o;return{c(){t=le("text"),r=pe(n),this.h()},l(s){t=ae(s,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var u=D(t);r=ye(u,n),u.forEach(v),this.h()},h(){d(t,"class","label-num svelte-sixlpg"),d(t,"transform",i=`translate(${e[33].x0+5},${e[33].y0+1+Math.max((e[33].x1-e[33].x0)/10,8)})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[33].x1-e[33].x0)/15,8)-1),d(t,"font-weight","300")},m(s,u){x(s,t,u),T(t,r),l||(o=[q(t,"keydown",ud),q(t,"click",function(){Xe(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),q(t,"focus",e[24]),q(t,"mouseover",function(){Xe(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),q(t,"mousemove",function(){Xe(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),q(t,"mouseleave",e[12]())],l=!0)},p(s,u){e=s,u[0]&272&&n!==(n=e[9](e[4]?e[33].data.export_value:e[33].data.import_value)+"")&&Ge(r,n),u[0]&256&&i!==(i=`translate(${e[33].x0+5},${e[33].y0+1+Math.max((e[33].x1-e[33].x0)/10,8)})`)&&d(t,"transform",i),u[0]&256&&a!==(a=Math.max((e[33].x1-e[33].x0)/15,8)-1)&&d(t,"font-size",a)},d(s){s&&v(t),l=!1,ft(o)}}}function Ha(e,t){let n,r,i=t[3].length>0&&t[33].x1!=NaN&&t[33].x0!=NaN&&t[33].y0!=NaN&&t[33].y1!=NaN&&Oa(t);return{key:e,first:null,c(){n=Te(),i&&i.c(),r=Te(),this.h()},l(a){n=Te(),i&&i.l(a),r=Te(),this.h()},h(){this.first=n},m(a,l){x(a,n,l),i&&i.m(a,l),x(a,r,l)},p(a,l){t=a,t[3].length>0&&t[33].x1!=NaN&&t[33].x0!=NaN&&t[33].y0!=NaN&&t[33].y1!=NaN?i?i.p(t,l):(i=Oa(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&v(n),i&&i.d(a),a&&v(r)}}}function Va(e){let t,n,r,i=e[6]?"Loading...":"No valid data for this pair.",a,l,o;return{c(){t=le("rect"),r=le("text"),a=pe(i),this.h()},l(s){t=ae(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),D(t).forEach(v),r=ae(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=D(r);a=ye(u,i),u.forEach(v),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[0]),d(t,"height",e[1]),d(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),d(r,"x",l=e[0]/2),d(r,"y",o=e[1]/2),d(r,"alignment-baseline","central"),d(r,"text-anchor","middle")},m(s,u){x(s,t,u),x(s,r,u),T(r,a)},p(s,u){u[0]&1&&d(t,"width",s[0]),u[0]&2&&d(t,"height",s[1]),u[0]&64&&n!==(n=s[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&d(t,"fill",n),u[0]&64&&i!==(i=s[6]?"Loading...":"No valid data for this pair.")&&Ge(a,i),u[0]&1&&l!==(l=s[0]/2)&&d(r,"x",l),u[0]&2&&o!==(o=s[1]/2)&&d(r,"y",o)},d(s){s&&v(t),s&&v(r)}}}function ad(e){var c,f;let t,n,r,i=[],a=new ld,l,o,s=e[8];const u=_=>_[33].data.product_id;for(let _=0;_<s.length;_+=1){let y=Da(e,s,_),b=u(y);a.set(b,i[_]=Ha(b,y))}let h=((f=(c=e[2])==null?void 0:c.length)!=null?f:0)===0&&Va(e);return{c(){t=re("div"),n=le("svg"),r=le("g");for(let _=0;_<i.length;_+=1)i[_].c();l=le("g"),h&&h.c(),this.h()},l(_){t=ie(_,"DIV",{class:!0});var y=D(t);n=ae(y,"svg",{class:!0});var b=D(n);r=ae(b,"g",{class:!0});var p=D(r);for(let w=0;w<i.length;w+=1)i[w].l(p);p.forEach(v),l=ae(b,"g",{id:!0,class:!0}),D(l).forEach(v),h&&h.l(b),b.forEach(v),y.forEach(v),this.h()},h(){d(r,"class","treemap svelte-sixlpg"),d(l,"id","treemap-tooltip"),d(l,"class","tooltip"),d(n,"class","svelte-sixlpg"),d(t,"class","viz-section-full"),hn(()=>e[28].call(t))},m(_,y){x(_,t,y),T(t,n),T(n,r);for(let b=0;b<i.length;b+=1)i[b].m(r,null);e[27](r),T(n,l),h&&h.m(n,null),o=Kr(t,e[28].bind(t))},p(_,y){var b,p;y[0]&16184&&(s=_[8],i=Zt(i,y,u,1,_,s,a,r,An,Ha,null,Da)),((p=(b=_[2])==null?void 0:b.length)!=null?p:0)===0?h?h.p(_,y):(h=Va(_),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},i:Fe,o:Fe,d(_){_&&v(t);for(let y=0;y<i.length;y+=1)i[y].d();e[27](null),h&&h.d(),o()}}}const gr=10,pr=120,Ba=25,di=90,Mt=20,Nt=28,qt=15,od=()=>{},sd=()=>{},ud=()=>{};function fd(e,t,n){let r,i,a,l,o,s,u,h,c;kt(e,it,U=>n(23,u=U)),kt(e,an,U=>n(3,h=U)),kt(e,sn,U=>n(4,c=U));const f=U=>Jt("$.3s")(U).replace(/G/,"B");let{data:_}=t,{country1:y,country2:b,productColorScale:p,drilldownBilateral:w,loadingDrilldown:E,locationData:A,productData:m}=_,k=0,H=0,Y,V=new Array;function S(U,B,J){return U+J<k?U+B:U+B-J}function N(U,B){return U+di<H?U+B:U+B-di}function M(U){return B=>{var fe,ge,Ne;let J=Me("#treemap-tooltip"),se=Math.max(pr+h.length*Ba,pr+10+(U.product.name.length-20)*8);J.append("rect").attr("id","tooltip-rect").attr("width",se).attr("height",di).attr("x",S(B.layerX,gr,se)).attr("y",N(B.layerY,gr)),J.append("text").attr("class","treemap").attr("id","tooltip-text1").attr("x",S(B.layerX,Mt,se)).attr("y",N(B.layerY,Nt)).style("font-weight","bold").text(`${U.product.name}`),J.append("text").attr("class","treemap").attr("id","tooltip-text2").attr("x",S(B.layerX,Mt,se)).attr("y",N(B.layerY,Nt+qt)).text(`Sector: ${(Ne=(ge=(fe=U.product)==null?void 0:fe.parent)==null?void 0:ge.name)!=null?Ne:""}`),J.append("text").attr("class","treemap").attr("id","tooltip-text3").attr("x",S(B.layerX,Mt,se)).attr("y",N(B.layerY,Nt+2*qt)).text((c?"Export: ":"Import: ")+`${f(c?U.export_value:U.import_value)}`),J.append("text").attr("class","treemap").attr("id","tooltip-text4").attr("x",S(B.layerX,Mt,se)).attr("y",N(B.layerY,Nt+3*qt)).text(`Share: ${Jt(".2%")(c?U.export_value/l:U.import_value/o)}`),J.append("text").attr("class","treemap").attr("id","tooltip-text5").attr("x",S(B.layerX,Mt,se)).attr("y",N(B.layerY,Nt+4*qt)).text((h.length>1?"Years: ":"Year: ")+`${h.join(", ")}`)}}function P(U){return B=>{let J=Math.max(pr+h.length*Ba,pr+10+(U.product.name.length-20)*8);Me("#tooltip-rect").attr("x",S(B.layerX,gr,J)).attr("y",N(B.layerY,gr)),Me("#tooltip-text1").attr("x",S(B.layerX,Mt,J)).attr("y",N(B.layerY,Nt)),Me("#tooltip-text2").attr("x",S(B.layerX,Mt,J)).attr("y",N(B.layerY,Nt+qt)),Me("#tooltip-text3").attr("x",S(B.layerX,Mt,J)).attr("y",N(B.layerY,Nt+2*qt)),Me("#tooltip-text4").attr("x",S(B.layerX,Mt,J)).attr("y",N(B.layerY,Nt+3*qt)),Me("#tooltip-text5").attr("x",S(B.layerX,Mt,J)).attr("y",N(B.layerY,Nt+4*qt))}}function F(){return U=>{Me("#treemap-tooltip").selectAll("rect").remove(),Me("#treemap-tooltip").selectAll("text").remove()}}function X(U){return B=>{var J,se,fe,ge;((J=U==null?void 0:U.product)==null?void 0:J.parent)&&u.has((fe=(se=U==null?void 0:U.product)==null?void 0:se.parent)==null?void 0:fe.id)?it.update(Ne=>{var de,R,ee;return Ne.delete((ee=(R=(de=U==null?void 0:U.product)==null?void 0:de.parent)==null?void 0:R.id)!=null?ee:-1),Ne}):((ge=U==null?void 0:U.product)==null?void 0:ge.parent)!=null&&it.update(Ne=>{var de,R,ee;return Ne.add((ee=(R=(de=U==null?void 0:U.product)==null?void 0:de.parent)==null?void 0:R.id)!=null?ee:-1),Ne})}}function I(U){st.call(this,e,U)}function L(U){st.call(this,e,U)}function Z(U){st.call(this,e,U)}function ne(U){lt[U?"unshift":"push"](()=>{Y=U,n(7,Y)})}function oe(){k=this.clientWidth,H=this.clientHeight,n(0,k),n(1,H)}return e.$$set=U=>{"data"in U&&n(14,_=U.data)},e.$$.update=()=>{var U;if(e.$$.dirty[0]&16384&&n(17,{drilldownBilateral:w,productColorScale:p,country1:y,country2:b,loadingDrilldown:E,locationData:A,productData:m}=_,w,(n(5,p),n(14,_)),(n(15,y),n(14,_)),(n(16,b),n(14,_)),(n(6,E),n(14,_)),(n(18,A),n(14,_)),(n(19,m),n(14,_))),e.$$.dirty[0]&196608&&n(22,r=w==null?void 0:w.get((U=b==null?void 0:b.id)!=null?U:0)),e.$$.dirty[0]&4194312&&n(20,i=h.map(B=>{var J;return(J=r==null?void 0:r.get(B))!=null?J:new Array}).flat()),e.$$.dirty[0]&1933312&&n(21,a=Array.from(pi(i,B=>B.reduce((J,se)=>(J.export_value+=se.export_value,J.import_value+=se.import_value,J),new Yt(A,m,{location_id:y,partner_id:b,product_id:B[0].product_id,year:0,export_value:0,import_value:0})),B=>B.product_id).values())),e.$$.dirty[0]&2097152&&(l=Mr(a,B=>B.export_value)),e.$$.dirty[0]&2097152&&(o=Mr(a,B=>B.import_value)),e.$$.dirty[0]&12419072&&n(2,s=u.size==0?a:Array.from(pi(i.filter(B=>u.has(B.product.parent_id)),B=>B.reduce((J,se)=>(J.export_value+=se.export_value,J.import_value+=se.import_value,J),new Yt(A,m,{location_id:y,partner_id:b,product_id:B[0].product_id,year:0,export_value:0,import_value:0})),B=>B.product_id).values())),e.$$.dirty[0]&8486935&&s&&s.length>0){let B=[];if(u.size==1){let se=u.entries().next().value[1],fe=new Yt(new Map,new Map,{location_id:y,partner_id:b,product_id:se,year:0,export_value:0,import_value:0});fe.product=new Tr({product_id:se,name:"Sector",level:-1,parent_id:-1}),fe.product.parent_id=null,B.push(fe)}else{let se=new Yt(new Map,new Map,{location_id:y,partner_id:b,product_id:-1,year:0,export_value:0,import_value:0});se.product=new Tr({product_id:-1,name:"All",level:-1,parent_id:-1}),se.product.parent_id=null,B.push(se);let fe=gi(s,ge=>{var Ne,de;return(de=(Ne=ge.product)==null?void 0:Ne.parent_id)!=null?de:-1});if(fe.size>1)for(let[ge,Ne]of fe){let de=new Yt(new Map,new Map,{location_id:y,partner_id:b,product_id:ge,year:0,export_value:0,import_value:0});de.product=new Tr({product_id:ge,name:"Something",level:0,parent_id:-1}),B.push(de)}}B=B.concat(s);let J=Ph().id(se=>{var fe;return(fe=se.product)==null?void 0:fe.id}).parentId(se=>{var fe;return(fe=se.product)==null?void 0:fe.parent_id})(B);J.sum(se=>Math.max(0,se[c?"export_value":"import_value"])),xh().tile(Wh).size([k,H]).padding(2)(J),n(8,V=J.leaves())}},[k,H,s,h,c,p,E,Y,V,f,M,P,F,X,_,y,b,w,A,m,i,a,r,u,I,L,Z,ne,oe]}class cd extends Et{constructor(t){super(),At(this,t,fd,ad,It,{data:14},null,[-1,-1])}}const hd=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),yr=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=hd.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function dd(e){let t,n,r,i,a,l;return{c(){t=re("div"),n=re("h3"),r=pe("Loading data..."),i=Ae(),a=le("svg"),l=le("circle"),this.h()},l(o){t=ie(o,"DIV",{class:!0});var s=D(t);n=ie(s,"H3",{});var u=D(n);r=ye(u,"Loading data..."),u.forEach(v),i=Ie(s),a=ae(s,"svg",{class:!0,viewBox:!0});var h=D(a);l=ae(h,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),D(l).forEach(v),h.forEach(v),s.forEach(v),this.h()},h(){d(l,"class","path svelte-4wcyf5"),d(l,"cx","25"),d(l,"cy","25"),d(l,"r","20"),d(l,"fill","none"),d(l,"stroke-width","5"),d(a,"class","spinner svelte-4wcyf5"),d(a,"viewBox","0 0 50 50"),d(t,"class","loading svelte-4wcyf5")},m(o,s){x(o,t,s),T(t,n),T(n,r),T(t,i),T(t,a),T(a,l)},p:Fe,i:Fe,o:Fe,d(o){o&&v(t)}}}function _d(e){var Zn,Jn,Qn,jn,$n,er;let t,n,r,i,a,l,o,s,u,h,c,f,_,y,b,p,w,E,A,m,k,H,Y,V,S,N,M,P,F,X,I,L,Z,ne,oe,U,B,J,se,fe,ge,Ne,de,R,ee,C,Q,me=((Zn=e[2])==null?void 0:Zn.name)+"",ue,ve,G=e[8]?"export to ":"import from ",te,K,be,z=((Jn=e[7])==null?void 0:Jn.name)+"",_e,we,O=e[9].length>1?`from ${e[9][0]} to ${e[9][e[9].length-1]}?`:`in ${e[9]}?`,j,Se,He,We,Ve,W,De,Pe,Oe,Je,Ce,Be,_t,Rt,jt,Ze,Nn,qn;u=new ha({props:{optionIdentifier:Ga,labelIdentifier:Ua,items:Array.from(e[0].values()),value:e[2]}}),u.$on("select",e[11]),A=new ha({props:{optionIdentifier:Ga,labelIdentifier:Ua,items:Array.from(e[0].values()),value:e[7]}}),A.$on("select",e[12]),F=new id({props:{data:{bilateralData:e[4],country1_id:(jn=(Qn=e[2])==null?void 0:Qn.id)!=null?jn:0,country2_id:(er=($n=e[7])==null?void 0:$n.id)!=null?er:0,productData:e[1],locationData:e[0]}}}),I=new Z0({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[4],loadingDrilldown:e[6],productColorScale:e[3],country1:e[2],country2:e[7]}}});let Re=e[10].size>0&&Pa(e);return W=new cd({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[3],country1:e[2],country2:e[7],drilldownBilateral:e[5],loadingDrilldown:e[6]}}}),{c(){t=re("div"),n=re("img"),i=Ae(),a=re("div"),l=re("span"),o=pe("Country"),s=Ae(),Ue(u.$$.fragment),h=Ae(),c=re("div"),f=re("button"),_=pe("\u2194"),y=Ae(),b=re("div"),p=re("span"),w=pe("Partner"),E=Ae(),Ue(A.$$.fragment),m=Ae(),k=re("img"),Y=Ae(),V=re("div"),S=Ae(),N=re("div"),M=re("div"),P=re("div"),Ue(F.$$.fragment),X=Ae(),Ue(I.$$.fragment),L=Ae(),Z=re("div"),ne=re("div"),oe=re("span"),U=pe("Showing"),B=Ae(),J=re("button"),se=pe("Export"),fe=Ae(),ge=re("button"),Ne=pe("Import"),de=Ae(),R=re("div"),ee=re("h2"),C=pe(`What did
              `),Q=re("b"),ue=pe(me),ve=Ae(),te=pe(G),K=Ae(),be=re("b"),_e=pe(z),we=Ae(),j=pe(O),Se=Ae(),He=re("div"),Re&&Re.c(),We=Ae(),Ve=re("div"),Ue(W.$$.fragment),De=Ae(),Pe=re("footer"),Oe=re("center"),Je=pe("A Bilateral Trade Data Visualization by "),Ce=re("b"),Be=pe("Andrew Lee"),_t=pe(` &
        `),Rt=re("b"),jt=pe("Franklin Yuan"),this.h()},l($){t=ie($,"DIV",{class:!0});var Ee=D(t);n=ie(Ee,"IMG",{class:!0,alt:!0,src:!0}),i=Ie(Ee),a=ie(Ee,"DIV",{class:!0});var at=D(a);l=ie(at,"SPAN",{class:!0});var mt=D(l);o=ye(mt,"Country"),mt.forEach(v),s=Ie(at),ht(u.$$.fragment,at),at.forEach(v),h=Ie(Ee),c=ie(Ee,"DIV",{class:!0});var xt=D(c);f=ie(xt,"BUTTON",{class:!0});var $t=D(f);_=ye($t,"\u2194"),$t.forEach(v),xt.forEach(v),y=Ie(Ee),b=ie(Ee,"DIV",{class:!0});var gt=D(b);p=ie(gt,"SPAN",{class:!0});var en=D(p);w=ye(en,"Partner"),en.forEach(v),E=Ie(gt),ht(A.$$.fragment,gt),gt.forEach(v),m=Ie(Ee),k=ie(Ee,"IMG",{class:!0,alt:!0,src:!0}),Ee.forEach(v),Y=Ie($),V=ie($,"DIV",{});var dn=D(V);dn.forEach(v),S=Ie($),N=ie($,"DIV",{id:!0,class:!0});var tn=D(N);M=ie(tn,"DIV",{id:!0,class:!0});var pt=D(M);P=ie(pt,"DIV",{class:!0});var Ft=D(P);ht(F.$$.fragment,Ft),X=Ie(Ft),ht(I.$$.fragment,Ft),Ft.forEach(v),L=Ie(pt),Z=ie(pt,"DIV",{class:!0});var yt=D(Z);ne=ie(yt,"DIV",{});var ct=D(ne);oe=ie(ct,"SPAN",{});var Ht=D(oe);U=ye(Ht,"Showing"),Ht.forEach(v),B=Ie(ct),J=ie(ct,"BUTTON",{class:!0});var Vt=D(J);se=ye(Vt,"Export"),Vt.forEach(v),fe=Ie(ct),ge=ie(ct,"BUTTON",{class:!0});var nn=D(ge);Ne=ye(nn,"Import"),nn.forEach(v),ct.forEach(v),de=Ie(yt),R=ie(yt,"DIV",{});var tr=D(R);ee=ie(tr,"H2",{class:!0});var vt=D(ee);C=ye(vt,`What did
              `),Q=ie(vt,"B",{});var nr=D(Q);ue=ye(nr,me),nr.forEach(v),ve=Ie(vt),te=ye(vt,G),K=Ie(vt),be=ie(vt,"B",{});var rr=D(be);_e=ye(rr,z),rr.forEach(v),we=Ie(vt),j=ye(vt,O),vt.forEach(v),tr.forEach(v),Se=Ie(yt),He=ie(yt,"DIV",{class:!0});var ir=D(He);Re&&Re.l(ir),ir.forEach(v),yt.forEach(v),We=Ie(pt),Ve=ie(pt,"DIV",{class:!0});var g=D(Ve);ht(W.$$.fragment,g),g.forEach(v),pt.forEach(v),tn.forEach(v),De=Ie($),Pe=ie($,"FOOTER",{class:!0});var ce=D(Pe);Oe=ie(ce,"CENTER",{});var Le=D(Oe);Je=ye(Le,"A Bilateral Trade Data Visualization by "),Ce=ie(Le,"B",{});var rt=D(Ce);Be=ye(rt,"Andrew Lee"),rt.forEach(v),_t=ye(Le,` &
        `),Rt=ie(Le,"B",{});var St=D(Rt);jt=ye(St,"Franklin Yuan"),St.forEach(v),Le.forEach(v),ce.forEach(v),this.h()},h(){var $,Ee,at,mt;d(n,"class","country-icon svelte-4wcyf5"),d(n,"alt","Select a country"),lr(n.src,r=yr((Ee=($=e[2])==null?void 0:$.code)!=null?Ee:"ATA"))||d(n,"src",r),d(l,"class","svelte-4wcyf5"),d(a,"class","dropdown svelte-4wcyf5"),d(f,"class","switch-btn svelte-4wcyf5"),d(c,"class","switch-btn-container svelte-4wcyf5"),d(p,"class","svelte-4wcyf5"),d(b,"class","dropdown svelte-4wcyf5"),d(k,"class","country-icon svelte-4wcyf5"),d(k,"alt","Select a partner"),lr(k.src,H=yr((mt=(at=e[7])==null?void 0:at.code)!=null?mt:"ATA"))||d(k,"src",H),d(t,"class","selectors svelte-4wcyf5"),d(P,"class","viz-row svelte-4wcyf5"),d(J,"class","svelte-4wcyf5"),$e(J,"btn-active",e[8]),d(ge,"class","svelte-4wcyf5"),$e(ge,"btn-active",!e[8]),d(ee,"class","chart-header svelte-4wcyf5"),d(He,"class","clear-sectors svelte-4wcyf5"),d(Z,"class","spacer svelte-4wcyf5"),d(Ve,"class","viz-row svelte-4wcyf5"),d(M,"id","content"),d(M,"class","svelte-4wcyf5"),d(N,"id","container"),d(N,"class","svelte-4wcyf5"),d(Pe,"class","svelte-4wcyf5")},m($,Ee){x($,t,Ee),T(t,n),T(t,i),T(t,a),T(a,l),T(l,o),T(a,s),ze(u,a,null),T(t,h),T(t,c),T(c,f),T(f,_),T(t,y),T(t,b),T(b,p),T(p,w),T(b,E),ze(A,b,null),T(t,m),T(t,k),x($,Y,Ee),x($,V,Ee),x($,S,Ee),x($,N,Ee),T(N,M),T(M,P),ze(F,P,null),T(P,X),ze(I,P,null),T(M,L),T(M,Z),T(Z,ne),T(ne,oe),T(oe,U),T(ne,B),T(ne,J),T(J,se),T(ne,fe),T(ne,ge),T(ge,Ne),T(Z,de),T(Z,R),T(R,ee),T(ee,C),T(ee,Q),T(Q,ue),T(ee,ve),T(ee,te),T(ee,K),T(ee,be),T(be,_e),T(ee,we),T(ee,j),T(Z,Se),T(Z,He),Re&&Re.m(He,null),T(M,We),T(M,Ve),ze(W,Ve,null),x($,De,Ee),x($,Pe,Ee),T(Pe,Oe),T(Oe,Je),T(Oe,Ce),T(Ce,Be),T(Oe,_t),T(Oe,Rt),T(Rt,jt),Ze=!0,Nn||(qn=[q(f,"click",e[13]),q(J,"click",e[14]),q(ge,"click",e[15])],Nn=!0)},p($,Ee){var en,dn,tn,pt,Ft,yt,ct,Ht,Vt,nn;(!Ze||Ee&4&&!lr(n.src,r=yr((dn=(en=$[2])==null?void 0:en.code)!=null?dn:"ATA")))&&d(n,"src",r);const at={};Ee&1&&(at.items=Array.from($[0].values())),Ee&4&&(at.value=$[2]),u.$set(at);const mt={};Ee&1&&(mt.items=Array.from($[0].values())),Ee&128&&(mt.value=$[7]),A.$set(mt),(!Ze||Ee&128&&!lr(k.src,H=yr((pt=(tn=$[7])==null?void 0:tn.code)!=null?pt:"ATA")))&&d(k,"src",H);const xt={};Ee&151&&(xt.data={bilateralData:$[4],country1_id:(yt=(Ft=$[2])==null?void 0:Ft.id)!=null?yt:0,country2_id:(Ht=(ct=$[7])==null?void 0:ct.id)!=null?Ht:0,productData:$[1],locationData:$[0]}),F.$set(xt);const $t={};Ee&223&&($t.data={productData:$[1],locationData:$[0],bilateralData:$[4],loadingDrilldown:$[6],productColorScale:$[3],country1:$[2],country2:$[7]}),I.$set($t),(!Ze||Ee&256)&&$e(J,"btn-active",$[8]),(!Ze||Ee&256)&&$e(ge,"btn-active",!$[8]),(!Ze||Ee&4)&&me!==(me=((Vt=$[2])==null?void 0:Vt.name)+"")&&Ge(ue,me),(!Ze||Ee&256)&&G!==(G=$[8]?"export to ":"import from ")&&Ge(te,G),(!Ze||Ee&128)&&z!==(z=((nn=$[7])==null?void 0:nn.name)+"")&&Ge(_e,z),(!Ze||Ee&512)&&O!==(O=$[9].length>1?`from ${$[9][0]} to ${$[9][$[9].length-1]}?`:`in ${$[9]}?`)&&Ge(j,O),$[10].size>0?Re?(Re.p($,Ee),Ee&1024&&he(Re,1)):(Re=Pa($),Re.c(),he(Re,1),Re.m(He,null)):Re&&(Ke(),ke(Re,1,1,()=>{Re=null}),qe());const gt={};Ee&239&&(gt.data={locationData:$[0],productData:$[1],productColorScale:$[3],country1:$[2],country2:$[7],drilldownBilateral:$[5],loadingDrilldown:$[6]}),W.$set(gt)},i($){Ze||(he(u.$$.fragment,$),he(A.$$.fragment,$),he(F.$$.fragment,$),he(I.$$.fragment,$),he(Re),he(W.$$.fragment,$),Ze=!0)},o($){ke(u.$$.fragment,$),ke(A.$$.fragment,$),ke(F.$$.fragment,$),ke(I.$$.fragment,$),ke(Re),ke(W.$$.fragment,$),Ze=!1},d($){$&&v(t),Ye(u),Ye(A),$&&v(Y),$&&v(V),$&&v(S),$&&v(N),Ye(F),Ye(I),Re&&Re.d(),Ye(W),$&&v(De),$&&v(Pe),Nn=!1,ft(qn)}}}function Pa(e){let t,n,r,i,a,l,o;return{c(){t=re("button"),n=pe("Clear Sector Selection"),this.h()},l(s){t=ie(s,"BUTTON",{height:!0,class:!0});var u=D(t);n=ye(u,"Clear Sector Selection"),u.forEach(v),this.h()},h(){d(t,"height","10"),d(t,"class","svelte-4wcyf5")},m(s,u){x(s,t,u),T(t,n),a=!0,l||(o=q(t,"click",e[16]),l=!0)},p:Fe,i(s){a||(hn(()=>{i&&i.end(1),r=Yi(t,Ur,{duration:200}),r.start()}),a=!0)},o(s){r&&r.invalidate(),i=qo(t,Ur,{duration:200}),a=!1},d(s){s&&v(t),s&&i&&i.end(),l=!1,o()}}}function md(e){let t,n,r,i,a,l=ar.exports.icons["book-open"].toSvg()+"",o,s,u=ar.exports.icons.youtube.toSvg()+"",h,c,f=ar.exports.icons.database.toSvg()+"",_,y,b=ar.exports.icons.github.toSvg()+"",p,w,E,A,m,k,H,Y;const V=[_d,dd],S=[];function N(M,P){return M[0]&&M[4]&&M[1]?0:1}return k=N(e),H=S[k]=V[k](e),{c(){t=re("link"),n=Ae(),r=re("div"),i=re("div"),a=re("a"),o=Ae(),s=re("a"),h=Ae(),c=re("a"),_=Ae(),y=re("a"),p=Ae(),w=re("div"),E=re("h1"),A=pe("Commerce Among Nations"),m=Ae(),H.c(),this.h()},l(M){const P=Ko("svelte-tu7v51",document.head);t=ie(P,"LINK",{rel:!0,href:!0}),P.forEach(v),n=Ie(M),r=ie(M,"DIV",{class:!0});var F=D(r);i=ie(F,"DIV",{class:!0});var X=D(i);a=ie(X,"A",{href:!0,title:!0,class:!0});var I=D(a);I.forEach(v),o=Ie(X),s=ie(X,"A",{href:!0,title:!0,class:!0});var L=D(s);L.forEach(v),h=Ie(X),c=ie(X,"A",{href:!0,title:!0,class:!0});var Z=D(c);Z.forEach(v),_=Ie(X),y=ie(X,"A",{href:!0,title:!0,class:!0});var ne=D(y);ne.forEach(v),X.forEach(v),p=Ie(F),w=ie(F,"DIV",{class:!0});var oe=D(w);E=ie(oe,"H1",{class:!0});var U=D(E);A=ye(U,"Commerce Among Nations"),U.forEach(v),oe.forEach(v),m=Ie(F),H.l(F),F.forEach(v),this.h()},h(){d(t,"rel","icon"),d(t,"href",`${bn}/favicon.png`),document.title="Commerce Among Nations",d(a,"href",bn+"/processbook"),d(a,"title","process-book"),d(a,"class","svelte-4wcyf5"),d(s,"href","https://www.youtube.com"),d(s,"title","screencast"),d(s,"class","svelte-4wcyf5"),d(c,"href","https://dataverse.harvard.edu/dataverse/atlas"),d(c,"title","data"),d(c,"class","svelte-4wcyf5"),d(y,"href","https://github.com/candrewlee14/data-viz-project"),d(y,"title","github"),d(y,"class","svelte-4wcyf5"),d(i,"class","nav svelte-4wcyf5"),d(E,"class","svelte-4wcyf5"),d(w,"class","heading svelte-4wcyf5"),d(r,"class","outer svelte-4wcyf5")},m(M,P){T(document.head,t),x(M,n,P),x(M,r,P),T(r,i),T(i,a),a.innerHTML=l,T(i,o),T(i,s),s.innerHTML=u,T(i,h),T(i,c),c.innerHTML=f,T(i,_),T(i,y),y.innerHTML=b,T(r,p),T(r,w),T(w,E),T(E,A),T(r,m),S[k].m(r,null),Y=!0},p(M,[P]){let F=k;k=N(M),k===F?S[k].p(M,P):(Ke(),ke(S[F],1,1,()=>{S[F]=null}),qe(),H=S[k],H?H.p(M,P):(H=S[k]=V[k](M),H.c()),he(H,1),H.m(r,null))},i(M){Y||(he(H),Y=!0)},o(M){ke(H),Y=!1},d(M){v(t),M&&v(n),M&&v(r),S[k].d()}}}const Ga="id",Ua="name",gd=231,pd=43;function yd(e,t,n){let r,i,a,l,o;kt(e,sn,m=>n(8,a=m)),kt(e,an,m=>n(9,l=m)),kt(e,it,m=>n(10,o=m));const s=m=>{let k=m.detail;n(2,r=c.get(k.id))},u=m=>{let k=m.detail;n(7,i=c.get(k.id))};let h,c=new Map,f=new Map,_,y,b=!1;function p(){let m=r;n(2,r=i),n(7,i=m)}function w(){ll(sn,a=!0,a)}function E(){ll(sn,a=!1,a)}Wr(async()=>{Promise.all([fr(`${bn}/data/location.csv`),fr(`${bn}/data/hs_product.csv`),fr(`${bn}/data/hs_2010_to_2020.csv`)]).then(([m,k,H])=>{var V;n(0,c=ol(m.map(S=>new H0(S)).filter(S=>S.level=="country"),S=>S.id)),n(1,f=ol(k.map(S=>new Tr(S)),S=>S.id));for(let[S,N]of f)N.parent=(V=f.get(N.parent_id))!=null?V:null,f.set(S,N);let Y=H.map(S=>new Yt(c,f,S));n(4,_=gi(Y,S=>S.location_id,S=>S.partner_id,S=>S.year)),xa(H,S=>+S.export_value),n(3,h=So(Array.from(f).map(([S,N])=>N.level).filter(S=>S=="section"),i0))})});const A=()=>{it.set(new Set)};return e.$$.update=()=>{var m,k,H,Y;e.$$.dirty&1&&n(2,r=(m=c==null?void 0:c.get(gd))!=null?m:null),e.$$.dirty&1&&n(7,i=(k=c==null?void 0:c.get(pd))!=null?k:null),e.$$.dirty&7&&(n(5,y=null),n(6,b=!0),fr(`${bn}/data/${(H=r==null?void 0:r.code)!=null?H:"USA"}/${(Y=r==null?void 0:r.code)!=null?Y:"USA"}_hs2_2010_to_2020.csv`).then(V=>{n(5,y=gi(V.map(S=>new Yt(c,f,S)),S=>S.partner_id,S=>S.year)),n(6,b=!1)}))},[c,f,r,h,_,y,b,i,a,l,o,s,u,p,w,E,A]}class Ad extends Et{constructor(t){super(),At(this,t,yd,md,It,{})}}export{Ad as default};
