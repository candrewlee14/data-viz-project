var So=Object.defineProperty;var To=(e,t,n)=>t in e?So(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Oe=(e,t,n)=>(To(e,typeof t!="symbol"?t+"":t,n),n);import{S as ct,i as ht,s as dt,k as he,l as de,m as P,h as k,n as d,b as Z,B as Ne,I as lt,J as W,g as He,t as ye,d as Ve,f as oe,K as et,L as fi,o as fr,M as ma,N as Ye,e as pe,O as ci,v as ze,w as Le,x as je,y as De,z as Re,q as ke,r as Ae,G as F,u as We,A as Gn,a as Se,c as Te,P as $,Q as ee,p as xt,R as Hr,T as En,U as cr,V as Rt,W as Mo,C as No,D as Co,E as Lo,F as Do,X as hi,Y as Ni,Z as Ci,_ as di,$ as ga,a0 as Ro,a1 as Li,a2 as Oo,a3 as Fo,a4 as Ho,a5 as Xe,a6 as Vo,H as Ot,a7 as Ke,a8 as Po,a9 as tn,aa as Bo,ab as Go,ac as zo,ad as Uo,ae as Yo,af as Mn}from"../../chunks/index-72a7da8c.js";import{w as _i,b as dn}from"../../chunks/paths-13e8d3f3.js";function zn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pa(e){let t,n,r;e.length!==2?(t=zn,n=(o,s)=>zn(e(o),s),r=(o,s)=>e(o)-s):(t=e===zn||e===Xo?e:xo,n=e,r=e);function i(o,s,u=0,f=o.length){if(u<f){if(t(s,s)!==0)return f;do{const c=u+f>>>1;n(o[c],s)<0?u=c+1:f=c}while(u<f)}return u}function a(o,s,u=0,f=o.length){if(u<f){if(t(s,s)!==0)return f;do{const c=u+f>>>1;n(o[c],s)<=0?u=c+1:f=c}while(u<f)}return u}function l(o,s,u=0,f=o.length){const c=i(o,s,u,f-1);return c>u&&r(o[c-1],s)>-r(o[c],s)?c-1:c}return{left:i,center:l,right:a}}function xo(){return 0}function qo(e){return e===null?NaN:+e}const Ko=pa(zn),Wo=Ko.right;pa(qo).center;const Zo=Wo;function ya(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Vr extends Map{constructor(t,n=jo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Di(this,t))}has(t){return super.has(Di(this,t))}set(t,n){return super.set(Jo(this,t),n)}delete(t){return super.delete(Qo(this,t))}}function Di({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Jo({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Qo({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function jo(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Zn(e){return e}function Pr(e,...t){return mi(e,Zn,Zn,t)}function Br(e,t,...n){return mi(e,Zn,t,n)}function Ri(e,...t){return mi(e,Zn,$o,t)}function $o(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function mi(e,t,n,r){return function i(a,l){if(l>=r.length)return n(a);const o=new Vr,s=r[l++];let u=-1;for(const f of a){const c=s(f,++u,a),h=o.get(c);h?h.push(f):o.set(c,[f])}for(const[f,c]of o)o.set(f,i(c,l));return t(o)}(e,0)}var Gr=Math.sqrt(50),zr=Math.sqrt(10),Ur=Math.sqrt(2);function es(e,t,n){var r,i=-1,a,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=va(e,t,n))===0||!isFinite(o))return[];if(o>0){let s=Math.round(e/o),u=Math.round(t/o);for(s*o<e&&++s,u*o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)*o}else{o=-o;let s=Math.round(e*o),u=Math.round(t*o);for(s/o<e&&++s,u/o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)/o}return r&&l.reverse(),l}function va(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Gr?10:a>=zr?5:a>=Ur?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Gr?10:a>=zr?5:a>=Ur?2:1)}function ts(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Gr?i*=10:a>=zr?i*=5:a>=Ur&&(i*=2),t<e?-i:i}function pn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Oi(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Jn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function ns(e){return e}var kr=1,Un=2,Yr=3,_n=4,Fi=1e-6;function rs(e){return"translate("+e+",0)"}function is(e){return"translate(0,"+e+")"}function ls(e){return t=>+e(t)}function as(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function os(){return!this.__axis}function gi(e,t){var n=[],r=null,i=null,a=6,l=6,o=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===kr||e===_n?-1:1,f=e===_n||e===Un?"x":"y",c=e===kr||e===Yr?rs:is;function h(_){var p=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,w=i==null?t.tickFormat?t.tickFormat.apply(t,n):ns:i,g=Math.max(a,0)+o,y=t.range(),E=+y[0]+s,b=+y[y.length-1]+s,m=(t.bandwidth?as:ls)(t.copy(),s),A=_.selection?_.selection():_,x=A.selectAll(".domain").data([null]),V=A.selectAll(".tick").data(p,t).order(),O=V.exit(),z=V.enter().append("g").attr("class","tick"),H=V.select("line"),M=V.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),V=V.merge(z),H=H.merge(z.append("line").attr("stroke","currentColor").attr(f+"2",u*a)),M=M.merge(z.append("text").attr("fill","currentColor").attr(f,u*g).attr("dy",e===kr?"0em":e===Yr?"0.71em":"0.32em")),_!==A&&(x=x.transition(_),V=V.transition(_),H=H.transition(_),M=M.transition(_),O=O.transition(_).attr("opacity",Fi).attr("transform",function(K){return isFinite(K=m(K))?c(K+s):this.getAttribute("transform")}),z.attr("opacity",Fi).attr("transform",function(K){var G=this.parentNode.__axis;return c((G&&isFinite(G=G(K))?G:m(K))+s)})),O.remove(),x.attr("d",e===_n||e===Un?l?"M"+u*l+","+E+"H"+s+"V"+b+"H"+u*l:"M"+s+","+E+"V"+b:l?"M"+E+","+u*l+"V"+s+"H"+b+"V"+u*l:"M"+E+","+s+"H"+b),V.attr("opacity",1).attr("transform",function(K){return c(m(K)+s)}),H.attr(f+"2",u*a),M.attr(f,u*g).text(w),A.filter(os).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Un?"start":e===_n?"end":"middle"),A.each(function(){this.__axis=m})}return h.scale=function(_){return arguments.length?(t=_,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),h):n.slice()},h.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),h):r&&r.slice()},h.tickFormat=function(_){return arguments.length?(i=_,h):i},h.tickSize=function(_){return arguments.length?(a=l=+_,h):a},h.tickSizeInner=function(_){return arguments.length?(a=+_,h):a},h.tickSizeOuter=function(_){return arguments.length?(l=+_,h):l},h.tickPadding=function(_){return arguments.length?(o=+_,h):o},h.offset=function(_){return arguments.length?(s=+_,h):s},h}function ss(e){return gi(Un,e)}function wa(e){return gi(Yr,e)}function us(e){return gi(_n,e)}var fs={value:()=>{}};function pi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yn(n)}function Yn(e){this._=e}function cs(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yn.prototype=pi.prototype={constructor:Yn,on:function(e,t){var n=this._,r=cs(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=hs(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=Hi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Hi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function hs(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Hi(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=fs,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xr="http://www.w3.org/1999/xhtml";const Vi={svg:"http://www.w3.org/2000/svg",xhtml:Xr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Vi.hasOwnProperty(t)?{space:Vi[t],local:e}:e}function ds(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xr&&t.documentElement.namespaceURI===Xr?t.createElement(e):t.createElementNS(n,e)}}function _s(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ba(e){var t=hr(e);return(t.local?_s:ds)(t)}function ms(){}function yi(e){return e==null?ms:function(){return this.querySelector(e)}}function gs(e){typeof e!="function"&&(e=yi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=new Array(l),s,u,f=0;f<l;++f)(s=a[f])&&(u=e.call(s,s.__data__,f,a))&&("__data__"in s&&(u.__data__=s.__data__),o[f]=u);return new $e(r,this._parents)}function ps(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ys(){return[]}function ka(e){return e==null?ys:function(){return this.querySelectorAll(e)}}function vs(e){return function(){return ps(e.apply(this,arguments))}}function ws(e){typeof e=="function"?e=vs(e):e=ka(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new $e(r,i)}function Aa(e){return function(){return this.matches(e)}}function Ea(e){return function(t){return t.matches(e)}}var bs=Array.prototype.find;function ks(e){return function(){return bs.call(this.children,e)}}function As(){return this.firstElementChild}function Es(e){return this.select(e==null?As:ks(typeof e=="function"?e:Ea(e)))}var Is=Array.prototype.filter;function Ss(){return Array.from(this.children)}function Ts(e){return function(){return Is.call(this.children,e)}}function Ms(e){return this.selectAll(e==null?Ss:Ts(typeof e=="function"?e:Ea(e)))}function Ns(e){typeof e!="function"&&(e=Aa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new $e(r,this._parents)}function Ia(e){return new Array(e.length)}function Cs(){return new $e(this._enter||this._groups.map(Ia),this._parents)}function Qn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Qn.prototype={constructor:Qn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ls(e){return function(){return e}}function Ds(e,t,n,r,i,a){for(var l=0,o,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new Qn(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function Rs(e,t,n,r,i,a,l){var o,s,u=new Map,f=t.length,c=a.length,h=new Array(f),_;for(o=0;o<f;++o)(s=t[o])&&(h[o]=_=l.call(s,s.__data__,o,t)+"",u.has(_)?i[o]=s:u.set(_,s));for(o=0;o<c;++o)_=l.call(e,a[o],o,a)+"",(s=u.get(_))?(r[o]=s,s.__data__=a[o],u.delete(_)):n[o]=new Qn(e,a[o]);for(o=0;o<f;++o)(s=t[o])&&u.get(h[o])===s&&(i[o]=s)}function Os(e){return e.__data__}function Fs(e,t){if(!arguments.length)return Array.from(this,Os);var n=t?Rs:Ds,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ls(e));for(var a=i.length,l=new Array(a),o=new Array(a),s=new Array(a),u=0;u<a;++u){var f=r[u],c=i[u],h=c.length,_=Hs(e.call(f,f&&f.__data__,u,r)),p=_.length,w=o[u]=new Array(p),g=l[u]=new Array(p),y=s[u]=new Array(h);n(f,c,w,g,y,_,t);for(var E=0,b=0,m,A;E<p;++E)if(m=w[E]){for(E>=b&&(b=E+1);!(A=g[b])&&++b<p;);m._next=A||null}}return l=new $e(l,r),l._enter=o,l._exit=s,l}function Hs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vs(){return new $e(this._exit||this._groups.map(Ia),this._parents)}function Ps(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Bs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),o=new Array(i),s=0;s<l;++s)for(var u=n[s],f=r[s],c=u.length,h=o[s]=new Array(c),_,p=0;p<c;++p)(_=u[p]||f[p])&&(h[p]=_);for(;s<i;++s)o[s]=n[s];return new $e(o,this._parents)}function Gs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function zs(e){e||(e=Us);function t(c,h){return c&&h?e(c.__data__,h.__data__):!c-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],o=l.length,s=i[a]=new Array(o),u,f=0;f<o;++f)(u=l[f])&&(s[f]=u);s.sort(t)}return new $e(i,this._parents).order()}function Us(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ys(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Xs(){return Array.from(this)}function xs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function qs(){let e=0;for(const t of this)++e;return e}function Ks(){return!this.node()}function Ws(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,o;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function Zs(e){return function(){this.removeAttribute(e)}}function Js(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qs(e,t){return function(){this.setAttribute(e,t)}}function js(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $s(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function eu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function tu(e,t){var n=hr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Js:Zs:typeof t=="function"?n.local?eu:$s:n.local?js:Qs)(n,t))}function Sa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function nu(e){return function(){this.style.removeProperty(e)}}function ru(e,t,n){return function(){this.style.setProperty(e,t,n)}}function iu(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function lu(e,t,n){return arguments.length>1?this.each((t==null?nu:typeof t=="function"?iu:ru)(e,t,n==null?"":n)):rn(this.node(),e)}function rn(e,t){return e.style.getPropertyValue(t)||Sa(e).getComputedStyle(e,null).getPropertyValue(t)}function au(e){return function(){delete this[e]}}function ou(e,t){return function(){this[e]=t}}function su(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function uu(e,t){return arguments.length>1?this.each((t==null?au:typeof t=="function"?su:ou)(e,t)):this.node()[e]}function Ta(e){return e.trim().split(/^|\s+/)}function vi(e){return e.classList||new Ma(e)}function Ma(e){this._node=e,this._names=Ta(e.getAttribute("class")||"")}Ma.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Na(e,t){for(var n=vi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ca(e,t){for(var n=vi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function fu(e){return function(){Na(this,e)}}function cu(e){return function(){Ca(this,e)}}function hu(e,t){return function(){(t.apply(this,arguments)?Na:Ca)(this,e)}}function du(e,t){var n=Ta(e+"");if(arguments.length<2){for(var r=vi(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?hu:t?fu:cu)(n,t))}function _u(){this.textContent=""}function mu(e){return function(){this.textContent=e}}function gu(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function pu(e){return arguments.length?this.each(e==null?_u:(typeof e=="function"?gu:mu)(e)):this.node().textContent}function yu(){this.innerHTML=""}function vu(e){return function(){this.innerHTML=e}}function wu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function bu(e){return arguments.length?this.each(e==null?yu:(typeof e=="function"?wu:vu)(e)):this.node().innerHTML}function ku(){this.nextSibling&&this.parentNode.appendChild(this)}function Au(){return this.each(ku)}function Eu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Iu(){return this.each(Eu)}function Su(e){var t=typeof e=="function"?e:ba(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tu(){return null}function Mu(e,t){var n=typeof e=="function"?e:ba(e),r=t==null?Tu:typeof t=="function"?t:yi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Nu(){var e=this.parentNode;e&&e.removeChild(this)}function Cu(){return this.each(Nu)}function Lu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Du(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ru(e){return this.select(e?Du:Lu)}function Ou(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Fu(e){return function(t){e.call(this,t,this.__data__)}}function Hu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Vu(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Pu(e,t,n){return function(){var r=this.__on,i,a=Fu(t);if(r){for(var l=0,o=r.length;l<o;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Bu(e,t,n){var r=Hu(e+""),i,a=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var s=0,u=o.length,f;s<u;++s)for(i=0,f=o[s];i<a;++i)if((l=r[i]).type===f.type&&l.name===f.name)return f.value}return}for(o=t?Pu:Vu,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function La(e,t,n){var r=Sa(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Gu(e,t){return function(){return La(this,e,t)}}function zu(e,t){return function(){return La(this,e,t.apply(this,arguments))}}function Uu(e,t){return this.each((typeof t=="function"?zu:Gu)(e,t))}function*Yu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var Da=[null];function $e(e,t){this._groups=e,this._parents=t}function In(){return new $e([[document.documentElement]],Da)}function Xu(){return this}$e.prototype=In.prototype={constructor:$e,select:gs,selectAll:ws,selectChild:Es,selectChildren:Ms,filter:Ns,data:Fs,enter:Cs,exit:Vs,join:Ps,merge:Bs,selection:Xu,order:Gs,sort:zs,call:Ys,nodes:Xs,node:xs,size:qs,empty:Ks,each:Ws,attr:tu,style:lu,property:uu,classed:du,text:pu,html:bu,raise:Au,lower:Iu,append:Su,insert:Mu,remove:Cu,clone:Ru,datum:Ou,on:Bu,dispatch:Uu,[Symbol.iterator]:Yu};function we(e){return typeof e=="string"?new $e([[document.querySelector(e)]],[document.documentElement]):new $e([[e]],Da)}function xu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pi(e,t){if(e=xu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const xr={capture:!0,passive:!1};function qr(e){e.preventDefault(),e.stopImmediatePropagation()}function qu(e){var t=e.document.documentElement,n=we(e).on("dragstart.drag",qr,xr);"onselectstart"in t?n.on("selectstart.drag",qr,xr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ku(e,t){var n=e.document.documentElement,r=we(e).on("dragstart.drag",null);t&&(r.on("click.drag",qr,xr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function wi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ra(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Sn(){}var wn=.7,jn=1/wn,nn="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wu=/^#([0-9a-f]{3,8})$/,Zu=new RegExp(`^rgb\\(${nn},${nn},${nn}\\)$`),Ju=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),Qu=new RegExp(`^rgba\\(${nn},${nn},${nn},${bn}\\)$`),ju=new RegExp(`^rgba\\(${vt},${vt},${vt},${bn}\\)$`),$u=new RegExp(`^hsl\\(${bn},${vt},${vt}\\)$`),ef=new RegExp(`^hsla\\(${bn},${vt},${vt},${bn}\\)$`),Bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wi(Sn,zt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gi,formatHex:Gi,formatHex8:tf,formatHsl:nf,formatRgb:zi,toString:zi});function Gi(){return this.rgb().formatHex()}function tf(){return this.rgb().formatHex8()}function nf(){return Oa(this).formatHsl()}function zi(){return this.rgb().formatRgb()}function zt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ui(t):n===3?new Je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Nn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Nn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Zu.exec(e))?new Je(t[1],t[2],t[3],1):(t=Ju.exec(e))?new Je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Qu.exec(e))?Nn(t[1],t[2],t[3],t[4]):(t=ju.exec(e))?Nn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$u.exec(e))?xi(t[1],t[2]/100,t[3]/100,1):(t=ef.exec(e))?xi(t[1],t[2]/100,t[3]/100,t[4]):Bi.hasOwnProperty(e)?Ui(Bi[e]):e==="transparent"?new Je(NaN,NaN,NaN,0):null}function Ui(e){return new Je(e>>16&255,e>>8&255,e&255,1)}function Nn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Je(e,t,n,r)}function rf(e){return e instanceof Sn||(e=zt(e)),e?(e=e.rgb(),new Je(e.r,e.g,e.b,e.opacity)):new Je}function Kr(e,t,n,r){return arguments.length===1?rf(e):new Je(e,t,n,r==null?1:r)}function Je(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}wi(Je,Kr,Ra(Sn,{brighter(e){return e=e==null?jn:Math.pow(jn,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wn:Math.pow(wn,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Je(Gt(this.r),Gt(this.g),Gt(this.b),$n(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yi,formatHex:Yi,formatHex8:lf,formatRgb:Xi,toString:Xi}));function Yi(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}`}function lf(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}${Bt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xi(){const e=$n(this.opacity);return`${e===1?"rgb(":"rgba("}${Gt(this.r)}, ${Gt(this.g)}, ${Gt(this.b)}${e===1?")":`, ${e})`}`}function $n(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bt(e){return e=Gt(e),(e<16?"0":"")+e.toString(16)}function xi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ft(e,t,n,r)}function Oa(e){if(e instanceof ft)return new ft(e.h,e.s,e.l,e.opacity);if(e instanceof Sn||(e=zt(e)),!e)return new ft;if(e instanceof ft)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,o=a-i,s=(a+i)/2;return o?(t===a?l=(n-r)/o+(n<r)*6:n===a?l=(r-t)/o+2:l=(t-n)/o+4,o/=s<.5?a+i:2-a-i,l*=60):o=s>0&&s<1?0:l,new ft(l,o,s,e.opacity)}function af(e,t,n,r){return arguments.length===1?Oa(e):new ft(e,t,n,r==null?1:r)}function ft(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}wi(ft,af,Ra(Sn,{brighter(e){return e=e==null?jn:Math.pow(jn,e),new ft(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wn:Math.pow(wn,e),new ft(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Je(Ar(e>=240?e-240:e+120,i,r),Ar(e,i,r),Ar(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ft(qi(this.h),Cn(this.s),Cn(this.l),$n(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$n(this.opacity);return`${e===1?"hsl(":"hsla("}${qi(this.h)}, ${Cn(this.s)*100}%, ${Cn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qi(e){return e=(e||0)%360,e<0?e+360:e}function Cn(e){return Math.max(0,Math.min(1,e||0))}function Ar(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bi=e=>()=>e;function of(e,t){return function(n){return e+n*t}}function sf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function uf(e){return(e=+e)==1?Fa:function(t,n){return n-t?sf(t,n,e):bi(isNaN(t)?n:t)}}function Fa(e,t){var n=t-e;return n?of(e,n):bi(isNaN(e)?t:e)}const er=function e(t){var n=uf(t);function r(i,a){var l=n((i=Kr(i)).r,(a=Kr(a)).r),o=n(i.g,a.g),s=n(i.b,a.b),u=Fa(i.opacity,a.opacity);return function(f){return i.r=l(f),i.g=o(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function ff(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function cf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hf(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=dr(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(o){for(l=0;l<r;++l)a[l]=i[l](o);return a}}function df(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ut(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _f(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=dr(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Wr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Er=new RegExp(Wr.source,"g");function mf(e){return function(){return e}}function gf(e){return function(t){return e(t)+""}}function Ha(e,t){var n=Wr.lastIndex=Er.lastIndex=0,r,i,a,l=-1,o=[],s=[];for(e=e+"",t=t+"";(r=Wr.exec(e))&&(i=Er.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[l]?o[l]+=a:o[++l]=a),(r=r[0])===(i=i[0])?o[l]?o[l]+=i:o[++l]=i:(o[++l]=null,s.push({i:l,x:ut(r,i)})),n=Er.lastIndex;return n<t.length&&(a=t.slice(n),o[l]?o[l]+=a:o[++l]=a),o.length<2?s[0]?gf(s[0].x):mf(t):(t=s.length,function(u){for(var f=0,c;f<t;++f)o[(c=s[f]).i]=c.x(u);return o.join("")})}function dr(e,t){var n=typeof t,r;return t==null||n==="boolean"?bi(t):(n==="number"?ut:n==="string"?(r=zt(t))?(t=r,er):Ha:t instanceof zt?er:t instanceof Date?df:cf(t)?ff:Array.isArray(t)?hf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_f:ut)(e,t)}function pf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Ki=180/Math.PI,Zr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Va(e,t,n,r,i,a){var l,o,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,s/=o),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ki,skewX:Math.atan(s)*Ki,scaleX:l,scaleY:o}}var Ln;function yf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Zr:Va(t.a,t.b,t.c,t.d,t.e,t.f)}function vf(e){return e==null||(Ln||(Ln=document.createElementNS("http://www.w3.org/2000/svg","g")),Ln.setAttribute("transform",e),!(e=Ln.transform.baseVal.consolidate()))?Zr:(e=e.matrix,Va(e.a,e.b,e.c,e.d,e.e,e.f))}function Pa(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,f,c,h,_,p){if(u!==c||f!==h){var w=_.push("translate(",null,t,null,n);p.push({i:w-4,x:ut(u,c)},{i:w-2,x:ut(f,h)})}else(c||h)&&_.push("translate("+c+t+h+n)}function l(u,f,c,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:ut(u,f)})):f&&c.push(i(c)+"rotate("+f+r)}function o(u,f,c,h){u!==f?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:ut(u,f)}):f&&c.push(i(c)+"skewX("+f+r)}function s(u,f,c,h,_,p){if(u!==c||f!==h){var w=_.push(i(_)+"scale(",null,",",null,")");p.push({i:w-4,x:ut(u,c)},{i:w-2,x:ut(f,h)})}else(c!==1||h!==1)&&_.push(i(_)+"scale("+c+","+h+")")}return function(u,f){var c=[],h=[];return u=e(u),f=e(f),a(u.translateX,u.translateY,f.translateX,f.translateY,c,h),l(u.rotate,f.rotate,c,h),o(u.skewX,f.skewX,c,h),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,h),u=f=null,function(_){for(var p=-1,w=h.length,g;++p<w;)c[(g=h[p]).i]=g.x(_);return c.join("")}}}var wf=Pa(yf,"px, ","px)","deg)"),bf=Pa(vf,", ",")",")"),ln=0,mn=0,sn=0,Ba=1e3,tr,gn,nr=0,Ut=0,_r=0,kn=typeof performance=="object"&&performance.now?performance:Date,Ga=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ki(){return Ut||(Ga(kf),Ut=kn.now()+_r)}function kf(){Ut=0}function rr(){this._call=this._time=this._next=null}rr.prototype=za.prototype={constructor:rr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ki():+n)+(t==null?0:+t),!this._next&&gn!==this&&(gn?gn._next=this:tr=this,gn=this),this._call=e,this._time=n,Jr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jr())}};function za(e,t,n){var r=new rr;return r.restart(e,t,n),r}function Af(){ki(),++ln;for(var e=tr,t;e;)(t=Ut-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ln}function Wi(){Ut=(nr=kn.now())+_r,ln=mn=0;try{Af()}finally{ln=0,If(),Ut=0}}function Ef(){var e=kn.now(),t=e-nr;t>Ba&&(_r-=t,nr=e)}function If(){for(var e,t=tr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:tr=n);gn=e,Jr(r)}function Jr(e){if(!ln){mn&&(mn=clearTimeout(mn));var t=e-Ut;t>24?(e<1/0&&(mn=setTimeout(Wi,e-kn.now()-_r)),sn&&(sn=clearInterval(sn))):(sn||(nr=kn.now(),sn=setInterval(Ef,Ba)),ln=1,Ga(Wi))}}function Zi(e,t,n){var r=new rr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Sf=pi("start","end","cancel","interrupt"),Tf=[],Ua=0,Ji=1,Qr=2,Xn=3,Qi=4,jr=5,xn=6;function mr(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Mf(e,n,{name:t,index:r,group:i,on:Sf,tween:Tf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ua})}function Ai(e,t){var n=_t(e,t);if(n.state>Ua)throw new Error("too late; already scheduled");return n}function wt(e,t){var n=_t(e,t);if(n.state>Xn)throw new Error("too late; already running");return n}function _t(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=za(a,0,n.time);function a(u){n.state=Ji,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,c,h,_;if(n.state!==Ji)return s();for(f in r)if(_=r[f],_.name===n.name){if(_.state===Xn)return Zi(l);_.state===Qi?(_.state=xn,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[f]):+f<t&&(_.state=xn,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[f])}if(Zi(function(){n.state===Xn&&(n.state=Qi,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Qr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Qr){for(n.state=Xn,i=new Array(h=n.tween.length),f=0,c=-1;f<h;++f)(_=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=_);i.length=c+1}}function o(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=jr,1),c=-1,h=i.length;++c<h;)i[c].call(e,f);n.state===jr&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=xn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function $r(e,t){var n=e.__transition,r,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>Qr&&r.state<jr,r.state=xn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function Nf(e){return this.each(function(){$r(this,e)})}function Cf(e,t){var n,r;return function(){var i=wt(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,o=r.length;l<o;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function Lf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=wt(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var o={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=o;break}s===u&&i.push(o)}a.tween=i}}function Df(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=_t(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?Cf:Lf)(n,e,t))}function Ei(e,t,n){var r=e._id;return e.each(function(){var i=wt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return _t(i,r).value[t]}}function Ya(e,t){var n;return(typeof t=="number"?ut:t instanceof zt?er:(n=zt(t))?(t=n,er):Ha)(e,t)}function Rf(e){return function(){this.removeAttribute(e)}}function Of(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ff(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function Hf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function Vf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Pf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Bf(e,t){var n=hr(e),r=n==="transform"?bf:Ya;return this.attrTween(e,typeof t=="function"?(n.local?Pf:Vf)(n,r,Ei(this,"attr."+e,t)):t==null?(n.local?Of:Rf)(n):(n.local?Hf:Ff)(n,r,t))}function Gf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function zf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Uf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&zf(e,a)),n}return i._value=t,i}function Yf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Gf(e,a)),n}return i._value=t,i}function Xf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=hr(e);return this.tween(n,(r.local?Uf:Yf)(r,t))}function xf(e,t){return function(){Ai(this,e).delay=+t.apply(this,arguments)}}function qf(e,t){return t=+t,function(){Ai(this,e).delay=t}}function Kf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xf:qf)(t,e)):_t(this.node(),t).delay}function Wf(e,t){return function(){wt(this,e).duration=+t.apply(this,arguments)}}function Zf(e,t){return t=+t,function(){wt(this,e).duration=t}}function Jf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Wf:Zf)(t,e)):_t(this.node(),t).duration}function Qf(e,t){if(typeof t!="function")throw new Error;return function(){wt(this,e).ease=t}}function jf(e){var t=this._id;return arguments.length?this.each(Qf(t,e)):_t(this.node(),t).ease}function $f(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wt(this,e).ease=n}}function ec(e){if(typeof e!="function")throw new Error;return this.each($f(this._id,e))}function tc(e){typeof e!="function"&&(e=Aa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new Nt(r,this._parents,this._name,this._id)}function nc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),o=0;o<a;++o)for(var s=t[o],u=n[o],f=s.length,c=l[o]=new Array(f),h,_=0;_<f;++_)(h=s[_]||u[_])&&(c[_]=h);for(;o<r;++o)l[o]=t[o];return new Nt(l,this._parents,this._name,this._id)}function rc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ic(e,t,n){var r,i,a=rc(t)?Ai:wt;return function(){var l=a(this,e),o=l.on;o!==r&&(i=(r=o).copy()).on(t,n),l.on=i}}function lc(e,t){var n=this._id;return arguments.length<2?_t(this.node(),n).on.on(e):this.each(ic(n,e,t))}function ac(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function oc(){return this.on("end.remove",ac(this._id))}function sc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=yi(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var o=r[l],s=o.length,u=a[l]=new Array(s),f,c,h=0;h<s;++h)(f=o[h])&&(c=e.call(f,f.__data__,h,o))&&("__data__"in f&&(c.__data__=f.__data__),u[h]=c,mr(u[h],t,n,h,u,_t(f,n)));return new Nt(a,this._parents,t,n)}function uc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ka(e));for(var r=this._groups,i=r.length,a=[],l=[],o=0;o<i;++o)for(var s=r[o],u=s.length,f,c=0;c<u;++c)if(f=s[c]){for(var h=e.call(f,f.__data__,c,s),_,p=_t(f,n),w=0,g=h.length;w<g;++w)(_=h[w])&&mr(_,t,n,w,h,p);a.push(h),l.push(f)}return new Nt(a,l,t,n)}var fc=In.prototype.constructor;function cc(){return new fc(this._groups,this._parents)}function hc(e,t){var n,r,i;return function(){var a=rn(this,e),l=(this.style.removeProperty(e),rn(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function Xa(e){return function(){this.style.removeProperty(e)}}function dc(e,t,n){var r,i=n+"",a;return function(){var l=rn(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function _c(e,t,n){var r,i,a;return function(){var l=rn(this,e),o=n(this),s=o+"";return o==null&&(s=o=(this.style.removeProperty(e),rn(this,e))),l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o))}}function mc(e,t){var n,r,i,a="style."+t,l="end."+a,o;return function(){var s=wt(this,e),u=s.on,f=s.value[a]==null?o||(o=Xa(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(l,i=f),s.on=r}}function gc(e,t,n){var r=(e+="")=="transform"?wf:Ya;return t==null?this.styleTween(e,hc(e,r)).on("end.style."+e,Xa(e)):typeof t=="function"?this.styleTween(e,_c(e,r,Ei(this,"style."+e,t))).each(mc(this._id,e)):this.styleTween(e,dc(e,r,t),n).on("end.style."+e,null)}function pc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function yc(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&pc(e,l,n)),r}return a._value=t,a}function vc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,yc(e,t,n==null?"":n))}function wc(e){return function(){this.textContent=e}}function bc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function kc(e){return this.tween("text",typeof e=="function"?bc(Ei(this,"text",e)):wc(e==null?"":e+""))}function Ac(e){return function(t){this.textContent=e.call(this,t)}}function Ec(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ac(i)),t}return r._value=e,r}function Ic(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ec(e))}function Sc(){for(var e=this._name,t=this._id,n=xa(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)if(s=l[u]){var f=_t(s,t);mr(s,e,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Nt(r,this._parents,e,n)}function Tc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var o={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var u=wt(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(s)),u.on=t}),i===0&&a()})}var Mc=0;function Nt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xa(){return++Mc}var At=In.prototype;Nt.prototype={constructor:Nt,select:sc,selectAll:uc,selectChild:At.selectChild,selectChildren:At.selectChildren,filter:tc,merge:nc,selection:cc,transition:Sc,call:At.call,nodes:At.nodes,node:At.node,size:At.size,empty:At.empty,each:At.each,on:lc,attr:Bf,attrTween:Xf,style:gc,styleTween:vc,text:kc,textTween:Ic,remove:oc,tween:Df,delay:Kf,duration:Jf,ease:jf,easeVarying:ec,end:Tc,[Symbol.iterator]:At[Symbol.iterator]};function Nc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Cc={time:null,delay:0,duration:250,ease:Nc};function Lc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Dc(e){var t,n;e instanceof Nt?(t=e._id,e=e._name):(t=xa(),(n=Cc).time=ki(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&mr(s,e,t,u,l,n||Lc(s,t));return new Nt(r,this._parents,e,t)}In.prototype.interrupt=Nf;In.prototype.transition=Dc;const Ir=e=>()=>e;function Rc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Oc(e){e.stopImmediatePropagation()}function Sr(e){e.preventDefault(),e.stopImmediatePropagation()}var ji={name:"drag"},Tr={name:"space"},qt={name:"handle"},Kt={name:"center"};const{abs:$i,max:Be,min:Ge}=Math;function el(e){return[+e[0],+e[1]]}function tl(e){return[el(e[0]),el(e[1])]}var qn={name:"x",handles:["w","e"].map(ir),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Mr={name:"y",handles:["n","s"].map(ir),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Et={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},nl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},rl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Hc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ir(e){return{type:e}}function Vc(e){return!e.ctrlKey&&!e.button}function Pc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Bc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Nr(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Gc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function zc(){return Uc(qn)}function Uc(e){var t=Pc,n=Vc,r=Bc,i=!0,a=pi("start","brush","end"),l=6,o;function s(g){var y=g.property("__brush",w).selectAll(".overlay").data([ir("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Et.overlay).merge(y).each(function(){var b=Nr(this).extent;we(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([ir("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Et.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var E=g.selectAll(".handle").data(e.handles,function(b){return b.type});E.exit().remove(),E.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Et[b.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(g,y,E){g.tween?g.on("start.brush",function(b){f(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){f(this,arguments).end(b)}).tween("brush",function(){var b=this,m=b.__brush,A=f(b,arguments),x=m.selection,V=e.input(typeof y=="function"?y.apply(this,arguments):y,m.extent),O=dr(x,V);function z(H){m.selection=H===1&&V===null?null:O(H),u.call(b),A.brush()}return x!==null&&V!==null?z:z(1)}):g.each(function(){var b=this,m=arguments,A=b.__brush,x=e.input(typeof y=="function"?y.apply(b,m):y,A.extent),V=f(b,m).beforestart();$r(b),A.selection=x===null?null:x,u.call(b),V.start(E).brush(E).end(E)})},s.clear=function(g,y){s.move(g,null,y)};function u(){var g=we(this),y=Nr(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(E){return E.type[E.type.length-1]==="e"?y[1][0]-l/2:y[0][0]-l/2}).attr("y",function(E){return E.type[0]==="s"?y[1][1]-l/2:y[0][1]-l/2}).attr("width",function(E){return E.type==="n"||E.type==="s"?y[1][0]-y[0][0]+l:l}).attr("height",function(E){return E.type==="e"||E.type==="w"?y[1][1]-y[0][1]+l:l})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(g,y,E){var b=g.__brush.emitter;return b&&(!E||!b.clean)?b:new c(g,y,E)}function c(g,y,E){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=E}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,E){var b=we(this.that).datum();a.call(g,this.that,new Rc(g,{sourceEvent:y,target:s,selection:e.output(this.state.selection),mode:E,dispatch:a}),b)}};function h(g){if(o&&!g.touches||!n.apply(this,arguments))return;var y=this,E=g.target.__data__.type,b=(i&&g.metaKey?E="overlay":E)==="selection"?ji:i&&g.altKey?Kt:qt,m=e===Mr?null:Fc[E],A=e===qn?null:Hc[E],x=Nr(y),V=x.extent,O=x.selection,z=V[0][0],H,M,K=V[0][1],G,X,T=V[1][0],L,te,_e=V[1][1],R,I,U=0,q=0,ue,fe=m&&A&&i&&g.shiftKey,me,be,ie=Array.from(g.touches||[g],re=>{const C=re.identifier;return re=Pi(re,y),re.point0=re.slice(),re.identifier=C,re});$r(y);var D=f(y,arguments,!0).beforestart();if(E==="overlay"){O&&(ue=!0);const re=[ie[0],ie[1]||ie[0]];x.selection=O=[[H=e===Mr?z:Ge(re[0][0],re[1][0]),G=e===qn?K:Ge(re[0][1],re[1][1])],[L=e===Mr?T:Be(re[0][0],re[1][0]),R=e===qn?_e:Be(re[0][1],re[1][1])]],ie.length>1&&S(g)}else H=O[0][0],G=O[0][1],L=O[1][0],R=O[1][1];M=H,X=G,te=L,I=R;var J=we(y).attr("pointer-events","none"),N=J.selectAll(".overlay").attr("cursor",Et[E]);if(g.touches)D.moved=ne,D.ended=Y;else{var Q=we(g.view).on("mousemove.brush",ne,!0).on("mouseup.brush",Y,!0);i&&Q.on("keydown.brush",ge,!0).on("keyup.brush",Me,!0),qu(g.view)}u.call(y),D.start(g,b.name);function ne(re){for(const C of re.changedTouches||[re])for(const ce of ie)ce.identifier===C.identifier&&(ce.cur=Pi(C,y));if(fe&&!me&&!be&&ie.length===1){const C=ie[0];$i(C.cur[0]-C[0])>$i(C.cur[1]-C[1])?be=!0:me=!0}for(const C of ie)C.cur&&(C[0]=C.cur[0],C[1]=C.cur[1]);ue=!0,Sr(re),S(re)}function S(re){const C=ie[0],ce=C.point0;var B;switch(U=C[0]-ce[0],q=C[1]-ce[1],b){case Tr:case ji:{m&&(U=Be(z-H,Ge(T-L,U)),M=H+U,te=L+U),A&&(q=Be(K-G,Ge(_e-R,q)),X=G+q,I=R+q);break}case qt:{ie[1]?(m&&(M=Be(z,Ge(T,ie[0][0])),te=Be(z,Ge(T,ie[1][0])),m=1),A&&(X=Be(K,Ge(_e,ie[0][1])),I=Be(K,Ge(_e,ie[1][1])),A=1)):(m<0?(U=Be(z-H,Ge(T-H,U)),M=H+U,te=L):m>0&&(U=Be(z-L,Ge(T-L,U)),M=H,te=L+U),A<0?(q=Be(K-G,Ge(_e-G,q)),X=G+q,I=R):A>0&&(q=Be(K-R,Ge(_e-R,q)),X=G,I=R+q));break}case Kt:{m&&(M=Be(z,Ge(T,H-U*m)),te=Be(z,Ge(T,L+U*m))),A&&(X=Be(K,Ge(_e,G-q*A)),I=Be(K,Ge(_e,R+q*A)));break}}te<M&&(m*=-1,B=H,H=L,L=B,B=M,M=te,te=B,E in nl&&N.attr("cursor",Et[E=nl[E]])),I<X&&(A*=-1,B=G,G=R,R=B,B=X,X=I,I=B,E in rl&&N.attr("cursor",Et[E=rl[E]])),x.selection&&(O=x.selection),me&&(M=O[0][0],te=O[1][0]),be&&(X=O[0][1],I=O[1][1]),(O[0][0]!==M||O[0][1]!==X||O[1][0]!==te||O[1][1]!==I)&&(x.selection=[[M,X],[te,I]],u.call(y),D.brush(re,b.name))}function Y(re){if(Oc(re),re.touches){if(re.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Ku(re.view,ue),Q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);J.attr("pointer-events","all"),N.attr("cursor",Et.overlay),x.selection&&(O=x.selection),Gc(O)&&(x.selection=null,u.call(y)),D.end(re,b.name)}function ge(re){switch(re.keyCode){case 16:{fe=m&&A;break}case 18:{b===qt&&(m&&(L=te-U*m,H=M+U*m),A&&(R=I-q*A,G=X+q*A),b=Kt,S(re));break}case 32:{(b===qt||b===Kt)&&(m<0?L=te-U:m>0&&(H=M-U),A<0?R=I-q:A>0&&(G=X-q),b=Tr,N.attr("cursor",Et.selection),S(re));break}default:return}Sr(re)}function Me(re){switch(re.keyCode){case 16:{fe&&(me=be=fe=!1,S(re));break}case 18:{b===Kt&&(m<0?L=te:m>0&&(H=M),A<0?R=I:A>0&&(G=X),b=qt,S(re));break}case 32:{b===Tr&&(re.altKey?(m&&(L=te-U*m,H=M+U*m),A&&(R=I-q*A,G=X+q*A),b=Kt):(m<0?L=te:m>0&&(H=M),A<0?R=I:A>0&&(G=X),b=qt),N.attr("cursor",Et[E]),S(re));break}default:return}Sr(re)}}function _(g){f(this,arguments).moved(g)}function p(g){f(this,arguments).ended(g)}function w(){var g=this.__brush||{selection:null};return g.extent=tl(t.apply(this,arguments)),g.dim=e,g}return s.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Ir(tl(g)),s):t},s.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Ir(!!g),s):n},s.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Ir(!!g),s):r},s.handleSize=function(g){return arguments.length?(l=+g,s):l},s.keyModifiers=function(g){return arguments.length?(i=!!g,s):i},s.on=function(){var g=a.on.apply(a,arguments);return g===a?s:g},s}const ei=Math.PI,ti=2*ei,Pt=1e-6,Yc=ti-Pt;function ni(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ri(){return new ni}ni.prototype=ri.prototype={constructor:ni,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,l=this._y1,o=n-e,s=r-t,u=a-e,f=l-t,c=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(c>Pt)if(!(Math.abs(f*o-s*u)>Pt)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var h=n-a,_=r-l,p=o*o+s*s,w=h*h+_*_,g=Math.sqrt(p),y=Math.sqrt(c),E=i*Math.tan((ei-Math.acos((p+c-w)/(2*g*y)))/2),b=E/y,m=E/g;Math.abs(b-1)>Pt&&(this._+="L"+(e+b*u)+","+(t+b*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>u*_)+","+(this._x1=e+m*o)+","+(this._y1=t+m*s)}},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n,a=!!a;var l=n*Math.cos(r),o=n*Math.sin(r),s=e+l,u=t+o,f=1^a,c=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>Pt||Math.abs(this._y1-u)>Pt)&&(this._+="L"+s+","+u),n&&(c<0&&(c=c%ti+ti),c>Yc?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+f+","+(this._x1=s)+","+(this._y1=u):c>Pt&&(this._+="A"+n+","+n+",0,"+ +(c>=ei)+","+f+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var il={},Cr={},Lr=34,un=10,Dr=13;function qa(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Xc(e,t){var n=qa(e);return function(r,i){return t(n(r),i,e)}}function ll(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function qe(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function xc(e){return e<0?"-"+qe(-e,6):e>9999?"+"+qe(e,6):qe(e,4)}function qc(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":xc(e.getUTCFullYear())+"-"+qe(e.getUTCMonth()+1,2)+"-"+qe(e.getUTCDate(),2)+(i?"T"+qe(t,2)+":"+qe(n,2)+":"+qe(r,2)+"."+qe(i,3)+"Z":r?"T"+qe(t,2)+":"+qe(n,2)+":"+qe(r,2)+"Z":n||t?"T"+qe(t,2)+":"+qe(n,2)+"Z":"")}function Kc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,h){var _,p,w=i(c,function(g,y){if(_)return _(g,y-1);p=g,_=h?Xc(g,h):qa(g)});return w.columns=p||[],w}function i(c,h){var _=[],p=c.length,w=0,g=0,y,E=p<=0,b=!1;c.charCodeAt(p-1)===un&&--p,c.charCodeAt(p-1)===Dr&&--p;function m(){if(E)return Cr;if(b)return b=!1,il;var x,V=w,O;if(c.charCodeAt(V)===Lr){for(;w++<p&&c.charCodeAt(w)!==Lr||c.charCodeAt(++w)===Lr;);return(x=w)>=p?E=!0:(O=c.charCodeAt(w++))===un?b=!0:O===Dr&&(b=!0,c.charCodeAt(w)===un&&++w),c.slice(V+1,x-1).replace(/""/g,'"')}for(;w<p;){if((O=c.charCodeAt(x=w++))===un)b=!0;else if(O===Dr)b=!0,c.charCodeAt(w)===un&&++w;else if(O!==n)continue;return c.slice(V,x)}return E=!0,c.slice(V,p)}for(;(y=m())!==Cr;){for(var A=[];y!==il&&y!==Cr;)A.push(y),y=m();h&&(A=h(A,g++))==null||_.push(A)}return _}function a(c,h){return c.map(function(_){return h.map(function(p){return f(_[p])}).join(e)})}function l(c,h){return h==null&&(h=ll(c)),[h.map(f).join(e)].concat(a(c,h)).join(`
`)}function o(c,h){return h==null&&(h=ll(c)),a(c,h).join(`
`)}function s(c){return c.map(u).join(`
`)}function u(c){return c.map(f).join(e)}function f(c){return c==null?"":c instanceof Date?qc(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:l,formatBody:o,formatRows:s,formatRow:u,formatValue:f}}var Wc=Kc(","),Zc=Wc.parse;function Jc(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Qc(e,t){return fetch(e,t).then(Jc)}function jc(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Qc(t,n).then(function(i){return e(i,r)})}}var Dn=jc(Zc);function $c(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function an(e){return e=lr(Math.abs(e)),e?e[1]:NaN}function eh(e,t){return function(n,r){for(var i=n.length,a=[],l=0,o=e[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),a.push(n.substring(i-=o,i+o)),!((s+=o+1)>r));)o=e[l=(l+1)%e.length];return a.reverse().join(t)}}function th(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var nh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ar(e){if(!(t=nh.exec(e)))throw new Error("invalid format: "+e);var t;return new Ii({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ar.prototype=Ii.prototype;function Ii(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ii.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rh(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Ka;function ih(e,t){var n=lr(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Ka=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+lr(e,Math.max(0,t+a-1))[0]}function al(e,t){var n=lr(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ol={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$c,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>al(e*100,t),r:al,s:ih,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sl(e){return e}var ul=Array.prototype.map,fl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function lh(e){var t=e.grouping===void 0||e.thousands===void 0?sl:eh(ul.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?sl:th(ul.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(c){c=ar(c);var h=c.fill,_=c.align,p=c.sign,w=c.symbol,g=c.zero,y=c.width,E=c.comma,b=c.precision,m=c.trim,A=c.type;A==="n"?(E=!0,A="g"):ol[A]||(b===void 0&&(b=12),m=!0,A="g"),(g||h==="0"&&_==="=")&&(g=!0,h="0",_="=");var x=w==="$"?n:w==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",V=w==="$"?r:/[%p]/.test(A)?l:"",O=ol[A],z=/[defgprs%]/.test(A);b=b===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function H(M){var K=x,G=V,X,T,L;if(A==="c")G=O(M)+G,M="";else{M=+M;var te=M<0||1/M<0;if(M=isNaN(M)?s:O(Math.abs(M),b),m&&(M=rh(M)),te&&+M==0&&p!=="+"&&(te=!1),K=(te?p==="("?p:o:p==="-"||p==="("?"":p)+K,G=(A==="s"?fl[8+Ka/3]:"")+G+(te&&p==="("?")":""),z){for(X=-1,T=M.length;++X<T;)if(L=M.charCodeAt(X),48>L||L>57){G=(L===46?i+M.slice(X+1):M.slice(X))+G,M=M.slice(0,X);break}}}E&&!g&&(M=t(M,1/0));var _e=K.length+M.length+G.length,R=_e<y?new Array(y-_e+1).join(h):"";switch(E&&g&&(M=t(R+M,R.length?y-G.length:1/0),R=""),_){case"<":M=K+M+G+R;break;case"=":M=K+R+M+G;break;case"^":M=R.slice(0,_e=R.length>>1)+K+M+G+R.slice(_e);break;default:M=R+K+M+G;break}return a(M)}return H.toString=function(){return c+""},H}function f(c,h){var _=u((c=ar(c),c.type="f",c)),p=Math.max(-8,Math.min(8,Math.floor(an(h)/3)))*3,w=Math.pow(10,-p),g=fl[8+p/3];return function(y){return _(w*y)+g}}return{format:u,formatPrefix:f}}var Rn,Ft,Wa;ah({thousands:",",grouping:[3],currency:["$",""]});function ah(e){return Rn=lh(e),Ft=Rn.format,Wa=Rn.formatPrefix,Rn}function oh(e){return Math.max(0,-an(Math.abs(e)))}function sh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(an(t)/3)))*3-an(Math.abs(e)))}function uh(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,an(t)-an(e))+1}function fh(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function ch(){return this.eachAfter(fh)}function hh(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function dh(e,t){for(var n=this,r=[n],i,a,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function _h(e,t){for(var n=this,r=[n],i=[],a,l,o,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(l=0,o=a.length;l<o;++l)r.push(a[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function mh(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function gh(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function ph(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function yh(e){for(var t=this,n=vh(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function vh(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function wh(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function bh(){return Array.from(this)}function kh(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ah(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Eh(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Za(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Th)):t===void 0&&(t=Sh);for(var n=new An(e),r,i=[n],a,l,o,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,o=s-1;o>=0;--o)i.push(a=l[o]=new An(l[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(Ja)}function Ih(){return Za(this).eachBefore(Mh)}function Sh(e){return e.children}function Th(e){return Array.isArray(e)?e[1]:null}function Mh(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Ja(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function An(e){this.data=e,this.depth=this.height=0,this.parent=null}An.prototype=Za.prototype={constructor:An,count:ch,each:hh,eachAfter:_h,eachBefore:dh,find:mh,sum:gh,sort:ph,path:yh,ancestors:wh,descendants:bh,leaves:kh,links:Ah,copy:Ih,[Symbol.iterator]:Eh};function Rr(e){return e==null?null:Qa(e)}function Qa(e){if(typeof e!="function")throw new Error;return e}function fn(){return 0}function cn(e){return function(){return e}}function Nh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Ch(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(r-t)/e.value;++o<s;)l=a[o],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var Lh={depth:-1},cl={},Or={};function Dh(e){return e.id}function Rh(e){return e.parentId}function Oh(){var e=Dh,t=Rh,n;function r(i){var a=Array.from(i),l=e,o=t,s,u,f,c,h,_,p,w,g=new Map;if(n!=null){const y=a.map((m,A)=>Fh(n(m,A,i))),E=y.map(hl),b=new Set(y).add("");for(const m of E)b.has(m)||(b.add(m),y.push(m),E.push(hl(m)),a.push(Or));l=(m,A)=>y[A],o=(m,A)=>E[A]}for(f=0,s=a.length;f<s;++f)u=a[f],_=a[f]=new An(u),(p=l(u,f,i))!=null&&(p+="")&&(w=_.id=p,g.set(w,g.has(w)?cl:_)),(p=o(u,f,i))!=null&&(p+="")&&(_.parent=p);for(f=0;f<s;++f)if(_=a[f],p=_.parent){if(h=g.get(p),!h)throw new Error("missing: "+p);if(h===cl)throw new Error("ambiguous: "+p);h.children?h.children.push(_):h.children=[_],_.parent=h}else{if(c)throw new Error("multiple roots");c=_}if(!c)throw new Error("no root");if(n!=null){for(;c.data===Or&&c.children.length===1;)c=c.children[0],--s;for(let y=a.length-1;y>=0&&(_=a[y],_.data===Or);--y)_.data=null}if(c.parent=Lh,c.eachBefore(function(y){y.depth=y.parent.depth+1,--s}).eachBefore(Ja),c.parent=null,s>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=Rr(i),r):e},r.parentId=function(i){return arguments.length?(t=Rr(i),r):t},r.path=function(i){return arguments.length?(n=Rr(i),r):n},r}function Fh(e){e=`${e}`;let t=e.length;return ii(e,t-1)&&!ii(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function hl(e){let t=e.length;if(t<2)return"";for(;--t>1&&!ii(e,t););return e.slice(0,t)}function ii(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Hh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(i-n)/e.value;++o<s;)l=a[o],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var Vh=(1+Math.sqrt(5))/2;function Ph(e,t,n,r,i,a){for(var l=[],o=t.children,s,u,f=0,c=0,h=o.length,_,p,w=t.value,g,y,E,b,m,A,x;f<h;){_=i-n,p=a-r;do g=o[c++].value;while(!g&&c<h);for(y=E=g,A=Math.max(p/_,_/p)/(w*e),x=g*g*A,m=Math.max(E/x,x/y);c<h;++c){if(g+=u=o[c].value,u<y&&(y=u),u>E&&(E=u),x=g*g*A,b=Math.max(E/x,x/y),b>m){g-=u;break}m=b}l.push(s={value:g,dice:_<p,children:o.slice(f,c)}),s.dice?Ch(s,n,r,i,w?r+=p*g/w:a):Hh(s,n,r,w?n+=_*g/w:i,a),w-=g,f=c}return l}const Bh=function e(t){function n(r,i,a,l,o){Ph(t,r,i,a,l,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Vh);function Gh(){var e=Bh,t=!1,n=1,r=1,i=[0],a=fn,l=fn,o=fn,s=fn,u=fn;function f(h){return h.x0=h.y0=0,h.x1=n,h.y1=r,h.eachBefore(c),i=[0],t&&h.eachBefore(Nh),h}function c(h){var _=i[h.depth],p=h.x0+_,w=h.y0+_,g=h.x1-_,y=h.y1-_;g<p&&(p=g=(p+g)/2),y<w&&(w=y=(w+y)/2),h.x0=p,h.y0=w,h.x1=g,h.y1=y,h.children&&(_=i[h.depth+1]=a(h)/2,p+=u(h)-_,w+=l(h)-_,g-=o(h)-_,y-=s(h)-_,g<p&&(p=g=(p+g)/2),y<w&&(w=y=(w+y)/2),e(h,p,w,g,y))}return f.round=function(h){return arguments.length?(t=!!h,f):t},f.size=function(h){return arguments.length?(n=+h[0],r=+h[1],f):[n,r]},f.tile=function(h){return arguments.length?(e=Qa(h),f):e},f.padding=function(h){return arguments.length?f.paddingInner(h).paddingOuter(h):f.paddingInner()},f.paddingInner=function(h){return arguments.length?(a=typeof h=="function"?h:cn(+h),f):a},f.paddingOuter=function(h){return arguments.length?f.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):f.paddingTop()},f.paddingTop=function(h){return arguments.length?(l=typeof h=="function"?h:cn(+h),f):l},f.paddingRight=function(h){return arguments.length?(o=typeof h=="function"?h:cn(+h),f):o},f.paddingBottom=function(h){return arguments.length?(s=typeof h=="function"?h:cn(+h),f):s},f.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:cn(+h),f):u},f}function zh(e,t,n,r,i){var a=e.children,l,o=a.length,s,u=new Array(o+1);for(u[0]=s=l=0;l<o;++l)u[l+1]=s+=a[l].value;f(0,o,e.value,t,n,r,i);function f(c,h,_,p,w,g,y){if(c>=h-1){var E=a[c];E.x0=p,E.y0=w,E.x1=g,E.y1=y;return}for(var b=u[c],m=_/2+b,A=c+1,x=h-1;A<x;){var V=A+x>>>1;u[V]<m?A=V+1:x=V}m-u[A-1]<u[A]-m&&c+1<A&&--A;var O=u[A]-b,z=_-O;if(g-p>y-w){var H=_?(p*z+g*O)/_:g;f(c,A,O,p,w,H,y),f(A,h,z,H,w,g,y)}else{var M=_?(w*z+y*O)/_:y;f(c,A,O,p,w,g,M),f(A,h,z,p,M,g,y)}}}function ja(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const dl=Symbol("implicit");function li(){var e=new Vr,t=[],n=[],r=dl;function i(a){let l=e.get(a);if(l===void 0){if(r!==dl)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Vr;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return li(t,n).unknown(r)},ja.apply(i,arguments),i}function Uh(e){return function(){return e}}function Yh(e){return+e}var _l=[0,1];function jt(e){return e}function ai(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Uh(isNaN(t)?NaN:.5)}function Xh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function xh(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=ai(i,r),a=n(l,a)):(r=ai(r,i),a=n(a,l)),function(o){return a(r(o))}}function qh(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=ai(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(o){var s=Zo(e,o,1,r)-1;return a[s](i[s](o))}}function Kh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wh(){var e=_l,t=_l,n=dr,r,i,a,l=jt,o,s,u;function f(){var h=Math.min(e.length,t.length);return l!==jt&&(l=Xh(e[0],e[h-1])),o=h>2?qh:xh,s=u=null,c}function c(h){return h==null||isNaN(h=+h)?a:(s||(s=o(e.map(r),t,n)))(r(l(h)))}return c.invert=function(h){return l(i((u||(u=o(t,e.map(r),ut)))(h)))},c.domain=function(h){return arguments.length?(e=Array.from(h,Yh),f()):e.slice()},c.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},c.rangeRound=function(h){return t=Array.from(h),n=pf,f()},c.clamp=function(h){return arguments.length?(l=h?!0:jt,f()):l!==jt},c.interpolate=function(h){return arguments.length?(n=h,f()):n},c.unknown=function(h){return arguments.length?(a=h,c):a},function(h,_){return r=h,i=_,f()}}function Zh(){return Wh()(jt,jt)}function Jh(e,t,n,r){var i=ts(e,t,n),a;switch(r=ar(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=sh(i,l))&&(r.precision=a),Wa(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=uh(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=oh(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ft(r)}function Qh(e){var t=e.domain;return e.ticks=function(n){var r=t();return es(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Jh(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],o=r[a],s,u,f=10;for(o<l&&(u=l,l=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=va(l,o,n),u===s)return r[i]=l,r[a]=o,t(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;s=u}return e},e}function yn(){var e=Zh();return e.copy=function(){return Kh(e,yn())},ja.apply(e,arguments),Qh(e)}function jh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const ml=jh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function $t(e,t,n){this.k=e,this.x=t,this.y=n}$t.prototype={constructor:$t,scale:function(e){return e===1?this:new $t(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $t(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new $t(1,0,0);$t.prototype;function $h(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function e0(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=he("div"),this.h()},l(i){t=de(i,"DIV",{class:!0});var a=P(t);a.forEach(k),this.h()},h(){d(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,a){Z(i,t,a),t.innerHTML=n},p(i,[a]){a&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),a&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&d(t,"class",r)},i:Ne,o:Ne,d(i){i&&k(t)}}}function t0(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:a=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,f="";return e.$$set=c=>{"isActive"in c&&n(4,r=c.isActive),"isFirst"in c&&n(5,i=c.isFirst),"isHover"in c&&n(6,a=c.isHover),"isSelectable"in c&&n(7,l=c.isSelectable),"getOptionLabel"in c&&n(0,o=c.getOptionLabel),"item"in c&&n(1,s=c.item),"filterText"in c&&n(2,u=c.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const c=[];r&&c.push("active"),i&&c.push("first"),a&&c.push("hover"),s.isGroupHeader&&c.push("groupHeader"),s.isGroupItem&&c.push("groupItem"),l||c.push("notSelectable"),n(3,f=c.join(" "))}},[o,s,u,f,r,i,a,l]}class $a extends ct{constructor(t){super(),ht(this,t,t0,e0,dt,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function gl(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function n0(e){let t,n,r=e[1],i=[];for(let o=0;o<r.length;o+=1)i[o]=vl(gl(e,r,o));const a=o=>ye(i[o],1,1,()=>{i[o]=null});let l=null;return r.length||(l=pl(e)),{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=pe(),l&&l.c()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);t=pe(),l&&l.l(o)},m(o,s){for(let u=0;u<i.length;u+=1)i[u].m(o,s);Z(o,t,s),l&&l.m(o,s),n=!0},p(o,s){if(s[0]&114390){r=o[1];let u;for(u=0;u<r.length;u+=1){const f=gl(o,r,u);i[u]?(i[u].p(f,s),oe(i[u],1)):(i[u]=vl(f),i[u].c(),oe(i[u],1),i[u].m(t.parentNode,t))}for(He(),u=r.length;u<i.length;u+=1)a(u);Ve(),!r.length&&l?l.p(o,s):r.length?l&&(l.d(1),l=null):(l=pl(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let s=0;s<r.length;s+=1)oe(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)ye(i[s]);n=!1},d(o){ci(i,o),o&&k(t),l&&l.d(o)}}}function r0(e){let t,n,r;var i=e[3];function a(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[a0,({item:o,i:s})=>({41:o,42:s}),({item:o,i:s})=>[0,(o?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=ze(i,a(e))),{c(){t&&Le(t.$$.fragment),n=pe()},l(l){t&&je(t.$$.fragment,l),n=pe()},m(l,o){t&&De(t,l,o),Z(l,n,o),r=!0},p(l,o){const s={};if(o[0]&2&&(s.items=l[1]),o[0]&256&&(s.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(s.$$scope={dirty:o,ctx:l}),i!==(i=l[3])){if(t){He();const u=t;ye(u.$$.fragment,1,0,()=>{Re(u,1)}),Ve()}i?(t=ze(i,a(l)),Le(t.$$.fragment),oe(t.$$.fragment,1),De(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&oe(t.$$.fragment,l),r=!0)},o(l){t&&ye(t.$$.fragment,l),r=!1},d(l){l&&k(n),t&&Re(t,l)}}}function pl(e){let t,n=!e[11]&&yl(e);return{c(){n&&n.c(),t=pe()},l(r){n&&n.l(r),t=pe()},m(r,i){n&&n.m(r,i),Z(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=yl(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&k(t)}}}function yl(e){let t,n;return{c(){t=he("div"),n=ke(e[12]),this.h()},l(r){t=de(r,"DIV",{class:!0});var i=P(t);n=Ae(i,e[12]),i.forEach(k),this.h()},h(){d(t,"class","empty svelte-1uyqfml")},m(r,i){Z(r,t,i),F(t,n)},p(r,i){i[0]&4096&&We(n,r[12])},d(r){r&&k(t)}}}function i0(e){let t,n,r,i,a,l;var o=e[4];function s(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:oi(h[42]),isActive:or(h[41],h[9],h[10]),isHover:sr(h[2],h[41],h[42],h[1]),isSelectable:Yt(h[41])}}}o&&(n=ze(o,s(e)));function u(){return e[29](e[42])}function f(){return e[30](e[42])}function c(...h){return e[31](e[41],e[42],...h)}return{c(){t=he("div"),n&&Le(n.$$.fragment),r=Se(),this.h()},l(h){t=de(h,"DIV",{class:!0,tabindex:!0});var _=P(t);n&&je(n.$$.fragment,_),r=Te(_),_.forEach(k),this.h()},h(){d(t,"class","listItem"),d(t,"tabindex","-1")},m(h,_){Z(h,t,_),n&&De(n,t,null),F(t,r),i=!0,a||(l=[W(t,"mouseover",u),W(t,"focus",f),W(t,"click",c)],a=!0)},p(h,_){e=h;const p={};if(_[0]&2&&(p.item=e[41]),_[0]&8192&&(p.filterText=e[13]),_[0]&64&&(p.getOptionLabel=e[6]),_[0]&1538&&(p.isActive=or(e[41],e[9],e[10])),_[0]&6&&(p.isHover=sr(e[2],e[41],e[42],e[1])),_[0]&2&&(p.isSelectable=Yt(e[41])),o!==(o=e[4])){if(n){He();const w=n;ye(w.$$.fragment,1,0,()=>{Re(w,1)}),Ve()}o?(n=ze(o,s(e)),Le(n.$$.fragment),oe(n.$$.fragment,1),De(n,t,r)):n=null}else o&&n.$set(p)},i(h){i||(n&&oe(n.$$.fragment,h),i=!0)},o(h){n&&ye(n.$$.fragment,h),i=!1},d(h){h&&k(t),n&&Re(n),a=!1,et(l)}}}function l0(e){let t,n=e[7](e[41])+"",r;return{c(){t=he("div"),r=ke(n),this.h()},l(i){t=de(i,"DIV",{class:!0});var a=P(t);r=Ae(a,n),a.forEach(k),this.h()},h(){d(t,"class","listGroupTitle svelte-1uyqfml")},m(i,a){Z(i,t,a),F(t,r)},p(i,a){a[0]&130&&n!==(n=i[7](i[41])+"")&&We(r,n)},i:Ne,o:Ne,d(i){i&&k(t)}}}function vl(e){let t,n,r,i;const a=[l0,i0],l=[];function o(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=o(e),n=l[t]=a[t](e),{c(){n.c(),r=pe()},l(s){n.l(s),r=pe()},m(s,u){l[t].m(s,u),Z(s,r,u),i=!0},p(s,u){let f=t;t=o(s),t===f?l[t].p(s,u):(He(),ye(l[f],1,1,()=>{l[f]=null}),Ve(),n=l[t],n?n.p(s,u):(n=l[t]=a[t](s),n.c()),oe(n,1),n.m(r.parentNode,r))},i(s){i||(oe(n),i=!0)},o(s){ye(n),i=!1},d(s){l[t].d(s),s&&k(r)}}}function a0(e){let t,n,r,i,a;var l=e[4];function o(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:oi(c[42]),isActive:or(c[41],c[9],c[10]),isHover:sr(c[2],c[41],c[42],c[1]),isSelectable:Yt(c[41])}}}l&&(n=ze(l,o(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function f(...c){return e[28](e[41],e[42],...c)}return{c(){t=he("div"),n&&Le(n.$$.fragment),this.h()},l(c){t=de(c,"DIV",{class:!0});var h=P(t);n&&je(n.$$.fragment,h),h.forEach(k),this.h()},h(){d(t,"class","listItem")},m(c,h){Z(c,t,h),n&&De(n,t,null),r=!0,i||(a=[W(t,"mouseover",s),W(t,"focus",u),W(t,"click",f)],i=!0)},p(c,h){e=c;const _={};if(h[1]&1024&&(_.item=e[41]),h[0]&8192&&(_.filterText=e[13]),h[0]&64&&(_.getOptionLabel=e[6]),h[1]&2048&&(_.isFirst=oi(e[42])),h[0]&1536|h[1]&1024&&(_.isActive=or(e[41],e[9],e[10])),h[0]&6|h[1]&3072&&(_.isHover=sr(e[2],e[41],e[42],e[1])),h[1]&1024&&(_.isSelectable=Yt(e[41])),l!==(l=e[4])){if(n){He();const p=n;ye(p.$$.fragment,1,0,()=>{Re(p,1)}),Ve()}l?(n=ze(l,o(e)),Le(n.$$.fragment),oe(n.$$.fragment,1),De(n,t,null)):n=null}else l&&n.$set(_)},i(c){r||(n&&oe(n.$$.fragment,c),r=!0)},o(c){n&&ye(n.$$.fragment,c),r=!1},d(c){c&&k(t),n&&Re(n),i=!1,et(a)}}}function o0(e){let t,n,r,i,a,l;const o=[r0,n0],s=[];function u(f,c){return f[5]?0:1}return n=u(e),r=s[n]=o[n](e),{c(){t=he("div"),r.c(),this.h()},l(f){t=de(f,"DIV",{class:!0,style:!0});var c=P(t);r.l(c),c.forEach(k),this.h()},h(){d(t,"class","listContainer svelte-1uyqfml"),d(t,"style",e[14]),lt(t,"virtualList",e[5])},m(f,c){Z(f,t,c),s[n].m(t,null),e[32](t),i=!0,a||(l=[W(window,"keydown",e[17]),W(window,"resize",e[18])],a=!0)},p(f,c){let h=n;n=u(f),n===h?s[n].p(f,c):(He(),ye(s[h],1,1,()=>{s[h]=null}),Ve(),r=s[n],r?r.p(f,c):(r=s[n]=o[n](f),r.c()),oe(r,1),r.m(t,null)),(!i||c[0]&16384)&&d(t,"style",f[14]),(!i||c[0]&32)&&lt(t,"virtualList",f[5])},i(f){i||(oe(r),i=!0)},o(f){ye(r),i=!1},d(f){f&&k(t),s[n].d(),e[32](null),a=!1,et(l)}}}function or(e,t,n){return t&&t[n]===e[n]}function oi(e){return e===0}function sr(e,t,n,r){return Yt(t)&&(e===n||r.length===1)}function Yt(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function s0(e,t,n){const r=fi();let{container:i=void 0}=t,{VirtualList:a=null}=t,{Item:l=$a}=t,{isVirtualList:o=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:f=(D,J)=>{if(D)return D.isCreator?`Create "${J}"`:D[u]}}=t,{getGroupHeaderLabel:c=null}=t,{itemHeight:h=40}=t,{hoverItemIndex:_=0}=t,{value:p=void 0}=t,{optionIdentifier:w="value"}=t,{hideEmptyState:g=!1}=t,{noOptionsMessage:y="No options"}=t,{isMulti:E=!1}=t,{activeItemIndex:b=0}=t,{filterText:m=""}=t,{parent:A=null}=t,{listPlacement:x=null}=t,{listAutoWidth:V=null}=t,{listOffset:O=5}=t,z=0,H=!1,M;fr(()=>{if(s.length>0&&!E&&p){const D=s.findIndex(J=>J[w]===p[w]);D&&n(2,_=D)}_e("active"),i.addEventListener("scroll",()=>{clearTimeout(z),z=setTimeout(()=>{H=!1},100)},!1)}),ma(()=>{s||n(1,s=[]),s!==M&&s.length>0&&n(2,_=0),M=s});function K(D){D.isCreator||r("itemSelected",D)}function G(D){H||n(2,_=D)}function X(D){const{item:J,i:N,event:Q}=D;if(Q.stopPropagation(),p&&!E&&p[w]===J[w])return T();J.isCreator?r("itemCreated",m):Yt(J)&&(n(19,b=N),n(2,_=N),K(J))}function T(){r("closeList")}async function L(D){if(o)return;let J=!0;for(;J;)D>0&&_===s.length-1?n(2,_=0):D<0&&_===0?n(2,_=s.length-1):n(2,_=_+D),J=!Yt(s[_]);await Gn(),_e("hover")}function te(D){switch(D.key){case"Escape":D.preventDefault(),T();break;case"ArrowDown":D.preventDefault(),s.length&&L(1);break;case"ArrowUp":D.preventDefault(),s.length&&L(-1);break;case"Enter":if(D.preventDefault(),s.length===0)break;const J=s[_];if(p&&!E&&p[w]===J[w]){T();break}J.isCreator?r("itemCreated",m):(n(19,b=_),K(s[_]));break;case"Tab":if(D.preventDefault(),s.length===0||p&&p[w]===s[_][w])return T();n(19,b=_),K(s[_]);break}}function _e(D){if(o||!i)return;let J;const N=i.querySelector(`.listItem .${D}`);N&&(J=i.getBoundingClientRect().bottom-N.getBoundingClientRect().bottom),n(0,i.scrollTop-=J,i)}let R;function I(){const{height:D,width:J}=A.getBoundingClientRect();n(14,R=""),n(14,R+=`min-width:${J}px;width:${V?"auto":"100%"};`),x==="top"||x==="auto"&&$h(A,i).bottom?n(14,R+=`bottom:${D+O}px;`):n(14,R+=`top:${D+O}px;`)}const U=D=>G(D),q=D=>G(D),ue=(D,J,N)=>X({item:D,i:J,event:N}),fe=D=>G(D),me=D=>G(D),be=(D,J,N)=>X({item:D,i:J,event:N});function ie(D){Ye[D?"unshift":"push"](()=>{i=D,n(0,i)})}return e.$$set=D=>{"container"in D&&n(0,i=D.container),"VirtualList"in D&&n(3,a=D.VirtualList),"Item"in D&&n(4,l=D.Item),"isVirtualList"in D&&n(5,o=D.isVirtualList),"items"in D&&n(1,s=D.items),"labelIdentifier"in D&&n(20,u=D.labelIdentifier),"getOptionLabel"in D&&n(6,f=D.getOptionLabel),"getGroupHeaderLabel"in D&&n(7,c=D.getGroupHeaderLabel),"itemHeight"in D&&n(8,h=D.itemHeight),"hoverItemIndex"in D&&n(2,_=D.hoverItemIndex),"value"in D&&n(9,p=D.value),"optionIdentifier"in D&&n(10,w=D.optionIdentifier),"hideEmptyState"in D&&n(11,g=D.hideEmptyState),"noOptionsMessage"in D&&n(12,y=D.noOptionsMessage),"isMulti"in D&&n(21,E=D.isMulti),"activeItemIndex"in D&&n(19,b=D.activeItemIndex),"filterText"in D&&n(13,m=D.filterText),"parent"in D&&n(22,A=D.parent),"listPlacement"in D&&n(23,x=D.listPlacement),"listAutoWidth"in D&&n(24,V=D.listAutoWidth),"listOffset"in D&&n(25,O=D.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&A&&i&&I()},[i,s,_,a,l,o,f,c,h,p,w,g,y,m,R,G,X,te,I,b,u,E,A,x,V,O,U,q,ue,fe,me,be,ie]}class u0 extends ct{constructor(t){super(),ht(this,t,s0,o0,dt,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function f0(e){let t,n=e[0](e[1])+"";return{c(){t=he("div"),this.h()},l(r){t=de(r,"DIV",{class:!0});var i=P(t);i.forEach(k),this.h()},h(){d(t,"class","selection svelte-pu1q1n")},m(r,i){Z(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Ne,o:Ne,d(r){r&&k(t)}}}function c0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=a=>{"getSelectionLabel"in a&&n(0,r=a.getSelectionLabel),"item"in a&&n(1,i=a.item)},[r,i]}class h0 extends ct{constructor(t){super(),ht(this,t,c0,f0,dt,{getSelectionLabel:0,item:1})}}function wl(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function bl(e){let t,n,r,i,a;function l(...o){return e[6](e[11],...o)}return{c(){t=he("div"),n=$("svg"),r=$("path"),this.h()},l(o){t=de(o,"DIV",{class:!0});var s=P(t);n=ee(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=P(n);r=ee(u,"path",{d:!0}),P(r).forEach(k),u.forEach(k),s.forEach(k),this.h()},h(){d(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),d(n,"width","100%"),d(n,"height","100%"),d(n,"viewBox","-2 -2 50 50"),d(n,"focusable","false"),d(n,"aria-hidden","true"),d(n,"role","presentation"),d(n,"class","svelte-liu9pa"),d(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){Z(o,t,s),F(t,n),F(n,r),i||(a=W(t,"click",l),i=!0)},p(o,s){e=o},d(o){o&&k(t),i=!1,a()}}}function kl(e){let t,n,r=e[4](e[9])+"",i,a,l,o,s,u=!e[2]&&!e[3]&&bl(e);function f(...c){return e[7](e[11],...c)}return{c(){t=he("div"),n=he("div"),i=Se(),u&&u.c(),a=Se(),this.h()},l(c){t=de(c,"DIV",{class:!0});var h=P(t);n=de(h,"DIV",{class:!0});var _=P(n);_.forEach(k),i=Te(h),u&&u.l(h),a=Te(h),h.forEach(k),this.h()},h(){d(n,"class","multiSelectItem_label svelte-liu9pa"),d(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(c,h){Z(c,t,h),F(t,n),n.innerHTML=r,F(t,i),u&&u.m(t,null),F(t,a),o||(s=W(t,"click",f),o=!0)},p(c,h){e=c,h&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,h):(u=bl(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),h&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&d(t,"class",l)},d(c){c&&k(t),u&&u.d(),o=!1,s()}}}function d0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=kl(wl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=pe()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=pe()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);Z(i,t,a)},p(i,[a]){if(a&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const o=wl(i,n,l);r[l]?r[l].p(o,a):(r[l]=kl(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Ne,o:Ne,d(i){ci(r,i),i&&k(t)}}}function _0(e,t,n){const r=fi();let{value:i=[]}=t,{activeValue:a=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:s=void 0}=t;function u(h,_){_.stopPropagation(),r("multiItemClear",{i:h})}const f=(h,_)=>u(h,_),c=(h,_)=>o?u(h,_):{};return e.$$set=h=>{"value"in h&&n(0,i=h.value),"activeValue"in h&&n(1,a=h.activeValue),"isDisabled"in h&&n(2,l=h.isDisabled),"multiFullItemClearable"in h&&n(3,o=h.multiFullItemClearable),"getSelectionLabel"in h&&n(4,s=h.getSelectionLabel)},[i,a,l,o,s,u,f,c]}class m0 extends ct{constructor(t){super(),ht(this,t,_0,d0,dt,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function Al(e,t,n){const r=e.slice();return r[23]=t[n],r}const g0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),El=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function p0(e){let t;return{c(){t=ke("Missing template")},l(n){t=Ae(n,"Missing template")},m(n,r){Z(n,t,r)},d(n){n&&k(t)}}}function Il(e,t){let n,r,i;const a=t[15].default,l=No(a,t,t[14],El),o=l||p0();return{key:e,first:null,c(){n=he("svelte-virtual-list-row"),o&&o.c(),r=Se(),this.h()},l(s){n=de(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=P(n);o&&o.l(u),r=Te(u),u.forEach(k),this.h()},h(){Hr(n,"class","svelte-g2cagw"),this.first=n},m(s,u){Z(s,n,u),o&&o.m(n,null),F(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&Co(l,a,t,t[14],i?Do(a,t[14],u,g0):Lo(t[14]),El)},i(s){i||(oe(o,s),i=!0)},o(s){ye(o,s),i=!1},d(s){s&&k(n),o&&o.d(s)}}}function y0(e){let t,n,r=[],i=new Map,a,l,o,s,u=e[5];const f=c=>c[23].index;for(let c=0;c<u.length;c+=1){let h=Al(e,u,c),_=f(h);i.set(_,r[c]=Il(_,h))}return{c(){t=he("svelte-virtual-list-viewport"),n=he("svelte-virtual-list-contents");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){t=de(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var h=P(t);n=de(h,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=P(n);for(let p=0;p<r.length;p+=1)r[p].l(_);_.forEach(k),h.forEach(k),this.h()},h(){xt(n,"padding-top",e[6]+"px"),xt(n,"padding-bottom",e[7]+"px"),Hr(n,"class","svelte-g2cagw"),xt(t,"height",e[0]),Hr(t,"class","svelte-g2cagw"),En(()=>e[18].call(t))},m(c,h){Z(c,t,h),F(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),a=cr(t,e[18].bind(t)),l=!0,o||(s=W(t,"scroll",e[8]),o=!0)},p(c,[h]){h&16418&&(u=c[5],He(),r=Rt(r,h,f,1,c,u,i,n,Mo,Il,null,Al),Ve()),(!l||h&64)&&xt(n,"padding-top",c[6]+"px"),(!l||h&128)&&xt(n,"padding-bottom",c[7]+"px"),(!l||h&1)&&xt(t,"height",c[0])},i(c){if(!l){for(let h=0;h<u.length;h+=1)oe(r[h]);l=!0}},o(c){for(let h=0;h<r.length;h+=1)ye(r[h]);l=!1},d(c){c&&k(t);for(let h=0;h<r.length;h+=1)r[h].d();e[16](null),e[17](null),a(),o=!1,s()}}}function v0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:a=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:f=0}=t,c=[],h,_,p,w=0,g,y,E=0,b=0,m;async function A(H,M,K){const{scrollTop:G}=_;await Gn();let X=E-G,T=u;for(;X<M&&T<H.length;){let te=h[T-u];te||(n(10,f=T+1),await Gn(),te=h[T-u]);const _e=c[T]=K||te.offsetHeight;X+=_e,T+=1}n(10,f=T);const L=H.length-f;m=(E+X)/f,n(7,b=L*m),c.length=H.length,_&&n(3,_.scrollTop=0,_)}async function x(){const{scrollTop:H}=_,M=u;for(let T=0;T<h.length;T+=1)c[u+T]=o||h[T].offsetHeight;let K=0,G=0;for(;K<a.length;){const T=c[K]||m;if(G+T>H){n(9,u=K),n(6,E=G);break}G+=T,K+=1}for(;K<a.length&&(G+=c[K]||m,K+=1,!(G>H+w)););n(10,f=K);const X=a.length-f;for(m=G/f;K<a.length;)c[K++]=m;if(n(7,b=X*m),u<M){await Gn();let T=0,L=0;for(let _e=u;_e<M;_e+=1)h[_e-u]&&(T+=c[_e],L+=o||h[_e-u].offsetHeight);const te=L-T;_.scrollTo(0,H+te)}}fr(()=>{h=p.getElementsByTagName("svelte-virtual-list-row"),n(13,y=!0)});function V(H){Ye[H?"unshift":"push"](()=>{p=H,n(4,p)})}function O(H){Ye[H?"unshift":"push"](()=>{_=H,n(3,_)})}function z(){w=this.offsetHeight,n(2,w)}return e.$$set=H=>{"items"in H&&n(11,a=H.items),"height"in H&&n(0,l=H.height),"itemHeight"in H&&n(12,o=H.itemHeight),"hoverItemIndex"in H&&n(1,s=H.hoverItemIndex),"start"in H&&n(9,u=H.start),"end"in H&&n(10,f=H.end),"$$scope"in H&&n(14,i=H.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,g=a.slice(u,f).map((H,M)=>({index:M+u,data:H}))),e.$$.dirty&14340&&y&&A(a,w,o)},[l,s,w,_,p,g,E,b,x,u,f,a,o,y,i,r,V,O,z]}class w0 extends ct{constructor(t){super(),ht(this,t,v0,y0,dt,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function b0(e){let t,n;return{c(){t=$("svg"),n=$("path"),this.h()},l(r){t=ee(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=P(t);n=ee(i,"path",{fill:!0,d:!0}),P(n).forEach(k),i.forEach(k),this.h()},h(){d(n,"fill","currentColor"),d(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","-2 -2 50 50"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"role","presentation")},m(r,i){Z(r,t,i),F(t,n)},p:Ne,i:Ne,o:Ne,d(r){r&&k(t)}}}class k0 extends ct{constructor(t){super(),ht(this,t,null,b0,dt,{})}}function A0(e,t,n){let r;return function(){let a=this,l=arguments,o=function(){r=null,n||e.apply(a,l)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,l)}}function Sl(e,t,n){const r=e.slice();return r[103]=t[n],r}function Tl(e){let t,n,r,i,a;return{c(){t=he("span"),n=ke(e[33]),r=Se(),i=he("span"),a=ke(e[32]),this.h()},l(l){t=de(l,"SPAN",{id:!0});var o=P(t);n=Ae(o,e[33]),o.forEach(k),r=Te(l),i=de(l,"SPAN",{id:!0});var s=P(i);a=Ae(s,e[32]),s.forEach(k),this.h()},h(){d(t,"id","aria-selection"),d(i,"id","aria-context")},m(l,o){Z(l,t,o),F(t,n),Z(l,r,o),Z(l,i,o),F(i,a)},p(l,o){o[1]&4&&We(n,l[33]),o[1]&2&&We(a,l[32])},d(l){l&&k(t),l&&k(r),l&&k(i)}}}function Ml(e){let t,n,r;const i=[e[18]];var a=e[17];function l(o){let s={};for(let u=0;u<i.length;u+=1)s=hi(s,i[u]);return{props:s}}return a&&(t=ze(a,l())),{c(){t&&Le(t.$$.fragment),n=pe()},l(o){t&&je(t.$$.fragment,o),n=pe()},m(o,s){t&&De(t,o,s),Z(o,n,s),r=!0},p(o,s){const u=s[0]&262144?di(i,[ga(o[18])]):{};if(a!==(a=o[17])){if(t){He();const f=t;ye(f.$$.fragment,1,0,()=>{Re(f,1)}),Ve()}a?(t=ze(a,l()),Le(t.$$.fragment),oe(t.$$.fragment,1),De(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(o){r||(t&&oe(t.$$.fragment,o),r=!0)},o(o){t&&ye(t.$$.fragment,o),r=!1},d(o){o&&k(n),t&&Re(t,o)}}}function Nl(e){let t,n,r;var i=e[26];function a(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=ze(i,a(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Le(t.$$.fragment),n=pe()},l(l){t&&je(t.$$.fragment,l),n=pe()},m(l,o){t&&De(t,l,o),Z(l,n,o),r=!0},p(l,o){const s={};if(o[0]&4&&(s.value=l[2]),o[0]&4096&&(s.getSelectionLabel=l[12]),o[0]&1073741824&&(s.activeValue=l[30]),o[0]&512&&(s.isDisabled=l[9]),o[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){He();const u=t;ye(u.$$.fragment,1,0,()=>{Re(u,1)}),Ve()}i?(t=ze(i,a(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),Le(t.$$.fragment),oe(t.$$.fragment,1),De(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&oe(t.$$.fragment,l),r=!0)},o(l){t&&ye(t.$$.fragment,l),r=!1},d(l){l&&k(n),t&&Re(t,l)}}}function Cl(e){let t,n,r,i,a;var l=e[25];function o(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=ze(l,o(e))),{c(){t=he("div"),n&&Le(n.$$.fragment),this.h()},l(s){t=de(s,"DIV",{class:!0});var u=P(t);n&&je(n.$$.fragment,u),u.forEach(k),this.h()},h(){d(t,"class","selectedItem svelte-17l1npl")},m(s,u){Z(s,t,u),n&&De(n,t,null),r=!0,i||(a=W(t,"focus",e[40]),i=!0)},p(s,u){const f={};if(u[0]&4&&(f.item=s[2]),u[0]&4096&&(f.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){He();const c=n;ye(c.$$.fragment,1,0,()=>{Re(c,1)}),Ve()}l?(n=ze(l,o(s)),Le(n.$$.fragment),oe(n.$$.fragment,1),De(n,t,null)):n=null}else l&&n.$set(f)},i(s){r||(n&&oe(n.$$.fragment,s),r=!0)},o(s){n&&ye(n.$$.fragment,s),r=!1},d(s){s&&k(t),n&&Re(n),i=!1,a()}}}function Ll(e){let t,n,r,i,a;var l=e[23];function o(s){return{}}return l&&(n=ze(l,o())),{c(){t=he("div"),n&&Le(n.$$.fragment),this.h()},l(s){t=de(s,"DIV",{class:!0,"aria-hidden":!0});var u=P(t);n&&je(n.$$.fragment,u),u.forEach(k),this.h()},h(){d(t,"class","clearSelect svelte-17l1npl"),d(t,"aria-hidden","true")},m(s,u){Z(s,t,u),n&&De(n,t,null),r=!0,i||(a=W(t,"click",Ro(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){He();const f=n;ye(f.$$.fragment,1,0,()=>{Re(f,1)}),Ve()}l?(n=ze(l,o()),Le(n.$$.fragment),oe(n.$$.fragment,1),De(n,t,null)):n=null}},i(s){r||(n&&oe(n.$$.fragment,s),r=!0)},o(s){n&&ye(n.$$.fragment,s),r=!1},d(s){s&&k(t),n&&Re(n),i=!1,a()}}}function Dl(e){let t;function n(a,l){return a[22]?I0:E0}let r=n(e),i=r(e);return{c(){t=he("div"),i.c(),this.h()},l(a){t=de(a,"DIV",{class:!0,"aria-hidden":!0});var l=P(t);i.l(l),l.forEach(k),this.h()},h(){d(t,"class","indicator svelte-17l1npl"),d(t,"aria-hidden","true")},m(a,l){Z(a,t,l),i.m(t,null)},p(a,l){r===(r=n(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,null)))},d(a){a&&k(t),i.d()}}}function E0(e){let t,n;return{c(){t=$("svg"),n=$("path"),this.h()},l(r){t=ee(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=P(t);n=ee(i,"path",{d:!0}),P(n).forEach(k),i.forEach(k),this.h()},h(){d(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","0 0 20 20"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"class","svelte-17l1npl")},m(r,i){Z(r,t,i),F(t,n)},p:Ne,d(r){r&&k(t)}}}function I0(e){let t,n;return{c(){t=new Fo(!1),n=pe(),this.h()},l(r){t=Ho(r,!1),n=pe(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),Z(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&k(n),r&&t.d()}}}function Rl(e){let t,n,r;return{c(){t=he("div"),n=$("svg"),r=$("circle"),this.h()},l(i){t=de(i,"DIV",{class:!0});var a=P(t);n=ee(a,"svg",{class:!0,viewBox:!0});var l=P(n);r=ee(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),P(r).forEach(k),l.forEach(k),a.forEach(k),this.h()},h(){d(r,"class","spinner_path svelte-17l1npl"),d(r,"cx","50"),d(r,"cy","50"),d(r,"r","20"),d(r,"fill","none"),d(r,"stroke","currentColor"),d(r,"stroke-width","5"),d(r,"stroke-miterlimit","10"),d(n,"class","spinner_icon svelte-17l1npl"),d(n,"viewBox","25 25 50 50"),d(t,"class","spinner svelte-17l1npl")},m(i,a){Z(i,t,a),F(t,n),F(n,r)},d(i){i&&k(t)}}}function Ol(e){let t,n,r,i;const a=[e[34]];function l(u){e[84](u)}var o=e[24];function s(u){let f={};for(let c=0;c<a.length;c+=1)f=hi(f,a[c]);return u[28]!==void 0&&(f.hoverItemIndex=u[28]),{props:f}}return o&&(t=ze(o,s(e)),Ye.push(()=>Li(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Le(t.$$.fragment),r=pe()},l(u){t&&je(t.$$.fragment,u),r=pe()},m(u,f){t&&De(t,u,f),Z(u,r,f),i=!0},p(u,f){const c=f[1]&8?di(a,[ga(u[34])]):{};if(!n&&f[0]&268435456&&(n=!0,c.hoverItemIndex=u[28],Oo(()=>n=!1)),o!==(o=u[24])){if(t){He();const h=t;ye(h.$$.fragment,1,0,()=>{Re(h,1)}),Ve()}o?(t=ze(o,s(u)),Ye.push(()=>Li(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),Le(t.$$.fragment),oe(t.$$.fragment,1),De(t,r.parentNode,r)):t=null}else o&&t.$set(c)},i(u){i||(t&&oe(t.$$.fragment,u),i=!0)},o(u){t&&ye(t.$$.fragment,u),i=!1},d(u){u&&k(r),t&&Re(t,u)}}}function Fl(e){let t,n,r;return{c(){t=he("input"),this.h()},l(i){t=de(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,d(t,"class","svelte-17l1npl")},m(i,a){Z(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&k(t)}}}function Hl(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=Vl(Sl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=pe()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=pe()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);Z(i,t,a)},p(i,a){if(a[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const o=Sl(i,n,l);r[l]?r[l].p(o,a):(r[l]=Vl(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){ci(r,i),i&&k(t)}}}function Vl(e){let t,n,r;return{c(){t=he("input"),this.h()},l(i){t=de(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,d(t,"class","svelte-17l1npl")},m(i,a){Z(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&k(t)}}}function S0(e){let t,n,r,i,a,l,o,s,u,f,c,h,_,p,w,g,y,E,b=e[1]&&Tl(e),m=e[17]&&Ml(e),A=e[35]&&Nl(e),x=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],V={};for(let T=0;T<x.length;T+=1)V=hi(V,x[T]);let O=!e[7]&&e[29]&&Cl(e),z=e[37]&&Ll(e),H=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&Dl(e),M=e[4]&&Rl(),K=e[5]&&Ol(e),G=(!e[7]||e[7]&&!e[35])&&Fl(e),X=e[7]&&e[35]&&Hl(e);return{c(){t=he("div"),n=he("span"),b&&b.c(),r=Se(),m&&m.c(),i=Se(),A&&A.c(),a=Se(),l=he("input"),s=Se(),O&&O.c(),u=Se(),z&&z.c(),f=Se(),H&&H.c(),c=Se(),M&&M.c(),h=Se(),K&&K.c(),_=Se(),G&&G.c(),p=Se(),X&&X.c(),this.h()},l(T){t=de(T,"DIV",{class:!0,style:!0});var L=P(t);n=de(L,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var te=P(n);b&&b.l(te),te.forEach(k),r=Te(L),m&&m.l(L),i=Te(L),A&&A.l(L),a=Te(L),l=de(L,"INPUT",{placeholder:!0,style:!0}),s=Te(L),O&&O.l(L),u=Te(L),z&&z.l(L),f=Te(L),H&&H.l(L),c=Te(L),M&&M.l(L),h=Te(L),K&&K.l(L),_=Te(L),G&&G.l(L),p=Te(L),X&&X.l(L),L.forEach(k),this.h()},h(){d(n,"aria-live","polite"),d(n,"aria-atomic","false"),d(n,"aria-relevant","additions text"),d(n,"class","a11yText svelte-17l1npl"),Ni(l,V),lt(l,"svelte-17l1npl",!0),d(t,"class",w="selectContainer "+e[21]+" svelte-17l1npl"),d(t,"style",e[11]),lt(t,"hasError",e[10]),lt(t,"multiSelect",e[7]),lt(t,"disabled",e[9]),lt(t,"focused",e[1])},m(T,L){Z(T,t,L),F(t,n),b&&b.m(n,null),F(t,r),m&&m.m(t,null),F(t,i),A&&A.m(t,null),F(t,a),F(t,l),l.autofocus&&l.focus(),e[82](l),Ci(l,e[3]),F(t,s),O&&O.m(t,null),F(t,u),z&&z.m(t,null),F(t,f),H&&H.m(t,null),F(t,c),M&&M.m(t,null),F(t,h),K&&K.m(t,null),F(t,_),G&&G.m(t,null),F(t,p),X&&X.m(t,null),e[85](t),g=!0,y||(E=[W(window,"click",e[41]),W(window,"focusin",e[41]),W(window,"keydown",e[39]),W(l,"focus",e[40]),W(l,"input",e[83]),W(t,"click",e[42])],y=!0)},p(T,L){T[1]?b?b.p(T,L):(b=Tl(T),b.c(),b.m(n,null)):b&&(b.d(1),b=null),T[17]?m?(m.p(T,L),L[0]&131072&&oe(m,1)):(m=Ml(T),m.c(),oe(m,1),m.m(t,i)):m&&(He(),ye(m,1,1,()=>{m=null}),Ve()),T[35]?A?(A.p(T,L),L[1]&16&&oe(A,1)):(A=Nl(T),A.c(),oe(A,1),A.m(t,a)):A&&(He(),ye(A,1,1,()=>{A=null}),Ve()),Ni(l,V=di(x,[(!g||L[0]&8192&&o!==(o=!T[13]))&&{readOnly:o},L[1]&1&&T[31],(!g||L[1]&32)&&{placeholder:T[36]},(!g||L[0]&16384)&&{style:T[14]},(!g||L[0]&512)&&{disabled:T[9]}])),L[0]&8&&l.value!==T[3]&&Ci(l,T[3]),lt(l,"svelte-17l1npl",!0),!T[7]&&T[29]?O?(O.p(T,L),L[0]&536871040&&oe(O,1)):(O=Cl(T),O.c(),oe(O,1),O.m(t,u)):O&&(He(),ye(O,1,1,()=>{O=null}),Ve()),T[37]?z?(z.p(T,L),L[1]&64&&oe(z,1)):(z=Ll(T),z.c(),oe(z,1),z.m(t,f)):z&&(He(),ye(z,1,1,()=>{z=null}),Ve()),!T[37]&&(T[20]||T[19]&&!T[2]||!T[13]&&!T[9]&&!T[4]&&(T[29]&&!T[15]||!T[29]))?H?H.p(T,L):(H=Dl(T),H.c(),H.m(t,c)):H&&(H.d(1),H=null),T[4]?M||(M=Rl(),M.c(),M.m(t,h)):M&&(M.d(1),M=null),T[5]?K?(K.p(T,L),L[0]&32&&oe(K,1)):(K=Ol(T),K.c(),oe(K,1),K.m(t,_)):K&&(He(),ye(K,1,1,()=>{K=null}),Ve()),!T[7]||T[7]&&!T[35]?G?G.p(T,L):(G=Fl(T),G.c(),G.m(t,p)):G&&(G.d(1),G=null),T[7]&&T[35]?X?X.p(T,L):(X=Hl(T),X.c(),X.m(t,null)):X&&(X.d(1),X=null),(!g||L[0]&2097152&&w!==(w="selectContainer "+T[21]+" svelte-17l1npl"))&&d(t,"class",w),(!g||L[0]&2048)&&d(t,"style",T[11]),(!g||L[0]&2098176)&&lt(t,"hasError",T[10]),(!g||L[0]&2097280)&&lt(t,"multiSelect",T[7]),(!g||L[0]&2097664)&&lt(t,"disabled",T[9]),(!g||L[0]&2097154)&&lt(t,"focused",T[1])},i(T){g||(oe(m),oe(A),oe(O),oe(z),oe(K),g=!0)},o(T){ye(m),ye(A),ye(O),ye(z),ye(K),g=!1},d(T){T&&k(t),b&&b.d(),m&&m.d(),A&&A.d(),e[82](null),O&&O.d(),z&&z.d(),H&&H.d(),M&&M.d(),K&&K.d(),G&&G.d(),X&&X.d(),e[85](null),y=!1,et(E)}}}function Pl(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function T0(e,t,n){let r,i,a,l,o,s,u,f;const c=fi();let{id:h=null}=t,{container:_=void 0}=t,{input:p=void 0}=t,{isMulti:w=!1}=t,{multiFullItemClearable:g=!1}=t,{isDisabled:y=!1}=t,{isCreatable:E=!1}=t,{isFocused:b=!1}=t,{value:m=null}=t,{filterText:A=""}=t,{placeholder:x="Select..."}=t,{placeholderAlwaysShow:V=!1}=t,{items:O=null}=t,{itemFilter:z=(v,le,Ie)=>`${v}`.toLowerCase().includes(le.toLowerCase())}=t,{groupBy:H=void 0}=t,{groupFilter:M=v=>v}=t,{isGroupHeaderSelectable:K=!1}=t,{getGroupHeaderLabel:G=v=>v[X]||v.id}=t,{labelIdentifier:X="label"}=t,{getOptionLabel:T=(v,le)=>v.isCreator?`Create "${le}"`:v[X]}=t,{optionIdentifier:L="value"}=t,{loadOptions:te=void 0}=t,{hasError:_e=!1}=t,{containerStyles:R=""}=t,{getSelectionLabel:I=v=>v?v[X]:null}=t,{createGroupHeaderItem:U=v=>({value:v,label:v})}=t,{createItem:q=v=>({value:v,label:v})}=t;const ue=()=>r;let{isSearchable:fe=!0}=t,{inputStyles:me=""}=t,{isClearable:be=!0}=t,{isWaiting:ie=!1}=t,{listPlacement:D="auto"}=t,{listOpen:J=!1}=t,{isVirtualList:N=!1}=t,{loadOptionsInterval:Q=300}=t,{noOptionsMessage:ne="No options"}=t,{hideEmptyState:S=!1}=t,{inputAttributes:Y={}}=t,{listAutoWidth:ge=!0}=t,{itemHeight:Me=40}=t,{Icon:re=void 0}=t,{iconProps:C={}}=t,{showChevron:ce=!1}=t,{showIndicator:B=!1}=t,{containerClasses:j=""}=t,{indicatorSvg:ae=void 0}=t,{listOffset:tt=5}=t,{ClearIcon:ot=k0}=t,{Item:Ue=$a}=t,{List:xe=u0}=t,{Selection:se=h0}=t,{MultiSelection:ve=m0}=t,{VirtualList:Fe=w0}=t;function Pe(v){if(v.loadOptions&&v.filterText.length>0)return;if(!v.items)return[];v.items&&v.items.length>0&&typeof v.items[0]!="object"&&(v.items=Pl(v.items));let le=v.items.filter(Ie=>{let nt=z(T(Ie,v.filterText),v.filterText,Ie);return nt&&v.isMulti&&v.value&&Array.isArray(v.value)&&(nt=!v.value.some(Vt=>Vt[v.optionIdentifier]===Ie[v.optionIdentifier])),nt});return v.groupBy&&(le=lo(le)),v.isCreatable&&(le=st(le,v.filterText)),le}function st(v,le){if(le.length===0)return v;const Ie=q(le);return v[0]&&le===v[0][X]?v:(Ie.isCreator=!0,[...v,Ie])}let{selectedValue:bt=null}=t,Ee,Ce,Ht,gr,pr,Tn;const no=A0(async()=>{n(4,ie=!0);let v=await te(A).catch(le=>{console.warn("svelte-select loadOptions error :>> ",le),c("error",{type:"loadOptions",details:le})});v&&!v.cancelled&&(v?(v&&v.length>0&&typeof v[0]!="object"&&(v=Pl(v)),n(81,r=[...v]),c("loaded",{items:r})):n(81,r=[]),E&&n(81,r=st(r,A)),n(4,ie=!1),n(1,b=!0),n(5,J=!0))},Q);function ro(){typeof m=="string"?n(2,m={[L]:m,label:m}):w&&Array.isArray(m)&&m.length>0&&n(2,m=m.map(v=>typeof v=="string"?{value:v,label:v}:v))}let Xt;function io(){n(31,Xt=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},Y)),h&&n(31,Xt.id=h,Xt),fe||n(31,Xt.readonly=!0,Xt)}function lo(v){const le=[],Ie={};v.forEach(Vt=>{const kt=H(Vt);le.includes(kt)||(le.push(kt),Ie[kt]=[],kt&&Ie[kt].push(Object.assign(U(kt,Vt),{id:kt,isGroupHeader:!0,isSelectable:K}))),Ie[kt].push(Object.assign({isGroupItem:!!kt},Vt))});const nt=[];return M(le).forEach(Vt=>{nt.push(...Ie[Vt])}),nt}function ao(){if(w){JSON.stringify(m)!==JSON.stringify(Ce)&&Si()&&c("select",m);return}(!Ce||JSON.stringify(m[L])!==JSON.stringify(Ce[L]))&&c("select",m)}function oo(){b||J?yr():p&&p.blur()}function so(){m&&(Array.isArray(m)?n(2,m=[...m]):n(2,m=[m]))}function uo(){m&&n(2,m=null)}function fo(){A.length!==0&&(n(1,b=!0),n(5,J=!0),te?no():(n(5,J=!0),w&&n(30,Ee=void 0)))}ma(async()=>{n(77,Ce=m),n(78,Ht=A),n(79,gr=b),n(80,pr=w)});function Si(){let v=!0;if(m){const le=[],Ie=[];m.forEach(nt=>{le.includes(nt[L])?v=!1:(le.push(nt[L]),Ie.push(nt))}),v||n(2,m=Ie)}return v}function Ti(v){let le=v?v[L]:m[L];return O.find(Ie=>Ie[L]===le)}function co(v){!v||v.length===0||v.some(le=>typeof le!="object")||!m||(w?m.some(le=>!le||!le[L]):!m[L])||(Array.isArray(m)?n(2,m=m.map(le=>Ti(le)||le)):n(2,m=Ti()||m))}function Mi(v){const{detail:le}=v,Ie=m[le?le.i:m.length-1];m.length===1?n(2,m=void 0):n(2,m=m.filter(nt=>nt!==Ie)),c("clear",Ie)}function ho(v){if(!!b)switch(v.key){case"ArrowDown":v.preventDefault(),n(5,J=!0),n(30,Ee=void 0);break;case"ArrowUp":v.preventDefault(),n(5,J=!0),n(30,Ee=void 0);break;case"Tab":J||n(1,b=!1);break;case"Backspace":if(!w||A.length>0)return;if(w&&m&&m.length>0){if(Mi(Ee!==void 0?Ee:m.length-1),Ee===0||Ee===void 0)break;n(30,Ee=m.length>Ee?Ee-1:void 0)}break;case"ArrowLeft":if(!w||A.length>0)return;Ee===void 0?n(30,Ee=m.length-1):m.length>Ee&&Ee!==0&&n(30,Ee-=1);break;case"ArrowRight":if(!w||A.length>0||Ee===void 0)return;Ee===m.length-1?n(30,Ee=void 0):Ee<m.length-1&&n(30,Ee+=1);break}}function yr(){n(1,b=!0),p&&p.focus()}function _o(v){if(!_)return;const le=v.path&&v.path.length>0?v.path[0]:v.target;_.contains(le)||_.contains(v.relatedTarget)||(n(1,b=!1),n(5,J=!1),n(30,Ee=void 0),p&&p.blur())}function mo(){y||(n(1,b=!0),n(5,J=!J))}function go(){n(2,m=void 0),n(5,J=!1),c("clear",m),yr()}fr(()=>{b&&p&&p.focus()});function po(v){const{detail:le}=v;if(le){n(3,A="");const Ie=Object.assign({},le);(!Ie.isGroupHeader||Ie.isSelectable)&&(w?n(2,m=m?m.concat([Ie]):[Ie]):n(2,m=Ie),n(2,m),setTimeout(()=>{n(5,J=!1),n(30,Ee=void 0)}))}}function yo(v){const{detail:le}=v;w?(n(2,m=m||[]),n(2,m=[...m,q(le)])):n(2,m=q(le)),c("itemCreated",le),n(3,A=""),n(5,J=!1),n(30,Ee=void 0)}function vo(){n(3,A=""),n(5,J=!1)}let{ariaValues:vr=v=>`Option ${v}, selected.`}=t,{ariaListOpen:wr=(v,le)=>`You are currently focused on option ${v}. There are ${le} results available.`}=t,{ariaFocused:br=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function wo(){let v;return w&&m.length>0?v=m.map(le=>I(le)).join(", "):v=I(m),vr(v)}function bo(){if(!b||!r||r.length===0)return"";let v=r[Tn];if(J&&v){let le=I(v),Ie=r?r.length:0;return wr(le,Ie)}else return br()}function ko(v){Ye[v?"unshift":"push"](()=>{p=v,n(6,p)})}function Ao(){A=this.value,n(3,A)}function Eo(v){Tn=v,n(28,Tn)}function Io(v){Ye[v?"unshift":"push"](()=>{_=v,n(0,_)})}return e.$$set=v=>{"id"in v&&n(46,h=v.id),"container"in v&&n(0,_=v.container),"input"in v&&n(6,p=v.input),"isMulti"in v&&n(7,w=v.isMulti),"multiFullItemClearable"in v&&n(8,g=v.multiFullItemClearable),"isDisabled"in v&&n(9,y=v.isDisabled),"isCreatable"in v&&n(47,E=v.isCreatable),"isFocused"in v&&n(1,b=v.isFocused),"value"in v&&n(2,m=v.value),"filterText"in v&&n(3,A=v.filterText),"placeholder"in v&&n(48,x=v.placeholder),"placeholderAlwaysShow"in v&&n(49,V=v.placeholderAlwaysShow),"items"in v&&n(50,O=v.items),"itemFilter"in v&&n(51,z=v.itemFilter),"groupBy"in v&&n(52,H=v.groupBy),"groupFilter"in v&&n(53,M=v.groupFilter),"isGroupHeaderSelectable"in v&&n(54,K=v.isGroupHeaderSelectable),"getGroupHeaderLabel"in v&&n(55,G=v.getGroupHeaderLabel),"labelIdentifier"in v&&n(56,X=v.labelIdentifier),"getOptionLabel"in v&&n(57,T=v.getOptionLabel),"optionIdentifier"in v&&n(58,L=v.optionIdentifier),"loadOptions"in v&&n(59,te=v.loadOptions),"hasError"in v&&n(10,_e=v.hasError),"containerStyles"in v&&n(11,R=v.containerStyles),"getSelectionLabel"in v&&n(12,I=v.getSelectionLabel),"createGroupHeaderItem"in v&&n(60,U=v.createGroupHeaderItem),"createItem"in v&&n(61,q=v.createItem),"isSearchable"in v&&n(13,fe=v.isSearchable),"inputStyles"in v&&n(14,me=v.inputStyles),"isClearable"in v&&n(15,be=v.isClearable),"isWaiting"in v&&n(4,ie=v.isWaiting),"listPlacement"in v&&n(63,D=v.listPlacement),"listOpen"in v&&n(5,J=v.listOpen),"isVirtualList"in v&&n(64,N=v.isVirtualList),"loadOptionsInterval"in v&&n(65,Q=v.loadOptionsInterval),"noOptionsMessage"in v&&n(66,ne=v.noOptionsMessage),"hideEmptyState"in v&&n(67,S=v.hideEmptyState),"inputAttributes"in v&&n(16,Y=v.inputAttributes),"listAutoWidth"in v&&n(68,ge=v.listAutoWidth),"itemHeight"in v&&n(69,Me=v.itemHeight),"Icon"in v&&n(17,re=v.Icon),"iconProps"in v&&n(18,C=v.iconProps),"showChevron"in v&&n(19,ce=v.showChevron),"showIndicator"in v&&n(20,B=v.showIndicator),"containerClasses"in v&&n(21,j=v.containerClasses),"indicatorSvg"in v&&n(22,ae=v.indicatorSvg),"listOffset"in v&&n(70,tt=v.listOffset),"ClearIcon"in v&&n(23,ot=v.ClearIcon),"Item"in v&&n(71,Ue=v.Item),"List"in v&&n(24,xe=v.List),"Selection"in v&&n(25,se=v.Selection),"MultiSelection"in v&&n(26,ve=v.MultiSelection),"VirtualList"in v&&n(72,Fe=v.VirtualList),"selectedValue"in v&&n(73,bt=v.selectedValue),"ariaValues"in v&&n(74,vr=v.ariaValues),"ariaListOpen"in v&&n(75,wr=v.ariaListOpen),"ariaFocused"in v&&n(76,br=v.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Pe({loadOptions:te,filterText:A,items:O,value:m,isMulti:w,optionIdentifier:L,groupBy:H,isCreatable:E})),e.$$.dirty[2]&2048&&bt&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&co(O),e.$$.dirty[0]&4&&m&&ro(),e.$$.dirty[0]&73728&&(Y||!fe)&&io(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(w&&so(),pr&&!w&&uo()),e.$$.dirty[0]&132&&w&&m&&m.length>1&&Si(),e.$$.dirty[0]&4&&m&&ao(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!m&&w&&Ce&&c("select",m),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&b!==gr&&oo(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&A!==Ht&&fo(),e.$$.dirty[0]&12&&n(29,i=m&&A.length===0),e.$$.dirty[0]&536904208&&n(37,a=i&&be&&!y&&!ie),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=V&&w?x:m?"":x),e.$$.dirty[0]&132&&n(35,o=w&&m&&m.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:Ue,filterText:A,optionIdentifier:L,noOptionsMessage:ne,hideEmptyState:S,isVirtualList:N,VirtualList:Fe,value:m,isMulti:w,getGroupHeaderLabel:G,items:r,itemHeight:Me,getOptionLabel:T,listPlacement:D,parent:_,listAutoWidth:ge,listOffset:tt}),e.$$.dirty[0]&132&&n(33,u=m?wo():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,f=bo())},[_,b,m,A,ie,J,p,w,g,y,_e,R,I,fe,me,be,Y,re,C,ce,B,j,ae,ot,xe,se,ve,go,Tn,i,Ee,Xt,f,u,s,o,l,a,Mi,ho,yr,_o,mo,po,yo,vo,h,E,x,V,O,z,H,M,K,G,X,T,L,te,U,q,ue,D,N,Q,ne,S,ge,Me,tt,Ue,Fe,bt,vr,wr,br,Ce,Ht,gr,pr,r,ko,Ao,Eo,Io]}class Bl extends ct{constructor(t){super(),ht(this,t,T0,S0,dt,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function M0(e){const t=e-1;return t*t*t+1}function N0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),a=i.transform==="none"?"":i.transform,[l,o]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*o/n.height-(n.top+o),{delay:f=0,duration:c=_=>Math.sqrt(_)*120,easing:h=M0}=r;return{delay:f,duration:Xe(c)?c(Math.sqrt(s*s+u*u)):c,easing:h,css:(_,p)=>{const w=p*s,g=p*u,y=_+p*t.width/n.width,E=_+p*t.height/n.height;return`transform: ${a} translate(${w}px, ${g}px) scale(${y}, ${E});`}}}function C0(e,{delay:t=0,duration:n=400,easing:r=Vo}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}const en=_i([2020]),Qe=_i(new Set),Kn=_i(!0);class L0{constructor(t){Oe(this,"id");Oe(this,"code");Oe(this,"name");Oe(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class Wn{constructor(t){Oe(this,"id");Oe(this,"code");Oe(this,"name");Oe(this,"level");Oe(this,"parent_id");Oe(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class Mt{constructor(t,n,r){Oe(this,"location_id");Oe(this,"location");Oe(this,"partner_id");Oe(this,"partner");Oe(this,"product_id");Oe(this,"product");Oe(this,"year");Oe(this,"export_value");Oe(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}function Gl(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function zl(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function Ul(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function D0(e){let t,n,r,i,a;return{c(){t=$("text"),n=ke("No valid data for this pair."),this.h()},l(l){t=ee(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=P(t);n=Ae(o,"No valid data for this pair."),o.forEach(k),this.h()},h(){d(t,"x",r=e[4]/2),d(t,"y",i=e[10]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){Z(l,t,o),F(t,n)},p(l,o){o[0]&16&&r!==(r=l[4]/2)&&d(t,"x",r),o[0]&1024&&i!==(i=l[10]/2)&&d(t,"y",i)},i(l){a||En(()=>{a=Po(t,C0,{}),a.start()})},o:Ne,d(l){l&&k(t)}}}function R0(e){var Q,ne;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,a,l,o=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",s,u,f,c,h=((Q=e[2])==null?void 0:Q.name)+" ",_,p=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",w,g,y=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",E,b,m=((ne=e[3])==null?void 0:ne.name)+"",A,x,V,O=[],z=new Map,H,M=[],K=new Map,G,X=[],T=new Map,L,te,_e,R,I,U,q,ue,fe,me=e[11];const be=S=>S[44].product_id;for(let S=0;S<me.length;S+=1){let Y=Ul(e,me,S),ge=be(Y);z.set(ge,O[S]=Xl(ge,Y))}let ie=e[11];const D=S=>S[46];for(let S=0;S<ie.length;S+=1){let Y=zl(e,ie,S),ge=D(Y);K.set(ge,M[S]=xl(ge,Y))}let J=e[11];const N=S=>S[44].product_id;for(let S=0;S<J.length;S+=1){let Y=Gl(e,J,S),ge=N(Y);T.set(ge,X[S]=ql(ge,Y))}return{c(){t=$("text"),n=ke("Sector "),i=ke(r),a=$("text"),l=ke("Trade Flow "),s=ke(o),f=$("text"),c=ke("From "),_=ke(h),w=ke(p),g=$("text"),E=ke(y),b=ke("\xA0From "),A=ke(m),V=$("g");for(let S=0;S<O.length;S+=1)O[S].c();H=pe();for(let S=0;S<M.length;S+=1)M[S].c();G=pe();for(let S=0;S<X.length;S+=1)X[S].c();L=$("line"),R=$("line"),U=$("g"),q=$("g"),this.h()},l(S){t=ee(S,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var Y=P(t);n=Ae(Y,"Sector "),i=Ae(Y,r),Y.forEach(k),a=ee(S,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var ge=P(a);l=Ae(ge,"Trade Flow "),s=Ae(ge,o),ge.forEach(k),f=ee(S,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var Me=P(f);c=Ae(Me,"From "),_=Ae(Me,h),w=Ae(Me,p),Me.forEach(k),g=ee(S,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var re=P(g);E=Ae(re,y),b=Ae(re,"\xA0From "),A=Ae(re,m),re.forEach(k),V=ee(S,"g",{id:!0,transform:!0});var C=P(V);for(let ce=0;ce<O.length;ce+=1)O[ce].l(C);H=pe();for(let ce=0;ce<M.length;ce+=1)M[ce].l(C);G=pe();for(let ce=0;ce<X.length;ce+=1)X[ce].l(C);L=ee(C,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),P(L).forEach(k),R=ee(C,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),P(R).forEach(k),U=ee(C,"g",{id:!0}),P(U).forEach(k),C.forEach(k),q=ee(S,"g",{id:!0,class:!0}),P(q).forEach(k),this.h()},h(){var S,Y,ge,Me;d(t,"text-anchor","start"),d(t,"class","chart-header sortable svelte-1dlqwym"),d(t,"x",15),d(t,"y",hn/2),d(t,"alignment-baseline","hanging"),d(a,"text-anchor","middle"),d(a,"class","chart-header sortable svelte-1dlqwym"),d(a,"x",u=(e[4]-yt)/2+yt),d(a,"y",hn/2-7),d(a,"alignment-baseline","hanging"),d(f,"class","from-label sortable svelte-1dlqwym"),d(f,"x",yt+20),d(f,"y",hn/2-5),d(f,"alignment-baseline","hanging"),d(f,"font-size","13"),d(g,"class","from-label sortable svelte-1dlqwym"),d(g,"x",x=e[4]-20),d(g,"y",hn/2-5),d(g,"text-anchor","end"),d(g,"alignment-baseline","hanging"),d(g,"font-size","13"),d(L,"id","midline"),d(L,"transform",te=`translate(${e[6](0)},0)`),d(L,"y1",20),d(L,"y2",_e=(((Y=(S=e[11])==null?void 0:S.length)!=null?Y:0)+1)*Ze),d(L,"stroke","rgba(0,0,0,0.7)"),d(L,"stroke-width","1"),d(L,"class","svelte-1dlqwym"),d(R,"x1",yt),d(R,"y1",0),d(R,"x2",yt),d(R,"y2",I=(((Me=(ge=e[11])==null?void 0:ge.length)!=null?Me:0)+1)*Ze),d(R,"stroke","rgba(0,0,0,0.1)"),d(R,"stroke-width","1"),d(U,"id","axis"),d(V,"id","bar-content"),d(V,"transform",`translate(${0},${hn})`),d(q,"id","bar-chart-tooltip"),d(q,"class","tooltip")},m(S,Y){Z(S,t,Y),F(t,n),F(t,i),Z(S,a,Y),F(a,l),F(a,s),Z(S,f,Y),F(f,c),F(f,_),F(f,w),Z(S,g,Y),F(g,E),F(g,b),F(g,A),Z(S,V,Y);for(let ge=0;ge<O.length;ge+=1)O[ge].m(V,null);F(V,H);for(let ge=0;ge<M.length;ge+=1)M[ge].m(V,null);F(V,G);for(let ge=0;ge<X.length;ge+=1)X[ge].m(V,null);F(V,L),F(V,R),F(V,U),e[37](U),Z(S,q,Y),ue||(fe=[W(t,"click",e[30]),W(t,"keydown",H0),W(a,"click",e[31]),W(a,"keydown",V0),W(f,"keydown",P0),W(f,"click",e[32]),W(g,"click",e[33]),W(g,"keydown",B0)],ue=!0)},p(S,Y){var ge,Me,re,C,ce,B;if(Y[0]&3&&r!==(r=S[1]==S[0].AlphaUp?"\u2191":S[1]==S[0].AlphaDown?"\u2193":" ")&&We(i,r),Y[0]&3&&o!==(o=S[1]==S[0].Up?"\u2191":S[1]==S[0].Down?"\u2193":" ")&&We(s,o),Y[0]&16&&u!==(u=(S[4]-yt)/2+yt)&&d(a,"x",u),Y[0]&4&&h!==(h=((ge=S[2])==null?void 0:ge.name)+" ")&&We(_,h),Y[0]&3&&p!==(p=S[1]==S[0].LeftUp?"\u2191":S[1]==S[0].LeftDown?"\u2193":" ")&&We(w,p),Y[0]&3&&y!==(y=S[1]==S[0].RightUp?"\u2191":S[1]==S[0].RightDown?"\u2193":" ")&&We(E,y),Y[0]&8&&m!==(m=((Me=S[3])==null?void 0:Me.name)+"")&&We(A,m),Y[0]&16&&x!==(x=S[4]-20)&&d(g,"x",x),Y[0]&2064&&(me=S[11],O=Rt(O,Y,be,1,S,me,z,V,tn,Xl,H,Ul)),Y[0]&129472&&(ie=S[11],M=Rt(M,Y,D,1,S,ie,K,V,tn,xl,G,zl)),Y[0]&6144){J=S[11];for(let j=0;j<X.length;j+=1)X[j].r();X=Rt(X,Y,N,1,S,J,T,V,Bo,ql,L,Gl);for(let j=0;j<X.length;j+=1)X[j].a()}Y[0]&64&&te!==(te=`translate(${S[6](0)},0)`)&&d(L,"transform",te),Y[0]&2048&&_e!==(_e=(((C=(re=S[11])==null?void 0:re.length)!=null?C:0)+1)*Ze)&&d(L,"y2",_e),Y[0]&2048&&I!==(I=(((B=(ce=S[11])==null?void 0:ce.length)!=null?B:0)+1)*Ze)&&d(R,"y2",I)},i:Ne,o:Ne,d(S){S&&k(t),S&&k(a),S&&k(f),S&&k(g),S&&k(V);for(let Y=0;Y<O.length;Y+=1)O[Y].d();for(let Y=0;Y<M.length;Y+=1)M[Y].d();for(let Y=0;Y<X.length;Y+=1)X[Y].d();e[37](null),S&&k(q),ue=!1,et(fe)}}}function Yl(e){let t,n;return{c(){t=$("rect"),this.h()},l(r){t=ee(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),P(t).forEach(k),this.h()},h(){d(t,"x","0"),d(t,"y",n=e[46]*Ze+on),d(t,"height",Ze),d(t,"width",e[4]),d(t,"fill","rgba(0,0,0,0.04)"),d(t,"class","svelte-1dlqwym")},m(r,i){Z(r,t,i)},p(r,i){i[0]&2048&&n!==(n=r[46]*Ze+on)&&d(t,"y",n),i[0]&16&&d(t,"width",r[4])},d(r){r&&k(t)}}}function Xl(e,t){let n,r,i=t[46]%2==0&&Yl(t);return{key:e,first:null,c(){n=pe(),i&&i.c(),r=pe(),this.h()},l(a){n=pe(),i&&i.l(a),r=pe(),this.h()},h(){this.first=n},m(a,l){Z(a,n,l),i&&i.m(a,l),Z(a,r,l)},p(a,l){t=a,t[46]%2==0?i?i.p(t,l):(i=Yl(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&k(n),i&&i.d(a),a&&k(r)}}}function xl(e,t){let n,r,i,a,l,o,s,u,f,c,h,_,p,w,g;function y(){return t[34](t[44])}function E(){return t[35](t[44])}return{key:e,first:null,c(){n=$("g"),r=$("rect"),l=$("rect"),f=$("rect"),this.h()},l(b){n=ee(b,"g",{class:!0,transform:!0});var m=P(n);r=ee(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),P(r).forEach(k),l=ee(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),P(l).forEach(k),f=ee(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),P(f).forEach(k),m.forEach(k),this.h()},h(){d(r,"class","tab svelte-1dlqwym"),d(r,"x","0"),d(r,"y","2"),d(r,"height",Ze-4),d(r,"width",i=t[12].size>0&&t[12].has(t[44].product_id)?yt-1:6),d(r,"fill",a=t[7]?t[7](t[44].product.name):"white"),d(l,"class","country1-bar svelte-1dlqwym"),d(l,"x",o=t[6](-t[44].export_value)),d(l,"y",On/2),d(l,"height",Ze-On),d(l,"width",s=t[6](0)-t[6](-t[44].export_value)),d(l,"fill",u=t[8](t[44].location_id)),d(f,"class","country2-bar svelte-1dlqwym"),d(f,"x",c=t[6](0)),d(f,"y",On/2),d(f,"height",Ze-On),d(f,"width",h=t[6](t[44].import_value)-t[6](0)),d(f,"fill",_=t[8](t[44].partner_id)),d(n,"class","bar-row"),d(n,"transform",p=`translate(0, ${t[46]*Ze+on})`),this.first=n},m(b,m){Z(b,n,m),F(n,r),F(n,l),F(n,f),w||(g=[W(l,"focus",t[29]),W(l,"keydown",G0),W(l,"mouseover",function(){Xe(t[14](t[44],!0))&&t[14](t[44],!0).apply(this,arguments)}),W(l,"mousemove",t[15]()),W(l,"mouseleave",t[16]()),W(l,"click",y),W(f,"focus",t[28]),W(f,"keydown",z0),W(f,"mouseover",function(){Xe(t[14](t[44],!1))&&t[14](t[44],!1).apply(this,arguments)}),W(f,"mousemove",t[15]()),W(f,"mouseleave",t[16]()),W(f,"click",E)],w=!0)},p(b,m){t=b,m[0]&6144&&i!==(i=t[12].size>0&&t[12].has(t[44].product_id)?yt-1:6)&&d(r,"width",i),m[0]&2176&&a!==(a=t[7]?t[7](t[44].product.name):"white")&&d(r,"fill",a),m[0]&2112&&o!==(o=t[6](-t[44].export_value))&&d(l,"x",o),m[0]&2112&&s!==(s=t[6](0)-t[6](-t[44].export_value))&&d(l,"width",s),m[0]&2304&&u!==(u=t[8](t[44].location_id))&&d(l,"fill",u),m[0]&64&&c!==(c=t[6](0))&&d(f,"x",c),m[0]&2112&&h!==(h=t[6](t[44].import_value)-t[6](0))&&d(f,"width",h),m[0]&2304&&_!==(_=t[8](t[44].partner_id))&&d(f,"fill",_),m[0]&2048&&p!==(p=`translate(0, ${t[46]*Ze+on})`)&&d(n,"transform",p)},d(b){b&&k(n),w=!1,et(g)}}}function ql(e,t){let n,r=t[44].product.name+"",i,a,l,o=Ne,s,u;function f(){return t[36](t[44])}return{key:e,first:null,c(){n=$("text"),i=ke(r),this.h()},l(c){n=ee(c,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var h=P(n);i=Ae(h,r),h.forEach(k),this.h()},h(){d(n,"class","product-text svelte-1dlqwym"),d(n,"alignment-baseline","hanging"),d(n,"x","10"),d(n,"y",a=t[46]*Ze+on+6),this.first=n},m(c,h){Z(c,n,h),F(n,i),s||(u=[W(n,"click",f),W(n,"keydown",U0)],s=!0)},p(c,h){t=c,h[0]&2048&&r!==(r=t[44].product.name+"")&&We(i,r),h[0]&2048&&a!==(a=t[46]*Ze+on+6)&&d(n,"y",a)},r(){l=n.getBoundingClientRect()},f(){Go(n),o()},a(){o(),o=zo(n,l,N0,{duration:400,delay:20})},d(c){c&&k(n),s=!1,et(u)}}}function Kl(e){let t,n,r,i,a;return{c(){t=$("rect"),n=$("text"),r=ke("Loading..."),this.h()},l(l){t=ee(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),P(t).forEach(k),n=ee(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=P(n);r=Ae(o,"Loading..."),o.forEach(k),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[4]),d(t,"height",e[10]),d(t,"fill","rgba(255,255,255,0.9)"),d(t,"class","svelte-1dlqwym"),d(n,"x",i=e[4]/2),d(n,"y",a=e[10]/2),d(n,"alignment-baseline","central"),d(n,"text-anchor","middle")},m(l,o){Z(l,t,o),Z(l,n,o),F(n,r)},p(l,o){o[0]&16&&d(t,"width",l[4]),o[0]&1024&&d(t,"height",l[10]),o[0]&16&&i!==(i=l[4]/2)&&d(n,"x",i),o[0]&1024&&a!==(a=l[10]/2)&&d(n,"y",a)},d(l){l&&k(t),l&&k(n)}}}function O0(e){let t,n,r,i;function a(u,f){return u[11]&&u[11].length>0?R0:D0}let l=a(e),o=l(e),s=e[9]&&Kl(e);return{c(){t=he("div"),n=$("svg"),o.c(),r=pe(),s&&s.c(),this.h()},l(u){t=de(u,"DIV",{id:!0,class:!0});var f=P(t);n=ee(f,"svg",{class:!0});var c=P(n);o.l(c),r=pe(),s&&s.l(c),c.forEach(k),f.forEach(k),this.h()},h(){d(n,"class","svelte-1dlqwym"),d(t,"id","bar-chart"),d(t,"class","viz-section svelte-1dlqwym"),En(()=>e[38].call(t))},m(u,f){Z(u,t,f),F(t,n),o.m(n,null),F(n,r),s&&s.m(n,null),i=cr(t,e[38].bind(t))},p(u,f){l===(l=a(u))&&o?o.p(u,f):(o.d(1),o=l(u),o&&(o.c(),oe(o,1),o.m(n,r))),u[9]?s?s.p(u,f):(s=Kl(u),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i(u){oe(o)},o:Ne,d(u){u&&k(t),o.d(),s&&s.d(),i()}}}const hn=40,Ze=30,Wl=0,F0=10,on=30,yt=100,On=4,Fn=10,Zl=140,Jl=25,si=105,Ct=20,Lt=35,Wt=22;function mt(e,t){return e+si<350?e+t:e+t-si}const H0=()=>{},V0=()=>{},P0=()=>{},B0=()=>{},G0=()=>{},z0=()=>{},U0=()=>{};function Y0(e,t,n){let r,i,a,l,o,s,u,f,c,h,_,p,w;Ot(e,en,N=>n(27,_=N)),Ot(e,Qe,N=>n(12,p=N)),Ot(e,Kn,N=>n(13,w=N));let{data:g}=t;var y;(function(N){N[N.LeftUp=0]="LeftUp",N[N.LeftDown=1]="LeftDown",N[N.RightUp=2]="RightUp",N[N.RightDown=3]="RightDown",N[N.Up=4]="Up",N[N.Down=5]="Down",N[N.AlphaUp=6]="AlphaUp",N[N.AlphaDown=7]="AlphaDown"})(y||(y={}));let E=y.AlphaDown,{bilateralData:b,productColorScale:m,countryColorScale:A,country1:x,country2:V,loadingDrilldown:O,productData:z,locationData:H}=g,M=800,K=550,G;const X=N=>Ft("$.3s")(N).replace(/G/,"B");function T(N,Q,ne){return N+ne<M?N+Q:N+Q-ne}function L(N,Q){return ne=>{let S=we("#bar-chart-tooltip"),Y=Zl+_.length*Jl;S.append("rect").attr("id","tooltip-rect").attr("width",Y).attr("height",si).attr("x",T(ne.layerX,Fn,Y)).attr("y",mt(ne.layerY,Fn)),S.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",T(ne.layerX,Ct,Y)).attr("y",mt(ne.layerY,Lt)).style("fill",A?A(Q?N.location_id:N.partner_id):"black").text(`${N.product.name}`),S.append("text").attr("id","tooltip-text2").attr("x",T(ne.layerX,Ct,Y)).attr("y",mt(ne.layerY,Lt+Wt)).text((Q?"Export: ":"Import: ")+`${X(Q?N.export_value:N.import_value)}`),S.append("text").attr("id","tooltip-text3").attr("x",T(ne.layerX,Ct,Y)).attr("y",mt(ne.layerY,Lt+2*Wt)).text(`Share: ${Ft(".2%")(Q?N.export_value/f:N.import_value/c)}`),S.append("text").attr("id","tooltip-text4").attr("x",T(ne.layerX,Ct,Y)).attr("y",mt(ne.layerY,Lt+3*Wt)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function te(){return N=>{let Q=Zl+_.length*Jl;we("#tooltip-rect").attr("x",T(N.layerX,Fn,Q)).attr("y",mt(N.layerY,Fn)),we("#tooltip-text1").attr("x",T(N.layerX,Ct,Q)).attr("y",mt(N.layerY,Lt)),we("#tooltip-text2").attr("x",T(N.layerX,Ct,Q)).attr("y",mt(N.layerY,Lt+Wt)),we("#tooltip-text3").attr("x",T(N.layerX,Ct,Q)).attr("y",mt(N.layerY,Lt+2*Wt)),we("#tooltip-text4").attr("x",T(N.layerX,Ct,Q)).attr("y",mt(N.layerY,Lt+3*Wt))}}function _e(){return N=>{we("#bar-chart-tooltip").selectAll("rect").remove(),we("#bar-chart-tooltip").selectAll("text").remove()}}function R(N){Ke.call(this,e,N)}function I(N){Ke.call(this,e,N)}const U=()=>{E==y.AlphaDown?n(1,E=y.AlphaUp):n(1,E=y.AlphaDown)},q=()=>{E==y.Down?n(1,E=y.Up):n(1,E=y.Down)},ue=()=>{E==y.LeftDown?n(1,E=y.LeftUp):n(1,E=y.LeftDown)},fe=()=>{E==y.RightDown?n(1,E=y.RightUp):n(1,E=y.RightDown)},me=N=>{w||(Kn.set(!0),Qe.update(Q=>(Q.clear(),Q))),p.has(N==null?void 0:N.product_id)?Qe.update(Q=>{var ne;return Q.delete((ne=N==null?void 0:N.product_id)!=null?ne:-1),console.log(Q),Q}):(N==null?void 0:N.product_id)>=0&&Qe.update(Q=>{var ne;return Q.add((ne=N==null?void 0:N.product_id)!=null?ne:-1),console.log(Q),Q})},be=N=>{w&&(Kn.set(!1),Qe.update(Q=>(Q.clear(),Q))),p.has(N==null?void 0:N.product_id)?Qe.update(Q=>{var ne;return Q.delete((ne=N==null?void 0:N.product_id)!=null?ne:-1),console.log(Q),Q}):(N==null?void 0:N.product_id)>=0&&Qe.update(Q=>{var ne;return Q.add((ne=N==null?void 0:N.product_id)!=null?ne:-1),console.log(Q),Q})},ie=N=>{p.has(N.product_id)?Qe.update(Q=>(Q.delete(N.product_id),Q)):Qe.update(Q=>(Q.add(N.product_id),Q))};function D(N){Ye[N?"unshift":"push"](()=>{G=N,n(5,G)})}function J(){M=this.clientWidth,K=this.clientHeight,n(4,M),n(10,K)}return e.$$set=N=>{"data"in N&&n(17,g=N.data)},e.$$.update=()=>{var N,Q,ne;if(e.$$.dirty[0]&131072&&n(18,{bilateralData:b,productColorScale:m,countryColorScale:A,country1:x,country2:V,loadingDrilldown:O,productData:z,locationData:H}=g,b,(n(7,m),n(17,g)),(n(8,A),n(17,g)),(n(2,x),n(17,g)),(n(3,V),n(17,g)),(n(9,O),n(17,g)),(n(19,z),n(17,g)),(n(20,H),n(17,g))),e.$$.dirty[0]&262156&&n(26,r=(ne=b==null?void 0:b.get((N=x==null?void 0:x.id)!=null?N:0))==null?void 0:ne.get((Q=V==null?void 0:V.id)!=null?Q:0)),e.$$.dirty[0]&201326592&&n(25,i=_.map(S=>{var Y;return(Y=r==null?void 0:r.get(S))!=null?Y:new Array}).flat()),e.$$.dirty[0]&35127308&&n(23,a=Array.from(Br(i,S=>{var Y,ge;return S.reduce((Me,re)=>(Me.export_value+=re.export_value,Me.import_value+=re.import_value,Me),new Mt(H,z,{location_id:(Y=x==null?void 0:x.id)!=null?Y:0,partner_id:(ge=V==null?void 0:V.id)!=null?ge:0,product_id:S[0].product_id,year:0,export_value:0,import_value:0}))},S=>S.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=a.filter(S=>S.product.level=="section")),e.$$.dirty[0]&16777219&&n(11,o=l.sort((S,Y)=>{switch(E){case y.LeftUp:return S.export_value-Y.export_value;case y.LeftDown:return Y.export_value-S.export_value;case y.RightUp:return S.import_value-Y.import_value;case y.RightDown:return Y.import_value-S.import_value;case y.Up:return S.import_value+S.export_value-(Y.import_value+Y.export_value);case y.Down:return Y.import_value+Y.export_value-(S.import_value+S.export_value);case y.AlphaDown:return S.product.name.localeCompare(Y.product.name);case y.AlphaUp:return Y.product.name.localeCompare(S.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=pn(a,S=>S.export_value)),e.$$.dirty[0]&8388608&&n(21,u=pn(a,S=>S.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(f=Jn(a,S=>S.export_value)),e.$$.dirty[0]&8388608&&(c=Jn(a,S=>S.import_value)),e.$$.dirty[0]&6291472&&n(6,h=yn().domain([-s,u]).range([yt+Wl,M-Wl-F0])),e.$$.dirty[0]&96){let S=wa(h).tickFormat(Y=>X(Math.abs(Y)));we(G).transition().call(S)}},[y,E,x,V,M,G,h,m,A,O,K,o,p,w,L,te,_e,g,b,z,H,u,s,a,l,i,r,_,R,I,U,q,ue,fe,me,be,ie,D,J]}class X0 extends ct{constructor(t){super(),ht(this,t,Y0,O0,dt,{data:17},null,[-1,-1])}}function Ql(e,t,n){const r=e.slice();return r[52]=t[n],r}function jl(e,t,n){const r=e.slice();return r[52]=t[n],r}function $l(e,t,n){const r=e.slice();return r[52]=t[n],r}function ea(e){let t,n,r;return{c(){t=$("rect"),this.h()},l(i){t=ee(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),P(t).forEach(k),this.h()},h(){d(t,"class","timebar svelte-o11v01"),d(t,"x",n=e[12](e[18][0])-12),d(t,"y",44),d(t,"width","24"),d(t,"height",r=e[3]-44-at),d(t,"fill","rgba(0,0,0,0.2)")},m(i,a){Z(i,t,a)},p(i,a){a[0]&266240&&n!==(n=i[12](i[18][0])-12)&&d(t,"x",n),a[0]&8&&r!==(r=i[3]-44-at)&&d(t,"height",r)},d(i){i&&k(t)}}}function ta(e){let t,n,r,i;return{c(){t=$("line"),this.h()},l(a){t=ee(a,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),P(t).forEach(k),this.h()},h(){d(t,"id","zeroline"),d(t,"x1",ur),d(t,"x2",n=e[2]-Tt),d(t,"y1",r=e[10](0)),d(t,"y2",i=e[10](0)),d(t,"stroke","rgba(0,0,0,0.7)"),d(t,"stroke-width","1")},m(a,l){Z(a,t,l)},p(a,l){l[0]&4&&n!==(n=a[2]-Tt)&&d(t,"x2",n),l[0]&1024&&r!==(r=a[10](0))&&d(t,"y1",r),l[0]&1024&&i!==(i=a[10](0))&&d(t,"y2",i)},d(a){a&&k(t)}}}function na(e,t){let n,r,i,a,l,o,s,u;return{key:e,first:null,c(){n=$("rect"),this.h()},l(f){n=ee(f,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),P(n).forEach(k),this.h()},h(){d(n,"x",r=t[12](t[52].year)-vn/2),d(n,"width",vn),d(n,"y",i=t[24](t[52])),d(n,"height",a=t[25](t[52])),d(n,"fill",l=t[52].export_value<t[52].import_value?"#e41a1c":"#4daf4a"),d(n,"stroke",o=t[18].includes(t[52].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"opacity","0.6"),d(n,"class","svelte-o11v01"),this.first=n},m(f,c){Z(f,n,c),s||(u=[W(n,"click",function(){Xe(t[19](t[52].year))&&t[19](t[52].year).apply(this,arguments)}),W(n,"keydown",K0),W(n,"keypress",t[37]),W(n,"click",function(){Xe(t[19](t[52].year))&&t[19](t[52].year).apply(this,arguments)}),W(n,"focus",t[38]),W(n,"blur",t[39]),W(n,"mouseover",function(){Xe(t[21](t[52]))&&t[21](t[52]).apply(this,arguments)}),W(n,"mousemove",t[22]()),W(n,"mouseout",t[23]())],s=!0)},p(f,c){t=f,c[0]&12288&&r!==(r=t[12](t[52].year)-vn/2)&&d(n,"x",r),c[0]&8192&&i!==(i=t[24](t[52]))&&d(n,"y",i),c[0]&8192&&a!==(a=t[25](t[52]))&&d(n,"height",a),c[0]&8192&&l!==(l=t[52].export_value<t[52].import_value?"#e41a1c":"#4daf4a")&&d(n,"fill",l),c[0]&270336&&o!==(o=t[18].includes(t[52].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",o)},d(f){f&&k(n),s=!1,et(u)}}}function ra(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=$("circle"),this.h()},l(u){n=ee(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),P(n).forEach(k),this.h()},h(){d(n,"class","circ1 svelte-o11v01"),d(n,"cx",r=t[12](t[52].year)),d(n,"cy",i=t[11](t[52].export_value)),d(n,"r","6"),d(n,"fill",a=t[14](t[0])),d(n,"stroke",l=t[18].includes(t[52].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),this.first=n},m(u,f){Z(u,n,f),o||(s=[W(n,"click",function(){Xe(t[19](t[52].year))&&t[19](t[52].year).apply(this,arguments)}),W(n,"keydown",W0),W(n,"keypress",t[34]),W(n,"click",function(){Xe(t[19](t[52].year))&&t[19](t[52].year).apply(this,arguments)}),W(n,"focus",t[35]),W(n,"blur",t[36]),W(n,"mouseover",function(){Xe(t[20](t[52],!0))&&t[20](t[52],!0).apply(this,arguments)}),W(n,"mouseout",t[23]())],o=!0)},p(u,f){t=u,f[0]&12288&&r!==(r=t[12](t[52].year))&&d(n,"cx",r),f[0]&10240&&i!==(i=t[11](t[52].export_value))&&d(n,"cy",i),f[0]&16385&&a!==(a=t[14](t[0]))&&d(n,"fill",a),f[0]&270336&&l!==(l=t[18].includes(t[52].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&k(n),o=!1,et(s)}}}function ia(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=$("circle"),this.h()},l(u){n=ee(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),P(n).forEach(k),this.h()},h(){d(n,"cx",r=t[12](t[52].year)),d(n,"cy",i=t[11](t[52].import_value)),d(n,"r","6"),d(n,"fill",a=t[14](t[1])),d(n,"stroke",l=t[18].includes(t[52].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),d(n,"class","svelte-o11v01"),this.first=n},m(u,f){Z(u,n,f),o||(s=[W(n,"click",function(){Xe(t[19](t[52].year))&&t[19](t[52].year).apply(this,arguments)}),W(n,"keydown",Z0),W(n,"keypress",t[31]),W(n,"click",function(){Xe(t[19](t[52].year))&&t[19](t[52].year).apply(this,arguments)}),W(n,"focus",t[32]),W(n,"blur",t[33]),W(n,"mouseover",function(){Xe(t[20](t[52],!1))&&t[20](t[52],!1).apply(this,arguments)}),W(n,"mouseout",t[23]())],o=!0)},p(u,f){t=u,f[0]&12288&&r!==(r=t[12](t[52].year))&&d(n,"cx",r),f[0]&10240&&i!==(i=t[11](t[52].import_value))&&d(n,"cy",i),f[0]&16386&&a!==(a=t[14](t[1]))&&d(n,"fill",a),f[0]&270336&&l!==(l=t[18].includes(t[52].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&k(n),o=!1,et(s)}}}function x0(e){let t,n,r,i,a,l,o,s,u,f,c,h,_,p,w,g,y,E,b,m,A,x,V,O,z,H,M,K,G,X,T,L,te=[],_e=new Map,R,I,U,q=[],ue=new Map,fe,me,be,ie=[],D=new Map,J,N,Q,ne=!e[15]&&ea(e),S=e[17]>0&&e[16]<0&&ta(e),Y=e[13];const ge=B=>B[52].year;for(let B=0;B<Y.length;B+=1){let j=$l(e,Y,B),ae=ge(j);_e.set(ae,te[B]=na(ae,j))}let Me=e[13];const re=B=>B[52].year;for(let B=0;B<Me.length;B+=1){let j=jl(e,Me,B),ae=re(j);ue.set(ae,q[B]=ra(ae,j))}let C=e[13];const ce=B=>B[52].year;for(let B=0;B<C.length;B+=1){let j=Ql(e,C,B),ae=ce(j);D.set(ae,ie[B]=ia(ae,j))}return{c(){t=he("div"),n=$("svg"),r=$("text"),i=ke("Total Trade Over Time"),l=$("g"),ne&&ne.c(),o=$("g"),s=$("line"),c=$("g"),h=$("g"),p=$("g"),w=$("circle"),y=$("text"),E=ke("Export"),b=$("circle"),A=$("text"),x=ke("Import"),V=$("g"),O=$("rect"),z=$("text"),H=ke("Deficit"),M=$("rect"),K=$("text"),G=ke("Surplus"),T=$("g"),S&&S.c(),L=pe();for(let B=0;B<te.length;B+=1)te[B].c();R=$("g"),I=$("path");for(let B=0;B<q.length;B+=1)q[B].c();fe=$("g"),me=$("path");for(let B=0;B<ie.length;B+=1)ie[B].c();J=$("g"),N=$("g"),this.h()},l(B){t=de(B,"DIV",{id:!0,class:!0});var j=P(t);n=ee(j,"svg",{width:!0,height:!0});var ae=P(n);r=ee(ae,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var tt=P(r);i=Ae(tt,"Total Trade Over Time"),tt.forEach(k),l=ee(ae,"g",{class:!0}),P(l).forEach(k),ne&&ne.l(ae),o=ee(ae,"g",{id:!0,transform:!0});var ot=P(o);s=ee(ot,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),P(s).forEach(k),ot.forEach(k),c=ee(ae,"g",{id:!0,transform:!0}),P(c).forEach(k),h=ee(ae,"g",{id:!0,transform:!0}),P(h).forEach(k),p=ee(ae,"g",{id:!0,transform:!0});var Ue=P(p);w=ee(Ue,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),P(w).forEach(k),y=ee(Ue,"text",{x:!0,y:!0,"text-anchor":!0});var xe=P(y);E=Ae(xe,"Export"),xe.forEach(k),b=ee(Ue,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),P(b).forEach(k),A=ee(Ue,"text",{x:!0,y:!0,"text-anchor":!0});var se=P(A);x=Ae(se,"Import"),se.forEach(k),Ue.forEach(k),V=ee(ae,"g",{id:!0,transform:!0});var ve=P(V);O=ee(ve,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),P(O).forEach(k),z=ee(ve,"text",{x:!0,y:!0,"text-anchor":!0});var Fe=P(z);H=Ae(Fe,"Deficit"),Fe.forEach(k),M=ee(ve,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),P(M).forEach(k),K=ee(ve,"text",{x:!0,y:!0,"text-anchor":!0});var Pe=P(K);G=Ae(Pe,"Surplus"),Pe.forEach(k),ve.forEach(k),T=ee(ae,"g",{id:!0});var st=P(T);S&&S.l(st),L=pe();for(let Ce=0;Ce<te.length;Ce+=1)te[Ce].l(st);st.forEach(k),R=ee(ae,"g",{class:!0});var bt=P(R);I=ee(bt,"path",{fill:!0,stroke:!0,"stroke-width":!0}),P(I).forEach(k);for(let Ce=0;Ce<q.length;Ce+=1)q[Ce].l(bt);bt.forEach(k),fe=ee(ae,"g",{class:!0});var Ee=P(fe);me=ee(Ee,"path",{fill:!0,stroke:!0,"stroke-width":!0}),P(me).forEach(k);for(let Ce=0;Ce<ie.length;Ce+=1)ie[Ce].l(Ee);Ee.forEach(k),J=ee(ae,"g",{}),P(J).forEach(k),N=ee(ae,"g",{id:!0,class:!0}),P(N).forEach(k),ae.forEach(k),j.forEach(k),this.h()},h(){d(r,"class","chart-header"),d(r,"x",a=e[2]/2),d(r,"y",at-5),d(r,"text-anchor","middle"),d(l,"class","brush"),d(s,"id","xAxisLine"),d(s,"x1",ur),d(s,"x2",u=e[2]-Tt),d(s,"y1","0"),d(s,"y2","0"),d(s,"stroke","rgba(0,0,0,0.7)"),d(s,"stroke-width","1"),d(o,"id","xAxis"),d(o,"transform",f=`translate(${0},${e[3]-at})`),d(c,"id","yAisLeft"),d(c,"transform",`translate(${ur},${0})`),d(h,"id","yAisRight"),d(h,"transform",_=`translate(${e[2]-Tt},${0})`),d(w,"class","circ1"),d(w,"cx","20"),d(w,"cy","10"),d(w,"r","5"),d(w,"fill",g=e[14](e[0])),d(w,"stroke","rgba(0,0,0,0)"),d(w,"stroke-width","2"),d(y,"x","30"),d(y,"y","15"),d(y,"text-anchor","start"),d(b,"class","circ2"),d(b,"cx","20"),d(b,"cy","25"),d(b,"r","5"),d(b,"fill",m=e[14](e[1])),d(b,"stroke","rgba(0,0,0,0)"),d(b,"stroke-width","2"),d(A,"x","30"),d(A,"y","30"),d(A,"text-anchor","start"),d(p,"id","legendLeft"),d(p,"transform","translate(10,6)"),d(O,"class","deficit svelte-o11v01"),d(O,"x","15"),d(O,"y","5"),d(O,"width","10"),d(O,"height","10"),d(O,"fill",to),d(O,"opacity","0.6"),d(z,"x","30"),d(z,"y","15"),d(z,"text-anchor","start"),d(M,"class","surplus svelte-o11v01"),d(M,"x","15"),d(M,"y","20"),d(M,"width","10"),d(M,"height","10"),d(M,"fill",eo),d(M,"opacity","0.6"),d(K,"x","30"),d(K,"y","30"),d(K,"text-anchor","start"),d(V,"id","legendRight"),d(V,"transform",X=`translate(${e[2]-2*Tt+5},6)`),d(T,"id","net-values-group"),d(I,"fill","none"),d(I,"stroke",U=e[14](e[0])),d(I,"stroke-width","2"),d(R,"class","country1-group country-group svelte-o11v01"),d(me,"fill","none"),d(me,"stroke",be=e[14](e[1])),d(me,"stroke-width","2"),d(fe,"class","country2-group country-group svelte-o11v01"),d(N,"id","line-chart-tooltip"),d(N,"class","tooltip"),d(n,"width",e[2]),d(n,"height",e[3]),d(t,"id","line-chart"),d(t,"class","viz-section"),En(()=>e[46].call(t))},m(B,j){Z(B,t,j),F(t,n),F(n,r),F(r,i),F(n,l),e[40](l),ne&&ne.m(n,null),F(n,o),F(o,s),e[41](o),F(n,c),e[42](c),F(n,h),e[43](h),F(n,p),F(p,w),F(p,y),F(y,E),F(p,b),F(p,A),F(A,x),F(n,V),F(V,O),F(V,z),F(z,H),F(V,M),F(V,K),F(K,G),F(n,T),S&&S.m(T,null),F(T,L);for(let ae=0;ae<te.length;ae+=1)te[ae].m(T,null);F(n,R),F(R,I),e[44](I);for(let ae=0;ae<q.length;ae+=1)q[ae].m(R,null);F(n,fe),F(fe,me),e[45](me);for(let ae=0;ae<ie.length;ae+=1)ie[ae].m(fe,null);F(n,J),F(n,N),Q=cr(t,e[46].bind(t))},p(B,j){j[0]&4&&a!==(a=B[2]/2)&&d(r,"x",a),B[15]?ne&&(ne.d(1),ne=null):ne?ne.p(B,j):(ne=ea(B),ne.c(),ne.m(n,o)),j[0]&4&&u!==(u=B[2]-Tt)&&d(s,"x2",u),j[0]&8&&f!==(f=`translate(${0},${B[3]-at})`)&&d(o,"transform",f),j[0]&4&&_!==(_=`translate(${B[2]-Tt},${0})`)&&d(h,"transform",_),j[0]&16385&&g!==(g=B[14](B[0]))&&d(w,"fill",g),j[0]&16386&&m!==(m=B[14](B[1]))&&d(b,"fill",m),j[0]&4&&X!==(X=`translate(${B[2]-2*Tt+5},6)`)&&d(V,"transform",X),B[17]>0&&B[16]<0?S?S.p(B,j):(S=ta(B),S.c(),S.m(T,L)):S&&(S.d(1),S=null),j[0]&65810432&&(Y=B[13],te=Rt(te,j,ge,1,B,Y,_e,T,tn,na,null,$l)),j[0]&16385&&U!==(U=B[14](B[0]))&&d(I,"stroke",U),j[0]&10254337&&(Me=B[13],q=Rt(q,j,re,1,B,Me,ue,R,tn,ra,null,jl)),j[0]&16386&&be!==(be=B[14](B[1]))&&d(me,"stroke",be),j[0]&10254338&&(C=B[13],ie=Rt(ie,j,ce,1,B,C,D,fe,tn,ia,null,Ql)),j[0]&4&&d(n,"width",B[2]),j[0]&8&&d(n,"height",B[3])},i:Ne,o:Ne,d(B){B&&k(t),e[40](null),ne&&ne.d(),e[41](null),e[42](null),e[43](null),S&&S.d();for(let j=0;j<te.length;j+=1)te[j].d();e[44](null);for(let j=0;j<q.length;j+=1)q[j].d();e[45](null);for(let j=0;j<ie.length;j+=1)ie[j].d();Q()}}}const at=35,Hn=15,ur=50,Tt=50,vn=16,Zt=10,Vn=180,St=68,q0=22,It=20,Fr=35,Jt=37,Qt=22,eo="#4daf4a",to="#e41a1c";function rt(e,t,n){return e+n<350?e+t:e+t-St}const K0=()=>{},W0=()=>{},Z0=()=>{};function J0(e,t,n){let r,i,a,l,o,s,u,f,c;Ot(e,Qe,C=>n(30,f=C)),Ot(e,en,C=>n(18,c=C));let{data:h}=t,{bilateralData:_,locationData:p,productData:w,country1_id:g,country2_id:y,countryColorScale:E}=h,b=800,m=400;const A=C=>Ft("$.3s")(C).replace(/G/,"B");let x,V,O,z,H,M,K=!1,G;function X(C){return()=>en.set([C])}function T(C,ce){return C+Vn<b?C+ce:C+ce-Vn}function L(C,ce){return B=>{var tt,ot,Ue;let j=we("#line-chart-tooltip"),ae=St+G.length*q0;if(j.append("rect").attr("width",Vn).attr("height",ae).attr("x",T(B.layerX,Zt)).attr("y",rt(B.layerY,Zt,ae)),j.append("text").attr("class","title").attr("x",T(B.layerX,It)).attr("y",rt(B.layerY,Fr,ae)).style("fill",E?E(ce?C.location_id:C.partner_id):"black").text(`${C.year} `+(ce?"Export":"Import")),f.size>0){for(let xe=0;xe<G.length;xe++){let se=(tt=i==null?void 0:i.get(C.year))==null?void 0:tt.filter(ve=>ve.product.name==G[xe])[0];j.append("text").attr("x",T(B.layerX,It)).attr("y",rt(B.layerY,Jt+(xe+1)*Qt,ae)).text(`${G[xe]}: ${A(ce?(ot=se==null?void 0:se.export_value)!=null?ot:0:(Ue=se==null?void 0:se.import_value)!=null?Ue:0)}`)}j.append("text").attr("x",T(B.layerX,It)).attr("y",rt(B.layerY,Jt+(G.length+1)*Qt,ae)).style("font-weight","bold").text(`Selected Total:  ${A(ce?C.export_value:C.import_value)}`)}else j.append("text").attr("x",T(B.layerX,It)).attr("y",rt(B.layerY,Jt+Qt,ae)).text((f.size==0?"Total: ":"Selected Total: ")+`${A(ce?C.export_value:C.import_value)}`),j.append("text").attr("x",T(B.layerX,It)).attr("y",rt(B.layerY,Jt+2*Qt,ae)).text("Sectors: All")}}function te(C){return ce=>{let B=we("#line-chart-tooltip"),j=C.export_value-C.import_value;B.append("rect").attr("id","tooltip-rect").attr("width",Vn).attr("height",St).attr("x",T(ce.layerX,Zt)).attr("y",rt(ce.layerY,Zt,St)),B.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",T(ce.layerX,It)).attr("y",rt(ce.layerY,Fr,St)).style("fill",j<0?to:eo).text(`${C.year} `+(j<0?"Deficit":"Surplus")),B.append("text").attr("id","tooltip-text2").attr("x",T(ce.layerX,It)).attr("y",rt(ce.layerY,Jt+Qt,St)).text((f.size>0?"Selected ":"")+`Total: ${A(Math.abs(C.export_value-C.import_value))}`)}}function _e(){return C=>{we("#tooltip-rect").attr("x",T(C.layerX,Zt)).attr("y",rt(C.layerY,Zt,St)),we("#tooltip-text1").attr("x",T(C.layerX,It)).attr("y",rt(C.layerY,Fr,St)),we("#tooltip-text2").attr("x",T(C.layerX,It)).attr("y",rt(C.layerY,Jt+Qt,St))}}function R(){return C=>{we("#line-chart-tooltip").selectAll("rect").remove(),we("#line-chart-tooltip").selectAll("text").remove()}}function I(C){return C.export_value<C.import_value?o<0?at+Hn:u(0):(s>0,u(C.export_value-C.import_value))}function U(C){return C.export_value<C.import_value?o<0?u(C.export_value-C.import_value)-at-Hn:u(C.export_value-C.import_value)-u(0):s>0?m-at-u(C.export_value-C.import_value):u(0)-u(C.export_value-C.import_value)}function q(C){Ke.call(this,e,C)}function ue(C){Ke.call(this,e,C)}function fe(C){Ke.call(this,e,C)}function me(C){Ke.call(this,e,C)}function be(C){Ke.call(this,e,C)}function ie(C){Ke.call(this,e,C)}function D(C){Ke.call(this,e,C)}function J(C){Ke.call(this,e,C)}function N(C){Ke.call(this,e,C)}function Q(C){Ye[C?"unshift":"push"](()=>{z=C,n(7,z)})}function ne(C){Ye[C?"unshift":"push"](()=>{x=C,n(4,x)})}function S(C){Ye[C?"unshift":"push"](()=>{V=C,n(5,V)})}function Y(C){Ye[C?"unshift":"push"](()=>{O=C,n(6,O)})}function ge(C){Ye[C?"unshift":"push"](()=>{H=C,n(8,H)})}function Me(C){Ye[C?"unshift":"push"](()=>{M=C,n(9,M)})}function re(){b=this.clientWidth,m=this.clientHeight,n(2,b),n(3,m)}return e.$$set=C=>{"data"in C&&n(26,h=C.data)},e.$$.update=()=>{var C,ce,B,j,ae,tt,ot,Ue,xe;if(e.$$.dirty[0]&67108864&&n(27,{bilateralData:_,locationData:p,productData:w,country1_id:g,country2_id:y,countryColorScale:E}=h,_,(n(28,p),n(26,h)),(n(29,w),n(26,h)),(n(0,g),n(26,h)),(n(1,y),n(26,h)),(n(14,E),n(26,h))),e.$$.dirty[0]&2013265923&&n(13,r=Array.from((B=(ce=(C=_==null?void 0:_.get(g))==null?void 0:C.get(y))==null?void 0:ce.entries())!=null?B:new Array).map(se=>{let ve=se[0],Fe=se[1];return Fe=f.size==0?Fe:Fe.filter(Pe=>f.has(Pe.product_id)),Fe.reduce((Pe,st)=>(Pe.export_value+=st.export_value,Pe.import_value+=st.import_value,Pe),new Mt(p,w,{location_id:g,partner_id:y,product_id:0,year:ve,export_value:0,import_value:0}))}).sort((se,ve)=>se.year-ve.year)),e.$$.dirty[0]&8196&&n(12,a=yn().domain(ya(r,se=>se.year)).range([ur+vn/2,b-Tt-vn/2])),e.$$.dirty[0]&4224){let se=zc().on("start brush end",ve=>{if((ve==null?void 0:ve.selection)===null||(ve==null?void 0:ve.selection[1])-(ve==null?void 0:ve.selection[0])<5)en.set([2020]),n(15,K=!1);else{n(15,K=!0);let Fe=ve.selection;const Pe=Fe[0],st=Fe[1];let bt=Math.ceil(a.invert(Pe)),Ee=Math.floor(a.invert(st)),Ce=[];for(let Ht=bt;Ht<=Ee;Ht++)Ce.push(Ht);en.set(Ce)}});we(z).call(se)}if(e.$$.dirty[0]&134217731&&(i=(j=_==null?void 0:_.get(g))==null?void 0:j.get(y)),e.$$.dirty[0]&8200&&n(11,l=yn().domain([0,(ae=pn(r,se=>Math.max(se.export_value,se.import_value)))!=null?ae:0]).range([m-at,at+Hn]).nice()),e.$$.dirty[0]&8192&&n(17,o=(tt=pn(r,se=>se.export_value-se.import_value))!=null?tt:0),e.$$.dirty[0]&8192&&n(16,s=(ot=Oi(r,se=>se.export_value-se.import_value))!=null?ot:0),e.$$.dirty[0]&8200&&n(10,u=yn().domain([(Ue=Oi(r,se=>se.export_value-se.import_value))!=null?Ue:0,(xe=pn(r,se=>se.export_value-se.import_value))!=null?xe:0]).range([m-at,at+Hn]).nice()),e.$$.dirty[0]&7280){let se=wa(a).tickFormat(Ft("d"));we(x).transition().call(se).select(".domain").attr("stroke-width",0);let ve=us(l).tickFormat(Pe=>A(Pe));we(V).transition().call(ve);let Fe=ss(u).tickFormat(Pe=>A(Pe));we(O).transition().call(Fe)}if(e.$$.dirty[0]&14592){let se=ri();r.length>0&&(r.sort(ve=>ve.year),se.moveTo(a(r[0].year),l(r[0].export_value))),r.forEach(ve=>{se.lineTo(a(ve.year),l(ve.export_value))}),we(H).transition().attr("d",se.toString())}if(e.$$.dirty[0]&14848){let se=ri();r.length>0&&se.moveTo(a(r[0].year),l(r[0].import_value)),r.forEach(ve=>{se.lineTo(a(ve.year),l(ve.import_value))}),we(M).transition().attr("d",se.toString())}e.$$.dirty[0]&1610612736&&(G=f.size==0?["All"]:Array.from(f.values()).map(se=>{var ve,Fe;return(Fe=(ve=w==null?void 0:w.get(se))==null?void 0:ve.name)!=null?Fe:"something"}).sort())},[g,y,b,m,x,V,O,z,H,M,u,l,a,r,E,K,s,o,c,X,L,te,_e,R,I,U,h,_,p,w,f,q,ue,fe,me,be,ie,D,J,N,Q,ne,S,Y,ge,Me,re]}class Q0 extends ct{constructor(t){super(),ht(this,t,J0,x0,dt,{data:26},null,[-1,-1])}}const{Map:j0}=Uo;function la(e,t,n){const r=e.slice();return r[32]=t[n],r}function aa(e){let t,n,r,i,a,l,o,s,u;function f(){return e[26](e[32])}let c=e[32].x1-e[32].x0>40&&e[32].y1-e[32].y0>10&&oa(e),h=e[32].x1-e[32].x0>40&&e[32].y1-e[32].y0>30&&sa(e);return{c(){t=$("rect"),c&&c.c(),l=pe(),h&&h.c(),o=pe(),this.h()},l(_){t=ee(_,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),P(t).forEach(k),c&&c.l(_),l=pe(),h&&h.l(_),o=pe(),this.h()},h(){var _,p,w,g;d(t,"class","leaf svelte-sixlpg"),d(t,"transform",n=`translate(${e[32].x0},${e[32].y0})`),d(t,"width",r=e[32].x1-e[32].x0),d(t,"height",i=e[32].y1-e[32].y0),d(t,"fill",a=e[6]?e[6]((g=(w=(p=(_=e[32].data)==null?void 0:_.product)==null?void 0:p.parent)==null?void 0:w.name)!=null?g:""):"white")},m(_,p){Z(_,t,p),c&&c.m(_,p),Z(_,l,p),h&&h.m(_,p),Z(_,o,p),s||(u=[W(t,"keydown",ed),W(t,"click",f),W(t,"focus",e[25]),W(t,"mouseover",function(){Xe(e[11](e[32].data))&&e[11](e[32].data).apply(this,arguments)}),W(t,"mousemove",e[12]()),W(t,"mouseleave",e[13]())],s=!0)},p(_,p){var w,g,y,E;e=_,p[0]&512&&n!==(n=`translate(${e[32].x0},${e[32].y0})`)&&d(t,"transform",n),p[0]&512&&r!==(r=e[32].x1-e[32].x0)&&d(t,"width",r),p[0]&512&&i!==(i=e[32].y1-e[32].y0)&&d(t,"height",i),p[0]&576&&a!==(a=e[6]?e[6]((E=(y=(g=(w=e[32].data)==null?void 0:w.product)==null?void 0:g.parent)==null?void 0:y.name)!=null?E:""):"white")&&d(t,"fill",a),e[32].x1-e[32].x0>40&&e[32].y1-e[32].y0>10?c?c.p(e,p):(c=oa(e),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null),e[32].x1-e[32].x0>40&&e[32].y1-e[32].y0>30?h?h.p(e,p):(h=sa(e),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},d(_){_&&k(t),c&&c.d(_),_&&k(l),h&&h.d(_),_&&k(o),s=!1,et(u)}}}function oa(e){var s,u,f;let t,n=((f=(u=(s=e[32].data)==null?void 0:s.product.name)==null?void 0:u.substring(0,40))!=null?f:"")+"",r,i,a,l,o;return{c(){t=$("text"),r=ke(n),this.h()},l(c){t=ee(c,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var h=P(t);r=Ae(h,n),h.forEach(k),this.h()},h(){d(t,"class","label svelte-sixlpg"),d(t,"transform",i=`translate(${e[32].x0+3},${e[32].y0+3})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[32].x1-e[32].x0)/15,8))},m(c,h){Z(c,t,h),F(t,r),l||(o=[W(t,"focus",e[24]),W(t,"mouseover",function(){Xe(e[11](e[32].data))&&e[11](e[32].data).apply(this,arguments)}),W(t,"mousemove",e[12]()),W(t,"mouseleave",e[13]())],l=!0)},p(c,h){var _,p,w;e=c,h[0]&512&&n!==(n=((w=(p=(_=e[32].data)==null?void 0:_.product.name)==null?void 0:p.substring(0,40))!=null?w:"")+"")&&We(r,n),h[0]&512&&i!==(i=`translate(${e[32].x0+3},${e[32].y0+3})`)&&d(t,"transform",i),h[0]&512&&a!==(a=Math.max((e[32].x1-e[32].x0)/15,8))&&d(t,"font-size",a)},d(c){c&&k(t),l=!1,et(o)}}}function sa(e){let t,n=e[10](e[4]?e[32].data.export_value:e[32].data.import_value)+"",r,i,a,l,o;return{c(){t=$("text"),r=ke(n),this.h()},l(s){t=ee(s,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var u=P(t);r=Ae(u,n),u.forEach(k),this.h()},h(){d(t,"class","label-num svelte-sixlpg"),d(t,"transform",i=`translate(${e[32].x0+5},${e[32].y0+1+Math.max((e[32].x1-e[32].x0)/10,8)})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[32].x1-e[32].x0)/15,8)-1),d(t,"font-weight","300")},m(s,u){Z(s,t,u),F(t,r),l||(o=[W(t,"focus",e[23]),W(t,"mouseover",function(){Xe(e[11](e[32].data))&&e[11](e[32].data).apply(this,arguments)}),W(t,"mousemove",e[12]()),W(t,"mouseleave",e[13]())],l=!0)},p(s,u){e=s,u[0]&528&&n!==(n=e[10](e[4]?e[32].data.export_value:e[32].data.import_value)+"")&&We(r,n),u[0]&512&&i!==(i=`translate(${e[32].x0+5},${e[32].y0+1+Math.max((e[32].x1-e[32].x0)/10,8)})`)&&d(t,"transform",i),u[0]&512&&a!==(a=Math.max((e[32].x1-e[32].x0)/15,8)-1)&&d(t,"font-size",a)},d(s){s&&k(t),l=!1,et(o)}}}function ua(e,t){let n,r,i=t[3].length>0&&t[32].x1!=NaN&&t[32].x0!=NaN&&t[32].y0!=NaN&&t[32].y1!=NaN&&aa(t);return{key:e,first:null,c(){n=pe(),i&&i.c(),r=pe(),this.h()},l(a){n=pe(),i&&i.l(a),r=pe(),this.h()},h(){this.first=n},m(a,l){Z(a,n,l),i&&i.m(a,l),Z(a,r,l)},p(a,l){t=a,t[3].length>0&&t[32].x1!=NaN&&t[32].x0!=NaN&&t[32].y0!=NaN&&t[32].y1!=NaN?i?i.p(t,l):(i=aa(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&k(n),i&&i.d(a),a&&k(r)}}}function fa(e){let t,n,r,i=e[7]?"Loading...":"No Data",a,l,o;return{c(){t=$("rect"),r=$("text"),a=ke(i),this.h()},l(s){t=ee(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),P(t).forEach(k),r=ee(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=P(r);a=Ae(u,i),u.forEach(k),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[0]),d(t,"height",e[1]),d(t,"fill",n=e[7]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),d(r,"x",l=e[0]/2),d(r,"y",o=e[1]/2),d(r,"alignment-baseline","central"),d(r,"text-anchor","middle")},m(s,u){Z(s,t,u),Z(s,r,u),F(r,a)},p(s,u){u[0]&1&&d(t,"width",s[0]),u[0]&2&&d(t,"height",s[1]),u[0]&128&&n!==(n=s[7]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&d(t,"fill",n),u[0]&128&&i!==(i=s[7]?"Loading...":"No Data")&&We(a,i),u[0]&1&&l!==(l=s[0]/2)&&d(r,"x",l),u[0]&2&&o!==(o=s[1]/2)&&d(r,"y",o)},d(s){s&&k(t),s&&k(r)}}}function $0(e){var c,h;let t,n,r,i=[],a=new j0,l,o,s=e[9];const u=_=>_[32].data.product_id;for(let _=0;_<s.length;_+=1){let p=la(e,s,_),w=u(p);a.set(w,i[_]=ua(w,p))}let f=((h=(c=e[2])==null?void 0:c.length)!=null?h:0)===0&&fa(e);return{c(){t=he("div"),n=$("svg"),r=$("g");for(let _=0;_<i.length;_+=1)i[_].c();l=$("g"),f&&f.c(),this.h()},l(_){t=de(_,"DIV",{class:!0});var p=P(t);n=ee(p,"svg",{class:!0});var w=P(n);r=ee(w,"g",{class:!0});var g=P(r);for(let y=0;y<i.length;y+=1)i[y].l(g);g.forEach(k),l=ee(w,"g",{id:!0,class:!0}),P(l).forEach(k),f&&f.l(w),w.forEach(k),p.forEach(k),this.h()},h(){d(r,"class","treemap svelte-sixlpg"),d(l,"id","treemap-tooltip"),d(l,"class","tooltip"),d(n,"class","svelte-sixlpg"),d(t,"class","viz-section-full"),En(()=>e[28].call(t))},m(_,p){Z(_,t,p),F(t,n),F(n,r);for(let w=0;w<i.length;w+=1)i[w].m(r,null);e[27](r),F(n,l),f&&f.m(n,null),o=cr(t,e[28].bind(t))},p(_,p){var w,g;p[0]&15992&&(s=_[9],i=Rt(i,p,u,1,_,s,a,r,tn,ua,null,la)),((g=(w=_[2])==null?void 0:w.length)!=null?g:0)===0?f?f.p(_,p):(f=fa(_),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i:Ne,o:Ne,d(_){_&&k(t);for(let p=0;p<i.length;p+=1)i[p].d();e[27](null),f&&f.d(),o()}}}const Pn=10,ca=140,ha=25,ui=90,gt=20,pt=28,Dt=15;function it(e,t){return e+ui<350?e+t:e+t-ui}const ed=()=>{};function td(e,t,n){let r,i,a,l,o,s,u,f,c;Ot(e,en,R=>n(3,u=R)),Ot(e,Kn,R=>n(4,f=R)),Ot(e,Qe,R=>n(5,c=R));const h=R=>Ft("$.3s")(R).replace(/G/,"B");let{data:_}=t,{country1:p,country2:w,productColorScale:g,drilldownBilateral:y,loadingDrilldown:E,locationData:b,productData:m}=_,A=0,x=0,V,O=new Array;function z(R,I,U){return R+U<A?R+I:R+I-U}function H(R){return I=>{var ue,fe,me;let U=we("#treemap-tooltip"),q=ca+u.length*ha;U.append("rect").attr("id","tooltip-rect").attr("width",q).attr("height",ui).attr("x",z(I.layerX,Pn,q)).attr("y",it(I.layerY,Pn)),U.append("text").attr("class","treemap").attr("id","tooltip-text1").attr("x",z(I.layerX,gt,q)).attr("y",it(I.layerY,pt)).style("font-weight","bold").text(`${R.product.name}`),U.append("text").attr("class","treemap").attr("id","tooltip-text2").attr("x",z(I.layerX,gt,q)).attr("y",it(I.layerY,pt+Dt)).text(`Sector: ${(me=(fe=(ue=R.product)==null?void 0:ue.parent)==null?void 0:fe.name)!=null?me:""}`),U.append("text").attr("class","treemap").attr("id","tooltip-text3").attr("x",z(I.layerX,gt,q)).attr("y",it(I.layerY,pt+2*Dt)).text((f?"Export: ":"Import: ")+`${h(f?R.export_value:R.import_value)}`),U.append("text").attr("class","treemap").attr("id","tooltip-text4").attr("x",z(I.layerX,gt,q)).attr("y",it(I.layerY,pt+3*Dt)).text(`Share: ${Ft(".2%")(f?R.export_value/l:R.import_value/o)}`),U.append("text").attr("class","treemap").attr("id","tooltip-text5").attr("x",z(I.layerX,gt,q)).attr("y",it(I.layerY,pt+4*Dt)).text((u.length>1?"Years: ":"Year: ")+`${u.join(", ")}`)}}function M(){return R=>{let I=ca+u.length*ha;we("#tooltip-rect").attr("x",z(R.layerX,Pn,I)).attr("y",it(R.layerY,Pn)),we("#tooltip-text1").attr("x",z(R.layerX,gt,I)).attr("y",it(R.layerY,pt)),we("#tooltip-text2").attr("x",z(R.layerX,gt,I)).attr("y",it(R.layerY,pt+Dt)),we("#tooltip-text3").attr("x",z(R.layerX,gt,I)).attr("y",it(R.layerY,pt+2*Dt)),we("#tooltip-text4").attr("x",z(R.layerX,gt,I)).attr("y",it(R.layerY,pt+3*Dt)),we("#tooltip-text5").attr("x",z(R.layerX,gt,I)).attr("y",it(R.layerY,pt+4*Dt))}}function K(){return R=>{we("#treemap-tooltip").selectAll("rect").remove(),we("#treemap-tooltip").selectAll("text").remove()}}function G(R){Ke.call(this,e,R)}function X(R){Ke.call(this,e,R)}function T(R){Ke.call(this,e,R)}const L=R=>{var I,U,q,ue,fe,me,be;((U=(I=R.data)==null?void 0:I.product)==null?void 0:U.parent)&&c.has((fe=(ue=(q=R.data)==null?void 0:q.product)==null?void 0:ue.parent)==null?void 0:fe.id)?Qe.update(ie=>{var D,J,N,Q;return ie.delete((Q=(N=(J=(D=R.data)==null?void 0:D.product)==null?void 0:J.parent)==null?void 0:N.id)!=null?Q:-1),console.log(ie),ie}):((be=(me=R.data)==null?void 0:me.product)==null?void 0:be.parent)!=null&&Qe.update(ie=>{var D,J,N,Q;return ie.add((Q=(N=(J=(D=R.data)==null?void 0:D.product)==null?void 0:J.parent)==null?void 0:N.id)!=null?Q:-1),console.log(ie),ie})};function te(R){Ye[R?"unshift":"push"](()=>{V=R,n(8,V)})}function _e(){A=this.clientWidth,x=this.clientHeight,n(0,A),n(1,x)}return e.$$set=R=>{"data"in R&&n(14,_=R.data)},e.$$.update=()=>{var R;if(e.$$.dirty[0]&16384&&n(17,{drilldownBilateral:y,productColorScale:g,country1:p,country2:w,loadingDrilldown:E,locationData:b,productData:m}=_,y,(n(6,g),n(14,_)),(n(15,p),n(14,_)),(n(16,w),n(14,_)),(n(7,E),n(14,_)),(n(18,b),n(14,_)),(n(19,m),n(14,_))),e.$$.dirty[0]&196608&&n(22,r=y==null?void 0:y.get((R=w==null?void 0:w.id)!=null?R:0)),e.$$.dirty[0]&4194312&&n(20,i=u.map(I=>{var U;return(U=r==null?void 0:r.get(I))!=null?U:new Array}).flat()),e.$$.dirty[0]&1933312&&n(21,a=Array.from(Br(i,I=>I.reduce((U,q)=>(U.export_value+=q.export_value,U.import_value+=q.import_value,U),new Mt(b,m,{location_id:p,partner_id:w,product_id:I[0].product_id,year:0,export_value:0,import_value:0})),I=>I.product_id).values())),e.$$.dirty[0]&2097152&&(l=Jn(a,I=>I.export_value)),e.$$.dirty[0]&2097152&&(o=Jn(a,I=>I.import_value)),e.$$.dirty[0]&4030496&&n(2,s=c.size==0?a:Array.from(Br(i.filter(I=>c.has(I.product.parent_id)),I=>I.reduce((U,q)=>(U.export_value+=q.export_value,U.import_value+=q.import_value,U),new Mt(b,m,{location_id:p,partner_id:w,product_id:I[0].product_id,year:0,export_value:0,import_value:0})),I=>I.product_id).values())),e.$$.dirty[0]&98359&&s&&s.length>0){let I=[];if(c.size==1){let q=c.entries().next().value[1];console.log(q);let ue=new Mt(new Map,new Map,{location_id:p,partner_id:w,product_id:q,year:0,export_value:0,import_value:0});ue.product=new Wn({product_id:q,name:"Sector",level:-1,parent_id:-1}),ue.product.parent_id=null,I.push(ue)}else{let q=new Mt(new Map,new Map,{location_id:p,partner_id:w,product_id:-1,year:0,export_value:0,import_value:0});q.product=new Wn({product_id:-1,name:"All",level:-1,parent_id:-1}),q.product.parent_id=null,I.push(q);let ue=Pr(s,fe=>{var me,be;return(be=(me=fe.product)==null?void 0:me.parent_id)!=null?be:-1});if(ue.size>1)for(let[fe,me]of ue){let be=new Mt(new Map,new Map,{location_id:p,partner_id:w,product_id:fe,year:0,export_value:0,import_value:0});be.product=new Wn({product_id:fe,name:"Something",level:0,parent_id:-1}),I.push(be)}}I=I.concat(s);let U=Oh().id(q=>{var ue;return(ue=q.product)==null?void 0:ue.id}).parentId(q=>{var ue;return(ue=q.product)==null?void 0:ue.parent_id})(I);U.sum(q=>Math.max(0,q[f?"export_value":"import_value"])),Gh().tile(zh).size([A,x]).padding(2)(U),n(9,O=U.leaves())}},[A,x,s,u,f,c,g,E,V,O,h,H,M,K,_,p,w,y,b,m,i,a,r,G,X,T,L,te,_e]}class nd extends ct{constructor(t){super(),ht(this,t,td,$0,dt,{data:14},null,[-1,-1])}}const rd=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),Bn=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=rd.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function id(e){let t,n,r,i,a,l;return{c(){t=he("div"),n=he("h3"),r=ke("Loading data..."),i=Se(),a=$("svg"),l=$("circle"),this.h()},l(o){t=de(o,"DIV",{class:!0});var s=P(t);n=de(s,"H3",{});var u=P(n);r=Ae(u,"Loading data..."),u.forEach(k),i=Te(s),a=ee(s,"svg",{class:!0,viewBox:!0});var f=P(a);l=ee(f,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),P(l).forEach(k),f.forEach(k),s.forEach(k),this.h()},h(){d(l,"class","path svelte-oczrp0"),d(l,"cx","25"),d(l,"cy","25"),d(l,"r","20"),d(l,"fill","none"),d(l,"stroke-width","5"),d(a,"class","spinner svelte-oczrp0"),d(a,"viewBox","0 0 50 50"),d(t,"class","loading svelte-oczrp0")},m(o,s){Z(o,t,s),F(t,n),F(n,r),F(t,i),F(t,a),F(a,l)},p:Ne,i:Ne,o:Ne,d(o){o&&k(t)}}}function ld(e){var L,te,_e,R;let t,n,r,i,a,l,o,s,u,f,c,h,_,p,w,g,y,E,b,m,A,x,V,O,z,H,M,K,G,X,T;return u=new Bl({props:{optionIdentifier:da,labelIdentifier:_a,items:Array.from(e[0].values()),value:e[2]}}),u.$on("select",e[9]),w=new Bl({props:{optionIdentifier:da,labelIdentifier:_a,items:Array.from(e[0].values()),value:e[8]}}),w.$on("select",e[10]),z=new Q0({props:{data:{bilateralData:e[5],country1_id:(te=(L=e[2])==null?void 0:L.id)!=null?te:0,country2_id:(R=(_e=e[8])==null?void 0:_e.id)!=null?R:0,productData:e[1],locationData:e[0],countryColorScale:e[3]}}}),M=new X0({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[5],loadingDrilldown:e[7],productColorScale:e[4],country1:e[2],country2:e[8],countryColorScale:e[3]}}}),X=new nd({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7]}}}),{c(){t=he("div"),n=he("img"),i=Se(),a=he("div"),l=he("span"),o=ke("Country"),s=Se(),Le(u.$$.fragment),f=Se(),c=he("div"),h=he("span"),_=ke("Partner"),p=Se(),Le(w.$$.fragment),g=Se(),y=he("img"),b=Se(),m=he("div"),A=Se(),x=he("div"),V=he("div"),O=he("div"),Le(z.$$.fragment),H=Se(),Le(M.$$.fragment),K=Se(),G=he("div"),Le(X.$$.fragment),this.h()},l(I){t=de(I,"DIV",{class:!0});var U=P(t);n=de(U,"IMG",{class:!0,alt:!0,src:!0}),i=Te(U),a=de(U,"DIV",{class:!0});var q=P(a);l=de(q,"SPAN",{class:!0});var ue=P(l);o=Ae(ue,"Country"),ue.forEach(k),s=Te(q),je(u.$$.fragment,q),q.forEach(k),f=Te(U),c=de(U,"DIV",{class:!0});var fe=P(c);h=de(fe,"SPAN",{class:!0});var me=P(h);_=Ae(me,"Partner"),me.forEach(k),p=Te(fe),je(w.$$.fragment,fe),fe.forEach(k),g=Te(U),y=de(U,"IMG",{class:!0,alt:!0,src:!0}),U.forEach(k),b=Te(I),m=de(I,"DIV",{class:!0});var be=P(m);be.forEach(k),A=Te(I),x=de(I,"DIV",{id:!0,class:!0});var ie=P(x);V=de(ie,"DIV",{id:!0,class:!0});var D=P(V);O=de(D,"DIV",{class:!0});var J=P(O);je(z.$$.fragment,J),H=Te(J),je(M.$$.fragment,J),J.forEach(k),K=Te(D),G=de(D,"DIV",{class:!0});var N=P(G);je(X.$$.fragment,N),N.forEach(k),D.forEach(k),ie.forEach(k),this.h()},h(){var I,U,q,ue;d(n,"class","country-icon svelte-oczrp0"),d(n,"alt","Select a country"),Mn(n.src,r=Bn((U=(I=e[2])==null?void 0:I.code)!=null?U:"ATA"))||d(n,"src",r),d(l,"class","svelte-oczrp0"),d(a,"class","dropdown svelte-oczrp0"),d(h,"class","svelte-oczrp0"),d(c,"class","dropdown svelte-oczrp0"),d(y,"class","country-icon svelte-oczrp0"),d(y,"alt","Select a partner"),Mn(y.src,E=Bn((ue=(q=e[8])==null?void 0:q.code)!=null?ue:"ATA"))||d(y,"src",E),d(t,"class","selectors svelte-oczrp0"),d(m,"class","svelte-oczrp0"),d(O,"class","viz-row svelte-oczrp0"),d(G,"class","viz-row svelte-oczrp0"),d(V,"id","content"),d(V,"class","svelte-oczrp0"),d(x,"id","container"),d(x,"class","svelte-oczrp0")},m(I,U){Z(I,t,U),F(t,n),F(t,i),F(t,a),F(a,l),F(l,o),F(a,s),De(u,a,null),F(t,f),F(t,c),F(c,h),F(h,_),F(c,p),De(w,c,null),F(t,g),F(t,y),Z(I,b,U),Z(I,m,U),Z(I,A,U),Z(I,x,U),F(x,V),F(V,O),De(z,O,null),F(O,H),De(M,O,null),F(V,K),F(V,G),De(X,G,null),T=!0},p(I,U){var ie,D,J,N,Q,ne,S,Y;(!T||U&4&&!Mn(n.src,r=Bn((D=(ie=I[2])==null?void 0:ie.code)!=null?D:"ATA")))&&d(n,"src",r);const q={};U&1&&(q.items=Array.from(I[0].values())),U&4&&(q.value=I[2]),u.$set(q);const ue={};U&1&&(ue.items=Array.from(I[0].values())),U&256&&(ue.value=I[8]),w.$set(ue),(!T||U&256&&!Mn(y.src,E=Bn((N=(J=I[8])==null?void 0:J.code)!=null?N:"ATA")))&&d(y,"src",E);const fe={};U&303&&(fe.data={bilateralData:I[5],country1_id:(ne=(Q=I[2])==null?void 0:Q.id)!=null?ne:0,country2_id:(Y=(S=I[8])==null?void 0:S.id)!=null?Y:0,productData:I[1],locationData:I[0],countryColorScale:I[3]}),z.$set(fe);const me={};U&447&&(me.data={productData:I[1],locationData:I[0],bilateralData:I[5],loadingDrilldown:I[7],productColorScale:I[4],country1:I[2],country2:I[8],countryColorScale:I[3]}),M.$set(me);const be={};U&471&&(be.data={locationData:I[0],productData:I[1],productColorScale:I[4],country1:I[2],country2:I[8],drilldownBilateral:I[6],loadingDrilldown:I[7]}),X.$set(be)},i(I){T||(oe(u.$$.fragment,I),oe(w.$$.fragment,I),oe(z.$$.fragment,I),oe(M.$$.fragment,I),oe(X.$$.fragment,I),T=!0)},o(I){ye(u.$$.fragment,I),ye(w.$$.fragment,I),ye(z.$$.fragment,I),ye(M.$$.fragment,I),ye(X.$$.fragment,I),T=!1},d(I){I&&k(t),Re(u),Re(w),I&&k(b),I&&k(m),I&&k(A),I&&k(x),Re(z),Re(M),Re(X)}}}function ad(e){let t,n,r,i,a,l,o,s,u,f,c,h,_;const p=[ld,id],w=[];function g(y,E){return y[0]&&y[5]&&y[1]&&y[3]?0:1}return f=g(e),c=w[f]=p[f](e),{c(){t=he("link"),n=Se(),r=he("div"),i=he("h1"),a=ke("Commerce Among Nations"),l=Se(),o=he("h2"),s=ke("A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),u=Se(),c.c(),h=pe(),this.h()},l(y){const E=Yo("svelte-1ivyzxx",document.head);t=de(E,"LINK",{rel:!0,href:!0}),E.forEach(k),n=Te(y),r=de(y,"DIV",{class:!0});var b=P(r);i=de(b,"H1",{class:!0});var m=P(i);a=Ae(m,"Commerce Among Nations"),m.forEach(k),l=Te(b),o=de(b,"H2",{class:!0});var A=P(o);s=Ae(A,"A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),A.forEach(k),b.forEach(k),u=Te(y),c.l(y),h=pe(),this.h()},h(){d(t,"rel","icon"),d(t,"href",`${dn}/favicon.png`),d(i,"class","svelte-oczrp0"),d(o,"class","svelte-oczrp0"),d(r,"class","heading svelte-oczrp0")},m(y,E){F(document.head,t),Z(y,n,E),Z(y,r,E),F(r,i),F(i,a),F(r,l),F(r,o),F(o,s),Z(y,u,E),w[f].m(y,E),Z(y,h,E),_=!0},p(y,[E]){let b=f;f=g(y),f===b?w[f].p(y,E):(He(),ye(w[b],1,1,()=>{w[b]=null}),Ve(),c=w[f],c?c.p(y,E):(c=w[f]=p[f](y),c.c()),oe(c,1),c.m(h.parentNode,h))},i(y){_||(oe(c),_=!0)},o(y){ye(c),_=!1},d(y){k(t),y&&k(n),y&&k(r),y&&k(u),w[f].d(y),y&&k(h)}}}const da="id",_a="name",od=231,sd=43;function ud(e,t,n){let r,i;const a=p=>{let w=p.detail;n(2,r=u.get(w.id))},l=p=>{let w=p.detail;n(8,i=u.get(w.id))};let o,s,u=new Map,f=new Map,c,h,_=!1;return fr(async()=>{Promise.all([Dn(`${dn}/data/location.csv`),Dn(`${dn}/data/hs_product.csv`),Dn(`${dn}/data/hs_2010_to_2020.csv`)]).then(([p,w,g])=>{var E;n(0,u=Ri(p.map(b=>new L0(b)).filter(b=>b.level=="country"),b=>b.id)),n(1,f=Ri(w.map(b=>new Wn(b)),b=>b.id));for(let[b,m]of f)m.parent=(E=f.get(m.parent_id))!=null?E:null,f.set(b,m);let y=g.map(b=>new Mt(u,f,b));n(5,c=Pr(y,b=>b.location_id,b=>b.partner_id,b=>b.year)),ya(g,b=>+b.export_value),n(3,o=li(u.keys(),ml)),n(4,s=li(Array.from(f).map(([b,m])=>m.level).filter(b=>b=="section"),ml))})}),e.$$.update=()=>{var p,w,g,y;e.$$.dirty&1&&n(2,r=(p=u==null?void 0:u.get(od))!=null?p:null),e.$$.dirty&1&&n(8,i=(w=u==null?void 0:u.get(sd))!=null?w:null),e.$$.dirty&7&&(n(6,h=null),n(7,_=!0),Dn(`${dn}/data/${(g=r==null?void 0:r.code)!=null?g:"USA"}/${(y=r==null?void 0:r.code)!=null?y:"USA"}_hs2_2010_to_2020.csv`).then(E=>{n(6,h=Pr(E.map(b=>new Mt(u,f,b)),b=>b.partner_id,b=>b.year)),n(7,_=!1)}))},[u,f,r,o,s,c,h,_,i,a,l]}class dd extends ct{constructor(t){super(),ht(this,t,ud,ad,dt,{})}}export{dd as default};
