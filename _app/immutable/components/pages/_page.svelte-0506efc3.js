var zo=Object.defineProperty;var Xo=(e,t,n)=>t in e?zo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var je=(e,t,n)=>(Xo(e,typeof t!="symbol"?t+"":t,n),n);import{S as Ct,i as Nt,s as Lt,k as ee,l as te,m as N,h as y,n as f,b as K,B as Pe,I as $e,J as W,g as nt,t as Ie,d as rt,f as de,K as bt,L as Pi,o as Xr,M as no,N as ht,e as Te,O as Kr,v as ft,w as qe,x as yt,y as Ze,z as xe,q as _e,r as me,G as I,u as Xe,A as yr,a as we,c as be,P as re,Q as ie,p as bn,R as di,T as pn,U as Wr,V as $t,W as Ko,C as Wo,D as qo,E as Zo,F as xo,X as Gi,Y as fl,Z as cl,_ as Ui,$ as ro,a0 as Jo,a1 as hl,a2 as Qo,a3 as jo,a4 as $o,a5 as es,a6 as We,H as Mt,a7 as _t,a8 as Yi,a9 as Ln,aa as ts,ab as ns,ac as rs,ad as is,ae as ls,af as dl,ag as ar,ah as as}from"../../chunks/index-5ece49a7.js";import{b as Mn}from"../../chunks/paths-6cd3a76e.js";import{w as zi}from"../../chunks/index-747ceb65.js";import{f as or}from"../../chunks/feather-e249e621.js";function wr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function os(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function io(e){let t,n,r;e.length!==2?(t=wr,n=(o,s)=>wr(e(o),s),r=(o,s)=>e(o)-s):(t=e===wr||e===os?e:ss,n=e,r=e);function i(o,s,u=0,h=o.length){if(u<h){if(t(s,s)!==0)return h;do{const c=u+h>>>1;n(o[c],s)<0?u=c+1:h=c}while(u<h)}return u}function a(o,s,u=0,h=o.length){if(u<h){if(t(s,s)!==0)return h;do{const c=u+h>>>1;n(o[c],s)<=0?u=c+1:h=c}while(u<h)}return u}function l(o,s,u=0,h=o.length){const c=i(o,s,u,h-1);return c>u&&r(o[c-1],s)>-r(o[c],s)?c-1:c}return{left:i,center:l,right:a}}function ss(){return 0}function us(e){return e===null?NaN:+e}const fs=io(wr),cs=fs.right;io(us).center;const hs=cs;function lo(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class _i extends Map{constructor(t,n=ms){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(_l(this,t))}has(t){return super.has(_l(this,t))}set(t,n){return super.set(ds(this,t),n)}delete(t){return super.delete(_s(this,t))}}function _l({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ds({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function _s({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ms(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Sr(e){return e}function mi(e,...t){return Xi(e,Sr,Sr,t)}function gi(e,t,...n){return Xi(e,Sr,t,n)}function ml(e,...t){return Xi(e,Sr,gs,t)}function gs(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Xi(e,t,n,r){return function i(a,l){if(l>=r.length)return n(a);const o=new _i,s=r[l++];let u=-1;for(const h of a){const c=s(h,++u,a),d=o.get(c);d?d.push(h):o.set(c,[h])}for(const[h,c]of o)o.set(h,i(c,l));return t(o)}(e,0)}var pi=Math.sqrt(50),vi=Math.sqrt(10),yi=Math.sqrt(2);function ps(e,t,n){var r,i=-1,a,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=ao(e,t,n))===0||!isFinite(o))return[];if(o>0){let s=Math.round(e/o),u=Math.round(t/o);for(s*o<e&&++s,u*o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)*o}else{o=-o;let s=Math.round(e*o),u=Math.round(t*o);for(s/o<e&&++s,u/o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)/o}return r&&l.reverse(),l}function ao(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=pi?10:a>=vi?5:a>=yi?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=pi?10:a>=vi?5:a>=yi?2:1)}function vs(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=pi?i*=10:a>=vi?i*=5:a>=yi&&(i*=2),t<e?-i:i}function qn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function gl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Mr(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function ys(e){return e}var Qr=1,br=2,wi=3,Xn=4,pl=1e-6;function ws(e){return"translate("+e+",0)"}function bs(e){return"translate(0,"+e+")"}function ks(e){return t=>+e(t)}function Es(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Is(){return!this.__axis}function Ki(e,t){var n=[],r=null,i=null,a=6,l=6,o=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Qr||e===Xn?-1:1,h=e===Xn||e===br?"x":"y",c=e===Qr||e===wi?ws:bs;function d(_){var g=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,E=i==null?t.tickFormat?t.tickFormat.apply(t,n):ys:i,m=Math.max(a,0)+o,w=t.range(),k=+w[0]+s,A=+w[w.length-1]+s,p=(t.bandwidth?Es:ks)(t.copy(),s),b=_.selection?_.selection():_,H=b.selectAll(".domain").data([null]),X=b.selectAll(".tick").data(g,t).order(),D=X.exit(),L=X.enter().append("g").attr("class","tick"),O=X.select("line"),S=X.select("text");H=H.merge(H.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),X=X.merge(L),O=O.merge(L.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),S=S.merge(L.append("text").attr("fill","currentColor").attr(h,u*m).attr("dy",e===Qr?"0em":e===wi?"0.71em":"0.32em")),_!==b&&(H=H.transition(_),X=X.transition(_),O=O.transition(_),S=S.transition(_),D=D.transition(_).attr("opacity",pl).attr("transform",function(G){return isFinite(G=p(G))?c(G+s):this.getAttribute("transform")}),L.attr("opacity",pl).attr("transform",function(G){var B=this.parentNode.__axis;return c((B&&isFinite(B=B(G))?B:p(G))+s)})),D.remove(),H.attr("d",e===Xn||e===br?l?"M"+u*l+","+k+"H"+s+"V"+A+"H"+u*l:"M"+s+","+k+"V"+A:l?"M"+k+","+u*l+"V"+s+"H"+A+"V"+u*l:"M"+k+","+s+"H"+A),X.attr("opacity",1).attr("transform",function(G){return c(p(G)+s)}),O.attr(h+"2",u*a),S.attr(h,u*m).text(E),b.filter(Is).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===br?"start":e===Xn?"end":"middle"),b.each(function(){this.__axis=p})}return d.scale=function(_){return arguments.length?(t=_,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),d):n.slice()},d.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),d):r&&r.slice()},d.tickFormat=function(_){return arguments.length?(i=_,d):i},d.tickSize=function(_){return arguments.length?(a=l=+_,d):a},d.tickSizeInner=function(_){return arguments.length?(a=+_,d):a},d.tickSizeOuter=function(_){return arguments.length?(l=+_,d):l},d.tickPadding=function(_){return arguments.length?(o=+_,d):o},d.offset=function(_){return arguments.length?(s=+_,d):s},d}function As(e){return Ki(br,e)}function oo(e){return Ki(wi,e)}function Ts(e){return Ki(Xn,e)}var Ss={value:()=>{}};function Wi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new kr(n)}function kr(e){this._=e}function Ms(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}kr.prototype=Wi.prototype={constructor:kr,on:function(e,t){var n=this._,r=Ms(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=Cs(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=vl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=vl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new kr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Cs(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function vl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ss,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var bi="http://www.w3.org/1999/xhtml";const yl={svg:"http://www.w3.org/2000/svg",xhtml:bi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),yl.hasOwnProperty(t)?{space:yl[t],local:e}:e}function Ns(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bi&&t.documentElement.namespaceURI===bi?t.createElement(e):t.createElementNS(n,e)}}function Ls(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function so(e){var t=qr(e);return(t.local?Ls:Ns)(t)}function Os(){}function qi(e){return e==null?Os:function(){return this.querySelector(e)}}function Ds(e){typeof e!="function"&&(e=qi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=new Array(l),s,u,h=0;h<l;++h)(s=a[h])&&(u=e.call(s,s.__data__,h,a))&&("__data__"in s&&(u.__data__=s.__data__),o[h]=u);return new wt(r,this._parents)}function Rs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Vs(){return[]}function uo(e){return e==null?Vs:function(){return this.querySelectorAll(e)}}function Fs(e){return function(){return Rs(e.apply(this,arguments))}}function Hs(e){typeof e=="function"?e=Fs(e):e=uo(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new wt(r,i)}function fo(e){return function(){return this.matches(e)}}function co(e){return function(t){return t.matches(e)}}var Bs=Array.prototype.find;function Ps(e){return function(){return Bs.call(this.children,e)}}function Gs(){return this.firstElementChild}function Us(e){return this.select(e==null?Gs:Ps(typeof e=="function"?e:co(e)))}var Ys=Array.prototype.filter;function zs(){return Array.from(this.children)}function Xs(e){return function(){return Ys.call(this.children,e)}}function Ks(e){return this.selectAll(e==null?zs:Xs(typeof e=="function"?e:co(e)))}function Ws(e){typeof e!="function"&&(e=fo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new wt(r,this._parents)}function ho(e){return new Array(e.length)}function qs(){return new wt(this._enter||this._groups.map(ho),this._parents)}function Cr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cr.prototype={constructor:Cr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zs(e){return function(){return e}}function xs(e,t,n,r,i,a){for(var l=0,o,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new Cr(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function Js(e,t,n,r,i,a,l){var o,s,u=new Map,h=t.length,c=a.length,d=new Array(h),_;for(o=0;o<h;++o)(s=t[o])&&(d[o]=_=l.call(s,s.__data__,o,t)+"",u.has(_)?i[o]=s:u.set(_,s));for(o=0;o<c;++o)_=l.call(e,a[o],o,a)+"",(s=u.get(_))?(r[o]=s,s.__data__=a[o],u.delete(_)):n[o]=new Cr(e,a[o]);for(o=0;o<h;++o)(s=t[o])&&u.get(d[o])===s&&(i[o]=s)}function Qs(e){return e.__data__}function js(e,t){if(!arguments.length)return Array.from(this,Qs);var n=t?Js:xs,r=this._parents,i=this._groups;typeof e!="function"&&(e=Zs(e));for(var a=i.length,l=new Array(a),o=new Array(a),s=new Array(a),u=0;u<a;++u){var h=r[u],c=i[u],d=c.length,_=$s(e.call(h,h&&h.__data__,u,r)),g=_.length,E=o[u]=new Array(g),m=l[u]=new Array(g),w=s[u]=new Array(d);n(h,c,E,m,w,_,t);for(var k=0,A=0,p,b;k<g;++k)if(p=E[k]){for(k>=A&&(A=k+1);!(b=m[A])&&++A<g;);p._next=b||null}}return l=new wt(l,r),l._enter=o,l._exit=s,l}function $s(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eu(){return new wt(this._exit||this._groups.map(ho),this._parents)}function tu(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function nu(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),o=new Array(i),s=0;s<l;++s)for(var u=n[s],h=r[s],c=u.length,d=o[s]=new Array(c),_,g=0;g<c;++g)(_=u[g]||h[g])&&(d[g]=_);for(;s<i;++s)o[s]=n[s];return new wt(o,this._parents)}function ru(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function iu(e){e||(e=lu);function t(c,d){return c&&d?e(c.__data__,d.__data__):!c-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],o=l.length,s=i[a]=new Array(o),u,h=0;h<o;++h)(u=l[h])&&(s[h]=u);s.sort(t)}return new wt(i,this._parents).order()}function lu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function au(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ou(){return Array.from(this)}function su(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function uu(){let e=0;for(const t of this)++e;return e}function fu(){return!this.node()}function cu(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,o;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function hu(e){return function(){this.removeAttribute(e)}}function du(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _u(e,t){return function(){this.setAttribute(e,t)}}function mu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function pu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vu(e,t){var n=qr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?du:hu:typeof t=="function"?n.local?pu:gu:n.local?mu:_u)(n,t))}function _o(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yu(e){return function(){this.style.removeProperty(e)}}function wu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function bu(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ku(e,t,n){return arguments.length>1?this.each((t==null?yu:typeof t=="function"?bu:wu)(e,t,n==null?"":n)):Dn(this.node(),e)}function Dn(e,t){return e.style.getPropertyValue(t)||_o(e).getComputedStyle(e,null).getPropertyValue(t)}function Eu(e){return function(){delete this[e]}}function Iu(e,t){return function(){this[e]=t}}function Au(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Tu(e,t){return arguments.length>1?this.each((t==null?Eu:typeof t=="function"?Au:Iu)(e,t)):this.node()[e]}function mo(e){return e.trim().split(/^|\s+/)}function Zi(e){return e.classList||new go(e)}function go(e){this._node=e,this._names=mo(e.getAttribute("class")||"")}go.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function po(e,t){for(var n=Zi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function vo(e,t){for(var n=Zi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Su(e){return function(){po(this,e)}}function Mu(e){return function(){vo(this,e)}}function Cu(e,t){return function(){(t.apply(this,arguments)?po:vo)(this,e)}}function Nu(e,t){var n=mo(e+"");if(arguments.length<2){for(var r=Zi(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Cu:t?Su:Mu)(n,t))}function Lu(){this.textContent=""}function Ou(e){return function(){this.textContent=e}}function Du(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Ru(e){return arguments.length?this.each(e==null?Lu:(typeof e=="function"?Du:Ou)(e)):this.node().textContent}function Vu(){this.innerHTML=""}function Fu(e){return function(){this.innerHTML=e}}function Hu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Bu(e){return arguments.length?this.each(e==null?Vu:(typeof e=="function"?Hu:Fu)(e)):this.node().innerHTML}function Pu(){this.nextSibling&&this.parentNode.appendChild(this)}function Gu(){return this.each(Pu)}function Uu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yu(){return this.each(Uu)}function zu(e){var t=typeof e=="function"?e:so(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Xu(){return null}function Ku(e,t){var n=typeof e=="function"?e:so(e),r=t==null?Xu:typeof t=="function"?t:qi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Wu(){var e=this.parentNode;e&&e.removeChild(this)}function qu(){return this.each(Wu)}function Zu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ju(e){return this.select(e?xu:Zu)}function Qu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ju(e){return function(t){e.call(this,t,this.__data__)}}function $u(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ef(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function tf(e,t,n){return function(){var r=this.__on,i,a=ju(t);if(r){for(var l=0,o=r.length;l<o;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function nf(e,t,n){var r=$u(e+""),i,a=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var s=0,u=o.length,h;s<u;++s)for(i=0,h=o[s];i<a;++i)if((l=r[i]).type===h.type&&l.name===h.name)return h.value}return}for(o=t?tf:ef,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function yo(e,t,n){var r=_o(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function rf(e,t){return function(){return yo(this,e,t)}}function lf(e,t){return function(){return yo(this,e,t.apply(this,arguments))}}function af(e,t){return this.each((typeof t=="function"?lf:rf)(e,t))}function*of(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var wo=[null];function wt(e,t){this._groups=e,this._parents=t}function er(){return new wt([[document.documentElement]],wo)}function sf(){return this}wt.prototype=er.prototype={constructor:wt,select:Ds,selectAll:Hs,selectChild:Us,selectChildren:Ks,filter:Ws,data:js,enter:qs,exit:eu,join:tu,merge:nu,selection:sf,order:ru,sort:iu,call:au,nodes:ou,node:su,size:uu,empty:fu,each:cu,attr:vu,style:ku,property:Tu,classed:Nu,text:Ru,html:Bu,raise:Gu,lower:Yu,append:zu,insert:Ku,remove:qu,clone:Ju,datum:Qu,on:nf,dispatch:af,[Symbol.iterator]:of};function Ve(e){return typeof e=="string"?new wt([[document.querySelector(e)]],[document.documentElement]):new wt([[e]],wo)}function uf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function wl(e,t){if(e=uf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const ki={capture:!0,passive:!1};function Ei(e){e.preventDefault(),e.stopImmediatePropagation()}function ff(e){var t=e.document.documentElement,n=Ve(e).on("dragstart.drag",Ei,ki);"onselectstart"in t?n.on("selectstart.drag",Ei,ki):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function cf(e,t){var n=e.document.documentElement,r=Ve(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ei,ki),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function xi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tr(){}var Jn=.7,Nr=1/Jn,On="\\s*([+-]?\\d+)\\s*",Qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hf=/^#([0-9a-f]{3,8})$/,df=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),_f=new RegExp(`^rgb\\(${Ft},${Ft},${Ft}\\)$`),mf=new RegExp(`^rgba\\(${On},${On},${On},${Qn}\\)$`),gf=new RegExp(`^rgba\\(${Ft},${Ft},${Ft},${Qn}\\)$`),pf=new RegExp(`^hsl\\(${Qn},${Ft},${Ft}\\)$`),vf=new RegExp(`^hsla\\(${Qn},${Ft},${Ft},${Qn}\\)$`),bl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xi(tr,_n,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kl,formatHex:kl,formatHex8:yf,formatHsl:wf,formatRgb:El,toString:El});function kl(){return this.rgb().formatHex()}function yf(){return this.rgb().formatHex8()}function wf(){return ko(this).formatHsl()}function El(){return this.rgb().formatRgb()}function _n(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Il(t):n===3?new mt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=df.exec(e))?new mt(t[1],t[2],t[3],1):(t=_f.exec(e))?new mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mf.exec(e))?sr(t[1],t[2],t[3],t[4]):(t=gf.exec(e))?sr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pf.exec(e))?Sl(t[1],t[2]/100,t[3]/100,1):(t=vf.exec(e))?Sl(t[1],t[2]/100,t[3]/100,t[4]):bl.hasOwnProperty(e)?Il(bl[e]):e==="transparent"?new mt(NaN,NaN,NaN,0):null}function Il(e){return new mt(e>>16&255,e>>8&255,e&255,1)}function sr(e,t,n,r){return r<=0&&(e=t=n=NaN),new mt(e,t,n,r)}function bf(e){return e instanceof tr||(e=_n(e)),e?(e=e.rgb(),new mt(e.r,e.g,e.b,e.opacity)):new mt}function Ii(e,t,n,r){return arguments.length===1?bf(e):new mt(e,t,n,r==null?1:r)}function mt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}xi(mt,Ii,bo(tr,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new mt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jn:Math.pow(Jn,e),new mt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mt(hn(this.r),hn(this.g),hn(this.b),Lr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Al,formatHex:Al,formatHex8:kf,formatRgb:Tl,toString:Tl}));function Al(){return`#${un(this.r)}${un(this.g)}${un(this.b)}`}function kf(){return`#${un(this.r)}${un(this.g)}${un(this.b)}${un((isNaN(this.opacity)?1:this.opacity)*255)}`}function Tl(){const e=Lr(this.opacity);return`${e===1?"rgb(":"rgba("}${hn(this.r)}, ${hn(this.g)}, ${hn(this.b)}${e===1?")":`, ${e})`}`}function Lr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function un(e){return e=hn(e),(e<16?"0":"")+e.toString(16)}function Sl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new St(e,t,n,r)}function ko(e){if(e instanceof St)return new St(e.h,e.s,e.l,e.opacity);if(e instanceof tr||(e=_n(e)),!e)return new St;if(e instanceof St)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,o=a-i,s=(a+i)/2;return o?(t===a?l=(n-r)/o+(n<r)*6:n===a?l=(r-t)/o+2:l=(t-n)/o+4,o/=s<.5?a+i:2-a-i,l*=60):o=s>0&&s<1?0:l,new St(l,o,s,e.opacity)}function Ef(e,t,n,r){return arguments.length===1?ko(e):new St(e,t,n,r==null?1:r)}function St(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}xi(St,Ef,bo(tr,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new St(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jn:Math.pow(Jn,e),new St(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new mt(jr(e>=240?e-240:e+120,i,r),jr(e,i,r),jr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new St(Ml(this.h),ur(this.s),ur(this.l),Lr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lr(this.opacity);return`${e===1?"hsl(":"hsla("}${Ml(this.h)}, ${ur(this.s)*100}%, ${ur(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ml(e){return e=(e||0)%360,e<0?e+360:e}function ur(e){return Math.max(0,Math.min(1,e||0))}function jr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ji=e=>()=>e;function If(e,t){return function(n){return e+n*t}}function Af(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Tf(e){return(e=+e)==1?Eo:function(t,n){return n-t?Af(t,n,e):Ji(isNaN(t)?n:t)}}function Eo(e,t){var n=t-e;return n?If(e,n):Ji(isNaN(e)?t:e)}const Or=function e(t){var n=Tf(t);function r(i,a){var l=n((i=Ii(i)).r,(a=Ii(a)).r),o=n(i.g,a.g),s=n(i.b,a.b),u=Eo(i.opacity,a.opacity);return function(h){return i.r=l(h),i.g=o(h),i.b=s(h),i.opacity=u(h),i+""}}return r.gamma=e,r}(1);function Sf(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Mf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cf(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=Zr(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(o){for(l=0;l<r;++l)a[l]=i[l](o);return a}}function Nf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Lf(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Zr(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ai=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$r=new RegExp(Ai.source,"g");function Of(e){return function(){return e}}function Df(e){return function(t){return e(t)+""}}function Io(e,t){var n=Ai.lastIndex=$r.lastIndex=0,r,i,a,l=-1,o=[],s=[];for(e=e+"",t=t+"";(r=Ai.exec(e))&&(i=$r.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[l]?o[l]+=a:o[++l]=a),(r=r[0])===(i=i[0])?o[l]?o[l]+=i:o[++l]=i:(o[++l]=null,s.push({i:l,x:Tt(r,i)})),n=$r.lastIndex;return n<t.length&&(a=t.slice(n),o[l]?o[l]+=a:o[++l]=a),o.length<2?s[0]?Df(s[0].x):Of(t):(t=s.length,function(u){for(var h=0,c;h<t;++h)o[(c=s[h]).i]=c.x(u);return o.join("")})}function Zr(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ji(t):(n==="number"?Tt:n==="string"?(r=_n(t))?(t=r,Or):Io:t instanceof _n?Or:t instanceof Date?Nf:Mf(t)?Sf:Array.isArray(t)?Cf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Lf:Tt)(e,t)}function Rf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Cl=180/Math.PI,Ti={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ao(e,t,n,r,i,a){var l,o,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,s/=o),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Cl,skewX:Math.atan(s)*Cl,scaleX:l,scaleY:o}}var fr;function Vf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ti:Ao(t.a,t.b,t.c,t.d,t.e,t.f)}function Ff(e){return e==null||(fr||(fr=document.createElementNS("http://www.w3.org/2000/svg","g")),fr.setAttribute("transform",e),!(e=fr.transform.baseVal.consolidate()))?Ti:(e=e.matrix,Ao(e.a,e.b,e.c,e.d,e.e,e.f))}function To(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,c,d,_,g){if(u!==c||h!==d){var E=_.push("translate(",null,t,null,n);g.push({i:E-4,x:Tt(u,c)},{i:E-2,x:Tt(h,d)})}else(c||d)&&_.push("translate("+c+t+d+n)}function l(u,h,c,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Tt(u,h)})):h&&c.push(i(c)+"rotate("+h+r)}function o(u,h,c,d){u!==h?d.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Tt(u,h)}):h&&c.push(i(c)+"skewX("+h+r)}function s(u,h,c,d,_,g){if(u!==c||h!==d){var E=_.push(i(_)+"scale(",null,",",null,")");g.push({i:E-4,x:Tt(u,c)},{i:E-2,x:Tt(h,d)})}else(c!==1||d!==1)&&_.push(i(_)+"scale("+c+","+d+")")}return function(u,h){var c=[],d=[];return u=e(u),h=e(h),a(u.translateX,u.translateY,h.translateX,h.translateY,c,d),l(u.rotate,h.rotate,c,d),o(u.skewX,h.skewX,c,d),s(u.scaleX,u.scaleY,h.scaleX,h.scaleY,c,d),u=h=null,function(_){for(var g=-1,E=d.length,m;++g<E;)c[(m=d[g]).i]=m.x(_);return c.join("")}}}var Hf=To(Vf,"px, ","px)","deg)"),Bf=To(Ff,", ",")",")"),Rn=0,Kn=0,Pn=0,So=1e3,Dr,Wn,Rr=0,mn=0,xr=0,jn=typeof performance=="object"&&performance.now?performance:Date,Mo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qi(){return mn||(Mo(Pf),mn=jn.now()+xr)}function Pf(){mn=0}function Vr(){this._call=this._time=this._next=null}Vr.prototype=Co.prototype={constructor:Vr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Qi():+n)+(t==null?0:+t),!this._next&&Wn!==this&&(Wn?Wn._next=this:Dr=this,Wn=this),this._call=e,this._time=n,Si()},stop:function(){this._call&&(this._call=null,this._time=1/0,Si())}};function Co(e,t,n){var r=new Vr;return r.restart(e,t,n),r}function Gf(){Qi(),++Rn;for(var e=Dr,t;e;)(t=mn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Rn}function Nl(){mn=(Rr=jn.now())+xr,Rn=Kn=0;try{Gf()}finally{Rn=0,Yf(),mn=0}}function Uf(){var e=jn.now(),t=e-Rr;t>So&&(xr-=t,Rr=e)}function Yf(){for(var e,t=Dr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Dr=n);Wn=e,Si(r)}function Si(e){if(!Rn){Kn&&(Kn=clearTimeout(Kn));var t=e-mn;t>24?(e<1/0&&(Kn=setTimeout(Nl,e-jn.now()-xr)),Pn&&(Pn=clearInterval(Pn))):(Pn||(Rr=jn.now(),Pn=setInterval(Uf,So)),Rn=1,Mo(Nl))}}function Ll(e,t,n){var r=new Vr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var zf=Wi("start","end","cancel","interrupt"),Xf=[],No=0,Ol=1,Mi=2,Er=3,Dl=4,Ci=5,Ir=6;function Jr(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Kf(e,n,{name:t,index:r,group:i,on:zf,tween:Xf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:No})}function ji(e,t){var n=Ot(e,t);if(n.state>No)throw new Error("too late; already scheduled");return n}function Ht(e,t){var n=Ot(e,t);if(n.state>Er)throw new Error("too late; already running");return n}function Ot(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Kf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Co(a,0,n.time);function a(u){n.state=Ol,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var h,c,d,_;if(n.state!==Ol)return s();for(h in r)if(_=r[h],_.name===n.name){if(_.state===Er)return Ll(l);_.state===Dl?(_.state=Ir,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[h]):+h<t&&(_.state=Ir,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[h])}if(Ll(function(){n.state===Er&&(n.state=Dl,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Mi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Mi){for(n.state=Er,i=new Array(d=n.tween.length),h=0,c=-1;h<d;++h)(_=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=_);i.length=c+1}}function o(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Ci,1),c=-1,d=i.length;++c<d;)i[c].call(e,h);n.state===Ci&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ir,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ni(e,t){var n=e.__transition,r,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>Mi&&r.state<Ci,r.state=Ir,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function Wf(e){return this.each(function(){Ni(this,e)})}function qf(e,t){var n,r;return function(){var i=Ht(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,o=r.length;l<o;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function Zf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Ht(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var o={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=o;break}s===u&&i.push(o)}a.tween=i}}function xf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ot(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?qf:Zf)(n,e,t))}function $i(e,t,n){var r=e._id;return e.each(function(){var i=Ht(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ot(i,r).value[t]}}function Lo(e,t){var n;return(typeof t=="number"?Tt:t instanceof _n?Or:(n=_n(t))?(t=n,Or):Io)(e,t)}function Jf(e){return function(){this.removeAttribute(e)}}function Qf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function $f(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function ec(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function tc(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function nc(e,t){var n=qr(e),r=n==="transform"?Bf:Lo;return this.attrTween(e,typeof t=="function"?(n.local?tc:ec)(n,r,$i(this,"attr."+e,t)):t==null?(n.local?Qf:Jf)(n):(n.local?$f:jf)(n,r,t))}function rc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ic(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lc(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ic(e,a)),n}return i._value=t,i}function ac(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&rc(e,a)),n}return i._value=t,i}function oc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=qr(e);return this.tween(n,(r.local?lc:ac)(r,t))}function sc(e,t){return function(){ji(this,e).delay=+t.apply(this,arguments)}}function uc(e,t){return t=+t,function(){ji(this,e).delay=t}}function fc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sc:uc)(t,e)):Ot(this.node(),t).delay}function cc(e,t){return function(){Ht(this,e).duration=+t.apply(this,arguments)}}function hc(e,t){return t=+t,function(){Ht(this,e).duration=t}}function dc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cc:hc)(t,e)):Ot(this.node(),t).duration}function _c(e,t){if(typeof t!="function")throw new Error;return function(){Ht(this,e).ease=t}}function mc(e){var t=this._id;return arguments.length?this.each(_c(t,e)):Ot(this.node(),t).ease}function gc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ht(this,e).ease=n}}function pc(e){if(typeof e!="function")throw new Error;return this.each(gc(this._id,e))}function vc(e){typeof e!="function"&&(e=fo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new xt(r,this._parents,this._name,this._id)}function yc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),o=0;o<a;++o)for(var s=t[o],u=n[o],h=s.length,c=l[o]=new Array(h),d,_=0;_<h;++_)(d=s[_]||u[_])&&(c[_]=d);for(;o<r;++o)l[o]=t[o];return new xt(l,this._parents,this._name,this._id)}function wc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bc(e,t,n){var r,i,a=wc(t)?ji:Ht;return function(){var l=a(this,e),o=l.on;o!==r&&(i=(r=o).copy()).on(t,n),l.on=i}}function kc(e,t){var n=this._id;return arguments.length<2?Ot(this.node(),n).on.on(e):this.each(bc(n,e,t))}function Ec(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ic(){return this.on("end.remove",Ec(this._id))}function Ac(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qi(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var o=r[l],s=o.length,u=a[l]=new Array(s),h,c,d=0;d<s;++d)(h=o[d])&&(c=e.call(h,h.__data__,d,o))&&("__data__"in h&&(c.__data__=h.__data__),u[d]=c,Jr(u[d],t,n,d,u,Ot(h,n)));return new xt(a,this._parents,t,n)}function Tc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=uo(e));for(var r=this._groups,i=r.length,a=[],l=[],o=0;o<i;++o)for(var s=r[o],u=s.length,h,c=0;c<u;++c)if(h=s[c]){for(var d=e.call(h,h.__data__,c,s),_,g=Ot(h,n),E=0,m=d.length;E<m;++E)(_=d[E])&&Jr(_,t,n,E,d,g);a.push(d),l.push(h)}return new xt(a,l,t,n)}var Sc=er.prototype.constructor;function Mc(){return new Sc(this._groups,this._parents)}function Cc(e,t){var n,r,i;return function(){var a=Dn(this,e),l=(this.style.removeProperty(e),Dn(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function Oo(e){return function(){this.style.removeProperty(e)}}function Nc(e,t,n){var r,i=n+"",a;return function(){var l=Dn(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function Lc(e,t,n){var r,i,a;return function(){var l=Dn(this,e),o=n(this),s=o+"";return o==null&&(s=o=(this.style.removeProperty(e),Dn(this,e))),l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o))}}function Oc(e,t){var n,r,i,a="style."+t,l="end."+a,o;return function(){var s=Ht(this,e),u=s.on,h=s.value[a]==null?o||(o=Oo(t)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(l,i=h),s.on=r}}function Dc(e,t,n){var r=(e+="")=="transform"?Hf:Lo;return t==null?this.styleTween(e,Cc(e,r)).on("end.style."+e,Oo(e)):typeof t=="function"?this.styleTween(e,Lc(e,r,$i(this,"style."+e,t))).each(Oc(this._id,e)):this.styleTween(e,Nc(e,r,t),n).on("end.style."+e,null)}function Rc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Vc(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&Rc(e,l,n)),r}return a._value=t,a}function Fc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Vc(e,t,n==null?"":n))}function Hc(e){return function(){this.textContent=e}}function Bc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Pc(e){return this.tween("text",typeof e=="function"?Bc($i(this,"text",e)):Hc(e==null?"":e+""))}function Gc(e){return function(t){this.textContent=e.call(this,t)}}function Uc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Gc(i)),t}return r._value=e,r}function Yc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Uc(e))}function zc(){for(var e=this._name,t=this._id,n=Do(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)if(s=l[u]){var h=Ot(s,t);Jr(s,e,n,u,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new xt(r,this._parents,e,n)}function Xc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var o={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var u=Ht(this,r),h=u.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(s)),u.on=t}),i===0&&a()})}var Kc=0;function xt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Do(){return++Kc}var Xt=er.prototype;xt.prototype={constructor:xt,select:Ac,selectAll:Tc,selectChild:Xt.selectChild,selectChildren:Xt.selectChildren,filter:vc,merge:yc,selection:Mc,transition:zc,call:Xt.call,nodes:Xt.nodes,node:Xt.node,size:Xt.size,empty:Xt.empty,each:Xt.each,on:kc,attr:nc,attrTween:oc,style:Dc,styleTween:Fc,text:Pc,textTween:Yc,remove:Ic,tween:xf,delay:fc,duration:dc,ease:mc,easeVarying:pc,end:Xc,[Symbol.iterator]:Xt[Symbol.iterator]};function Wc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qc={time:null,delay:0,duration:250,ease:Wc};function Zc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function xc(e){var t,n;e instanceof xt?(t=e._id,e=e._name):(t=Do(),(n=qc).time=Qi(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&Jr(s,e,t,u,l,n||Zc(s,t));return new xt(r,this._parents,e,t)}er.prototype.interrupt=Wf;er.prototype.transition=xc;const ei=e=>()=>e;function Jc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Qc(e){e.stopImmediatePropagation()}function ti(e){e.preventDefault(),e.stopImmediatePropagation()}var Rl={name:"drag"},ni={name:"space"},kn={name:"handle"},En={name:"center"};const{abs:Vl,max:ot,min:st}=Math;function Fl(e){return[+e[0],+e[1]]}function Hl(e){return[Fl(e[0]),Fl(e[1])]}var Ar={name:"x",handles:["w","e"].map(Fr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ri={name:"y",handles:["n","s"].map(Fr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Kt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Pl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},jc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},$c={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Fr(e){return{type:e}}function eh(e){return!e.ctrlKey&&!e.button}function th(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function nh(){return navigator.maxTouchPoints||"ontouchstart"in this}function ii(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function rh(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ih(){return lh(Ar)}function lh(e){var t=th,n=eh,r=nh,i=!0,a=Wi("start","brush","end"),l=6,o;function s(m){var w=m.property("__brush",E).selectAll(".overlay").data([Fr("overlay")]);w.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Kt.overlay).merge(w).each(function(){var A=ii(this).extent;Ve(this).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1])}),m.selectAll(".selection").data([Fr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Kt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var k=m.selectAll(".handle").data(e.handles,function(A){return A.type});k.exit().remove(),k.enter().append("rect").attr("class",function(A){return"handle handle--"+A.type}).attr("cursor",function(A){return Kt[A.type]}),m.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(m,w,k){m.tween?m.on("start.brush",function(A){h(this,arguments).beforestart().start(A)}).on("interrupt.brush end.brush",function(A){h(this,arguments).end(A)}).tween("brush",function(){var A=this,p=A.__brush,b=h(A,arguments),H=p.selection,X=e.input(typeof w=="function"?w.apply(this,arguments):w,p.extent),D=Zr(H,X);function L(O){p.selection=O===1&&X===null?null:D(O),u.call(A),b.brush()}return H!==null&&X!==null?L:L(1)}):m.each(function(){var A=this,p=arguments,b=A.__brush,H=e.input(typeof w=="function"?w.apply(A,p):w,b.extent),X=h(A,p).beforestart();Ni(A),b.selection=H===null?null:H,u.call(A),X.start(k).brush(k).end(k)})},s.clear=function(m,w){s.move(m,null,w)};function u(){var m=Ve(this),w=ii(this).selection;w?(m.selectAll(".selection").style("display",null).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(k){return k.type[k.type.length-1]==="e"?w[1][0]-l/2:w[0][0]-l/2}).attr("y",function(k){return k.type[0]==="s"?w[1][1]-l/2:w[0][1]-l/2}).attr("width",function(k){return k.type==="n"||k.type==="s"?w[1][0]-w[0][0]+l:l}).attr("height",function(k){return k.type==="e"||k.type==="w"?w[1][1]-w[0][1]+l:l})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(m,w,k){var A=m.__brush.emitter;return A&&(!k||!A.clean)?A:new c(m,w,k)}function c(m,w,k){this.that=m,this.args=w,this.state=m.__brush,this.active=0,this.clean=k}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,w){return this.starting?(this.starting=!1,this.emit("start",m,w)):this.emit("brush",m),this},brush:function(m,w){return this.emit("brush",m,w),this},end:function(m,w){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,w)),this},emit:function(m,w,k){var A=Ve(this.that).datum();a.call(m,this.that,new Jc(m,{sourceEvent:w,target:s,selection:e.output(this.state.selection),mode:k,dispatch:a}),A)}};function d(m){if(o&&!m.touches||!n.apply(this,arguments))return;var w=this,k=m.target.__data__.type,A=(i&&m.metaKey?k="overlay":k)==="selection"?Rl:i&&m.altKey?En:kn,p=e===ri?null:jc[k],b=e===Ar?null:$c[k],H=ii(w),X=H.extent,D=H.selection,L=X[0][0],O,S,G=X[0][1],B,U,T=X[1][0],M,oe,j=X[1][1],le,ce,ue=0,ve=0,x,ge=p&&b&&i&&m.shiftKey,Ae,Se,ye=Array.from(m.touches||[m],ae=>{const Me=ae.identifier;return ae=wl(ae,w),ae.point0=ae.slice(),ae.identifier=Me,ae});Ni(w);var R=h(w,arguments,!0).beforestart();if(k==="overlay"){D&&(x=!0);const ae=[ye[0],ye[1]||ye[0]];H.selection=D=[[O=e===ri?L:st(ae[0][0],ae[1][0]),B=e===Ar?G:st(ae[0][1],ae[1][1])],[M=e===ri?T:ot(ae[0][0],ae[1][0]),le=e===Ar?j:ot(ae[0][1],ae[1][1])]],ye.length>1&&q(m)}else O=D[0][0],B=D[0][1],M=D[1][0],le=D[1][1];S=O,U=B,oe=M,ce=le;var $=Ve(w).attr("pointer-events","none"),C=$.selectAll(".overlay").attr("cursor",Kt[k]);if(m.touches)R.moved=Z,R.ended=se;else{var Y=Ve(m.view).on("mousemove.brush",Z,!0).on("mouseup.brush",se,!0);i&&Y.on("keydown.brush",De,!0).on("keyup.brush",Fe,!0),ff(m.view)}u.call(w),R.start(m,A.name);function Z(ae){for(const Me of ae.changedTouches||[ae])for(const ke of ye)ke.identifier===Me.identifier&&(ke.cur=wl(Me,w));if(ge&&!Ae&&!Se&&ye.length===1){const Me=ye[0];Vl(Me.cur[0]-Me[0])>Vl(Me.cur[1]-Me[1])?Se=!0:Ae=!0}for(const Me of ye)Me.cur&&(Me[0]=Me.cur[0],Me[1]=Me.cur[1]);x=!0,ti(ae),q(ae)}function q(ae){const Me=ye[0],ke=Me.point0;var P;switch(ue=Me[0]-ke[0],ve=Me[1]-ke[1],A){case ni:case Rl:{p&&(ue=ot(L-O,st(T-M,ue)),S=O+ue,oe=M+ue),b&&(ve=ot(G-B,st(j-le,ve)),U=B+ve,ce=le+ve);break}case kn:{ye[1]?(p&&(S=ot(L,st(T,ye[0][0])),oe=ot(L,st(T,ye[1][0])),p=1),b&&(U=ot(G,st(j,ye[0][1])),ce=ot(G,st(j,ye[1][1])),b=1)):(p<0?(ue=ot(L-O,st(T-O,ue)),S=O+ue,oe=M):p>0&&(ue=ot(L-M,st(T-M,ue)),S=O,oe=M+ue),b<0?(ve=ot(G-B,st(j-B,ve)),U=B+ve,ce=le):b>0&&(ve=ot(G-le,st(j-le,ve)),U=B,ce=le+ve));break}case En:{p&&(S=ot(L,st(T,O-ue*p)),oe=ot(L,st(T,M+ue*p))),b&&(U=ot(G,st(j,B-ve*b)),ce=ot(G,st(j,le+ve*b)));break}}oe<S&&(p*=-1,P=O,O=M,M=P,P=S,S=oe,oe=P,k in Bl&&C.attr("cursor",Kt[k=Bl[k]])),ce<U&&(b*=-1,P=B,B=le,le=P,P=U,U=ce,ce=P,k in Pl&&C.attr("cursor",Kt[k=Pl[k]])),H.selection&&(D=H.selection),Ae&&(S=D[0][0],oe=D[1][0]),Se&&(U=D[0][1],ce=D[1][1]),(D[0][0]!==S||D[0][1]!==U||D[1][0]!==oe||D[1][1]!==ce)&&(H.selection=[[S,U],[oe,ce]],u.call(w),R.brush(ae,A.name))}function se(ae){if(Qc(ae),ae.touches){if(ae.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else cf(ae.view,x),Y.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),C.attr("cursor",Kt.overlay),H.selection&&(D=H.selection),rh(D)&&(H.selection=null,u.call(w)),R.end(ae,A.name)}function De(ae){switch(ae.keyCode){case 16:{ge=p&&b;break}case 18:{A===kn&&(p&&(M=oe-ue*p,O=S+ue*p),b&&(le=ce-ve*b,B=U+ve*b),A=En,q(ae));break}case 32:{(A===kn||A===En)&&(p<0?M=oe-ue:p>0&&(O=S-ue),b<0?le=ce-ve:b>0&&(B=U-ve),A=ni,C.attr("cursor",Kt.selection),q(ae));break}default:return}ti(ae)}function Fe(ae){switch(ae.keyCode){case 16:{ge&&(Ae=Se=ge=!1,q(ae));break}case 18:{A===En&&(p<0?M=oe:p>0&&(O=S),b<0?le=ce:b>0&&(B=U),A=kn,q(ae));break}case 32:{A===ni&&(ae.altKey?(p&&(M=oe-ue*p,O=S+ue*p),b&&(le=ce-ve*b,B=U+ve*b),A=En):(p<0?M=oe:p>0&&(O=S),b<0?le=ce:b>0&&(B=U),A=kn),C.attr("cursor",Kt[k]),q(ae));break}default:return}ti(ae)}}function _(m){h(this,arguments).moved(m)}function g(m){h(this,arguments).ended(m)}function E(){var m=this.__brush||{selection:null};return m.extent=Hl(t.apply(this,arguments)),m.dim=e,m}return s.extent=function(m){return arguments.length?(t=typeof m=="function"?m:ei(Hl(m)),s):t},s.filter=function(m){return arguments.length?(n=typeof m=="function"?m:ei(!!m),s):n},s.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:ei(!!m),s):r},s.handleSize=function(m){return arguments.length?(l=+m,s):l},s.keyModifiers=function(m){return arguments.length?(i=!!m,s):i},s.on=function(){var m=a.on.apply(a,arguments);return m===a?s:m},s}const Li=Math.PI,Oi=2*Li,sn=1e-6,ah=Oi-sn;function Di(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ri(){return new Di}Di.prototype=Ri.prototype={constructor:Di,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,l=this._y1,o=n-e,s=r-t,u=a-e,h=l-t,c=u*u+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(c>sn)if(!(Math.abs(h*o-s*u)>sn)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-a,_=r-l,g=o*o+s*s,E=d*d+_*_,m=Math.sqrt(g),w=Math.sqrt(c),k=i*Math.tan((Li-Math.acos((g+c-E)/(2*m*w)))/2),A=k/w,p=k/m;Math.abs(A-1)>sn&&(this._+="L"+(e+A*u)+","+(t+A*h)),this._+="A"+i+","+i+",0,0,"+ +(h*d>u*_)+","+(this._x1=e+p*o)+","+(this._y1=t+p*s)}},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n,a=!!a;var l=n*Math.cos(r),o=n*Math.sin(r),s=e+l,u=t+o,h=1^a,c=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>sn||Math.abs(this._y1-u)>sn)&&(this._+="L"+s+","+u),n&&(c<0&&(c=c%Oi+Oi),c>ah?this._+="A"+n+","+n+",0,1,"+h+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+h+","+(this._x1=s)+","+(this._y1=u):c>sn&&(this._+="A"+n+","+n+",0,"+ +(c>=Li)+","+h+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Gl={},li={},ai=34,Gn=10,oi=13;function Ro(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function oh(e,t){var n=Ro(e);return function(r,i){return t(n(r),i,e)}}function Ul(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function dt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function sh(e){return e<0?"-"+dt(-e,6):e>9999?"+"+dt(e,6):dt(e,4)}function uh(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":sh(e.getUTCFullYear())+"-"+dt(e.getUTCMonth()+1,2)+"-"+dt(e.getUTCDate(),2)+(i?"T"+dt(t,2)+":"+dt(n,2)+":"+dt(r,2)+"."+dt(i,3)+"Z":r?"T"+dt(t,2)+":"+dt(n,2)+":"+dt(r,2)+"Z":n||t?"T"+dt(t,2)+":"+dt(n,2)+"Z":"")}function fh(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,d){var _,g,E=i(c,function(m,w){if(_)return _(m,w-1);g=m,_=d?oh(m,d):Ro(m)});return E.columns=g||[],E}function i(c,d){var _=[],g=c.length,E=0,m=0,w,k=g<=0,A=!1;c.charCodeAt(g-1)===Gn&&--g,c.charCodeAt(g-1)===oi&&--g;function p(){if(k)return li;if(A)return A=!1,Gl;var H,X=E,D;if(c.charCodeAt(X)===ai){for(;E++<g&&c.charCodeAt(E)!==ai||c.charCodeAt(++E)===ai;);return(H=E)>=g?k=!0:(D=c.charCodeAt(E++))===Gn?A=!0:D===oi&&(A=!0,c.charCodeAt(E)===Gn&&++E),c.slice(X+1,H-1).replace(/""/g,'"')}for(;E<g;){if((D=c.charCodeAt(H=E++))===Gn)A=!0;else if(D===oi)A=!0,c.charCodeAt(E)===Gn&&++E;else if(D!==n)continue;return c.slice(X,H)}return k=!0,c.slice(X,g)}for(;(w=p())!==li;){for(var b=[];w!==Gl&&w!==li;)b.push(w),w=p();d&&(b=d(b,m++))==null||_.push(b)}return _}function a(c,d){return c.map(function(_){return d.map(function(g){return h(_[g])}).join(e)})}function l(c,d){return d==null&&(d=Ul(c)),[d.map(h).join(e)].concat(a(c,d)).join(`
`)}function o(c,d){return d==null&&(d=Ul(c)),a(c,d).join(`
`)}function s(c){return c.map(u).join(`
`)}function u(c){return c.map(h).join(e)}function h(c){return c==null?"":c instanceof Date?uh(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:l,formatBody:o,formatRows:s,formatRow:u,formatValue:h}}var ch=fh(","),hh=ch.parse;function dh(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function _h(e,t){return fetch(e,t).then(dh)}function mh(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),_h(t,n).then(function(i){return e(i,r)})}}var cr=mh(hh);function gh(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Hr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Vn(e){return e=Hr(Math.abs(e)),e?e[1]:NaN}function ph(e,t){return function(n,r){for(var i=n.length,a=[],l=0,o=e[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),a.push(n.substring(i-=o,i+o)),!((s+=o+1)>r));)o=e[l=(l+1)%e.length];return a.reverse().join(t)}}function vh(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var yh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Br(e){if(!(t=yh.exec(e)))throw new Error("invalid format: "+e);var t;return new el({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Br.prototype=el.prototype;function el(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}el.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wh(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Vo;function bh(e,t){var n=Hr(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Vo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Hr(e,Math.max(0,t+a-1))[0]}function Yl(e,t){var n=Hr(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const zl={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gh,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Yl(e*100,t),r:Yl,s:bh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Xl(e){return e}var Kl=Array.prototype.map,Wl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function kh(e){var t=e.grouping===void 0||e.thousands===void 0?Xl:ph(Kl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Xl:vh(Kl.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(c){c=Br(c);var d=c.fill,_=c.align,g=c.sign,E=c.symbol,m=c.zero,w=c.width,k=c.comma,A=c.precision,p=c.trim,b=c.type;b==="n"?(k=!0,b="g"):zl[b]||(A===void 0&&(A=12),p=!0,b="g"),(m||d==="0"&&_==="=")&&(m=!0,d="0",_="=");var H=E==="$"?n:E==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",X=E==="$"?r:/[%p]/.test(b)?l:"",D=zl[b],L=/[defgprs%]/.test(b);A=A===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function O(S){var G=H,B=X,U,T,M;if(b==="c")B=D(S)+B,S="";else{S=+S;var oe=S<0||1/S<0;if(S=isNaN(S)?s:D(Math.abs(S),A),p&&(S=wh(S)),oe&&+S==0&&g!=="+"&&(oe=!1),G=(oe?g==="("?g:o:g==="-"||g==="("?"":g)+G,B=(b==="s"?Wl[8+Vo/3]:"")+B+(oe&&g==="("?")":""),L){for(U=-1,T=S.length;++U<T;)if(M=S.charCodeAt(U),48>M||M>57){B=(M===46?i+S.slice(U+1):S.slice(U))+B,S=S.slice(0,U);break}}}k&&!m&&(S=t(S,1/0));var j=G.length+S.length+B.length,le=j<w?new Array(w-j+1).join(d):"";switch(k&&m&&(S=t(le+S,le.length?w-B.length:1/0),le=""),_){case"<":S=G+S+B+le;break;case"=":S=G+le+S+B;break;case"^":S=le.slice(0,j=le.length>>1)+G+S+B+le.slice(j);break;default:S=le+G+S+B;break}return a(S)}return O.toString=function(){return c+""},O}function h(c,d){var _=u((c=Br(c),c.type="f",c)),g=Math.max(-8,Math.min(8,Math.floor(Vn(d)/3)))*3,E=Math.pow(10,-g),m=Wl[8+g/3];return function(w){return _(E*w)+m}}return{format:u,formatPrefix:h}}var hr,en,Fo;Eh({thousands:",",grouping:[3],currency:["$",""]});function Eh(e){return hr=kh(e),en=hr.format,Fo=hr.formatPrefix,hr}function Ih(e){return Math.max(0,-Vn(Math.abs(e)))}function Ah(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vn(t)/3)))*3-Vn(Math.abs(e)))}function Th(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Vn(t)-Vn(e))+1}function Sh(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Mh(){return this.eachAfter(Sh)}function Ch(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Nh(e,t){for(var n=this,r=[n],i,a,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function Lh(e,t){for(var n=this,r=[n],i=[],a,l,o,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(l=0,o=a.length;l<o;++l)r.push(a[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function Oh(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Dh(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Rh(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Vh(e){for(var t=this,n=Fh(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Fh(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Hh(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Bh(){return Array.from(this)}function Ph(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Gh(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Uh(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Ho(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Xh)):t===void 0&&(t=zh);for(var n=new $n(e),r,i=[n],a,l,o,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,o=s-1;o>=0;--o)i.push(a=l[o]=new $n(l[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(Bo)}function Yh(){return Ho(this).eachBefore(Kh)}function zh(e){return e.children}function Xh(e){return Array.isArray(e)?e[1]:null}function Kh(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Bo(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function $n(e){this.data=e,this.depth=this.height=0,this.parent=null}$n.prototype=Ho.prototype={constructor:$n,count:Mh,each:Ch,eachAfter:Lh,eachBefore:Nh,find:Oh,sum:Dh,sort:Rh,path:Vh,ancestors:Hh,descendants:Bh,leaves:Ph,links:Gh,copy:Yh,[Symbol.iterator]:Uh};function si(e){return e==null?null:Po(e)}function Po(e){if(typeof e!="function")throw new Error;return e}function Un(){return 0}function Yn(e){return function(){return e}}function Wh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function qh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(r-t)/e.value;++o<s;)l=a[o],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var Zh={depth:-1},ql={},ui={};function xh(e){return e.id}function Jh(e){return e.parentId}function Qh(){var e=xh,t=Jh,n;function r(i){var a=Array.from(i),l=e,o=t,s,u,h,c,d,_,g,E,m=new Map;if(n!=null){const w=a.map((p,b)=>jh(n(p,b,i))),k=w.map(Zl),A=new Set(w).add("");for(const p of k)A.has(p)||(A.add(p),w.push(p),k.push(Zl(p)),a.push(ui));l=(p,b)=>w[b],o=(p,b)=>k[b]}for(h=0,s=a.length;h<s;++h)u=a[h],_=a[h]=new $n(u),(g=l(u,h,i))!=null&&(g+="")&&(E=_.id=g,m.set(E,m.has(E)?ql:_)),(g=o(u,h,i))!=null&&(g+="")&&(_.parent=g);for(h=0;h<s;++h)if(_=a[h],g=_.parent){if(d=m.get(g),!d)throw new Error("missing: "+g);if(d===ql)throw new Error("ambiguous: "+g);d.children?d.children.push(_):d.children=[_],_.parent=d}else{if(c)throw new Error("multiple roots");c=_}if(!c)throw new Error("no root");if(n!=null){for(;c.data===ui&&c.children.length===1;)c=c.children[0],--s;for(let w=a.length-1;w>=0&&(_=a[w],_.data===ui);--w)_.data=null}if(c.parent=Zh,c.eachBefore(function(w){w.depth=w.parent.depth+1,--s}).eachBefore(Bo),c.parent=null,s>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=si(i),r):e},r.parentId=function(i){return arguments.length?(t=si(i),r):t},r.path=function(i){return arguments.length?(n=si(i),r):n},r}function jh(e){e=`${e}`;let t=e.length;return Vi(e,t-1)&&!Vi(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Zl(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Vi(e,t););return e.slice(0,t)}function Vi(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function $h(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(i-n)/e.value;++o<s;)l=a[o],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var e0=(1+Math.sqrt(5))/2;function t0(e,t,n,r,i,a){for(var l=[],o=t.children,s,u,h=0,c=0,d=o.length,_,g,E=t.value,m,w,k,A,p,b,H;h<d;){_=i-n,g=a-r;do m=o[c++].value;while(!m&&c<d);for(w=k=m,b=Math.max(g/_,_/g)/(E*e),H=m*m*b,p=Math.max(k/H,H/w);c<d;++c){if(m+=u=o[c].value,u<w&&(w=u),u>k&&(k=u),H=m*m*b,A=Math.max(k/H,H/w),A>p){m-=u;break}p=A}l.push(s={value:m,dice:_<g,children:o.slice(h,c)}),s.dice?qh(s,n,r,i,E?r+=g*m/E:a):$h(s,n,r,E?n+=_*m/E:i,a),E-=m,h=c}return l}const n0=function e(t){function n(r,i,a,l,o){t0(t,r,i,a,l,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(e0);function r0(){var e=n0,t=!1,n=1,r=1,i=[0],a=Un,l=Un,o=Un,s=Un,u=Un;function h(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(c),i=[0],t&&d.eachBefore(Wh),d}function c(d){var _=i[d.depth],g=d.x0+_,E=d.y0+_,m=d.x1-_,w=d.y1-_;m<g&&(g=m=(g+m)/2),w<E&&(E=w=(E+w)/2),d.x0=g,d.y0=E,d.x1=m,d.y1=w,d.children&&(_=i[d.depth+1]=a(d)/2,g+=u(d)-_,E+=l(d)-_,m-=o(d)-_,w-=s(d)-_,m<g&&(g=m=(g+m)/2),w<E&&(E=w=(E+w)/2),e(d,g,E,m,w))}return h.round=function(d){return arguments.length?(t=!!d,h):t},h.size=function(d){return arguments.length?(n=+d[0],r=+d[1],h):[n,r]},h.tile=function(d){return arguments.length?(e=Po(d),h):e},h.padding=function(d){return arguments.length?h.paddingInner(d).paddingOuter(d):h.paddingInner()},h.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:Yn(+d),h):a},h.paddingOuter=function(d){return arguments.length?h.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):h.paddingTop()},h.paddingTop=function(d){return arguments.length?(l=typeof d=="function"?d:Yn(+d),h):l},h.paddingRight=function(d){return arguments.length?(o=typeof d=="function"?d:Yn(+d),h):o},h.paddingBottom=function(d){return arguments.length?(s=typeof d=="function"?d:Yn(+d),h):s},h.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Yn(+d),h):u},h}function i0(e,t,n,r,i){var a=e.children,l,o=a.length,s,u=new Array(o+1);for(u[0]=s=l=0;l<o;++l)u[l+1]=s+=a[l].value;h(0,o,e.value,t,n,r,i);function h(c,d,_,g,E,m,w){if(c>=d-1){var k=a[c];k.x0=g,k.y0=E,k.x1=m,k.y1=w;return}for(var A=u[c],p=_/2+A,b=c+1,H=d-1;b<H;){var X=b+H>>>1;u[X]<p?b=X+1:H=X}p-u[b-1]<u[b]-p&&c+1<b&&--b;var D=u[b]-A,L=_-D;if(m-g>w-E){var O=_?(g*L+m*D)/_:m;h(c,b,D,g,E,O,w),h(b,d,L,O,E,m,w)}else{var S=_?(E*L+w*D)/_:w;h(c,b,D,g,E,m,S),h(b,d,L,g,S,m,w)}}}function Go(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const xl=Symbol("implicit");function Uo(){var e=new _i,t=[],n=[],r=xl;function i(a){let l=e.get(a);if(l===void 0){if(r!==xl)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new _i;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Uo(t,n).unknown(r)},Go.apply(i,arguments),i}function l0(e){return function(){return e}}function a0(e){return+e}var Jl=[0,1];function Cn(e){return e}function Fi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:l0(isNaN(t)?NaN:.5)}function o0(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function s0(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=Fi(i,r),a=n(l,a)):(r=Fi(r,i),a=n(a,l)),function(o){return a(r(o))}}function u0(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Fi(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(o){var s=hs(e,o,1,r)-1;return a[s](i[s](o))}}function f0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function c0(){var e=Jl,t=Jl,n=Zr,r,i,a,l=Cn,o,s,u;function h(){var d=Math.min(e.length,t.length);return l!==Cn&&(l=o0(e[0],e[d-1])),o=d>2?u0:s0,s=u=null,c}function c(d){return d==null||isNaN(d=+d)?a:(s||(s=o(e.map(r),t,n)))(r(l(d)))}return c.invert=function(d){return l(i((u||(u=o(t,e.map(r),Tt)))(d)))},c.domain=function(d){return arguments.length?(e=Array.from(d,a0),h()):e.slice()},c.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},c.rangeRound=function(d){return t=Array.from(d),n=Rf,h()},c.clamp=function(d){return arguments.length?(l=d?!0:Cn,h()):l!==Cn},c.interpolate=function(d){return arguments.length?(n=d,h()):n},c.unknown=function(d){return arguments.length?(a=d,c):a},function(d,_){return r=d,i=_,h()}}function h0(){return c0()(Cn,Cn)}function d0(e,t,n,r){var i=vs(e,t,n),a;switch(r=Br(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Ah(i,l))&&(r.precision=a),Fo(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Th(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ih(i))&&(r.precision=a-(r.type==="%")*2);break}}return en(r)}function _0(e){var t=e.domain;return e.ticks=function(n){var r=t();return ps(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return d0(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],o=r[a],s,u,h=10;for(o<l&&(u=l,l=o,o=u,u=i,i=a,a=u);h-- >0;){if(u=ao(l,o,n),u===s)return r[i]=l,r[a]=o,t(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;s=u}return e},e}function Zn(){var e=h0();return e.copy=function(){return f0(e,Zn())},Go.apply(e,arguments),_0(e)}function m0(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const g0=m0("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Nn(e,t,n){this.k=e,this.x=t,this.y=n}Nn.prototype={constructor:Nn,scale:function(e){return e===1?this:new Nn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Nn(1,0,0);Nn.prototype;function p0(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function v0(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=ee("div"),this.h()},l(i){t=te(i,"DIV",{class:!0});var a=N(t);a.forEach(y),this.h()},h(){f(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,a){K(i,t,a),t.innerHTML=n},p(i,[a]){a&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),a&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&f(t,"class",r)},i:Pe,o:Pe,d(i){i&&y(t)}}}function y0(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:a=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,h="";return e.$$set=c=>{"isActive"in c&&n(4,r=c.isActive),"isFirst"in c&&n(5,i=c.isFirst),"isHover"in c&&n(6,a=c.isHover),"isSelectable"in c&&n(7,l=c.isSelectable),"getOptionLabel"in c&&n(0,o=c.getOptionLabel),"item"in c&&n(1,s=c.item),"filterText"in c&&n(2,u=c.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const c=[];r&&c.push("active"),i&&c.push("first"),a&&c.push("hover"),s.isGroupHeader&&c.push("groupHeader"),s.isGroupItem&&c.push("groupItem"),l||c.push("notSelectable"),n(3,h=c.join(" "))}},[o,s,u,h,r,i,a,l]}class Yo extends Ct{constructor(t){super(),Nt(this,t,y0,v0,Lt,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Ql(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function w0(e){let t,n,r=e[1],i=[];for(let o=0;o<r.length;o+=1)i[o]=ea(Ql(e,r,o));const a=o=>Ie(i[o],1,1,()=>{i[o]=null});let l=null;return r.length||(l=jl(e)),{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=Te(),l&&l.c()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);t=Te(),l&&l.l(o)},m(o,s){for(let u=0;u<i.length;u+=1)i[u].m(o,s);K(o,t,s),l&&l.m(o,s),n=!0},p(o,s){if(s[0]&114390){r=o[1];let u;for(u=0;u<r.length;u+=1){const h=Ql(o,r,u);i[u]?(i[u].p(h,s),de(i[u],1)):(i[u]=ea(h),i[u].c(),de(i[u],1),i[u].m(t.parentNode,t))}for(nt(),u=r.length;u<i.length;u+=1)a(u);rt(),!r.length&&l?l.p(o,s):r.length?l&&(l.d(1),l=null):(l=jl(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let s=0;s<r.length;s+=1)de(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)Ie(i[s]);n=!1},d(o){Kr(i,o),o&&y(t),l&&l.d(o)}}}function b0(e){let t,n,r;var i=e[3];function a(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[I0,({item:o,i:s})=>({41:o,42:s}),({item:o,i:s})=>[0,(o?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=ft(i,a(e))),{c(){t&&qe(t.$$.fragment),n=Te()},l(l){t&&yt(t.$$.fragment,l),n=Te()},m(l,o){t&&Ze(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&2&&(s.items=l[1]),o[0]&256&&(s.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(s.$$scope={dirty:o,ctx:l}),i!==(i=l[3])){if(t){nt();const u=t;Ie(u.$$.fragment,1,0,()=>{xe(u,1)}),rt()}i?(t=ft(i,a(l)),qe(t.$$.fragment),de(t.$$.fragment,1),Ze(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&de(t.$$.fragment,l),r=!0)},o(l){t&&Ie(t.$$.fragment,l),r=!1},d(l){l&&y(n),t&&xe(t,l)}}}function jl(e){let t,n=!e[11]&&$l(e);return{c(){n&&n.c(),t=Te()},l(r){n&&n.l(r),t=Te()},m(r,i){n&&n.m(r,i),K(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=$l(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&y(t)}}}function $l(e){let t,n;return{c(){t=ee("div"),n=_e(e[12]),this.h()},l(r){t=te(r,"DIV",{class:!0});var i=N(t);n=me(i,e[12]),i.forEach(y),this.h()},h(){f(t,"class","empty svelte-1uyqfml")},m(r,i){K(r,t,i),I(t,n)},p(r,i){i[0]&4096&&Xe(n,r[12])},d(r){r&&y(t)}}}function k0(e){let t,n,r,i,a,l;var o=e[4];function s(d){return{props:{item:d[41],filterText:d[13],getOptionLabel:d[6],isFirst:Hi(d[42]),isActive:Pr(d[41],d[9],d[10]),isHover:Gr(d[2],d[41],d[42],d[1]),isSelectable:gn(d[41])}}}o&&(n=ft(o,s(e)));function u(){return e[29](e[42])}function h(){return e[30](e[42])}function c(...d){return e[31](e[41],e[42],...d)}return{c(){t=ee("div"),n&&qe(n.$$.fragment),r=we(),this.h()},l(d){t=te(d,"DIV",{class:!0,tabindex:!0});var _=N(t);n&&yt(n.$$.fragment,_),r=be(_),_.forEach(y),this.h()},h(){f(t,"class","listItem"),f(t,"tabindex","-1")},m(d,_){K(d,t,_),n&&Ze(n,t,null),I(t,r),i=!0,a||(l=[W(t,"mouseover",u),W(t,"focus",h),W(t,"click",c)],a=!0)},p(d,_){e=d;const g={};if(_[0]&2&&(g.item=e[41]),_[0]&8192&&(g.filterText=e[13]),_[0]&64&&(g.getOptionLabel=e[6]),_[0]&1538&&(g.isActive=Pr(e[41],e[9],e[10])),_[0]&6&&(g.isHover=Gr(e[2],e[41],e[42],e[1])),_[0]&2&&(g.isSelectable=gn(e[41])),o!==(o=e[4])){if(n){nt();const E=n;Ie(E.$$.fragment,1,0,()=>{xe(E,1)}),rt()}o?(n=ft(o,s(e)),qe(n.$$.fragment),de(n.$$.fragment,1),Ze(n,t,r)):n=null}else o&&n.$set(g)},i(d){i||(n&&de(n.$$.fragment,d),i=!0)},o(d){n&&Ie(n.$$.fragment,d),i=!1},d(d){d&&y(t),n&&xe(n),a=!1,bt(l)}}}function E0(e){let t,n=e[7](e[41])+"",r;return{c(){t=ee("div"),r=_e(n),this.h()},l(i){t=te(i,"DIV",{class:!0});var a=N(t);r=me(a,n),a.forEach(y),this.h()},h(){f(t,"class","listGroupTitle svelte-1uyqfml")},m(i,a){K(i,t,a),I(t,r)},p(i,a){a[0]&130&&n!==(n=i[7](i[41])+"")&&Xe(r,n)},i:Pe,o:Pe,d(i){i&&y(t)}}}function ea(e){let t,n,r,i;const a=[E0,k0],l=[];function o(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=o(e),n=l[t]=a[t](e),{c(){n.c(),r=Te()},l(s){n.l(s),r=Te()},m(s,u){l[t].m(s,u),K(s,r,u),i=!0},p(s,u){let h=t;t=o(s),t===h?l[t].p(s,u):(nt(),Ie(l[h],1,1,()=>{l[h]=null}),rt(),n=l[t],n?n.p(s,u):(n=l[t]=a[t](s),n.c()),de(n,1),n.m(r.parentNode,r))},i(s){i||(de(n),i=!0)},o(s){Ie(n),i=!1},d(s){l[t].d(s),s&&y(r)}}}function I0(e){let t,n,r,i,a;var l=e[4];function o(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:Hi(c[42]),isActive:Pr(c[41],c[9],c[10]),isHover:Gr(c[2],c[41],c[42],c[1]),isSelectable:gn(c[41])}}}l&&(n=ft(l,o(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function h(...c){return e[28](e[41],e[42],...c)}return{c(){t=ee("div"),n&&qe(n.$$.fragment),this.h()},l(c){t=te(c,"DIV",{class:!0});var d=N(t);n&&yt(n.$$.fragment,d),d.forEach(y),this.h()},h(){f(t,"class","listItem")},m(c,d){K(c,t,d),n&&Ze(n,t,null),r=!0,i||(a=[W(t,"mouseover",s),W(t,"focus",u),W(t,"click",h)],i=!0)},p(c,d){e=c;const _={};if(d[1]&1024&&(_.item=e[41]),d[0]&8192&&(_.filterText=e[13]),d[0]&64&&(_.getOptionLabel=e[6]),d[1]&2048&&(_.isFirst=Hi(e[42])),d[0]&1536|d[1]&1024&&(_.isActive=Pr(e[41],e[9],e[10])),d[0]&6|d[1]&3072&&(_.isHover=Gr(e[2],e[41],e[42],e[1])),d[1]&1024&&(_.isSelectable=gn(e[41])),l!==(l=e[4])){if(n){nt();const g=n;Ie(g.$$.fragment,1,0,()=>{xe(g,1)}),rt()}l?(n=ft(l,o(e)),qe(n.$$.fragment),de(n.$$.fragment,1),Ze(n,t,null)):n=null}else l&&n.$set(_)},i(c){r||(n&&de(n.$$.fragment,c),r=!0)},o(c){n&&Ie(n.$$.fragment,c),r=!1},d(c){c&&y(t),n&&xe(n),i=!1,bt(a)}}}function A0(e){let t,n,r,i,a,l;const o=[b0,w0],s=[];function u(h,c){return h[5]?0:1}return n=u(e),r=s[n]=o[n](e),{c(){t=ee("div"),r.c(),this.h()},l(h){t=te(h,"DIV",{class:!0,style:!0});var c=N(t);r.l(c),c.forEach(y),this.h()},h(){f(t,"class","listContainer svelte-1uyqfml"),f(t,"style",e[14]),$e(t,"virtualList",e[5])},m(h,c){K(h,t,c),s[n].m(t,null),e[32](t),i=!0,a||(l=[W(window,"keydown",e[17]),W(window,"resize",e[18])],a=!0)},p(h,c){let d=n;n=u(h),n===d?s[n].p(h,c):(nt(),Ie(s[d],1,1,()=>{s[d]=null}),rt(),r=s[n],r?r.p(h,c):(r=s[n]=o[n](h),r.c()),de(r,1),r.m(t,null)),(!i||c[0]&16384)&&f(t,"style",h[14]),(!i||c[0]&32)&&$e(t,"virtualList",h[5])},i(h){i||(de(r),i=!0)},o(h){Ie(r),i=!1},d(h){h&&y(t),s[n].d(),e[32](null),a=!1,bt(l)}}}function Pr(e,t,n){return t&&t[n]===e[n]}function Hi(e){return e===0}function Gr(e,t,n,r){return gn(t)&&(e===n||r.length===1)}function gn(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function T0(e,t,n){const r=Pi();let{container:i=void 0}=t,{VirtualList:a=null}=t,{Item:l=Yo}=t,{isVirtualList:o=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:h=(R,$)=>{if(R)return R.isCreator?`Create "${$}"`:R[u]}}=t,{getGroupHeaderLabel:c=null}=t,{itemHeight:d=40}=t,{hoverItemIndex:_=0}=t,{value:g=void 0}=t,{optionIdentifier:E="value"}=t,{hideEmptyState:m=!1}=t,{noOptionsMessage:w="No options"}=t,{isMulti:k=!1}=t,{activeItemIndex:A=0}=t,{filterText:p=""}=t,{parent:b=null}=t,{listPlacement:H=null}=t,{listAutoWidth:X=null}=t,{listOffset:D=5}=t,L=0,O=!1,S;Xr(()=>{if(s.length>0&&!k&&g){const R=s.findIndex($=>$[E]===g[E]);R&&n(2,_=R)}j("active"),i.addEventListener("scroll",()=>{clearTimeout(L),L=setTimeout(()=>{O=!1},100)},!1)}),no(()=>{s||n(1,s=[]),s!==S&&s.length>0&&n(2,_=0),S=s});function G(R){R.isCreator||r("itemSelected",R)}function B(R){O||n(2,_=R)}function U(R){const{item:$,i:C,event:Y}=R;if(Y.stopPropagation(),g&&!k&&g[E]===$[E])return T();$.isCreator?r("itemCreated",p):gn($)&&(n(19,A=C),n(2,_=C),G($))}function T(){r("closeList")}async function M(R){if(o)return;let $=!0;for(;$;)R>0&&_===s.length-1?n(2,_=0):R<0&&_===0?n(2,_=s.length-1):n(2,_=_+R),$=!gn(s[_]);await yr(),j("hover")}function oe(R){switch(R.key){case"Escape":R.preventDefault(),T();break;case"ArrowDown":R.preventDefault(),s.length&&M(1);break;case"ArrowUp":R.preventDefault(),s.length&&M(-1);break;case"Enter":if(R.preventDefault(),s.length===0)break;const $=s[_];if(g&&!k&&g[E]===$[E]){T();break}$.isCreator?r("itemCreated",p):(n(19,A=_),G(s[_]));break;case"Tab":if(R.preventDefault(),s.length===0||g&&g[E]===s[_][E])return T();n(19,A=_),G(s[_]);break}}function j(R){if(o||!i)return;let $;const C=i.querySelector(`.listItem .${R}`);C&&($=i.getBoundingClientRect().bottom-C.getBoundingClientRect().bottom),n(0,i.scrollTop-=$,i)}let le;function ce(){const{height:R,width:$}=b.getBoundingClientRect();n(14,le=""),n(14,le+=`min-width:${$}px;width:${X?"auto":"100%"};`),H==="top"||H==="auto"&&p0(b,i).bottom?n(14,le+=`bottom:${R+D}px;`):n(14,le+=`top:${R+D}px;`)}const ue=R=>B(R),ve=R=>B(R),x=(R,$,C)=>U({item:R,i:$,event:C}),ge=R=>B(R),Ae=R=>B(R),Se=(R,$,C)=>U({item:R,i:$,event:C});function ye(R){ht[R?"unshift":"push"](()=>{i=R,n(0,i)})}return e.$$set=R=>{"container"in R&&n(0,i=R.container),"VirtualList"in R&&n(3,a=R.VirtualList),"Item"in R&&n(4,l=R.Item),"isVirtualList"in R&&n(5,o=R.isVirtualList),"items"in R&&n(1,s=R.items),"labelIdentifier"in R&&n(20,u=R.labelIdentifier),"getOptionLabel"in R&&n(6,h=R.getOptionLabel),"getGroupHeaderLabel"in R&&n(7,c=R.getGroupHeaderLabel),"itemHeight"in R&&n(8,d=R.itemHeight),"hoverItemIndex"in R&&n(2,_=R.hoverItemIndex),"value"in R&&n(9,g=R.value),"optionIdentifier"in R&&n(10,E=R.optionIdentifier),"hideEmptyState"in R&&n(11,m=R.hideEmptyState),"noOptionsMessage"in R&&n(12,w=R.noOptionsMessage),"isMulti"in R&&n(21,k=R.isMulti),"activeItemIndex"in R&&n(19,A=R.activeItemIndex),"filterText"in R&&n(13,p=R.filterText),"parent"in R&&n(22,b=R.parent),"listPlacement"in R&&n(23,H=R.listPlacement),"listAutoWidth"in R&&n(24,X=R.listAutoWidth),"listOffset"in R&&n(25,D=R.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&b&&i&&ce()},[i,s,_,a,l,o,h,c,d,g,E,m,w,p,le,B,U,oe,ce,A,u,k,b,H,X,D,ue,ve,x,ge,Ae,Se,ye]}class S0 extends Ct{constructor(t){super(),Nt(this,t,T0,A0,Lt,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function M0(e){let t,n=e[0](e[1])+"";return{c(){t=ee("div"),this.h()},l(r){t=te(r,"DIV",{class:!0});var i=N(t);i.forEach(y),this.h()},h(){f(t,"class","selection svelte-pu1q1n")},m(r,i){K(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Pe,o:Pe,d(r){r&&y(t)}}}function C0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=a=>{"getSelectionLabel"in a&&n(0,r=a.getSelectionLabel),"item"in a&&n(1,i=a.item)},[r,i]}class N0 extends Ct{constructor(t){super(),Nt(this,t,C0,M0,Lt,{getSelectionLabel:0,item:1})}}function ta(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function na(e){let t,n,r,i,a;function l(...o){return e[6](e[11],...o)}return{c(){t=ee("div"),n=re("svg"),r=re("path"),this.h()},l(o){t=te(o,"DIV",{class:!0});var s=N(t);n=ie(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=N(n);r=ie(u,"path",{d:!0}),N(r).forEach(y),u.forEach(y),s.forEach(y),this.h()},h(){f(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),f(n,"width","100%"),f(n,"height","100%"),f(n,"viewBox","-2 -2 50 50"),f(n,"focusable","false"),f(n,"aria-hidden","true"),f(n,"role","presentation"),f(n,"class","svelte-liu9pa"),f(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){K(o,t,s),I(t,n),I(n,r),i||(a=W(t,"click",l),i=!0)},p(o,s){e=o},d(o){o&&y(t),i=!1,a()}}}function ra(e){let t,n,r=e[4](e[9])+"",i,a,l,o,s,u=!e[2]&&!e[3]&&na(e);function h(...c){return e[7](e[11],...c)}return{c(){t=ee("div"),n=ee("div"),i=we(),u&&u.c(),a=we(),this.h()},l(c){t=te(c,"DIV",{class:!0});var d=N(t);n=te(d,"DIV",{class:!0});var _=N(n);_.forEach(y),i=be(d),u&&u.l(d),a=be(d),d.forEach(y),this.h()},h(){f(n,"class","multiSelectItem_label svelte-liu9pa"),f(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(c,d){K(c,t,d),I(t,n),n.innerHTML=r,I(t,i),u&&u.m(t,null),I(t,a),o||(s=W(t,"click",h),o=!0)},p(c,d){e=c,d&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,d):(u=na(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),d&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&f(t,"class",l)},d(c){c&&y(t),u&&u.d(),o=!1,s()}}}function L0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=ra(ta(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Te()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=Te()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,[a]){if(a&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const o=ta(i,n,l);r[l]?r[l].p(o,a):(r[l]=ra(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Pe,o:Pe,d(i){Kr(r,i),i&&y(t)}}}function O0(e,t,n){const r=Pi();let{value:i=[]}=t,{activeValue:a=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:s=void 0}=t;function u(d,_){_.stopPropagation(),r("multiItemClear",{i:d})}const h=(d,_)=>u(d,_),c=(d,_)=>o?u(d,_):{};return e.$$set=d=>{"value"in d&&n(0,i=d.value),"activeValue"in d&&n(1,a=d.activeValue),"isDisabled"in d&&n(2,l=d.isDisabled),"multiFullItemClearable"in d&&n(3,o=d.multiFullItemClearable),"getSelectionLabel"in d&&n(4,s=d.getSelectionLabel)},[i,a,l,o,s,u,h,c]}class D0 extends Ct{constructor(t){super(),Nt(this,t,O0,L0,Lt,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function ia(e,t,n){const r=e.slice();return r[23]=t[n],r}const R0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),la=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function V0(e){let t;return{c(){t=_e("Missing template")},l(n){t=me(n,"Missing template")},m(n,r){K(n,t,r)},d(n){n&&y(t)}}}function aa(e,t){let n,r,i;const a=t[15].default,l=Wo(a,t,t[14],la),o=l||V0();return{key:e,first:null,c(){n=ee("svelte-virtual-list-row"),o&&o.c(),r=we(),this.h()},l(s){n=te(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=N(n);o&&o.l(u),r=be(u),u.forEach(y),this.h()},h(){di(n,"class","svelte-g2cagw"),this.first=n},m(s,u){K(s,n,u),o&&o.m(n,null),I(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&qo(l,a,t,t[14],i?xo(a,t[14],u,R0):Zo(t[14]),la)},i(s){i||(de(o,s),i=!0)},o(s){Ie(o,s),i=!1},d(s){s&&y(n),o&&o.d(s)}}}function F0(e){let t,n,r=[],i=new Map,a,l,o,s,u=e[5];const h=c=>c[23].index;for(let c=0;c<u.length;c+=1){let d=ia(e,u,c),_=h(d);i.set(_,r[c]=aa(_,d))}return{c(){t=ee("svelte-virtual-list-viewport"),n=ee("svelte-virtual-list-contents");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){t=te(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var d=N(t);n=te(d,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=N(n);for(let g=0;g<r.length;g+=1)r[g].l(_);_.forEach(y),d.forEach(y),this.h()},h(){bn(n,"padding-top",e[6]+"px"),bn(n,"padding-bottom",e[7]+"px"),di(n,"class","svelte-g2cagw"),bn(t,"height",e[0]),di(t,"class","svelte-g2cagw"),pn(()=>e[18].call(t))},m(c,d){K(c,t,d),I(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),a=Wr(t,e[18].bind(t)),l=!0,o||(s=W(t,"scroll",e[8]),o=!0)},p(c,[d]){d&16418&&(u=c[5],nt(),r=$t(r,d,h,1,c,u,i,n,Ko,aa,null,ia),rt()),(!l||d&64)&&bn(n,"padding-top",c[6]+"px"),(!l||d&128)&&bn(n,"padding-bottom",c[7]+"px"),(!l||d&1)&&bn(t,"height",c[0])},i(c){if(!l){for(let d=0;d<u.length;d+=1)de(r[d]);l=!0}},o(c){for(let d=0;d<r.length;d+=1)Ie(r[d]);l=!1},d(c){c&&y(t);for(let d=0;d<r.length;d+=1)r[d].d();e[16](null),e[17](null),a(),o=!1,s()}}}function H0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:a=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:h=0}=t,c=[],d,_,g,E=0,m,w,k=0,A=0,p;async function b(O,S,G){const{scrollTop:B}=_;await yr();let U=k-B,T=u;for(;U<S&&T<O.length;){let oe=d[T-u];oe||(n(10,h=T+1),await yr(),oe=d[T-u]);const j=c[T]=G||oe.offsetHeight;U+=j,T+=1}n(10,h=T);const M=O.length-h;p=(k+U)/h,n(7,A=M*p),c.length=O.length,_&&n(3,_.scrollTop=0,_)}async function H(){const{scrollTop:O}=_,S=u;for(let T=0;T<d.length;T+=1)c[u+T]=o||d[T].offsetHeight;let G=0,B=0;for(;G<a.length;){const T=c[G]||p;if(B+T>O){n(9,u=G),n(6,k=B);break}B+=T,G+=1}for(;G<a.length&&(B+=c[G]||p,G+=1,!(B>O+E)););n(10,h=G);const U=a.length-h;for(p=B/h;G<a.length;)c[G++]=p;if(n(7,A=U*p),u<S){await yr();let T=0,M=0;for(let j=u;j<S;j+=1)d[j-u]&&(T+=c[j],M+=o||d[j-u].offsetHeight);const oe=M-T;_.scrollTo(0,O+oe)}}Xr(()=>{d=g.getElementsByTagName("svelte-virtual-list-row"),n(13,w=!0)});function X(O){ht[O?"unshift":"push"](()=>{g=O,n(4,g)})}function D(O){ht[O?"unshift":"push"](()=>{_=O,n(3,_)})}function L(){E=this.offsetHeight,n(2,E)}return e.$$set=O=>{"items"in O&&n(11,a=O.items),"height"in O&&n(0,l=O.height),"itemHeight"in O&&n(12,o=O.itemHeight),"hoverItemIndex"in O&&n(1,s=O.hoverItemIndex),"start"in O&&n(9,u=O.start),"end"in O&&n(10,h=O.end),"$$scope"in O&&n(14,i=O.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,m=a.slice(u,h).map((O,S)=>({index:S+u,data:O}))),e.$$.dirty&14340&&w&&b(a,E,o)},[l,s,E,_,g,m,k,A,H,u,h,a,o,w,i,r,X,D,L]}class B0 extends Ct{constructor(t){super(),Nt(this,t,H0,F0,Lt,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function P0(e){let t,n;return{c(){t=re("svg"),n=re("path"),this.h()},l(r){t=ie(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=N(t);n=ie(i,"path",{fill:!0,d:!0}),N(n).forEach(y),i.forEach(y),this.h()},h(){f(n,"fill","currentColor"),f(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),f(t,"width","100%"),f(t,"height","100%"),f(t,"viewBox","-2 -2 50 50"),f(t,"focusable","false"),f(t,"aria-hidden","true"),f(t,"role","presentation")},m(r,i){K(r,t,i),I(t,n)},p:Pe,i:Pe,o:Pe,d(r){r&&y(t)}}}class G0 extends Ct{constructor(t){super(),Nt(this,t,null,P0,Lt,{})}}function U0(e,t,n){let r;return function(){let a=this,l=arguments,o=function(){r=null,n||e.apply(a,l)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,l)}}function oa(e,t,n){const r=e.slice();return r[103]=t[n],r}function sa(e){let t,n,r,i,a;return{c(){t=ee("span"),n=_e(e[33]),r=we(),i=ee("span"),a=_e(e[32]),this.h()},l(l){t=te(l,"SPAN",{id:!0});var o=N(t);n=me(o,e[33]),o.forEach(y),r=be(l),i=te(l,"SPAN",{id:!0});var s=N(i);a=me(s,e[32]),s.forEach(y),this.h()},h(){f(t,"id","aria-selection"),f(i,"id","aria-context")},m(l,o){K(l,t,o),I(t,n),K(l,r,o),K(l,i,o),I(i,a)},p(l,o){o[1]&4&&Xe(n,l[33]),o[1]&2&&Xe(a,l[32])},d(l){l&&y(t),l&&y(r),l&&y(i)}}}function ua(e){let t,n,r;const i=[e[18]];var a=e[17];function l(o){let s={};for(let u=0;u<i.length;u+=1)s=Gi(s,i[u]);return{props:s}}return a&&(t=ft(a,l())),{c(){t&&qe(t.$$.fragment),n=Te()},l(o){t&&yt(t.$$.fragment,o),n=Te()},m(o,s){t&&Ze(t,o,s),K(o,n,s),r=!0},p(o,s){const u=s[0]&262144?Ui(i,[ro(o[18])]):{};if(a!==(a=o[17])){if(t){nt();const h=t;Ie(h.$$.fragment,1,0,()=>{xe(h,1)}),rt()}a?(t=ft(a,l()),qe(t.$$.fragment),de(t.$$.fragment,1),Ze(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(o){r||(t&&de(t.$$.fragment,o),r=!0)},o(o){t&&Ie(t.$$.fragment,o),r=!1},d(o){o&&y(n),t&&xe(t,o)}}}function fa(e){let t,n,r;var i=e[26];function a(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=ft(i,a(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&qe(t.$$.fragment),n=Te()},l(l){t&&yt(t.$$.fragment,l),n=Te()},m(l,o){t&&Ze(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&4&&(s.value=l[2]),o[0]&4096&&(s.getSelectionLabel=l[12]),o[0]&1073741824&&(s.activeValue=l[30]),o[0]&512&&(s.isDisabled=l[9]),o[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){nt();const u=t;Ie(u.$$.fragment,1,0,()=>{xe(u,1)}),rt()}i?(t=ft(i,a(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),qe(t.$$.fragment),de(t.$$.fragment,1),Ze(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&de(t.$$.fragment,l),r=!0)},o(l){t&&Ie(t.$$.fragment,l),r=!1},d(l){l&&y(n),t&&xe(t,l)}}}function ca(e){let t,n,r,i,a;var l=e[25];function o(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=ft(l,o(e))),{c(){t=ee("div"),n&&qe(n.$$.fragment),this.h()},l(s){t=te(s,"DIV",{class:!0});var u=N(t);n&&yt(n.$$.fragment,u),u.forEach(y),this.h()},h(){f(t,"class","selectedItem svelte-17l1npl")},m(s,u){K(s,t,u),n&&Ze(n,t,null),r=!0,i||(a=W(t,"focus",e[40]),i=!0)},p(s,u){const h={};if(u[0]&4&&(h.item=s[2]),u[0]&4096&&(h.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){nt();const c=n;Ie(c.$$.fragment,1,0,()=>{xe(c,1)}),rt()}l?(n=ft(l,o(s)),qe(n.$$.fragment),de(n.$$.fragment,1),Ze(n,t,null)):n=null}else l&&n.$set(h)},i(s){r||(n&&de(n.$$.fragment,s),r=!0)},o(s){n&&Ie(n.$$.fragment,s),r=!1},d(s){s&&y(t),n&&xe(n),i=!1,a()}}}function ha(e){let t,n,r,i,a;var l=e[23];function o(s){return{}}return l&&(n=ft(l,o())),{c(){t=ee("div"),n&&qe(n.$$.fragment),this.h()},l(s){t=te(s,"DIV",{class:!0,"aria-hidden":!0});var u=N(t);n&&yt(n.$$.fragment,u),u.forEach(y),this.h()},h(){f(t,"class","clearSelect svelte-17l1npl"),f(t,"aria-hidden","true")},m(s,u){K(s,t,u),n&&Ze(n,t,null),r=!0,i||(a=W(t,"click",Jo(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){nt();const h=n;Ie(h.$$.fragment,1,0,()=>{xe(h,1)}),rt()}l?(n=ft(l,o()),qe(n.$$.fragment),de(n.$$.fragment,1),Ze(n,t,null)):n=null}},i(s){r||(n&&de(n.$$.fragment,s),r=!0)},o(s){n&&Ie(n.$$.fragment,s),r=!1},d(s){s&&y(t),n&&xe(n),i=!1,a()}}}function da(e){let t;function n(a,l){return a[22]?z0:Y0}let r=n(e),i=r(e);return{c(){t=ee("div"),i.c(),this.h()},l(a){t=te(a,"DIV",{class:!0,"aria-hidden":!0});var l=N(t);i.l(l),l.forEach(y),this.h()},h(){f(t,"class","indicator svelte-17l1npl"),f(t,"aria-hidden","true")},m(a,l){K(a,t,l),i.m(t,null)},p(a,l){r===(r=n(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,null)))},d(a){a&&y(t),i.d()}}}function Y0(e){let t,n;return{c(){t=re("svg"),n=re("path"),this.h()},l(r){t=ie(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=N(t);n=ie(i,"path",{d:!0}),N(n).forEach(y),i.forEach(y),this.h()},h(){f(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),f(t,"width","100%"),f(t,"height","100%"),f(t,"viewBox","0 0 20 20"),f(t,"focusable","false"),f(t,"aria-hidden","true"),f(t,"class","svelte-17l1npl")},m(r,i){K(r,t,i),I(t,n)},p:Pe,d(r){r&&y(t)}}}function z0(e){let t,n;return{c(){t=new jo(!1),n=Te(),this.h()},l(r){t=$o(r,!1),n=Te(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),K(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&y(n),r&&t.d()}}}function _a(e){let t,n,r;return{c(){t=ee("div"),n=re("svg"),r=re("circle"),this.h()},l(i){t=te(i,"DIV",{class:!0});var a=N(t);n=ie(a,"svg",{class:!0,viewBox:!0});var l=N(n);r=ie(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),N(r).forEach(y),l.forEach(y),a.forEach(y),this.h()},h(){f(r,"class","spinner_path svelte-17l1npl"),f(r,"cx","50"),f(r,"cy","50"),f(r,"r","20"),f(r,"fill","none"),f(r,"stroke","currentColor"),f(r,"stroke-width","5"),f(r,"stroke-miterlimit","10"),f(n,"class","spinner_icon svelte-17l1npl"),f(n,"viewBox","25 25 50 50"),f(t,"class","spinner svelte-17l1npl")},m(i,a){K(i,t,a),I(t,n),I(n,r)},d(i){i&&y(t)}}}function ma(e){let t,n,r,i;const a=[e[34]];function l(u){e[84](u)}var o=e[24];function s(u){let h={};for(let c=0;c<a.length;c+=1)h=Gi(h,a[c]);return u[28]!==void 0&&(h.hoverItemIndex=u[28]),{props:h}}return o&&(t=ft(o,s(e)),ht.push(()=>hl(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&qe(t.$$.fragment),r=Te()},l(u){t&&yt(t.$$.fragment,u),r=Te()},m(u,h){t&&Ze(t,u,h),K(u,r,h),i=!0},p(u,h){const c=h[1]&8?Ui(a,[ro(u[34])]):{};if(!n&&h[0]&268435456&&(n=!0,c.hoverItemIndex=u[28],Qo(()=>n=!1)),o!==(o=u[24])){if(t){nt();const d=t;Ie(d.$$.fragment,1,0,()=>{xe(d,1)}),rt()}o?(t=ft(o,s(u)),ht.push(()=>hl(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),qe(t.$$.fragment),de(t.$$.fragment,1),Ze(t,r.parentNode,r)):t=null}else o&&t.$set(c)},i(u){i||(t&&de(t.$$.fragment,u),i=!0)},o(u){t&&Ie(t.$$.fragment,u),i=!1},d(u){u&&y(r),t&&xe(t,u)}}}function ga(e){let t,n,r;return{c(){t=ee("input"),this.h()},l(i){t=te(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){f(t,"name",n=e[16].name),f(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,f(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&f(t,"name",n),a[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&y(t)}}}function pa(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=va(oa(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Te()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=Te()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,a){if(a[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const o=oa(i,n,l);r[l]?r[l].p(o,a):(r[l]=va(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){Kr(r,i),i&&y(t)}}}function va(e){let t,n,r;return{c(){t=ee("input"),this.h()},l(i){t=te(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){f(t,"name",n=e[16].name),f(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,f(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&f(t,"name",n),a[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&y(t)}}}function X0(e){let t,n,r,i,a,l,o,s,u,h,c,d,_,g,E,m,w,k,A=e[1]&&sa(e),p=e[17]&&ua(e),b=e[35]&&fa(e),H=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],X={};for(let T=0;T<H.length;T+=1)X=Gi(X,H[T]);let D=!e[7]&&e[29]&&ca(e),L=e[37]&&ha(e),O=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&da(e),S=e[4]&&_a(),G=e[5]&&ma(e),B=(!e[7]||e[7]&&!e[35])&&ga(e),U=e[7]&&e[35]&&pa(e);return{c(){t=ee("div"),n=ee("span"),A&&A.c(),r=we(),p&&p.c(),i=we(),b&&b.c(),a=we(),l=ee("input"),s=we(),D&&D.c(),u=we(),L&&L.c(),h=we(),O&&O.c(),c=we(),S&&S.c(),d=we(),G&&G.c(),_=we(),B&&B.c(),g=we(),U&&U.c(),this.h()},l(T){t=te(T,"DIV",{class:!0,style:!0});var M=N(t);n=te(M,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var oe=N(n);A&&A.l(oe),oe.forEach(y),r=be(M),p&&p.l(M),i=be(M),b&&b.l(M),a=be(M),l=te(M,"INPUT",{placeholder:!0,style:!0}),s=be(M),D&&D.l(M),u=be(M),L&&L.l(M),h=be(M),O&&O.l(M),c=be(M),S&&S.l(M),d=be(M),G&&G.l(M),_=be(M),B&&B.l(M),g=be(M),U&&U.l(M),M.forEach(y),this.h()},h(){f(n,"aria-live","polite"),f(n,"aria-atomic","false"),f(n,"aria-relevant","additions text"),f(n,"class","a11yText svelte-17l1npl"),fl(l,X),$e(l,"svelte-17l1npl",!0),f(t,"class",E="selectContainer "+e[21]+" svelte-17l1npl"),f(t,"style",e[11]),$e(t,"hasError",e[10]),$e(t,"multiSelect",e[7]),$e(t,"disabled",e[9]),$e(t,"focused",e[1])},m(T,M){K(T,t,M),I(t,n),A&&A.m(n,null),I(t,r),p&&p.m(t,null),I(t,i),b&&b.m(t,null),I(t,a),I(t,l),l.autofocus&&l.focus(),e[82](l),cl(l,e[3]),I(t,s),D&&D.m(t,null),I(t,u),L&&L.m(t,null),I(t,h),O&&O.m(t,null),I(t,c),S&&S.m(t,null),I(t,d),G&&G.m(t,null),I(t,_),B&&B.m(t,null),I(t,g),U&&U.m(t,null),e[85](t),m=!0,w||(k=[W(window,"click",e[41]),W(window,"focusin",e[41]),W(window,"keydown",e[39]),W(l,"focus",e[40]),W(l,"input",e[83]),W(t,"click",e[42])],w=!0)},p(T,M){T[1]?A?A.p(T,M):(A=sa(T),A.c(),A.m(n,null)):A&&(A.d(1),A=null),T[17]?p?(p.p(T,M),M[0]&131072&&de(p,1)):(p=ua(T),p.c(),de(p,1),p.m(t,i)):p&&(nt(),Ie(p,1,1,()=>{p=null}),rt()),T[35]?b?(b.p(T,M),M[1]&16&&de(b,1)):(b=fa(T),b.c(),de(b,1),b.m(t,a)):b&&(nt(),Ie(b,1,1,()=>{b=null}),rt()),fl(l,X=Ui(H,[(!m||M[0]&8192&&o!==(o=!T[13]))&&{readOnly:o},M[1]&1&&T[31],(!m||M[1]&32)&&{placeholder:T[36]},(!m||M[0]&16384)&&{style:T[14]},(!m||M[0]&512)&&{disabled:T[9]}])),M[0]&8&&l.value!==T[3]&&cl(l,T[3]),$e(l,"svelte-17l1npl",!0),!T[7]&&T[29]?D?(D.p(T,M),M[0]&536871040&&de(D,1)):(D=ca(T),D.c(),de(D,1),D.m(t,u)):D&&(nt(),Ie(D,1,1,()=>{D=null}),rt()),T[37]?L?(L.p(T,M),M[1]&64&&de(L,1)):(L=ha(T),L.c(),de(L,1),L.m(t,h)):L&&(nt(),Ie(L,1,1,()=>{L=null}),rt()),!T[37]&&(T[20]||T[19]&&!T[2]||!T[13]&&!T[9]&&!T[4]&&(T[29]&&!T[15]||!T[29]))?O?O.p(T,M):(O=da(T),O.c(),O.m(t,c)):O&&(O.d(1),O=null),T[4]?S||(S=_a(),S.c(),S.m(t,d)):S&&(S.d(1),S=null),T[5]?G?(G.p(T,M),M[0]&32&&de(G,1)):(G=ma(T),G.c(),de(G,1),G.m(t,_)):G&&(nt(),Ie(G,1,1,()=>{G=null}),rt()),!T[7]||T[7]&&!T[35]?B?B.p(T,M):(B=ga(T),B.c(),B.m(t,g)):B&&(B.d(1),B=null),T[7]&&T[35]?U?U.p(T,M):(U=pa(T),U.c(),U.m(t,null)):U&&(U.d(1),U=null),(!m||M[0]&2097152&&E!==(E="selectContainer "+T[21]+" svelte-17l1npl"))&&f(t,"class",E),(!m||M[0]&2048)&&f(t,"style",T[11]),(!m||M[0]&2098176)&&$e(t,"hasError",T[10]),(!m||M[0]&2097280)&&$e(t,"multiSelect",T[7]),(!m||M[0]&2097664)&&$e(t,"disabled",T[9]),(!m||M[0]&2097154)&&$e(t,"focused",T[1])},i(T){m||(de(p),de(b),de(D),de(L),de(G),m=!0)},o(T){Ie(p),Ie(b),Ie(D),Ie(L),Ie(G),m=!1},d(T){T&&y(t),A&&A.d(),p&&p.d(),b&&b.d(),e[82](null),D&&D.d(),L&&L.d(),O&&O.d(),S&&S.d(),G&&G.d(),B&&B.d(),U&&U.d(),e[85](null),w=!1,bt(k)}}}function ya(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function K0(e,t,n){let r,i,a,l,o,s,u,h;const c=Pi();let{id:d=null}=t,{container:_=void 0}=t,{input:g=void 0}=t,{isMulti:E=!1}=t,{multiFullItemClearable:m=!1}=t,{isDisabled:w=!1}=t,{isCreatable:k=!1}=t,{isFocused:A=!1}=t,{value:p=null}=t,{filterText:b=""}=t,{placeholder:H="Select..."}=t,{placeholderAlwaysShow:X=!1}=t,{items:D=null}=t,{itemFilter:L=(v,he,Ne)=>`${v}`.toLowerCase().includes(he.toLowerCase())}=t,{groupBy:O=void 0}=t,{groupFilter:S=v=>v}=t,{isGroupHeaderSelectable:G=!1}=t,{getGroupHeaderLabel:B=v=>v[U]||v.id}=t,{labelIdentifier:U="label"}=t,{getOptionLabel:T=(v,he)=>v.isCreator?`Create "${he}"`:v[U]}=t,{optionIdentifier:M="value"}=t,{loadOptions:oe=void 0}=t,{hasError:j=!1}=t,{containerStyles:le=""}=t,{getSelectionLabel:ce=v=>v?v[U]:null}=t,{createGroupHeaderItem:ue=v=>({value:v,label:v})}=t,{createItem:ve=v=>({value:v,label:v})}=t;const x=()=>r;let{isSearchable:ge=!0}=t,{inputStyles:Ae=""}=t,{isClearable:Se=!0}=t,{isWaiting:ye=!1}=t,{listPlacement:R="auto"}=t,{listOpen:$=!1}=t,{isVirtualList:C=!1}=t,{loadOptionsInterval:Y=300}=t,{noOptionsMessage:Z="No options"}=t,{hideEmptyState:q=!1}=t,{inputAttributes:se={}}=t,{listAutoWidth:De=!0}=t,{itemHeight:Fe=40}=t,{Icon:ae=void 0}=t,{iconProps:Me={}}=t,{showChevron:ke=!1}=t,{showIndicator:P=!1}=t,{containerClasses:Ce=""}=t,{indicatorSvg:Le=void 0}=t,{listOffset:F=5}=t,{ClearIcon:ne=G0}=t,{Item:pe=Yo}=t,{List:Be=S0}=t,{Selection:Ge=N0}=t,{MultiSelection:Re=D0}=t,{VirtualList:z=B0}=t;function Oe(v){if(v.loadOptions&&v.filterText.length>0)return;if(!v.items)return[];v.items&&v.items.length>0&&typeof v.items[0]!="object"&&(v.items=ya(v.items));let he=v.items.filter(Ne=>{let ze=L(T(Ne,v.filterText),v.filterText,Ne);return ze&&v.isMulti&&v.value&&Array.isArray(v.value)&&(ze=!v.value.some(vt=>vt[v.optionIdentifier]===Ne[v.optionIdentifier])),ze});return v.groupBy&&(he=Dt(he)),v.isCreatable&&(he=V(he,v.filterText)),he}function V(v,he){if(he.length===0)return v;const Ne=ve(he);return v[0]&&he===v[0][U]?v:(Ne.isCreator=!0,[...v,Ne])}let{selectedValue:J=null}=t,fe,Ke,Ue,Je,at,et;const Qe=U0(async()=>{n(4,ye=!0);let v=await oe(b).catch(he=>{console.warn("svelte-select loadOptions error :>> ",he),c("error",{type:"loadOptions",details:he})});v&&!v.cancelled&&(v?(v&&v.length>0&&typeof v[0]!="object"&&(v=ya(v)),n(81,r=[...v]),c("loaded",{items:r})):n(81,r=[]),k&&n(81,r=V(r,b)),n(4,ye=!1),n(1,A=!0),n(5,$=!0))},Y);function gt(){typeof p=="string"?n(2,p={[M]:p,label:p}):E&&Array.isArray(p)&&p.length>0&&n(2,p=p.map(v=>typeof v=="string"?{value:v,label:v}:v))}let tt;function Et(){n(31,tt=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},se)),d&&n(31,tt.id=d,tt),ge||n(31,tt.readonly=!0,tt)}function Dt(v){const he=[],Ne={};v.forEach(vt=>{const kt=O(vt);he.includes(kt)||(he.push(kt),Ne[kt]=[],kt&&Ne[kt].push(Object.assign(ue(kt,vt),{id:kt,isGroupHeader:!0,isSelectable:G}))),Ne[kt].push(Object.assign({isGroupItem:!!kt},vt))});const ze=[];return S(he).forEach(vt=>{ze.push(...Ne[vt])}),ze}function Jt(){if(E){JSON.stringify(p)!==JSON.stringify(Ke)&&vn()&&c("select",p);return}(!Ke||JSON.stringify(p[M])!==JSON.stringify(Ke[M]))&&c("select",p)}function Bt(){A||$?yn():g&&g.blur()}function It(){p&&(Array.isArray(p)?n(2,p=[...p]):n(2,p=[p]))}function Pt(){p&&n(2,p=null)}function He(){b.length!==0&&(n(1,A=!0),n(5,$=!0),oe?Qe():(n(5,$=!0),E&&n(30,fe=void 0)))}no(async()=>{n(77,Ke=p),n(78,Ue=b),n(79,Je=A),n(80,at=E)});function vn(){let v=!0;if(p){const he=[],Ne=[];p.forEach(ze=>{he.includes(ze[M])?v=!1:(he.push(ze[M]),Ne.push(ze))}),v||n(2,p=Ne)}return v}function Fn(v){let he=v?v[M]:p[M];return D.find(Ne=>Ne[M]===he)}function Ye(v){!v||v.length===0||v.some(he=>typeof he!="object")||!p||(E?p.some(he=>!he||!he[M]):!p[M])||(Array.isArray(p)?n(2,p=p.map(he=>Fn(he)||he)):n(2,p=Fn()||p))}function Hn(v){const{detail:he}=v,Ne=p[he?he.i:p.length-1];p.length===1?n(2,p=void 0):n(2,p=p.filter(ze=>ze!==Ne)),c("clear",Ne)}function nr(v){if(!!A)switch(v.key){case"ArrowDown":v.preventDefault(),n(5,$=!0),n(30,fe=void 0);break;case"ArrowUp":v.preventDefault(),n(5,$=!0),n(30,fe=void 0);break;case"Tab":$||n(1,A=!1);break;case"Backspace":if(!E||b.length>0)return;if(E&&p&&p.length>0){if(Hn(fe!==void 0?fe:p.length-1),fe===0||fe===void 0)break;n(30,fe=p.length>fe?fe-1:void 0)}break;case"ArrowLeft":if(!E||b.length>0)return;fe===void 0?n(30,fe=p.length-1):p.length>fe&&fe!==0&&n(30,fe-=1);break;case"ArrowRight":if(!E||b.length>0||fe===void 0)return;fe===p.length-1?n(30,fe=void 0):fe<p.length-1&&n(30,fe+=1);break}}function yn(){n(1,A=!0),g&&g.focus()}function rr(v){if(!_)return;const he=v.path&&v.path.length>0?v.path[0]:v.target;_.contains(he)||_.contains(v.relatedTarget)||(n(1,A=!1),n(5,$=!1),n(30,fe=void 0),g&&g.blur())}function ir(){w||(n(1,A=!0),n(5,$=!$))}function lr(){n(2,p=void 0),n(5,$=!1),c("clear",p),yn()}Xr(()=>{A&&g&&g.focus()});function Q(v){const{detail:he}=v;if(he){n(3,b="");const Ne=Object.assign({},he);(!Ne.isGroupHeader||Ne.isSelectable)&&(E?n(2,p=p?p.concat([Ne]):[Ne]):n(2,p=Ne),n(2,p),setTimeout(()=>{n(5,$=!1),n(30,fe=void 0)}))}}function Ee(v){const{detail:he}=v;E?(n(2,p=p||[]),n(2,p=[...p,ve(he)])):n(2,p=ve(he)),c("itemCreated",he),n(3,b=""),n(5,$=!1),n(30,fe=void 0)}function pt(){n(3,b=""),n(5,$=!1)}let{ariaValues:it=v=>`Option ${v}, selected.`}=t,{ariaListOpen:Gt=(v,he)=>`You are currently focused on option ${v}. There are ${he} results available.`}=t,{ariaFocused:Ut=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function ln(){let v;return E&&p.length>0?v=p.map(he=>ce(he)).join(", "):v=ce(p),it(v)}function Yt(){if(!A||!r||r.length===0)return"";let v=r[et];if($&&v){let he=ce(v),Ne=r?r.length:0;return Gt(he,Ne)}else return Ut()}function At(v){ht[v?"unshift":"push"](()=>{g=v,n(6,g)})}function an(){b=this.value,n(3,b)}function wn(v){et=v,n(28,et)}function on(v){ht[v?"unshift":"push"](()=>{_=v,n(0,_)})}return e.$$set=v=>{"id"in v&&n(46,d=v.id),"container"in v&&n(0,_=v.container),"input"in v&&n(6,g=v.input),"isMulti"in v&&n(7,E=v.isMulti),"multiFullItemClearable"in v&&n(8,m=v.multiFullItemClearable),"isDisabled"in v&&n(9,w=v.isDisabled),"isCreatable"in v&&n(47,k=v.isCreatable),"isFocused"in v&&n(1,A=v.isFocused),"value"in v&&n(2,p=v.value),"filterText"in v&&n(3,b=v.filterText),"placeholder"in v&&n(48,H=v.placeholder),"placeholderAlwaysShow"in v&&n(49,X=v.placeholderAlwaysShow),"items"in v&&n(50,D=v.items),"itemFilter"in v&&n(51,L=v.itemFilter),"groupBy"in v&&n(52,O=v.groupBy),"groupFilter"in v&&n(53,S=v.groupFilter),"isGroupHeaderSelectable"in v&&n(54,G=v.isGroupHeaderSelectable),"getGroupHeaderLabel"in v&&n(55,B=v.getGroupHeaderLabel),"labelIdentifier"in v&&n(56,U=v.labelIdentifier),"getOptionLabel"in v&&n(57,T=v.getOptionLabel),"optionIdentifier"in v&&n(58,M=v.optionIdentifier),"loadOptions"in v&&n(59,oe=v.loadOptions),"hasError"in v&&n(10,j=v.hasError),"containerStyles"in v&&n(11,le=v.containerStyles),"getSelectionLabel"in v&&n(12,ce=v.getSelectionLabel),"createGroupHeaderItem"in v&&n(60,ue=v.createGroupHeaderItem),"createItem"in v&&n(61,ve=v.createItem),"isSearchable"in v&&n(13,ge=v.isSearchable),"inputStyles"in v&&n(14,Ae=v.inputStyles),"isClearable"in v&&n(15,Se=v.isClearable),"isWaiting"in v&&n(4,ye=v.isWaiting),"listPlacement"in v&&n(63,R=v.listPlacement),"listOpen"in v&&n(5,$=v.listOpen),"isVirtualList"in v&&n(64,C=v.isVirtualList),"loadOptionsInterval"in v&&n(65,Y=v.loadOptionsInterval),"noOptionsMessage"in v&&n(66,Z=v.noOptionsMessage),"hideEmptyState"in v&&n(67,q=v.hideEmptyState),"inputAttributes"in v&&n(16,se=v.inputAttributes),"listAutoWidth"in v&&n(68,De=v.listAutoWidth),"itemHeight"in v&&n(69,Fe=v.itemHeight),"Icon"in v&&n(17,ae=v.Icon),"iconProps"in v&&n(18,Me=v.iconProps),"showChevron"in v&&n(19,ke=v.showChevron),"showIndicator"in v&&n(20,P=v.showIndicator),"containerClasses"in v&&n(21,Ce=v.containerClasses),"indicatorSvg"in v&&n(22,Le=v.indicatorSvg),"listOffset"in v&&n(70,F=v.listOffset),"ClearIcon"in v&&n(23,ne=v.ClearIcon),"Item"in v&&n(71,pe=v.Item),"List"in v&&n(24,Be=v.List),"Selection"in v&&n(25,Ge=v.Selection),"MultiSelection"in v&&n(26,Re=v.MultiSelection),"VirtualList"in v&&n(72,z=v.VirtualList),"selectedValue"in v&&n(73,J=v.selectedValue),"ariaValues"in v&&n(74,it=v.ariaValues),"ariaListOpen"in v&&n(75,Gt=v.ariaListOpen),"ariaFocused"in v&&n(76,Ut=v.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Oe({loadOptions:oe,filterText:b,items:D,value:p,isMulti:E,optionIdentifier:M,groupBy:O,isCreatable:k})),e.$$.dirty[2]&2048&&J&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&Ye(D),e.$$.dirty[0]&4&&p&&gt(),e.$$.dirty[0]&73728&&(se||!ge)&&Et(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(E&&It(),at&&!E&&Pt()),e.$$.dirty[0]&132&&E&&p&&p.length>1&&vn(),e.$$.dirty[0]&4&&p&&Jt(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!p&&E&&Ke&&c("select",p),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&A!==Je&&Bt(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&b!==Ue&&He(),e.$$.dirty[0]&12&&n(29,i=p&&b.length===0),e.$$.dirty[0]&536904208&&n(37,a=i&&Se&&!w&&!ye),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=X&&E?H:p?"":H),e.$$.dirty[0]&132&&n(35,o=E&&p&&p.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:pe,filterText:b,optionIdentifier:M,noOptionsMessage:Z,hideEmptyState:q,isVirtualList:C,VirtualList:z,value:p,isMulti:E,getGroupHeaderLabel:B,items:r,itemHeight:Fe,getOptionLabel:T,listPlacement:R,parent:_,listAutoWidth:De,listOffset:F}),e.$$.dirty[0]&132&&n(33,u=p?ln():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,h=Yt())},[_,A,p,b,ye,$,g,E,m,w,j,le,ce,ge,Ae,Se,se,ae,Me,ke,P,Ce,Le,ne,Be,Ge,Re,lr,et,i,fe,tt,h,u,s,o,l,a,Hn,nr,yn,rr,ir,Q,Ee,pt,d,k,H,X,D,L,O,S,G,B,U,T,M,oe,ue,ve,x,R,C,Y,Z,q,De,Fe,F,pe,z,J,it,Gt,Ut,Ke,Ue,Je,at,r,At,an,wn,on]}class wa extends Ct{constructor(t){super(),Nt(this,t,K0,X0,Lt,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function W0(e){const t=e-1;return t*t*t+1}function Ur(e,{delay:t=0,duration:n=400,easing:r=es}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}function q0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),a=i.transform==="none"?"":i.transform,[l,o]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*o/n.height-(n.top+o),{delay:h=0,duration:c=_=>Math.sqrt(_)*120,easing:d=W0}=r;return{delay:h,duration:We(c)?c(Math.sqrt(s*s+u*u)):c,easing:d,css:(_,g)=>{const E=g*s,m=g*u,w=_+g*t.width/n.width,k=_+g*t.height/n.height;return`transform: ${a} translate(${E}px, ${m}px) scale(${w}, ${k});`}}}const fn=zi([2020]),ct=zi(new Set),dn=zi(!0);class Z0{constructor(t){je(this,"id");je(this,"code");je(this,"name");je(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class Tr{constructor(t){je(this,"id");je(this,"code");je(this,"name");je(this,"level");je(this,"parent_id");je(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class Zt{constructor(t,n,r){je(this,"location_id");je(this,"location");je(this,"partner_id");je(this,"partner");je(this,"product_id");je(this,"product");je(this,"year");je(this,"export_value");je(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}const tn="#377eb8",nn="#ff7f00",Yr="rgba(77, 175, 74, 0.65)",zr="rgba(228, 26, 29, 0.65)";function ba(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function ka(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function Ea(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function x0(e){let t,n,r,i,a;return{c(){t=re("text"),n=_e("No valid data for this pair."),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=N(t);n=me(o,"No valid data for this pair."),o.forEach(y),this.h()},h(){f(t,"x",r=e[3]/2),f(t,"y",i=e[9]/2),f(t,"alignment-baseline","central"),f(t,"text-anchor","middle")},m(l,o){K(l,t,o),I(t,n)},p(l,o){o[0]&8&&r!==(r=l[3]/2)&&f(t,"x",r),o[0]&512&&i!==(i=l[9]/2)&&f(t,"y",i)},i(l){a||pn(()=>{a=Yi(t,Ur,{}),a.start()})},o:Pe,d(l){l&&y(t)}}}function J0(e){var q,se,De,Fe,ae,Me,ke,P,Ce,Le;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,a,l,o=e[6].length>1?`from ${e[6][0]} to ${e[6][e[6].length-1]}`:`in ${e[6]}`,s,u=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",h,c,d,_,g=(((se=(q=e[2])==null?void 0:q.name.length)!=null?se:0)>19?((Fe=(De=e[2])==null?void 0:De.name)!=null?Fe:"").substring(0,19)+"...":(ae=e[2])==null?void 0:ae.name)+" ",E,m=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",w,k,A=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",p,b,H=(((ke=(Me=e[2])==null?void 0:Me.name.length)!=null?ke:0)>19?((Ce=(P=e[2])==null?void 0:P.name)!=null?Ce:"").substring(0,19)+"...":(Le=e[2])==null?void 0:Le.name)+"",X,D,L,O=[],S=new Map,G,B=[],U=new Map,T,M=[],oe=new Map,j,le,ce,ue,ve,x,ge,Ae,Se,ye=e[10];const R=F=>F[44].product_id;for(let F=0;F<ye.length;F+=1){let ne=Ea(e,ye,F),pe=R(ne);S.set(pe,O[F]=Aa(pe,ne))}let $=e[10];const C=F=>F[46];for(let F=0;F<$.length;F+=1){let ne=ka(e,$,F),pe=C(ne);U.set(pe,B[F]=Ta(pe,ne))}let Y=e[10];const Z=F=>F[44].product_id;for(let F=0;F<Y.length;F+=1){let ne=ba(e,Y,F),pe=Z(ne);oe.set(pe,M[F]=Sa(pe,ne))}return{c(){t=re("text"),n=_e("Sector "),i=_e(r),a=re("text"),l=_e("Trade Flow "),s=_e(o),h=_e(u),d=re("text"),_=_e("Export to "),E=_e(g),w=_e(m),k=re("text"),p=_e(A),b=_e("\xA0Import from "),X=_e(H),L=re("g");for(let F=0;F<O.length;F+=1)O[F].c();G=Te();for(let F=0;F<B.length;F+=1)B[F].c();T=Te();for(let F=0;F<M.length;F+=1)M[F].c();j=re("line"),ue=re("line"),x=re("g"),ge=re("g"),this.h()},l(F){t=ie(F,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var ne=N(t);n=me(ne,"Sector "),i=me(ne,r),ne.forEach(y),a=ie(F,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var pe=N(a);l=me(pe,"Trade Flow "),s=me(pe,o),h=me(pe,u),pe.forEach(y),d=ie(F,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var Be=N(d);_=me(Be,"Export to "),E=me(Be,g),w=me(Be,m),Be.forEach(y),k=ie(F,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var Ge=N(k);p=me(Ge,A),b=me(Ge,"\xA0Import from "),X=me(Ge,H),Ge.forEach(y),L=ie(F,"g",{id:!0,transform:!0});var Re=N(L);for(let z=0;z<O.length;z+=1)O[z].l(Re);G=Te();for(let z=0;z<B.length;z+=1)B[z].l(Re);T=Te();for(let z=0;z<M.length;z+=1)M[z].l(Re);j=ie(Re,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),N(j).forEach(y),ue=ie(Re,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),N(ue).forEach(y),x=ie(Re,"g",{id:!0,class:!0}),N(x).forEach(y),Re.forEach(y),ge=ie(F,"g",{id:!0,class:!0}),N(ge).forEach(y),this.h()},h(){var F,ne,pe,Be;f(t,"text-anchor","start"),f(t,"class","chart-header sortable svelte-1iu1tr7"),f(t,"x",15),f(t,"y",zn/2),f(t,"alignment-baseline","hanging"),f(a,"text-anchor","middle"),f(a,"class","chart-header sortable svelte-1iu1tr7"),f(a,"x",c=(e[3]-Rt)/2+Rt-20),f(a,"y",zn/2-7),f(a,"alignment-baseline","hanging"),f(d,"class","axis-header from-label sortable svelte-1iu1tr7"),f(d,"x",Rt),f(d,"y",zn/2-5),f(d,"alignment-baseline","hanging"),f(d,"font-size","13"),f(k,"class","axis-header from-label sortable svelte-1iu1tr7"),f(k,"x",D=e[3]-20),f(k,"y",zn/2-5),f(k,"text-anchor","end"),f(k,"alignment-baseline","hanging"),f(k,"font-size","13"),f(j,"id","midline"),f(j,"transform",le=`translate(${e[5](0)},0)`),f(j,"y1",20),f(j,"y2",ce=(((ne=(F=e[10])==null?void 0:F.length)!=null?ne:0)+1)*ut),f(j,"stroke","rgba(0,0,0,0.7)"),f(j,"stroke-width","1"),f(j,"class","svelte-1iu1tr7"),f(ue,"x1",Rt),f(ue,"y1",0),f(ue,"x2",Rt),f(ue,"y2",ve=(((Be=(pe=e[10])==null?void 0:pe.length)!=null?Be:0)+1)*ut),f(ue,"stroke","rgba(0,0,0,0.1)"),f(ue,"stroke-width","1"),f(x,"id","axis"),f(x,"class","axis-ticks"),f(L,"id","bar-content"),f(L,"transform",`translate(${0},${zn})`),f(ge,"id","bar-chart-tooltip"),f(ge,"class","tooltip")},m(F,ne){K(F,t,ne),I(t,n),I(t,i),K(F,a,ne),I(a,l),I(a,s),I(a,h),K(F,d,ne),I(d,_),I(d,E),I(d,w),K(F,k,ne),I(k,p),I(k,b),I(k,X),K(F,L,ne);for(let pe=0;pe<O.length;pe+=1)O[pe].m(L,null);I(L,G);for(let pe=0;pe<B.length;pe+=1)B[pe].m(L,null);I(L,T);for(let pe=0;pe<M.length;pe+=1)M[pe].m(L,null);I(L,j),I(L,ue),I(L,x),e[36](x),K(F,ge,ne),Ae||(Se=[W(t,"click",e[29]),W(t,"keydown",$0),W(a,"click",e[30]),W(a,"keydown",ed),W(d,"keydown",td),W(d,"click",e[31]),W(k,"click",e[32]),W(k,"keydown",nd)],Ae=!0)},p(F,ne){var pe,Be,Ge,Re,z,Oe,V,J,fe,Ke,Ue,Je,at,et;if(ne[0]&3&&r!==(r=F[1]==F[0].AlphaUp?"\u2191":F[1]==F[0].AlphaDown?"\u2193":" ")&&Xe(i,r),ne[0]&64&&o!==(o=F[6].length>1?`from ${F[6][0]} to ${F[6][F[6].length-1]}`:`in ${F[6]}`)&&Xe(s,o),ne[0]&3&&u!==(u=F[1]==F[0].Up?"\u2191":F[1]==F[0].Down?"\u2193":" ")&&Xe(h,u),ne[0]&8&&c!==(c=(F[3]-Rt)/2+Rt-20)&&f(a,"x",c),ne[0]&4&&g!==(g=(((Be=(pe=F[2])==null?void 0:pe.name.length)!=null?Be:0)>19?((Re=(Ge=F[2])==null?void 0:Ge.name)!=null?Re:"").substring(0,19)+"...":(z=F[2])==null?void 0:z.name)+" ")&&Xe(E,g),ne[0]&3&&m!==(m=F[1]==F[0].LeftUp?"\u2191":F[1]==F[0].LeftDown?"\u2193":" ")&&Xe(w,m),ne[0]&3&&A!==(A=F[1]==F[0].RightUp?"\u2191":F[1]==F[0].RightDown?"\u2193":" ")&&Xe(p,A),ne[0]&4&&H!==(H=(((V=(Oe=F[2])==null?void 0:Oe.name.length)!=null?V:0)>19?((fe=(J=F[2])==null?void 0:J.name)!=null?fe:"").substring(0,19)+"...":(Ke=F[2])==null?void 0:Ke.name)+"")&&Xe(X,H),ne[0]&8&&D!==(D=F[3]-20)&&f(k,"x",D),ne[0]&1032&&(ye=F[10],O=$t(O,ne,R,1,F,ye,S,L,Ln,Aa,G,Ea)),ne[0]&64672&&($=F[10],B=$t(B,ne,C,1,F,$,U,L,Ln,Ta,T,ka)),ne[0]&3072){Y=F[10];for(let Qe=0;Qe<M.length;Qe+=1)M[Qe].r();M=$t(M,ne,Z,1,F,Y,oe,L,ts,Sa,j,ba);for(let Qe=0;Qe<M.length;Qe+=1)M[Qe].a()}ne[0]&32&&le!==(le=`translate(${F[5](0)},0)`)&&f(j,"transform",le),ne[0]&1024&&ce!==(ce=(((Je=(Ue=F[10])==null?void 0:Ue.length)!=null?Je:0)+1)*ut)&&f(j,"y2",ce),ne[0]&1024&&ve!==(ve=(((et=(at=F[10])==null?void 0:at.length)!=null?et:0)+1)*ut)&&f(ue,"y2",ve)},i:Pe,o:Pe,d(F){F&&y(t),F&&y(a),F&&y(d),F&&y(k),F&&y(L);for(let ne=0;ne<O.length;ne+=1)O[ne].d();for(let ne=0;ne<B.length;ne+=1)B[ne].d();for(let ne=0;ne<M.length;ne+=1)M[ne].d();e[36](null),F&&y(ge),Ae=!1,bt(Se)}}}function Ia(e){let t,n;return{c(){t=re("rect"),this.h()},l(r){t=ie(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),N(t).forEach(y),this.h()},h(){f(t,"x","0"),f(t,"y",n=e[46]*ut+rn),f(t,"height",ut),f(t,"width",e[3]),f(t,"fill","rgba(0,0,0,0.04)"),f(t,"class","svelte-1iu1tr7")},m(r,i){K(r,t,i)},p(r,i){i[0]&1024&&n!==(n=r[46]*ut+rn)&&f(t,"y",n),i[0]&8&&f(t,"width",r[3])},d(r){r&&y(t)}}}function Aa(e,t){let n,r,i=t[46]%2==0&&Ia(t);return{key:e,first:null,c(){n=Te(),i&&i.c(),r=Te(),this.h()},l(a){n=Te(),i&&i.l(a),r=Te(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[46]%2==0?i?i.p(t,l):(i=Ia(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&y(n),i&&i.d(a),a&&y(r)}}}function Ta(e,t){let n,r,i,a,l,o,s,u,h,c,d,_,g;function E(){return t[33](t[44])}function m(){return t[34](t[44])}return{key:e,first:null,c(){n=re("g"),r=re("rect"),l=re("rect"),u=re("rect"),this.h()},l(w){n=ie(w,"g",{class:!0,transform:!0});var k=N(n);r=ie(k,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),N(r).forEach(y),l=ie(k,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),N(l).forEach(y),u=ie(k,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),N(u).forEach(y),k.forEach(y),this.h()},h(){f(r,"class","tab svelte-1iu1tr7"),f(r,"x","0"),f(r,"y","2"),f(r,"height",ut-4),f(r,"width",i=t[11].size>0&&t[11].has(t[44].product_id)?Rt-1:6),f(r,"fill",a=t[7]?t[7](t[44].product.name):"white"),f(l,"class","country1-bar svelte-1iu1tr7"),f(l,"x",o=t[5](-t[44].export_value)),f(l,"y",dr/2),f(l,"height",ut-dr),f(l,"width",s=t[5](0)-t[5](-t[44].export_value)),f(l,"fill",tn),f(u,"class","country2-bar svelte-1iu1tr7"),f(u,"x",h=t[5](0)),f(u,"y",dr/2),f(u,"height",ut-dr),f(u,"width",c=t[5](t[44].import_value)-t[5](0)),f(u,"fill",nn),f(n,"class","bar-row"),f(n,"transform",d=`translate(0, ${t[46]*ut+rn})`),this.first=n},m(w,k){K(w,n,k),I(n,r),I(n,l),I(n,u),_||(g=[W(l,"focus",t[28]),W(l,"keydown",rd),W(l,"mouseover",function(){We(t[13](t[44],!0))&&t[13](t[44],!0).apply(this,arguments)}),W(l,"mousemove",t[14]()),W(l,"mouseleave",t[15]()),W(l,"click",E),W(u,"focus",t[27]),W(u,"keydown",id),W(u,"mouseover",function(){We(t[13](t[44],!1))&&t[13](t[44],!1).apply(this,arguments)}),W(u,"mousemove",t[14]()),W(u,"mouseleave",t[15]()),W(u,"click",m)],_=!0)},p(w,k){t=w,k[0]&3072&&i!==(i=t[11].size>0&&t[11].has(t[44].product_id)?Rt-1:6)&&f(r,"width",i),k[0]&1152&&a!==(a=t[7]?t[7](t[44].product.name):"white")&&f(r,"fill",a),k[0]&1056&&o!==(o=t[5](-t[44].export_value))&&f(l,"x",o),k[0]&1056&&s!==(s=t[5](0)-t[5](-t[44].export_value))&&f(l,"width",s),k[0]&32&&h!==(h=t[5](0))&&f(u,"x",h),k[0]&1056&&c!==(c=t[5](t[44].import_value)-t[5](0))&&f(u,"width",c),k[0]&1024&&d!==(d=`translate(0, ${t[46]*ut+rn})`)&&f(n,"transform",d)},d(w){w&&y(n),_=!1,bt(g)}}}function Sa(e,t){let n,r=t[44].product.name+"",i,a,l,o=Pe,s,u;function h(){return t[35](t[44])}return{key:e,first:null,c(){n=re("text"),i=_e(r),this.h()},l(c){n=ie(c,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var d=N(n);i=me(d,r),d.forEach(y),this.h()},h(){f(n,"class","product-text svelte-1iu1tr7"),f(n,"alignment-baseline","hanging"),f(n,"x","10"),f(n,"y",a=t[46]*ut+rn+6),this.first=n},m(c,d){K(c,n,d),I(n,i),s||(u=[W(n,"click",h),W(n,"keydown",ld)],s=!0)},p(c,d){t=c,d[0]&1024&&r!==(r=t[44].product.name+"")&&Xe(i,r),d[0]&1024&&a!==(a=t[46]*ut+rn+6)&&f(n,"y",a)},r(){l=n.getBoundingClientRect()},f(){ns(n),o()},a(){o(),o=rs(n,l,q0,{duration:400,delay:20})},d(c){c&&y(n),s=!1,bt(u)}}}function Ma(e){let t,n,r,i,a;return{c(){t=re("rect"),n=re("text"),r=_e("Loading..."),this.h()},l(l){t=ie(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),N(t).forEach(y),n=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=N(n);r=me(o,"Loading..."),o.forEach(y),this.h()},h(){f(t,"x","0"),f(t,"y","0"),f(t,"width",e[3]),f(t,"height",e[9]),f(t,"fill","rgba(255,255,255,0.9)"),f(t,"class","svelte-1iu1tr7"),f(n,"x",i=e[3]/2),f(n,"y",a=e[9]/2),f(n,"alignment-baseline","central"),f(n,"text-anchor","middle")},m(l,o){K(l,t,o),K(l,n,o),I(n,r)},p(l,o){o[0]&8&&f(t,"width",l[3]),o[0]&512&&f(t,"height",l[9]),o[0]&8&&i!==(i=l[3]/2)&&f(n,"x",i),o[0]&512&&a!==(a=l[9]/2)&&f(n,"y",a)},d(l){l&&y(t),l&&y(n)}}}function Q0(e){let t,n,r,i,a;function l(h,c){return h[10]&&h[10].length>0?J0:x0}let o=l(e),s=o(e),u=e[8]&&Ma(e);return{c(){t=ee("div"),n=re("svg"),s.c(),r=Te(),u&&u.c(),this.h()},l(h){t=te(h,"DIV",{id:!0,class:!0});var c=N(t);n=ie(c,"svg",{height:!0,class:!0});var d=N(n);s.l(d),r=Te(),u&&u.l(d),d.forEach(y),c.forEach(y),this.h()},h(){var h,c;f(n,"height",i=Math.max(e[9],(((c=(h=e[10])==null?void 0:h.length)!=null?c:0)+1)*ut+rn)),f(n,"class","svelte-1iu1tr7"),f(t,"id","bar-chart"),f(t,"class","viz-section svelte-1iu1tr7"),pn(()=>e[37].call(t))},m(h,c){K(h,t,c),I(t,n),s.m(n,null),I(n,r),u&&u.m(n,null),a=Wr(t,e[37].bind(t))},p(h,c){var d,_;o===(o=l(h))&&s?s.p(h,c):(s.d(1),s=o(h),s&&(s.c(),de(s,1),s.m(n,r))),h[8]?u?u.p(h,c):(u=Ma(h),u.c(),u.m(n,null)):u&&(u.d(1),u=null),c[0]&1536&&i!==(i=Math.max(h[9],(((_=(d=h[10])==null?void 0:d.length)!=null?_:0)+1)*ut+rn))&&f(n,"height",i)},i(h){de(s)},o:Pe,d(h){h&&y(t),s.d(),u&&u.d(),a()}}}const zn=40,ut=30,Ca=0,j0=10,rn=30,Rt=100,dr=4,_r=10,Na=140,La=25,fi=105,Qt=20,jt=35,In=22,$0=()=>{},ed=()=>{},td=()=>{},nd=()=>{},rd=()=>{},id=()=>{},ld=()=>{};function ad(e,t,n){let r,i,a,l,o,s,u,h,c,d,_,g,E;Mt(e,fn,C=>n(6,_=C)),Mt(e,ct,C=>n(11,g=C)),Mt(e,dn,C=>n(12,E=C));let{data:m}=t;var w;(function(C){C[C.LeftUp=0]="LeftUp",C[C.LeftDown=1]="LeftDown",C[C.RightUp=2]="RightUp",C[C.RightDown=3]="RightDown",C[C.Up=4]="Up",C[C.Down=5]="Down",C[C.AlphaUp=6]="AlphaUp",C[C.AlphaDown=7]="AlphaDown"})(w||(w={}));let k=w.AlphaDown,{bilateralData:A,productColorScale:p,country1:b,country2:H,loadingDrilldown:X,productData:D,locationData:L}=m,O=800,S=550,G;const B=C=>en("$.3s")(C).replace(/G/,"B");function U(C,Y,Z){return C+Z<O?C+Y:C+Y-Z}function T(C,Y){return C+fi<S?C+Y:C+Y-fi}function M(C,Y){return Z=>{let q=Ve("#bar-chart-tooltip"),se=Na+_.length*La;q.append("rect").attr("id","tooltip-rect").attr("width",se).attr("height",fi).attr("x",U(Z.layerX,_r,se)).attr("y",T(Z.layerY,_r)),q.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",U(Z.layerX,Qt,se)).attr("y",T(Z.layerY,jt)).style("fill",Y?tn:nn).text(`${C.product.name}`),q.append("text").attr("id","tooltip-text2").attr("x",U(Z.layerX,Qt,se)).attr("y",T(Z.layerY,jt+In)).text((Y?"Export: ":"Import: ")+`${B(Y?C.export_value:C.import_value)}`),q.append("text").attr("id","tooltip-text3").attr("x",U(Z.layerX,Qt,se)).attr("y",T(Z.layerY,jt+2*In)).text(`Share: ${en(".2%")(Y?C.export_value/h:C.import_value/c)}`),q.append("text").attr("id","tooltip-text4").attr("x",U(Z.layerX,Qt,se)).attr("y",T(Z.layerY,jt+3*In)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function oe(){return C=>{let Y=Na+_.length*La;Ve("#tooltip-rect").attr("x",U(C.layerX,_r,Y)).attr("y",T(C.layerY,_r)),Ve("#tooltip-text1").attr("x",U(C.layerX,Qt,Y)).attr("y",T(C.layerY,jt)),Ve("#tooltip-text2").attr("x",U(C.layerX,Qt,Y)).attr("y",T(C.layerY,jt+In)),Ve("#tooltip-text3").attr("x",U(C.layerX,Qt,Y)).attr("y",T(C.layerY,jt+2*In)),Ve("#tooltip-text4").attr("x",U(C.layerX,Qt,Y)).attr("y",T(C.layerY,jt+3*In))}}function j(){return C=>{Ve("#bar-chart-tooltip").selectAll("rect").remove(),Ve("#bar-chart-tooltip").selectAll("text").remove()}}function le(C){_t.call(this,e,C)}function ce(C){_t.call(this,e,C)}const ue=()=>{k==w.AlphaDown?n(1,k=w.AlphaUp):n(1,k=w.AlphaDown)},ve=()=>{k==w.Down?n(1,k=w.Up):n(1,k=w.Down)},x=()=>{k==w.LeftDown?n(1,k=w.LeftUp):n(1,k=w.LeftDown)},ge=()=>{k==w.RightDown?n(1,k=w.RightUp):n(1,k=w.RightDown)},Ae=C=>{E||(dn.set(!0),ct.update(Y=>(Y.clear(),Y))),g.has(C==null?void 0:C.product_id)?ct.update(Y=>{var Z;return Y.delete((Z=C==null?void 0:C.product_id)!=null?Z:-1),Y}):(C==null?void 0:C.product_id)>=0&&ct.update(Y=>{var Z;return Y.add((Z=C==null?void 0:C.product_id)!=null?Z:-1),Y})},Se=C=>{E&&(dn.set(!1),ct.update(Y=>(Y.clear(),Y))),g.has(C==null?void 0:C.product_id)?ct.update(Y=>{var Z;return Y.delete((Z=C==null?void 0:C.product_id)!=null?Z:-1),Y}):(C==null?void 0:C.product_id)>=0&&ct.update(Y=>{var Z;return Y.add((Z=C==null?void 0:C.product_id)!=null?Z:-1),Y})},ye=C=>{g.has(C.product_id)?ct.update(Y=>(Y.delete(C.product_id),Y)):ct.update(Y=>(Y.add(C.product_id),Y))};function R(C){ht[C?"unshift":"push"](()=>{G=C,n(4,G)})}function $(){O=this.clientWidth,S=this.clientHeight,n(3,O),n(9,S)}return e.$$set=C=>{"data"in C&&n(16,m=C.data)},e.$$.update=()=>{var C,Y,Z;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:A,productColorScale:p,country1:b,country2:H,loadingDrilldown:X,productData:D,locationData:L}=m,A,(n(7,p),n(16,m)),(n(18,b),n(16,m)),(n(2,H),n(16,m)),(n(8,X),n(16,m)),(n(19,D),n(16,m)),(n(20,L),n(16,m))),e.$$.dirty[0]&393220&&n(26,r=(Z=A==null?void 0:A.get((C=b==null?void 0:b.id)!=null?C:0))==null?void 0:Z.get((Y=H==null?void 0:H.id)!=null?Y:0)),e.$$.dirty[0]&67108928&&n(25,i=_.map(q=>{var se;return(se=r==null?void 0:r.get(q))!=null?se:new Array}).flat()),e.$$.dirty[0]&35389444&&n(23,a=Array.from(gi(i,q=>{var se,De;return q.reduce((Fe,ae)=>(Fe.export_value+=ae.export_value,Fe.import_value+=ae.import_value,Fe),new Zt(L,D,{location_id:(se=b==null?void 0:b.id)!=null?se:0,partner_id:(De=H==null?void 0:H.id)!=null?De:0,product_id:q[0].product_id,year:0,export_value:0,import_value:0}))},q=>q.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=a.filter(q=>q.product.level=="section")),e.$$.dirty[0]&16777219&&n(10,o=l.sort((q,se)=>{switch(k){case w.LeftUp:return q.export_value-se.export_value;case w.LeftDown:return se.export_value-q.export_value;case w.RightUp:return q.import_value-se.import_value;case w.RightDown:return se.import_value-q.import_value;case w.Up:return q.import_value+q.export_value-(se.import_value+se.export_value);case w.Down:return se.import_value+se.export_value-(q.import_value+q.export_value);case w.AlphaDown:return q.product.name.localeCompare(se.product.name);case w.AlphaUp:return se.product.name.localeCompare(q.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=qn(a,q=>q.export_value)),e.$$.dirty[0]&8388608&&n(21,u=qn(a,q=>q.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(h=Mr(a,q=>q.export_value)),e.$$.dirty[0]&8388608&&(c=Mr(a,q=>q.import_value)),e.$$.dirty[0]&6291464&&n(5,d=Zn().domain([-s,u]).range([Rt+Ca,O-Ca-j0])),e.$$.dirty[0]&48){let q=oo(d).tickFormat(se=>B(Math.abs(se)));Ve(G).transition().call(q)}},[w,k,H,O,G,d,_,p,X,S,o,g,E,M,oe,j,m,A,b,D,L,u,s,a,l,i,r,le,ce,ue,ve,x,ge,Ae,Se,ye,R,$]}class od extends Ct{constructor(t){super(),Nt(this,t,ad,Q0,Lt,{data:16},null,[-1,-1])}}function Oa(e,t,n){const r=e.slice();return r[54]=t[n],r}function Da(e,t,n){const r=e.slice();return r[54]=t[n],r}function Ra(e,t,n){const r=e.slice();return r[54]=t[n],r}function sd(e){let t,n,r,i,a;return{c(){t=re("text"),n=_e("No valid data for this pair."),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=N(t);n=me(o,"No valid data for this pair."),o.forEach(y),this.h()},h(){f(t,"x",r=e[2]/2),f(t,"y",i=e[3]/2),f(t,"alignment-baseline","central"),f(t,"text-anchor","middle")},m(l,o){K(l,t,o),I(t,n)},p(l,o){o[0]&4&&r!==(r=l[2]/2)&&f(t,"x",r),o[0]&8&&i!==(i=l[3]/2)&&f(t,"y",i)},i(l){a||pn(()=>{a=Yi(t,Ur,{}),a.start()})},o:Pe,d(l){l&&y(t)}}}function ud(e){var Ge,Re,z,Oe;let t,n,r,i,a,l,o,s,u,h,c,d,_,g,E,m,w,k,A,p,b,H,X,D,L=((Re=`to ${(Ge=e[0].get(e[1]))==null?void 0:Ge.name}`)!=null?Re:"")+"",O,S,G,B,U=((Oe=`from ${(z=e[0].get(e[1]))==null?void 0:z.name}`)!=null?Oe:"")+"",T,M,oe,j,le,ce,ue,ve,x,ge,Ae,Se=[],ye=new Map,R,$,C=[],Y=new Map,Z,q,se=[],De=new Map,Fe,ae,Me,ke=!e[16]&&Va(e),P=e[12]>0&&e[11]<0&&Fa(e),Ce=e[15];const Le=V=>V[54].year;for(let V=0;V<Ce.length;V+=1){let J=Ra(e,Ce,V),fe=Le(J);ye.set(fe,Se[V]=Ha(fe,J))}let F=e[15];const ne=V=>V[54].year;for(let V=0;V<F.length;V+=1){let J=Da(e,F,V),fe=ne(J);Y.set(fe,C[V]=Ba(fe,J))}let pe=e[15];const Be=V=>V[54].year;for(let V=0;V<pe.length;V+=1){let J=Oa(e,pe,V),fe=Be(J);De.set(fe,se[V]=Pa(fe,J))}return{c(){t=re("text"),n=_e("Trade Over Time"),i=re("g"),ke&&ke.c(),a=re("g"),l=re("line"),s=re("text"),u=_e("Year"),d=re("g"),_=re("text"),g=_e("Gross Exports/Imports"),m=re("g"),w=re("text"),k=_e("Net Exports"),b=re("g"),H=re("circle"),X=re("text"),D=_e("Export "),O=_e(L),S=re("circle"),G=re("text"),B=_e("Import "),T=_e(U),M=re("g"),oe=re("rect"),j=re("text"),le=_e("Trade Deficit"),ce=re("rect"),ue=re("text"),ve=_e("Trade Surplus"),ge=re("g"),P&&P.c(),Ae=Te();for(let V=0;V<Se.length;V+=1)Se[V].c();R=re("g"),$=re("path");for(let V=0;V<C.length;V+=1)C[V].c();Z=re("g"),q=re("path");for(let V=0;V<se.length;V+=1)se[V].c();Fe=re("g"),ae=re("g"),Me=_e("''"),this.h()},l(V){t=ie(V,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var J=N(t);n=me(J,"Trade Over Time"),J.forEach(y),i=ie(V,"g",{class:!0}),N(i).forEach(y),ke&&ke.l(V),a=ie(V,"g",{id:!0,class:!0,transform:!0});var fe=N(a);l=ie(fe,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),N(l).forEach(y),s=ie(fe,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var Ke=N(s);u=me(Ke,"Year"),Ke.forEach(y),fe.forEach(y),d=ie(V,"g",{id:!0,class:!0,transform:!0});var Ue=N(d);_=ie(Ue,"text",{x:!0,y:!0,"text-anchor":!0,class:!0,transform:!0});var Je=N(_);g=me(Je,"Gross Exports/Imports"),Je.forEach(y),Ue.forEach(y),m=ie(V,"g",{id:!0,class:!0,transform:!0});var at=N(m);w=ie(at,"text",{x:!0,y:!0,"text-anchor":!0,class:!0,transform:!0});var et=N(w);k=me(et,"Net Exports"),et.forEach(y),at.forEach(y),b=ie(V,"g",{id:!0,transform:!0});var Qe=N(b);H=ie(Qe,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),N(H).forEach(y),X=ie(Qe,"text",{class:!0,x:!0,y:!0,"font-size":!0,"text-anchor":!0});var gt=N(X);D=me(gt,"Export "),O=me(gt,L),gt.forEach(y),S=ie(Qe,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),N(S).forEach(y),G=ie(Qe,"text",{class:!0,x:!0,y:!0,"font-size":!0,"text-anchor":!0});var tt=N(G);B=me(tt,"Import "),T=me(tt,U),tt.forEach(y),Qe.forEach(y),M=ie(V,"g",{id:!0,transform:!0});var Et=N(M);oe=ie(Et,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),N(oe).forEach(y),j=ie(Et,"text",{class:!0,x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Dt=N(j);le=me(Dt,"Trade Deficit"),Dt.forEach(y),ce=ie(Et,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),N(ce).forEach(y),ue=ie(Et,"text",{class:!0,x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Jt=N(ue);ve=me(Jt,"Trade Surplus"),Jt.forEach(y),Et.forEach(y),ge=ie(V,"g",{id:!0});var Bt=N(ge);P&&P.l(Bt),Ae=Te();for(let He=0;He<Se.length;He+=1)Se[He].l(Bt);Bt.forEach(y),R=ie(V,"g",{class:!0});var It=N(R);$=ie(It,"path",{fill:!0,stroke:!0,"stroke-width":!0}),N($).forEach(y);for(let He=0;He<C.length;He+=1)C[He].l(It);It.forEach(y),Z=ie(V,"g",{class:!0});var Pt=N(Z);q=ie(Pt,"path",{fill:!0,stroke:!0,"stroke-width":!0}),N(q).forEach(y);for(let He=0;He<se.length;He+=1)se[He].l(Pt);Pt.forEach(y),Fe=ie(V,"g",{}),N(Fe).forEach(y),ae=ie(V,"g",{id:!0,class:!0}),N(ae).forEach(y),Me=me(V,"''"),this.h()},h(){f(t,"class","chart-header"),f(t,"x",r=e[2]/2+10),f(t,"y",lt-5),f(t,"text-anchor","middle"),f(i,"class","brush"),f(l,"id","xAxisLine"),f(l,"x1",cn),f(l,"x2",o=e[2]-Vt),f(l,"y1","0"),f(l,"y2","0"),f(l,"stroke","rgba(0,0,0,1)"),f(l,"stroke-width","1"),f(s,"class","axis-label"),f(s,"x",h=e[2]/2),f(s,"y",lt-3),f(s,"text-anchor","start"),f(a,"id","xAxis"),f(a,"class","axis-ticks"),f(a,"transform",c=`translate(${0},${e[3]-lt})`),f(_,"x",0),f(_,"y",-cn),f(_,"text-anchor","center"),f(_,"class","axis-label"),f(_,"transform",E=`translate(10,${e[3]/3}) rotate(-90)`),f(d,"id","yAisLeft"),f(d,"class","axis-ticks"),f(d,"transform",`translate(${cn},${0})`),f(w,"x",0),f(w,"y",-cn),f(w,"text-anchor","start"),f(w,"class","axis-label"),f(w,"transform",A=`translate(-4,${e[3]/2.5}) rotate(90)`),f(m,"id","yAisRight"),f(m,"class","axis-ticks"),f(m,"transform",p=`translate(${e[2]-Vt},${0})`),f(H,"class","circ1"),f(H,"cx","20"),f(H,"cy","10"),f(H,"r","5"),f(H,"fill",tn),f(H,"stroke","rgba(0,0,0,0)"),f(H,"stroke-width","2"),f(X,"class","axis-label"),f(X,"x","30"),f(X,"y","15"),f(X,"font-size","13"),f(X,"text-anchor","start"),f(S,"class","circ2"),f(S,"cx","20"),f(S,"cy","25"),f(S,"r","5"),f(S,"fill",nn),f(S,"stroke","rgba(0,0,0,0)"),f(S,"stroke-width","2"),f(G,"class","axis-label"),f(G,"x","30"),f(G,"y","30"),f(G,"font-size","13"),f(G,"text-anchor","start"),f(b,"id","legendLeft"),f(b,"transform","translate(0,6)"),f(oe,"class","deficit svelte-hitye1"),f(oe,"x","15"),f(oe,"y","5"),f(oe,"width","10"),f(oe,"height","10"),f(oe,"fill",zr),f(oe,"opacity","0.6"),f(j,"class","axis-label"),f(j,"x","30"),f(j,"y","15"),f(j,"font-size","13"),f(j,"text-anchor","start"),f(ce,"class","surplus svelte-hitye1"),f(ce,"x","15"),f(ce,"y","20"),f(ce,"width","10"),f(ce,"height","10"),f(ce,"fill",Yr),f(ce,"opacity","0.6"),f(ue,"class","axis-label"),f(ue,"x","30"),f(ue,"y","30"),f(ue,"font-size","13"),f(ue,"text-anchor","start"),f(M,"id","legendRight"),f(M,"transform",x=`translate(${e[2]-2*Vt+2},6)`),f(ge,"id","net-values-group"),f($,"fill","none"),f($,"stroke",tn),f($,"stroke-width","2"),f(R,"class","country1-group country-group svelte-hitye1"),f(q,"fill","none"),f(q,"stroke",nn),f(q,"stroke-width","2"),f(Z,"class","country2-group country-group svelte-hitye1"),f(ae,"id","line-chart-tooltip"),f(ae,"class","tooltip")},m(V,J){K(V,t,J),I(t,n),K(V,i,J),e[41](i),ke&&ke.m(V,J),K(V,a,J),I(a,l),I(a,s),I(s,u),e[42](a),K(V,d,J),I(d,_),I(_,g),e[43](d),K(V,m,J),I(m,w),I(w,k),e[44](m),K(V,b,J),I(b,H),I(b,X),I(X,D),I(X,O),I(b,S),I(b,G),I(G,B),I(G,T),K(V,M,J),I(M,oe),I(M,j),I(j,le),I(M,ce),I(M,ue),I(ue,ve),K(V,ge,J),P&&P.m(ge,null),I(ge,Ae);for(let fe=0;fe<Se.length;fe+=1)Se[fe].m(ge,null);K(V,R,J),I(R,$),e[45]($);for(let fe=0;fe<C.length;fe+=1)C[fe].m(R,null);K(V,Z,J),I(Z,q),e[46](q);for(let fe=0;fe<se.length;fe+=1)se[fe].m(Z,null);K(V,Fe,J),K(V,ae,J),K(V,Me,J)},p(V,J){var fe,Ke,Ue,Je;J[0]&4&&r!==(r=V[2]/2+10)&&f(t,"x",r),V[16]?ke&&(ke.d(1),ke=null):ke?ke.p(V,J):(ke=Va(V),ke.c(),ke.m(a.parentNode,a)),J[0]&4&&o!==(o=V[2]-Vt)&&f(l,"x2",o),J[0]&4&&h!==(h=V[2]/2)&&f(s,"x",h),J[0]&8&&c!==(c=`translate(${0},${V[3]-lt})`)&&f(a,"transform",c),J[0]&8&&E!==(E=`translate(10,${V[3]/3}) rotate(-90)`)&&f(_,"transform",E),J[0]&8&&A!==(A=`translate(-4,${V[3]/2.5}) rotate(90)`)&&f(w,"transform",A),J[0]&4&&p!==(p=`translate(${V[2]-Vt},${0})`)&&f(m,"transform",p),J[0]&3&&L!==(L=((Ke=`to ${(fe=V[0].get(V[1]))==null?void 0:fe.name}`)!=null?Ke:"")+"")&&Xe(O,L),J[0]&3&&U!==(U=((Je=`from ${(Ue=V[0].get(V[1]))==null?void 0:Ue.name}`)!=null?Je:"")+"")&&Xe(T,U),J[0]&4&&x!==(x=`translate(${V[2]-2*Vt+2},6)`)&&f(M,"transform",x),V[12]>0&&V[11]<0?P?P.p(V,J):(P=Fa(V),P.c(),P.m(ge,Ae)):P&&(P.d(1),P=null),J[0]&31375360&&(Ce=V[15],Se=$t(Se,J,Le,1,V,Ce,ye,ge,Ln,Ha,null,Ra)),J[0]&20504576&&(F=V[15],C=$t(C,J,ne,1,V,F,Y,R,Ln,Ba,null,Da)),J[0]&20504576&&(pe=V[15],se=$t(se,J,Be,1,V,pe,De,Z,Ln,Pa,null,Oa))},i:Pe,o:Pe,d(V){V&&y(t),V&&y(i),e[41](null),ke&&ke.d(V),V&&y(a),e[42](null),V&&y(d),e[43](null),V&&y(m),e[44](null),V&&y(b),V&&y(M),V&&y(ge),P&&P.d();for(let J=0;J<Se.length;J+=1)Se[J].d();V&&y(R),e[45](null);for(let J=0;J<C.length;J+=1)C[J].d();V&&y(Z),e[46](null);for(let J=0;J<se.length;J+=1)se[J].d();V&&y(Fe),V&&y(ae),V&&y(Me)}}}function Va(e){let t,n,r;return{c(){t=re("rect"),this.h()},l(i){t=ie(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),N(t).forEach(y),this.h()},h(){f(t,"class","timebar svelte-hitye1"),f(t,"x",n=e[14](e[19][0])-12),f(t,"y",44),f(t,"width","24"),f(t,"height",r=e[3]-44-lt>0?e[3]-44-lt:0),f(t,"fill","rgba(0,0,0,0.2)")},m(i,a){K(i,t,a)},p(i,a){a[0]&540672&&n!==(n=i[14](i[19][0])-12)&&f(t,"x",n),a[0]&8&&r!==(r=i[3]-44-lt>0?i[3]-44-lt:0)&&f(t,"height",r)},d(i){i&&y(t)}}}function Fa(e){let t,n,r,i;return{c(){t=re("line"),this.h()},l(a){t=ie(a,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),N(t).forEach(y),this.h()},h(){f(t,"id","zeroline"),f(t,"x1",cn),f(t,"x2",n=e[2]-Vt),f(t,"y1",r=e[10](0)),f(t,"y2",i=e[10](0)),f(t,"stroke","rgba(0,0,0,0.7)"),f(t,"stroke-width","1")},m(a,l){K(a,t,l)},p(a,l){l[0]&4&&n!==(n=a[2]-Vt)&&f(t,"x2",n),l[0]&1024&&r!==(r=a[10](0))&&f(t,"y1",r),l[0]&1024&&i!==(i=a[10](0))&&f(t,"y2",i)},d(a){a&&y(t)}}}function Ha(e,t){let n,r,i,a,l,o,s,u;return{key:e,first:null,c(){n=re("rect"),this.h()},l(h){n=ie(h,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),N(n).forEach(y),this.h()},h(){f(n,"x",r=t[14](t[54].year)-xn/2),f(n,"width",xn),f(n,"y",i=t[18](t[54])),f(n,"height",a=t[17](t[54])>0?t[17](t[54]):0),f(n,"fill",l=t[54].export_value<t[54].import_value?zr:Yr),f(n,"stroke",o=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),f(n,"opacity","0.6"),f(n,"class","svelte-hitye1"),this.first=n},m(h,c){K(h,n,c),s||(u=[W(n,"click",function(){We(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),W(n,"keydown",hd),W(n,"keypress",t[38]),W(n,"click",function(){We(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),W(n,"focus",t[39]),W(n,"blur",t[40]),W(n,"mouseover",function(){We(t[22](t[54]))&&t[22](t[54]).apply(this,arguments)}),W(n,"mousemove",t[23]()),W(n,"mouseout",t[24]())],s=!0)},p(h,c){t=h,c[0]&49152&&r!==(r=t[14](t[54].year)-xn/2)&&f(n,"x",r),c[0]&294912&&i!==(i=t[18](t[54]))&&f(n,"y",i),c[0]&163840&&a!==(a=t[17](t[54])>0?t[17](t[54]):0)&&f(n,"height",a),c[0]&32768&&l!==(l=t[54].export_value<t[54].import_value?zr:Yr)&&f(n,"fill",l),c[0]&557056&&o!==(o=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&f(n,"stroke",o)},d(h){h&&y(n),s=!1,bt(u)}}}function Ba(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=re("circle"),this.h()},l(u){n=ie(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),N(n).forEach(y),this.h()},h(){f(n,"class","circ1 svelte-hitye1"),f(n,"cx",r=t[14](t[54].year)),f(n,"cy",i=t[13](t[54].export_value)),f(n,"r",a=t[19].includes(t[54].year)?8:7),f(n,"fill",tn),f(n,"stroke",l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666"),f(n,"stroke-width","1"),this.first=n},m(u,h){K(u,n,h),o||(s=[W(n,"click",function(){We(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),W(n,"keydown",dd),W(n,"keypress",t[35]),W(n,"click",function(){We(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),W(n,"focus",t[36]),W(n,"blur",t[37]),W(n,"mouseover",function(){We(t[21](t[54],!0))&&t[21](t[54],!0).apply(this,arguments)}),W(n,"mouseout",t[24]())],o=!0)},p(u,h){t=u,h[0]&49152&&r!==(r=t[14](t[54].year))&&f(n,"cx",r),h[0]&40960&&i!==(i=t[13](t[54].export_value))&&f(n,"cy",i),h[0]&557056&&a!==(a=t[19].includes(t[54].year)?8:7)&&f(n,"r",a),h[0]&557056&&l!==(l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666")&&f(n,"stroke",l)},d(u){u&&y(n),o=!1,bt(s)}}}function Pa(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=re("circle"),this.h()},l(u){n=ie(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),N(n).forEach(y),this.h()},h(){f(n,"cx",r=t[14](t[54].year)),f(n,"cy",i=t[13](t[54].import_value)),f(n,"r",a=t[19].includes(t[54].year)?"7":"6"),f(n,"fill",nn),f(n,"stroke",l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666"),f(n,"stroke-width","1"),f(n,"class","svelte-hitye1"),this.first=n},m(u,h){K(u,n,h),o||(s=[W(n,"click",function(){We(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),W(n,"keydown",_d),W(n,"keypress",t[32]),W(n,"click",function(){We(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),W(n,"focus",t[33]),W(n,"blur",t[34]),W(n,"mouseover",function(){We(t[21](t[54],!1))&&t[21](t[54],!1).apply(this,arguments)}),W(n,"mouseout",t[24]())],o=!0)},p(u,h){t=u,h[0]&49152&&r!==(r=t[14](t[54].year))&&f(n,"cx",r),h[0]&40960&&i!==(i=t[13](t[54].import_value))&&f(n,"cy",i),h[0]&557056&&a!==(a=t[19].includes(t[54].year)?"7":"6")&&f(n,"r",a),h[0]&557056&&l!==(l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666")&&f(n,"stroke",l)},d(u){u&&y(n),o=!1,bt(s)}}}function fd(e){let t,n,r;function i(o,s){return o[15].length>0?ud:sd}let a=i(e),l=a(e);return{c(){t=ee("div"),n=re("svg"),l.c(),this.h()},l(o){t=te(o,"DIV",{id:!0,class:!0});var s=N(t);n=ie(s,"svg",{width:!0,height:!0});var u=N(n);l.l(u),u.forEach(y),s.forEach(y),this.h()},h(){f(n,"width",e[2]),f(n,"height",e[3]),f(t,"id","line-chart"),f(t,"class","viz-section"),pn(()=>e[47].call(t))},m(o,s){K(o,t,s),I(t,n),l.m(n,null),r=Wr(t,e[47].bind(t))},p(o,s){a===(a=i(o))&&l?l.p(o,s):(l.d(1),l=a(o),l&&(l.c(),de(l,1),l.m(n,null))),s[0]&4&&f(n,"width",o[2]),s[0]&8&&f(n,"height",o[3])},i(o){de(l)},o:Pe,d(o){o&&y(t),l.d(),r()}}}const lt=35,mr=15,cn=55,Vt=61,xn=16,An=10,gr=180,Wt=68,cd=22,qt=20,ci=35,Tn=37,Sn=22,hd=()=>{},dd=()=>{},_d=()=>{};function md(e,t,n){let r,i,a,l,o,s,u,h,c,d,_,g,E;Mt(e,ct,P=>n(31,g=P)),Mt(e,fn,P=>n(19,E=P));let{data:m}=t,{bilateralData:w,locationData:k,productData:A,country1_id:p,country2_id:b}=m,H=0,X=0;const D=P=>en("$.3s")(P).replace(/G/,"B");let L,O,S,G,B,U,T=!1,M;function oe(P){return()=>{n(16,T=!1),Ve(G).call(s.clear),fn.set([P])}}function j(P,Ce){return P+gr<H?P+Ce:P+Ce-gr}function le(P,Ce,Le){return P+Le<X?P+Ce:P+Ce-Wt}function ce(P,Ce){return Le=>{var pe,Be,Ge;let F=Ve("#line-chart-tooltip"),ne=Wt+M.length*cd;if(F.append("rect").attr("width",gr).attr("height",ne).attr("x",j(Le.layerX,An)).attr("y",le(Le.layerY,An,ne)),F.append("text").attr("class","title").attr("x",j(Le.layerX,qt)).attr("y",le(Le.layerY,ci,ne)).style("fill",Ce?tn:nn).text(`${P.year} `+(Ce?"Export":"Import")),g.size>0){for(let Re=0;Re<M.length;Re++){let z=(pe=i==null?void 0:i.get(P.year))==null?void 0:pe.filter(Oe=>Oe.product.name==M[Re])[0];F.append("text").attr("x",j(Le.layerX,qt)).attr("y",le(Le.layerY,Tn+(Re+1)*Sn,ne)).text(`${M[Re]}: ${D(Ce?(Be=z==null?void 0:z.export_value)!=null?Be:0:(Ge=z==null?void 0:z.import_value)!=null?Ge:0)}`)}F.append("text").attr("x",j(Le.layerX,qt)).attr("y",le(Le.layerY,Tn+(M.length+1)*Sn,ne)).style("font-weight","bold").text(`Selected Total:  ${D(Ce?P.export_value:P.import_value)}`)}else F.append("text").attr("x",j(Le.layerX,qt)).attr("y",le(Le.layerY,Tn+Sn,ne)).text((g.size==0?"Total: ":"Selected Total: ")+`${D(Ce?P.export_value:P.import_value)}`),F.append("text").attr("x",j(Le.layerX,qt)).attr("y",le(Le.layerY,Tn+2*Sn,ne)).text("Sectors: All")}}function ue(P){return Ce=>{let Le=Ve("#line-chart-tooltip"),F=P.export_value-P.import_value;Le.append("rect").attr("id","tooltip-rect").attr("width",gr).attr("height",Wt).attr("x",j(Ce.layerX,An)).attr("y",le(Ce.layerY,An,Wt)),Le.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",j(Ce.layerX,qt)).attr("y",le(Ce.layerY,ci,Wt)).style("fill",F<0?zr:Yr).text(`${P.year} `+(F<0?"Deficit":"Surplus")),Le.append("text").attr("id","tooltip-text2").attr("x",j(Ce.layerX,qt)).attr("y",le(Ce.layerY,Tn+Sn,Wt)).text((g.size>0?"Selected ":"")+`Total: ${D(Math.abs(P.export_value-P.import_value))}`)}}function ve(){return P=>{Ve("#tooltip-rect").attr("x",j(P.layerX,An)).attr("y",le(P.layerY,An,Wt)),Ve("#tooltip-text1").attr("x",j(P.layerX,qt)).attr("y",le(P.layerY,ci,Wt)),Ve("#tooltip-text2").attr("x",j(P.layerX,qt)).attr("y",le(P.layerY,Tn+Sn,Wt))}}function x(){return P=>{Ve("#line-chart-tooltip").selectAll("rect").remove(),Ve("#line-chart-tooltip").selectAll("text").remove()}}function ge(P){_t.call(this,e,P)}function Ae(P){_t.call(this,e,P)}function Se(P){_t.call(this,e,P)}function ye(P){_t.call(this,e,P)}function R(P){_t.call(this,e,P)}function $(P){_t.call(this,e,P)}function C(P){_t.call(this,e,P)}function Y(P){_t.call(this,e,P)}function Z(P){_t.call(this,e,P)}function q(P){ht[P?"unshift":"push"](()=>{G=P,n(7,G)})}function se(P){ht[P?"unshift":"push"](()=>{L=P,n(4,L)})}function De(P){ht[P?"unshift":"push"](()=>{O=P,n(5,O)})}function Fe(P){ht[P?"unshift":"push"](()=>{S=P,n(6,S)})}function ae(P){ht[P?"unshift":"push"](()=>{B=P,n(8,B)})}function Me(P){ht[P?"unshift":"push"](()=>{U=P,n(9,U)})}function ke(){H=this.clientWidth,X=this.clientHeight,n(2,H),n(3,X)}return e.$$set=P=>{"data"in P&&n(25,m=P.data)},e.$$.update=()=>{var P,Ce,Le,F,ne,pe,Be,Ge,Re;if(e.$$.dirty[0]&33554432&&n(26,{bilateralData:w,locationData:k,productData:A,country1_id:p,country2_id:b}=m,w,(n(0,k),n(25,m)),(n(27,A),n(25,m)),(n(28,p),n(25,m)),(n(1,b),n(25,m))),e.$$.dirty[0]&469762051|e.$$.dirty[1]&1&&n(15,r=Array.from((Le=(Ce=(P=w==null?void 0:w.get(p))==null?void 0:P.get(b))==null?void 0:Ce.entries())!=null?Le:new Array).map(z=>{let Oe=z[0],V=z[1];return V=g.size==0?V:V.filter(J=>g.has(J.product_id)),V.reduce((J,fe)=>(J.export_value+=fe.export_value,J.import_value+=fe.import_value,J),new Zt(k,A,{location_id:p,partner_id:b,product_id:0,year:Oe,export_value:0,import_value:0}))}).sort((z,Oe)=>z.year-Oe.year)),e.$$.dirty[0]&335544322&&(i=(F=w==null?void 0:w.get(p))==null?void 0:F.get(b)),e.$$.dirty[0]&32772&&n(14,a=Zn().domain(lo(r,z=>z.year)).range([cn+xn/2,H-Vt-xn/2])),e.$$.dirty[0]&32776&&n(13,l=Zn().domain([0,(ne=qn(r,z=>Math.max(z.export_value,z.import_value)))!=null?ne:0]).range([X-lt,lt+mr]).nice()),e.$$.dirty[0]&16384&&n(30,o=z=>{if((z==null?void 0:z.selection)===null||(z==null?void 0:z.selection[1])-(z==null?void 0:z.selection[0])<5)n(16,T=!1),fn.set([2020]);else{n(16,T=!0);let Oe=z.selection;const V=Oe[0],J=Oe[1];let fe=Math.ceil(a.invert(V)),Ke=Math.floor(a.invert(J)),Ue=[];for(let Je=fe;Je<=Ke;Je++)Ue.push(Je);fn.set(Ue)}}),e.$$.dirty[0]&1073741836&&n(29,s=ih().extent([[cn-1,lt+10],[H-Vt+1,X-lt]]).on("start brush end",o)),e.$$.dirty[0]&536871040&&Ve(G).call(s),e.$$.dirty[0]&32768&&n(12,u=(pe=qn(r,z=>z.export_value-z.import_value))!=null?pe:0),e.$$.dirty[0]&32768&&n(11,h=(Be=gl(r,z=>z.export_value-z.import_value))!=null?Be:0),e.$$.dirty[0]&32776&&n(10,c=Zn().domain([(Ge=gl(r,z=>z.export_value-z.import_value))!=null?Ge:0,(Re=qn(r,z=>z.export_value-z.import_value))!=null?Re:0]).range([X-lt,lt+mr]).nice()),e.$$.dirty[0]&25712){let z=oo(a).tickFormat(en("d"));Ve(L).transition().call(z).select(".domain").attr("stroke-width",0);let Oe=Ts(l).tickFormat(J=>D(J));Ve(O).transition().call(Oe);let V=As(c).tickFormat(J=>D(J));Ve(S).transition().call(V)}if(e.$$.dirty[0]&57600){let z=Ri();r.length>0&&(r.sort(Oe=>Oe.year),z.moveTo(a(r[0].year),l(r[0].export_value))),r.forEach(Oe=>{z.lineTo(a(Oe.year),l(Oe.export_value))}),Ve(B).transition().attr("d",z.toString())}if(e.$$.dirty[0]&57856){let z=Ri();r.length>0&&z.moveTo(a(r[0].year),l(r[0].import_value)),r.forEach(Oe=>{z.lineTo(a(Oe.year),l(Oe.import_value))}),Ve(U).transition().attr("d",z.toString())}e.$$.dirty[0]&134217728|e.$$.dirty[1]&1&&(M=g.size==0?["All"]:Array.from(g.values()).map(z=>{var Oe,V;return(V=(Oe=A==null?void 0:A.get(z))==null?void 0:Oe.name)!=null?V:"something"}).sort()),e.$$.dirty[0]&7168&&n(18,d=z=>z.export_value<z.import_value?u<0?lt+mr:c(0):(h>0,c(z.export_value-z.import_value))),e.$$.dirty[0]&7176&&n(17,_=z=>z.export_value<z.import_value?u<0?c(z.export_value-z.import_value)-lt-mr:c(z.export_value-z.import_value)-c(0):h>0?X-lt-c(z.export_value-z.import_value):c(0)-c(z.export_value-z.import_value))},[k,b,H,X,L,O,S,G,B,U,c,h,u,l,a,r,T,_,d,E,oe,ce,ue,ve,x,m,w,A,p,s,o,g,ge,Ae,Se,ye,R,$,C,Y,Z,q,se,De,Fe,ae,Me,ke]}class gd extends Ct{constructor(t){super(),Nt(this,t,md,fd,Lt,{data:25},null,[-1,-1])}}const{Map:pd}=is;function Ga(e,t,n){const r=e.slice();return r[38]=t[n],r[40]=n,r}function hi(e){const t=e.slice(),n=Math.max(xa+t[5].length*yd,xa+10+(t[0].product.name.length-20)*8);return t[37]=n,t}function Ua(e,t,n){const r=e.slice();return r[41]=t[n],r[40]=n,r}function Ya(e){let t,n,r,i=e[41].x1-e[41].x0>0&&e[41].y1-e[41].y0>0&&za(e),a=e[41].y1-e[41].y0>12&&e[41].x1-e[41].x0>10&&Xa(e);return{c(){t=re("g"),i&&i.c(),n=Te(),a&&a.c(),this.h()},l(l){t=ie(l,"g",{class:!0,transform:!0});var o=N(t);i&&i.l(o),n=Te(),a&&a.l(o),o.forEach(y),this.h()},h(){f(t,"class","treemap-inner svelte-uu3mm6"),f(t,"transform",r=`translate(${e[41].x0},${e[41].y0})`)},m(l,o){K(l,t,o),i&&i.m(t,null),I(t,n),a&&a.m(t,null)},p(l,o){l[41].x1-l[41].x0>0&&l[41].y1-l[41].y0>0?i?i.p(l,o):(i=za(l),i.c(),i.m(t,n)):i&&(i.d(1),i=null),l[41].y1-l[41].y0>12&&l[41].x1-l[41].x0>10?a?a.p(l,o):(a=Xa(l),a.c(),a.m(t,null)):a&&(a.d(1),a=null),o[0]&2048&&r!==(r=`translate(${l[41].x0},${l[41].y0})`)&&f(t,"transform",r)},d(l){l&&y(t),i&&i.d(),a&&a.d()}}}function za(e){let t,n,r,i,a,l;return{c(){t=re("rect"),this.h()},l(o){t=ie(o,"rect",{class:!0,width:!0,height:!0,fill:!0}),N(t).forEach(y),this.h()},h(){var o,s,u,h;f(t,"class","leaf svelte-uu3mm6"),f(t,"width",n=e[41].x1-e[41].x0),f(t,"height",r=e[41].y1-e[41].y0),f(t,"fill",i=e[6]?e[6]((h=(u=(s=(o=e[41].data)==null?void 0:o.product)==null?void 0:s.parent)==null?void 0:u.name)!=null?h:""):"white")},m(o,s){K(o,t,s),a||(l=[W(t,"keydown",wd),W(t,"click",function(){We(e[18](e[41].data))&&e[18](e[41].data).apply(this,arguments)}),W(t,"focus",e[33]),W(t,"mouseover",function(){We(e[16](e[41].data))&&e[16](e[41].data).apply(this,arguments)}),W(t,"mousemove",function(){We(e[16](e[41].data))&&e[16](e[41].data).apply(this,arguments)}),W(t,"mouseleave",e[17])],a=!0)},p(o,s){var u,h,c,d;e=o,s[0]&2048&&n!==(n=e[41].x1-e[41].x0)&&f(t,"width",n),s[0]&2048&&r!==(r=e[41].y1-e[41].y0)&&f(t,"height",r),s[0]&2112&&i!==(i=e[6]?e[6]((d=(c=(h=(u=e[41].data)==null?void 0:u.product)==null?void 0:h.parent)==null?void 0:c.name)!=null?d:""):"white")&&f(t,"fill",i)},d(o){o&&y(t),a=!1,bt(l)}}}function Xa(e){var g,E;let t,n,r=((E=(g=e[41].data)==null?void 0:g.product.name)!=null?E:"")+"",i,a,l,o=e[13](e[4]?e[41].data.export_value:e[41].data.import_value)+"",s,u,h,c,d,_;return{c(){t=re("foreignObject"),n=ee("div"),i=_e(r),a=we(),l=ee("div"),s=_e(o),u=we(),this.h()},l(m){t=ie(m,"foreignObject",{x:!0,y:!0,width:!0,height:!0,class:!0});var w=N(t);n=te(w,"DIV",{class:!0});var k=N(n);i=me(k,r),a=be(k),k.forEach(y),l=te(w,"DIV",{class:!0});var A=N(l);s=me(A,o),u=be(A),A.forEach(y),w.forEach(y),this.h()},h(){f(n,"class","label svelte-uu3mm6"),f(l,"class","label-num svelte-uu3mm6"),f(t,"x","3"),f(t,"y","1"),f(t,"width",h=e[41].x1-e[41].x0-3),f(t,"height",c=e[41].y1-e[41].y0-1),f(t,"class","svelte-uu3mm6")},m(m,w){K(m,t,w),I(t,n),I(n,i),I(n,a),I(t,l),I(l,s),I(l,u),d||(_=[W(n,"keydown",bd),W(n,"click",function(){We(e[18](e[41].data))&&e[18](e[41].data).apply(this,arguments)}),W(n,"focus",e[32]),W(n,"mouseover",function(){We(e[16](e[41].data))&&e[16](e[41].data).apply(this,arguments)}),W(n,"mousemove",function(){We(e[16](e[41].data))&&e[16](e[41].data).apply(this,arguments)}),W(n,"mouseleave",e[17]),W(t,"keydown",kd),W(t,"click",function(){We(e[18](e[41].data))&&e[18](e[41].data).apply(this,arguments)}),W(t,"focus",e[31]),W(t,"mouseover",function(){We(e[16](e[41].data))&&e[16](e[41].data).apply(this,arguments)}),W(t,"mousemove",function(){We(e[16](e[41].data))&&e[16](e[41].data).apply(this,arguments)}),W(t,"mouseleave",e[17])],d=!0)},p(m,w){var k,A;e=m,w[0]&2048&&r!==(r=((A=(k=e[41].data)==null?void 0:k.product.name)!=null?A:"")+"")&&Xe(i,r),w[0]&2064&&o!==(o=e[13](e[4]?e[41].data.export_value:e[41].data.import_value)+"")&&Xe(s,o),w[0]&2048&&h!==(h=e[41].x1-e[41].x0-3)&&f(t,"width",h),w[0]&2048&&c!==(c=e[41].y1-e[41].y0-1)&&f(t,"height",c)},d(m){m&&y(t),d=!1,bt(_)}}}function Ka(e,t){let n,r,i=t[5].length>0&&Ya(t);return{key:e,first:null,c(){n=Te(),i&&i.c(),r=Te(),this.h()},l(a){n=Te(),i&&i.l(a),r=Te(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[5].length>0?i?i.p(t,l):(i=Ya(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&y(n),i&&i.d(a),a&&y(r)}}}function Wa(e){let t,n,r,i,a,l=e[12],o=[];for(let s=0;s<l.length;s+=1)o[s]=qa(Ga(e,l,s));return{c(){t=re("g"),n=re("rect");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){t=ie(s,"g",{id:!0,class:!0});var u=N(t);n=ie(u,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0}),N(n).forEach(y);for(let h=0;h<o.length;h+=1)o[h].l(u);u.forEach(y),this.h()},h(){f(n,"id","tooltip-rect"),f(n,"x",r=e[14](e[8],pr,e[37])),f(n,"y",i=e[15](e[9],pr)),f(n,"width",a=e[37]),f(n,"height",Bi),f(t,"id","treemap-tooltip"),f(t,"class","tooltip svelte-uu3mm6")},m(s,u){K(s,t,u),I(t,n);for(let h=0;h<o.length;h+=1)o[h].m(t,null)},p(s,u){if(u[0]&289&&r!==(r=s[14](s[8],pr,s[37]))&&f(n,"x",r),u[0]&512&&i!==(i=s[15](s[9],pr))&&f(n,"y",i),u[0]&33&&a!==(a=s[37])&&f(n,"width",a),u[0]&54049){l=s[12];let h;for(h=0;h<l.length;h+=1){const c=Ga(s,l,h);o[h]?o[h].p(c,u):(o[h]=qa(c),o[h].c(),o[h].m(t,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=l.length}},d(s){s&&y(t),Kr(o,s)}}}function qa(e){let t,n=e[38]+"",r,i,a;return{c(){t=re("text"),r=_e(n),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"font-weight":!0,class:!0});var o=N(t);r=me(o,n),o.forEach(y),this.h()},h(){f(t,"x",i=e[14](e[8],Ja,e[37])),f(t,"y",a=e[15](e[9],Qa+e[40]*ja)),f(t,"font-weight",e[40]==0?"bold":"regular"),f(t,"class","svelte-uu3mm6")},m(l,o){K(l,t,o),I(t,r)},p(l,o){o[0]&4096&&n!==(n=l[38]+"")&&Xe(r,n),o[0]&289&&i!==(i=l[14](l[8],Ja,l[37]))&&f(t,"x",i),o[0]&512&&a!==(a=l[15](l[9],Qa+l[40]*ja))&&f(t,"y",a)},d(l){l&&y(t)}}}function Za(e){let t,n,r,i=e[7]?"Loading...":"No valid data for this pair.",a,l,o;return{c(){t=re("rect"),r=re("text"),a=_e(i),this.h()},l(s){t=ie(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),N(t).forEach(y),r=ie(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=N(r);a=me(u,i),u.forEach(y),this.h()},h(){f(t,"x","0"),f(t,"y","0"),f(t,"width",e[1]),f(t,"height",e[2]),f(t,"fill",n=e[7]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),f(r,"x",l=e[1]/2),f(r,"y",o=e[2]/2),f(r,"alignment-baseline","central"),f(r,"text-anchor","middle")},m(s,u){K(s,t,u),K(s,r,u),I(r,a)},p(s,u){u[0]&2&&f(t,"width",s[1]),u[0]&4&&f(t,"height",s[2]),u[0]&128&&n!==(n=s[7]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&f(t,"fill",n),u[0]&128&&i!==(i=s[7]?"Loading...":"No valid data for this pair.")&&Xe(a,i),u[0]&2&&l!==(l=s[1]/2)&&f(r,"x",l),u[0]&4&&o!==(o=s[2]/2)&&f(r,"y",o)},d(s){s&&y(t),s&&y(r)}}}function vd(e){var d,_;let t,n,r,i=[],a=new pd,l,o,s=e[11];const u=g=>g[41].data.product_id;for(let g=0;g<s.length;g+=1){let E=Ua(e,s,g),m=u(E);a.set(m,i[g]=Ka(m,E))}let h=e[0]&&Wa(hi(e)),c=((_=(d=e[3])==null?void 0:d.length)!=null?_:0)===0&&Za(e);return{c(){t=ee("div"),n=re("svg"),r=re("g");for(let g=0;g<i.length;g+=1)i[g].c();h&&h.c(),l=Te(),c&&c.c(),this.h()},l(g){t=te(g,"DIV",{class:!0});var E=N(t);n=ie(E,"svg",{class:!0});var m=N(n);r=ie(m,"g",{class:!0});var w=N(r);for(let k=0;k<i.length;k+=1)i[k].l(w);w.forEach(y),h&&h.l(m),l=Te(),c&&c.l(m),m.forEach(y),E.forEach(y),this.h()},h(){f(r,"class","treemap svelte-uu3mm6"),f(n,"class","svelte-uu3mm6"),f(t,"class","viz-section-full svelte-uu3mm6"),pn(()=>e[35].call(t))},m(g,E){K(g,t,E),I(t,n),I(n,r);for(let m=0;m<i.length;m+=1)i[m].m(r,null);e[34](r),h&&h.m(n,null),I(n,l),c&&c.m(n,null),o=Wr(t,e[35].bind(t))},p(g,E){var m,w;E[0]&469104&&(s=g[11],i=$t(i,E,u,1,g,s,a,r,Ln,Ka,null,Ua)),g[0]?h?h.p(hi(g),E):(h=Wa(hi(g)),h.c(),h.m(n,l)):h&&(h.d(1),h=null),((w=(m=g[3])==null?void 0:m.length)!=null?w:0)===0?c?c.p(g,E):(c=Za(g),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},i:Pe,o:Pe,d(g){g&&y(t);for(let E=0;E<i.length;E+=1)i[E].d();e[34](null),h&&h.d(),c&&c.d(),o()}}}const pr=10,xa=120,yd=25,Bi=90,Ja=20,Qa=28,ja=15,wd=()=>{},bd=()=>{},kd=()=>{};function Ed(e,t,n){let r,i,a,l,o,s,u,h,c,d;Mt(e,ct,x=>n(30,h=x)),Mt(e,dn,x=>n(4,c=x)),Mt(e,fn,x=>n(5,d=x));const _=x=>en("$.3s")(x).replace(/G/,"B");`${Math.random().toString(16).slice(2)}`;let{data:g}=t,{country1:E,country2:m,productColorScale:w,drilldownBilateral:k,loadingDrilldown:A,locationData:p,productData:b}=g,H=0,X=0,D=null,L=0,O=0,S,G=new Array;function B(x,ge,Ae){return x+Ae<L?x+ge:x+ge-Ae}function U(x,ge){return x+Bi<O?x+ge:x+ge-Bi}function T(x){return ge=>{n(8,H=ge.layerX),n(9,X=ge.layerY),n(0,D=x)}}function M(){n(0,D=null)}function oe(x){return ge=>{var Ae,Se,ye,R;((Ae=x==null?void 0:x.product)==null?void 0:Ae.parent)&&h.has((ye=(Se=x==null?void 0:x.product)==null?void 0:Se.parent)==null?void 0:ye.id)?ct.update($=>{var C,Y,Z;return $.delete((Z=(Y=(C=x==null?void 0:x.product)==null?void 0:C.parent)==null?void 0:Y.id)!=null?Z:-1),$}):((R=x==null?void 0:x.product)==null?void 0:R.parent)!=null&&ct.update($=>{var C,Y,Z;return $.add((Z=(Y=(C=x==null?void 0:x.product)==null?void 0:C.parent)==null?void 0:Y.id)!=null?Z:-1),$})}}function j(x){_t.call(this,e,x)}function le(x){_t.call(this,e,x)}function ce(x){_t.call(this,e,x)}function ue(x){ht[x?"unshift":"push"](()=>{S=x,n(10,S)})}function ve(){L=this.clientWidth,O=this.clientHeight,n(1,L),n(2,O)}return e.$$set=x=>{"data"in x&&n(19,g=x.data)},e.$$.update=()=>{var x,ge,Ae,Se,ye,R,$,C;if(e.$$.dirty[0]&524288&&n(22,{drilldownBilateral:k,productColorScale:w,country1:E,country2:m,loadingDrilldown:A,locationData:p,productData:b}=g,k,(n(6,w),n(19,g)),(n(20,E),n(19,g)),(n(21,m),n(19,g)),(n(7,A),n(19,g)),(n(23,p),n(19,g)),(n(24,b),n(19,g))),e.$$.dirty[0]&6291456&&n(29,i=k==null?void 0:k.get((x=m==null?void 0:m.id)!=null?x:0)),e.$$.dirty[0]&536870944&&n(25,a=d.map(Y=>{var Z;return(Z=i==null?void 0:i.get(Y))!=null?Z:new Array}).flat()),e.$$.dirty[0]&61865984&&n(26,l=Array.from(gi(a,Y=>Y.reduce((Z,q)=>(Z.export_value+=q.export_value,Z.import_value+=q.import_value,Z),new Zt(p,b,{location_id:E,partner_id:m,product_id:Y[0].product_id,year:0,export_value:0,import_value:0})),Y=>Y.product_id).values())),e.$$.dirty[0]&67108864&&n(28,o=Mr(l,Y=>Y.export_value)),e.$$.dirty[0]&67108864&&n(27,s=Mr(l,Y=>Y.import_value)),e.$$.dirty[0]&402653233&&n(12,r=[`${D==null?void 0:D.product.name}`,`Sector: ${(Se=(Ae=(ge=D==null?void 0:D.product)==null?void 0:ge.parent)==null?void 0:Ae.name)!=null?Se:""}`,(c?"Export: ":"Import: ")+`${_(c?(ye=D==null?void 0:D.export_value)!=null?ye:0:(R=D==null?void 0:D.import_value)!=null?R:0)}`,`Share: ${en(".2%")(c?(($=D==null?void 0:D.export_value)!=null?$:0)/o:((C=D==null?void 0:D.import_value)!=null?C:0)/s)}`,(d.length>1?"Years: ":"Year: ")+`${d.join(", ")}`]),e.$$.dirty[0]&1202716672&&n(3,u=h.size==0?l:Array.from(gi(a.filter(Y=>h.has(Y.product.parent_id)),Y=>Y.reduce((Z,q)=>(Z.export_value+=q.export_value,Z.import_value+=q.import_value,Z),new Zt(p,b,{location_id:E,partner_id:m,product_id:Y[0].product_id,year:0,export_value:0,import_value:0})),Y=>Y.product_id).values())),e.$$.dirty[0]&1076887582&&u&&u.length>0){let Y=[];if(h.size==1){let q=h.entries().next().value[1],se=new Zt(new Map,new Map,{location_id:E,partner_id:m,product_id:q,year:0,export_value:0,import_value:0});se.product=new Tr({product_id:q,name:"Sector",level:-1,parent_id:-1}),se.product.parent_id=null,Y.push(se)}else{let q=new Zt(new Map,new Map,{location_id:E,partner_id:m,product_id:-1,year:0,export_value:0,import_value:0});q.product=new Tr({product_id:-1,name:"All",level:-1,parent_id:-1}),q.product.parent_id=null,Y.push(q);let se=mi(u,De=>{var Fe,ae;return(ae=(Fe=De.product)==null?void 0:Fe.parent_id)!=null?ae:-1});if(se.size>1)for(let[De,Fe]of se){let ae=new Zt(new Map,new Map,{location_id:E,partner_id:m,product_id:De,year:0,export_value:0,import_value:0});ae.product=new Tr({product_id:De,name:"Something",level:0,parent_id:-1}),Y.push(ae)}}Y=Y.concat(u);let Z=Qh().id(q=>{var se;return(se=q.product)==null?void 0:se.id}).parentId(q=>{var se;return(se=q.product)==null?void 0:se.parent_id})(Y);Z.sum(q=>Math.max(0,q[c?"export_value":"import_value"])),r0().tile(i0).size([L,O]).padding(2)(Z),n(11,G=Z.leaves())}},[D,L,O,u,c,d,w,A,H,X,S,G,r,_,B,U,T,M,oe,g,E,m,k,p,b,a,l,s,o,i,h,j,le,ce,ue,ve]}class Id extends Ct{constructor(t){super(),Nt(this,t,Ed,vd,Lt,{data:19},null,[-1,-1])}}const Ad=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),vr=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=Ad.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function Td(e){let t,n,r,i,a,l;return{c(){t=ee("div"),n=ee("h3"),r=_e("Loading data..."),i=we(),a=re("svg"),l=re("circle"),this.h()},l(o){t=te(o,"DIV",{class:!0});var s=N(t);n=te(s,"H3",{});var u=N(n);r=me(u,"Loading data..."),u.forEach(y),i=be(s),a=ie(s,"svg",{class:!0,viewBox:!0});var h=N(a);l=ie(h,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),N(l).forEach(y),h.forEach(y),s.forEach(y),this.h()},h(){f(l,"class","path svelte-ein6c0"),f(l,"cx","25"),f(l,"cy","25"),f(l,"r","20"),f(l,"fill","none"),f(l,"stroke-width","5"),f(a,"class","spinner svelte-ein6c0"),f(a,"viewBox","0 0 50 50"),f(t,"class","loading svelte-ein6c0")},m(o,s){K(o,t,s),I(t,n),I(n,r),I(t,i),I(t,a),I(a,l)},p:Pe,i:Pe,o:Pe,d(o){o&&y(t)}}}function Sd(e){var Hn,nr,yn,rr,ir,lr;let t,n,r,i,a,l,o,s,u,h,c,d,_,g,E,m,w,k,A,p,b,H,X,D,L,O,S,G,B,U,T,M,oe,j,le,ce,ue,ve,x,ge,Ae,Se,ye,R,$,C,Y,Z,q,se,De,Fe,ae,Me,ke,P,Ce,Le=((Hn=e[2])==null?void 0:Hn.name)+"",F,ne,pe=e[8]?"export to ":"import from ",Be,Ge,Re,z=((nr=e[7])==null?void 0:nr.name)+"",Oe,V,J=e[9].length>1?`from ${e[9][0]} to ${e[9][e[9].length-1]}?`:`in ${e[9]}?`,fe,Ke,Ue,Je,at,et,Qe,gt,tt,Et,Dt,Jt,Bt,It,Pt,He,vn,Fn;g=new wa({props:{optionIdentifier:eo,labelIdentifier:to,items:Array.from(e[0].values()),value:e[2]}}),g.$on("select",e[11]),B=new wa({props:{optionIdentifier:eo,labelIdentifier:to,items:Array.from(e[0].values()),value:e[7]}}),B.$on("select",e[12]),x=new gd({props:{data:{bilateralData:e[4],country1_id:(rr=(yn=e[2])==null?void 0:yn.id)!=null?rr:0,country2_id:(lr=(ir=e[7])==null?void 0:ir.id)!=null?lr:0,productData:e[1],locationData:e[0]}}}),Ae=new od({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[4],loadingDrilldown:e[6],productColorScale:e[3],country1:e[2],country2:e[7]}}});let Ye=e[10].size>0&&$a(e);return et=new Id({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[3],country1:e[2],country2:e[7],drilldownBilateral:e[5],loadingDrilldown:e[6]}}}),{c(){t=ee("div"),n=ee("img"),i=we(),a=ee("div"),l=ee("div"),o=ee("div"),s=we(),u=ee("span"),h=_e("Country"),c=we(),d=ee("div"),_=we(),qe(g.$$.fragment),E=we(),m=ee("div"),w=ee("button"),k=_e("\u2194"),A=we(),p=ee("div"),b=ee("div"),H=ee("div"),X=we(),D=ee("span"),L=_e("Partner"),O=we(),S=ee("div"),G=we(),qe(B.$$.fragment),U=we(),T=ee("img"),oe=we(),j=ee("div"),le=we(),ce=ee("div"),ue=ee("div"),ve=ee("div"),qe(x.$$.fragment),ge=we(),qe(Ae.$$.fragment),Se=we(),ye=ee("div"),R=ee("div"),$=ee("span"),C=_e("Showing"),Y=we(),Z=ee("button"),q=_e("Exports"),se=we(),De=ee("button"),Fe=_e("Imports"),ae=we(),Me=ee("div"),ke=ee("h2"),P=_e(`What did
              `),Ce=ee("b"),F=_e(Le),ne=we(),Be=_e(pe),Ge=we(),Re=ee("b"),Oe=_e(z),V=we(),fe=_e(J),Ke=we(),Ue=ee("div"),Ye&&Ye.c(),Je=we(),at=ee("div"),qe(et.$$.fragment),Qe=we(),gt=ee("footer"),tt=ee("center"),Et=_e("A Bilateral Trade Exloration Tool by "),Dt=ee("b"),Jt=_e("Andrew Lee"),Bt=_e(` &
        `),It=ee("b"),Pt=_e("Franklin Yuan"),this.h()},l(Q){t=te(Q,"DIV",{class:!0});var Ee=N(t);n=te(Ee,"IMG",{class:!0,alt:!0,src:!0}),i=be(Ee),a=te(Ee,"DIV",{class:!0});var pt=N(a);l=te(pt,"DIV",{class:!0});var it=N(l);o=te(it,"DIV",{style:!0,class:!0}),N(o).forEach(y),s=be(it),u=te(it,"SPAN",{class:!0});var Gt=N(u);h=me(Gt,"Country"),Gt.forEach(y),c=be(it),d=te(it,"DIV",{style:!0,class:!0}),N(d).forEach(y),it.forEach(y),_=be(pt),yt(g.$$.fragment,pt),pt.forEach(y),E=be(Ee),m=te(Ee,"DIV",{class:!0});var Ut=N(m);w=te(Ut,"BUTTON",{class:!0});var ln=N(w);k=me(ln,"\u2194"),ln.forEach(y),Ut.forEach(y),A=be(Ee),p=te(Ee,"DIV",{class:!0});var Yt=N(p);b=te(Yt,"DIV",{class:!0});var At=N(b);H=te(At,"DIV",{style:!0,class:!0}),N(H).forEach(y),X=be(At),D=te(At,"SPAN",{class:!0});var an=N(D);L=me(an,"Partner"),an.forEach(y),O=be(At),S=te(At,"DIV",{style:!0,class:!0}),N(S).forEach(y),At.forEach(y),G=be(Yt),yt(B.$$.fragment,Yt),Yt.forEach(y),U=be(Ee),T=te(Ee,"IMG",{class:!0,alt:!0,src:!0}),Ee.forEach(y),oe=be(Q),j=te(Q,"DIV",{});var wn=N(j);wn.forEach(y),le=be(Q),ce=te(Q,"DIV",{id:!0,class:!0});var on=N(ce);ue=te(on,"DIV",{id:!0,class:!0});var v=N(ue);ve=te(v,"DIV",{class:!0});var he=N(ve);yt(x.$$.fragment,he),ge=be(he),yt(Ae.$$.fragment,he),he.forEach(y),Se=be(v),ye=te(v,"DIV",{class:!0});var Ne=N(ye);R=te(Ne,"DIV",{});var ze=N(R);$=te(ze,"SPAN",{});var vt=N($);C=me(vt,"Showing"),vt.forEach(y),Y=be(ze),Z=te(ze,"BUTTON",{class:!0});var kt=N(Z);q=me(kt,"Exports"),kt.forEach(y),se=be(ze),De=te(ze,"BUTTON",{class:!0});var tl=N(De);Fe=me(tl,"Imports"),tl.forEach(y),ze.forEach(y),ae=be(Ne),Me=te(Ne,"DIV",{});var nl=N(Me);ke=te(nl,"H2",{class:!0});var zt=N(ke);P=me(zt,`What did
              `),Ce=te(zt,"B",{});var rl=N(Ce);F=me(rl,Le),rl.forEach(y),ne=be(zt),Be=me(zt,pe),Ge=be(zt),Re=te(zt,"B",{});var il=N(Re);Oe=me(il,z),il.forEach(y),V=be(zt),fe=me(zt,J),zt.forEach(y),nl.forEach(y),Ke=be(Ne),Ue=te(Ne,"DIV",{class:!0});var ll=N(Ue);Ye&&Ye.l(ll),ll.forEach(y),Ne.forEach(y),Je=be(v),at=te(v,"DIV",{class:!0});var al=N(at);yt(et.$$.fragment,al),al.forEach(y),v.forEach(y),on.forEach(y),Qe=be(Q),gt=te(Q,"FOOTER",{class:!0});var ol=N(gt);tt=te(ol,"CENTER",{});var Bn=N(tt);Et=me(Bn,"A Bilateral Trade Exloration Tool by "),Dt=te(Bn,"B",{});var sl=N(Dt);Jt=me(sl,"Andrew Lee"),sl.forEach(y),Bt=me(Bn,` &
        `),It=te(Bn,"B",{});var ul=N(It);Pt=me(ul,"Franklin Yuan"),ul.forEach(y),Bn.forEach(y),ol.forEach(y),this.h()},h(){var Q,Ee,pt,it;f(n,"class","country-icon svelte-ein6c0"),f(n,"alt","Select a country"),ar(n.src,r=vr((Ee=(Q=e[2])==null?void 0:Q.code)!=null?Ee:"ATA"))||f(n,"src",r),f(o,"style",`background-color:${tn}`),f(o,"class","svelte-ein6c0"),f(u,"class","svelte-ein6c0"),f(d,"style",`background-color:${tn}`),f(d,"class","svelte-ein6c0"),f(l,"class","country-title svelte-ein6c0"),f(a,"class","dropdown svelte-ein6c0"),f(w,"class","switch-btn svelte-ein6c0"),f(m,"class","switch-btn-container svelte-ein6c0"),f(H,"style",`background-color:${nn}`),f(H,"class","svelte-ein6c0"),f(D,"class","svelte-ein6c0"),f(S,"style",`background-color:${nn}`),f(S,"class","svelte-ein6c0"),f(b,"class","country-title svelte-ein6c0"),f(p,"class","dropdown svelte-ein6c0"),f(T,"class","country-icon svelte-ein6c0"),f(T,"alt","Select a partner"),ar(T.src,M=vr((it=(pt=e[7])==null?void 0:pt.code)!=null?it:"ATA"))||f(T,"src",M),f(t,"class","selectors svelte-ein6c0"),f(ve,"class","viz-row svelte-ein6c0"),f(Z,"class","svelte-ein6c0"),$e(Z,"btn-active",e[8]),$e(Z,"btn-inactive",!e[8]),f(De,"class","svelte-ein6c0"),$e(De,"btn-active",!e[8]),$e(De,"btn-inactive",e[8]),f(ke,"class","chart-header svelte-ein6c0"),f(Ue,"class","clear-sectors svelte-ein6c0"),f(ye,"class","spacer svelte-ein6c0"),f(at,"class","viz-row svelte-ein6c0"),f(ue,"id","content"),f(ue,"class","svelte-ein6c0"),f(ce,"id","container"),f(ce,"class","svelte-ein6c0"),f(gt,"class","svelte-ein6c0")},m(Q,Ee){K(Q,t,Ee),I(t,n),I(t,i),I(t,a),I(a,l),I(l,o),I(l,s),I(l,u),I(u,h),I(l,c),I(l,d),I(a,_),Ze(g,a,null),I(t,E),I(t,m),I(m,w),I(w,k),I(t,A),I(t,p),I(p,b),I(b,H),I(b,X),I(b,D),I(D,L),I(b,O),I(b,S),I(p,G),Ze(B,p,null),I(t,U),I(t,T),K(Q,oe,Ee),K(Q,j,Ee),K(Q,le,Ee),K(Q,ce,Ee),I(ce,ue),I(ue,ve),Ze(x,ve,null),I(ve,ge),Ze(Ae,ve,null),I(ue,Se),I(ue,ye),I(ye,R),I(R,$),I($,C),I(R,Y),I(R,Z),I(Z,q),I(R,se),I(R,De),I(De,Fe),I(ye,ae),I(ye,Me),I(Me,ke),I(ke,P),I(ke,Ce),I(Ce,F),I(ke,ne),I(ke,Be),I(ke,Ge),I(ke,Re),I(Re,Oe),I(ke,V),I(ke,fe),I(ye,Ke),I(ye,Ue),Ye&&Ye.m(Ue,null),I(ue,Je),I(ue,at),Ze(et,at,null),K(Q,Qe,Ee),K(Q,gt,Ee),I(gt,tt),I(tt,Et),I(tt,Dt),I(Dt,Jt),I(tt,Bt),I(tt,It),I(It,Pt),He=!0,vn||(Fn=[W(w,"click",e[13]),W(Z,"click",e[14]),W(De,"click",e[15])],vn=!0)},p(Q,Ee){var Yt,At,an,wn,on,v,he,Ne,ze,vt;(!He||Ee&4&&!ar(n.src,r=vr((At=(Yt=Q[2])==null?void 0:Yt.code)!=null?At:"ATA")))&&f(n,"src",r);const pt={};Ee&1&&(pt.items=Array.from(Q[0].values())),Ee&4&&(pt.value=Q[2]),g.$set(pt);const it={};Ee&1&&(it.items=Array.from(Q[0].values())),Ee&128&&(it.value=Q[7]),B.$set(it),(!He||Ee&128&&!ar(T.src,M=vr((wn=(an=Q[7])==null?void 0:an.code)!=null?wn:"ATA")))&&f(T,"src",M);const Gt={};Ee&151&&(Gt.data={bilateralData:Q[4],country1_id:(v=(on=Q[2])==null?void 0:on.id)!=null?v:0,country2_id:(Ne=(he=Q[7])==null?void 0:he.id)!=null?Ne:0,productData:Q[1],locationData:Q[0]}),x.$set(Gt);const Ut={};Ee&223&&(Ut.data={productData:Q[1],locationData:Q[0],bilateralData:Q[4],loadingDrilldown:Q[6],productColorScale:Q[3],country1:Q[2],country2:Q[7]}),Ae.$set(Ut),(!He||Ee&256)&&$e(Z,"btn-active",Q[8]),(!He||Ee&256)&&$e(Z,"btn-inactive",!Q[8]),(!He||Ee&256)&&$e(De,"btn-active",!Q[8]),(!He||Ee&256)&&$e(De,"btn-inactive",Q[8]),(!He||Ee&4)&&Le!==(Le=((ze=Q[2])==null?void 0:ze.name)+"")&&Xe(F,Le),(!He||Ee&256)&&pe!==(pe=Q[8]?"export to ":"import from ")&&Xe(Be,pe),(!He||Ee&128)&&z!==(z=((vt=Q[7])==null?void 0:vt.name)+"")&&Xe(Oe,z),(!He||Ee&512)&&J!==(J=Q[9].length>1?`from ${Q[9][0]} to ${Q[9][Q[9].length-1]}?`:`in ${Q[9]}?`)&&Xe(fe,J),Q[10].size>0?Ye?(Ye.p(Q,Ee),Ee&1024&&de(Ye,1)):(Ye=$a(Q),Ye.c(),de(Ye,1),Ye.m(Ue,null)):Ye&&(nt(),Ie(Ye,1,1,()=>{Ye=null}),rt());const ln={};Ee&239&&(ln.data={locationData:Q[0],productData:Q[1],productColorScale:Q[3],country1:Q[2],country2:Q[7],drilldownBilateral:Q[5],loadingDrilldown:Q[6]}),et.$set(ln)},i(Q){He||(de(g.$$.fragment,Q),de(B.$$.fragment,Q),de(x.$$.fragment,Q),de(Ae.$$.fragment,Q),de(Ye),de(et.$$.fragment,Q),He=!0)},o(Q){Ie(g.$$.fragment,Q),Ie(B.$$.fragment,Q),Ie(x.$$.fragment,Q),Ie(Ae.$$.fragment,Q),Ie(Ye),Ie(et.$$.fragment,Q),He=!1},d(Q){Q&&y(t),xe(g),xe(B),Q&&y(oe),Q&&y(j),Q&&y(le),Q&&y(ce),xe(x),xe(Ae),Ye&&Ye.d(),xe(et),Q&&y(Qe),Q&&y(gt),vn=!1,bt(Fn)}}}function $a(e){let t,n,r,i,a,l,o;return{c(){t=ee("button"),n=_e("Clear Sector Selection"),this.h()},l(s){t=te(s,"BUTTON",{height:!0,class:!0});var u=N(t);n=me(u,"Clear Sector Selection"),u.forEach(y),this.h()},h(){f(t,"height","10"),f(t,"class","svelte-ein6c0")},m(s,u){K(s,t,u),I(t,n),a=!0,l||(o=W(t,"click",e[16]),l=!0)},p:Pe,i(s){a||(pn(()=>{i&&i.end(1),r=Yi(t,Ur,{duration:200}),r.start()}),a=!0)},o(s){r&&r.invalidate(),i=as(t,Ur,{duration:200}),a=!1},d(s){s&&y(t),s&&i&&i.end(),l=!1,o()}}}function Md(e){let t,n,r,i,a,l=or.exports.icons["book-open"].toSvg()+"",o,s,u=or.exports.icons.youtube.toSvg()+"",h,c,d=or.exports.icons.database.toSvg()+"",_,g,E=or.exports.icons.github.toSvg()+"",m,w,k,A,p,b,H,X;const D=[Sd,Td],L=[];function O(S,G){return S[0]&&S[4]&&S[1]?0:1}return b=O(e),H=L[b]=D[b](e),{c(){t=ee("link"),n=we(),r=ee("div"),i=ee("div"),a=ee("a"),o=we(),s=ee("a"),h=we(),c=ee("a"),_=we(),g=ee("a"),m=we(),w=ee("div"),k=ee("h1"),A=_e("Commerce Among Nations"),p=we(),H.c(),this.h()},l(S){const G=ls("svelte-tu7v51",document.head);t=te(G,"LINK",{rel:!0,href:!0}),G.forEach(y),n=be(S),r=te(S,"DIV",{class:!0});var B=N(r);i=te(B,"DIV",{class:!0});var U=N(i);a=te(U,"A",{href:!0,title:!0,class:!0});var T=N(a);T.forEach(y),o=be(U),s=te(U,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var M=N(s);M.forEach(y),h=be(U),c=te(U,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var oe=N(c);oe.forEach(y),_=be(U),g=te(U,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var j=N(g);j.forEach(y),U.forEach(y),m=be(B),w=te(B,"DIV",{class:!0});var le=N(w);k=te(le,"H1",{class:!0});var ce=N(k);A=me(ce,"Commerce Among Nations"),ce.forEach(y),le.forEach(y),p=be(B),H.l(B),B.forEach(y),this.h()},h(){f(t,"rel","icon"),f(t,"href",`${Mn}/favicon.png`),document.title="Commerce Among Nations",f(a,"href",Mn+"/processbook"),f(a,"title","process-book"),f(a,"class","svelte-ein6c0"),f(s,"href","https://www.youtube.com/watch?v=OXdyF8Prxyw"),f(s,"title","screencast"),f(s,"target","_blank"),f(s,"rel","noreferrer"),f(s,"class","svelte-ein6c0"),f(c,"href","https://dataverse.harvard.edu/dataverse/atlas"),f(c,"title","data"),f(c,"target","_blank"),f(c,"rel","noreferrer"),f(c,"class","svelte-ein6c0"),f(g,"href","https://github.com/candrewlee14/data-viz-project"),f(g,"title","github"),f(g,"target","_blank"),f(g,"rel","noreferrer"),f(g,"class","svelte-ein6c0"),f(i,"class","nav svelte-ein6c0"),f(k,"class","svelte-ein6c0"),f(w,"class","heading svelte-ein6c0"),f(r,"class","outer svelte-ein6c0")},m(S,G){I(document.head,t),K(S,n,G),K(S,r,G),I(r,i),I(i,a),a.innerHTML=l,I(i,o),I(i,s),s.innerHTML=u,I(i,h),I(i,c),c.innerHTML=d,I(i,_),I(i,g),g.innerHTML=E,I(r,m),I(r,w),I(w,k),I(k,A),I(r,p),L[b].m(r,null),X=!0},p(S,[G]){let B=b;b=O(S),b===B?L[b].p(S,G):(nt(),Ie(L[B],1,1,()=>{L[B]=null}),rt(),H=L[b],H?H.p(S,G):(H=L[b]=D[b](S),H.c()),de(H,1),H.m(r,null))},i(S){X||(de(H),X=!0)},o(S){Ie(H),X=!1},d(S){y(t),S&&y(n),S&&y(r),L[b].d()}}}const eo="id",to="name",Cd=231,Nd=43;function Ld(e,t,n){let r,i,a,l,o;Mt(e,dn,p=>n(8,a=p)),Mt(e,fn,p=>n(9,l=p)),Mt(e,ct,p=>n(10,o=p));const s=p=>{let b=p.detail;n(2,r=c.get(b.id))},u=p=>{let b=p.detail;n(7,i=c.get(b.id))};let h,c=new Map,d=new Map,_,g,E=!1;function m(){let p=r;n(2,r=i),n(7,i=p)}function w(){dl(dn,a=!0,a)}function k(){dl(dn,a=!1,a)}Xr(async()=>{Promise.all([cr(`${Mn}/data/location.csv`),cr(`${Mn}/data/hs_product.csv`),cr(`${Mn}/data/hs_2010_to_2020.csv`)]).then(([p,b,H])=>{var D;n(0,c=ml(p.map(L=>new Z0(L)).filter(L=>L.level=="country"),L=>L.id)),n(1,d=ml(b.map(L=>new Tr(L)),L=>L.id));for(let[L,O]of d)O.parent=(D=d.get(O.parent_id))!=null?D:null,d.set(L,O);let X=H.map(L=>new Zt(c,d,L));n(4,_=mi(X,L=>L.location_id,L=>L.partner_id,L=>L.year)),lo(H,L=>+L.export_value),n(3,h=Uo(Array.from(d).map(([L,O])=>O.level).filter(L=>L=="section"),g0))})});const A=()=>{ct.set(new Set)};return e.$$.update=()=>{var p,b,H,X;e.$$.dirty&1&&n(2,r=(p=c==null?void 0:c.get(Cd))!=null?p:null),e.$$.dirty&1&&n(7,i=(b=c==null?void 0:c.get(Nd))!=null?b:null),e.$$.dirty&7&&(n(5,g=null),n(6,E=!0),cr(`${Mn}/data/${(H=r==null?void 0:r.code)!=null?H:"USA"}/${(X=r==null?void 0:r.code)!=null?X:"USA"}_hs2_2010_to_2020.csv`).then(D=>{n(5,g=mi(D.map(L=>new Zt(c,d,L)),L=>L.partner_id,L=>L.year)),n(6,E=!1)}))},[c,d,r,h,_,g,E,i,a,l,o,s,u,m,w,k,A]}class Hd extends Ct{constructor(t){super(),Nt(this,t,Ld,Md,Lt,{})}}export{Hd as default};
