var zo=Object.defineProperty;var Go=(e,t,n)=>t in e?zo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var qe=(e,t,n)=>(Go(e,typeof t!="symbol"?t+"":t,n),n);import{S as Tt,i as St,s as Mt,k as j,l as $,m as D,h as y,n as f,b as K,B as Be,I as Ze,J as q,g as Je,t as ke,d as Qe,f as me,K as mt,L as Gi,o as qr,M as $a,N as ut,e as Te,O as Ui,v as at,w as Xe,x as yt,y as xe,z as We,q as ge,r as pe,G as T,u as Ye,A as Er,a as ye,c as we,P as re,Q as ie,p as yn,R as gi,T as mn,U as Zr,V as Jt,W as Uo,C as Yo,D as Xo,E as xo,F as Wo,X as Yi,Y as dl,Z as _l,_ as Xi,$ as eo,a0 as Ko,a1 as ml,a2 as qo,a3 as Zo,a4 as Jo,a5 as Qo,a6 as Ke,H as At,a7 as dt,a8 as xi,a9 as Cn,aa as jo,ab as $o,ac as es,ad as ts,ae as ns,af as gl,ag as ur,ah as rs}from"../../chunks/index-5ece49a7.js";import{b as Tn}from"../../chunks/paths-6cd3a76e.js";import{w as Wi}from"../../chunks/index-747ceb65.js";import{f as fr}from"../../chunks/feather-e249e621.js";function Ir(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function is(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function to(e){let t,n,r;e.length!==2?(t=Ir,n=(o,s)=>Ir(e(o),s),r=(o,s)=>e(o)-s):(t=e===Ir||e===is?e:ls,n=e,r=e);function i(o,s,u=0,d=o.length){if(u<d){if(t(s,s)!==0)return d;do{const c=u+d>>>1;n(o[c],s)<0?u=c+1:d=c}while(u<d)}return u}function a(o,s,u=0,d=o.length){if(u<d){if(t(s,s)!==0)return d;do{const c=u+d>>>1;n(o[c],s)<=0?u=c+1:d=c}while(u<d)}return u}function l(o,s,u=0,d=o.length){const c=i(o,s,u,d-1);return c>u&&r(o[c-1],s)>-r(o[c],s)?c-1:c}return{left:i,center:l,right:a}}function ls(){return 0}function as(e){return e===null?NaN:+e}const os=to(Ir),ss=os.right;to(as).center;const us=ss;function no(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class pi extends Map{constructor(t,n=hs){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(pl(this,t))}has(t){return super.has(pl(this,t))}set(t,n){return super.set(fs(this,t),n)}delete(t){return super.delete(cs(this,t))}}function pl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function fs({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function cs({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function hs(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Nr(e){return e}function vi(e,...t){return Ki(e,Nr,Nr,t)}function yi(e,t,...n){return Ki(e,Nr,t,n)}function vl(e,...t){return Ki(e,Nr,ds,t)}function ds(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Ki(e,t,n,r){return function i(a,l){if(l>=r.length)return n(a);const o=new pi,s=r[l++];let u=-1;for(const d of a){const c=s(d,++u,a),h=o.get(c);h?h.push(d):o.set(c,[d])}for(const[d,c]of o)o.set(d,i(c,l));return t(o)}(e,0)}var wi=Math.sqrt(50),bi=Math.sqrt(10),ki=Math.sqrt(2);function _s(e,t,n){var r,i=-1,a,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=ro(e,t,n))===0||!isFinite(o))return[];if(o>0){let s=Math.round(e/o),u=Math.round(t/o);for(s*o<e&&++s,u*o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)*o}else{o=-o;let s=Math.round(e*o),u=Math.round(t*o);for(s/o<e&&++s,u/o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)/o}return r&&l.reverse(),l}function ro(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=wi?10:a>=bi?5:a>=ki?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=wi?10:a>=bi?5:a>=ki?2:1)}function ms(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=wi?i*=10:a>=bi?i*=5:a>=ki&&(i*=2),t<e?-i:i}function Zn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function yl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Dr(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function gs(e){return e}var ei=1,Ar=2,Ei=3,Wn=4,wl=1e-6;function ps(e){return"translate("+e+",0)"}function vs(e){return"translate(0,"+e+")"}function ys(e){return t=>+e(t)}function ws(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function bs(){return!this.__axis}function qi(e,t){var n=[],r=null,i=null,a=6,l=6,o=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===ei||e===Wn?-1:1,d=e===Wn||e===Ar?"x":"y",c=e===ei||e===Ei?ps:vs;function h(_){var p=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,E=i==null?t.tickFormat?t.tickFormat.apply(t,n):gs:i,m=Math.max(a,0)+o,w=t.range(),b=+w[0]+s,I=+w[w.length-1]+s,g=(t.bandwidth?ws:ys)(t.copy(),s),k=_.selection?_.selection():_,B=k.selectAll(".domain").data([null]),X=k.selectAll(".tick").data(p,t).order(),F=X.exit(),N=X.enter().append("g").attr("class","tick"),L=X.select("line"),M=X.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),X=X.merge(N),L=L.merge(N.append("line").attr("stroke","currentColor").attr(d+"2",u*a)),M=M.merge(N.append("text").attr("fill","currentColor").attr(d,u*m).attr("dy",e===ei?"0em":e===Ei?"0.71em":"0.32em")),_!==k&&(B=B.transition(_),X=X.transition(_),L=L.transition(_),M=M.transition(_),F=F.transition(_).attr("opacity",wl).attr("transform",function(z){return isFinite(z=g(z))?c(z+s):this.getAttribute("transform")}),N.attr("opacity",wl).attr("transform",function(z){var P=this.parentNode.__axis;return c((P&&isFinite(P=P(z))?P:g(z))+s)})),F.remove(),B.attr("d",e===Wn||e===Ar?l?"M"+u*l+","+b+"H"+s+"V"+I+"H"+u*l:"M"+s+","+b+"V"+I:l?"M"+b+","+u*l+"V"+s+"H"+I+"V"+u*l:"M"+b+","+s+"H"+I),X.attr("opacity",1).attr("transform",function(z){return c(g(z)+s)}),L.attr(d+"2",u*a),M.attr(d,u*m).text(E),k.filter(bs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ar?"start":e===Wn?"end":"middle"),k.each(function(){this.__axis=g})}return h.scale=function(_){return arguments.length?(t=_,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),h):n.slice()},h.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),h):r&&r.slice()},h.tickFormat=function(_){return arguments.length?(i=_,h):i},h.tickSize=function(_){return arguments.length?(a=l=+_,h):a},h.tickSizeInner=function(_){return arguments.length?(a=+_,h):a},h.tickSizeOuter=function(_){return arguments.length?(l=+_,h):l},h.tickPadding=function(_){return arguments.length?(o=+_,h):o},h.offset=function(_){return arguments.length?(s=+_,h):s},h}function ks(e){return qi(Ar,e)}function io(e){return qi(Ei,e)}function Es(e){return qi(Wn,e)}var Is={value:()=>{}};function Zi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Tr(n)}function Tr(e){this._=e}function As(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Tr.prototype=Zi.prototype={constructor:Tr,on:function(e,t){var n=this._,r=As(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=Ts(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=bl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=bl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Tr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Ts(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function bl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Is,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ii="http://www.w3.org/1999/xhtml";const kl={svg:"http://www.w3.org/2000/svg",xhtml:Ii,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),kl.hasOwnProperty(t)?{space:kl[t],local:e}:e}function Ss(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ii&&t.documentElement.namespaceURI===Ii?t.createElement(e):t.createElementNS(n,e)}}function Ms(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lo(e){var t=Jr(e);return(t.local?Ms:Ss)(t)}function Cs(){}function Ji(e){return e==null?Cs:function(){return this.querySelector(e)}}function Ls(e){typeof e!="function"&&(e=Ji(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=new Array(l),s,u,d=0;d<l;++d)(s=a[d])&&(u=e.call(s,s.__data__,d,a))&&("__data__"in s&&(u.__data__=s.__data__),o[d]=u);return new wt(r,this._parents)}function Ns(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ds(){return[]}function ao(e){return e==null?Ds:function(){return this.querySelectorAll(e)}}function Os(e){return function(){return Ns(e.apply(this,arguments))}}function Rs(e){typeof e=="function"?e=Os(e):e=ao(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new wt(r,i)}function oo(e){return function(){return this.matches(e)}}function so(e){return function(t){return t.matches(e)}}var Vs=Array.prototype.find;function Fs(e){return function(){return Vs.call(this.children,e)}}function Hs(){return this.firstElementChild}function Bs(e){return this.select(e==null?Hs:Fs(typeof e=="function"?e:so(e)))}var Ps=Array.prototype.filter;function zs(){return Array.from(this.children)}function Gs(e){return function(){return Ps.call(this.children,e)}}function Us(e){return this.selectAll(e==null?zs:Gs(typeof e=="function"?e:so(e)))}function Ys(e){typeof e!="function"&&(e=oo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new wt(r,this._parents)}function uo(e){return new Array(e.length)}function Xs(){return new wt(this._enter||this._groups.map(uo),this._parents)}function Or(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Or.prototype={constructor:Or,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xs(e){return function(){return e}}function Ws(e,t,n,r,i,a){for(var l=0,o,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new Or(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function Ks(e,t,n,r,i,a,l){var o,s,u=new Map,d=t.length,c=a.length,h=new Array(d),_;for(o=0;o<d;++o)(s=t[o])&&(h[o]=_=l.call(s,s.__data__,o,t)+"",u.has(_)?i[o]=s:u.set(_,s));for(o=0;o<c;++o)_=l.call(e,a[o],o,a)+"",(s=u.get(_))?(r[o]=s,s.__data__=a[o],u.delete(_)):n[o]=new Or(e,a[o]);for(o=0;o<d;++o)(s=t[o])&&u.get(h[o])===s&&(i[o]=s)}function qs(e){return e.__data__}function Zs(e,t){if(!arguments.length)return Array.from(this,qs);var n=t?Ks:Ws,r=this._parents,i=this._groups;typeof e!="function"&&(e=xs(e));for(var a=i.length,l=new Array(a),o=new Array(a),s=new Array(a),u=0;u<a;++u){var d=r[u],c=i[u],h=c.length,_=Js(e.call(d,d&&d.__data__,u,r)),p=_.length,E=o[u]=new Array(p),m=l[u]=new Array(p),w=s[u]=new Array(h);n(d,c,E,m,w,_,t);for(var b=0,I=0,g,k;b<p;++b)if(g=E[b]){for(b>=I&&(I=b+1);!(k=m[I])&&++I<p;);g._next=k||null}}return l=new wt(l,r),l._enter=o,l._exit=s,l}function Js(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qs(){return new wt(this._exit||this._groups.map(uo),this._parents)}function js(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function $s(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),o=new Array(i),s=0;s<l;++s)for(var u=n[s],d=r[s],c=u.length,h=o[s]=new Array(c),_,p=0;p<c;++p)(_=u[p]||d[p])&&(h[p]=_);for(;s<i;++s)o[s]=n[s];return new wt(o,this._parents)}function eu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function tu(e){e||(e=nu);function t(c,h){return c&&h?e(c.__data__,h.__data__):!c-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],o=l.length,s=i[a]=new Array(o),u,d=0;d<o;++d)(u=l[d])&&(s[d]=u);s.sort(t)}return new wt(i,this._parents).order()}function nu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ru(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function iu(){return Array.from(this)}function lu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function au(){let e=0;for(const t of this)++e;return e}function ou(){return!this.node()}function su(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,o;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function uu(e){return function(){this.removeAttribute(e)}}function fu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cu(e,t){return function(){this.setAttribute(e,t)}}function hu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function du(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _u(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function mu(e,t){var n=Jr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?fu:uu:typeof t=="function"?n.local?_u:du:n.local?hu:cu)(n,t))}function fo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gu(e){return function(){this.style.removeProperty(e)}}function pu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function vu(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function yu(e,t,n){return arguments.length>1?this.each((t==null?gu:typeof t=="function"?vu:pu)(e,t,n==null?"":n)):Nn(this.node(),e)}function Nn(e,t){return e.style.getPropertyValue(t)||fo(e).getComputedStyle(e,null).getPropertyValue(t)}function wu(e){return function(){delete this[e]}}function bu(e,t){return function(){this[e]=t}}function ku(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Eu(e,t){return arguments.length>1?this.each((t==null?wu:typeof t=="function"?ku:bu)(e,t)):this.node()[e]}function co(e){return e.trim().split(/^|\s+/)}function Qi(e){return e.classList||new ho(e)}function ho(e){this._node=e,this._names=co(e.getAttribute("class")||"")}ho.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _o(e,t){for(var n=Qi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function mo(e,t){for(var n=Qi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Iu(e){return function(){_o(this,e)}}function Au(e){return function(){mo(this,e)}}function Tu(e,t){return function(){(t.apply(this,arguments)?_o:mo)(this,e)}}function Su(e,t){var n=co(e+"");if(arguments.length<2){for(var r=Qi(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Tu:t?Iu:Au)(n,t))}function Mu(){this.textContent=""}function Cu(e){return function(){this.textContent=e}}function Lu(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Nu(e){return arguments.length?this.each(e==null?Mu:(typeof e=="function"?Lu:Cu)(e)):this.node().textContent}function Du(){this.innerHTML=""}function Ou(e){return function(){this.innerHTML=e}}function Ru(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Vu(e){return arguments.length?this.each(e==null?Du:(typeof e=="function"?Ru:Ou)(e)):this.node().innerHTML}function Fu(){this.nextSibling&&this.parentNode.appendChild(this)}function Hu(){return this.each(Fu)}function Bu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pu(){return this.each(Bu)}function zu(e){var t=typeof e=="function"?e:lo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gu(){return null}function Uu(e,t){var n=typeof e=="function"?e:lo(e),r=t==null?Gu:typeof t=="function"?t:Ji(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Yu(){var e=this.parentNode;e&&e.removeChild(this)}function Xu(){return this.each(Yu)}function xu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ku(e){return this.select(e?Wu:xu)}function qu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zu(e){return function(t){e.call(this,t,this.__data__)}}function Ju(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Qu(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function ju(e,t,n){return function(){var r=this.__on,i,a=Zu(t);if(r){for(var l=0,o=r.length;l<o;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function $u(e,t,n){var r=Ju(e+""),i,a=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var s=0,u=o.length,d;s<u;++s)for(i=0,d=o[s];i<a;++i)if((l=r[i]).type===d.type&&l.name===d.name)return d.value}return}for(o=t?ju:Qu,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function go(e,t,n){var r=fo(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ef(e,t){return function(){return go(this,e,t)}}function tf(e,t){return function(){return go(this,e,t.apply(this,arguments))}}function nf(e,t){return this.each((typeof t=="function"?tf:ef)(e,t))}function*rf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var po=[null];function wt(e,t){this._groups=e,this._parents=t}function rr(){return new wt([[document.documentElement]],po)}function lf(){return this}wt.prototype=rr.prototype={constructor:wt,select:Ls,selectAll:Rs,selectChild:Bs,selectChildren:Us,filter:Ys,data:Zs,enter:Xs,exit:Qs,join:js,merge:$s,selection:lf,order:eu,sort:tu,call:ru,nodes:iu,node:lu,size:au,empty:ou,each:su,attr:mu,style:yu,property:Eu,classed:Su,text:Nu,html:Vu,raise:Hu,lower:Pu,append:zu,insert:Uu,remove:Xu,clone:Ku,datum:qu,on:$u,dispatch:nf,[Symbol.iterator]:rf};function Ie(e){return typeof e=="string"?new wt([[document.querySelector(e)]],[document.documentElement]):new wt([[e]],po)}function af(e){let t;for(;t=e.sourceEvent;)e=t;return e}function El(e,t){if(e=af(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ai={capture:!0,passive:!1};function Ti(e){e.preventDefault(),e.stopImmediatePropagation()}function of(e){var t=e.document.documentElement,n=Ie(e).on("dragstart.drag",Ti,Ai);"onselectstart"in t?n.on("selectstart.drag",Ti,Ai):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function sf(e,t){var n=e.document.documentElement,r=Ie(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ti,Ai),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ji(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ir(){}var jn=.7,Rr=1/jn,Ln="\\s*([+-]?\\d+)\\s*",$n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uf=/^#([0-9a-f]{3,8})$/,ff=new RegExp(`^rgb\\(${Ln},${Ln},${Ln}\\)$`),cf=new RegExp(`^rgb\\(${Rt},${Rt},${Rt}\\)$`),hf=new RegExp(`^rgba\\(${Ln},${Ln},${Ln},${$n}\\)$`),df=new RegExp(`^rgba\\(${Rt},${Rt},${Rt},${$n}\\)$`),_f=new RegExp(`^hsl\\(${$n},${Rt},${Rt}\\)$`),mf=new RegExp(`^hsla\\(${$n},${Rt},${Rt},${$n}\\)$`),Il={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ji(ir,hn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Al,formatHex:Al,formatHex8:gf,formatHsl:pf,formatRgb:Tl,toString:Tl});function Al(){return this.rgb().formatHex()}function gf(){return this.rgb().formatHex8()}function pf(){return yo(this).formatHsl()}function Tl(){return this.rgb().formatRgb()}function hn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=uf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Sl(t):n===3?new _t(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ff.exec(e))?new _t(t[1],t[2],t[3],1):(t=cf.exec(e))?new _t(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hf.exec(e))?cr(t[1],t[2],t[3],t[4]):(t=df.exec(e))?cr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_f.exec(e))?Ll(t[1],t[2]/100,t[3]/100,1):(t=mf.exec(e))?Ll(t[1],t[2]/100,t[3]/100,t[4]):Il.hasOwnProperty(e)?Sl(Il[e]):e==="transparent"?new _t(NaN,NaN,NaN,0):null}function Sl(e){return new _t(e>>16&255,e>>8&255,e&255,1)}function cr(e,t,n,r){return r<=0&&(e=t=n=NaN),new _t(e,t,n,r)}function vf(e){return e instanceof ir||(e=hn(e)),e?(e=e.rgb(),new _t(e.r,e.g,e.b,e.opacity)):new _t}function Si(e,t,n,r){return arguments.length===1?vf(e):new _t(e,t,n,r==null?1:r)}function _t(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ji(_t,Si,vo(ir,{brighter(e){return e=e==null?Rr:Math.pow(Rr,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?jn:Math.pow(jn,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _t(fn(this.r),fn(this.g),fn(this.b),Vr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ml,formatHex:Ml,formatHex8:yf,formatRgb:Cl,toString:Cl}));function Ml(){return`#${sn(this.r)}${sn(this.g)}${sn(this.b)}`}function yf(){return`#${sn(this.r)}${sn(this.g)}${sn(this.b)}${sn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cl(){const e=Vr(this.opacity);return`${e===1?"rgb(":"rgba("}${fn(this.r)}, ${fn(this.g)}, ${fn(this.b)}${e===1?")":`, ${e})`}`}function Vr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sn(e){return e=fn(e),(e<16?"0":"")+e.toString(16)}function Ll(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new It(e,t,n,r)}function yo(e){if(e instanceof It)return new It(e.h,e.s,e.l,e.opacity);if(e instanceof ir||(e=hn(e)),!e)return new It;if(e instanceof It)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,o=a-i,s=(a+i)/2;return o?(t===a?l=(n-r)/o+(n<r)*6:n===a?l=(r-t)/o+2:l=(t-n)/o+4,o/=s<.5?a+i:2-a-i,l*=60):o=s>0&&s<1?0:l,new It(l,o,s,e.opacity)}function wf(e,t,n,r){return arguments.length===1?yo(e):new It(e,t,n,r==null?1:r)}function It(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ji(It,wf,vo(ir,{brighter(e){return e=e==null?Rr:Math.pow(Rr,e),new It(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jn:Math.pow(jn,e),new It(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new _t(ti(e>=240?e-240:e+120,i,r),ti(e,i,r),ti(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new It(Nl(this.h),hr(this.s),hr(this.l),Vr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vr(this.opacity);return`${e===1?"hsl(":"hsla("}${Nl(this.h)}, ${hr(this.s)*100}%, ${hr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Nl(e){return e=(e||0)%360,e<0?e+360:e}function hr(e){return Math.max(0,Math.min(1,e||0))}function ti(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $i=e=>()=>e;function bf(e,t){return function(n){return e+n*t}}function kf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ef(e){return(e=+e)==1?wo:function(t,n){return n-t?kf(t,n,e):$i(isNaN(t)?n:t)}}function wo(e,t){var n=t-e;return n?bf(e,n):$i(isNaN(e)?t:e)}const Fr=function e(t){var n=Ef(t);function r(i,a){var l=n((i=Si(i)).r,(a=Si(a)).r),o=n(i.g,a.g),s=n(i.b,a.b),u=wo(i.opacity,a.opacity);return function(d){return i.r=l(d),i.g=o(d),i.b=s(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function If(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Af(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Tf(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=Qr(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(o){for(l=0;l<r;++l)a[l]=i[l](o);return a}}function Sf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Et(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Mf(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Qr(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Mi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ni=new RegExp(Mi.source,"g");function Cf(e){return function(){return e}}function Lf(e){return function(t){return e(t)+""}}function bo(e,t){var n=Mi.lastIndex=ni.lastIndex=0,r,i,a,l=-1,o=[],s=[];for(e=e+"",t=t+"";(r=Mi.exec(e))&&(i=ni.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[l]?o[l]+=a:o[++l]=a),(r=r[0])===(i=i[0])?o[l]?o[l]+=i:o[++l]=i:(o[++l]=null,s.push({i:l,x:Et(r,i)})),n=ni.lastIndex;return n<t.length&&(a=t.slice(n),o[l]?o[l]+=a:o[++l]=a),o.length<2?s[0]?Lf(s[0].x):Cf(t):(t=s.length,function(u){for(var d=0,c;d<t;++d)o[(c=s[d]).i]=c.x(u);return o.join("")})}function Qr(e,t){var n=typeof t,r;return t==null||n==="boolean"?$i(t):(n==="number"?Et:n==="string"?(r=hn(t))?(t=r,Fr):bo:t instanceof hn?Fr:t instanceof Date?Sf:Af(t)?If:Array.isArray(t)?Tf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Mf:Et)(e,t)}function Nf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Dl=180/Math.PI,Ci={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ko(e,t,n,r,i,a){var l,o,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,s/=o),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Dl,skewX:Math.atan(s)*Dl,scaleX:l,scaleY:o}}var dr;function Df(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ci:ko(t.a,t.b,t.c,t.d,t.e,t.f)}function Of(e){return e==null||(dr||(dr=document.createElementNS("http://www.w3.org/2000/svg","g")),dr.setAttribute("transform",e),!(e=dr.transform.baseVal.consolidate()))?Ci:(e=e.matrix,ko(e.a,e.b,e.c,e.d,e.e,e.f))}function Eo(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,d,c,h,_,p){if(u!==c||d!==h){var E=_.push("translate(",null,t,null,n);p.push({i:E-4,x:Et(u,c)},{i:E-2,x:Et(d,h)})}else(c||h)&&_.push("translate("+c+t+h+n)}function l(u,d,c,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Et(u,d)})):d&&c.push(i(c)+"rotate("+d+r)}function o(u,d,c,h){u!==d?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Et(u,d)}):d&&c.push(i(c)+"skewX("+d+r)}function s(u,d,c,h,_,p){if(u!==c||d!==h){var E=_.push(i(_)+"scale(",null,",",null,")");p.push({i:E-4,x:Et(u,c)},{i:E-2,x:Et(d,h)})}else(c!==1||h!==1)&&_.push(i(_)+"scale("+c+","+h+")")}return function(u,d){var c=[],h=[];return u=e(u),d=e(d),a(u.translateX,u.translateY,d.translateX,d.translateY,c,h),l(u.rotate,d.rotate,c,h),o(u.skewX,d.skewX,c,h),s(u.scaleX,u.scaleY,d.scaleX,d.scaleY,c,h),u=d=null,function(_){for(var p=-1,E=h.length,m;++p<E;)c[(m=h[p]).i]=m.x(_);return c.join("")}}}var Rf=Eo(Df,"px, ","px)","deg)"),Vf=Eo(Of,", ",")",")"),Dn=0,Kn=0,Gn=0,Io=1e3,Hr,qn,Br=0,dn=0,jr=0,er=typeof performance=="object"&&performance.now?performance:Date,Ao=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function el(){return dn||(Ao(Ff),dn=er.now()+jr)}function Ff(){dn=0}function Pr(){this._call=this._time=this._next=null}Pr.prototype=To.prototype={constructor:Pr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?el():+n)+(t==null?0:+t),!this._next&&qn!==this&&(qn?qn._next=this:Hr=this,qn=this),this._call=e,this._time=n,Li()},stop:function(){this._call&&(this._call=null,this._time=1/0,Li())}};function To(e,t,n){var r=new Pr;return r.restart(e,t,n),r}function Hf(){el(),++Dn;for(var e=Hr,t;e;)(t=dn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Dn}function Ol(){dn=(Br=er.now())+jr,Dn=Kn=0;try{Hf()}finally{Dn=0,Pf(),dn=0}}function Bf(){var e=er.now(),t=e-Br;t>Io&&(jr-=t,Br=e)}function Pf(){for(var e,t=Hr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Hr=n);qn=e,Li(r)}function Li(e){if(!Dn){Kn&&(Kn=clearTimeout(Kn));var t=e-dn;t>24?(e<1/0&&(Kn=setTimeout(Ol,e-er.now()-jr)),Gn&&(Gn=clearInterval(Gn))):(Gn||(Br=er.now(),Gn=setInterval(Bf,Io)),Dn=1,Ao(Ol))}}function Rl(e,t,n){var r=new Pr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var zf=Zi("start","end","cancel","interrupt"),Gf=[],So=0,Vl=1,Ni=2,Sr=3,Fl=4,Di=5,Mr=6;function $r(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Uf(e,n,{name:t,index:r,group:i,on:zf,tween:Gf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:So})}function tl(e,t){var n=Ct(e,t);if(n.state>So)throw new Error("too late; already scheduled");return n}function Vt(e,t){var n=Ct(e,t);if(n.state>Sr)throw new Error("too late; already running");return n}function Ct(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Uf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=To(a,0,n.time);function a(u){n.state=Vl,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var d,c,h,_;if(n.state!==Vl)return s();for(d in r)if(_=r[d],_.name===n.name){if(_.state===Sr)return Rl(l);_.state===Fl?(_.state=Mr,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[d]):+d<t&&(_.state=Mr,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[d])}if(Rl(function(){n.state===Sr&&(n.state=Fl,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Ni,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ni){for(n.state=Sr,i=new Array(h=n.tween.length),d=0,c=-1;d<h;++d)(_=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=_);i.length=c+1}}function o(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Di,1),c=-1,h=i.length;++c<h;)i[c].call(e,d);n.state===Di&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Mr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Oi(e,t){var n=e.__transition,r,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>Ni&&r.state<Di,r.state=Mr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function Yf(e){return this.each(function(){Oi(this,e)})}function Xf(e,t){var n,r;return function(){var i=Vt(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,o=r.length;l<o;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function xf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Vt(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var o={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=o;break}s===u&&i.push(o)}a.tween=i}}function Wf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ct(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?Xf:xf)(n,e,t))}function nl(e,t,n){var r=e._id;return e.each(function(){var i=Vt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ct(i,r).value[t]}}function Mo(e,t){var n;return(typeof t=="number"?Et:t instanceof hn?Fr:(n=hn(t))?(t=n,Fr):bo)(e,t)}function Kf(e){return function(){this.removeAttribute(e)}}function qf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function Jf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function Qf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function jf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function $f(e,t){var n=Jr(e),r=n==="transform"?Vf:Mo;return this.attrTween(e,typeof t=="function"?(n.local?jf:Qf)(n,r,nl(this,"attr."+e,t)):t==null?(n.local?qf:Kf)(n):(n.local?Jf:Zf)(n,r,t))}function ec(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nc(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&tc(e,a)),n}return i._value=t,i}function rc(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ec(e,a)),n}return i._value=t,i}function ic(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Jr(e);return this.tween(n,(r.local?nc:rc)(r,t))}function lc(e,t){return function(){tl(this,e).delay=+t.apply(this,arguments)}}function ac(e,t){return t=+t,function(){tl(this,e).delay=t}}function oc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lc:ac)(t,e)):Ct(this.node(),t).delay}function sc(e,t){return function(){Vt(this,e).duration=+t.apply(this,arguments)}}function uc(e,t){return t=+t,function(){Vt(this,e).duration=t}}function fc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sc:uc)(t,e)):Ct(this.node(),t).duration}function cc(e,t){if(typeof t!="function")throw new Error;return function(){Vt(this,e).ease=t}}function hc(e){var t=this._id;return arguments.length?this.each(cc(t,e)):Ct(this.node(),t).ease}function dc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Vt(this,e).ease=n}}function _c(e){if(typeof e!="function")throw new Error;return this.each(dc(this._id,e))}function mc(e){typeof e!="function"&&(e=oo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new Wt(r,this._parents,this._name,this._id)}function gc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),o=0;o<a;++o)for(var s=t[o],u=n[o],d=s.length,c=l[o]=new Array(d),h,_=0;_<d;++_)(h=s[_]||u[_])&&(c[_]=h);for(;o<r;++o)l[o]=t[o];return new Wt(l,this._parents,this._name,this._id)}function pc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function vc(e,t,n){var r,i,a=pc(t)?tl:Vt;return function(){var l=a(this,e),o=l.on;o!==r&&(i=(r=o).copy()).on(t,n),l.on=i}}function yc(e,t){var n=this._id;return arguments.length<2?Ct(this.node(),n).on.on(e):this.each(vc(n,e,t))}function wc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bc(){return this.on("end.remove",wc(this._id))}function kc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ji(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var o=r[l],s=o.length,u=a[l]=new Array(s),d,c,h=0;h<s;++h)(d=o[h])&&(c=e.call(d,d.__data__,h,o))&&("__data__"in d&&(c.__data__=d.__data__),u[h]=c,$r(u[h],t,n,h,u,Ct(d,n)));return new Wt(a,this._parents,t,n)}function Ec(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ao(e));for(var r=this._groups,i=r.length,a=[],l=[],o=0;o<i;++o)for(var s=r[o],u=s.length,d,c=0;c<u;++c)if(d=s[c]){for(var h=e.call(d,d.__data__,c,s),_,p=Ct(d,n),E=0,m=h.length;E<m;++E)(_=h[E])&&$r(_,t,n,E,h,p);a.push(h),l.push(d)}return new Wt(a,l,t,n)}var Ic=rr.prototype.constructor;function Ac(){return new Ic(this._groups,this._parents)}function Tc(e,t){var n,r,i;return function(){var a=Nn(this,e),l=(this.style.removeProperty(e),Nn(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function Co(e){return function(){this.style.removeProperty(e)}}function Sc(e,t,n){var r,i=n+"",a;return function(){var l=Nn(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function Mc(e,t,n){var r,i,a;return function(){var l=Nn(this,e),o=n(this),s=o+"";return o==null&&(s=o=(this.style.removeProperty(e),Nn(this,e))),l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o))}}function Cc(e,t){var n,r,i,a="style."+t,l="end."+a,o;return function(){var s=Vt(this,e),u=s.on,d=s.value[a]==null?o||(o=Co(t)):void 0;(u!==n||i!==d)&&(r=(n=u).copy()).on(l,i=d),s.on=r}}function Lc(e,t,n){var r=(e+="")=="transform"?Rf:Mo;return t==null?this.styleTween(e,Tc(e,r)).on("end.style."+e,Co(e)):typeof t=="function"?this.styleTween(e,Mc(e,r,nl(this,"style."+e,t))).each(Cc(this._id,e)):this.styleTween(e,Sc(e,r,t),n).on("end.style."+e,null)}function Nc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Dc(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&Nc(e,l,n)),r}return a._value=t,a}function Oc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Dc(e,t,n==null?"":n))}function Rc(e){return function(){this.textContent=e}}function Vc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Fc(e){return this.tween("text",typeof e=="function"?Vc(nl(this,"text",e)):Rc(e==null?"":e+""))}function Hc(e){return function(t){this.textContent=e.call(this,t)}}function Bc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Hc(i)),t}return r._value=e,r}function Pc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Bc(e))}function zc(){for(var e=this._name,t=this._id,n=Lo(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)if(s=l[u]){var d=Ct(s,t);$r(s,e,n,u,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Wt(r,this._parents,e,n)}function Gc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var o={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var u=Vt(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(s)),u.on=t}),i===0&&a()})}var Uc=0;function Wt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Lo(){return++Uc}var Gt=rr.prototype;Wt.prototype={constructor:Wt,select:kc,selectAll:Ec,selectChild:Gt.selectChild,selectChildren:Gt.selectChildren,filter:mc,merge:gc,selection:Ac,transition:zc,call:Gt.call,nodes:Gt.nodes,node:Gt.node,size:Gt.size,empty:Gt.empty,each:Gt.each,on:yc,attr:$f,attrTween:ic,style:Lc,styleTween:Oc,text:Fc,textTween:Pc,remove:bc,tween:Wf,delay:oc,duration:fc,ease:hc,easeVarying:_c,end:Gc,[Symbol.iterator]:Gt[Symbol.iterator]};function Yc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Xc={time:null,delay:0,duration:250,ease:Yc};function xc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Wc(e){var t,n;e instanceof Wt?(t=e._id,e=e._name):(t=Lo(),(n=Xc).time=el(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&$r(s,e,t,u,l,n||xc(s,t));return new Wt(r,this._parents,e,t)}rr.prototype.interrupt=Yf;rr.prototype.transition=Wc;const ri=e=>()=>e;function Kc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function qc(e){e.stopImmediatePropagation()}function ii(e){e.preventDefault(),e.stopImmediatePropagation()}var Hl={name:"drag"},li={name:"space"},wn={name:"handle"},bn={name:"center"};const{abs:Bl,max:nt,min:rt}=Math;function Pl(e){return[+e[0],+e[1]]}function zl(e){return[Pl(e[0]),Pl(e[1])]}var Cr={name:"x",handles:["w","e"].map(zr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ai={name:"y",handles:["n","s"].map(zr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ut={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ul={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Zc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Jc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function zr(e){return{type:e}}function Qc(e){return!e.ctrlKey&&!e.button}function jc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function $c(){return navigator.maxTouchPoints||"ontouchstart"in this}function oi(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function eh(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function th(){return nh(Cr)}function nh(e){var t=jc,n=Qc,r=$c,i=!0,a=Zi("start","brush","end"),l=6,o;function s(m){var w=m.property("__brush",E).selectAll(".overlay").data([zr("overlay")]);w.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ut.overlay).merge(w).each(function(){var I=oi(this).extent;Ie(this).attr("x",I[0][0]).attr("y",I[0][1]).attr("width",I[1][0]-I[0][0]).attr("height",I[1][1]-I[0][1])}),m.selectAll(".selection").data([zr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ut.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=m.selectAll(".handle").data(e.handles,function(I){return I.type});b.exit().remove(),b.enter().append("rect").attr("class",function(I){return"handle handle--"+I.type}).attr("cursor",function(I){return Ut[I.type]}),m.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(m,w,b){m.tween?m.on("start.brush",function(I){d(this,arguments).beforestart().start(I)}).on("interrupt.brush end.brush",function(I){d(this,arguments).end(I)}).tween("brush",function(){var I=this,g=I.__brush,k=d(I,arguments),B=g.selection,X=e.input(typeof w=="function"?w.apply(this,arguments):w,g.extent),F=Qr(B,X);function N(L){g.selection=L===1&&X===null?null:F(L),u.call(I),k.brush()}return B!==null&&X!==null?N:N(1)}):m.each(function(){var I=this,g=arguments,k=I.__brush,B=e.input(typeof w=="function"?w.apply(I,g):w,k.extent),X=d(I,g).beforestart();Oi(I),k.selection=B===null?null:B,u.call(I),X.start(b).brush(b).end(b)})},s.clear=function(m,w){s.move(m,null,w)};function u(){var m=Ie(this),w=oi(this).selection;w?(m.selectAll(".selection").style("display",null).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?w[1][0]-l/2:w[0][0]-l/2}).attr("y",function(b){return b.type[0]==="s"?w[1][1]-l/2:w[0][1]-l/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?w[1][0]-w[0][0]+l:l}).attr("height",function(b){return b.type==="e"||b.type==="w"?w[1][1]-w[0][1]+l:l})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(m,w,b){var I=m.__brush.emitter;return I&&(!b||!I.clean)?I:new c(m,w,b)}function c(m,w,b){this.that=m,this.args=w,this.state=m.__brush,this.active=0,this.clean=b}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,w){return this.starting?(this.starting=!1,this.emit("start",m,w)):this.emit("brush",m),this},brush:function(m,w){return this.emit("brush",m,w),this},end:function(m,w){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,w)),this},emit:function(m,w,b){var I=Ie(this.that).datum();a.call(m,this.that,new Kc(m,{sourceEvent:w,target:s,selection:e.output(this.state.selection),mode:b,dispatch:a}),I)}};function h(m){if(o&&!m.touches||!n.apply(this,arguments))return;var w=this,b=m.target.__data__.type,I=(i&&m.metaKey?b="overlay":b)==="selection"?Hl:i&&m.altKey?bn:wn,g=e===ai?null:Zc[b],k=e===Cr?null:Jc[b],B=oi(w),X=B.extent,F=B.selection,N=X[0][0],L,M,z=X[0][1],P,x,S=X[1][0],O,le,te=X[1][1],Q,ce,H=0,G=0,ee,ae=g&&k&&i&&m.shiftKey,he,Ce,oe=Array.from(m.touches||[m],ue=>{const Se=ue.identifier;return ue=El(ue,w),ue.point0=ue.slice(),ue.identifier=Se,ue});Oi(w);var R=d(w,arguments,!0).beforestart();if(b==="overlay"){F&&(ee=!0);const ue=[oe[0],oe[1]||oe[0]];B.selection=F=[[L=e===ai?N:rt(ue[0][0],ue[1][0]),P=e===Cr?z:rt(ue[0][1],ue[1][1])],[O=e===ai?S:nt(ue[0][0],ue[1][0]),Q=e===Cr?te:nt(ue[0][1],ue[1][1])]],oe.length>1&&se(m)}else L=F[0][0],P=F[0][1],O=F[1][0],Q=F[1][1];M=L,x=P,le=O,ce=Q;var ne=Ie(w).attr("pointer-events","none"),C=ne.selectAll(".overlay").attr("cursor",Ut[b]);if(m.touches)R.moved=de,R.ended=ve;else{var J=Ie(m.view).on("mousemove.brush",de,!0).on("mouseup.brush",ve,!0);i&&J.on("keydown.brush",Re,!0).on("keyup.brush",ze,!0),of(m.view)}u.call(w),R.start(m,I.name);function de(ue){for(const Se of ue.changedTouches||[ue])for(const Oe of oe)Oe.identifier===Se.identifier&&(Oe.cur=El(Se,w));if(ae&&!he&&!Ce&&oe.length===1){const Se=oe[0];Bl(Se.cur[0]-Se[0])>Bl(Se.cur[1]-Se[1])?Ce=!0:he=!0}for(const Se of oe)Se.cur&&(Se[0]=Se.cur[0],Se[1]=Se.cur[1]);ee=!0,ii(ue),se(ue)}function se(ue){const Se=oe[0],Oe=Se.point0;var U;switch(H=Se[0]-Oe[0],G=Se[1]-Oe[1],I){case li:case Hl:{g&&(H=nt(N-L,rt(S-O,H)),M=L+H,le=O+H),k&&(G=nt(z-P,rt(te-Q,G)),x=P+G,ce=Q+G);break}case wn:{oe[1]?(g&&(M=nt(N,rt(S,oe[0][0])),le=nt(N,rt(S,oe[1][0])),g=1),k&&(x=nt(z,rt(te,oe[0][1])),ce=nt(z,rt(te,oe[1][1])),k=1)):(g<0?(H=nt(N-L,rt(S-L,H)),M=L+H,le=O):g>0&&(H=nt(N-O,rt(S-O,H)),M=L,le=O+H),k<0?(G=nt(z-P,rt(te-P,G)),x=P+G,ce=Q):k>0&&(G=nt(z-Q,rt(te-Q,G)),x=P,ce=Q+G));break}case bn:{g&&(M=nt(N,rt(S,L-H*g)),le=nt(N,rt(S,O+H*g))),k&&(x=nt(z,rt(te,P-G*k)),ce=nt(z,rt(te,Q+G*k)));break}}le<M&&(g*=-1,U=L,L=O,O=U,U=M,M=le,le=U,b in Gl&&C.attr("cursor",Ut[b=Gl[b]])),ce<x&&(k*=-1,U=P,P=Q,Q=U,U=x,x=ce,ce=U,b in Ul&&C.attr("cursor",Ut[b=Ul[b]])),B.selection&&(F=B.selection),he&&(M=F[0][0],le=F[1][0]),Ce&&(x=F[0][1],ce=F[1][1]),(F[0][0]!==M||F[0][1]!==x||F[1][0]!==le||F[1][1]!==ce)&&(B.selection=[[M,x],[le,ce]],u.call(w),R.brush(ue,I.name))}function ve(ue){if(qc(ue),ue.touches){if(ue.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else sf(ue.view,ee),J.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ne.attr("pointer-events","all"),C.attr("cursor",Ut.overlay),B.selection&&(F=B.selection),eh(F)&&(B.selection=null,u.call(w)),R.end(ue,I.name)}function Re(ue){switch(ue.keyCode){case 16:{ae=g&&k;break}case 18:{I===wn&&(g&&(O=le-H*g,L=M+H*g),k&&(Q=ce-G*k,P=x+G*k),I=bn,se(ue));break}case 32:{(I===wn||I===bn)&&(g<0?O=le-H:g>0&&(L=M-H),k<0?Q=ce-G:k>0&&(P=x-G),I=li,C.attr("cursor",Ut.selection),se(ue));break}default:return}ii(ue)}function ze(ue){switch(ue.keyCode){case 16:{ae&&(he=Ce=ae=!1,se(ue));break}case 18:{I===bn&&(g<0?O=le:g>0&&(L=M),k<0?Q=ce:k>0&&(P=x),I=wn,se(ue));break}case 32:{I===li&&(ue.altKey?(g&&(O=le-H*g,L=M+H*g),k&&(Q=ce-G*k,P=x+G*k),I=bn):(g<0?O=le:g>0&&(L=M),k<0?Q=ce:k>0&&(P=x),I=wn),C.attr("cursor",Ut[b]),se(ue));break}default:return}ii(ue)}}function _(m){d(this,arguments).moved(m)}function p(m){d(this,arguments).ended(m)}function E(){var m=this.__brush||{selection:null};return m.extent=zl(t.apply(this,arguments)),m.dim=e,m}return s.extent=function(m){return arguments.length?(t=typeof m=="function"?m:ri(zl(m)),s):t},s.filter=function(m){return arguments.length?(n=typeof m=="function"?m:ri(!!m),s):n},s.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:ri(!!m),s):r},s.handleSize=function(m){return arguments.length?(l=+m,s):l},s.keyModifiers=function(m){return arguments.length?(i=!!m,s):i},s.on=function(){var m=a.on.apply(a,arguments);return m===a?s:m},s}const Ri=Math.PI,Vi=2*Ri,on=1e-6,rh=Vi-on;function Fi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Hi(){return new Fi}Fi.prototype=Hi.prototype={constructor:Fi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,l=this._y1,o=n-e,s=r-t,u=a-e,d=l-t,c=u*u+d*d;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(c>on)if(!(Math.abs(d*o-s*u)>on)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var h=n-a,_=r-l,p=o*o+s*s,E=h*h+_*_,m=Math.sqrt(p),w=Math.sqrt(c),b=i*Math.tan((Ri-Math.acos((p+c-E)/(2*m*w)))/2),I=b/w,g=b/m;Math.abs(I-1)>on&&(this._+="L"+(e+I*u)+","+(t+I*d)),this._+="A"+i+","+i+",0,0,"+ +(d*h>u*_)+","+(this._x1=e+g*o)+","+(this._y1=t+g*s)}},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n,a=!!a;var l=n*Math.cos(r),o=n*Math.sin(r),s=e+l,u=t+o,d=1^a,c=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>on||Math.abs(this._y1-u)>on)&&(this._+="L"+s+","+u),n&&(c<0&&(c=c%Vi+Vi),c>rh?this._+="A"+n+","+n+",0,1,"+d+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+d+","+(this._x1=s)+","+(this._y1=u):c>on&&(this._+="A"+n+","+n+",0,"+ +(c>=Ri)+","+d+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Yl={},si={},ui=34,Un=10,fi=13;function No(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function ih(e,t){var n=No(e);return function(r,i){return t(n(r),i,e)}}function Xl(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ht(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function lh(e){return e<0?"-"+ht(-e,6):e>9999?"+"+ht(e,6):ht(e,4)}function ah(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":lh(e.getUTCFullYear())+"-"+ht(e.getUTCMonth()+1,2)+"-"+ht(e.getUTCDate(),2)+(i?"T"+ht(t,2)+":"+ht(n,2)+":"+ht(r,2)+"."+ht(i,3)+"Z":r?"T"+ht(t,2)+":"+ht(n,2)+":"+ht(r,2)+"Z":n||t?"T"+ht(t,2)+":"+ht(n,2)+"Z":"")}function oh(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,h){var _,p,E=i(c,function(m,w){if(_)return _(m,w-1);p=m,_=h?ih(m,h):No(m)});return E.columns=p||[],E}function i(c,h){var _=[],p=c.length,E=0,m=0,w,b=p<=0,I=!1;c.charCodeAt(p-1)===Un&&--p,c.charCodeAt(p-1)===fi&&--p;function g(){if(b)return si;if(I)return I=!1,Yl;var B,X=E,F;if(c.charCodeAt(X)===ui){for(;E++<p&&c.charCodeAt(E)!==ui||c.charCodeAt(++E)===ui;);return(B=E)>=p?b=!0:(F=c.charCodeAt(E++))===Un?I=!0:F===fi&&(I=!0,c.charCodeAt(E)===Un&&++E),c.slice(X+1,B-1).replace(/""/g,'"')}for(;E<p;){if((F=c.charCodeAt(B=E++))===Un)I=!0;else if(F===fi)I=!0,c.charCodeAt(E)===Un&&++E;else if(F!==n)continue;return c.slice(X,B)}return b=!0,c.slice(X,p)}for(;(w=g())!==si;){for(var k=[];w!==Yl&&w!==si;)k.push(w),w=g();h&&(k=h(k,m++))==null||_.push(k)}return _}function a(c,h){return c.map(function(_){return h.map(function(p){return d(_[p])}).join(e)})}function l(c,h){return h==null&&(h=Xl(c)),[h.map(d).join(e)].concat(a(c,h)).join(`
`)}function o(c,h){return h==null&&(h=Xl(c)),a(c,h).join(`
`)}function s(c){return c.map(u).join(`
`)}function u(c){return c.map(d).join(e)}function d(c){return c==null?"":c instanceof Date?ah(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:l,formatBody:o,formatRows:s,formatRow:u,formatValue:d}}var sh=oh(","),uh=sh.parse;function fh(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function ch(e,t){return fetch(e,t).then(fh)}function hh(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),ch(t,n).then(function(i){return e(i,r)})}}var _r=hh(uh);function dh(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Gr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function On(e){return e=Gr(Math.abs(e)),e?e[1]:NaN}function _h(e,t){return function(n,r){for(var i=n.length,a=[],l=0,o=e[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),a.push(n.substring(i-=o,i+o)),!((s+=o+1)>r));)o=e[l=(l+1)%e.length];return a.reverse().join(t)}}function mh(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var gh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ur(e){if(!(t=gh.exec(e)))throw new Error("invalid format: "+e);var t;return new rl({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ur.prototype=rl.prototype;function rl(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ph(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Do;function vh(e,t){var n=Gr(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Do=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Gr(e,Math.max(0,t+a-1))[0]}function xl(e,t){var n=Gr(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Wl={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dh,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xl(e*100,t),r:xl,s:vh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Kl(e){return e}var ql=Array.prototype.map,Zl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function yh(e){var t=e.grouping===void 0||e.thousands===void 0?Kl:_h(ql.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Kl:mh(ql.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(c){c=Ur(c);var h=c.fill,_=c.align,p=c.sign,E=c.symbol,m=c.zero,w=c.width,b=c.comma,I=c.precision,g=c.trim,k=c.type;k==="n"?(b=!0,k="g"):Wl[k]||(I===void 0&&(I=12),g=!0,k="g"),(m||h==="0"&&_==="=")&&(m=!0,h="0",_="=");var B=E==="$"?n:E==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",X=E==="$"?r:/[%p]/.test(k)?l:"",F=Wl[k],N=/[defgprs%]/.test(k);I=I===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function L(M){var z=B,P=X,x,S,O;if(k==="c")P=F(M)+P,M="";else{M=+M;var le=M<0||1/M<0;if(M=isNaN(M)?s:F(Math.abs(M),I),g&&(M=ph(M)),le&&+M==0&&p!=="+"&&(le=!1),z=(le?p==="("?p:o:p==="-"||p==="("?"":p)+z,P=(k==="s"?Zl[8+Do/3]:"")+P+(le&&p==="("?")":""),N){for(x=-1,S=M.length;++x<S;)if(O=M.charCodeAt(x),48>O||O>57){P=(O===46?i+M.slice(x+1):M.slice(x))+P,M=M.slice(0,x);break}}}b&&!m&&(M=t(M,1/0));var te=z.length+M.length+P.length,Q=te<w?new Array(w-te+1).join(h):"";switch(b&&m&&(M=t(Q+M,Q.length?w-P.length:1/0),Q=""),_){case"<":M=z+M+P+Q;break;case"=":M=z+Q+M+P;break;case"^":M=Q.slice(0,te=Q.length>>1)+z+M+P+Q.slice(te);break;default:M=Q+z+M+P;break}return a(M)}return L.toString=function(){return c+""},L}function d(c,h){var _=u((c=Ur(c),c.type="f",c)),p=Math.max(-8,Math.min(8,Math.floor(On(h)/3)))*3,E=Math.pow(10,-p),m=Zl[8+p/3];return function(w){return _(E*w)+m}}return{format:u,formatPrefix:d}}var mr,Qt,Oo;wh({thousands:",",grouping:[3],currency:["$",""]});function wh(e){return mr=yh(e),Qt=mr.format,Oo=mr.formatPrefix,mr}function bh(e){return Math.max(0,-On(Math.abs(e)))}function kh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(On(t)/3)))*3-On(Math.abs(e)))}function Eh(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,On(t)-On(e))+1}function Ih(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Ah(){return this.eachAfter(Ih)}function Th(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Sh(e,t){for(var n=this,r=[n],i,a,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function Mh(e,t){for(var n=this,r=[n],i=[],a,l,o,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(l=0,o=a.length;l<o;++l)r.push(a[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function Ch(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Lh(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Nh(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Dh(e){for(var t=this,n=Oh(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Oh(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Rh(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Vh(){return Array.from(this)}function Fh(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Hh(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Bh(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Ro(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Gh)):t===void 0&&(t=zh);for(var n=new tr(e),r,i=[n],a,l,o,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,o=s-1;o>=0;--o)i.push(a=l[o]=new tr(l[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(Vo)}function Ph(){return Ro(this).eachBefore(Uh)}function zh(e){return e.children}function Gh(e){return Array.isArray(e)?e[1]:null}function Uh(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Vo(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function tr(e){this.data=e,this.depth=this.height=0,this.parent=null}tr.prototype=Ro.prototype={constructor:tr,count:Ah,each:Th,eachAfter:Mh,eachBefore:Sh,find:Ch,sum:Lh,sort:Nh,path:Dh,ancestors:Rh,descendants:Vh,leaves:Fh,links:Hh,copy:Ph,[Symbol.iterator]:Bh};function ci(e){return e==null?null:Fo(e)}function Fo(e){if(typeof e!="function")throw new Error;return e}function Yn(){return 0}function Xn(e){return function(){return e}}function Yh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Xh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(r-t)/e.value;++o<s;)l=a[o],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var xh={depth:-1},Jl={},hi={};function Wh(e){return e.id}function Kh(e){return e.parentId}function qh(){var e=Wh,t=Kh,n;function r(i){var a=Array.from(i),l=e,o=t,s,u,d,c,h,_,p,E,m=new Map;if(n!=null){const w=a.map((g,k)=>Zh(n(g,k,i))),b=w.map(Ql),I=new Set(w).add("");for(const g of b)I.has(g)||(I.add(g),w.push(g),b.push(Ql(g)),a.push(hi));l=(g,k)=>w[k],o=(g,k)=>b[k]}for(d=0,s=a.length;d<s;++d)u=a[d],_=a[d]=new tr(u),(p=l(u,d,i))!=null&&(p+="")&&(E=_.id=p,m.set(E,m.has(E)?Jl:_)),(p=o(u,d,i))!=null&&(p+="")&&(_.parent=p);for(d=0;d<s;++d)if(_=a[d],p=_.parent){if(h=m.get(p),!h)throw new Error("missing: "+p);if(h===Jl)throw new Error("ambiguous: "+p);h.children?h.children.push(_):h.children=[_],_.parent=h}else{if(c)throw new Error("multiple roots");c=_}if(!c)throw new Error("no root");if(n!=null){for(;c.data===hi&&c.children.length===1;)c=c.children[0],--s;for(let w=a.length-1;w>=0&&(_=a[w],_.data===hi);--w)_.data=null}if(c.parent=xh,c.eachBefore(function(w){w.depth=w.parent.depth+1,--s}).eachBefore(Vo),c.parent=null,s>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=ci(i),r):e},r.parentId=function(i){return arguments.length?(t=ci(i),r):t},r.path=function(i){return arguments.length?(n=ci(i),r):n},r}function Zh(e){e=`${e}`;let t=e.length;return Bi(e,t-1)&&!Bi(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Ql(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Bi(e,t););return e.slice(0,t)}function Bi(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Jh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(i-n)/e.value;++o<s;)l=a[o],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var Qh=(1+Math.sqrt(5))/2;function jh(e,t,n,r,i,a){for(var l=[],o=t.children,s,u,d=0,c=0,h=o.length,_,p,E=t.value,m,w,b,I,g,k,B;d<h;){_=i-n,p=a-r;do m=o[c++].value;while(!m&&c<h);for(w=b=m,k=Math.max(p/_,_/p)/(E*e),B=m*m*k,g=Math.max(b/B,B/w);c<h;++c){if(m+=u=o[c].value,u<w&&(w=u),u>b&&(b=u),B=m*m*k,I=Math.max(b/B,B/w),I>g){m-=u;break}g=I}l.push(s={value:m,dice:_<p,children:o.slice(d,c)}),s.dice?Xh(s,n,r,i,E?r+=p*m/E:a):Jh(s,n,r,E?n+=_*m/E:i,a),E-=m,d=c}return l}const $h=function e(t){function n(r,i,a,l,o){jh(t,r,i,a,l,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Qh);function e0(){var e=$h,t=!1,n=1,r=1,i=[0],a=Yn,l=Yn,o=Yn,s=Yn,u=Yn;function d(h){return h.x0=h.y0=0,h.x1=n,h.y1=r,h.eachBefore(c),i=[0],t&&h.eachBefore(Yh),h}function c(h){var _=i[h.depth],p=h.x0+_,E=h.y0+_,m=h.x1-_,w=h.y1-_;m<p&&(p=m=(p+m)/2),w<E&&(E=w=(E+w)/2),h.x0=p,h.y0=E,h.x1=m,h.y1=w,h.children&&(_=i[h.depth+1]=a(h)/2,p+=u(h)-_,E+=l(h)-_,m-=o(h)-_,w-=s(h)-_,m<p&&(p=m=(p+m)/2),w<E&&(E=w=(E+w)/2),e(h,p,E,m,w))}return d.round=function(h){return arguments.length?(t=!!h,d):t},d.size=function(h){return arguments.length?(n=+h[0],r=+h[1],d):[n,r]},d.tile=function(h){return arguments.length?(e=Fo(h),d):e},d.padding=function(h){return arguments.length?d.paddingInner(h).paddingOuter(h):d.paddingInner()},d.paddingInner=function(h){return arguments.length?(a=typeof h=="function"?h:Xn(+h),d):a},d.paddingOuter=function(h){return arguments.length?d.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):d.paddingTop()},d.paddingTop=function(h){return arguments.length?(l=typeof h=="function"?h:Xn(+h),d):l},d.paddingRight=function(h){return arguments.length?(o=typeof h=="function"?h:Xn(+h),d):o},d.paddingBottom=function(h){return arguments.length?(s=typeof h=="function"?h:Xn(+h),d):s},d.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:Xn(+h),d):u},d}function t0(e,t,n,r,i){var a=e.children,l,o=a.length,s,u=new Array(o+1);for(u[0]=s=l=0;l<o;++l)u[l+1]=s+=a[l].value;d(0,o,e.value,t,n,r,i);function d(c,h,_,p,E,m,w){if(c>=h-1){var b=a[c];b.x0=p,b.y0=E,b.x1=m,b.y1=w;return}for(var I=u[c],g=_/2+I,k=c+1,B=h-1;k<B;){var X=k+B>>>1;u[X]<g?k=X+1:B=X}g-u[k-1]<u[k]-g&&c+1<k&&--k;var F=u[k]-I,N=_-F;if(m-p>w-E){var L=_?(p*N+m*F)/_:m;d(c,k,F,p,E,L,w),d(k,h,N,L,E,m,w)}else{var M=_?(E*N+w*F)/_:w;d(c,k,F,p,E,m,M),d(k,h,N,p,M,m,w)}}}function Ho(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const jl=Symbol("implicit");function Bo(){var e=new pi,t=[],n=[],r=jl;function i(a){let l=e.get(a);if(l===void 0){if(r!==jl)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new pi;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Bo(t,n).unknown(r)},Ho.apply(i,arguments),i}function n0(e){return function(){return e}}function r0(e){return+e}var $l=[0,1];function Sn(e){return e}function Pi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:n0(isNaN(t)?NaN:.5)}function i0(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function l0(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=Pi(i,r),a=n(l,a)):(r=Pi(r,i),a=n(a,l)),function(o){return a(r(o))}}function a0(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Pi(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(o){var s=us(e,o,1,r)-1;return a[s](i[s](o))}}function o0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function s0(){var e=$l,t=$l,n=Qr,r,i,a,l=Sn,o,s,u;function d(){var h=Math.min(e.length,t.length);return l!==Sn&&(l=i0(e[0],e[h-1])),o=h>2?a0:l0,s=u=null,c}function c(h){return h==null||isNaN(h=+h)?a:(s||(s=o(e.map(r),t,n)))(r(l(h)))}return c.invert=function(h){return l(i((u||(u=o(t,e.map(r),Et)))(h)))},c.domain=function(h){return arguments.length?(e=Array.from(h,r0),d()):e.slice()},c.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},c.rangeRound=function(h){return t=Array.from(h),n=Nf,d()},c.clamp=function(h){return arguments.length?(l=h?!0:Sn,d()):l!==Sn},c.interpolate=function(h){return arguments.length?(n=h,d()):n},c.unknown=function(h){return arguments.length?(a=h,c):a},function(h,_){return r=h,i=_,d()}}function u0(){return s0()(Sn,Sn)}function f0(e,t,n,r){var i=ms(e,t,n),a;switch(r=Ur(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=kh(i,l))&&(r.precision=a),Oo(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Eh(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=bh(i))&&(r.precision=a-(r.type==="%")*2);break}}return Qt(r)}function c0(e){var t=e.domain;return e.ticks=function(n){var r=t();return _s(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return f0(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],o=r[a],s,u,d=10;for(o<l&&(u=l,l=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=ro(l,o,n),u===s)return r[i]=l,r[a]=o,t(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;s=u}return e},e}function Jn(){var e=u0();return e.copy=function(){return o0(e,Jn())},Ho.apply(e,arguments),c0(e)}function h0(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const d0=h0("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Mn(e,t,n){this.k=e,this.x=t,this.y=n}Mn.prototype={constructor:Mn,scale:function(e){return e===1?this:new Mn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Mn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Mn(1,0,0);Mn.prototype;function _0(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function m0(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=j("div"),this.h()},l(i){t=$(i,"DIV",{class:!0});var a=D(t);a.forEach(y),this.h()},h(){f(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,a){K(i,t,a),t.innerHTML=n},p(i,[a]){a&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),a&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&f(t,"class",r)},i:Be,o:Be,d(i){i&&y(t)}}}function g0(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:a=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,d="";return e.$$set=c=>{"isActive"in c&&n(4,r=c.isActive),"isFirst"in c&&n(5,i=c.isFirst),"isHover"in c&&n(6,a=c.isHover),"isSelectable"in c&&n(7,l=c.isSelectable),"getOptionLabel"in c&&n(0,o=c.getOptionLabel),"item"in c&&n(1,s=c.item),"filterText"in c&&n(2,u=c.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const c=[];r&&c.push("active"),i&&c.push("first"),a&&c.push("hover"),s.isGroupHeader&&c.push("groupHeader"),s.isGroupItem&&c.push("groupItem"),l||c.push("notSelectable"),n(3,d=c.join(" "))}},[o,s,u,d,r,i,a,l]}class Po extends Tt{constructor(t){super(),St(this,t,g0,m0,Mt,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function ea(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function p0(e){let t,n,r=e[1],i=[];for(let o=0;o<r.length;o+=1)i[o]=ra(ea(e,r,o));const a=o=>ke(i[o],1,1,()=>{i[o]=null});let l=null;return r.length||(l=ta(e)),{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=Te(),l&&l.c()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);t=Te(),l&&l.l(o)},m(o,s){for(let u=0;u<i.length;u+=1)i[u].m(o,s);K(o,t,s),l&&l.m(o,s),n=!0},p(o,s){if(s[0]&114390){r=o[1];let u;for(u=0;u<r.length;u+=1){const d=ea(o,r,u);i[u]?(i[u].p(d,s),me(i[u],1)):(i[u]=ra(d),i[u].c(),me(i[u],1),i[u].m(t.parentNode,t))}for(Je(),u=r.length;u<i.length;u+=1)a(u);Qe(),!r.length&&l?l.p(o,s):r.length?l&&(l.d(1),l=null):(l=ta(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let s=0;s<r.length;s+=1)me(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)ke(i[s]);n=!1},d(o){Ui(i,o),o&&y(t),l&&l.d(o)}}}function v0(e){let t,n,r;var i=e[3];function a(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[b0,({item:o,i:s})=>({41:o,42:s}),({item:o,i:s})=>[0,(o?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=at(i,a(e))),{c(){t&&Xe(t.$$.fragment),n=Te()},l(l){t&&yt(t.$$.fragment,l),n=Te()},m(l,o){t&&xe(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&2&&(s.items=l[1]),o[0]&256&&(s.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(s.$$scope={dirty:o,ctx:l}),i!==(i=l[3])){if(t){Je();const u=t;ke(u.$$.fragment,1,0,()=>{We(u,1)}),Qe()}i?(t=at(i,a(l)),Xe(t.$$.fragment),me(t.$$.fragment,1),xe(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&me(t.$$.fragment,l),r=!0)},o(l){t&&ke(t.$$.fragment,l),r=!1},d(l){l&&y(n),t&&We(t,l)}}}function ta(e){let t,n=!e[11]&&na(e);return{c(){n&&n.c(),t=Te()},l(r){n&&n.l(r),t=Te()},m(r,i){n&&n.m(r,i),K(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=na(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&y(t)}}}function na(e){let t,n;return{c(){t=j("div"),n=ge(e[12]),this.h()},l(r){t=$(r,"DIV",{class:!0});var i=D(t);n=pe(i,e[12]),i.forEach(y),this.h()},h(){f(t,"class","empty svelte-1uyqfml")},m(r,i){K(r,t,i),T(t,n)},p(r,i){i[0]&4096&&Ye(n,r[12])},d(r){r&&y(t)}}}function y0(e){let t,n,r,i,a,l;var o=e[4];function s(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:zi(h[42]),isActive:Yr(h[41],h[9],h[10]),isHover:Xr(h[2],h[41],h[42],h[1]),isSelectable:_n(h[41])}}}o&&(n=at(o,s(e)));function u(){return e[29](e[42])}function d(){return e[30](e[42])}function c(...h){return e[31](e[41],e[42],...h)}return{c(){t=j("div"),n&&Xe(n.$$.fragment),r=ye(),this.h()},l(h){t=$(h,"DIV",{class:!0,tabindex:!0});var _=D(t);n&&yt(n.$$.fragment,_),r=we(_),_.forEach(y),this.h()},h(){f(t,"class","listItem"),f(t,"tabindex","-1")},m(h,_){K(h,t,_),n&&xe(n,t,null),T(t,r),i=!0,a||(l=[q(t,"mouseover",u),q(t,"focus",d),q(t,"click",c)],a=!0)},p(h,_){e=h;const p={};if(_[0]&2&&(p.item=e[41]),_[0]&8192&&(p.filterText=e[13]),_[0]&64&&(p.getOptionLabel=e[6]),_[0]&1538&&(p.isActive=Yr(e[41],e[9],e[10])),_[0]&6&&(p.isHover=Xr(e[2],e[41],e[42],e[1])),_[0]&2&&(p.isSelectable=_n(e[41])),o!==(o=e[4])){if(n){Je();const E=n;ke(E.$$.fragment,1,0,()=>{We(E,1)}),Qe()}o?(n=at(o,s(e)),Xe(n.$$.fragment),me(n.$$.fragment,1),xe(n,t,r)):n=null}else o&&n.$set(p)},i(h){i||(n&&me(n.$$.fragment,h),i=!0)},o(h){n&&ke(n.$$.fragment,h),i=!1},d(h){h&&y(t),n&&We(n),a=!1,mt(l)}}}function w0(e){let t,n=e[7](e[41])+"",r;return{c(){t=j("div"),r=ge(n),this.h()},l(i){t=$(i,"DIV",{class:!0});var a=D(t);r=pe(a,n),a.forEach(y),this.h()},h(){f(t,"class","listGroupTitle svelte-1uyqfml")},m(i,a){K(i,t,a),T(t,r)},p(i,a){a[0]&130&&n!==(n=i[7](i[41])+"")&&Ye(r,n)},i:Be,o:Be,d(i){i&&y(t)}}}function ra(e){let t,n,r,i;const a=[w0,y0],l=[];function o(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=o(e),n=l[t]=a[t](e),{c(){n.c(),r=Te()},l(s){n.l(s),r=Te()},m(s,u){l[t].m(s,u),K(s,r,u),i=!0},p(s,u){let d=t;t=o(s),t===d?l[t].p(s,u):(Je(),ke(l[d],1,1,()=>{l[d]=null}),Qe(),n=l[t],n?n.p(s,u):(n=l[t]=a[t](s),n.c()),me(n,1),n.m(r.parentNode,r))},i(s){i||(me(n),i=!0)},o(s){ke(n),i=!1},d(s){l[t].d(s),s&&y(r)}}}function b0(e){let t,n,r,i,a;var l=e[4];function o(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:zi(c[42]),isActive:Yr(c[41],c[9],c[10]),isHover:Xr(c[2],c[41],c[42],c[1]),isSelectable:_n(c[41])}}}l&&(n=at(l,o(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function d(...c){return e[28](e[41],e[42],...c)}return{c(){t=j("div"),n&&Xe(n.$$.fragment),this.h()},l(c){t=$(c,"DIV",{class:!0});var h=D(t);n&&yt(n.$$.fragment,h),h.forEach(y),this.h()},h(){f(t,"class","listItem")},m(c,h){K(c,t,h),n&&xe(n,t,null),r=!0,i||(a=[q(t,"mouseover",s),q(t,"focus",u),q(t,"click",d)],i=!0)},p(c,h){e=c;const _={};if(h[1]&1024&&(_.item=e[41]),h[0]&8192&&(_.filterText=e[13]),h[0]&64&&(_.getOptionLabel=e[6]),h[1]&2048&&(_.isFirst=zi(e[42])),h[0]&1536|h[1]&1024&&(_.isActive=Yr(e[41],e[9],e[10])),h[0]&6|h[1]&3072&&(_.isHover=Xr(e[2],e[41],e[42],e[1])),h[1]&1024&&(_.isSelectable=_n(e[41])),l!==(l=e[4])){if(n){Je();const p=n;ke(p.$$.fragment,1,0,()=>{We(p,1)}),Qe()}l?(n=at(l,o(e)),Xe(n.$$.fragment),me(n.$$.fragment,1),xe(n,t,null)):n=null}else l&&n.$set(_)},i(c){r||(n&&me(n.$$.fragment,c),r=!0)},o(c){n&&ke(n.$$.fragment,c),r=!1},d(c){c&&y(t),n&&We(n),i=!1,mt(a)}}}function k0(e){let t,n,r,i,a,l;const o=[v0,p0],s=[];function u(d,c){return d[5]?0:1}return n=u(e),r=s[n]=o[n](e),{c(){t=j("div"),r.c(),this.h()},l(d){t=$(d,"DIV",{class:!0,style:!0});var c=D(t);r.l(c),c.forEach(y),this.h()},h(){f(t,"class","listContainer svelte-1uyqfml"),f(t,"style",e[14]),Ze(t,"virtualList",e[5])},m(d,c){K(d,t,c),s[n].m(t,null),e[32](t),i=!0,a||(l=[q(window,"keydown",e[17]),q(window,"resize",e[18])],a=!0)},p(d,c){let h=n;n=u(d),n===h?s[n].p(d,c):(Je(),ke(s[h],1,1,()=>{s[h]=null}),Qe(),r=s[n],r?r.p(d,c):(r=s[n]=o[n](d),r.c()),me(r,1),r.m(t,null)),(!i||c[0]&16384)&&f(t,"style",d[14]),(!i||c[0]&32)&&Ze(t,"virtualList",d[5])},i(d){i||(me(r),i=!0)},o(d){ke(r),i=!1},d(d){d&&y(t),s[n].d(),e[32](null),a=!1,mt(l)}}}function Yr(e,t,n){return t&&t[n]===e[n]}function zi(e){return e===0}function Xr(e,t,n,r){return _n(t)&&(e===n||r.length===1)}function _n(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function E0(e,t,n){const r=Gi();let{container:i=void 0}=t,{VirtualList:a=null}=t,{Item:l=Po}=t,{isVirtualList:o=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:d=(R,ne)=>{if(R)return R.isCreator?`Create "${ne}"`:R[u]}}=t,{getGroupHeaderLabel:c=null}=t,{itemHeight:h=40}=t,{hoverItemIndex:_=0}=t,{value:p=void 0}=t,{optionIdentifier:E="value"}=t,{hideEmptyState:m=!1}=t,{noOptionsMessage:w="No options"}=t,{isMulti:b=!1}=t,{activeItemIndex:I=0}=t,{filterText:g=""}=t,{parent:k=null}=t,{listPlacement:B=null}=t,{listAutoWidth:X=null}=t,{listOffset:F=5}=t,N=0,L=!1,M;qr(()=>{if(s.length>0&&!b&&p){const R=s.findIndex(ne=>ne[E]===p[E]);R&&n(2,_=R)}te("active"),i.addEventListener("scroll",()=>{clearTimeout(N),N=setTimeout(()=>{L=!1},100)},!1)}),$a(()=>{s||n(1,s=[]),s!==M&&s.length>0&&n(2,_=0),M=s});function z(R){R.isCreator||r("itemSelected",R)}function P(R){L||n(2,_=R)}function x(R){const{item:ne,i:C,event:J}=R;if(J.stopPropagation(),p&&!b&&p[E]===ne[E])return S();ne.isCreator?r("itemCreated",g):_n(ne)&&(n(19,I=C),n(2,_=C),z(ne))}function S(){r("closeList")}async function O(R){if(o)return;let ne=!0;for(;ne;)R>0&&_===s.length-1?n(2,_=0):R<0&&_===0?n(2,_=s.length-1):n(2,_=_+R),ne=!_n(s[_]);await Er(),te("hover")}function le(R){switch(R.key){case"Escape":R.preventDefault(),S();break;case"ArrowDown":R.preventDefault(),s.length&&O(1);break;case"ArrowUp":R.preventDefault(),s.length&&O(-1);break;case"Enter":if(R.preventDefault(),s.length===0)break;const ne=s[_];if(p&&!b&&p[E]===ne[E]){S();break}ne.isCreator?r("itemCreated",g):(n(19,I=_),z(s[_]));break;case"Tab":if(R.preventDefault(),s.length===0||p&&p[E]===s[_][E])return S();n(19,I=_),z(s[_]);break}}function te(R){if(o||!i)return;let ne;const C=i.querySelector(`.listItem .${R}`);C&&(ne=i.getBoundingClientRect().bottom-C.getBoundingClientRect().bottom),n(0,i.scrollTop-=ne,i)}let Q;function ce(){const{height:R,width:ne}=k.getBoundingClientRect();n(14,Q=""),n(14,Q+=`min-width:${ne}px;width:${X?"auto":"100%"};`),B==="top"||B==="auto"&&_0(k,i).bottom?n(14,Q+=`bottom:${R+F}px;`):n(14,Q+=`top:${R+F}px;`)}const H=R=>P(R),G=R=>P(R),ee=(R,ne,C)=>x({item:R,i:ne,event:C}),ae=R=>P(R),he=R=>P(R),Ce=(R,ne,C)=>x({item:R,i:ne,event:C});function oe(R){ut[R?"unshift":"push"](()=>{i=R,n(0,i)})}return e.$$set=R=>{"container"in R&&n(0,i=R.container),"VirtualList"in R&&n(3,a=R.VirtualList),"Item"in R&&n(4,l=R.Item),"isVirtualList"in R&&n(5,o=R.isVirtualList),"items"in R&&n(1,s=R.items),"labelIdentifier"in R&&n(20,u=R.labelIdentifier),"getOptionLabel"in R&&n(6,d=R.getOptionLabel),"getGroupHeaderLabel"in R&&n(7,c=R.getGroupHeaderLabel),"itemHeight"in R&&n(8,h=R.itemHeight),"hoverItemIndex"in R&&n(2,_=R.hoverItemIndex),"value"in R&&n(9,p=R.value),"optionIdentifier"in R&&n(10,E=R.optionIdentifier),"hideEmptyState"in R&&n(11,m=R.hideEmptyState),"noOptionsMessage"in R&&n(12,w=R.noOptionsMessage),"isMulti"in R&&n(21,b=R.isMulti),"activeItemIndex"in R&&n(19,I=R.activeItemIndex),"filterText"in R&&n(13,g=R.filterText),"parent"in R&&n(22,k=R.parent),"listPlacement"in R&&n(23,B=R.listPlacement),"listAutoWidth"in R&&n(24,X=R.listAutoWidth),"listOffset"in R&&n(25,F=R.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&k&&i&&ce()},[i,s,_,a,l,o,d,c,h,p,E,m,w,g,Q,P,x,le,ce,I,u,b,k,B,X,F,H,G,ee,ae,he,Ce,oe]}class I0 extends Tt{constructor(t){super(),St(this,t,E0,k0,Mt,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function A0(e){let t,n=e[0](e[1])+"";return{c(){t=j("div"),this.h()},l(r){t=$(r,"DIV",{class:!0});var i=D(t);i.forEach(y),this.h()},h(){f(t,"class","selection svelte-pu1q1n")},m(r,i){K(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Be,o:Be,d(r){r&&y(t)}}}function T0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=a=>{"getSelectionLabel"in a&&n(0,r=a.getSelectionLabel),"item"in a&&n(1,i=a.item)},[r,i]}class S0 extends Tt{constructor(t){super(),St(this,t,T0,A0,Mt,{getSelectionLabel:0,item:1})}}function ia(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function la(e){let t,n,r,i,a;function l(...o){return e[6](e[11],...o)}return{c(){t=j("div"),n=re("svg"),r=re("path"),this.h()},l(o){t=$(o,"DIV",{class:!0});var s=D(t);n=ie(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=D(n);r=ie(u,"path",{d:!0}),D(r).forEach(y),u.forEach(y),s.forEach(y),this.h()},h(){f(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),f(n,"width","100%"),f(n,"height","100%"),f(n,"viewBox","-2 -2 50 50"),f(n,"focusable","false"),f(n,"aria-hidden","true"),f(n,"role","presentation"),f(n,"class","svelte-liu9pa"),f(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){K(o,t,s),T(t,n),T(n,r),i||(a=q(t,"click",l),i=!0)},p(o,s){e=o},d(o){o&&y(t),i=!1,a()}}}function aa(e){let t,n,r=e[4](e[9])+"",i,a,l,o,s,u=!e[2]&&!e[3]&&la(e);function d(...c){return e[7](e[11],...c)}return{c(){t=j("div"),n=j("div"),i=ye(),u&&u.c(),a=ye(),this.h()},l(c){t=$(c,"DIV",{class:!0});var h=D(t);n=$(h,"DIV",{class:!0});var _=D(n);_.forEach(y),i=we(h),u&&u.l(h),a=we(h),h.forEach(y),this.h()},h(){f(n,"class","multiSelectItem_label svelte-liu9pa"),f(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(c,h){K(c,t,h),T(t,n),n.innerHTML=r,T(t,i),u&&u.m(t,null),T(t,a),o||(s=q(t,"click",d),o=!0)},p(c,h){e=c,h&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,h):(u=la(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),h&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&f(t,"class",l)},d(c){c&&y(t),u&&u.d(),o=!1,s()}}}function M0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=aa(ia(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Te()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=Te()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,[a]){if(a&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const o=ia(i,n,l);r[l]?r[l].p(o,a):(r[l]=aa(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Be,o:Be,d(i){Ui(r,i),i&&y(t)}}}function C0(e,t,n){const r=Gi();let{value:i=[]}=t,{activeValue:a=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:s=void 0}=t;function u(h,_){_.stopPropagation(),r("multiItemClear",{i:h})}const d=(h,_)=>u(h,_),c=(h,_)=>o?u(h,_):{};return e.$$set=h=>{"value"in h&&n(0,i=h.value),"activeValue"in h&&n(1,a=h.activeValue),"isDisabled"in h&&n(2,l=h.isDisabled),"multiFullItemClearable"in h&&n(3,o=h.multiFullItemClearable),"getSelectionLabel"in h&&n(4,s=h.getSelectionLabel)},[i,a,l,o,s,u,d,c]}class L0 extends Tt{constructor(t){super(),St(this,t,C0,M0,Mt,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function oa(e,t,n){const r=e.slice();return r[23]=t[n],r}const N0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),sa=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function D0(e){let t;return{c(){t=ge("Missing template")},l(n){t=pe(n,"Missing template")},m(n,r){K(n,t,r)},d(n){n&&y(t)}}}function ua(e,t){let n,r,i;const a=t[15].default,l=Yo(a,t,t[14],sa),o=l||D0();return{key:e,first:null,c(){n=j("svelte-virtual-list-row"),o&&o.c(),r=ye(),this.h()},l(s){n=$(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=D(n);o&&o.l(u),r=we(u),u.forEach(y),this.h()},h(){gi(n,"class","svelte-g2cagw"),this.first=n},m(s,u){K(s,n,u),o&&o.m(n,null),T(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&Xo(l,a,t,t[14],i?Wo(a,t[14],u,N0):xo(t[14]),sa)},i(s){i||(me(o,s),i=!0)},o(s){ke(o,s),i=!1},d(s){s&&y(n),o&&o.d(s)}}}function O0(e){let t,n,r=[],i=new Map,a,l,o,s,u=e[5];const d=c=>c[23].index;for(let c=0;c<u.length;c+=1){let h=oa(e,u,c),_=d(h);i.set(_,r[c]=ua(_,h))}return{c(){t=j("svelte-virtual-list-viewport"),n=j("svelte-virtual-list-contents");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){t=$(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var h=D(t);n=$(h,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=D(n);for(let p=0;p<r.length;p+=1)r[p].l(_);_.forEach(y),h.forEach(y),this.h()},h(){yn(n,"padding-top",e[6]+"px"),yn(n,"padding-bottom",e[7]+"px"),gi(n,"class","svelte-g2cagw"),yn(t,"height",e[0]),gi(t,"class","svelte-g2cagw"),mn(()=>e[18].call(t))},m(c,h){K(c,t,h),T(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),a=Zr(t,e[18].bind(t)),l=!0,o||(s=q(t,"scroll",e[8]),o=!0)},p(c,[h]){h&16418&&(u=c[5],Je(),r=Jt(r,h,d,1,c,u,i,n,Uo,ua,null,oa),Qe()),(!l||h&64)&&yn(n,"padding-top",c[6]+"px"),(!l||h&128)&&yn(n,"padding-bottom",c[7]+"px"),(!l||h&1)&&yn(t,"height",c[0])},i(c){if(!l){for(let h=0;h<u.length;h+=1)me(r[h]);l=!0}},o(c){for(let h=0;h<r.length;h+=1)ke(r[h]);l=!1},d(c){c&&y(t);for(let h=0;h<r.length;h+=1)r[h].d();e[16](null),e[17](null),a(),o=!1,s()}}}function R0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:a=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:d=0}=t,c=[],h,_,p,E=0,m,w,b=0,I=0,g;async function k(L,M,z){const{scrollTop:P}=_;await Er();let x=b-P,S=u;for(;x<M&&S<L.length;){let le=h[S-u];le||(n(10,d=S+1),await Er(),le=h[S-u]);const te=c[S]=z||le.offsetHeight;x+=te,S+=1}n(10,d=S);const O=L.length-d;g=(b+x)/d,n(7,I=O*g),c.length=L.length,_&&n(3,_.scrollTop=0,_)}async function B(){const{scrollTop:L}=_,M=u;for(let S=0;S<h.length;S+=1)c[u+S]=o||h[S].offsetHeight;let z=0,P=0;for(;z<a.length;){const S=c[z]||g;if(P+S>L){n(9,u=z),n(6,b=P);break}P+=S,z+=1}for(;z<a.length&&(P+=c[z]||g,z+=1,!(P>L+E)););n(10,d=z);const x=a.length-d;for(g=P/d;z<a.length;)c[z++]=g;if(n(7,I=x*g),u<M){await Er();let S=0,O=0;for(let te=u;te<M;te+=1)h[te-u]&&(S+=c[te],O+=o||h[te-u].offsetHeight);const le=O-S;_.scrollTo(0,L+le)}}qr(()=>{h=p.getElementsByTagName("svelte-virtual-list-row"),n(13,w=!0)});function X(L){ut[L?"unshift":"push"](()=>{p=L,n(4,p)})}function F(L){ut[L?"unshift":"push"](()=>{_=L,n(3,_)})}function N(){E=this.offsetHeight,n(2,E)}return e.$$set=L=>{"items"in L&&n(11,a=L.items),"height"in L&&n(0,l=L.height),"itemHeight"in L&&n(12,o=L.itemHeight),"hoverItemIndex"in L&&n(1,s=L.hoverItemIndex),"start"in L&&n(9,u=L.start),"end"in L&&n(10,d=L.end),"$$scope"in L&&n(14,i=L.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,m=a.slice(u,d).map((L,M)=>({index:M+u,data:L}))),e.$$.dirty&14340&&w&&k(a,E,o)},[l,s,E,_,p,m,b,I,B,u,d,a,o,w,i,r,X,F,N]}class V0 extends Tt{constructor(t){super(),St(this,t,R0,O0,Mt,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function F0(e){let t,n;return{c(){t=re("svg"),n=re("path"),this.h()},l(r){t=ie(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=D(t);n=ie(i,"path",{fill:!0,d:!0}),D(n).forEach(y),i.forEach(y),this.h()},h(){f(n,"fill","currentColor"),f(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),f(t,"width","100%"),f(t,"height","100%"),f(t,"viewBox","-2 -2 50 50"),f(t,"focusable","false"),f(t,"aria-hidden","true"),f(t,"role","presentation")},m(r,i){K(r,t,i),T(t,n)},p:Be,i:Be,o:Be,d(r){r&&y(t)}}}class H0 extends Tt{constructor(t){super(),St(this,t,null,F0,Mt,{})}}function B0(e,t,n){let r;return function(){let a=this,l=arguments,o=function(){r=null,n||e.apply(a,l)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,l)}}function fa(e,t,n){const r=e.slice();return r[103]=t[n],r}function ca(e){let t,n,r,i,a;return{c(){t=j("span"),n=ge(e[33]),r=ye(),i=j("span"),a=ge(e[32]),this.h()},l(l){t=$(l,"SPAN",{id:!0});var o=D(t);n=pe(o,e[33]),o.forEach(y),r=we(l),i=$(l,"SPAN",{id:!0});var s=D(i);a=pe(s,e[32]),s.forEach(y),this.h()},h(){f(t,"id","aria-selection"),f(i,"id","aria-context")},m(l,o){K(l,t,o),T(t,n),K(l,r,o),K(l,i,o),T(i,a)},p(l,o){o[1]&4&&Ye(n,l[33]),o[1]&2&&Ye(a,l[32])},d(l){l&&y(t),l&&y(r),l&&y(i)}}}function ha(e){let t,n,r;const i=[e[18]];var a=e[17];function l(o){let s={};for(let u=0;u<i.length;u+=1)s=Yi(s,i[u]);return{props:s}}return a&&(t=at(a,l())),{c(){t&&Xe(t.$$.fragment),n=Te()},l(o){t&&yt(t.$$.fragment,o),n=Te()},m(o,s){t&&xe(t,o,s),K(o,n,s),r=!0},p(o,s){const u=s[0]&262144?Xi(i,[eo(o[18])]):{};if(a!==(a=o[17])){if(t){Je();const d=t;ke(d.$$.fragment,1,0,()=>{We(d,1)}),Qe()}a?(t=at(a,l()),Xe(t.$$.fragment),me(t.$$.fragment,1),xe(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(o){r||(t&&me(t.$$.fragment,o),r=!0)},o(o){t&&ke(t.$$.fragment,o),r=!1},d(o){o&&y(n),t&&We(t,o)}}}function da(e){let t,n,r;var i=e[26];function a(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=at(i,a(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Xe(t.$$.fragment),n=Te()},l(l){t&&yt(t.$$.fragment,l),n=Te()},m(l,o){t&&xe(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&4&&(s.value=l[2]),o[0]&4096&&(s.getSelectionLabel=l[12]),o[0]&1073741824&&(s.activeValue=l[30]),o[0]&512&&(s.isDisabled=l[9]),o[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){Je();const u=t;ke(u.$$.fragment,1,0,()=>{We(u,1)}),Qe()}i?(t=at(i,a(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),Xe(t.$$.fragment),me(t.$$.fragment,1),xe(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&me(t.$$.fragment,l),r=!0)},o(l){t&&ke(t.$$.fragment,l),r=!1},d(l){l&&y(n),t&&We(t,l)}}}function _a(e){let t,n,r,i,a;var l=e[25];function o(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=at(l,o(e))),{c(){t=j("div"),n&&Xe(n.$$.fragment),this.h()},l(s){t=$(s,"DIV",{class:!0});var u=D(t);n&&yt(n.$$.fragment,u),u.forEach(y),this.h()},h(){f(t,"class","selectedItem svelte-17l1npl")},m(s,u){K(s,t,u),n&&xe(n,t,null),r=!0,i||(a=q(t,"focus",e[40]),i=!0)},p(s,u){const d={};if(u[0]&4&&(d.item=s[2]),u[0]&4096&&(d.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){Je();const c=n;ke(c.$$.fragment,1,0,()=>{We(c,1)}),Qe()}l?(n=at(l,o(s)),Xe(n.$$.fragment),me(n.$$.fragment,1),xe(n,t,null)):n=null}else l&&n.$set(d)},i(s){r||(n&&me(n.$$.fragment,s),r=!0)},o(s){n&&ke(n.$$.fragment,s),r=!1},d(s){s&&y(t),n&&We(n),i=!1,a()}}}function ma(e){let t,n,r,i,a;var l=e[23];function o(s){return{}}return l&&(n=at(l,o())),{c(){t=j("div"),n&&Xe(n.$$.fragment),this.h()},l(s){t=$(s,"DIV",{class:!0,"aria-hidden":!0});var u=D(t);n&&yt(n.$$.fragment,u),u.forEach(y),this.h()},h(){f(t,"class","clearSelect svelte-17l1npl"),f(t,"aria-hidden","true")},m(s,u){K(s,t,u),n&&xe(n,t,null),r=!0,i||(a=q(t,"click",Ko(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){Je();const d=n;ke(d.$$.fragment,1,0,()=>{We(d,1)}),Qe()}l?(n=at(l,o()),Xe(n.$$.fragment),me(n.$$.fragment,1),xe(n,t,null)):n=null}},i(s){r||(n&&me(n.$$.fragment,s),r=!0)},o(s){n&&ke(n.$$.fragment,s),r=!1},d(s){s&&y(t),n&&We(n),i=!1,a()}}}function ga(e){let t;function n(a,l){return a[22]?z0:P0}let r=n(e),i=r(e);return{c(){t=j("div"),i.c(),this.h()},l(a){t=$(a,"DIV",{class:!0,"aria-hidden":!0});var l=D(t);i.l(l),l.forEach(y),this.h()},h(){f(t,"class","indicator svelte-17l1npl"),f(t,"aria-hidden","true")},m(a,l){K(a,t,l),i.m(t,null)},p(a,l){r===(r=n(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,null)))},d(a){a&&y(t),i.d()}}}function P0(e){let t,n;return{c(){t=re("svg"),n=re("path"),this.h()},l(r){t=ie(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=D(t);n=ie(i,"path",{d:!0}),D(n).forEach(y),i.forEach(y),this.h()},h(){f(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),f(t,"width","100%"),f(t,"height","100%"),f(t,"viewBox","0 0 20 20"),f(t,"focusable","false"),f(t,"aria-hidden","true"),f(t,"class","svelte-17l1npl")},m(r,i){K(r,t,i),T(t,n)},p:Be,d(r){r&&y(t)}}}function z0(e){let t,n;return{c(){t=new Zo(!1),n=Te(),this.h()},l(r){t=Jo(r,!1),n=Te(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),K(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&y(n),r&&t.d()}}}function pa(e){let t,n,r;return{c(){t=j("div"),n=re("svg"),r=re("circle"),this.h()},l(i){t=$(i,"DIV",{class:!0});var a=D(t);n=ie(a,"svg",{class:!0,viewBox:!0});var l=D(n);r=ie(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),D(r).forEach(y),l.forEach(y),a.forEach(y),this.h()},h(){f(r,"class","spinner_path svelte-17l1npl"),f(r,"cx","50"),f(r,"cy","50"),f(r,"r","20"),f(r,"fill","none"),f(r,"stroke","currentColor"),f(r,"stroke-width","5"),f(r,"stroke-miterlimit","10"),f(n,"class","spinner_icon svelte-17l1npl"),f(n,"viewBox","25 25 50 50"),f(t,"class","spinner svelte-17l1npl")},m(i,a){K(i,t,a),T(t,n),T(n,r)},d(i){i&&y(t)}}}function va(e){let t,n,r,i;const a=[e[34]];function l(u){e[84](u)}var o=e[24];function s(u){let d={};for(let c=0;c<a.length;c+=1)d=Yi(d,a[c]);return u[28]!==void 0&&(d.hoverItemIndex=u[28]),{props:d}}return o&&(t=at(o,s(e)),ut.push(()=>ml(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Xe(t.$$.fragment),r=Te()},l(u){t&&yt(t.$$.fragment,u),r=Te()},m(u,d){t&&xe(t,u,d),K(u,r,d),i=!0},p(u,d){const c=d[1]&8?Xi(a,[eo(u[34])]):{};if(!n&&d[0]&268435456&&(n=!0,c.hoverItemIndex=u[28],qo(()=>n=!1)),o!==(o=u[24])){if(t){Je();const h=t;ke(h.$$.fragment,1,0,()=>{We(h,1)}),Qe()}o?(t=at(o,s(u)),ut.push(()=>ml(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),Xe(t.$$.fragment),me(t.$$.fragment,1),xe(t,r.parentNode,r)):t=null}else o&&t.$set(c)},i(u){i||(t&&me(t.$$.fragment,u),i=!0)},o(u){t&&ke(t.$$.fragment,u),i=!1},d(u){u&&y(r),t&&We(t,u)}}}function ya(e){let t,n,r;return{c(){t=j("input"),this.h()},l(i){t=$(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){f(t,"name",n=e[16].name),f(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,f(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&f(t,"name",n),a[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&y(t)}}}function wa(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=ba(fa(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Te()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=Te()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,a){if(a[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const o=fa(i,n,l);r[l]?r[l].p(o,a):(r[l]=ba(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){Ui(r,i),i&&y(t)}}}function ba(e){let t,n,r;return{c(){t=j("input"),this.h()},l(i){t=$(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){f(t,"name",n=e[16].name),f(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,f(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&f(t,"name",n),a[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&y(t)}}}function G0(e){let t,n,r,i,a,l,o,s,u,d,c,h,_,p,E,m,w,b,I=e[1]&&ca(e),g=e[17]&&ha(e),k=e[35]&&da(e),B=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],X={};for(let S=0;S<B.length;S+=1)X=Yi(X,B[S]);let F=!e[7]&&e[29]&&_a(e),N=e[37]&&ma(e),L=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&ga(e),M=e[4]&&pa(),z=e[5]&&va(e),P=(!e[7]||e[7]&&!e[35])&&ya(e),x=e[7]&&e[35]&&wa(e);return{c(){t=j("div"),n=j("span"),I&&I.c(),r=ye(),g&&g.c(),i=ye(),k&&k.c(),a=ye(),l=j("input"),s=ye(),F&&F.c(),u=ye(),N&&N.c(),d=ye(),L&&L.c(),c=ye(),M&&M.c(),h=ye(),z&&z.c(),_=ye(),P&&P.c(),p=ye(),x&&x.c(),this.h()},l(S){t=$(S,"DIV",{class:!0,style:!0});var O=D(t);n=$(O,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var le=D(n);I&&I.l(le),le.forEach(y),r=we(O),g&&g.l(O),i=we(O),k&&k.l(O),a=we(O),l=$(O,"INPUT",{placeholder:!0,style:!0}),s=we(O),F&&F.l(O),u=we(O),N&&N.l(O),d=we(O),L&&L.l(O),c=we(O),M&&M.l(O),h=we(O),z&&z.l(O),_=we(O),P&&P.l(O),p=we(O),x&&x.l(O),O.forEach(y),this.h()},h(){f(n,"aria-live","polite"),f(n,"aria-atomic","false"),f(n,"aria-relevant","additions text"),f(n,"class","a11yText svelte-17l1npl"),dl(l,X),Ze(l,"svelte-17l1npl",!0),f(t,"class",E="selectContainer "+e[21]+" svelte-17l1npl"),f(t,"style",e[11]),Ze(t,"hasError",e[10]),Ze(t,"multiSelect",e[7]),Ze(t,"disabled",e[9]),Ze(t,"focused",e[1])},m(S,O){K(S,t,O),T(t,n),I&&I.m(n,null),T(t,r),g&&g.m(t,null),T(t,i),k&&k.m(t,null),T(t,a),T(t,l),l.autofocus&&l.focus(),e[82](l),_l(l,e[3]),T(t,s),F&&F.m(t,null),T(t,u),N&&N.m(t,null),T(t,d),L&&L.m(t,null),T(t,c),M&&M.m(t,null),T(t,h),z&&z.m(t,null),T(t,_),P&&P.m(t,null),T(t,p),x&&x.m(t,null),e[85](t),m=!0,w||(b=[q(window,"click",e[41]),q(window,"focusin",e[41]),q(window,"keydown",e[39]),q(l,"focus",e[40]),q(l,"input",e[83]),q(t,"click",e[42])],w=!0)},p(S,O){S[1]?I?I.p(S,O):(I=ca(S),I.c(),I.m(n,null)):I&&(I.d(1),I=null),S[17]?g?(g.p(S,O),O[0]&131072&&me(g,1)):(g=ha(S),g.c(),me(g,1),g.m(t,i)):g&&(Je(),ke(g,1,1,()=>{g=null}),Qe()),S[35]?k?(k.p(S,O),O[1]&16&&me(k,1)):(k=da(S),k.c(),me(k,1),k.m(t,a)):k&&(Je(),ke(k,1,1,()=>{k=null}),Qe()),dl(l,X=Xi(B,[(!m||O[0]&8192&&o!==(o=!S[13]))&&{readOnly:o},O[1]&1&&S[31],(!m||O[1]&32)&&{placeholder:S[36]},(!m||O[0]&16384)&&{style:S[14]},(!m||O[0]&512)&&{disabled:S[9]}])),O[0]&8&&l.value!==S[3]&&_l(l,S[3]),Ze(l,"svelte-17l1npl",!0),!S[7]&&S[29]?F?(F.p(S,O),O[0]&536871040&&me(F,1)):(F=_a(S),F.c(),me(F,1),F.m(t,u)):F&&(Je(),ke(F,1,1,()=>{F=null}),Qe()),S[37]?N?(N.p(S,O),O[1]&64&&me(N,1)):(N=ma(S),N.c(),me(N,1),N.m(t,d)):N&&(Je(),ke(N,1,1,()=>{N=null}),Qe()),!S[37]&&(S[20]||S[19]&&!S[2]||!S[13]&&!S[9]&&!S[4]&&(S[29]&&!S[15]||!S[29]))?L?L.p(S,O):(L=ga(S),L.c(),L.m(t,c)):L&&(L.d(1),L=null),S[4]?M||(M=pa(),M.c(),M.m(t,h)):M&&(M.d(1),M=null),S[5]?z?(z.p(S,O),O[0]&32&&me(z,1)):(z=va(S),z.c(),me(z,1),z.m(t,_)):z&&(Je(),ke(z,1,1,()=>{z=null}),Qe()),!S[7]||S[7]&&!S[35]?P?P.p(S,O):(P=ya(S),P.c(),P.m(t,p)):P&&(P.d(1),P=null),S[7]&&S[35]?x?x.p(S,O):(x=wa(S),x.c(),x.m(t,null)):x&&(x.d(1),x=null),(!m||O[0]&2097152&&E!==(E="selectContainer "+S[21]+" svelte-17l1npl"))&&f(t,"class",E),(!m||O[0]&2048)&&f(t,"style",S[11]),(!m||O[0]&2098176)&&Ze(t,"hasError",S[10]),(!m||O[0]&2097280)&&Ze(t,"multiSelect",S[7]),(!m||O[0]&2097664)&&Ze(t,"disabled",S[9]),(!m||O[0]&2097154)&&Ze(t,"focused",S[1])},i(S){m||(me(g),me(k),me(F),me(N),me(z),m=!0)},o(S){ke(g),ke(k),ke(F),ke(N),ke(z),m=!1},d(S){S&&y(t),I&&I.d(),g&&g.d(),k&&k.d(),e[82](null),F&&F.d(),N&&N.d(),L&&L.d(),M&&M.d(),z&&z.d(),P&&P.d(),x&&x.d(),e[85](null),w=!1,mt(b)}}}function ka(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function U0(e,t,n){let r,i,a,l,o,s,u,d;const c=Gi();let{id:h=null}=t,{container:_=void 0}=t,{input:p=void 0}=t,{isMulti:E=!1}=t,{multiFullItemClearable:m=!1}=t,{isDisabled:w=!1}=t,{isCreatable:b=!1}=t,{isFocused:I=!1}=t,{value:g=null}=t,{filterText:k=""}=t,{placeholder:B="Select..."}=t,{placeholderAlwaysShow:X=!1}=t,{items:F=null}=t,{itemFilter:N=(v,fe,Ae)=>`${v}`.toLowerCase().includes(fe.toLowerCase())}=t,{groupBy:L=void 0}=t,{groupFilter:M=v=>v}=t,{isGroupHeaderSelectable:z=!1}=t,{getGroupHeaderLabel:P=v=>v[x]||v.id}=t,{labelIdentifier:x="label"}=t,{getOptionLabel:S=(v,fe)=>v.isCreator?`Create "${fe}"`:v[x]}=t,{optionIdentifier:O="value"}=t,{loadOptions:le=void 0}=t,{hasError:te=!1}=t,{containerStyles:Q=""}=t,{getSelectionLabel:ce=v=>v?v[x]:null}=t,{createGroupHeaderItem:H=v=>({value:v,label:v})}=t,{createItem:G=v=>({value:v,label:v})}=t;const ee=()=>r;let{isSearchable:ae=!0}=t,{inputStyles:he=""}=t,{isClearable:Ce=!0}=t,{isWaiting:oe=!1}=t,{listPlacement:R="auto"}=t,{listOpen:ne=!1}=t,{isVirtualList:C=!1}=t,{loadOptionsInterval:J=300}=t,{noOptionsMessage:de="No options"}=t,{hideEmptyState:se=!1}=t,{inputAttributes:ve={}}=t,{listAutoWidth:Re=!0}=t,{itemHeight:ze=40}=t,{Icon:ue=void 0}=t,{iconProps:Se={}}=t,{showChevron:Oe=!1}=t,{showIndicator:U=!1}=t,{containerClasses:Me=""}=t,{indicatorSvg:V=void 0}=t,{listOffset:A=5}=t,{ClearIcon:Y=H0}=t,{Item:_e=Po}=t,{List:De=I0}=t,{Selection:Fe=S0}=t,{MultiSelection:Le=L0}=t,{VirtualList:W=V0}=t;function Ne(v){if(v.loadOptions&&v.filterText.length>0)return;if(!v.items)return[];v.items&&v.items.length>0&&typeof v.items[0]!="object"&&(v.items=ka(v.items));let fe=v.items.filter(Ae=>{let Ue=N(S(Ae,v.filterText),v.filterText,Ae);return Ue&&v.isMulti&&v.value&&Array.isArray(v.value)&&(Ue=!v.value.some(vt=>vt[v.optionIdentifier]===Ae[v.optionIdentifier])),Ue});return v.groupBy&&(fe=tn(fe)),v.isCreatable&&(fe=Pe(fe,v.filterText)),fe}function Pe(v,fe){if(fe.length===0)return v;const Ae=G(fe);return v[0]&&fe===v[0][x]?v:(Ae.isCreator=!0,[...v,Ae])}let{selectedValue:Ve=null}=t,Ee,He,je,ft,gt,et;const ct=B0(async()=>{n(4,oe=!0);let v=await le(k).catch(fe=>{console.warn("svelte-select loadOptions error :>> ",fe),c("error",{type:"loadOptions",details:fe})});v&&!v.cancelled&&(v?(v&&v.length>0&&typeof v[0]!="object"&&(v=ka(v)),n(81,r=[...v]),c("loaded",{items:r})):n(81,r=[]),b&&n(81,r=Pe(r,k)),n(4,oe=!1),n(1,I=!0),n(5,ne=!0))},J);function Ft(){typeof g=="string"?n(2,g={[O]:g,label:g}):E&&Array.isArray(g)&&g.length>0&&n(2,g=g.map(v=>typeof v=="string"?{value:v,label:v}:v))}let ot;function Rn(){n(31,ot=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ve)),h&&n(31,ot.id=h,ot),ae||n(31,ot.readonly=!0,ot)}function tn(v){const fe=[],Ae={};v.forEach(vt=>{const bt=L(vt);fe.includes(bt)||(fe.push(bt),Ae[bt]=[],bt&&Ae[bt].push(Object.assign(H(bt,vt),{id:bt,isGroupHeader:!0,isSelectable:z}))),Ae[bt].push(Object.assign({isGroupItem:!!bt},vt))});const Ue=[];return M(fe).forEach(vt=>{Ue.push(...Ae[vt])}),Ue}function Vn(){if(E){JSON.stringify(g)!==JSON.stringify(He)&&gn()&&c("select",g);return}(!He||JSON.stringify(g[O])!==JSON.stringify(He[O]))&&c("select",g)}function Fn(){I||ne?pn():p&&p.blur()}function nn(){g&&(Array.isArray(g)?n(2,g=[...g]):n(2,g=[g]))}function Hn(){g&&n(2,g=null)}function tt(){k.length!==0&&(n(1,I=!0),n(5,ne=!0),le?ct():(n(5,ne=!0),E&&n(30,Ee=void 0)))}$a(async()=>{n(77,He=g),n(78,je=k),n(79,ft=I),n(80,gt=E)});function gn(){let v=!0;if(g){const fe=[],Ae=[];g.forEach(Ue=>{fe.includes(Ue[O])?v=!1:(fe.push(Ue[O]),Ae.push(Ue))}),v||n(2,g=Ae)}return v}function Bn(v){let fe=v?v[O]:g[O];return F.find(Ae=>Ae[O]===fe)}function Ge(v){!v||v.length===0||v.some(fe=>typeof fe!="object")||!g||(E?g.some(fe=>!fe||!fe[O]):!g[O])||(Array.isArray(g)?n(2,g=g.map(fe=>Bn(fe)||fe)):n(2,g=Bn()||g))}function Pn(v){const{detail:fe}=v,Ae=g[fe?fe.i:g.length-1];g.length===1?n(2,g=void 0):n(2,g=g.filter(Ue=>Ue!==Ae)),c("clear",Ae)}function lr(v){if(!!I)switch(v.key){case"ArrowDown":v.preventDefault(),n(5,ne=!0),n(30,Ee=void 0);break;case"ArrowUp":v.preventDefault(),n(5,ne=!0),n(30,Ee=void 0);break;case"Tab":ne||n(1,I=!1);break;case"Backspace":if(!E||k.length>0)return;if(E&&g&&g.length>0){if(Pn(Ee!==void 0?Ee:g.length-1),Ee===0||Ee===void 0)break;n(30,Ee=g.length>Ee?Ee-1:void 0)}break;case"ArrowLeft":if(!E||k.length>0)return;Ee===void 0?n(30,Ee=g.length-1):g.length>Ee&&Ee!==0&&n(30,Ee-=1);break;case"ArrowRight":if(!E||k.length>0||Ee===void 0)return;Ee===g.length-1?n(30,Ee=void 0):Ee<g.length-1&&n(30,Ee+=1);break}}function pn(){n(1,I=!0),p&&p.focus()}function ar(v){if(!_)return;const fe=v.path&&v.path.length>0?v.path[0]:v.target;_.contains(fe)||_.contains(v.relatedTarget)||(n(1,I=!1),n(5,ne=!1),n(30,Ee=void 0),p&&p.blur())}function or(){w||(n(1,I=!0),n(5,ne=!ne))}function sr(){n(2,g=void 0),n(5,ne=!1),c("clear",g),pn()}qr(()=>{I&&p&&p.focus()});function Z(v){const{detail:fe}=v;if(fe){n(3,k="");const Ae=Object.assign({},fe);(!Ae.isGroupHeader||Ae.isSelectable)&&(E?n(2,g=g?g.concat([Ae]):[Ae]):n(2,g=Ae),n(2,g),setTimeout(()=>{n(5,ne=!1),n(30,Ee=void 0)}))}}function be(v){const{detail:fe}=v;E?(n(2,g=g||[]),n(2,g=[...g,G(fe)])):n(2,g=G(fe)),c("itemCreated",fe),n(3,k=""),n(5,ne=!1),n(30,Ee=void 0)}function pt(){n(3,k=""),n(5,ne=!1)}let{ariaValues:$e=v=>`Option ${v}, selected.`}=t,{ariaListOpen:Ht=(v,fe)=>`You are currently focused on option ${v}. There are ${fe} results available.`}=t,{ariaFocused:Bt=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function rn(){let v;return E&&g.length>0?v=g.map(fe=>ce(fe)).join(", "):v=ce(g),$e(v)}function Pt(){if(!I||!r||r.length===0)return"";let v=r[et];if(ne&&v){let fe=ce(v),Ae=r?r.length:0;return Ht(fe,Ae)}else return Bt()}function kt(v){ut[v?"unshift":"push"](()=>{p=v,n(6,p)})}function ln(){k=this.value,n(3,k)}function vn(v){et=v,n(28,et)}function an(v){ut[v?"unshift":"push"](()=>{_=v,n(0,_)})}return e.$$set=v=>{"id"in v&&n(46,h=v.id),"container"in v&&n(0,_=v.container),"input"in v&&n(6,p=v.input),"isMulti"in v&&n(7,E=v.isMulti),"multiFullItemClearable"in v&&n(8,m=v.multiFullItemClearable),"isDisabled"in v&&n(9,w=v.isDisabled),"isCreatable"in v&&n(47,b=v.isCreatable),"isFocused"in v&&n(1,I=v.isFocused),"value"in v&&n(2,g=v.value),"filterText"in v&&n(3,k=v.filterText),"placeholder"in v&&n(48,B=v.placeholder),"placeholderAlwaysShow"in v&&n(49,X=v.placeholderAlwaysShow),"items"in v&&n(50,F=v.items),"itemFilter"in v&&n(51,N=v.itemFilter),"groupBy"in v&&n(52,L=v.groupBy),"groupFilter"in v&&n(53,M=v.groupFilter),"isGroupHeaderSelectable"in v&&n(54,z=v.isGroupHeaderSelectable),"getGroupHeaderLabel"in v&&n(55,P=v.getGroupHeaderLabel),"labelIdentifier"in v&&n(56,x=v.labelIdentifier),"getOptionLabel"in v&&n(57,S=v.getOptionLabel),"optionIdentifier"in v&&n(58,O=v.optionIdentifier),"loadOptions"in v&&n(59,le=v.loadOptions),"hasError"in v&&n(10,te=v.hasError),"containerStyles"in v&&n(11,Q=v.containerStyles),"getSelectionLabel"in v&&n(12,ce=v.getSelectionLabel),"createGroupHeaderItem"in v&&n(60,H=v.createGroupHeaderItem),"createItem"in v&&n(61,G=v.createItem),"isSearchable"in v&&n(13,ae=v.isSearchable),"inputStyles"in v&&n(14,he=v.inputStyles),"isClearable"in v&&n(15,Ce=v.isClearable),"isWaiting"in v&&n(4,oe=v.isWaiting),"listPlacement"in v&&n(63,R=v.listPlacement),"listOpen"in v&&n(5,ne=v.listOpen),"isVirtualList"in v&&n(64,C=v.isVirtualList),"loadOptionsInterval"in v&&n(65,J=v.loadOptionsInterval),"noOptionsMessage"in v&&n(66,de=v.noOptionsMessage),"hideEmptyState"in v&&n(67,se=v.hideEmptyState),"inputAttributes"in v&&n(16,ve=v.inputAttributes),"listAutoWidth"in v&&n(68,Re=v.listAutoWidth),"itemHeight"in v&&n(69,ze=v.itemHeight),"Icon"in v&&n(17,ue=v.Icon),"iconProps"in v&&n(18,Se=v.iconProps),"showChevron"in v&&n(19,Oe=v.showChevron),"showIndicator"in v&&n(20,U=v.showIndicator),"containerClasses"in v&&n(21,Me=v.containerClasses),"indicatorSvg"in v&&n(22,V=v.indicatorSvg),"listOffset"in v&&n(70,A=v.listOffset),"ClearIcon"in v&&n(23,Y=v.ClearIcon),"Item"in v&&n(71,_e=v.Item),"List"in v&&n(24,De=v.List),"Selection"in v&&n(25,Fe=v.Selection),"MultiSelection"in v&&n(26,Le=v.MultiSelection),"VirtualList"in v&&n(72,W=v.VirtualList),"selectedValue"in v&&n(73,Ve=v.selectedValue),"ariaValues"in v&&n(74,$e=v.ariaValues),"ariaListOpen"in v&&n(75,Ht=v.ariaListOpen),"ariaFocused"in v&&n(76,Bt=v.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Ne({loadOptions:le,filterText:k,items:F,value:g,isMulti:E,optionIdentifier:O,groupBy:L,isCreatable:b})),e.$$.dirty[2]&2048&&Ve&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&Ge(F),e.$$.dirty[0]&4&&g&&Ft(),e.$$.dirty[0]&73728&&(ve||!ae)&&Rn(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(E&&nn(),gt&&!E&&Hn()),e.$$.dirty[0]&132&&E&&g&&g.length>1&&gn(),e.$$.dirty[0]&4&&g&&Vn(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!g&&E&&He&&c("select",g),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&I!==ft&&Fn(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&k!==je&&tt(),e.$$.dirty[0]&12&&n(29,i=g&&k.length===0),e.$$.dirty[0]&536904208&&n(37,a=i&&Ce&&!w&&!oe),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=X&&E?B:g?"":B),e.$$.dirty[0]&132&&n(35,o=E&&g&&g.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:_e,filterText:k,optionIdentifier:O,noOptionsMessage:de,hideEmptyState:se,isVirtualList:C,VirtualList:W,value:g,isMulti:E,getGroupHeaderLabel:P,items:r,itemHeight:ze,getOptionLabel:S,listPlacement:R,parent:_,listAutoWidth:Re,listOffset:A}),e.$$.dirty[0]&132&&n(33,u=g?rn():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,d=Pt())},[_,I,g,k,oe,ne,p,E,m,w,te,Q,ce,ae,he,Ce,ve,ue,Se,Oe,U,Me,V,Y,De,Fe,Le,sr,et,i,Ee,ot,d,u,s,o,l,a,Pn,lr,pn,ar,or,Z,be,pt,h,b,B,X,F,N,L,M,z,P,x,S,O,le,H,G,ee,R,C,J,de,se,Re,ze,A,_e,W,Ve,$e,Ht,Bt,He,je,ft,gt,r,kt,ln,vn,an]}class Ea extends Tt{constructor(t){super(),St(this,t,U0,G0,Mt,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function Y0(e){const t=e-1;return t*t*t+1}function xr(e,{delay:t=0,duration:n=400,easing:r=Qo}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}function X0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),a=i.transform==="none"?"":i.transform,[l,o]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*o/n.height-(n.top+o),{delay:d=0,duration:c=_=>Math.sqrt(_)*120,easing:h=Y0}=r;return{delay:d,duration:Ke(c)?c(Math.sqrt(s*s+u*u)):c,easing:h,css:(_,p)=>{const E=p*s,m=p*u,w=_+p*t.width/n.width,b=_+p*t.height/n.height;return`transform: ${a} translate(${E}px, ${m}px) scale(${w}, ${b});`}}}const un=Wi([2020]),st=Wi(new Set),cn=Wi(!0);class x0{constructor(t){qe(this,"id");qe(this,"code");qe(this,"name");qe(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class Lr{constructor(t){qe(this,"id");qe(this,"code");qe(this,"name");qe(this,"level");qe(this,"parent_id");qe(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class xt{constructor(t,n,r){qe(this,"location_id");qe(this,"location");qe(this,"partner_id");qe(this,"partner");qe(this,"product_id");qe(this,"product");qe(this,"year");qe(this,"export_value");qe(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}const jt="#377eb8",$t="#ff7f00",Wr="rgba(77, 175, 74, 0.65)",Kr="rgba(228, 26, 29, 0.65)";function Ia(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function Aa(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function Ta(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function W0(e){let t,n,r,i,a;return{c(){t=re("text"),n=ge("No valid data for this pair."),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=D(t);n=pe(o,"No valid data for this pair."),o.forEach(y),this.h()},h(){f(t,"x",r=e[3]/2),f(t,"y",i=e[9]/2),f(t,"alignment-baseline","central"),f(t,"text-anchor","middle")},m(l,o){K(l,t,o),T(t,n)},p(l,o){o[0]&8&&r!==(r=l[3]/2)&&f(t,"x",r),o[0]&512&&i!==(i=l[9]/2)&&f(t,"y",i)},i(l){a||mn(()=>{a=xi(t,xr,{}),a.start()})},o:Be,d(l){l&&y(t)}}}function K0(e){var se,ve,Re,ze,ue,Se,Oe,U,Me,V;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,a,l,o=e[6].length>1?`from ${e[6][0]} to ${e[6][e[6].length-1]}`:`in ${e[6]}`,s,u=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",d,c,h,_,p=(((ve=(se=e[2])==null?void 0:se.name.length)!=null?ve:0)>19?((ze=(Re=e[2])==null?void 0:Re.name)!=null?ze:"").substring(0,19)+"...":(ue=e[2])==null?void 0:ue.name)+" ",E,m=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",w,b,I=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",g,k,B=(((Oe=(Se=e[2])==null?void 0:Se.name.length)!=null?Oe:0)>19?((Me=(U=e[2])==null?void 0:U.name)!=null?Me:"").substring(0,19)+"...":(V=e[2])==null?void 0:V.name)+"",X,F,N,L=[],M=new Map,z,P=[],x=new Map,S,O=[],le=new Map,te,Q,ce,H,G,ee,ae,he,Ce,oe=e[10];const R=A=>A[44].product_id;for(let A=0;A<oe.length;A+=1){let Y=Ta(e,oe,A),_e=R(Y);M.set(_e,L[A]=Ma(_e,Y))}let ne=e[10];const C=A=>A[46];for(let A=0;A<ne.length;A+=1){let Y=Aa(e,ne,A),_e=C(Y);x.set(_e,P[A]=Ca(_e,Y))}let J=e[10];const de=A=>A[44].product_id;for(let A=0;A<J.length;A+=1){let Y=Ia(e,J,A),_e=de(Y);le.set(_e,O[A]=La(_e,Y))}return{c(){t=re("text"),n=ge("Sector "),i=ge(r),a=re("text"),l=ge("Trade Flow "),s=ge(o),d=ge(u),h=re("text"),_=ge("Export to "),E=ge(p),w=ge(m),b=re("text"),g=ge(I),k=ge("\xA0Import from "),X=ge(B),N=re("g");for(let A=0;A<L.length;A+=1)L[A].c();z=Te();for(let A=0;A<P.length;A+=1)P[A].c();S=Te();for(let A=0;A<O.length;A+=1)O[A].c();te=re("line"),H=re("line"),ee=re("g"),ae=re("g"),this.h()},l(A){t=ie(A,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var Y=D(t);n=pe(Y,"Sector "),i=pe(Y,r),Y.forEach(y),a=ie(A,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var _e=D(a);l=pe(_e,"Trade Flow "),s=pe(_e,o),d=pe(_e,u),_e.forEach(y),h=ie(A,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var De=D(h);_=pe(De,"Export to "),E=pe(De,p),w=pe(De,m),De.forEach(y),b=ie(A,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var Fe=D(b);g=pe(Fe,I),k=pe(Fe,"\xA0Import from "),X=pe(Fe,B),Fe.forEach(y),N=ie(A,"g",{id:!0,transform:!0});var Le=D(N);for(let W=0;W<L.length;W+=1)L[W].l(Le);z=Te();for(let W=0;W<P.length;W+=1)P[W].l(Le);S=Te();for(let W=0;W<O.length;W+=1)O[W].l(Le);te=ie(Le,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),D(te).forEach(y),H=ie(Le,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),D(H).forEach(y),ee=ie(Le,"g",{id:!0}),D(ee).forEach(y),Le.forEach(y),ae=ie(A,"g",{id:!0,class:!0}),D(ae).forEach(y),this.h()},h(){var A,Y,_e,De;f(t,"text-anchor","start"),f(t,"class","chart-header sortable svelte-vobgsx"),f(t,"x",15),f(t,"y",xn/2),f(t,"alignment-baseline","hanging"),f(a,"text-anchor","middle"),f(a,"class","chart-header sortable svelte-vobgsx"),f(a,"x",c=(e[3]-Dt)/2+Dt-20),f(a,"y",xn/2-7),f(a,"alignment-baseline","hanging"),f(h,"class","from-label sortable svelte-vobgsx"),f(h,"x",Dt),f(h,"y",xn/2-5),f(h,"alignment-baseline","hanging"),f(h,"font-size","13"),f(b,"class","from-label sortable svelte-vobgsx"),f(b,"x",F=e[3]-20),f(b,"y",xn/2-5),f(b,"text-anchor","end"),f(b,"alignment-baseline","hanging"),f(b,"font-size","13"),f(te,"id","midline"),f(te,"transform",Q=`translate(${e[5](0)},0)`),f(te,"y1",20),f(te,"y2",ce=(((Y=(A=e[10])==null?void 0:A.length)!=null?Y:0)+1)*lt),f(te,"stroke","rgba(0,0,0,0.7)"),f(te,"stroke-width","1"),f(te,"class","svelte-vobgsx"),f(H,"x1",Dt),f(H,"y1",0),f(H,"x2",Dt),f(H,"y2",G=(((De=(_e=e[10])==null?void 0:_e.length)!=null?De:0)+1)*lt),f(H,"stroke","rgba(0,0,0,0.1)"),f(H,"stroke-width","1"),f(ee,"id","axis"),f(N,"id","bar-content"),f(N,"transform",`translate(${0},${xn})`),f(ae,"id","bar-chart-tooltip"),f(ae,"class","tooltip")},m(A,Y){K(A,t,Y),T(t,n),T(t,i),K(A,a,Y),T(a,l),T(a,s),T(a,d),K(A,h,Y),T(h,_),T(h,E),T(h,w),K(A,b,Y),T(b,g),T(b,k),T(b,X),K(A,N,Y);for(let _e=0;_e<L.length;_e+=1)L[_e].m(N,null);T(N,z);for(let _e=0;_e<P.length;_e+=1)P[_e].m(N,null);T(N,S);for(let _e=0;_e<O.length;_e+=1)O[_e].m(N,null);T(N,te),T(N,H),T(N,ee),e[36](ee),K(A,ae,Y),he||(Ce=[q(t,"click",e[29]),q(t,"keydown",J0),q(a,"click",e[30]),q(a,"keydown",Q0),q(h,"keydown",j0),q(h,"click",e[31]),q(b,"click",e[32]),q(b,"keydown",$0)],he=!0)},p(A,Y){var _e,De,Fe,Le,W,Ne,Pe,Ve,Ee,He,je,ft,gt,et;if(Y[0]&3&&r!==(r=A[1]==A[0].AlphaUp?"\u2191":A[1]==A[0].AlphaDown?"\u2193":" ")&&Ye(i,r),Y[0]&64&&o!==(o=A[6].length>1?`from ${A[6][0]} to ${A[6][A[6].length-1]}`:`in ${A[6]}`)&&Ye(s,o),Y[0]&3&&u!==(u=A[1]==A[0].Up?"\u2191":A[1]==A[0].Down?"\u2193":" ")&&Ye(d,u),Y[0]&8&&c!==(c=(A[3]-Dt)/2+Dt-20)&&f(a,"x",c),Y[0]&4&&p!==(p=(((De=(_e=A[2])==null?void 0:_e.name.length)!=null?De:0)>19?((Le=(Fe=A[2])==null?void 0:Fe.name)!=null?Le:"").substring(0,19)+"...":(W=A[2])==null?void 0:W.name)+" ")&&Ye(E,p),Y[0]&3&&m!==(m=A[1]==A[0].LeftUp?"\u2191":A[1]==A[0].LeftDown?"\u2193":" ")&&Ye(w,m),Y[0]&3&&I!==(I=A[1]==A[0].RightUp?"\u2191":A[1]==A[0].RightDown?"\u2193":" ")&&Ye(g,I),Y[0]&4&&B!==(B=(((Pe=(Ne=A[2])==null?void 0:Ne.name.length)!=null?Pe:0)>19?((Ee=(Ve=A[2])==null?void 0:Ve.name)!=null?Ee:"").substring(0,19)+"...":(He=A[2])==null?void 0:He.name)+"")&&Ye(X,B),Y[0]&8&&F!==(F=A[3]-20)&&f(b,"x",F),Y[0]&1032&&(oe=A[10],L=Jt(L,Y,R,1,A,oe,M,N,Cn,Ma,z,Ta)),Y[0]&64672&&(ne=A[10],P=Jt(P,Y,C,1,A,ne,x,N,Cn,Ca,S,Aa)),Y[0]&3072){J=A[10];for(let ct=0;ct<O.length;ct+=1)O[ct].r();O=Jt(O,Y,de,1,A,J,le,N,jo,La,te,Ia);for(let ct=0;ct<O.length;ct+=1)O[ct].a()}Y[0]&32&&Q!==(Q=`translate(${A[5](0)},0)`)&&f(te,"transform",Q),Y[0]&1024&&ce!==(ce=(((ft=(je=A[10])==null?void 0:je.length)!=null?ft:0)+1)*lt)&&f(te,"y2",ce),Y[0]&1024&&G!==(G=(((et=(gt=A[10])==null?void 0:gt.length)!=null?et:0)+1)*lt)&&f(H,"y2",G)},i:Be,o:Be,d(A){A&&y(t),A&&y(a),A&&y(h),A&&y(b),A&&y(N);for(let Y=0;Y<L.length;Y+=1)L[Y].d();for(let Y=0;Y<P.length;Y+=1)P[Y].d();for(let Y=0;Y<O.length;Y+=1)O[Y].d();e[36](null),A&&y(ae),he=!1,mt(Ce)}}}function Sa(e){let t,n;return{c(){t=re("rect"),this.h()},l(r){t=ie(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),D(t).forEach(y),this.h()},h(){f(t,"x","0"),f(t,"y",n=e[46]*lt+en),f(t,"height",lt),f(t,"width",e[3]),f(t,"fill","rgba(0,0,0,0.04)"),f(t,"class","svelte-vobgsx")},m(r,i){K(r,t,i)},p(r,i){i[0]&1024&&n!==(n=r[46]*lt+en)&&f(t,"y",n),i[0]&8&&f(t,"width",r[3])},d(r){r&&y(t)}}}function Ma(e,t){let n,r,i=t[46]%2==0&&Sa(t);return{key:e,first:null,c(){n=Te(),i&&i.c(),r=Te(),this.h()},l(a){n=Te(),i&&i.l(a),r=Te(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[46]%2==0?i?i.p(t,l):(i=Sa(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&y(n),i&&i.d(a),a&&y(r)}}}function Ca(e,t){let n,r,i,a,l,o,s,u,d,c,h,_,p;function E(){return t[33](t[44])}function m(){return t[34](t[44])}return{key:e,first:null,c(){n=re("g"),r=re("rect"),l=re("rect"),u=re("rect"),this.h()},l(w){n=ie(w,"g",{class:!0,transform:!0});var b=D(n);r=ie(b,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),D(r).forEach(y),l=ie(b,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),D(l).forEach(y),u=ie(b,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),D(u).forEach(y),b.forEach(y),this.h()},h(){f(r,"class","tab svelte-vobgsx"),f(r,"x","0"),f(r,"y","2"),f(r,"height",lt-4),f(r,"width",i=t[11].size>0&&t[11].has(t[44].product_id)?Dt-1:6),f(r,"fill",a=t[7]?t[7](t[44].product.name):"white"),f(l,"class","country1-bar svelte-vobgsx"),f(l,"x",o=t[5](-t[44].export_value)),f(l,"y",gr/2),f(l,"height",lt-gr),f(l,"width",s=t[5](0)-t[5](-t[44].export_value)),f(l,"fill",jt),f(u,"class","country2-bar svelte-vobgsx"),f(u,"x",d=t[5](0)),f(u,"y",gr/2),f(u,"height",lt-gr),f(u,"width",c=t[5](t[44].import_value)-t[5](0)),f(u,"fill",$t),f(n,"class","bar-row"),f(n,"transform",h=`translate(0, ${t[46]*lt+en})`),this.first=n},m(w,b){K(w,n,b),T(n,r),T(n,l),T(n,u),_||(p=[q(l,"focus",t[28]),q(l,"keydown",ed),q(l,"mouseover",function(){Ke(t[13](t[44],!0))&&t[13](t[44],!0).apply(this,arguments)}),q(l,"mousemove",t[14]()),q(l,"mouseleave",t[15]()),q(l,"click",E),q(u,"focus",t[27]),q(u,"keydown",td),q(u,"mouseover",function(){Ke(t[13](t[44],!1))&&t[13](t[44],!1).apply(this,arguments)}),q(u,"mousemove",t[14]()),q(u,"mouseleave",t[15]()),q(u,"click",m)],_=!0)},p(w,b){t=w,b[0]&3072&&i!==(i=t[11].size>0&&t[11].has(t[44].product_id)?Dt-1:6)&&f(r,"width",i),b[0]&1152&&a!==(a=t[7]?t[7](t[44].product.name):"white")&&f(r,"fill",a),b[0]&1056&&o!==(o=t[5](-t[44].export_value))&&f(l,"x",o),b[0]&1056&&s!==(s=t[5](0)-t[5](-t[44].export_value))&&f(l,"width",s),b[0]&32&&d!==(d=t[5](0))&&f(u,"x",d),b[0]&1056&&c!==(c=t[5](t[44].import_value)-t[5](0))&&f(u,"width",c),b[0]&1024&&h!==(h=`translate(0, ${t[46]*lt+en})`)&&f(n,"transform",h)},d(w){w&&y(n),_=!1,mt(p)}}}function La(e,t){let n,r=t[44].product.name+"",i,a,l,o=Be,s,u;function d(){return t[35](t[44])}return{key:e,first:null,c(){n=re("text"),i=ge(r),this.h()},l(c){n=ie(c,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var h=D(n);i=pe(h,r),h.forEach(y),this.h()},h(){f(n,"class","product-text svelte-vobgsx"),f(n,"alignment-baseline","hanging"),f(n,"x","10"),f(n,"y",a=t[46]*lt+en+6),this.first=n},m(c,h){K(c,n,h),T(n,i),s||(u=[q(n,"click",d),q(n,"keydown",nd)],s=!0)},p(c,h){t=c,h[0]&1024&&r!==(r=t[44].product.name+"")&&Ye(i,r),h[0]&1024&&a!==(a=t[46]*lt+en+6)&&f(n,"y",a)},r(){l=n.getBoundingClientRect()},f(){$o(n),o()},a(){o(),o=es(n,l,X0,{duration:400,delay:20})},d(c){c&&y(n),s=!1,mt(u)}}}function Na(e){let t,n,r,i,a;return{c(){t=re("rect"),n=re("text"),r=ge("Loading..."),this.h()},l(l){t=ie(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),D(t).forEach(y),n=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=D(n);r=pe(o,"Loading..."),o.forEach(y),this.h()},h(){f(t,"x","0"),f(t,"y","0"),f(t,"width",e[3]),f(t,"height",e[9]),f(t,"fill","rgba(255,255,255,0.9)"),f(t,"class","svelte-vobgsx"),f(n,"x",i=e[3]/2),f(n,"y",a=e[9]/2),f(n,"alignment-baseline","central"),f(n,"text-anchor","middle")},m(l,o){K(l,t,o),K(l,n,o),T(n,r)},p(l,o){o[0]&8&&f(t,"width",l[3]),o[0]&512&&f(t,"height",l[9]),o[0]&8&&i!==(i=l[3]/2)&&f(n,"x",i),o[0]&512&&a!==(a=l[9]/2)&&f(n,"y",a)},d(l){l&&y(t),l&&y(n)}}}function q0(e){let t,n,r,i,a;function l(d,c){return d[10]&&d[10].length>0?K0:W0}let o=l(e),s=o(e),u=e[8]&&Na(e);return{c(){t=j("div"),n=re("svg"),s.c(),r=Te(),u&&u.c(),this.h()},l(d){t=$(d,"DIV",{id:!0,class:!0});var c=D(t);n=ie(c,"svg",{height:!0,class:!0});var h=D(n);s.l(h),r=Te(),u&&u.l(h),h.forEach(y),c.forEach(y),this.h()},h(){var d,c;f(n,"height",i=Math.max(e[9],(((c=(d=e[10])==null?void 0:d.length)!=null?c:0)+1)*lt+en)),f(n,"class","svelte-vobgsx"),f(t,"id","bar-chart"),f(t,"class","viz-section svelte-vobgsx"),mn(()=>e[37].call(t))},m(d,c){K(d,t,c),T(t,n),s.m(n,null),T(n,r),u&&u.m(n,null),a=Zr(t,e[37].bind(t))},p(d,c){var h,_;o===(o=l(d))&&s?s.p(d,c):(s.d(1),s=o(d),s&&(s.c(),me(s,1),s.m(n,r))),d[8]?u?u.p(d,c):(u=Na(d),u.c(),u.m(n,null)):u&&(u.d(1),u=null),c[0]&1536&&i!==(i=Math.max(d[9],(((_=(h=d[10])==null?void 0:h.length)!=null?_:0)+1)*lt+en))&&f(n,"height",i)},i(d){me(s)},o:Be,d(d){d&&y(t),s.d(),u&&u.d(),a()}}}const xn=40,lt=30,Da=0,Z0=10,en=30,Dt=100,gr=4,pr=10,Oa=140,Ra=25,di=105,Kt=20,qt=35,kn=22,J0=()=>{},Q0=()=>{},j0=()=>{},$0=()=>{},ed=()=>{},td=()=>{},nd=()=>{};function rd(e,t,n){let r,i,a,l,o,s,u,d,c,h,_,p,E;At(e,un,C=>n(6,_=C)),At(e,st,C=>n(11,p=C)),At(e,cn,C=>n(12,E=C));let{data:m}=t;var w;(function(C){C[C.LeftUp=0]="LeftUp",C[C.LeftDown=1]="LeftDown",C[C.RightUp=2]="RightUp",C[C.RightDown=3]="RightDown",C[C.Up=4]="Up",C[C.Down=5]="Down",C[C.AlphaUp=6]="AlphaUp",C[C.AlphaDown=7]="AlphaDown"})(w||(w={}));let b=w.AlphaDown,{bilateralData:I,productColorScale:g,country1:k,country2:B,loadingDrilldown:X,productData:F,locationData:N}=m,L=800,M=550,z;const P=C=>Qt("$.3s")(C).replace(/G/,"B");function x(C,J,de){return C+de<L?C+J:C+J-de}function S(C,J){return C+di<M?C+J:C+J-di}function O(C,J){return de=>{let se=Ie("#bar-chart-tooltip"),ve=Oa+_.length*Ra;se.append("rect").attr("id","tooltip-rect").attr("width",ve).attr("height",di).attr("x",x(de.layerX,pr,ve)).attr("y",S(de.layerY,pr)),se.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",x(de.layerX,Kt,ve)).attr("y",S(de.layerY,qt)).style("fill",J?jt:$t).text(`${C.product.name}`),se.append("text").attr("id","tooltip-text2").attr("x",x(de.layerX,Kt,ve)).attr("y",S(de.layerY,qt+kn)).text((J?"Export: ":"Import: ")+`${P(J?C.export_value:C.import_value)}`),se.append("text").attr("id","tooltip-text3").attr("x",x(de.layerX,Kt,ve)).attr("y",S(de.layerY,qt+2*kn)).text(`Share: ${Qt(".2%")(J?C.export_value/d:C.import_value/c)}`),se.append("text").attr("id","tooltip-text4").attr("x",x(de.layerX,Kt,ve)).attr("y",S(de.layerY,qt+3*kn)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function le(){return C=>{let J=Oa+_.length*Ra;Ie("#tooltip-rect").attr("x",x(C.layerX,pr,J)).attr("y",S(C.layerY,pr)),Ie("#tooltip-text1").attr("x",x(C.layerX,Kt,J)).attr("y",S(C.layerY,qt)),Ie("#tooltip-text2").attr("x",x(C.layerX,Kt,J)).attr("y",S(C.layerY,qt+kn)),Ie("#tooltip-text3").attr("x",x(C.layerX,Kt,J)).attr("y",S(C.layerY,qt+2*kn)),Ie("#tooltip-text4").attr("x",x(C.layerX,Kt,J)).attr("y",S(C.layerY,qt+3*kn))}}function te(){return C=>{Ie("#bar-chart-tooltip").selectAll("rect").remove(),Ie("#bar-chart-tooltip").selectAll("text").remove()}}function Q(C){dt.call(this,e,C)}function ce(C){dt.call(this,e,C)}const H=()=>{b==w.AlphaDown?n(1,b=w.AlphaUp):n(1,b=w.AlphaDown)},G=()=>{b==w.Down?n(1,b=w.Up):n(1,b=w.Down)},ee=()=>{b==w.LeftDown?n(1,b=w.LeftUp):n(1,b=w.LeftDown)},ae=()=>{b==w.RightDown?n(1,b=w.RightUp):n(1,b=w.RightDown)},he=C=>{E||(cn.set(!0),st.update(J=>(J.clear(),J))),p.has(C==null?void 0:C.product_id)?st.update(J=>{var de;return J.delete((de=C==null?void 0:C.product_id)!=null?de:-1),J}):(C==null?void 0:C.product_id)>=0&&st.update(J=>{var de;return J.add((de=C==null?void 0:C.product_id)!=null?de:-1),J})},Ce=C=>{E&&(cn.set(!1),st.update(J=>(J.clear(),J))),p.has(C==null?void 0:C.product_id)?st.update(J=>{var de;return J.delete((de=C==null?void 0:C.product_id)!=null?de:-1),J}):(C==null?void 0:C.product_id)>=0&&st.update(J=>{var de;return J.add((de=C==null?void 0:C.product_id)!=null?de:-1),J})},oe=C=>{p.has(C.product_id)?st.update(J=>(J.delete(C.product_id),J)):st.update(J=>(J.add(C.product_id),J))};function R(C){ut[C?"unshift":"push"](()=>{z=C,n(4,z)})}function ne(){L=this.clientWidth,M=this.clientHeight,n(3,L),n(9,M)}return e.$$set=C=>{"data"in C&&n(16,m=C.data)},e.$$.update=()=>{var C,J,de;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:I,productColorScale:g,country1:k,country2:B,loadingDrilldown:X,productData:F,locationData:N}=m,I,(n(7,g),n(16,m)),(n(18,k),n(16,m)),(n(2,B),n(16,m)),(n(8,X),n(16,m)),(n(19,F),n(16,m)),(n(20,N),n(16,m))),e.$$.dirty[0]&393220&&n(26,r=(de=I==null?void 0:I.get((C=k==null?void 0:k.id)!=null?C:0))==null?void 0:de.get((J=B==null?void 0:B.id)!=null?J:0)),e.$$.dirty[0]&67108928&&n(25,i=_.map(se=>{var ve;return(ve=r==null?void 0:r.get(se))!=null?ve:new Array}).flat()),e.$$.dirty[0]&35389444&&n(23,a=Array.from(yi(i,se=>{var ve,Re;return se.reduce((ze,ue)=>(ze.export_value+=ue.export_value,ze.import_value+=ue.import_value,ze),new xt(N,F,{location_id:(ve=k==null?void 0:k.id)!=null?ve:0,partner_id:(Re=B==null?void 0:B.id)!=null?Re:0,product_id:se[0].product_id,year:0,export_value:0,import_value:0}))},se=>se.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=a.filter(se=>se.product.level=="section")),e.$$.dirty[0]&16777219&&n(10,o=l.sort((se,ve)=>{switch(b){case w.LeftUp:return se.export_value-ve.export_value;case w.LeftDown:return ve.export_value-se.export_value;case w.RightUp:return se.import_value-ve.import_value;case w.RightDown:return ve.import_value-se.import_value;case w.Up:return se.import_value+se.export_value-(ve.import_value+ve.export_value);case w.Down:return ve.import_value+ve.export_value-(se.import_value+se.export_value);case w.AlphaDown:return se.product.name.localeCompare(ve.product.name);case w.AlphaUp:return ve.product.name.localeCompare(se.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=Zn(a,se=>se.export_value)),e.$$.dirty[0]&8388608&&n(21,u=Zn(a,se=>se.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(d=Dr(a,se=>se.export_value)),e.$$.dirty[0]&8388608&&(c=Dr(a,se=>se.import_value)),e.$$.dirty[0]&6291464&&n(5,h=Jn().domain([-s,u]).range([Dt+Da,L-Da-Z0])),e.$$.dirty[0]&48){let se=io(h).tickFormat(ve=>P(Math.abs(ve)));Ie(z).transition().call(se)}},[w,b,B,L,z,h,_,g,X,M,o,p,E,O,le,te,m,I,k,F,N,u,s,a,l,i,r,Q,ce,H,G,ee,ae,he,Ce,oe,R,ne]}class id extends Tt{constructor(t){super(),St(this,t,rd,q0,Mt,{data:16},null,[-1,-1])}}function Va(e,t,n){const r=e.slice();return r[54]=t[n],r}function Fa(e,t,n){const r=e.slice();return r[54]=t[n],r}function Ha(e,t,n){const r=e.slice();return r[54]=t[n],r}function ld(e){let t,n,r,i,a;return{c(){t=re("text"),n=ge("No valid data for this pair."),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=D(t);n=pe(o,"No valid data for this pair."),o.forEach(y),this.h()},h(){f(t,"x",r=e[2]/2),f(t,"y",i=e[3]/2),f(t,"alignment-baseline","central"),f(t,"text-anchor","middle")},m(l,o){K(l,t,o),T(t,n)},p(l,o){o[0]&4&&r!==(r=l[2]/2)&&f(t,"x",r),o[0]&8&&i!==(i=l[3]/2)&&f(t,"y",i)},i(l){a||mn(()=>{a=xi(t,xr,{}),a.start()})},o:Be,d(l){l&&y(t)}}}function ad(e){var Se,Oe,U,Me;let t,n,r,i,a,l,o,s,u,d,c,h,_,p,E,m=((Oe=`to ${(Se=e[0].get(e[1]))==null?void 0:Se.name}`)!=null?Oe:"")+"",w,b,I,g,k=((Me=`from ${(U=e[0].get(e[1]))==null?void 0:U.name}`)!=null?Me:"")+"",B,X,F,N,L,M,z,P,x,S,O,le=[],te=new Map,Q,ce,H=[],G=new Map,ee,ae,he=[],Ce=new Map,oe,R,ne,C=!e[16]&&Ba(e),J=e[12]>0&&e[11]<0&&Pa(e),de=e[15];const se=V=>V[54].year;for(let V=0;V<de.length;V+=1){let A=Ha(e,de,V),Y=se(A);te.set(Y,le[V]=za(Y,A))}let ve=e[15];const Re=V=>V[54].year;for(let V=0;V<ve.length;V+=1){let A=Fa(e,ve,V),Y=Re(A);G.set(Y,H[V]=Ga(Y,A))}let ze=e[15];const ue=V=>V[54].year;for(let V=0;V<ze.length;V+=1){let A=Va(e,ze,V),Y=ue(A);Ce.set(Y,he[V]=Ua(Y,A))}return{c(){t=re("text"),n=ge("Trade Over Time"),i=re("g"),C&&C.c(),a=re("g"),l=re("line"),u=re("g"),d=re("g"),h=re("g"),_=re("circle"),p=re("text"),E=ge("Export "),w=ge(m),b=re("circle"),I=re("text"),g=ge("Import "),B=ge(k),X=re("g"),F=re("rect"),N=re("text"),L=ge("Trade Deficit"),M=re("rect"),z=re("text"),P=ge("Trade Surplus"),S=re("g"),J&&J.c(),O=Te();for(let V=0;V<le.length;V+=1)le[V].c();Q=re("g"),ce=re("path");for(let V=0;V<H.length;V+=1)H[V].c();ee=re("g"),ae=re("path");for(let V=0;V<he.length;V+=1)he[V].c();oe=re("g"),R=re("g"),ne=ge("''"),this.h()},l(V){t=ie(V,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var A=D(t);n=pe(A,"Trade Over Time"),A.forEach(y),i=ie(V,"g",{class:!0}),D(i).forEach(y),C&&C.l(V),a=ie(V,"g",{id:!0,transform:!0});var Y=D(a);l=ie(Y,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),D(l).forEach(y),Y.forEach(y),u=ie(V,"g",{id:!0,transform:!0}),D(u).forEach(y),d=ie(V,"g",{id:!0,transform:!0}),D(d).forEach(y),h=ie(V,"g",{id:!0,transform:!0});var _e=D(h);_=ie(_e,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),D(_).forEach(y),p=ie(_e,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var De=D(p);E=pe(De,"Export "),w=pe(De,m),De.forEach(y),b=ie(_e,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),D(b).forEach(y),I=ie(_e,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Fe=D(I);g=pe(Fe,"Import "),B=pe(Fe,k),Fe.forEach(y),_e.forEach(y),X=ie(V,"g",{id:!0,transform:!0});var Le=D(X);F=ie(Le,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),D(F).forEach(y),N=ie(Le,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var W=D(N);L=pe(W,"Trade Deficit"),W.forEach(y),M=ie(Le,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),D(M).forEach(y),z=ie(Le,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Ne=D(z);P=pe(Ne,"Trade Surplus"),Ne.forEach(y),Le.forEach(y),S=ie(V,"g",{id:!0});var Pe=D(S);J&&J.l(Pe),O=Te();for(let He=0;He<le.length;He+=1)le[He].l(Pe);Pe.forEach(y),Q=ie(V,"g",{class:!0});var Ve=D(Q);ce=ie(Ve,"path",{fill:!0,stroke:!0,"stroke-width":!0}),D(ce).forEach(y);for(let He=0;He<H.length;He+=1)H[He].l(Ve);Ve.forEach(y),ee=ie(V,"g",{class:!0});var Ee=D(ee);ae=ie(Ee,"path",{fill:!0,stroke:!0,"stroke-width":!0}),D(ae).forEach(y);for(let He=0;He<he.length;He+=1)he[He].l(Ee);Ee.forEach(y),oe=ie(V,"g",{}),D(oe).forEach(y),R=ie(V,"g",{id:!0,class:!0}),D(R).forEach(y),ne=pe(V,"''"),this.h()},h(){f(t,"class","chart-header"),f(t,"x",r=e[2]/2+10),f(t,"y",it-5),f(t,"text-anchor","middle"),f(i,"class","brush"),f(l,"id","xAxisLine"),f(l,"x1",nr),f(l,"x2",o=e[2]-Ot),f(l,"y1","0"),f(l,"y2","0"),f(l,"stroke","rgba(0,0,0,0.7)"),f(l,"stroke-width","1"),f(a,"id","xAxis"),f(a,"transform",s=`translate(${0},${e[3]-it})`),f(u,"id","yAisLeft"),f(u,"transform",`translate(${nr},${0})`),f(d,"id","yAisRight"),f(d,"transform",c=`translate(${e[2]-Ot},${0})`),f(_,"class","circ1"),f(_,"cx","20"),f(_,"cy","10"),f(_,"r","5"),f(_,"fill",jt),f(_,"stroke","rgba(0,0,0,0)"),f(_,"stroke-width","2"),f(p,"x","30"),f(p,"y","15"),f(p,"font-size","13"),f(p,"text-anchor","start"),f(b,"class","circ2"),f(b,"cx","20"),f(b,"cy","25"),f(b,"r","5"),f(b,"fill",$t),f(b,"stroke","rgba(0,0,0,0)"),f(b,"stroke-width","2"),f(I,"x","30"),f(I,"y","30"),f(I,"font-size","13"),f(I,"text-anchor","start"),f(h,"id","legendLeft"),f(h,"transform","translate(10,6)"),f(F,"class","deficit svelte-123c2nv"),f(F,"x","15"),f(F,"y","5"),f(F,"width","10"),f(F,"height","10"),f(F,"fill",Kr),f(F,"opacity","0.6"),f(N,"x","30"),f(N,"y","15"),f(N,"font-size","13"),f(N,"text-anchor","start"),f(M,"class","surplus svelte-123c2nv"),f(M,"x","15"),f(M,"y","20"),f(M,"width","10"),f(M,"height","10"),f(M,"fill",Wr),f(M,"opacity","0.6"),f(z,"x","30"),f(z,"y","30"),f(z,"font-size","13"),f(z,"text-anchor","start"),f(X,"id","legendRight"),f(X,"transform",x=`translate(${e[2]-3*Ot+30},6)`),f(S,"id","net-values-group"),f(ce,"fill","none"),f(ce,"stroke",jt),f(ce,"stroke-width","2"),f(Q,"class","country1-group country-group svelte-123c2nv"),f(ae,"fill","none"),f(ae,"stroke",$t),f(ae,"stroke-width","2"),f(ee,"class","country2-group country-group svelte-123c2nv"),f(R,"id","line-chart-tooltip"),f(R,"class","tooltip")},m(V,A){K(V,t,A),T(t,n),K(V,i,A),e[41](i),C&&C.m(V,A),K(V,a,A),T(a,l),e[42](a),K(V,u,A),e[43](u),K(V,d,A),e[44](d),K(V,h,A),T(h,_),T(h,p),T(p,E),T(p,w),T(h,b),T(h,I),T(I,g),T(I,B),K(V,X,A),T(X,F),T(X,N),T(N,L),T(X,M),T(X,z),T(z,P),K(V,S,A),J&&J.m(S,null),T(S,O);for(let Y=0;Y<le.length;Y+=1)le[Y].m(S,null);K(V,Q,A),T(Q,ce),e[45](ce);for(let Y=0;Y<H.length;Y+=1)H[Y].m(Q,null);K(V,ee,A),T(ee,ae),e[46](ae);for(let Y=0;Y<he.length;Y+=1)he[Y].m(ee,null);K(V,oe,A),K(V,R,A),K(V,ne,A)},p(V,A){var Y,_e,De,Fe;A[0]&4&&r!==(r=V[2]/2+10)&&f(t,"x",r),V[16]?C&&(C.d(1),C=null):C?C.p(V,A):(C=Ba(V),C.c(),C.m(a.parentNode,a)),A[0]&4&&o!==(o=V[2]-Ot)&&f(l,"x2",o),A[0]&8&&s!==(s=`translate(${0},${V[3]-it})`)&&f(a,"transform",s),A[0]&4&&c!==(c=`translate(${V[2]-Ot},${0})`)&&f(d,"transform",c),A[0]&3&&m!==(m=((_e=`to ${(Y=V[0].get(V[1]))==null?void 0:Y.name}`)!=null?_e:"")+"")&&Ye(w,m),A[0]&3&&k!==(k=((Fe=`from ${(De=V[0].get(V[1]))==null?void 0:De.name}`)!=null?Fe:"")+"")&&Ye(B,k),A[0]&4&&x!==(x=`translate(${V[2]-3*Ot+30},6)`)&&f(X,"transform",x),V[12]>0&&V[11]<0?J?J.p(V,A):(J=Pa(V),J.c(),J.m(S,O)):J&&(J.d(1),J=null),A[0]&31375360&&(de=V[15],le=Jt(le,A,se,1,V,de,te,S,Cn,za,null,Ha)),A[0]&20504576&&(ve=V[15],H=Jt(H,A,Re,1,V,ve,G,Q,Cn,Ga,null,Fa)),A[0]&20504576&&(ze=V[15],he=Jt(he,A,ue,1,V,ze,Ce,ee,Cn,Ua,null,Va))},i:Be,o:Be,d(V){V&&y(t),V&&y(i),e[41](null),C&&C.d(V),V&&y(a),e[42](null),V&&y(u),e[43](null),V&&y(d),e[44](null),V&&y(h),V&&y(X),V&&y(S),J&&J.d();for(let A=0;A<le.length;A+=1)le[A].d();V&&y(Q),e[45](null);for(let A=0;A<H.length;A+=1)H[A].d();V&&y(ee),e[46](null);for(let A=0;A<he.length;A+=1)he[A].d();V&&y(oe),V&&y(R),V&&y(ne)}}}function Ba(e){let t,n,r;return{c(){t=re("rect"),this.h()},l(i){t=ie(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),D(t).forEach(y),this.h()},h(){f(t,"class","timebar svelte-123c2nv"),f(t,"x",n=e[14](e[19][0])-12),f(t,"y",44),f(t,"width","24"),f(t,"height",r=e[3]-44-it>0?e[3]-44-it:0),f(t,"fill","rgba(0,0,0,0.2)")},m(i,a){K(i,t,a)},p(i,a){a[0]&540672&&n!==(n=i[14](i[19][0])-12)&&f(t,"x",n),a[0]&8&&r!==(r=i[3]-44-it>0?i[3]-44-it:0)&&f(t,"height",r)},d(i){i&&y(t)}}}function Pa(e){let t,n,r,i;return{c(){t=re("line"),this.h()},l(a){t=ie(a,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),D(t).forEach(y),this.h()},h(){f(t,"id","zeroline"),f(t,"x1",nr),f(t,"x2",n=e[2]-Ot),f(t,"y1",r=e[10](0)),f(t,"y2",i=e[10](0)),f(t,"stroke","rgba(0,0,0,0.7)"),f(t,"stroke-width","1")},m(a,l){K(a,t,l)},p(a,l){l[0]&4&&n!==(n=a[2]-Ot)&&f(t,"x2",n),l[0]&1024&&r!==(r=a[10](0))&&f(t,"y1",r),l[0]&1024&&i!==(i=a[10](0))&&f(t,"y2",i)},d(a){a&&y(t)}}}function za(e,t){let n,r,i,a,l,o,s,u;return{key:e,first:null,c(){n=re("rect"),this.h()},l(d){n=ie(d,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),D(n).forEach(y),this.h()},h(){f(n,"x",r=t[14](t[54].year)-Qn/2),f(n,"width",Qn),f(n,"y",i=t[18](t[54])),f(n,"height",a=t[17](t[54])>0?t[17](t[54]):0),f(n,"fill",l=t[54].export_value<t[54].import_value?Kr:Wr),f(n,"stroke",o=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),f(n,"opacity","0.6"),f(n,"class","svelte-123c2nv"),this.first=n},m(d,c){K(d,n,c),s||(u=[q(n,"click",function(){Ke(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),q(n,"keydown",ud),q(n,"keypress",t[38]),q(n,"click",function(){Ke(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),q(n,"focus",t[39]),q(n,"blur",t[40]),q(n,"mouseover",function(){Ke(t[22](t[54]))&&t[22](t[54]).apply(this,arguments)}),q(n,"mousemove",t[23]()),q(n,"mouseout",t[24]())],s=!0)},p(d,c){t=d,c[0]&49152&&r!==(r=t[14](t[54].year)-Qn/2)&&f(n,"x",r),c[0]&294912&&i!==(i=t[18](t[54]))&&f(n,"y",i),c[0]&163840&&a!==(a=t[17](t[54])>0?t[17](t[54]):0)&&f(n,"height",a),c[0]&32768&&l!==(l=t[54].export_value<t[54].import_value?Kr:Wr)&&f(n,"fill",l),c[0]&557056&&o!==(o=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&f(n,"stroke",o)},d(d){d&&y(n),s=!1,mt(u)}}}function Ga(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=re("circle"),this.h()},l(u){n=ie(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),D(n).forEach(y),this.h()},h(){f(n,"class","circ1 svelte-123c2nv"),f(n,"cx",r=t[14](t[54].year)),f(n,"cy",i=t[13](t[54].export_value)),f(n,"r",a=t[19].includes(t[54].year)?8:7),f(n,"fill",jt),f(n,"stroke",l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666"),f(n,"stroke-width","1"),this.first=n},m(u,d){K(u,n,d),o||(s=[q(n,"click",function(){Ke(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),q(n,"keydown",fd),q(n,"keypress",t[35]),q(n,"click",function(){Ke(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),q(n,"focus",t[36]),q(n,"blur",t[37]),q(n,"mouseover",function(){Ke(t[21](t[54],!0))&&t[21](t[54],!0).apply(this,arguments)}),q(n,"mouseout",t[24]())],o=!0)},p(u,d){t=u,d[0]&49152&&r!==(r=t[14](t[54].year))&&f(n,"cx",r),d[0]&40960&&i!==(i=t[13](t[54].export_value))&&f(n,"cy",i),d[0]&557056&&a!==(a=t[19].includes(t[54].year)?8:7)&&f(n,"r",a),d[0]&557056&&l!==(l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666")&&f(n,"stroke",l)},d(u){u&&y(n),o=!1,mt(s)}}}function Ua(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=re("circle"),this.h()},l(u){n=ie(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),D(n).forEach(y),this.h()},h(){f(n,"cx",r=t[14](t[54].year)),f(n,"cy",i=t[13](t[54].import_value)),f(n,"r",a=t[19].includes(t[54].year)?"7":"6"),f(n,"fill",$t),f(n,"stroke",l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666"),f(n,"stroke-width","1"),f(n,"class","svelte-123c2nv"),this.first=n},m(u,d){K(u,n,d),o||(s=[q(n,"click",function(){Ke(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),q(n,"keydown",cd),q(n,"keypress",t[32]),q(n,"click",function(){Ke(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),q(n,"focus",t[33]),q(n,"blur",t[34]),q(n,"mouseover",function(){Ke(t[21](t[54],!1))&&t[21](t[54],!1).apply(this,arguments)}),q(n,"mouseout",t[24]())],o=!0)},p(u,d){t=u,d[0]&49152&&r!==(r=t[14](t[54].year))&&f(n,"cx",r),d[0]&40960&&i!==(i=t[13](t[54].import_value))&&f(n,"cy",i),d[0]&557056&&a!==(a=t[19].includes(t[54].year)?"7":"6")&&f(n,"r",a),d[0]&557056&&l!==(l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666")&&f(n,"stroke",l)},d(u){u&&y(n),o=!1,mt(s)}}}function od(e){let t,n,r;function i(o,s){return o[15].length>0?ad:ld}let a=i(e),l=a(e);return{c(){t=j("div"),n=re("svg"),l.c(),this.h()},l(o){t=$(o,"DIV",{id:!0,class:!0});var s=D(t);n=ie(s,"svg",{width:!0,height:!0});var u=D(n);l.l(u),u.forEach(y),s.forEach(y),this.h()},h(){f(n,"width",e[2]),f(n,"height",e[3]),f(t,"id","line-chart"),f(t,"class","viz-section"),mn(()=>e[47].call(t))},m(o,s){K(o,t,s),T(t,n),l.m(n,null),r=Zr(t,e[47].bind(t))},p(o,s){a===(a=i(o))&&l?l.p(o,s):(l.d(1),l=a(o),l&&(l.c(),me(l,1),l.m(n,null))),s[0]&4&&f(n,"width",o[2]),s[0]&8&&f(n,"height",o[3])},i(o){me(l)},o:Be,d(o){o&&y(t),l.d(),r()}}}const it=35,vr=15,nr=50,Ot=50,Qn=16,En=10,yr=180,Yt=68,sd=22,Xt=20,_i=35,In=37,An=22,ud=()=>{},fd=()=>{},cd=()=>{};function hd(e,t,n){let r,i,a,l,o,s,u,d,c,h,_,p,E;At(e,st,U=>n(31,p=U)),At(e,un,U=>n(19,E=U));let{data:m}=t,{bilateralData:w,locationData:b,productData:I,country1_id:g,country2_id:k}=m,B=0,X=0;const F=U=>Qt("$.3s")(U).replace(/G/,"B");let N,L,M,z,P,x,S=!1,O;function le(U){return()=>{n(16,S=!1),Ie(z).call(s.clear),un.set([U])}}function te(U,Me){return U+yr<B?U+Me:U+Me-yr}function Q(U,Me,V){return U+V<X?U+Me:U+Me-Yt}function ce(U,Me){return V=>{var _e,De,Fe;let A=Ie("#line-chart-tooltip"),Y=Yt+O.length*sd;if(A.append("rect").attr("width",yr).attr("height",Y).attr("x",te(V.layerX,En)).attr("y",Q(V.layerY,En,Y)),A.append("text").attr("class","title").attr("x",te(V.layerX,Xt)).attr("y",Q(V.layerY,_i,Y)).style("fill",Me?jt:$t).text(`${U.year} `+(Me?"Export":"Import")),p.size>0){for(let Le=0;Le<O.length;Le++){let W=(_e=i==null?void 0:i.get(U.year))==null?void 0:_e.filter(Ne=>Ne.product.name==O[Le])[0];A.append("text").attr("x",te(V.layerX,Xt)).attr("y",Q(V.layerY,In+(Le+1)*An,Y)).text(`${O[Le]}: ${F(Me?(De=W==null?void 0:W.export_value)!=null?De:0:(Fe=W==null?void 0:W.import_value)!=null?Fe:0)}`)}A.append("text").attr("x",te(V.layerX,Xt)).attr("y",Q(V.layerY,In+(O.length+1)*An,Y)).style("font-weight","bold").text(`Selected Total:  ${F(Me?U.export_value:U.import_value)}`)}else A.append("text").attr("x",te(V.layerX,Xt)).attr("y",Q(V.layerY,In+An,Y)).text((p.size==0?"Total: ":"Selected Total: ")+`${F(Me?U.export_value:U.import_value)}`),A.append("text").attr("x",te(V.layerX,Xt)).attr("y",Q(V.layerY,In+2*An,Y)).text("Sectors: All")}}function H(U){return Me=>{let V=Ie("#line-chart-tooltip"),A=U.export_value-U.import_value;V.append("rect").attr("id","tooltip-rect").attr("width",yr).attr("height",Yt).attr("x",te(Me.layerX,En)).attr("y",Q(Me.layerY,En,Yt)),V.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",te(Me.layerX,Xt)).attr("y",Q(Me.layerY,_i,Yt)).style("fill",A<0?Kr:Wr).text(`${U.year} `+(A<0?"Deficit":"Surplus")),V.append("text").attr("id","tooltip-text2").attr("x",te(Me.layerX,Xt)).attr("y",Q(Me.layerY,In+An,Yt)).text((p.size>0?"Selected ":"")+`Total: ${F(Math.abs(U.export_value-U.import_value))}`)}}function G(){return U=>{Ie("#tooltip-rect").attr("x",te(U.layerX,En)).attr("y",Q(U.layerY,En,Yt)),Ie("#tooltip-text1").attr("x",te(U.layerX,Xt)).attr("y",Q(U.layerY,_i,Yt)),Ie("#tooltip-text2").attr("x",te(U.layerX,Xt)).attr("y",Q(U.layerY,In+An,Yt))}}function ee(){return U=>{Ie("#line-chart-tooltip").selectAll("rect").remove(),Ie("#line-chart-tooltip").selectAll("text").remove()}}function ae(U){dt.call(this,e,U)}function he(U){dt.call(this,e,U)}function Ce(U){dt.call(this,e,U)}function oe(U){dt.call(this,e,U)}function R(U){dt.call(this,e,U)}function ne(U){dt.call(this,e,U)}function C(U){dt.call(this,e,U)}function J(U){dt.call(this,e,U)}function de(U){dt.call(this,e,U)}function se(U){ut[U?"unshift":"push"](()=>{z=U,n(7,z)})}function ve(U){ut[U?"unshift":"push"](()=>{N=U,n(4,N)})}function Re(U){ut[U?"unshift":"push"](()=>{L=U,n(5,L)})}function ze(U){ut[U?"unshift":"push"](()=>{M=U,n(6,M)})}function ue(U){ut[U?"unshift":"push"](()=>{P=U,n(8,P)})}function Se(U){ut[U?"unshift":"push"](()=>{x=U,n(9,x)})}function Oe(){B=this.clientWidth,X=this.clientHeight,n(2,B),n(3,X)}return e.$$set=U=>{"data"in U&&n(25,m=U.data)},e.$$.update=()=>{var U,Me,V,A,Y,_e,De,Fe,Le;if(e.$$.dirty[0]&33554432&&n(26,{bilateralData:w,locationData:b,productData:I,country1_id:g,country2_id:k}=m,w,(n(0,b),n(25,m)),(n(27,I),n(25,m)),(n(28,g),n(25,m)),(n(1,k),n(25,m))),e.$$.dirty[0]&469762051|e.$$.dirty[1]&1&&n(15,r=Array.from((V=(Me=(U=w==null?void 0:w.get(g))==null?void 0:U.get(k))==null?void 0:Me.entries())!=null?V:new Array).map(W=>{let Ne=W[0],Pe=W[1];return Pe=p.size==0?Pe:Pe.filter(Ve=>p.has(Ve.product_id)),Pe.reduce((Ve,Ee)=>(Ve.export_value+=Ee.export_value,Ve.import_value+=Ee.import_value,Ve),new xt(b,I,{location_id:g,partner_id:k,product_id:0,year:Ne,export_value:0,import_value:0}))}).sort((W,Ne)=>W.year-Ne.year)),e.$$.dirty[0]&335544322&&(i=(A=w==null?void 0:w.get(g))==null?void 0:A.get(k)),e.$$.dirty[0]&32772&&n(14,a=Jn().domain(no(r,W=>W.year)).range([nr+Qn/2,B-Ot-Qn/2])),e.$$.dirty[0]&32776&&n(13,l=Jn().domain([0,(Y=Zn(r,W=>Math.max(W.export_value,W.import_value)))!=null?Y:0]).range([X-it,it+vr]).nice()),e.$$.dirty[0]&16384&&n(30,o=W=>{if((W==null?void 0:W.selection)===null||(W==null?void 0:W.selection[1])-(W==null?void 0:W.selection[0])<5)n(16,S=!1),un.set([2020]);else{n(16,S=!0);let Ne=W.selection;const Pe=Ne[0],Ve=Ne[1];let Ee=Math.ceil(a.invert(Pe)),He=Math.floor(a.invert(Ve)),je=[];for(let ft=Ee;ft<=He;ft++)je.push(ft);un.set(je)}}),e.$$.dirty[0]&1073741836&&n(29,s=th().extent([[nr-1,it+10],[B-Ot+1,X-it]]).on("start brush end",o)),e.$$.dirty[0]&536871040&&Ie(z).call(s),e.$$.dirty[0]&32768&&n(12,u=(_e=Zn(r,W=>W.export_value-W.import_value))!=null?_e:0),e.$$.dirty[0]&32768&&n(11,d=(De=yl(r,W=>W.export_value-W.import_value))!=null?De:0),e.$$.dirty[0]&32776&&n(10,c=Jn().domain([(Fe=yl(r,W=>W.export_value-W.import_value))!=null?Fe:0,(Le=Zn(r,W=>W.export_value-W.import_value))!=null?Le:0]).range([X-it,it+vr]).nice()),e.$$.dirty[0]&25712){let W=io(a).tickFormat(Qt("d"));Ie(N).transition().call(W).select(".domain").attr("stroke-width",0);let Ne=Es(l).tickFormat(Ve=>F(Ve));Ie(L).transition().call(Ne);let Pe=ks(c).tickFormat(Ve=>F(Ve));Ie(M).transition().call(Pe)}if(e.$$.dirty[0]&57600){let W=Hi();r.length>0&&(r.sort(Ne=>Ne.year),W.moveTo(a(r[0].year),l(r[0].export_value))),r.forEach(Ne=>{W.lineTo(a(Ne.year),l(Ne.export_value))}),Ie(P).transition().attr("d",W.toString())}if(e.$$.dirty[0]&57856){let W=Hi();r.length>0&&W.moveTo(a(r[0].year),l(r[0].import_value)),r.forEach(Ne=>{W.lineTo(a(Ne.year),l(Ne.import_value))}),Ie(x).transition().attr("d",W.toString())}e.$$.dirty[0]&134217728|e.$$.dirty[1]&1&&(O=p.size==0?["All"]:Array.from(p.values()).map(W=>{var Ne,Pe;return(Pe=(Ne=I==null?void 0:I.get(W))==null?void 0:Ne.name)!=null?Pe:"something"}).sort()),e.$$.dirty[0]&7168&&n(18,h=W=>W.export_value<W.import_value?u<0?it+vr:c(0):(d>0,c(W.export_value-W.import_value))),e.$$.dirty[0]&7176&&n(17,_=W=>W.export_value<W.import_value?u<0?c(W.export_value-W.import_value)-it-vr:c(W.export_value-W.import_value)-c(0):d>0?X-it-c(W.export_value-W.import_value):c(0)-c(W.export_value-W.import_value))},[b,k,B,X,N,L,M,z,P,x,c,d,u,l,a,r,S,_,h,E,le,ce,H,G,ee,m,w,I,g,s,o,p,ae,he,Ce,oe,R,ne,C,J,de,se,ve,Re,ze,ue,Se,Oe]}class dd extends Tt{constructor(t){super(),St(this,t,hd,od,Mt,{data:25},null,[-1,-1])}}const{Map:_d}=ts;function Ya(e,t,n){const r=e.slice();return r[34]=t[n],r[36]=n,r}function Xa(e){let t,n,r,i,a,l,o,s,u,d,c,h,_,p,E=e[34].y1-e[34].y0>15&&xa(e),m=e[34].y1-e[34].y0>35&&Wa(e);return{c(){t=re("g"),n=re("rect"),l=re("clipPath"),o=re("rect"),E&&E.c(),c=Te(),m&&m.c(),this.h()},l(w){t=ie(w,"g",{class:!0,transform:!0});var b=D(t);n=ie(b,"rect",{class:!0,width:!0,height:!0,fill:!0}),D(n).forEach(y),l=ie(b,"clipPath",{id:!0});var I=D(l);o=ie(I,"rect",{width:!0,height:!0,class:!0}),D(o).forEach(y),I.forEach(y),E&&E.l(b),c=Te(),m&&m.l(b),b.forEach(y),this.h()},h(){var w,b,I,g;f(n,"class","leaf svelte-l0kcz7"),f(n,"width",r=e[34].x1-e[34].x0),f(n,"height",i=e[34].y1-e[34].y0),f(n,"fill",a=e[5]?e[5]((g=(I=(b=(w=e[34].data)==null?void 0:w.product)==null?void 0:b.parent)==null?void 0:I.name)!=null?g:""):"white"),f(o,"width",s=e[34].x1-e[34].x0-3),f(o,"height",u=e[34].y1-e[34].y0),f(o,"class","svelte-l0kcz7"),f(l,"id",d=`${e[10]}-clip-${e[36]}`),f(t,"class","treemap-inner svelte-l0kcz7"),f(t,"transform",h=`translate(${e[34].x0},${e[34].y0})`)},m(w,b){K(w,t,b),T(t,n),T(t,l),T(l,o),E&&E.m(t,null),T(t,c),m&&m.m(t,null),_||(p=[q(n,"keydown",gd),q(n,"click",function(){Ke(e[14](e[34].data))&&e[14](e[34].data).apply(this,arguments)}),q(n,"focus",e[27]),q(n,"mouseover",function(){Ke(e[11](e[34].data))&&e[11](e[34].data).apply(this,arguments)}),q(n,"mousemove",function(){Ke(e[12](e[34].data))&&e[12](e[34].data).apply(this,arguments)}),q(n,"mouseleave",e[13]())],_=!0)},p(w,b){var I,g,k,B;e=w,b[0]&256&&r!==(r=e[34].x1-e[34].x0)&&f(n,"width",r),b[0]&256&&i!==(i=e[34].y1-e[34].y0)&&f(n,"height",i),b[0]&288&&a!==(a=e[5]?e[5]((B=(k=(g=(I=e[34].data)==null?void 0:I.product)==null?void 0:g.parent)==null?void 0:k.name)!=null?B:""):"white")&&f(n,"fill",a),b[0]&256&&s!==(s=e[34].x1-e[34].x0-3)&&f(o,"width",s),b[0]&256&&u!==(u=e[34].y1-e[34].y0)&&f(o,"height",u),b[0]&256&&d!==(d=`${e[10]}-clip-${e[36]}`)&&f(l,"id",d),e[34].y1-e[34].y0>15?E?E.p(e,b):(E=xa(e),E.c(),E.m(t,c)):E&&(E.d(1),E=null),e[34].y1-e[34].y0>35?m?m.p(e,b):(m=Wa(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null),b[0]&256&&h!==(h=`translate(${e[34].x0},${e[34].y0})`)&&f(t,"transform",h)},d(w){w&&y(t),E&&E.d(),m&&m.d(),_=!1,mt(p)}}}function xa(e){var o,s,u;let t,n=((u=(s=(o=e[34].data)==null?void 0:o.product.name)==null?void 0:s.substring(0,40))!=null?u:"")+"",r,i,a,l;return{c(){t=re("text"),r=ge(n),this.h()},l(d){t=ie(d,"text",{class:!0,"clip-path":!0,transform:!0,"alignment-baseline":!0});var c=D(t);r=pe(c,n),c.forEach(y),this.h()},h(){f(t,"class","label svelte-l0kcz7"),f(t,"clip-path",i=`url(${new URL(`#${e[10]}-clip-${e[36]}`,window.location.href)})`),f(t,"transform","translate(4,5)"),f(t,"alignment-baseline","hanging")},m(d,c){K(d,t,c),T(t,r),a||(l=[q(t,"keydown",pd),q(t,"click",function(){Ke(e[14](e[34].data))&&e[14](e[34].data).apply(this,arguments)}),q(t,"focus",e[26]),q(t,"mouseover",function(){Ke(e[11](e[34].data))&&e[11](e[34].data).apply(this,arguments)}),q(t,"mousemove",function(){Ke(e[12](e[34].data))&&e[12](e[34].data).apply(this,arguments)}),q(t,"mouseleave",e[13]())],a=!0)},p(d,c){var h,_,p;e=d,c[0]&256&&n!==(n=((p=(_=(h=e[34].data)==null?void 0:h.product.name)==null?void 0:_.substring(0,40))!=null?p:"")+"")&&Ye(r,n),c[0]&256&&i!==(i=`url(${new URL(`#${e[10]}-clip-${e[36]}`,window.location.href)})`)&&f(t,"clip-path",i)},d(d){d&&y(t),a=!1,mt(l)}}}function Wa(e){let t,n=e[9](e[4]?e[34].data.export_value:e[34].data.import_value)+"",r,i,a,l;return{c(){t=re("text"),r=ge(n),this.h()},l(o){t=ie(o,"text",{class:!0,"clip-path":!0,transform:!0,"alignment-baseline":!0,"font-weight":!0});var s=D(t);r=pe(s,n),s.forEach(y),this.h()},h(){f(t,"class","label-num svelte-l0kcz7"),f(t,"clip-path",i=`url(${new URL(`#${e[10]}-clip-${e[36]}`,window.location.href)})`),f(t,"transform",`translate(4,${23})`),f(t,"alignment-baseline","hanging"),f(t,"font-weight","300")},m(o,s){K(o,t,s),T(t,r),a||(l=[q(t,"keydown",vd),q(t,"click",function(){Ke(e[14](e[34].data))&&e[14](e[34].data).apply(this,arguments)}),q(t,"focus",e[25]),q(t,"mouseover",function(){Ke(e[11](e[34].data))&&e[11](e[34].data).apply(this,arguments)}),q(t,"mousemove",function(){Ke(e[12](e[34].data))&&e[12](e[34].data).apply(this,arguments)}),q(t,"mouseleave",e[13]())],a=!0)},p(o,s){e=o,s[0]&272&&n!==(n=e[9](e[4]?e[34].data.export_value:e[34].data.import_value)+"")&&Ye(r,n),s[0]&256&&i!==(i=`url(${new URL(`#${e[10]}-clip-${e[36]}`,window.location.href)})`)&&f(t,"clip-path",i)},d(o){o&&y(t),a=!1,mt(l)}}}function Ka(e,t){let n,r,i=t[3].length>0&&Xa(t);return{key:e,first:null,c(){n=Te(),i&&i.c(),r=Te(),this.h()},l(a){n=Te(),i&&i.l(a),r=Te(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[3].length>0?i?i.p(t,l):(i=Xa(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&y(n),i&&i.d(a),a&&y(r)}}}function qa(e){let t,n,r,i=e[6]?"Loading...":"No valid data for this pair.",a,l,o;return{c(){t=re("rect"),r=re("text"),a=ge(i),this.h()},l(s){t=ie(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),D(t).forEach(y),r=ie(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=D(r);a=pe(u,i),u.forEach(y),this.h()},h(){f(t,"x","0"),f(t,"y","0"),f(t,"width",e[0]),f(t,"height",e[1]),f(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),f(r,"x",l=e[0]/2),f(r,"y",o=e[1]/2),f(r,"alignment-baseline","central"),f(r,"text-anchor","middle")},m(s,u){K(s,t,u),K(s,r,u),T(r,a)},p(s,u){u[0]&1&&f(t,"width",s[0]),u[0]&2&&f(t,"height",s[1]),u[0]&64&&n!==(n=s[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&f(t,"fill",n),u[0]&64&&i!==(i=s[6]?"Loading...":"No valid data for this pair.")&&Ye(a,i),u[0]&1&&l!==(l=s[0]/2)&&f(r,"x",l),u[0]&2&&o!==(o=s[1]/2)&&f(r,"y",o)},d(s){s&&y(t),s&&y(r)}}}function md(e){var c,h;let t,n,r,i=[],a=new _d,l,o,s=e[8];const u=_=>_[34].data.product_id;for(let _=0;_<s.length;_+=1){let p=Ya(e,s,_),E=u(p);a.set(E,i[_]=Ka(E,p))}let d=((h=(c=e[2])==null?void 0:c.length)!=null?h:0)===0&&qa(e);return{c(){t=j("div"),n=re("svg"),r=re("g");for(let _=0;_<i.length;_+=1)i[_].c();l=re("g"),d&&d.c(),this.h()},l(_){t=$(_,"DIV",{class:!0});var p=D(t);n=ie(p,"svg",{class:!0});var E=D(n);r=ie(E,"g",{class:!0});var m=D(r);for(let w=0;w<i.length;w+=1)i[w].l(m);m.forEach(y),l=ie(E,"g",{id:!0,class:!0}),D(l).forEach(y),d&&d.l(E),E.forEach(y),p.forEach(y),this.h()},h(){f(r,"class","treemap svelte-l0kcz7"),f(l,"id","treemap-tooltip"),f(l,"class","tooltip"),f(n,"class","svelte-l0kcz7"),f(t,"class","viz-section-full"),mn(()=>e[29].call(t))},m(_,p){K(_,t,p),T(t,n),T(n,r);for(let E=0;E<i.length;E+=1)i[E].m(r,null);e[28](r),T(n,l),d&&d.m(n,null),o=Zr(t,e[29].bind(t))},p(_,p){var E,m;p[0]&32568&&(s=_[8],i=Jt(i,p,u,1,_,s,a,r,Cn,Ka,null,Ya)),((m=(E=_[2])==null?void 0:E.length)!=null?m:0)===0?d?d.p(_,p):(d=qa(_),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},i:Be,o:Be,d(_){_&&y(t);for(let p=0;p<i.length;p+=1)i[p].d();e[28](null),d&&d.d(),o()}}}const wr=10,br=120,Za=25,mi=90,Lt=20,Nt=28,Zt=15,gd=()=>{},pd=()=>{},vd=()=>{};function yd(e,t,n){let r,i,a,l,o,s,u,d,c;At(e,st,H=>n(24,u=H)),At(e,un,H=>n(3,d=H)),At(e,cn,H=>n(4,c=H));const h=H=>Qt("$.3s")(H).replace(/G/,"B"),_=`O-${Math.random().toString(16).slice(2)}`;let{data:p}=t,{country1:E,country2:m,productColorScale:w,drilldownBilateral:b,loadingDrilldown:I,locationData:g,productData:k}=p,B=0,X=0,F,N=new Array;function L(H,G,ee){return H+ee<B?H+G:H+G-ee}function M(H,G){return H+mi<X?H+G:H+G-mi}function z(H){return G=>{var he,Ce,oe;let ee=Ie("#treemap-tooltip"),ae=Math.max(br+d.length*Za,br+10+(H.product.name.length-20)*8);ee.append("rect").attr("id","tooltip-rect").attr("width",ae).attr("height",mi).attr("x",L(G.layerX,wr,ae)).attr("y",M(G.layerY,wr)),ee.append("text").attr("class","treemap").attr("id","tooltip-text1").attr("x",L(G.layerX,Lt,ae)).attr("y",M(G.layerY,Nt)).style("font-weight","bold").text(`${H.product.name}`),ee.append("text").attr("class","treemap").attr("id","tooltip-text2").attr("x",L(G.layerX,Lt,ae)).attr("y",M(G.layerY,Nt+Zt)).text(`Sector: ${(oe=(Ce=(he=H.product)==null?void 0:he.parent)==null?void 0:Ce.name)!=null?oe:""}`),ee.append("text").attr("class","treemap").attr("id","tooltip-text3").attr("x",L(G.layerX,Lt,ae)).attr("y",M(G.layerY,Nt+2*Zt)).text((c?"Export: ":"Import: ")+`${h(c?H.export_value:H.import_value)}`),ee.append("text").attr("class","treemap").attr("id","tooltip-text4").attr("x",L(G.layerX,Lt,ae)).attr("y",M(G.layerY,Nt+3*Zt)).text(`Share: ${Qt(".2%")(c?H.export_value/l:H.import_value/o)}`),ee.append("text").attr("class","treemap").attr("id","tooltip-text5").attr("x",L(G.layerX,Lt,ae)).attr("y",M(G.layerY,Nt+4*Zt)).text((d.length>1?"Years: ":"Year: ")+`${d.join(", ")}`)}}function P(H){return G=>{let ee=Math.max(br+d.length*Za,br+10+(H.product.name.length-20)*8);Ie("#tooltip-rect").attr("x",L(G.layerX,wr,ee)).attr("y",M(G.layerY,wr)),Ie("#tooltip-text1").attr("x",L(G.layerX,Lt,ee)).attr("y",M(G.layerY,Nt)),Ie("#tooltip-text2").attr("x",L(G.layerX,Lt,ee)).attr("y",M(G.layerY,Nt+Zt)),Ie("#tooltip-text3").attr("x",L(G.layerX,Lt,ee)).attr("y",M(G.layerY,Nt+2*Zt)),Ie("#tooltip-text4").attr("x",L(G.layerX,Lt,ee)).attr("y",M(G.layerY,Nt+3*Zt)),Ie("#tooltip-text5").attr("x",L(G.layerX,Lt,ee)).attr("y",M(G.layerY,Nt+4*Zt))}}function x(){return H=>{Ie("#treemap-tooltip").selectAll("rect").remove(),Ie("#treemap-tooltip").selectAll("text").remove()}}function S(H){return G=>{var ee,ae,he,Ce;((ee=H==null?void 0:H.product)==null?void 0:ee.parent)&&u.has((he=(ae=H==null?void 0:H.product)==null?void 0:ae.parent)==null?void 0:he.id)?st.update(oe=>{var R,ne,C;return oe.delete((C=(ne=(R=H==null?void 0:H.product)==null?void 0:R.parent)==null?void 0:ne.id)!=null?C:-1),oe}):((Ce=H==null?void 0:H.product)==null?void 0:Ce.parent)!=null&&st.update(oe=>{var R,ne,C;return oe.add((C=(ne=(R=H==null?void 0:H.product)==null?void 0:R.parent)==null?void 0:ne.id)!=null?C:-1),oe})}}function O(H){dt.call(this,e,H)}function le(H){dt.call(this,e,H)}function te(H){dt.call(this,e,H)}function Q(H){ut[H?"unshift":"push"](()=>{F=H,n(7,F)})}function ce(){B=this.clientWidth,X=this.clientHeight,n(0,B),n(1,X)}return e.$$set=H=>{"data"in H&&n(15,p=H.data)},e.$$.update=()=>{var H;if(e.$$.dirty[0]&32768&&n(18,{drilldownBilateral:b,productColorScale:w,country1:E,country2:m,loadingDrilldown:I,locationData:g,productData:k}=p,b,(n(5,w),n(15,p)),(n(16,E),n(15,p)),(n(17,m),n(15,p)),(n(6,I),n(15,p)),(n(19,g),n(15,p)),(n(20,k),n(15,p))),e.$$.dirty[0]&393216&&n(23,r=b==null?void 0:b.get((H=m==null?void 0:m.id)!=null?H:0)),e.$$.dirty[0]&8388616&&n(21,i=d.map(G=>{var ee;return(ee=r==null?void 0:r.get(G))!=null?ee:new Array}).flat()),e.$$.dirty[0]&3866624&&n(22,a=Array.from(yi(i,G=>G.reduce((ee,ae)=>(ee.export_value+=ae.export_value,ee.import_value+=ae.import_value,ee),new xt(g,k,{location_id:E,partner_id:m,product_id:G[0].product_id,year:0,export_value:0,import_value:0})),G=>G.product_id).values())),e.$$.dirty[0]&4194304&&(l=Dr(a,G=>G.export_value)),e.$$.dirty[0]&4194304&&(o=Dr(a,G=>G.import_value)),e.$$.dirty[0]&24838144&&n(2,s=u.size==0?a:Array.from(yi(i.filter(G=>u.has(G.product.parent_id)),G=>G.reduce((ee,ae)=>(ee.export_value+=ae.export_value,ee.import_value+=ae.import_value,ee),new xt(g,k,{location_id:E,partner_id:m,product_id:G[0].product_id,year:0,export_value:0,import_value:0})),G=>G.product_id).values())),e.$$.dirty[0]&16973847&&s&&s.length>0){let G=[];if(u.size==1){let ae=u.entries().next().value[1],he=new xt(new Map,new Map,{location_id:E,partner_id:m,product_id:ae,year:0,export_value:0,import_value:0});he.product=new Lr({product_id:ae,name:"Sector",level:-1,parent_id:-1}),he.product.parent_id=null,G.push(he)}else{let ae=new xt(new Map,new Map,{location_id:E,partner_id:m,product_id:-1,year:0,export_value:0,import_value:0});ae.product=new Lr({product_id:-1,name:"All",level:-1,parent_id:-1}),ae.product.parent_id=null,G.push(ae);let he=vi(s,Ce=>{var oe,R;return(R=(oe=Ce.product)==null?void 0:oe.parent_id)!=null?R:-1});if(he.size>1)for(let[Ce,oe]of he){let R=new xt(new Map,new Map,{location_id:E,partner_id:m,product_id:Ce,year:0,export_value:0,import_value:0});R.product=new Lr({product_id:Ce,name:"Something",level:0,parent_id:-1}),G.push(R)}}G=G.concat(s);let ee=qh().id(ae=>{var he;return(he=ae.product)==null?void 0:he.id}).parentId(ae=>{var he;return(he=ae.product)==null?void 0:he.parent_id})(G);ee.sum(ae=>Math.max(0,ae[c?"export_value":"import_value"])),e0().tile(t0).size([B,X]).padding(2)(ee),n(8,N=ee.leaves())}},[B,X,s,d,c,w,I,F,N,h,_,z,P,x,S,p,E,m,b,g,k,i,a,r,u,O,le,te,Q,ce]}class wd extends Tt{constructor(t){super(),St(this,t,yd,md,Mt,{data:15},null,[-1,-1])}}const bd=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),kr=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=bd.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function kd(e){let t,n,r,i,a,l;return{c(){t=j("div"),n=j("h3"),r=ge("Loading data..."),i=ye(),a=re("svg"),l=re("circle"),this.h()},l(o){t=$(o,"DIV",{class:!0});var s=D(t);n=$(s,"H3",{});var u=D(n);r=pe(u,"Loading data..."),u.forEach(y),i=we(s),a=ie(s,"svg",{class:!0,viewBox:!0});var d=D(a);l=ie(d,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),D(l).forEach(y),d.forEach(y),s.forEach(y),this.h()},h(){f(l,"class","path svelte-z8xtsh"),f(l,"cx","25"),f(l,"cy","25"),f(l,"r","20"),f(l,"fill","none"),f(l,"stroke-width","5"),f(a,"class","spinner svelte-z8xtsh"),f(a,"viewBox","0 0 50 50"),f(t,"class","loading svelte-z8xtsh")},m(o,s){K(o,t,s),T(t,n),T(n,r),T(t,i),T(t,a),T(a,l)},p:Be,i:Be,o:Be,d(o){o&&y(t)}}}function Ed(e){var Pn,lr,pn,ar,or,sr;let t,n,r,i,a,l,o,s,u,d,c,h,_,p,E,m,w,b,I,g,k,B,X,F,N,L,M,z,P,x,S,O,le,te,Q,ce,H,G,ee,ae,he,Ce,oe,R,ne,C,J,de,se,ve,Re,ze,ue,Se,Oe,U,Me,V=((Pn=e[2])==null?void 0:Pn.name)+"",A,Y,_e=e[8]?"export to ":"import from ",De,Fe,Le,W=((lr=e[7])==null?void 0:lr.name)+"",Ne,Pe,Ve=e[9].length>1?`from ${e[9][0]} to ${e[9][e[9].length-1]}?`:`in ${e[9]}?`,Ee,He,je,ft,gt,et,ct,Ft,ot,Rn,tn,Vn,Fn,nn,Hn,tt,gn,Bn;p=new Ea({props:{optionIdentifier:Qa,labelIdentifier:ja,items:Array.from(e[0].values()),value:e[2]}}),p.$on("select",e[11]),P=new Ea({props:{optionIdentifier:Qa,labelIdentifier:ja,items:Array.from(e[0].values()),value:e[7]}}),P.$on("select",e[12]),ee=new dd({props:{data:{bilateralData:e[4],country1_id:(ar=(pn=e[2])==null?void 0:pn.id)!=null?ar:0,country2_id:(sr=(or=e[7])==null?void 0:or.id)!=null?sr:0,productData:e[1],locationData:e[0]}}}),he=new id({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[4],loadingDrilldown:e[6],productColorScale:e[3],country1:e[2],country2:e[7]}}});let Ge=e[10].size>0&&Ja(e);return et=new wd({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[3],country1:e[2],country2:e[7],drilldownBilateral:e[5],loadingDrilldown:e[6]}}}),{c(){t=j("div"),n=j("img"),i=ye(),a=j("div"),l=j("div"),o=j("div"),s=ye(),u=j("span"),d=ge("Country"),c=ye(),h=j("div"),_=ye(),Xe(p.$$.fragment),E=ye(),m=j("div"),w=j("button"),b=ge("\u2194"),I=ye(),g=j("div"),k=j("div"),B=j("div"),X=ye(),F=j("span"),N=ge("Partner"),L=ye(),M=j("div"),z=ye(),Xe(P.$$.fragment),x=ye(),S=j("img"),le=ye(),te=j("div"),Q=ye(),ce=j("div"),H=j("div"),G=j("div"),Xe(ee.$$.fragment),ae=ye(),Xe(he.$$.fragment),Ce=ye(),oe=j("div"),R=j("div"),ne=j("span"),C=ge("Showing"),J=ye(),de=j("button"),se=ge("Exports"),ve=ye(),Re=j("button"),ze=ge("Imports"),ue=ye(),Se=j("div"),Oe=j("h2"),U=ge(`What did
              `),Me=j("b"),A=ge(V),Y=ye(),De=ge(_e),Fe=ye(),Le=j("b"),Ne=ge(W),Pe=ye(),Ee=ge(Ve),He=ye(),je=j("div"),Ge&&Ge.c(),ft=ye(),gt=j("div"),Xe(et.$$.fragment),ct=ye(),Ft=j("footer"),ot=j("center"),Rn=ge("A Bilateral Trade Data Visualization by "),tn=j("b"),Vn=ge("Andrew Lee"),Fn=ge(` &
        `),nn=j("b"),Hn=ge("Franklin Yuan"),this.h()},l(Z){t=$(Z,"DIV",{class:!0});var be=D(t);n=$(be,"IMG",{class:!0,alt:!0,src:!0}),i=we(be),a=$(be,"DIV",{class:!0});var pt=D(a);l=$(pt,"DIV",{class:!0});var $e=D(l);o=$($e,"DIV",{style:!0,class:!0}),D(o).forEach(y),s=we($e),u=$($e,"SPAN",{class:!0});var Ht=D(u);d=pe(Ht,"Country"),Ht.forEach(y),c=we($e),h=$($e,"DIV",{style:!0,class:!0}),D(h).forEach(y),$e.forEach(y),_=we(pt),yt(p.$$.fragment,pt),pt.forEach(y),E=we(be),m=$(be,"DIV",{class:!0});var Bt=D(m);w=$(Bt,"BUTTON",{class:!0});var rn=D(w);b=pe(rn,"\u2194"),rn.forEach(y),Bt.forEach(y),I=we(be),g=$(be,"DIV",{class:!0});var Pt=D(g);k=$(Pt,"DIV",{class:!0});var kt=D(k);B=$(kt,"DIV",{style:!0,class:!0}),D(B).forEach(y),X=we(kt),F=$(kt,"SPAN",{class:!0});var ln=D(F);N=pe(ln,"Partner"),ln.forEach(y),L=we(kt),M=$(kt,"DIV",{style:!0,class:!0}),D(M).forEach(y),kt.forEach(y),z=we(Pt),yt(P.$$.fragment,Pt),Pt.forEach(y),x=we(be),S=$(be,"IMG",{class:!0,alt:!0,src:!0}),be.forEach(y),le=we(Z),te=$(Z,"DIV",{});var vn=D(te);vn.forEach(y),Q=we(Z),ce=$(Z,"DIV",{id:!0,class:!0});var an=D(ce);H=$(an,"DIV",{id:!0,class:!0});var v=D(H);G=$(v,"DIV",{class:!0});var fe=D(G);yt(ee.$$.fragment,fe),ae=we(fe),yt(he.$$.fragment,fe),fe.forEach(y),Ce=we(v),oe=$(v,"DIV",{class:!0});var Ae=D(oe);R=$(Ae,"DIV",{});var Ue=D(R);ne=$(Ue,"SPAN",{});var vt=D(ne);C=pe(vt,"Showing"),vt.forEach(y),J=we(Ue),de=$(Ue,"BUTTON",{class:!0});var bt=D(de);se=pe(bt,"Exports"),bt.forEach(y),ve=we(Ue),Re=$(Ue,"BUTTON",{class:!0});var il=D(Re);ze=pe(il,"Imports"),il.forEach(y),Ue.forEach(y),ue=we(Ae),Se=$(Ae,"DIV",{});var ll=D(Se);Oe=$(ll,"H2",{class:!0});var zt=D(Oe);U=pe(zt,`What did
              `),Me=$(zt,"B",{});var al=D(Me);A=pe(al,V),al.forEach(y),Y=we(zt),De=pe(zt,_e),Fe=we(zt),Le=$(zt,"B",{});var ol=D(Le);Ne=pe(ol,W),ol.forEach(y),Pe=we(zt),Ee=pe(zt,Ve),zt.forEach(y),ll.forEach(y),He=we(Ae),je=$(Ae,"DIV",{class:!0});var sl=D(je);Ge&&Ge.l(sl),sl.forEach(y),Ae.forEach(y),ft=we(v),gt=$(v,"DIV",{class:!0});var ul=D(gt);yt(et.$$.fragment,ul),ul.forEach(y),v.forEach(y),an.forEach(y),ct=we(Z),Ft=$(Z,"FOOTER",{class:!0});var fl=D(Ft);ot=$(fl,"CENTER",{});var zn=D(ot);Rn=pe(zn,"A Bilateral Trade Data Visualization by "),tn=$(zn,"B",{});var cl=D(tn);Vn=pe(cl,"Andrew Lee"),cl.forEach(y),Fn=pe(zn,` &
        `),nn=$(zn,"B",{});var hl=D(nn);Hn=pe(hl,"Franklin Yuan"),hl.forEach(y),zn.forEach(y),fl.forEach(y),this.h()},h(){var Z,be,pt,$e;f(n,"class","country-icon svelte-z8xtsh"),f(n,"alt","Select a country"),ur(n.src,r=kr((be=(Z=e[2])==null?void 0:Z.code)!=null?be:"ATA"))||f(n,"src",r),f(o,"style",`background-color:${jt}`),f(o,"class","svelte-z8xtsh"),f(u,"class","svelte-z8xtsh"),f(h,"style",`background-color:${jt}`),f(h,"class","svelte-z8xtsh"),f(l,"class","country-title svelte-z8xtsh"),f(a,"class","dropdown svelte-z8xtsh"),f(w,"class","switch-btn svelte-z8xtsh"),f(m,"class","switch-btn-container svelte-z8xtsh"),f(B,"style",`background-color:${$t}`),f(B,"class","svelte-z8xtsh"),f(F,"class","svelte-z8xtsh"),f(M,"style",`background-color:${$t}`),f(M,"class","svelte-z8xtsh"),f(k,"class","country-title svelte-z8xtsh"),f(g,"class","dropdown svelte-z8xtsh"),f(S,"class","country-icon svelte-z8xtsh"),f(S,"alt","Select a partner"),ur(S.src,O=kr(($e=(pt=e[7])==null?void 0:pt.code)!=null?$e:"ATA"))||f(S,"src",O),f(t,"class","selectors svelte-z8xtsh"),f(G,"class","viz-row svelte-z8xtsh"),f(de,"class","svelte-z8xtsh"),Ze(de,"btn-active",e[8]),Ze(de,"btn-inactive",!e[8]),f(Re,"class","svelte-z8xtsh"),Ze(Re,"btn-active",!e[8]),Ze(Re,"btn-inactive",e[8]),f(Oe,"class","chart-header svelte-z8xtsh"),f(je,"class","clear-sectors svelte-z8xtsh"),f(oe,"class","spacer svelte-z8xtsh"),f(gt,"class","viz-row svelte-z8xtsh"),f(H,"id","content"),f(H,"class","svelte-z8xtsh"),f(ce,"id","container"),f(ce,"class","svelte-z8xtsh"),f(Ft,"class","svelte-z8xtsh")},m(Z,be){K(Z,t,be),T(t,n),T(t,i),T(t,a),T(a,l),T(l,o),T(l,s),T(l,u),T(u,d),T(l,c),T(l,h),T(a,_),xe(p,a,null),T(t,E),T(t,m),T(m,w),T(w,b),T(t,I),T(t,g),T(g,k),T(k,B),T(k,X),T(k,F),T(F,N),T(k,L),T(k,M),T(g,z),xe(P,g,null),T(t,x),T(t,S),K(Z,le,be),K(Z,te,be),K(Z,Q,be),K(Z,ce,be),T(ce,H),T(H,G),xe(ee,G,null),T(G,ae),xe(he,G,null),T(H,Ce),T(H,oe),T(oe,R),T(R,ne),T(ne,C),T(R,J),T(R,de),T(de,se),T(R,ve),T(R,Re),T(Re,ze),T(oe,ue),T(oe,Se),T(Se,Oe),T(Oe,U),T(Oe,Me),T(Me,A),T(Oe,Y),T(Oe,De),T(Oe,Fe),T(Oe,Le),T(Le,Ne),T(Oe,Pe),T(Oe,Ee),T(oe,He),T(oe,je),Ge&&Ge.m(je,null),T(H,ft),T(H,gt),xe(et,gt,null),K(Z,ct,be),K(Z,Ft,be),T(Ft,ot),T(ot,Rn),T(ot,tn),T(tn,Vn),T(ot,Fn),T(ot,nn),T(nn,Hn),tt=!0,gn||(Bn=[q(w,"click",e[13]),q(de,"click",e[14]),q(Re,"click",e[15])],gn=!0)},p(Z,be){var Pt,kt,ln,vn,an,v,fe,Ae,Ue,vt;(!tt||be&4&&!ur(n.src,r=kr((kt=(Pt=Z[2])==null?void 0:Pt.code)!=null?kt:"ATA")))&&f(n,"src",r);const pt={};be&1&&(pt.items=Array.from(Z[0].values())),be&4&&(pt.value=Z[2]),p.$set(pt);const $e={};be&1&&($e.items=Array.from(Z[0].values())),be&128&&($e.value=Z[7]),P.$set($e),(!tt||be&128&&!ur(S.src,O=kr((vn=(ln=Z[7])==null?void 0:ln.code)!=null?vn:"ATA")))&&f(S,"src",O);const Ht={};be&151&&(Ht.data={bilateralData:Z[4],country1_id:(v=(an=Z[2])==null?void 0:an.id)!=null?v:0,country2_id:(Ae=(fe=Z[7])==null?void 0:fe.id)!=null?Ae:0,productData:Z[1],locationData:Z[0]}),ee.$set(Ht);const Bt={};be&223&&(Bt.data={productData:Z[1],locationData:Z[0],bilateralData:Z[4],loadingDrilldown:Z[6],productColorScale:Z[3],country1:Z[2],country2:Z[7]}),he.$set(Bt),(!tt||be&256)&&Ze(de,"btn-active",Z[8]),(!tt||be&256)&&Ze(de,"btn-inactive",!Z[8]),(!tt||be&256)&&Ze(Re,"btn-active",!Z[8]),(!tt||be&256)&&Ze(Re,"btn-inactive",Z[8]),(!tt||be&4)&&V!==(V=((Ue=Z[2])==null?void 0:Ue.name)+"")&&Ye(A,V),(!tt||be&256)&&_e!==(_e=Z[8]?"export to ":"import from ")&&Ye(De,_e),(!tt||be&128)&&W!==(W=((vt=Z[7])==null?void 0:vt.name)+"")&&Ye(Ne,W),(!tt||be&512)&&Ve!==(Ve=Z[9].length>1?`from ${Z[9][0]} to ${Z[9][Z[9].length-1]}?`:`in ${Z[9]}?`)&&Ye(Ee,Ve),Z[10].size>0?Ge?(Ge.p(Z,be),be&1024&&me(Ge,1)):(Ge=Ja(Z),Ge.c(),me(Ge,1),Ge.m(je,null)):Ge&&(Je(),ke(Ge,1,1,()=>{Ge=null}),Qe());const rn={};be&239&&(rn.data={locationData:Z[0],productData:Z[1],productColorScale:Z[3],country1:Z[2],country2:Z[7],drilldownBilateral:Z[5],loadingDrilldown:Z[6]}),et.$set(rn)},i(Z){tt||(me(p.$$.fragment,Z),me(P.$$.fragment,Z),me(ee.$$.fragment,Z),me(he.$$.fragment,Z),me(Ge),me(et.$$.fragment,Z),tt=!0)},o(Z){ke(p.$$.fragment,Z),ke(P.$$.fragment,Z),ke(ee.$$.fragment,Z),ke(he.$$.fragment,Z),ke(Ge),ke(et.$$.fragment,Z),tt=!1},d(Z){Z&&y(t),We(p),We(P),Z&&y(le),Z&&y(te),Z&&y(Q),Z&&y(ce),We(ee),We(he),Ge&&Ge.d(),We(et),Z&&y(ct),Z&&y(Ft),gn=!1,mt(Bn)}}}function Ja(e){let t,n,r,i,a,l,o;return{c(){t=j("button"),n=ge("Clear Sector Selection"),this.h()},l(s){t=$(s,"BUTTON",{height:!0,class:!0});var u=D(t);n=pe(u,"Clear Sector Selection"),u.forEach(y),this.h()},h(){f(t,"height","10"),f(t,"class","svelte-z8xtsh")},m(s,u){K(s,t,u),T(t,n),a=!0,l||(o=q(t,"click",e[16]),l=!0)},p:Be,i(s){a||(mn(()=>{i&&i.end(1),r=xi(t,xr,{duration:200}),r.start()}),a=!0)},o(s){r&&r.invalidate(),i=rs(t,xr,{duration:200}),a=!1},d(s){s&&y(t),s&&i&&i.end(),l=!1,o()}}}function Id(e){let t,n,r,i,a,l=fr.exports.icons["book-open"].toSvg()+"",o,s,u=fr.exports.icons.youtube.toSvg()+"",d,c,h=fr.exports.icons.database.toSvg()+"",_,p,E=fr.exports.icons.github.toSvg()+"",m,w,b,I,g,k,B,X;const F=[Ed,kd],N=[];function L(M,z){return M[0]&&M[4]&&M[1]?0:1}return k=L(e),B=N[k]=F[k](e),{c(){t=j("link"),n=ye(),r=j("div"),i=j("div"),a=j("a"),o=ye(),s=j("a"),d=ye(),c=j("a"),_=ye(),p=j("a"),m=ye(),w=j("div"),b=j("h1"),I=ge("Commerce Among Nations"),g=ye(),B.c(),this.h()},l(M){const z=ns("svelte-tu7v51",document.head);t=$(z,"LINK",{rel:!0,href:!0}),z.forEach(y),n=we(M),r=$(M,"DIV",{class:!0});var P=D(r);i=$(P,"DIV",{class:!0});var x=D(i);a=$(x,"A",{href:!0,title:!0,class:!0});var S=D(a);S.forEach(y),o=we(x),s=$(x,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var O=D(s);O.forEach(y),d=we(x),c=$(x,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var le=D(c);le.forEach(y),_=we(x),p=$(x,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var te=D(p);te.forEach(y),x.forEach(y),m=we(P),w=$(P,"DIV",{class:!0});var Q=D(w);b=$(Q,"H1",{class:!0});var ce=D(b);I=pe(ce,"Commerce Among Nations"),ce.forEach(y),Q.forEach(y),g=we(P),B.l(P),P.forEach(y),this.h()},h(){f(t,"rel","icon"),f(t,"href",`${Tn}/favicon.png`),document.title="Commerce Among Nations",f(a,"href",Tn+"/processbook"),f(a,"title","process-book"),f(a,"class","svelte-z8xtsh"),f(s,"href","https://www.youtube.com/watch?v=OXdyF8Prxyw"),f(s,"title","screencast"),f(s,"target","_blank"),f(s,"rel","noreferrer"),f(s,"class","svelte-z8xtsh"),f(c,"href","https://dataverse.harvard.edu/dataverse/atlas"),f(c,"title","data"),f(c,"target","_blank"),f(c,"rel","noreferrer"),f(c,"class","svelte-z8xtsh"),f(p,"href","https://github.com/candrewlee14/data-viz-project"),f(p,"title","github"),f(p,"target","_blank"),f(p,"rel","noreferrer"),f(p,"class","svelte-z8xtsh"),f(i,"class","nav svelte-z8xtsh"),f(b,"class","svelte-z8xtsh"),f(w,"class","heading svelte-z8xtsh"),f(r,"class","outer svelte-z8xtsh")},m(M,z){T(document.head,t),K(M,n,z),K(M,r,z),T(r,i),T(i,a),a.innerHTML=l,T(i,o),T(i,s),s.innerHTML=u,T(i,d),T(i,c),c.innerHTML=h,T(i,_),T(i,p),p.innerHTML=E,T(r,m),T(r,w),T(w,b),T(b,I),T(r,g),N[k].m(r,null),X=!0},p(M,[z]){let P=k;k=L(M),k===P?N[k].p(M,z):(Je(),ke(N[P],1,1,()=>{N[P]=null}),Qe(),B=N[k],B?B.p(M,z):(B=N[k]=F[k](M),B.c()),me(B,1),B.m(r,null))},i(M){X||(me(B),X=!0)},o(M){ke(B),X=!1},d(M){y(t),M&&y(n),M&&y(r),N[k].d()}}}const Qa="id",ja="name",Ad=231,Td=43;function Sd(e,t,n){let r,i,a,l,o;At(e,cn,g=>n(8,a=g)),At(e,un,g=>n(9,l=g)),At(e,st,g=>n(10,o=g));const s=g=>{let k=g.detail;n(2,r=c.get(k.id))},u=g=>{let k=g.detail;n(7,i=c.get(k.id))};let d,c=new Map,h=new Map,_,p,E=!1;function m(){let g=r;n(2,r=i),n(7,i=g)}function w(){gl(cn,a=!0,a)}function b(){gl(cn,a=!1,a)}qr(async()=>{Promise.all([_r(`${Tn}/data/location.csv`),_r(`${Tn}/data/hs_product.csv`),_r(`${Tn}/data/hs_2010_to_2020.csv`)]).then(([g,k,B])=>{var F;n(0,c=vl(g.map(N=>new x0(N)).filter(N=>N.level=="country"),N=>N.id)),n(1,h=vl(k.map(N=>new Lr(N)),N=>N.id));for(let[N,L]of h)L.parent=(F=h.get(L.parent_id))!=null?F:null,h.set(N,L);let X=B.map(N=>new xt(c,h,N));n(4,_=vi(X,N=>N.location_id,N=>N.partner_id,N=>N.year)),no(B,N=>+N.export_value),n(3,d=Bo(Array.from(h).map(([N,L])=>L.level).filter(N=>N=="section"),d0))})});const I=()=>{st.set(new Set)};return e.$$.update=()=>{var g,k,B,X;e.$$.dirty&1&&n(2,r=(g=c==null?void 0:c.get(Ad))!=null?g:null),e.$$.dirty&1&&n(7,i=(k=c==null?void 0:c.get(Td))!=null?k:null),e.$$.dirty&7&&(n(5,p=null),n(6,E=!0),_r(`${Tn}/data/${(B=r==null?void 0:r.code)!=null?B:"USA"}/${(X=r==null?void 0:r.code)!=null?X:"USA"}_hs2_2010_to_2020.csv`).then(F=>{n(5,p=vi(F.map(N=>new xt(c,h,N)),N=>N.partner_id,N=>N.year)),n(6,E=!1)}))},[c,h,r,d,_,p,E,i,a,l,o,s,u,m,w,b,I]}class Od extends Tt{constructor(t){super(),St(this,t,Sd,Id,Mt,{})}}export{Od as default};
