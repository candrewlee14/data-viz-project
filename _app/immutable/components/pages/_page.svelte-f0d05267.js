var Mo=Object.defineProperty;var No=(e,t,n)=>t in e?Mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ye=(e,t,n)=>(No(e,typeof t!="symbol"?t+"":t,n),n);import{S as wt,i as bt,s as kt,k as fe,l as ce,m as H,h as w,n as d,b as K,B as Oe,I as Qe,J as Z,g as xe,t as be,d as qe,f as de,K as ot,L as Si,o as Nr,M as La,N as nt,e as ke,O as Ti,v as $e,w as Pe,x as ut,y as Ge,z as Ue,q as ve,r as ye,G as M,u as Xe,A as rr,a as Ae,c as Ie,P as re,Q as ie,p as cn,R as ei,T as sn,U as Cr,V as xt,W as Co,C as Lo,D as Do,E as Oo,F as Ro,X as Mi,Y as Yi,Z as Xi,_ as Ni,$ as Da,a0 as Fo,a1 as xi,a2 as Ho,a3 as Vo,a4 as Bo,a5 as Po,a6 as ze,H as yt,a7 as lt,a8 as Ci,a9 as bn,aa as Go,ab as Uo,ac as zo,ad as Yo,ae as Xo,af as qi,ag as Xn,ah as xo}from"../../chunks/index-5ece49a7.js";import{b as vn}from"../../chunks/paths-6cd3a76e.js";import{w as Li}from"../../chunks/index-747ceb65.js";import{f as Wi}from"../../chunks/feather-e249e621.js";function ir(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Oa(e){let t,n,r;e.length!==2?(t=ir,n=(o,s)=>ir(e(o),s),r=(o,s)=>e(o)-s):(t=e===ir||e===qo?e:Wo,n=e,r=e);function i(o,s,u=0,c=o.length){if(u<c){if(t(s,s)!==0)return c;do{const h=u+c>>>1;n(o[h],s)<0?u=h+1:c=h}while(u<c)}return u}function a(o,s,u=0,c=o.length){if(u<c){if(t(s,s)!==0)return c;do{const h=u+c>>>1;n(o[h],s)<=0?u=h+1:c=h}while(u<c)}return u}function l(o,s,u=0,c=o.length){const h=i(o,s,u,c-1);return h>u&&r(o[h-1],s)>-r(o[h],s)?h-1:h}return{left:i,center:l,right:a}}function Wo(){return 0}function Ko(e){return e===null?NaN:+e}const Zo=Oa(ir),Jo=Zo.right;Oa(Ko).center;const Qo=Jo;function Ra(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class ti extends Map{constructor(t,n=es){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Ki(this,t))}has(t){return super.has(Ki(this,t))}set(t,n){return super.set(jo(this,t),n)}delete(t){return super.delete($o(this,t))}}function Ki({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function jo({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function $o({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function es(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cr(e){return e}function ni(e,...t){return Di(e,cr,cr,t)}function ri(e,t,...n){return Di(e,cr,t,n)}function Zi(e,...t){return Di(e,cr,ts,t)}function ts(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Di(e,t,n,r){return function i(a,l){if(l>=r.length)return n(a);const o=new ti,s=r[l++];let u=-1;for(const c of a){const h=s(c,++u,a),f=o.get(h);f?f.push(c):o.set(h,[c])}for(const[c,h]of o)o.set(c,i(h,l));return t(o)}(e,0)}var ii=Math.sqrt(50),li=Math.sqrt(10),ai=Math.sqrt(2);function ns(e,t,n){var r,i=-1,a,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=Fa(e,t,n))===0||!isFinite(o))return[];if(o>0){let s=Math.round(e/o),u=Math.round(t/o);for(s*o<e&&++s,u*o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)*o}else{o=-o;let s=Math.round(e*o),u=Math.round(t*o);for(s/o<e&&++s,u/o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)/o}return r&&l.reverse(),l}function Fa(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=ii?10:a>=li?5:a>=ai?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=ii?10:a>=li?5:a>=ai?2:1)}function rs(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=ii?i*=10:a>=li?i*=5:a>=ai&&(i*=2),t<e?-i:i}function Rn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ji(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function hr(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function is(e){return e}var Br=1,lr=2,oi=3,Ln=4,Qi=1e-6;function ls(e){return"translate("+e+",0)"}function as(e){return"translate(0,"+e+")"}function os(e){return t=>+e(t)}function ss(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function us(){return!this.__axis}function Oi(e,t){var n=[],r=null,i=null,a=6,l=6,o=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Br||e===Ln?-1:1,c=e===Ln||e===lr?"x":"y",h=e===Br||e===oi?ls:as;function f(_){var v=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,y=i==null?t.tickFormat?t.tickFormat.apply(t,n):is:i,g=Math.max(a,0)+o,k=t.range(),I=+k[0]+s,b=+k[k.length-1]+s,m=(t.bandwidth?ss:os)(t.copy(),s),E=_.selection?_.selection():_,P=E.selectAll(".domain").data([null]),z=E.selectAll(".tick").data(v,t).order(),L=z.exit(),G=z.enter().append("g").attr("class","tick"),A=z.select("line"),S=z.select("text");P=P.merge(P.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),z=z.merge(G),A=A.merge(G.append("line").attr("stroke","currentColor").attr(c+"2",u*a)),S=S.merge(G.append("text").attr("fill","currentColor").attr(c,u*g).attr("dy",e===Br?"0em":e===oi?"0.71em":"0.32em")),_!==E&&(P=P.transition(_),z=z.transition(_),A=A.transition(_),S=S.transition(_),L=L.transition(_).attr("opacity",Qi).attr("transform",function(x){return isFinite(x=m(x))?h(x+s):this.getAttribute("transform")}),G.attr("opacity",Qi).attr("transform",function(x){var U=this.parentNode.__axis;return h((U&&isFinite(U=U(x))?U:m(x))+s)})),L.remove(),P.attr("d",e===Ln||e===lr?l?"M"+u*l+","+I+"H"+s+"V"+b+"H"+u*l:"M"+s+","+I+"V"+b:l?"M"+I+","+u*l+"V"+s+"H"+b+"V"+u*l:"M"+I+","+s+"H"+b),z.attr("opacity",1).attr("transform",function(x){return h(m(x)+s)}),A.attr(c+"2",u*a),S.attr(c,u*g).text(y),E.filter(us).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===lr?"start":e===Ln?"end":"middle"),E.each(function(){this.__axis=m})}return f.scale=function(_){return arguments.length?(t=_,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),f):n.slice()},f.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),f):r&&r.slice()},f.tickFormat=function(_){return arguments.length?(i=_,f):i},f.tickSize=function(_){return arguments.length?(a=l=+_,f):a},f.tickSizeInner=function(_){return arguments.length?(a=+_,f):a},f.tickSizeOuter=function(_){return arguments.length?(l=+_,f):l},f.tickPadding=function(_){return arguments.length?(o=+_,f):o},f.offset=function(_){return arguments.length?(s=+_,f):s},f}function fs(e){return Oi(lr,e)}function Ha(e){return Oi(oi,e)}function cs(e){return Oi(Ln,e)}var hs={value:()=>{}};function Ri(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ar(n)}function ar(e){this._=e}function ds(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ar.prototype=Ri.prototype={constructor:ar,on:function(e,t){var n=this._,r=ds(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=_s(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=ji(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ji(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ar(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function _s(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ji(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=hs,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var si="http://www.w3.org/1999/xhtml";const $i={svg:"http://www.w3.org/2000/svg",xhtml:si,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$i.hasOwnProperty(t)?{space:$i[t],local:e}:e}function ms(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===si&&t.documentElement.namespaceURI===si?t.createElement(e):t.createElementNS(n,e)}}function gs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Va(e){var t=Lr(e);return(t.local?gs:ms)(t)}function ps(){}function Fi(e){return e==null?ps:function(){return this.querySelector(e)}}function vs(e){typeof e!="function"&&(e=Fi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=new Array(l),s,u,c=0;c<l;++c)(s=a[c])&&(u=e.call(s,s.__data__,c,a))&&("__data__"in s&&(u.__data__=s.__data__),o[c]=u);return new ft(r,this._parents)}function ys(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ws(){return[]}function Ba(e){return e==null?ws:function(){return this.querySelectorAll(e)}}function bs(e){return function(){return ys(e.apply(this,arguments))}}function ks(e){typeof e=="function"?e=bs(e):e=Ba(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new ft(r,i)}function Pa(e){return function(){return this.matches(e)}}function Ga(e){return function(t){return t.matches(e)}}var Es=Array.prototype.find;function As(e){return function(){return Es.call(this.children,e)}}function Is(){return this.firstElementChild}function Ss(e){return this.select(e==null?Is:As(typeof e=="function"?e:Ga(e)))}var Ts=Array.prototype.filter;function Ms(){return Array.from(this.children)}function Ns(e){return function(){return Ts.call(this.children,e)}}function Cs(e){return this.selectAll(e==null?Ms:Ns(typeof e=="function"?e:Ga(e)))}function Ls(e){typeof e!="function"&&(e=Pa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new ft(r,this._parents)}function Ua(e){return new Array(e.length)}function Ds(){return new ft(this._enter||this._groups.map(Ua),this._parents)}function dr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}dr.prototype={constructor:dr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Os(e){return function(){return e}}function Rs(e,t,n,r,i,a){for(var l=0,o,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new dr(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function Fs(e,t,n,r,i,a,l){var o,s,u=new Map,c=t.length,h=a.length,f=new Array(c),_;for(o=0;o<c;++o)(s=t[o])&&(f[o]=_=l.call(s,s.__data__,o,t)+"",u.has(_)?i[o]=s:u.set(_,s));for(o=0;o<h;++o)_=l.call(e,a[o],o,a)+"",(s=u.get(_))?(r[o]=s,s.__data__=a[o],u.delete(_)):n[o]=new dr(e,a[o]);for(o=0;o<c;++o)(s=t[o])&&u.get(f[o])===s&&(i[o]=s)}function Hs(e){return e.__data__}function Vs(e,t){if(!arguments.length)return Array.from(this,Hs);var n=t?Fs:Rs,r=this._parents,i=this._groups;typeof e!="function"&&(e=Os(e));for(var a=i.length,l=new Array(a),o=new Array(a),s=new Array(a),u=0;u<a;++u){var c=r[u],h=i[u],f=h.length,_=Bs(e.call(c,c&&c.__data__,u,r)),v=_.length,y=o[u]=new Array(v),g=l[u]=new Array(v),k=s[u]=new Array(f);n(c,h,y,g,k,_,t);for(var I=0,b=0,m,E;I<v;++I)if(m=y[I]){for(I>=b&&(b=I+1);!(E=g[b])&&++b<v;);m._next=E||null}}return l=new ft(l,r),l._enter=o,l._exit=s,l}function Bs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ps(){return new ft(this._exit||this._groups.map(Ua),this._parents)}function Gs(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Us(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),o=new Array(i),s=0;s<l;++s)for(var u=n[s],c=r[s],h=u.length,f=o[s]=new Array(h),_,v=0;v<h;++v)(_=u[v]||c[v])&&(f[v]=_);for(;s<i;++s)o[s]=n[s];return new ft(o,this._parents)}function zs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Ys(e){e||(e=Xs);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],o=l.length,s=i[a]=new Array(o),u,c=0;c<o;++c)(u=l[c])&&(s[c]=u);s.sort(t)}return new ft(i,this._parents).order()}function Xs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qs(){return Array.from(this)}function Ws(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function Ks(){let e=0;for(const t of this)++e;return e}function Zs(){return!this.node()}function Js(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,o;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function Qs(e){return function(){this.removeAttribute(e)}}function js(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $s(e,t){return function(){this.setAttribute(e,t)}}function eu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function tu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function nu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ru(e,t){var n=Lr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?js:Qs:typeof t=="function"?n.local?nu:tu:n.local?eu:$s)(n,t))}function za(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function iu(e){return function(){this.style.removeProperty(e)}}function lu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function au(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ou(e,t,n){return arguments.length>1?this.each((t==null?iu:typeof t=="function"?au:lu)(e,t,n==null?"":n)):En(this.node(),e)}function En(e,t){return e.style.getPropertyValue(t)||za(e).getComputedStyle(e,null).getPropertyValue(t)}function su(e){return function(){delete this[e]}}function uu(e,t){return function(){this[e]=t}}function fu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function cu(e,t){return arguments.length>1?this.each((t==null?su:typeof t=="function"?fu:uu)(e,t)):this.node()[e]}function Ya(e){return e.trim().split(/^|\s+/)}function Hi(e){return e.classList||new Xa(e)}function Xa(e){this._node=e,this._names=Ya(e.getAttribute("class")||"")}Xa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xa(e,t){for(var n=Hi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function qa(e,t){for(var n=Hi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function hu(e){return function(){xa(this,e)}}function du(e){return function(){qa(this,e)}}function _u(e,t){return function(){(t.apply(this,arguments)?xa:qa)(this,e)}}function mu(e,t){var n=Ya(e+"");if(arguments.length<2){for(var r=Hi(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?_u:t?hu:du)(n,t))}function gu(){this.textContent=""}function pu(e){return function(){this.textContent=e}}function vu(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function yu(e){return arguments.length?this.each(e==null?gu:(typeof e=="function"?vu:pu)(e)):this.node().textContent}function wu(){this.innerHTML=""}function bu(e){return function(){this.innerHTML=e}}function ku(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Eu(e){return arguments.length?this.each(e==null?wu:(typeof e=="function"?ku:bu)(e)):this.node().innerHTML}function Au(){this.nextSibling&&this.parentNode.appendChild(this)}function Iu(){return this.each(Au)}function Su(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tu(){return this.each(Su)}function Mu(e){var t=typeof e=="function"?e:Va(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Nu(){return null}function Cu(e,t){var n=typeof e=="function"?e:Va(e),r=t==null?Nu:typeof t=="function"?t:Fi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Lu(){var e=this.parentNode;e&&e.removeChild(this)}function Du(){return this.each(Lu)}function Ou(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ru(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fu(e){return this.select(e?Ru:Ou)}function Hu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Vu(e){return function(t){e.call(this,t,this.__data__)}}function Bu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Pu(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Gu(e,t,n){return function(){var r=this.__on,i,a=Vu(t);if(r){for(var l=0,o=r.length;l<o;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Uu(e,t,n){var r=Bu(e+""),i,a=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var s=0,u=o.length,c;s<u;++s)for(i=0,c=o[s];i<a;++i)if((l=r[i]).type===c.type&&l.name===c.name)return c.value}return}for(o=t?Gu:Pu,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function Wa(e,t,n){var r=za(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function zu(e,t){return function(){return Wa(this,e,t)}}function Yu(e,t){return function(){return Wa(this,e,t.apply(this,arguments))}}function Xu(e,t){return this.each((typeof t=="function"?Yu:zu)(e,t))}function*xu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var Ka=[null];function ft(e,t){this._groups=e,this._parents=t}function Un(){return new ft([[document.documentElement]],Ka)}function qu(){return this}ft.prototype=Un.prototype={constructor:ft,select:vs,selectAll:ks,selectChild:Ss,selectChildren:Cs,filter:Ls,data:Vs,enter:Ds,exit:Ps,join:Gs,merge:Us,selection:qu,order:zs,sort:Ys,call:xs,nodes:qs,node:Ws,size:Ks,empty:Zs,each:Js,attr:ru,style:ou,property:cu,classed:mu,text:yu,html:Eu,raise:Iu,lower:Tu,append:Mu,insert:Cu,remove:Du,clone:Fu,datum:Hu,on:Uu,dispatch:Xu,[Symbol.iterator]:xu};function Se(e){return typeof e=="string"?new ft([[document.querySelector(e)]],[document.documentElement]):new ft([[e]],Ka)}function Wu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function el(e,t){if(e=Wu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const ui={capture:!0,passive:!1};function fi(e){e.preventDefault(),e.stopImmediatePropagation()}function Ku(e){var t=e.document.documentElement,n=Se(e).on("dragstart.drag",fi,ui);"onselectstart"in t?n.on("selectstart.drag",fi,ui):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zu(e,t){var n=e.document.documentElement,r=Se(e).on("dragstart.drag",null);t&&(r.on("click.drag",fi,ui),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Vi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Za(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function zn(){}var Vn=.7,_r=1/Vn,kn="\\s*([+-]?\\d+)\\s*",Bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ju=/^#([0-9a-f]{3,8})$/,Qu=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),ju=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),$u=new RegExp(`^rgba\\(${kn},${kn},${kn},${Bn}\\)$`),ef=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${Bn}\\)$`),tf=new RegExp(`^hsl\\(${Bn},${Tt},${Tt}\\)$`),nf=new RegExp(`^hsla\\(${Bn},${Tt},${Tt},${Bn}\\)$`),tl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vi(zn,ln,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nl,formatHex:nl,formatHex8:rf,formatHsl:lf,formatRgb:rl,toString:rl});function nl(){return this.rgb().formatHex()}function rf(){return this.rgb().formatHex8()}function lf(){return Ja(this).formatHsl()}function rl(){return this.rgb().formatRgb()}function ln(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ju.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?il(t):n===3?new at(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?xn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?xn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Qu.exec(e))?new at(t[1],t[2],t[3],1):(t=ju.exec(e))?new at(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$u.exec(e))?xn(t[1],t[2],t[3],t[4]):(t=ef.exec(e))?xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=tf.exec(e))?ol(t[1],t[2]/100,t[3]/100,1):(t=nf.exec(e))?ol(t[1],t[2]/100,t[3]/100,t[4]):tl.hasOwnProperty(e)?il(tl[e]):e==="transparent"?new at(NaN,NaN,NaN,0):null}function il(e){return new at(e>>16&255,e>>8&255,e&255,1)}function xn(e,t,n,r){return r<=0&&(e=t=n=NaN),new at(e,t,n,r)}function af(e){return e instanceof zn||(e=ln(e)),e?(e=e.rgb(),new at(e.r,e.g,e.b,e.opacity)):new at}function ci(e,t,n,r){return arguments.length===1?af(e):new at(e,t,n,r==null?1:r)}function at(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Vi(at,ci,Za(zn,{brighter(e){return e=e==null?_r:Math.pow(_r,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vn:Math.pow(Vn,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new at(nn(this.r),nn(this.g),nn(this.b),mr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ll,formatHex:ll,formatHex8:of,formatRgb:al,toString:al}));function ll(){return`#${en(this.r)}${en(this.g)}${en(this.b)}`}function of(){return`#${en(this.r)}${en(this.g)}${en(this.b)}${en((isNaN(this.opacity)?1:this.opacity)*255)}`}function al(){const e=mr(this.opacity);return`${e===1?"rgb(":"rgba("}${nn(this.r)}, ${nn(this.g)}, ${nn(this.b)}${e===1?")":`, ${e})`}`}function mr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function en(e){return e=nn(e),(e<16?"0":"")+e.toString(16)}function ol(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vt(e,t,n,r)}function Ja(e){if(e instanceof vt)return new vt(e.h,e.s,e.l,e.opacity);if(e instanceof zn||(e=ln(e)),!e)return new vt;if(e instanceof vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,o=a-i,s=(a+i)/2;return o?(t===a?l=(n-r)/o+(n<r)*6:n===a?l=(r-t)/o+2:l=(t-n)/o+4,o/=s<.5?a+i:2-a-i,l*=60):o=s>0&&s<1?0:l,new vt(l,o,s,e.opacity)}function sf(e,t,n,r){return arguments.length===1?Ja(e):new vt(e,t,n,r==null?1:r)}function vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Vi(vt,sf,Za(zn,{brighter(e){return e=e==null?_r:Math.pow(_r,e),new vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vn:Math.pow(Vn,e),new vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new at(Pr(e>=240?e-240:e+120,i,r),Pr(e,i,r),Pr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new vt(sl(this.h),qn(this.s),qn(this.l),mr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mr(this.opacity);return`${e===1?"hsl(":"hsla("}${sl(this.h)}, ${qn(this.s)*100}%, ${qn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function sl(e){return e=(e||0)%360,e<0?e+360:e}function qn(e){return Math.max(0,Math.min(1,e||0))}function Pr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Bi=e=>()=>e;function uf(e,t){return function(n){return e+n*t}}function ff(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function cf(e){return(e=+e)==1?Qa:function(t,n){return n-t?ff(t,n,e):Bi(isNaN(t)?n:t)}}function Qa(e,t){var n=t-e;return n?uf(e,n):Bi(isNaN(e)?t:e)}const gr=function e(t){var n=cf(t);function r(i,a){var l=n((i=ci(i)).r,(a=ci(a)).r),o=n(i.g,a.g),s=n(i.b,a.b),u=Qa(i.opacity,a.opacity);return function(c){return i.r=l(c),i.g=o(c),i.b=s(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function hf(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function df(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _f(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=Dr(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(o){for(l=0;l<r;++l)a[l]=i[l](o);return a}}function mf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function pt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gf(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Dr(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var hi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gr=new RegExp(hi.source,"g");function pf(e){return function(){return e}}function vf(e){return function(t){return e(t)+""}}function ja(e,t){var n=hi.lastIndex=Gr.lastIndex=0,r,i,a,l=-1,o=[],s=[];for(e=e+"",t=t+"";(r=hi.exec(e))&&(i=Gr.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[l]?o[l]+=a:o[++l]=a),(r=r[0])===(i=i[0])?o[l]?o[l]+=i:o[++l]=i:(o[++l]=null,s.push({i:l,x:pt(r,i)})),n=Gr.lastIndex;return n<t.length&&(a=t.slice(n),o[l]?o[l]+=a:o[++l]=a),o.length<2?s[0]?vf(s[0].x):pf(t):(t=s.length,function(u){for(var c=0,h;c<t;++c)o[(h=s[c]).i]=h.x(u);return o.join("")})}function Dr(e,t){var n=typeof t,r;return t==null||n==="boolean"?Bi(t):(n==="number"?pt:n==="string"?(r=ln(t))?(t=r,gr):ja:t instanceof ln?gr:t instanceof Date?mf:df(t)?hf:Array.isArray(t)?_f:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gf:pt)(e,t)}function yf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ul=180/Math.PI,di={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $a(e,t,n,r,i,a){var l,o,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,s/=o),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*ul,skewX:Math.atan(s)*ul,scaleX:l,scaleY:o}}var Wn;function wf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?di:$a(t.a,t.b,t.c,t.d,t.e,t.f)}function bf(e){return e==null||(Wn||(Wn=document.createElementNS("http://www.w3.org/2000/svg","g")),Wn.setAttribute("transform",e),!(e=Wn.transform.baseVal.consolidate()))?di:(e=e.matrix,$a(e.a,e.b,e.c,e.d,e.e,e.f))}function eo(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,h,f,_,v){if(u!==h||c!==f){var y=_.push("translate(",null,t,null,n);v.push({i:y-4,x:pt(u,h)},{i:y-2,x:pt(c,f)})}else(h||f)&&_.push("translate("+h+t+f+n)}function l(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:pt(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function o(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:pt(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function s(u,c,h,f,_,v){if(u!==h||c!==f){var y=_.push(i(_)+"scale(",null,",",null,")");v.push({i:y-4,x:pt(u,h)},{i:y-2,x:pt(c,f)})}else(h!==1||f!==1)&&_.push(i(_)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,h,f),l(u.rotate,c.rotate,h,f),o(u.skewX,c.skewX,h,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(_){for(var v=-1,y=f.length,g;++v<y;)h[(g=f[v]).i]=g.x(_);return h.join("")}}}var kf=eo(wf,"px, ","px)","deg)"),Ef=eo(bf,", ",")",")"),An=0,Dn=0,Sn=0,to=1e3,pr,On,vr=0,an=0,Or=0,Pn=typeof performance=="object"&&performance.now?performance:Date,no=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pi(){return an||(no(Af),an=Pn.now()+Or)}function Af(){an=0}function yr(){this._call=this._time=this._next=null}yr.prototype=ro.prototype={constructor:yr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Pi():+n)+(t==null?0:+t),!this._next&&On!==this&&(On?On._next=this:pr=this,On=this),this._call=e,this._time=n,_i()},stop:function(){this._call&&(this._call=null,this._time=1/0,_i())}};function ro(e,t,n){var r=new yr;return r.restart(e,t,n),r}function If(){Pi(),++An;for(var e=pr,t;e;)(t=an-e._time)>=0&&e._call.call(void 0,t),e=e._next;--An}function fl(){an=(vr=Pn.now())+Or,An=Dn=0;try{If()}finally{An=0,Tf(),an=0}}function Sf(){var e=Pn.now(),t=e-vr;t>to&&(Or-=t,vr=e)}function Tf(){for(var e,t=pr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pr=n);On=e,_i(r)}function _i(e){if(!An){Dn&&(Dn=clearTimeout(Dn));var t=e-an;t>24?(e<1/0&&(Dn=setTimeout(fl,e-Pn.now()-Or)),Sn&&(Sn=clearInterval(Sn))):(Sn||(vr=Pn.now(),Sn=setInterval(Sf,to)),An=1,no(fl))}}function cl(e,t,n){var r=new yr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Mf=Ri("start","end","cancel","interrupt"),Nf=[],io=0,hl=1,mi=2,or=3,dl=4,gi=5,sr=6;function Rr(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Cf(e,n,{name:t,index:r,group:i,on:Mf,tween:Nf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:io})}function Gi(e,t){var n=Et(e,t);if(n.state>io)throw new Error("too late; already scheduled");return n}function Mt(e,t){var n=Et(e,t);if(n.state>or)throw new Error("too late; already running");return n}function Et(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Cf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ro(a,0,n.time);function a(u){n.state=hl,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var c,h,f,_;if(n.state!==hl)return s();for(c in r)if(_=r[c],_.name===n.name){if(_.state===or)return cl(l);_.state===dl?(_.state=sr,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[c]):+c<t&&(_.state=sr,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[c])}if(cl(function(){n.state===or&&(n.state=dl,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=mi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mi){for(n.state=or,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(_=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=_);i.length=h+1}}function o(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=gi,1),h=-1,f=i.length;++h<f;)i[h].call(e,c);n.state===gi&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=sr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function pi(e,t){var n=e.__transition,r,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>mi&&r.state<gi,r.state=sr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function Lf(e){return this.each(function(){pi(this,e)})}function Df(e,t){var n,r;return function(){var i=Mt(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,o=r.length;l<o;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function Of(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Mt(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var o={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=o;break}s===u&&i.push(o)}a.tween=i}}function Rf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Et(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?Df:Of)(n,e,t))}function Ui(e,t,n){var r=e._id;return e.each(function(){var i=Mt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Et(i,r).value[t]}}function lo(e,t){var n;return(typeof t=="number"?pt:t instanceof ln?gr:(n=ln(t))?(t=n,gr):ja)(e,t)}function Ff(e){return function(){this.removeAttribute(e)}}function Hf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function Bf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function Pf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Gf(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function Uf(e,t){var n=Lr(e),r=n==="transform"?Ef:lo;return this.attrTween(e,typeof t=="function"?(n.local?Gf:Pf)(n,r,Ui(this,"attr."+e,t)):t==null?(n.local?Hf:Ff)(n):(n.local?Bf:Vf)(n,r,t))}function zf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Xf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Yf(e,a)),n}return i._value=t,i}function xf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&zf(e,a)),n}return i._value=t,i}function qf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Lr(e);return this.tween(n,(r.local?Xf:xf)(r,t))}function Wf(e,t){return function(){Gi(this,e).delay=+t.apply(this,arguments)}}function Kf(e,t){return t=+t,function(){Gi(this,e).delay=t}}function Zf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Wf:Kf)(t,e)):Et(this.node(),t).delay}function Jf(e,t){return function(){Mt(this,e).duration=+t.apply(this,arguments)}}function Qf(e,t){return t=+t,function(){Mt(this,e).duration=t}}function jf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jf:Qf)(t,e)):Et(this.node(),t).duration}function $f(e,t){if(typeof t!="function")throw new Error;return function(){Mt(this,e).ease=t}}function ec(e){var t=this._id;return arguments.length?this.each($f(t,e)):Et(this.node(),t).ease}function tc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Mt(this,e).ease=n}}function nc(e){if(typeof e!="function")throw new Error;return this.each(tc(this._id,e))}function rc(e){typeof e!="function"&&(e=Pa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new Bt(r,this._parents,this._name,this._id)}function ic(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),o=0;o<a;++o)for(var s=t[o],u=n[o],c=s.length,h=l[o]=new Array(c),f,_=0;_<c;++_)(f=s[_]||u[_])&&(h[_]=f);for(;o<r;++o)l[o]=t[o];return new Bt(l,this._parents,this._name,this._id)}function lc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ac(e,t,n){var r,i,a=lc(t)?Gi:Mt;return function(){var l=a(this,e),o=l.on;o!==r&&(i=(r=o).copy()).on(t,n),l.on=i}}function oc(e,t){var n=this._id;return arguments.length<2?Et(this.node(),n).on.on(e):this.each(ac(n,e,t))}function sc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function uc(){return this.on("end.remove",sc(this._id))}function fc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fi(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var o=r[l],s=o.length,u=a[l]=new Array(s),c,h,f=0;f<s;++f)(c=o[f])&&(h=e.call(c,c.__data__,f,o))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,Rr(u[f],t,n,f,u,Et(c,n)));return new Bt(a,this._parents,t,n)}function cc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ba(e));for(var r=this._groups,i=r.length,a=[],l=[],o=0;o<i;++o)for(var s=r[o],u=s.length,c,h=0;h<u;++h)if(c=s[h]){for(var f=e.call(c,c.__data__,h,s),_,v=Et(c,n),y=0,g=f.length;y<g;++y)(_=f[y])&&Rr(_,t,n,y,f,v);a.push(f),l.push(c)}return new Bt(a,l,t,n)}var hc=Un.prototype.constructor;function dc(){return new hc(this._groups,this._parents)}function _c(e,t){var n,r,i;return function(){var a=En(this,e),l=(this.style.removeProperty(e),En(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function ao(e){return function(){this.style.removeProperty(e)}}function mc(e,t,n){var r,i=n+"",a;return function(){var l=En(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function gc(e,t,n){var r,i,a;return function(){var l=En(this,e),o=n(this),s=o+"";return o==null&&(s=o=(this.style.removeProperty(e),En(this,e))),l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o))}}function pc(e,t){var n,r,i,a="style."+t,l="end."+a,o;return function(){var s=Mt(this,e),u=s.on,c=s.value[a]==null?o||(o=ao(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(l,i=c),s.on=r}}function vc(e,t,n){var r=(e+="")=="transform"?kf:lo;return t==null?this.styleTween(e,_c(e,r)).on("end.style."+e,ao(e)):typeof t=="function"?this.styleTween(e,gc(e,r,Ui(this,"style."+e,t))).each(pc(this._id,e)):this.styleTween(e,mc(e,r,t),n).on("end.style."+e,null)}function yc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function wc(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&yc(e,l,n)),r}return a._value=t,a}function bc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,wc(e,t,n==null?"":n))}function kc(e){return function(){this.textContent=e}}function Ec(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Ac(e){return this.tween("text",typeof e=="function"?Ec(Ui(this,"text",e)):kc(e==null?"":e+""))}function Ic(e){return function(t){this.textContent=e.call(this,t)}}function Sc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ic(i)),t}return r._value=e,r}function Tc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Sc(e))}function Mc(){for(var e=this._name,t=this._id,n=oo(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)if(s=l[u]){var c=Et(s,t);Rr(s,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Bt(r,this._parents,e,n)}function Nc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var o={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var u=Mt(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(s)),u.on=t}),i===0&&a()})}var Cc=0;function Bt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function oo(){return++Cc}var Dt=Un.prototype;Bt.prototype={constructor:Bt,select:fc,selectAll:cc,selectChild:Dt.selectChild,selectChildren:Dt.selectChildren,filter:rc,merge:ic,selection:dc,transition:Mc,call:Dt.call,nodes:Dt.nodes,node:Dt.node,size:Dt.size,empty:Dt.empty,each:Dt.each,on:oc,attr:Uf,attrTween:qf,style:vc,styleTween:bc,text:Ac,textTween:Tc,remove:uc,tween:Rf,delay:Zf,duration:jf,ease:ec,easeVarying:nc,end:Nc,[Symbol.iterator]:Dt[Symbol.iterator]};function Lc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dc={time:null,delay:0,duration:250,ease:Lc};function Oc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Rc(e){var t,n;e instanceof Bt?(t=e._id,e=e._name):(t=oo(),(n=Dc).time=Pi(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&Rr(s,e,t,u,l,n||Oc(s,t));return new Bt(r,this._parents,e,t)}Un.prototype.interrupt=Lf;Un.prototype.transition=Rc;const Ur=e=>()=>e;function Fc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Hc(e){e.stopImmediatePropagation()}function zr(e){e.preventDefault(),e.stopImmediatePropagation()}var _l={name:"drag"},Yr={name:"space"},hn={name:"handle"},dn={name:"center"};const{abs:ml,max:Ze,min:Je}=Math;function gl(e){return[+e[0],+e[1]]}function pl(e){return[gl(e[0]),gl(e[1])]}var ur={name:"x",handles:["w","e"].map(wr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Xr={name:"y",handles:["n","s"].map(wr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ot={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},vl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},yl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Vc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Bc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function wr(e){return{type:e}}function Pc(e){return!e.ctrlKey&&!e.button}function Gc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function xr(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function zc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Yc(){return Xc(ur)}function Xc(e){var t=Gc,n=Pc,r=Uc,i=!0,a=Ri("start","brush","end"),l=6,o;function s(g){var k=g.property("__brush",y).selectAll(".overlay").data([wr("overlay")]);k.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ot.overlay).merge(k).each(function(){var b=xr(this).extent;Se(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([wr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ot.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var I=g.selectAll(".handle").data(e.handles,function(b){return b.type});I.exit().remove(),I.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Ot[b.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(g,k,I){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,m=b.__brush,E=c(b,arguments),P=m.selection,z=e.input(typeof k=="function"?k.apply(this,arguments):k,m.extent),L=Dr(P,z);function G(A){m.selection=A===1&&z===null?null:L(A),u.call(b),E.brush()}return P!==null&&z!==null?G:G(1)}):g.each(function(){var b=this,m=arguments,E=b.__brush,P=e.input(typeof k=="function"?k.apply(b,m):k,E.extent),z=c(b,m).beforestart();pi(b),E.selection=P===null?null:P,u.call(b),z.start(I).brush(I).end(I)})},s.clear=function(g,k){s.move(g,null,k)};function u(){var g=Se(this),k=xr(this).selection;k?(g.selectAll(".selection").style("display",null).attr("x",k[0][0]).attr("y",k[0][1]).attr("width",k[1][0]-k[0][0]).attr("height",k[1][1]-k[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(I){return I.type[I.type.length-1]==="e"?k[1][0]-l/2:k[0][0]-l/2}).attr("y",function(I){return I.type[0]==="s"?k[1][1]-l/2:k[0][1]-l/2}).attr("width",function(I){return I.type==="n"||I.type==="s"?k[1][0]-k[0][0]+l:l}).attr("height",function(I){return I.type==="e"||I.type==="w"?k[1][1]-k[0][1]+l:l})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,k,I){var b=g.__brush.emitter;return b&&(!I||!b.clean)?b:new h(g,k,I)}function h(g,k,I){this.that=g,this.args=k,this.state=g.__brush,this.active=0,this.clean=I}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,k){return this.starting?(this.starting=!1,this.emit("start",g,k)):this.emit("brush",g),this},brush:function(g,k){return this.emit("brush",g,k),this},end:function(g,k){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,k)),this},emit:function(g,k,I){var b=Se(this.that).datum();a.call(g,this.that,new Fc(g,{sourceEvent:k,target:s,selection:e.output(this.state.selection),mode:I,dispatch:a}),b)}};function f(g){if(o&&!g.touches||!n.apply(this,arguments))return;var k=this,I=g.target.__data__.type,b=(i&&g.metaKey?I="overlay":I)==="selection"?_l:i&&g.altKey?dn:hn,m=e===Xr?null:Vc[I],E=e===ur?null:Bc[I],P=xr(k),z=P.extent,L=P.selection,G=z[0][0],A,S,x=z[0][1],U,Y,T=z[1][0],C,j,oe=z[1][1],te,X,V=0,W=0,he,se=m&&E&&i&&g.shiftKey,Te,we,ue=Array.from(g.touches||[g],le=>{const me=le.identifier;return le=el(le,k),le.point0=le.slice(),le.identifier=me,le});pi(k);var O=c(k,arguments,!0).beforestart();if(I==="overlay"){L&&(he=!0);const le=[ue[0],ue[1]||ue[0]];P.selection=L=[[A=e===Xr?G:Je(le[0][0],le[1][0]),U=e===ur?x:Je(le[0][1],le[1][1])],[C=e===Xr?T:Ze(le[0][0],le[1][0]),te=e===ur?oe:Ze(le[0][1],le[1][1])]],ue.length>1&&N(g)}else A=L[0][0],U=L[0][1],C=L[1][0],te=L[1][1];S=A,Y=U,j=C,X=te;var $=Se(k).attr("pointer-events","none"),Me=$.selectAll(".overlay").attr("cursor",Ot[I]);if(g.touches)O.moved=ne,O.ended=F;else{var R=Se(g.view).on("mousemove.brush",ne,!0).on("mouseup.brush",F,!0);i&&R.on("keydown.brush",J,!0).on("keyup.brush",Ne,!0),Ku(g.view)}u.call(k),O.start(g,b.name);function ne(le){for(const me of le.changedTouches||[le])for(const B of ue)B.identifier===me.identifier&&(B.cur=el(me,k));if(se&&!Te&&!we&&ue.length===1){const me=ue[0];ml(me.cur[0]-me[0])>ml(me.cur[1]-me[1])?we=!0:Te=!0}for(const me of ue)me.cur&&(me[0]=me.cur[0],me[1]=me.cur[1]);he=!0,zr(le),N(le)}function N(le){const me=ue[0],B=me.point0;var ge;switch(V=me[0]-B[0],W=me[1]-B[1],b){case Yr:case _l:{m&&(V=Ze(G-A,Je(T-C,V)),S=A+V,j=C+V),E&&(W=Ze(x-U,Je(oe-te,W)),Y=U+W,X=te+W);break}case hn:{ue[1]?(m&&(S=Ze(G,Je(T,ue[0][0])),j=Ze(G,Je(T,ue[1][0])),m=1),E&&(Y=Ze(x,Je(oe,ue[0][1])),X=Ze(x,Je(oe,ue[1][1])),E=1)):(m<0?(V=Ze(G-A,Je(T-A,V)),S=A+V,j=C):m>0&&(V=Ze(G-C,Je(T-C,V)),S=A,j=C+V),E<0?(W=Ze(x-U,Je(oe-U,W)),Y=U+W,X=te):E>0&&(W=Ze(x-te,Je(oe-te,W)),Y=U,X=te+W));break}case dn:{m&&(S=Ze(G,Je(T,A-V*m)),j=Ze(G,Je(T,C+V*m))),E&&(Y=Ze(x,Je(oe,U-W*E)),X=Ze(x,Je(oe,te+W*E)));break}}j<S&&(m*=-1,ge=A,A=C,C=ge,ge=S,S=j,j=ge,I in vl&&Me.attr("cursor",Ot[I=vl[I]])),X<Y&&(E*=-1,ge=U,U=te,te=ge,ge=Y,Y=X,X=ge,I in yl&&Me.attr("cursor",Ot[I=yl[I]])),P.selection&&(L=P.selection),Te&&(S=L[0][0],j=L[1][0]),we&&(Y=L[0][1],X=L[1][1]),(L[0][0]!==S||L[0][1]!==Y||L[1][0]!==j||L[1][1]!==X)&&(P.selection=[[S,Y],[j,X]],u.call(k),O.brush(le,b.name))}function F(le){if(Hc(le),le.touches){if(le.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Zu(le.view,he),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),Me.attr("cursor",Ot.overlay),P.selection&&(L=P.selection),zc(L)&&(P.selection=null,u.call(k)),O.end(le,b.name)}function J(le){switch(le.keyCode){case 16:{se=m&&E;break}case 18:{b===hn&&(m&&(C=j-V*m,A=S+V*m),E&&(te=X-W*E,U=Y+W*E),b=dn,N(le));break}case 32:{(b===hn||b===dn)&&(m<0?C=j-V:m>0&&(A=S-V),E<0?te=X-W:E>0&&(U=Y-W),b=Yr,Me.attr("cursor",Ot.selection),N(le));break}default:return}zr(le)}function Ne(le){switch(le.keyCode){case 16:{se&&(Te=we=se=!1,N(le));break}case 18:{b===dn&&(m<0?C=j:m>0&&(A=S),E<0?te=X:E>0&&(U=Y),b=hn,N(le));break}case 32:{b===Yr&&(le.altKey?(m&&(C=j-V*m,A=S+V*m),E&&(te=X-W*E,U=Y+W*E),b=dn):(m<0?C=j:m>0&&(A=S),E<0?te=X:E>0&&(U=Y),b=hn),Me.attr("cursor",Ot[I]),N(le));break}default:return}zr(le)}}function _(g){c(this,arguments).moved(g)}function v(g){c(this,arguments).ended(g)}function y(){var g=this.__brush||{selection:null};return g.extent=pl(t.apply(this,arguments)),g.dim=e,g}return s.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Ur(pl(g)),s):t},s.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Ur(!!g),s):n},s.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Ur(!!g),s):r},s.handleSize=function(g){return arguments.length?(l=+g,s):l},s.keyModifiers=function(g){return arguments.length?(i=!!g,s):i},s.on=function(){var g=a.on.apply(a,arguments);return g===a?s:g},s}const vi=Math.PI,yi=2*vi,$t=1e-6,xc=yi-$t;function wi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function bi(){return new wi}wi.prototype=bi.prototype={constructor:wi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,l=this._y1,o=n-e,s=r-t,u=a-e,c=l-t,h=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>$t)if(!(Math.abs(c*o-s*u)>$t)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var f=n-a,_=r-l,v=o*o+s*s,y=f*f+_*_,g=Math.sqrt(v),k=Math.sqrt(h),I=i*Math.tan((vi-Math.acos((v+h-y)/(2*g*k)))/2),b=I/k,m=I/g;Math.abs(b-1)>$t&&(this._+="L"+(e+b*u)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>u*_)+","+(this._x1=e+m*o)+","+(this._y1=t+m*s)}},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n,a=!!a;var l=n*Math.cos(r),o=n*Math.sin(r),s=e+l,u=t+o,c=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>$t||Math.abs(this._y1-u)>$t)&&(this._+="L"+s+","+u),n&&(h<0&&(h=h%yi+yi),h>xc?this._+="A"+n+","+n+",0,1,"+c+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=s)+","+(this._y1=u):h>$t&&(this._+="A"+n+","+n+",0,"+ +(h>=vi)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var wl={},qr={},Wr=34,Tn=10,Kr=13;function so(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function qc(e,t){var n=so(e);return function(r,i){return t(n(r),i,e)}}function bl(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function it(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Wc(e){return e<0?"-"+it(-e,6):e>9999?"+"+it(e,6):it(e,4)}function Kc(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Wc(e.getUTCFullYear())+"-"+it(e.getUTCMonth()+1,2)+"-"+it(e.getUTCDate(),2)+(i?"T"+it(t,2)+":"+it(n,2)+":"+it(r,2)+"."+it(i,3)+"Z":r?"T"+it(t,2)+":"+it(n,2)+":"+it(r,2)+"Z":n||t?"T"+it(t,2)+":"+it(n,2)+"Z":"")}function Zc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,f){var _,v,y=i(h,function(g,k){if(_)return _(g,k-1);v=g,_=f?qc(g,f):so(g)});return y.columns=v||[],y}function i(h,f){var _=[],v=h.length,y=0,g=0,k,I=v<=0,b=!1;h.charCodeAt(v-1)===Tn&&--v,h.charCodeAt(v-1)===Kr&&--v;function m(){if(I)return qr;if(b)return b=!1,wl;var P,z=y,L;if(h.charCodeAt(z)===Wr){for(;y++<v&&h.charCodeAt(y)!==Wr||h.charCodeAt(++y)===Wr;);return(P=y)>=v?I=!0:(L=h.charCodeAt(y++))===Tn?b=!0:L===Kr&&(b=!0,h.charCodeAt(y)===Tn&&++y),h.slice(z+1,P-1).replace(/""/g,'"')}for(;y<v;){if((L=h.charCodeAt(P=y++))===Tn)b=!0;else if(L===Kr)b=!0,h.charCodeAt(y)===Tn&&++y;else if(L!==n)continue;return h.slice(z,P)}return I=!0,h.slice(z,v)}for(;(k=m())!==qr;){for(var E=[];k!==wl&&k!==qr;)E.push(k),k=m();f&&(E=f(E,g++))==null||_.push(E)}return _}function a(h,f){return h.map(function(_){return f.map(function(v){return c(_[v])}).join(e)})}function l(h,f){return f==null&&(f=bl(h)),[f.map(c).join(e)].concat(a(h,f)).join(`
`)}function o(h,f){return f==null&&(f=bl(h)),a(h,f).join(`
`)}function s(h){return h.map(u).join(`
`)}function u(h){return h.map(c).join(e)}function c(h){return h==null?"":h instanceof Date?Kc(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:l,formatBody:o,formatRows:s,formatRow:u,formatValue:c}}var Jc=Zc(","),Qc=Jc.parse;function jc(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function $c(e,t){return fetch(e,t).then(jc)}function eh(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),$c(t,n).then(function(i){return e(i,r)})}}var Kn=eh(Qc);function th(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function br(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function In(e){return e=br(Math.abs(e)),e?e[1]:NaN}function nh(e,t){return function(n,r){for(var i=n.length,a=[],l=0,o=e[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),a.push(n.substring(i-=o,i+o)),!((s+=o+1)>r));)o=e[l=(l+1)%e.length];return a.reverse().join(t)}}function rh(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ih=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kr(e){if(!(t=ih.exec(e)))throw new Error("invalid format: "+e);var t;return new zi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kr.prototype=zi.prototype;function zi(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lh(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var uo;function ah(e,t){var n=br(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(uo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+br(e,Math.max(0,t+a-1))[0]}function kl(e,t){var n=br(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const El={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:th,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kl(e*100,t),r:kl,s:ah,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Al(e){return e}var Il=Array.prototype.map,Sl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function oh(e){var t=e.grouping===void 0||e.thousands===void 0?Al:nh(Il.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Al:rh(Il.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(h){h=kr(h);var f=h.fill,_=h.align,v=h.sign,y=h.symbol,g=h.zero,k=h.width,I=h.comma,b=h.precision,m=h.trim,E=h.type;E==="n"?(I=!0,E="g"):El[E]||(b===void 0&&(b=12),m=!0,E="g"),(g||f==="0"&&_==="=")&&(g=!0,f="0",_="=");var P=y==="$"?n:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",z=y==="$"?r:/[%p]/.test(E)?l:"",L=El[E],G=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(S){var x=P,U=z,Y,T,C;if(E==="c")U=L(S)+U,S="";else{S=+S;var j=S<0||1/S<0;if(S=isNaN(S)?s:L(Math.abs(S),b),m&&(S=lh(S)),j&&+S==0&&v!=="+"&&(j=!1),x=(j?v==="("?v:o:v==="-"||v==="("?"":v)+x,U=(E==="s"?Sl[8+uo/3]:"")+U+(j&&v==="("?")":""),G){for(Y=-1,T=S.length;++Y<T;)if(C=S.charCodeAt(Y),48>C||C>57){U=(C===46?i+S.slice(Y+1):S.slice(Y))+U,S=S.slice(0,Y);break}}}I&&!g&&(S=t(S,1/0));var oe=x.length+S.length+U.length,te=oe<k?new Array(k-oe+1).join(f):"";switch(I&&g&&(S=t(te+S,te.length?k-U.length:1/0),te=""),_){case"<":S=x+S+U+te;break;case"=":S=x+te+S+U;break;case"^":S=te.slice(0,oe=te.length>>1)+x+S+U+te.slice(oe);break;default:S=te+x+S+U;break}return a(S)}return A.toString=function(){return h+""},A}function c(h,f){var _=u((h=kr(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(In(f)/3)))*3,y=Math.pow(10,-v),g=Sl[8+v/3];return function(k){return _(y*k)+g}}return{format:u,formatPrefix:c}}var Zn,qt,fo;sh({thousands:",",grouping:[3],currency:["$",""]});function sh(e){return Zn=oh(e),qt=Zn.format,fo=Zn.formatPrefix,Zn}function uh(e){return Math.max(0,-In(Math.abs(e)))}function fh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(In(t)/3)))*3-In(Math.abs(e)))}function ch(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,In(t)-In(e))+1}function hh(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function dh(){return this.eachAfter(hh)}function _h(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function mh(e,t){for(var n=this,r=[n],i,a,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function gh(e,t){for(var n=this,r=[n],i=[],a,l,o,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(l=0,o=a.length;l<o;++l)r.push(a[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function ph(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function vh(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function yh(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function wh(e){for(var t=this,n=bh(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function bh(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function kh(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Eh(){return Array.from(this)}function Ah(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ih(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Sh(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function co(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Nh)):t===void 0&&(t=Mh);for(var n=new Gn(e),r,i=[n],a,l,o,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,o=s-1;o>=0;--o)i.push(a=l[o]=new Gn(l[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(ho)}function Th(){return co(this).eachBefore(Ch)}function Mh(e){return e.children}function Nh(e){return Array.isArray(e)?e[1]:null}function Ch(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function ho(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Gn(e){this.data=e,this.depth=this.height=0,this.parent=null}Gn.prototype=co.prototype={constructor:Gn,count:dh,each:_h,eachAfter:gh,eachBefore:mh,find:ph,sum:vh,sort:yh,path:wh,ancestors:kh,descendants:Eh,leaves:Ah,links:Ih,copy:Th,[Symbol.iterator]:Sh};function Zr(e){return e==null?null:_o(e)}function _o(e){if(typeof e!="function")throw new Error;return e}function Mn(){return 0}function Nn(e){return function(){return e}}function Lh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Dh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(r-t)/e.value;++o<s;)l=a[o],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var Oh={depth:-1},Tl={},Jr={};function Rh(e){return e.id}function Fh(e){return e.parentId}function Hh(){var e=Rh,t=Fh,n;function r(i){var a=Array.from(i),l=e,o=t,s,u,c,h,f,_,v,y,g=new Map;if(n!=null){const k=a.map((m,E)=>Vh(n(m,E,i))),I=k.map(Ml),b=new Set(k).add("");for(const m of I)b.has(m)||(b.add(m),k.push(m),I.push(Ml(m)),a.push(Jr));l=(m,E)=>k[E],o=(m,E)=>I[E]}for(c=0,s=a.length;c<s;++c)u=a[c],_=a[c]=new Gn(u),(v=l(u,c,i))!=null&&(v+="")&&(y=_.id=v,g.set(y,g.has(y)?Tl:_)),(v=o(u,c,i))!=null&&(v+="")&&(_.parent=v);for(c=0;c<s;++c)if(_=a[c],v=_.parent){if(f=g.get(v),!f)throw new Error("missing: "+v);if(f===Tl)throw new Error("ambiguous: "+v);f.children?f.children.push(_):f.children=[_],_.parent=f}else{if(h)throw new Error("multiple roots");h=_}if(!h)throw new Error("no root");if(n!=null){for(;h.data===Jr&&h.children.length===1;)h=h.children[0],--s;for(let k=a.length-1;k>=0&&(_=a[k],_.data===Jr);--k)_.data=null}if(h.parent=Oh,h.eachBefore(function(k){k.depth=k.parent.depth+1,--s}).eachBefore(ho),h.parent=null,s>0)throw new Error("cycle");return h}return r.id=function(i){return arguments.length?(e=Zr(i),r):e},r.parentId=function(i){return arguments.length?(t=Zr(i),r):t},r.path=function(i){return arguments.length?(n=Zr(i),r):n},r}function Vh(e){e=`${e}`;let t=e.length;return ki(e,t-1)&&!ki(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Ml(e){let t=e.length;if(t<2)return"";for(;--t>1&&!ki(e,t););return e.slice(0,t)}function ki(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Bh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(i-n)/e.value;++o<s;)l=a[o],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var Ph=(1+Math.sqrt(5))/2;function Gh(e,t,n,r,i,a){for(var l=[],o=t.children,s,u,c=0,h=0,f=o.length,_,v,y=t.value,g,k,I,b,m,E,P;c<f;){_=i-n,v=a-r;do g=o[h++].value;while(!g&&h<f);for(k=I=g,E=Math.max(v/_,_/v)/(y*e),P=g*g*E,m=Math.max(I/P,P/k);h<f;++h){if(g+=u=o[h].value,u<k&&(k=u),u>I&&(I=u),P=g*g*E,b=Math.max(I/P,P/k),b>m){g-=u;break}m=b}l.push(s={value:g,dice:_<v,children:o.slice(c,h)}),s.dice?Dh(s,n,r,i,y?r+=v*g/y:a):Bh(s,n,r,y?n+=_*g/y:i,a),y-=g,c=h}return l}const Uh=function e(t){function n(r,i,a,l,o){Gh(t,r,i,a,l,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Ph);function zh(){var e=Uh,t=!1,n=1,r=1,i=[0],a=Mn,l=Mn,o=Mn,s=Mn,u=Mn;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(h),i=[0],t&&f.eachBefore(Lh),f}function h(f){var _=i[f.depth],v=f.x0+_,y=f.y0+_,g=f.x1-_,k=f.y1-_;g<v&&(v=g=(v+g)/2),k<y&&(y=k=(y+k)/2),f.x0=v,f.y0=y,f.x1=g,f.y1=k,f.children&&(_=i[f.depth+1]=a(f)/2,v+=u(f)-_,y+=l(f)-_,g-=o(f)-_,k-=s(f)-_,g<v&&(v=g=(v+g)/2),k<y&&(y=k=(y+k)/2),e(f,v,y,g,k))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=_o(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(a=typeof f=="function"?f:Nn(+f),c):a},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(l=typeof f=="function"?f:Nn(+f),c):l},c.paddingRight=function(f){return arguments.length?(o=typeof f=="function"?f:Nn(+f),c):o},c.paddingBottom=function(f){return arguments.length?(s=typeof f=="function"?f:Nn(+f),c):s},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:Nn(+f),c):u},c}function Yh(e,t,n,r,i){var a=e.children,l,o=a.length,s,u=new Array(o+1);for(u[0]=s=l=0;l<o;++l)u[l+1]=s+=a[l].value;c(0,o,e.value,t,n,r,i);function c(h,f,_,v,y,g,k){if(h>=f-1){var I=a[h];I.x0=v,I.y0=y,I.x1=g,I.y1=k;return}for(var b=u[h],m=_/2+b,E=h+1,P=f-1;E<P;){var z=E+P>>>1;u[z]<m?E=z+1:P=z}m-u[E-1]<u[E]-m&&h+1<E&&--E;var L=u[E]-b,G=_-L;if(g-v>k-y){var A=_?(v*G+g*L)/_:g;c(h,E,L,v,y,A,k),c(E,f,G,A,y,g,k)}else{var S=_?(y*G+k*L)/_:k;c(h,E,L,v,y,g,S),c(E,f,G,v,S,g,k)}}}function mo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Nl=Symbol("implicit");function Ei(){var e=new ti,t=[],n=[],r=Nl;function i(a){let l=e.get(a);if(l===void 0){if(r!==Nl)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new ti;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ei(t,n).unknown(r)},mo.apply(i,arguments),i}function Xh(e){return function(){return e}}function xh(e){return+e}var Cl=[0,1];function yn(e){return e}function Ai(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Xh(isNaN(t)?NaN:.5)}function qh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Wh(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=Ai(i,r),a=n(l,a)):(r=Ai(r,i),a=n(a,l)),function(o){return a(r(o))}}function Kh(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Ai(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(o){var s=Qo(e,o,1,r)-1;return a[s](i[s](o))}}function Zh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jh(){var e=Cl,t=Cl,n=Dr,r,i,a,l=yn,o,s,u;function c(){var f=Math.min(e.length,t.length);return l!==yn&&(l=qh(e[0],e[f-1])),o=f>2?Kh:Wh,s=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(s||(s=o(e.map(r),t,n)))(r(l(f)))}return h.invert=function(f){return l(i((u||(u=o(t,e.map(r),pt)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,xh),c()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=yf,c()},h.clamp=function(f){return arguments.length?(l=f?!0:yn,c()):l!==yn},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,_){return r=f,i=_,c()}}function Qh(){return Jh()(yn,yn)}function jh(e,t,n,r){var i=rs(e,t,n),a;switch(r=kr(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=fh(i,l))&&(r.precision=a),fo(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ch(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=uh(i))&&(r.precision=a-(r.type==="%")*2);break}}return qt(r)}function $h(e){var t=e.domain;return e.ticks=function(n){var r=t();return ns(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return jh(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],o=r[a],s,u,c=10;for(o<l&&(u=l,l=o,o=u,u=i,i=a,a=u);c-- >0;){if(u=Fa(l,o,n),u===s)return r[i]=l,r[a]=o,t(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;s=u}return e},e}function Fn(){var e=Qh();return e.copy=function(){return Zh(e,Fn())},mo.apply(e,arguments),$h(e)}function e0(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Ll=e0("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function wn(e,t,n){this.k=e,this.x=t,this.y=n}wn.prototype={constructor:wn,scale:function(e){return e===1?this:new wn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new wn(1,0,0);wn.prototype;function t0(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function n0(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=fe("div"),this.h()},l(i){t=ce(i,"DIV",{class:!0});var a=H(t);a.forEach(w),this.h()},h(){d(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,a){K(i,t,a),t.innerHTML=n},p(i,[a]){a&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),a&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&d(t,"class",r)},i:Oe,o:Oe,d(i){i&&w(t)}}}function r0(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:a=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,c="";return e.$$set=h=>{"isActive"in h&&n(4,r=h.isActive),"isFirst"in h&&n(5,i=h.isFirst),"isHover"in h&&n(6,a=h.isHover),"isSelectable"in h&&n(7,l=h.isSelectable),"getOptionLabel"in h&&n(0,o=h.getOptionLabel),"item"in h&&n(1,s=h.item),"filterText"in h&&n(2,u=h.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const h=[];r&&h.push("active"),i&&h.push("first"),a&&h.push("hover"),s.isGroupHeader&&h.push("groupHeader"),s.isGroupItem&&h.push("groupItem"),l||h.push("notSelectable"),n(3,c=h.join(" "))}},[o,s,u,c,r,i,a,l]}class go extends wt{constructor(t){super(),bt(this,t,r0,n0,kt,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Dl(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function i0(e){let t,n,r=e[1],i=[];for(let o=0;o<r.length;o+=1)i[o]=Fl(Dl(e,r,o));const a=o=>be(i[o],1,1,()=>{i[o]=null});let l=null;return r.length||(l=Ol(e)),{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=ke(),l&&l.c()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);t=ke(),l&&l.l(o)},m(o,s){for(let u=0;u<i.length;u+=1)i[u].m(o,s);K(o,t,s),l&&l.m(o,s),n=!0},p(o,s){if(s[0]&114390){r=o[1];let u;for(u=0;u<r.length;u+=1){const c=Dl(o,r,u);i[u]?(i[u].p(c,s),de(i[u],1)):(i[u]=Fl(c),i[u].c(),de(i[u],1),i[u].m(t.parentNode,t))}for(xe(),u=r.length;u<i.length;u+=1)a(u);qe(),!r.length&&l?l.p(o,s):r.length?l&&(l.d(1),l=null):(l=Ol(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let s=0;s<r.length;s+=1)de(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)be(i[s]);n=!1},d(o){Ti(i,o),o&&w(t),l&&l.d(o)}}}function l0(e){let t,n,r;var i=e[3];function a(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[s0,({item:o,i:s})=>({41:o,42:s}),({item:o,i:s})=>[0,(o?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=$e(i,a(e))),{c(){t&&Pe(t.$$.fragment),n=ke()},l(l){t&&ut(t.$$.fragment,l),n=ke()},m(l,o){t&&Ge(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&2&&(s.items=l[1]),o[0]&256&&(s.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(s.$$scope={dirty:o,ctx:l}),i!==(i=l[3])){if(t){xe();const u=t;be(u.$$.fragment,1,0,()=>{Ue(u,1)}),qe()}i?(t=$e(i,a(l)),Pe(t.$$.fragment),de(t.$$.fragment,1),Ge(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&de(t.$$.fragment,l),r=!0)},o(l){t&&be(t.$$.fragment,l),r=!1},d(l){l&&w(n),t&&Ue(t,l)}}}function Ol(e){let t,n=!e[11]&&Rl(e);return{c(){n&&n.c(),t=ke()},l(r){n&&n.l(r),t=ke()},m(r,i){n&&n.m(r,i),K(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=Rl(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&w(t)}}}function Rl(e){let t,n;return{c(){t=fe("div"),n=ve(e[12]),this.h()},l(r){t=ce(r,"DIV",{class:!0});var i=H(t);n=ye(i,e[12]),i.forEach(w),this.h()},h(){d(t,"class","empty svelte-1uyqfml")},m(r,i){K(r,t,i),M(t,n)},p(r,i){i[0]&4096&&Xe(n,r[12])},d(r){r&&w(t)}}}function a0(e){let t,n,r,i,a,l;var o=e[4];function s(f){return{props:{item:f[41],filterText:f[13],getOptionLabel:f[6],isFirst:Ii(f[42]),isActive:Er(f[41],f[9],f[10]),isHover:Ar(f[2],f[41],f[42],f[1]),isSelectable:on(f[41])}}}o&&(n=$e(o,s(e)));function u(){return e[29](e[42])}function c(){return e[30](e[42])}function h(...f){return e[31](e[41],e[42],...f)}return{c(){t=fe("div"),n&&Pe(n.$$.fragment),r=Ae(),this.h()},l(f){t=ce(f,"DIV",{class:!0,tabindex:!0});var _=H(t);n&&ut(n.$$.fragment,_),r=Ie(_),_.forEach(w),this.h()},h(){d(t,"class","listItem"),d(t,"tabindex","-1")},m(f,_){K(f,t,_),n&&Ge(n,t,null),M(t,r),i=!0,a||(l=[Z(t,"mouseover",u),Z(t,"focus",c),Z(t,"click",h)],a=!0)},p(f,_){e=f;const v={};if(_[0]&2&&(v.item=e[41]),_[0]&8192&&(v.filterText=e[13]),_[0]&64&&(v.getOptionLabel=e[6]),_[0]&1538&&(v.isActive=Er(e[41],e[9],e[10])),_[0]&6&&(v.isHover=Ar(e[2],e[41],e[42],e[1])),_[0]&2&&(v.isSelectable=on(e[41])),o!==(o=e[4])){if(n){xe();const y=n;be(y.$$.fragment,1,0,()=>{Ue(y,1)}),qe()}o?(n=$e(o,s(e)),Pe(n.$$.fragment),de(n.$$.fragment,1),Ge(n,t,r)):n=null}else o&&n.$set(v)},i(f){i||(n&&de(n.$$.fragment,f),i=!0)},o(f){n&&be(n.$$.fragment,f),i=!1},d(f){f&&w(t),n&&Ue(n),a=!1,ot(l)}}}function o0(e){let t,n=e[7](e[41])+"",r;return{c(){t=fe("div"),r=ve(n),this.h()},l(i){t=ce(i,"DIV",{class:!0});var a=H(t);r=ye(a,n),a.forEach(w),this.h()},h(){d(t,"class","listGroupTitle svelte-1uyqfml")},m(i,a){K(i,t,a),M(t,r)},p(i,a){a[0]&130&&n!==(n=i[7](i[41])+"")&&Xe(r,n)},i:Oe,o:Oe,d(i){i&&w(t)}}}function Fl(e){let t,n,r,i;const a=[o0,a0],l=[];function o(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=o(e),n=l[t]=a[t](e),{c(){n.c(),r=ke()},l(s){n.l(s),r=ke()},m(s,u){l[t].m(s,u),K(s,r,u),i=!0},p(s,u){let c=t;t=o(s),t===c?l[t].p(s,u):(xe(),be(l[c],1,1,()=>{l[c]=null}),qe(),n=l[t],n?n.p(s,u):(n=l[t]=a[t](s),n.c()),de(n,1),n.m(r.parentNode,r))},i(s){i||(de(n),i=!0)},o(s){be(n),i=!1},d(s){l[t].d(s),s&&w(r)}}}function s0(e){let t,n,r,i,a;var l=e[4];function o(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:Ii(h[42]),isActive:Er(h[41],h[9],h[10]),isHover:Ar(h[2],h[41],h[42],h[1]),isSelectable:on(h[41])}}}l&&(n=$e(l,o(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function c(...h){return e[28](e[41],e[42],...h)}return{c(){t=fe("div"),n&&Pe(n.$$.fragment),this.h()},l(h){t=ce(h,"DIV",{class:!0});var f=H(t);n&&ut(n.$$.fragment,f),f.forEach(w),this.h()},h(){d(t,"class","listItem")},m(h,f){K(h,t,f),n&&Ge(n,t,null),r=!0,i||(a=[Z(t,"mouseover",s),Z(t,"focus",u),Z(t,"click",c)],i=!0)},p(h,f){e=h;const _={};if(f[1]&1024&&(_.item=e[41]),f[0]&8192&&(_.filterText=e[13]),f[0]&64&&(_.getOptionLabel=e[6]),f[1]&2048&&(_.isFirst=Ii(e[42])),f[0]&1536|f[1]&1024&&(_.isActive=Er(e[41],e[9],e[10])),f[0]&6|f[1]&3072&&(_.isHover=Ar(e[2],e[41],e[42],e[1])),f[1]&1024&&(_.isSelectable=on(e[41])),l!==(l=e[4])){if(n){xe();const v=n;be(v.$$.fragment,1,0,()=>{Ue(v,1)}),qe()}l?(n=$e(l,o(e)),Pe(n.$$.fragment),de(n.$$.fragment,1),Ge(n,t,null)):n=null}else l&&n.$set(_)},i(h){r||(n&&de(n.$$.fragment,h),r=!0)},o(h){n&&be(n.$$.fragment,h),r=!1},d(h){h&&w(t),n&&Ue(n),i=!1,ot(a)}}}function u0(e){let t,n,r,i,a,l;const o=[l0,i0],s=[];function u(c,h){return c[5]?0:1}return n=u(e),r=s[n]=o[n](e),{c(){t=fe("div"),r.c(),this.h()},l(c){t=ce(c,"DIV",{class:!0,style:!0});var h=H(t);r.l(h),h.forEach(w),this.h()},h(){d(t,"class","listContainer svelte-1uyqfml"),d(t,"style",e[14]),Qe(t,"virtualList",e[5])},m(c,h){K(c,t,h),s[n].m(t,null),e[32](t),i=!0,a||(l=[Z(window,"keydown",e[17]),Z(window,"resize",e[18])],a=!0)},p(c,h){let f=n;n=u(c),n===f?s[n].p(c,h):(xe(),be(s[f],1,1,()=>{s[f]=null}),qe(),r=s[n],r?r.p(c,h):(r=s[n]=o[n](c),r.c()),de(r,1),r.m(t,null)),(!i||h[0]&16384)&&d(t,"style",c[14]),(!i||h[0]&32)&&Qe(t,"virtualList",c[5])},i(c){i||(de(r),i=!0)},o(c){be(r),i=!1},d(c){c&&w(t),s[n].d(),e[32](null),a=!1,ot(l)}}}function Er(e,t,n){return t&&t[n]===e[n]}function Ii(e){return e===0}function Ar(e,t,n,r){return on(t)&&(e===n||r.length===1)}function on(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function f0(e,t,n){const r=Si();let{container:i=void 0}=t,{VirtualList:a=null}=t,{Item:l=go}=t,{isVirtualList:o=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:c=(O,$)=>{if(O)return O.isCreator?`Create "${$}"`:O[u]}}=t,{getGroupHeaderLabel:h=null}=t,{itemHeight:f=40}=t,{hoverItemIndex:_=0}=t,{value:v=void 0}=t,{optionIdentifier:y="value"}=t,{hideEmptyState:g=!1}=t,{noOptionsMessage:k="No options"}=t,{isMulti:I=!1}=t,{activeItemIndex:b=0}=t,{filterText:m=""}=t,{parent:E=null}=t,{listPlacement:P=null}=t,{listAutoWidth:z=null}=t,{listOffset:L=5}=t,G=0,A=!1,S;Nr(()=>{if(s.length>0&&!I&&v){const O=s.findIndex($=>$[y]===v[y]);O&&n(2,_=O)}oe("active"),i.addEventListener("scroll",()=>{clearTimeout(G),G=setTimeout(()=>{A=!1},100)},!1)}),La(()=>{s||n(1,s=[]),s!==S&&s.length>0&&n(2,_=0),S=s});function x(O){O.isCreator||r("itemSelected",O)}function U(O){A||n(2,_=O)}function Y(O){const{item:$,i:Me,event:R}=O;if(R.stopPropagation(),v&&!I&&v[y]===$[y])return T();$.isCreator?r("itemCreated",m):on($)&&(n(19,b=Me),n(2,_=Me),x($))}function T(){r("closeList")}async function C(O){if(o)return;let $=!0;for(;$;)O>0&&_===s.length-1?n(2,_=0):O<0&&_===0?n(2,_=s.length-1):n(2,_=_+O),$=!on(s[_]);await rr(),oe("hover")}function j(O){switch(O.key){case"Escape":O.preventDefault(),T();break;case"ArrowDown":O.preventDefault(),s.length&&C(1);break;case"ArrowUp":O.preventDefault(),s.length&&C(-1);break;case"Enter":if(O.preventDefault(),s.length===0)break;const $=s[_];if(v&&!I&&v[y]===$[y]){T();break}$.isCreator?r("itemCreated",m):(n(19,b=_),x(s[_]));break;case"Tab":if(O.preventDefault(),s.length===0||v&&v[y]===s[_][y])return T();n(19,b=_),x(s[_]);break}}function oe(O){if(o||!i)return;let $;const Me=i.querySelector(`.listItem .${O}`);Me&&($=i.getBoundingClientRect().bottom-Me.getBoundingClientRect().bottom),n(0,i.scrollTop-=$,i)}let te;function X(){const{height:O,width:$}=E.getBoundingClientRect();n(14,te=""),n(14,te+=`min-width:${$}px;width:${z?"auto":"100%"};`),P==="top"||P==="auto"&&t0(E,i).bottom?n(14,te+=`bottom:${O+L}px;`):n(14,te+=`top:${O+L}px;`)}const V=O=>U(O),W=O=>U(O),he=(O,$,Me)=>Y({item:O,i:$,event:Me}),se=O=>U(O),Te=O=>U(O),we=(O,$,Me)=>Y({item:O,i:$,event:Me});function ue(O){nt[O?"unshift":"push"](()=>{i=O,n(0,i)})}return e.$$set=O=>{"container"in O&&n(0,i=O.container),"VirtualList"in O&&n(3,a=O.VirtualList),"Item"in O&&n(4,l=O.Item),"isVirtualList"in O&&n(5,o=O.isVirtualList),"items"in O&&n(1,s=O.items),"labelIdentifier"in O&&n(20,u=O.labelIdentifier),"getOptionLabel"in O&&n(6,c=O.getOptionLabel),"getGroupHeaderLabel"in O&&n(7,h=O.getGroupHeaderLabel),"itemHeight"in O&&n(8,f=O.itemHeight),"hoverItemIndex"in O&&n(2,_=O.hoverItemIndex),"value"in O&&n(9,v=O.value),"optionIdentifier"in O&&n(10,y=O.optionIdentifier),"hideEmptyState"in O&&n(11,g=O.hideEmptyState),"noOptionsMessage"in O&&n(12,k=O.noOptionsMessage),"isMulti"in O&&n(21,I=O.isMulti),"activeItemIndex"in O&&n(19,b=O.activeItemIndex),"filterText"in O&&n(13,m=O.filterText),"parent"in O&&n(22,E=O.parent),"listPlacement"in O&&n(23,P=O.listPlacement),"listAutoWidth"in O&&n(24,z=O.listAutoWidth),"listOffset"in O&&n(25,L=O.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&E&&i&&X()},[i,s,_,a,l,o,c,h,f,v,y,g,k,m,te,U,Y,j,X,b,u,I,E,P,z,L,V,W,he,se,Te,we,ue]}class c0 extends wt{constructor(t){super(),bt(this,t,f0,u0,kt,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function h0(e){let t,n=e[0](e[1])+"";return{c(){t=fe("div"),this.h()},l(r){t=ce(r,"DIV",{class:!0});var i=H(t);i.forEach(w),this.h()},h(){d(t,"class","selection svelte-pu1q1n")},m(r,i){K(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Oe,o:Oe,d(r){r&&w(t)}}}function d0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=a=>{"getSelectionLabel"in a&&n(0,r=a.getSelectionLabel),"item"in a&&n(1,i=a.item)},[r,i]}class _0 extends wt{constructor(t){super(),bt(this,t,d0,h0,kt,{getSelectionLabel:0,item:1})}}function Hl(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function Vl(e){let t,n,r,i,a;function l(...o){return e[6](e[11],...o)}return{c(){t=fe("div"),n=re("svg"),r=re("path"),this.h()},l(o){t=ce(o,"DIV",{class:!0});var s=H(t);n=ie(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=H(n);r=ie(u,"path",{d:!0}),H(r).forEach(w),u.forEach(w),s.forEach(w),this.h()},h(){d(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),d(n,"width","100%"),d(n,"height","100%"),d(n,"viewBox","-2 -2 50 50"),d(n,"focusable","false"),d(n,"aria-hidden","true"),d(n,"role","presentation"),d(n,"class","svelte-liu9pa"),d(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){K(o,t,s),M(t,n),M(n,r),i||(a=Z(t,"click",l),i=!0)},p(o,s){e=o},d(o){o&&w(t),i=!1,a()}}}function Bl(e){let t,n,r=e[4](e[9])+"",i,a,l,o,s,u=!e[2]&&!e[3]&&Vl(e);function c(...h){return e[7](e[11],...h)}return{c(){t=fe("div"),n=fe("div"),i=Ae(),u&&u.c(),a=Ae(),this.h()},l(h){t=ce(h,"DIV",{class:!0});var f=H(t);n=ce(f,"DIV",{class:!0});var _=H(n);_.forEach(w),i=Ie(f),u&&u.l(f),a=Ie(f),f.forEach(w),this.h()},h(){d(n,"class","multiSelectItem_label svelte-liu9pa"),d(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(h,f){K(h,t,f),M(t,n),n.innerHTML=r,M(t,i),u&&u.m(t,null),M(t,a),o||(s=Z(t,"click",c),o=!0)},p(h,f){e=h,f&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,f):(u=Vl(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),f&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&d(t,"class",l)},d(h){h&&w(t),u&&u.d(),o=!1,s()}}}function m0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=Bl(Hl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=ke()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=ke()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,[a]){if(a&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const o=Hl(i,n,l);r[l]?r[l].p(o,a):(r[l]=Bl(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Oe,o:Oe,d(i){Ti(r,i),i&&w(t)}}}function g0(e,t,n){const r=Si();let{value:i=[]}=t,{activeValue:a=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:s=void 0}=t;function u(f,_){_.stopPropagation(),r("multiItemClear",{i:f})}const c=(f,_)=>u(f,_),h=(f,_)=>o?u(f,_):{};return e.$$set=f=>{"value"in f&&n(0,i=f.value),"activeValue"in f&&n(1,a=f.activeValue),"isDisabled"in f&&n(2,l=f.isDisabled),"multiFullItemClearable"in f&&n(3,o=f.multiFullItemClearable),"getSelectionLabel"in f&&n(4,s=f.getSelectionLabel)},[i,a,l,o,s,u,c,h]}class p0 extends wt{constructor(t){super(),bt(this,t,g0,m0,kt,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function Pl(e,t,n){const r=e.slice();return r[23]=t[n],r}const v0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),Gl=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function y0(e){let t;return{c(){t=ve("Missing template")},l(n){t=ye(n,"Missing template")},m(n,r){K(n,t,r)},d(n){n&&w(t)}}}function Ul(e,t){let n,r,i;const a=t[15].default,l=Lo(a,t,t[14],Gl),o=l||y0();return{key:e,first:null,c(){n=fe("svelte-virtual-list-row"),o&&o.c(),r=Ae(),this.h()},l(s){n=ce(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=H(n);o&&o.l(u),r=Ie(u),u.forEach(w),this.h()},h(){ei(n,"class","svelte-g2cagw"),this.first=n},m(s,u){K(s,n,u),o&&o.m(n,null),M(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&Do(l,a,t,t[14],i?Ro(a,t[14],u,v0):Oo(t[14]),Gl)},i(s){i||(de(o,s),i=!0)},o(s){be(o,s),i=!1},d(s){s&&w(n),o&&o.d(s)}}}function w0(e){let t,n,r=[],i=new Map,a,l,o,s,u=e[5];const c=h=>h[23].index;for(let h=0;h<u.length;h+=1){let f=Pl(e,u,h),_=c(f);i.set(_,r[h]=Ul(_,f))}return{c(){t=fe("svelte-virtual-list-viewport"),n=fe("svelte-virtual-list-contents");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){t=ce(h,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var f=H(t);n=ce(f,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=H(n);for(let v=0;v<r.length;v+=1)r[v].l(_);_.forEach(w),f.forEach(w),this.h()},h(){cn(n,"padding-top",e[6]+"px"),cn(n,"padding-bottom",e[7]+"px"),ei(n,"class","svelte-g2cagw"),cn(t,"height",e[0]),ei(t,"class","svelte-g2cagw"),sn(()=>e[18].call(t))},m(h,f){K(h,t,f),M(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),a=Cr(t,e[18].bind(t)),l=!0,o||(s=Z(t,"scroll",e[8]),o=!0)},p(h,[f]){f&16418&&(u=h[5],xe(),r=xt(r,f,c,1,h,u,i,n,Co,Ul,null,Pl),qe()),(!l||f&64)&&cn(n,"padding-top",h[6]+"px"),(!l||f&128)&&cn(n,"padding-bottom",h[7]+"px"),(!l||f&1)&&cn(t,"height",h[0])},i(h){if(!l){for(let f=0;f<u.length;f+=1)de(r[f]);l=!0}},o(h){for(let f=0;f<r.length;f+=1)be(r[f]);l=!1},d(h){h&&w(t);for(let f=0;f<r.length;f+=1)r[f].d();e[16](null),e[17](null),a(),o=!1,s()}}}function b0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:a=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:c=0}=t,h=[],f,_,v,y=0,g,k,I=0,b=0,m;async function E(A,S,x){const{scrollTop:U}=_;await rr();let Y=I-U,T=u;for(;Y<S&&T<A.length;){let j=f[T-u];j||(n(10,c=T+1),await rr(),j=f[T-u]);const oe=h[T]=x||j.offsetHeight;Y+=oe,T+=1}n(10,c=T);const C=A.length-c;m=(I+Y)/c,n(7,b=C*m),h.length=A.length,_&&n(3,_.scrollTop=0,_)}async function P(){const{scrollTop:A}=_,S=u;for(let T=0;T<f.length;T+=1)h[u+T]=o||f[T].offsetHeight;let x=0,U=0;for(;x<a.length;){const T=h[x]||m;if(U+T>A){n(9,u=x),n(6,I=U);break}U+=T,x+=1}for(;x<a.length&&(U+=h[x]||m,x+=1,!(U>A+y)););n(10,c=x);const Y=a.length-c;for(m=U/c;x<a.length;)h[x++]=m;if(n(7,b=Y*m),u<S){await rr();let T=0,C=0;for(let oe=u;oe<S;oe+=1)f[oe-u]&&(T+=h[oe],C+=o||f[oe-u].offsetHeight);const j=C-T;_.scrollTo(0,A+j)}}Nr(()=>{f=v.getElementsByTagName("svelte-virtual-list-row"),n(13,k=!0)});function z(A){nt[A?"unshift":"push"](()=>{v=A,n(4,v)})}function L(A){nt[A?"unshift":"push"](()=>{_=A,n(3,_)})}function G(){y=this.offsetHeight,n(2,y)}return e.$$set=A=>{"items"in A&&n(11,a=A.items),"height"in A&&n(0,l=A.height),"itemHeight"in A&&n(12,o=A.itemHeight),"hoverItemIndex"in A&&n(1,s=A.hoverItemIndex),"start"in A&&n(9,u=A.start),"end"in A&&n(10,c=A.end),"$$scope"in A&&n(14,i=A.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,g=a.slice(u,c).map((A,S)=>({index:S+u,data:A}))),e.$$.dirty&14340&&k&&E(a,y,o)},[l,s,y,_,v,g,I,b,P,u,c,a,o,k,i,r,z,L,G]}class k0 extends wt{constructor(t){super(),bt(this,t,b0,w0,kt,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function E0(e){let t,n;return{c(){t=re("svg"),n=re("path"),this.h()},l(r){t=ie(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=H(t);n=ie(i,"path",{fill:!0,d:!0}),H(n).forEach(w),i.forEach(w),this.h()},h(){d(n,"fill","currentColor"),d(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","-2 -2 50 50"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"role","presentation")},m(r,i){K(r,t,i),M(t,n)},p:Oe,i:Oe,o:Oe,d(r){r&&w(t)}}}class A0 extends wt{constructor(t){super(),bt(this,t,null,E0,kt,{})}}function I0(e,t,n){let r;return function(){let a=this,l=arguments,o=function(){r=null,n||e.apply(a,l)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,l)}}function zl(e,t,n){const r=e.slice();return r[103]=t[n],r}function Yl(e){let t,n,r,i,a;return{c(){t=fe("span"),n=ve(e[33]),r=Ae(),i=fe("span"),a=ve(e[32]),this.h()},l(l){t=ce(l,"SPAN",{id:!0});var o=H(t);n=ye(o,e[33]),o.forEach(w),r=Ie(l),i=ce(l,"SPAN",{id:!0});var s=H(i);a=ye(s,e[32]),s.forEach(w),this.h()},h(){d(t,"id","aria-selection"),d(i,"id","aria-context")},m(l,o){K(l,t,o),M(t,n),K(l,r,o),K(l,i,o),M(i,a)},p(l,o){o[1]&4&&Xe(n,l[33]),o[1]&2&&Xe(a,l[32])},d(l){l&&w(t),l&&w(r),l&&w(i)}}}function Xl(e){let t,n,r;const i=[e[18]];var a=e[17];function l(o){let s={};for(let u=0;u<i.length;u+=1)s=Mi(s,i[u]);return{props:s}}return a&&(t=$e(a,l())),{c(){t&&Pe(t.$$.fragment),n=ke()},l(o){t&&ut(t.$$.fragment,o),n=ke()},m(o,s){t&&Ge(t,o,s),K(o,n,s),r=!0},p(o,s){const u=s[0]&262144?Ni(i,[Da(o[18])]):{};if(a!==(a=o[17])){if(t){xe();const c=t;be(c.$$.fragment,1,0,()=>{Ue(c,1)}),qe()}a?(t=$e(a,l()),Pe(t.$$.fragment),de(t.$$.fragment,1),Ge(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(o){r||(t&&de(t.$$.fragment,o),r=!0)},o(o){t&&be(t.$$.fragment,o),r=!1},d(o){o&&w(n),t&&Ue(t,o)}}}function xl(e){let t,n,r;var i=e[26];function a(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=$e(i,a(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Pe(t.$$.fragment),n=ke()},l(l){t&&ut(t.$$.fragment,l),n=ke()},m(l,o){t&&Ge(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&4&&(s.value=l[2]),o[0]&4096&&(s.getSelectionLabel=l[12]),o[0]&1073741824&&(s.activeValue=l[30]),o[0]&512&&(s.isDisabled=l[9]),o[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){xe();const u=t;be(u.$$.fragment,1,0,()=>{Ue(u,1)}),qe()}i?(t=$e(i,a(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),Pe(t.$$.fragment),de(t.$$.fragment,1),Ge(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&de(t.$$.fragment,l),r=!0)},o(l){t&&be(t.$$.fragment,l),r=!1},d(l){l&&w(n),t&&Ue(t,l)}}}function ql(e){let t,n,r,i,a;var l=e[25];function o(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=$e(l,o(e))),{c(){t=fe("div"),n&&Pe(n.$$.fragment),this.h()},l(s){t=ce(s,"DIV",{class:!0});var u=H(t);n&&ut(n.$$.fragment,u),u.forEach(w),this.h()},h(){d(t,"class","selectedItem svelte-17l1npl")},m(s,u){K(s,t,u),n&&Ge(n,t,null),r=!0,i||(a=Z(t,"focus",e[40]),i=!0)},p(s,u){const c={};if(u[0]&4&&(c.item=s[2]),u[0]&4096&&(c.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){xe();const h=n;be(h.$$.fragment,1,0,()=>{Ue(h,1)}),qe()}l?(n=$e(l,o(s)),Pe(n.$$.fragment),de(n.$$.fragment,1),Ge(n,t,null)):n=null}else l&&n.$set(c)},i(s){r||(n&&de(n.$$.fragment,s),r=!0)},o(s){n&&be(n.$$.fragment,s),r=!1},d(s){s&&w(t),n&&Ue(n),i=!1,a()}}}function Wl(e){let t,n,r,i,a;var l=e[23];function o(s){return{}}return l&&(n=$e(l,o())),{c(){t=fe("div"),n&&Pe(n.$$.fragment),this.h()},l(s){t=ce(s,"DIV",{class:!0,"aria-hidden":!0});var u=H(t);n&&ut(n.$$.fragment,u),u.forEach(w),this.h()},h(){d(t,"class","clearSelect svelte-17l1npl"),d(t,"aria-hidden","true")},m(s,u){K(s,t,u),n&&Ge(n,t,null),r=!0,i||(a=Z(t,"click",Fo(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){xe();const c=n;be(c.$$.fragment,1,0,()=>{Ue(c,1)}),qe()}l?(n=$e(l,o()),Pe(n.$$.fragment),de(n.$$.fragment,1),Ge(n,t,null)):n=null}},i(s){r||(n&&de(n.$$.fragment,s),r=!0)},o(s){n&&be(n.$$.fragment,s),r=!1},d(s){s&&w(t),n&&Ue(n),i=!1,a()}}}function Kl(e){let t;function n(a,l){return a[22]?T0:S0}let r=n(e),i=r(e);return{c(){t=fe("div"),i.c(),this.h()},l(a){t=ce(a,"DIV",{class:!0,"aria-hidden":!0});var l=H(t);i.l(l),l.forEach(w),this.h()},h(){d(t,"class","indicator svelte-17l1npl"),d(t,"aria-hidden","true")},m(a,l){K(a,t,l),i.m(t,null)},p(a,l){r===(r=n(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,null)))},d(a){a&&w(t),i.d()}}}function S0(e){let t,n;return{c(){t=re("svg"),n=re("path"),this.h()},l(r){t=ie(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=H(t);n=ie(i,"path",{d:!0}),H(n).forEach(w),i.forEach(w),this.h()},h(){d(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),d(t,"width","100%"),d(t,"height","100%"),d(t,"viewBox","0 0 20 20"),d(t,"focusable","false"),d(t,"aria-hidden","true"),d(t,"class","svelte-17l1npl")},m(r,i){K(r,t,i),M(t,n)},p:Oe,d(r){r&&w(t)}}}function T0(e){let t,n;return{c(){t=new Vo(!1),n=ke(),this.h()},l(r){t=Bo(r,!1),n=ke(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),K(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&w(n),r&&t.d()}}}function Zl(e){let t,n,r;return{c(){t=fe("div"),n=re("svg"),r=re("circle"),this.h()},l(i){t=ce(i,"DIV",{class:!0});var a=H(t);n=ie(a,"svg",{class:!0,viewBox:!0});var l=H(n);r=ie(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),H(r).forEach(w),l.forEach(w),a.forEach(w),this.h()},h(){d(r,"class","spinner_path svelte-17l1npl"),d(r,"cx","50"),d(r,"cy","50"),d(r,"r","20"),d(r,"fill","none"),d(r,"stroke","currentColor"),d(r,"stroke-width","5"),d(r,"stroke-miterlimit","10"),d(n,"class","spinner_icon svelte-17l1npl"),d(n,"viewBox","25 25 50 50"),d(t,"class","spinner svelte-17l1npl")},m(i,a){K(i,t,a),M(t,n),M(n,r)},d(i){i&&w(t)}}}function Jl(e){let t,n,r,i;const a=[e[34]];function l(u){e[84](u)}var o=e[24];function s(u){let c={};for(let h=0;h<a.length;h+=1)c=Mi(c,a[h]);return u[28]!==void 0&&(c.hoverItemIndex=u[28]),{props:c}}return o&&(t=$e(o,s(e)),nt.push(()=>xi(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Pe(t.$$.fragment),r=ke()},l(u){t&&ut(t.$$.fragment,u),r=ke()},m(u,c){t&&Ge(t,u,c),K(u,r,c),i=!0},p(u,c){const h=c[1]&8?Ni(a,[Da(u[34])]):{};if(!n&&c[0]&268435456&&(n=!0,h.hoverItemIndex=u[28],Ho(()=>n=!1)),o!==(o=u[24])){if(t){xe();const f=t;be(f.$$.fragment,1,0,()=>{Ue(f,1)}),qe()}o?(t=$e(o,s(u)),nt.push(()=>xi(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),Pe(t.$$.fragment),de(t.$$.fragment,1),Ge(t,r.parentNode,r)):t=null}else o&&t.$set(h)},i(u){i||(t&&de(t.$$.fragment,u),i=!0)},o(u){t&&be(t.$$.fragment,u),i=!1},d(u){u&&w(r),t&&Ue(t,u)}}}function Ql(e){let t,n,r;return{c(){t=fe("input"),this.h()},l(i){t=ce(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,d(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&w(t)}}}function jl(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=$l(zl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=ke()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=ke()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,a){if(a[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const o=zl(i,n,l);r[l]?r[l].p(o,a):(r[l]=$l(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){Ti(r,i),i&&w(t)}}}function $l(e){let t,n,r;return{c(){t=fe("input"),this.h()},l(i){t=ce(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){d(t,"name",n=e[16].name),d(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,d(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&d(t,"name",n),a[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&w(t)}}}function M0(e){let t,n,r,i,a,l,o,s,u,c,h,f,_,v,y,g,k,I,b=e[1]&&Yl(e),m=e[17]&&Xl(e),E=e[35]&&xl(e),P=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],z={};for(let T=0;T<P.length;T+=1)z=Mi(z,P[T]);let L=!e[7]&&e[29]&&ql(e),G=e[37]&&Wl(e),A=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&Kl(e),S=e[4]&&Zl(),x=e[5]&&Jl(e),U=(!e[7]||e[7]&&!e[35])&&Ql(e),Y=e[7]&&e[35]&&jl(e);return{c(){t=fe("div"),n=fe("span"),b&&b.c(),r=Ae(),m&&m.c(),i=Ae(),E&&E.c(),a=Ae(),l=fe("input"),s=Ae(),L&&L.c(),u=Ae(),G&&G.c(),c=Ae(),A&&A.c(),h=Ae(),S&&S.c(),f=Ae(),x&&x.c(),_=Ae(),U&&U.c(),v=Ae(),Y&&Y.c(),this.h()},l(T){t=ce(T,"DIV",{class:!0,style:!0});var C=H(t);n=ce(C,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var j=H(n);b&&b.l(j),j.forEach(w),r=Ie(C),m&&m.l(C),i=Ie(C),E&&E.l(C),a=Ie(C),l=ce(C,"INPUT",{placeholder:!0,style:!0}),s=Ie(C),L&&L.l(C),u=Ie(C),G&&G.l(C),c=Ie(C),A&&A.l(C),h=Ie(C),S&&S.l(C),f=Ie(C),x&&x.l(C),_=Ie(C),U&&U.l(C),v=Ie(C),Y&&Y.l(C),C.forEach(w),this.h()},h(){d(n,"aria-live","polite"),d(n,"aria-atomic","false"),d(n,"aria-relevant","additions text"),d(n,"class","a11yText svelte-17l1npl"),Yi(l,z),Qe(l,"svelte-17l1npl",!0),d(t,"class",y="selectContainer "+e[21]+" svelte-17l1npl"),d(t,"style",e[11]),Qe(t,"hasError",e[10]),Qe(t,"multiSelect",e[7]),Qe(t,"disabled",e[9]),Qe(t,"focused",e[1])},m(T,C){K(T,t,C),M(t,n),b&&b.m(n,null),M(t,r),m&&m.m(t,null),M(t,i),E&&E.m(t,null),M(t,a),M(t,l),l.autofocus&&l.focus(),e[82](l),Xi(l,e[3]),M(t,s),L&&L.m(t,null),M(t,u),G&&G.m(t,null),M(t,c),A&&A.m(t,null),M(t,h),S&&S.m(t,null),M(t,f),x&&x.m(t,null),M(t,_),U&&U.m(t,null),M(t,v),Y&&Y.m(t,null),e[85](t),g=!0,k||(I=[Z(window,"click",e[41]),Z(window,"focusin",e[41]),Z(window,"keydown",e[39]),Z(l,"focus",e[40]),Z(l,"input",e[83]),Z(t,"click",e[42])],k=!0)},p(T,C){T[1]?b?b.p(T,C):(b=Yl(T),b.c(),b.m(n,null)):b&&(b.d(1),b=null),T[17]?m?(m.p(T,C),C[0]&131072&&de(m,1)):(m=Xl(T),m.c(),de(m,1),m.m(t,i)):m&&(xe(),be(m,1,1,()=>{m=null}),qe()),T[35]?E?(E.p(T,C),C[1]&16&&de(E,1)):(E=xl(T),E.c(),de(E,1),E.m(t,a)):E&&(xe(),be(E,1,1,()=>{E=null}),qe()),Yi(l,z=Ni(P,[(!g||C[0]&8192&&o!==(o=!T[13]))&&{readOnly:o},C[1]&1&&T[31],(!g||C[1]&32)&&{placeholder:T[36]},(!g||C[0]&16384)&&{style:T[14]},(!g||C[0]&512)&&{disabled:T[9]}])),C[0]&8&&l.value!==T[3]&&Xi(l,T[3]),Qe(l,"svelte-17l1npl",!0),!T[7]&&T[29]?L?(L.p(T,C),C[0]&536871040&&de(L,1)):(L=ql(T),L.c(),de(L,1),L.m(t,u)):L&&(xe(),be(L,1,1,()=>{L=null}),qe()),T[37]?G?(G.p(T,C),C[1]&64&&de(G,1)):(G=Wl(T),G.c(),de(G,1),G.m(t,c)):G&&(xe(),be(G,1,1,()=>{G=null}),qe()),!T[37]&&(T[20]||T[19]&&!T[2]||!T[13]&&!T[9]&&!T[4]&&(T[29]&&!T[15]||!T[29]))?A?A.p(T,C):(A=Kl(T),A.c(),A.m(t,h)):A&&(A.d(1),A=null),T[4]?S||(S=Zl(),S.c(),S.m(t,f)):S&&(S.d(1),S=null),T[5]?x?(x.p(T,C),C[0]&32&&de(x,1)):(x=Jl(T),x.c(),de(x,1),x.m(t,_)):x&&(xe(),be(x,1,1,()=>{x=null}),qe()),!T[7]||T[7]&&!T[35]?U?U.p(T,C):(U=Ql(T),U.c(),U.m(t,v)):U&&(U.d(1),U=null),T[7]&&T[35]?Y?Y.p(T,C):(Y=jl(T),Y.c(),Y.m(t,null)):Y&&(Y.d(1),Y=null),(!g||C[0]&2097152&&y!==(y="selectContainer "+T[21]+" svelte-17l1npl"))&&d(t,"class",y),(!g||C[0]&2048)&&d(t,"style",T[11]),(!g||C[0]&2098176)&&Qe(t,"hasError",T[10]),(!g||C[0]&2097280)&&Qe(t,"multiSelect",T[7]),(!g||C[0]&2097664)&&Qe(t,"disabled",T[9]),(!g||C[0]&2097154)&&Qe(t,"focused",T[1])},i(T){g||(de(m),de(E),de(L),de(G),de(x),g=!0)},o(T){be(m),be(E),be(L),be(G),be(x),g=!1},d(T){T&&w(t),b&&b.d(),m&&m.d(),E&&E.d(),e[82](null),L&&L.d(),G&&G.d(),A&&A.d(),S&&S.d(),x&&x.d(),U&&U.d(),Y&&Y.d(),e[85](null),k=!1,ot(I)}}}function ea(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function N0(e,t,n){let r,i,a,l,o,s,u,c;const h=Si();let{id:f=null}=t,{container:_=void 0}=t,{input:v=void 0}=t,{isMulti:y=!1}=t,{multiFullItemClearable:g=!1}=t,{isDisabled:k=!1}=t,{isCreatable:I=!1}=t,{isFocused:b=!1}=t,{value:m=null}=t,{filterText:E=""}=t,{placeholder:P="Select..."}=t,{placeholderAlwaysShow:z=!1}=t,{items:L=null}=t,{itemFilter:G=(p,_e,De)=>`${p}`.toLowerCase().includes(_e.toLowerCase())}=t,{groupBy:A=void 0}=t,{groupFilter:S=p=>p}=t,{isGroupHeaderSelectable:x=!1}=t,{getGroupHeaderLabel:U=p=>p[Y]||p.id}=t,{labelIdentifier:Y="label"}=t,{getOptionLabel:T=(p,_e)=>p.isCreator?`Create "${_e}"`:p[Y]}=t,{optionIdentifier:C="value"}=t,{loadOptions:j=void 0}=t,{hasError:oe=!1}=t,{containerStyles:te=""}=t,{getSelectionLabel:X=p=>p?p[Y]:null}=t,{createGroupHeaderItem:V=p=>({value:p,label:p})}=t,{createItem:W=p=>({value:p,label:p})}=t;const he=()=>r;let{isSearchable:se=!0}=t,{inputStyles:Te=""}=t,{isClearable:we=!0}=t,{isWaiting:ue=!1}=t,{listPlacement:O="auto"}=t,{listOpen:$=!1}=t,{isVirtualList:Me=!1}=t,{loadOptionsInterval:R=300}=t,{noOptionsMessage:ne="No options"}=t,{hideEmptyState:N=!1}=t,{inputAttributes:F={}}=t,{listAutoWidth:J=!0}=t,{itemHeight:Ne=40}=t,{Icon:le=void 0}=t,{iconProps:me={}}=t,{showChevron:B=!1}=t,{showIndicator:ge=!1}=t,{containerClasses:Ee=""}=t,{indicatorSvg:Re=void 0}=t,{listOffset:Ve=5}=t,{ClearIcon:We=A0}=t,{Item:Be=go}=t,{List:D=c0}=t,{Selection:ee=_0}=t,{MultiSelection:q=p0}=t,{VirtualList:ae=k0}=t;function Fe(p){if(p.loadOptions&&p.filterText.length>0)return;if(!p.items)return[];p.items&&p.items.length>0&&typeof p.items[0]!="object"&&(p.items=ea(p.items));let _e=p.items.filter(De=>{let ht=G(T(De,p.filterText),p.filterText,De);return ht&&p.isMulti&&p.value&&Array.isArray(p.value)&&(ht=!p.value.some(jt=>jt[p.optionIdentifier]===De[p.optionIdentifier])),ht});return p.groupBy&&(_e=Zt(_e)),p.isCreatable&&(_e=He(_e,p.filterText)),_e}function He(p,_e){if(_e.length===0)return p;const De=W(_e);return p[0]&&_e===p[0][Y]?p:(De.isCreator=!0,[...p,De])}let{selectedValue:Ke=null}=t,Ce,rt,st,Q,pe,Le;const _t=I0(async()=>{n(4,ue=!0);let p=await j(E).catch(_e=>{console.warn("svelte-select loadOptions error :>> ",_e),h("error",{type:"loadOptions",details:_e})});p&&!p.cancelled&&(p?(p&&p.length>0&&typeof p[0]!="object"&&(p=ea(p)),n(81,r=[...p]),h("loaded",{items:r})):n(81,r=[]),I&&n(81,r=He(r,E)),n(4,ue=!1),n(1,b=!0),n(5,$=!0))},R);function Kt(){typeof m=="string"?n(2,m={[C]:m,label:m}):y&&Array.isArray(m)&&m.length>0&&n(2,m=m.map(p=>typeof p=="string"?{value:p,label:p}:p))}let ct;function Nt(){n(31,ct=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},F)),f&&n(31,ct.id=f,ct),se||n(31,ct.readonly=!0,ct)}function Zt(p){const _e=[],De={};p.forEach(jt=>{const Lt=A(jt);_e.includes(Lt)||(_e.push(Lt),De[Lt]=[],Lt&&De[Lt].push(Object.assign(V(Lt,jt),{id:Lt,isGroupHeader:!0,isSelectable:x}))),De[Lt].push(Object.assign({isGroupItem:!!Lt},jt))});const ht=[];return S(_e).forEach(jt=>{ht.push(...De[jt])}),ht}function un(){if(y){JSON.stringify(m)!==JSON.stringify(rt)&&Pt()&&h("select",m);return}(!rt||JSON.stringify(m[C])!==JSON.stringify(rt[C]))&&h("select",m)}function Jt(){b||$?fn():v&&v.blur()}function et(){m&&(Array.isArray(m)?n(2,m=[...m]):n(2,m=[m]))}function Ct(){m&&n(2,m=null)}function mt(){E.length!==0&&(n(1,b=!0),n(5,$=!0),j?_t():(n(5,$=!0),y&&n(30,Ce=void 0)))}La(async()=>{n(77,rt=m),n(78,st=E),n(79,Q=b),n(80,pe=y)});function Pt(){let p=!0;if(m){const _e=[],De=[];m.forEach(ht=>{_e.includes(ht[C])?p=!1:(_e.push(ht[C]),De.push(ht))}),p||n(2,m=De)}return p}function Gt(p){let _e=p?p[C]:m[C];return L.find(De=>De[C]===_e)}function Qt(p){!p||p.length===0||p.some(_e=>typeof _e!="object")||!m||(y?m.some(_e=>!_e||!_e[C]):!m[C])||(Array.isArray(m)?n(2,m=m.map(_e=>Gt(_e)||_e)):n(2,m=Gt()||m))}function Ut(p){const{detail:_e}=p,De=m[_e?_e.i:m.length-1];m.length===1?n(2,m=void 0):n(2,m=m.filter(ht=>ht!==De)),h("clear",De)}function gt(p){if(!!b)switch(p.key){case"ArrowDown":p.preventDefault(),n(5,$=!0),n(30,Ce=void 0);break;case"ArrowUp":p.preventDefault(),n(5,$=!0),n(30,Ce=void 0);break;case"Tab":$||n(1,b=!1);break;case"Backspace":if(!y||E.length>0)return;if(y&&m&&m.length>0){if(Ut(Ce!==void 0?Ce:m.length-1),Ce===0||Ce===void 0)break;n(30,Ce=m.length>Ce?Ce-1:void 0)}break;case"ArrowLeft":if(!y||E.length>0)return;Ce===void 0?n(30,Ce=m.length-1):m.length>Ce&&Ce!==0&&n(30,Ce-=1);break;case"ArrowRight":if(!y||E.length>0||Ce===void 0)return;Ce===m.length-1?n(30,Ce=void 0):Ce<m.length-1&&n(30,Ce+=1);break}}function fn(){n(1,b=!0),v&&v.focus()}function Yn(p){if(!_)return;const _e=p.path&&p.path.length>0?p.path[0]:p.target;_.contains(_e)||_.contains(p.relatedTarget)||(n(1,b=!1),n(5,$=!1),n(30,Ce=void 0),v&&v.blur())}function po(){k||(n(1,b=!0),n(5,$=!$))}function vo(){n(2,m=void 0),n(5,$=!1),h("clear",m),fn()}Nr(()=>{b&&v&&v.focus()});function yo(p){const{detail:_e}=p;if(_e){n(3,E="");const De=Object.assign({},_e);(!De.isGroupHeader||De.isSelectable)&&(y?n(2,m=m?m.concat([De]):[De]):n(2,m=De),n(2,m),setTimeout(()=>{n(5,$=!1),n(30,Ce=void 0)}))}}function wo(p){const{detail:_e}=p;y?(n(2,m=m||[]),n(2,m=[...m,W(_e)])):n(2,m=W(_e)),h("itemCreated",_e),n(3,E=""),n(5,$=!1),n(30,Ce=void 0)}function bo(){n(3,E=""),n(5,$=!1)}let{ariaValues:Fr=p=>`Option ${p}, selected.`}=t,{ariaListOpen:Hr=(p,_e)=>`You are currently focused on option ${p}. There are ${_e} results available.`}=t,{ariaFocused:Vr=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function ko(){let p;return y&&m.length>0?p=m.map(_e=>X(_e)).join(", "):p=X(m),Fr(p)}function Eo(){if(!b||!r||r.length===0)return"";let p=r[Le];if($&&p){let _e=X(p),De=r?r.length:0;return Hr(_e,De)}else return Vr()}function Ao(p){nt[p?"unshift":"push"](()=>{v=p,n(6,v)})}function Io(){E=this.value,n(3,E)}function So(p){Le=p,n(28,Le)}function To(p){nt[p?"unshift":"push"](()=>{_=p,n(0,_)})}return e.$$set=p=>{"id"in p&&n(46,f=p.id),"container"in p&&n(0,_=p.container),"input"in p&&n(6,v=p.input),"isMulti"in p&&n(7,y=p.isMulti),"multiFullItemClearable"in p&&n(8,g=p.multiFullItemClearable),"isDisabled"in p&&n(9,k=p.isDisabled),"isCreatable"in p&&n(47,I=p.isCreatable),"isFocused"in p&&n(1,b=p.isFocused),"value"in p&&n(2,m=p.value),"filterText"in p&&n(3,E=p.filterText),"placeholder"in p&&n(48,P=p.placeholder),"placeholderAlwaysShow"in p&&n(49,z=p.placeholderAlwaysShow),"items"in p&&n(50,L=p.items),"itemFilter"in p&&n(51,G=p.itemFilter),"groupBy"in p&&n(52,A=p.groupBy),"groupFilter"in p&&n(53,S=p.groupFilter),"isGroupHeaderSelectable"in p&&n(54,x=p.isGroupHeaderSelectable),"getGroupHeaderLabel"in p&&n(55,U=p.getGroupHeaderLabel),"labelIdentifier"in p&&n(56,Y=p.labelIdentifier),"getOptionLabel"in p&&n(57,T=p.getOptionLabel),"optionIdentifier"in p&&n(58,C=p.optionIdentifier),"loadOptions"in p&&n(59,j=p.loadOptions),"hasError"in p&&n(10,oe=p.hasError),"containerStyles"in p&&n(11,te=p.containerStyles),"getSelectionLabel"in p&&n(12,X=p.getSelectionLabel),"createGroupHeaderItem"in p&&n(60,V=p.createGroupHeaderItem),"createItem"in p&&n(61,W=p.createItem),"isSearchable"in p&&n(13,se=p.isSearchable),"inputStyles"in p&&n(14,Te=p.inputStyles),"isClearable"in p&&n(15,we=p.isClearable),"isWaiting"in p&&n(4,ue=p.isWaiting),"listPlacement"in p&&n(63,O=p.listPlacement),"listOpen"in p&&n(5,$=p.listOpen),"isVirtualList"in p&&n(64,Me=p.isVirtualList),"loadOptionsInterval"in p&&n(65,R=p.loadOptionsInterval),"noOptionsMessage"in p&&n(66,ne=p.noOptionsMessage),"hideEmptyState"in p&&n(67,N=p.hideEmptyState),"inputAttributes"in p&&n(16,F=p.inputAttributes),"listAutoWidth"in p&&n(68,J=p.listAutoWidth),"itemHeight"in p&&n(69,Ne=p.itemHeight),"Icon"in p&&n(17,le=p.Icon),"iconProps"in p&&n(18,me=p.iconProps),"showChevron"in p&&n(19,B=p.showChevron),"showIndicator"in p&&n(20,ge=p.showIndicator),"containerClasses"in p&&n(21,Ee=p.containerClasses),"indicatorSvg"in p&&n(22,Re=p.indicatorSvg),"listOffset"in p&&n(70,Ve=p.listOffset),"ClearIcon"in p&&n(23,We=p.ClearIcon),"Item"in p&&n(71,Be=p.Item),"List"in p&&n(24,D=p.List),"Selection"in p&&n(25,ee=p.Selection),"MultiSelection"in p&&n(26,q=p.MultiSelection),"VirtualList"in p&&n(72,ae=p.VirtualList),"selectedValue"in p&&n(73,Ke=p.selectedValue),"ariaValues"in p&&n(74,Fr=p.ariaValues),"ariaListOpen"in p&&n(75,Hr=p.ariaListOpen),"ariaFocused"in p&&n(76,Vr=p.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Fe({loadOptions:j,filterText:E,items:L,value:m,isMulti:y,optionIdentifier:C,groupBy:A,isCreatable:I})),e.$$.dirty[2]&2048&&Ke&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&Qt(L),e.$$.dirty[0]&4&&m&&Kt(),e.$$.dirty[0]&73728&&(F||!se)&&Nt(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(y&&et(),pe&&!y&&Ct()),e.$$.dirty[0]&132&&y&&m&&m.length>1&&Pt(),e.$$.dirty[0]&4&&m&&un(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!m&&y&&rt&&h("select",m),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&b!==Q&&Jt(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&E!==st&&mt(),e.$$.dirty[0]&12&&n(29,i=m&&E.length===0),e.$$.dirty[0]&536904208&&n(37,a=i&&we&&!k&&!ue),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=z&&y?P:m?"":P),e.$$.dirty[0]&132&&n(35,o=y&&m&&m.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:Be,filterText:E,optionIdentifier:C,noOptionsMessage:ne,hideEmptyState:N,isVirtualList:Me,VirtualList:ae,value:m,isMulti:y,getGroupHeaderLabel:U,items:r,itemHeight:Ne,getOptionLabel:T,listPlacement:O,parent:_,listAutoWidth:J,listOffset:Ve}),e.$$.dirty[0]&132&&n(33,u=m?ko():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,c=Eo())},[_,b,m,E,ue,$,v,y,g,k,oe,te,X,se,Te,we,F,le,me,B,ge,Ee,Re,We,D,ee,q,vo,Le,i,Ce,ct,c,u,s,o,l,a,Ut,gt,fn,Yn,po,yo,wo,bo,f,I,P,z,L,G,A,S,x,U,Y,T,C,j,V,W,he,O,Me,R,ne,N,J,Ne,Ve,Be,ae,Ke,Fr,Hr,Vr,rt,st,Q,pe,r,Ao,Io,So,To]}class ta extends wt{constructor(t){super(),bt(this,t,N0,M0,kt,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function C0(e){const t=e-1;return t*t*t+1}function Ir(e,{delay:t=0,duration:n=400,easing:r=Po}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}function L0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),a=i.transform==="none"?"":i.transform,[l,o]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*o/n.height-(n.top+o),{delay:c=0,duration:h=_=>Math.sqrt(_)*120,easing:f=C0}=r;return{delay:c,duration:ze(h)?h(Math.sqrt(s*s+u*u)):h,easing:f,css:(_,v)=>{const y=v*s,g=v*u,k=_+v*t.width/n.width,I=_+v*t.height/n.height;return`transform: ${a} translate(${y}px, ${g}px) scale(${k}, ${I});`}}}const tn=Li([2020]),tt=Li(new Set),rn=Li(!0);class D0{constructor(t){Ye(this,"id");Ye(this,"code");Ye(this,"name");Ye(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class fr{constructor(t){Ye(this,"id");Ye(this,"code");Ye(this,"name");Ye(this,"level");Ye(this,"parent_id");Ye(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class Vt{constructor(t,n,r){Ye(this,"location_id");Ye(this,"location");Ye(this,"partner_id");Ye(this,"partner");Ye(this,"product_id");Ye(this,"product");Ye(this,"year");Ye(this,"export_value");Ye(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}function na(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function ra(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function ia(e,t,n){const r=e.slice();return r[45]=t[n],r[47]=n,r}function O0(e){let t,n,r,i,a;return{c(){t=re("text"),n=ve("No valid data for this pair."),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=H(t);n=ye(o,"No valid data for this pair."),o.forEach(w),this.h()},h(){d(t,"x",r=e[3]/2),d(t,"y",i=e[9]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){K(l,t,o),M(t,n)},p(l,o){o[0]&8&&r!==(r=l[3]/2)&&d(t,"x",r),o[0]&512&&i!==(i=l[9]/2)&&d(t,"y",i)},i(l){a||sn(()=>{a=Ci(t,Ir,{}),a.start()})},o:Oe,d(l){l&&w(t)}}}function R0(e){var R,ne;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,a,l,o=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",s,u,c,h,f=((R=e[2])==null?void 0:R.name)+" ",_,v=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",y,g,k=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",I,b,m=((ne=e[2])==null?void 0:ne.name)+"",E,P,z,L=[],G=new Map,A,S=[],x=new Map,U,Y=[],T=new Map,C,j,oe,te,X,V,W,he,se,Te=e[10];const we=N=>N[45].product_id;for(let N=0;N<Te.length;N+=1){let F=ia(e,Te,N),J=we(F);G.set(J,L[N]=aa(J,F))}let ue=e[10];const O=N=>N[47];for(let N=0;N<ue.length;N+=1){let F=ra(e,ue,N),J=O(F);x.set(J,S[N]=oa(J,F))}let $=e[10];const Me=N=>N[45].product_id;for(let N=0;N<$.length;N+=1){let F=na(e,$,N),J=Me(F);T.set(J,Y[N]=sa(J,F))}return{c(){t=re("text"),n=ve("Sector "),i=ve(r),a=re("text"),l=ve("Trade Flow "),s=ve(o),c=re("text"),h=ve("Export to "),_=ve(f),y=ve(v),g=re("text"),I=ve(k),b=ve("\xA0Import from "),E=ve(m),z=re("g");for(let N=0;N<L.length;N+=1)L[N].c();A=ke();for(let N=0;N<S.length;N+=1)S[N].c();U=ke();for(let N=0;N<Y.length;N+=1)Y[N].c();C=re("line"),te=re("line"),V=re("g"),W=re("g"),this.h()},l(N){t=ie(N,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var F=H(t);n=ye(F,"Sector "),i=ye(F,r),F.forEach(w),a=ie(N,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var J=H(a);l=ye(J,"Trade Flow "),s=ye(J,o),J.forEach(w),c=ie(N,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var Ne=H(c);h=ye(Ne,"Export to "),_=ye(Ne,f),y=ye(Ne,v),Ne.forEach(w),g=ie(N,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var le=H(g);I=ye(le,k),b=ye(le,"\xA0Import from "),E=ye(le,m),le.forEach(w),z=ie(N,"g",{id:!0,transform:!0});var me=H(z);for(let B=0;B<L.length;B+=1)L[B].l(me);A=ke();for(let B=0;B<S.length;B+=1)S[B].l(me);U=ke();for(let B=0;B<Y.length;B+=1)Y[B].l(me);C=ie(me,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),H(C).forEach(w),te=ie(me,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),H(te).forEach(w),V=ie(me,"g",{id:!0}),H(V).forEach(w),me.forEach(w),W=ie(N,"g",{id:!0,class:!0}),H(W).forEach(w),this.h()},h(){var N,F,J,Ne;d(t,"text-anchor","start"),d(t,"class","chart-header sortable svelte-ko6qof"),d(t,"x",15),d(t,"y",Cn/2),d(t,"alignment-baseline","hanging"),d(a,"text-anchor","middle"),d(a,"class","chart-header sortable svelte-ko6qof"),d(a,"x",u=(e[3]-St)/2+St-20),d(a,"y",Cn/2-7),d(a,"alignment-baseline","hanging"),d(c,"class","from-label sortable svelte-ko6qof"),d(c,"x",St),d(c,"y",Cn/2-5),d(c,"alignment-baseline","hanging"),d(c,"font-size","13"),d(g,"class","from-label sortable svelte-ko6qof"),d(g,"x",P=e[3]-20),d(g,"y",Cn/2-5),d(g,"text-anchor","end"),d(g,"alignment-baseline","hanging"),d(g,"font-size","13"),d(C,"id","midline"),d(C,"transform",j=`translate(${e[5](0)},0)`),d(C,"y1",20),d(C,"y2",oe=(((F=(N=e[10])==null?void 0:N.length)!=null?F:0)+1)*je),d(C,"stroke","rgba(0,0,0,0.7)"),d(C,"stroke-width","1"),d(C,"class","svelte-ko6qof"),d(te,"x1",St),d(te,"y1",0),d(te,"x2",St),d(te,"y2",X=(((Ne=(J=e[10])==null?void 0:J.length)!=null?Ne:0)+1)*je),d(te,"stroke","rgba(0,0,0,0.1)"),d(te,"stroke-width","1"),d(V,"id","axis"),d(z,"id","bar-content"),d(z,"transform",`translate(${0},${Cn})`),d(W,"id","bar-chart-tooltip"),d(W,"class","tooltip")},m(N,F){K(N,t,F),M(t,n),M(t,i),K(N,a,F),M(a,l),M(a,s),K(N,c,F),M(c,h),M(c,_),M(c,y),K(N,g,F),M(g,I),M(g,b),M(g,E),K(N,z,F);for(let J=0;J<L.length;J+=1)L[J].m(z,null);M(z,A);for(let J=0;J<S.length;J+=1)S[J].m(z,null);M(z,U);for(let J=0;J<Y.length;J+=1)Y[J].m(z,null);M(z,C),M(z,te),M(z,V),e[37](V),K(N,W,F),he||(se=[Z(t,"click",e[30]),Z(t,"keydown",V0),Z(a,"click",e[31]),Z(a,"keydown",B0),Z(c,"keydown",P0),Z(c,"click",e[32]),Z(g,"click",e[33]),Z(g,"keydown",G0)],he=!0)},p(N,F){var J,Ne,le,me,B,ge;if(F[0]&3&&r!==(r=N[1]==N[0].AlphaUp?"\u2191":N[1]==N[0].AlphaDown?"\u2193":" ")&&Xe(i,r),F[0]&3&&o!==(o=N[1]==N[0].Up?"\u2191":N[1]==N[0].Down?"\u2193":" ")&&Xe(s,o),F[0]&8&&u!==(u=(N[3]-St)/2+St-20)&&d(a,"x",u),F[0]&4&&f!==(f=((J=N[2])==null?void 0:J.name)+" ")&&Xe(_,f),F[0]&3&&v!==(v=N[1]==N[0].LeftUp?"\u2191":N[1]==N[0].LeftDown?"\u2193":" ")&&Xe(y,v),F[0]&3&&k!==(k=N[1]==N[0].RightUp?"\u2191":N[1]==N[0].RightDown?"\u2193":" ")&&Xe(I,k),F[0]&4&&m!==(m=((Ne=N[2])==null?void 0:Ne.name)+"")&&Xe(E,m),F[0]&8&&P!==(P=N[3]-20)&&d(g,"x",P),F[0]&1032&&(Te=N[10],L=xt(L,F,we,1,N,Te,G,z,bn,aa,A,ia)),F[0]&64736&&(ue=N[10],S=xt(S,F,O,1,N,ue,x,z,bn,oa,U,ra)),F[0]&3072){$=N[10];for(let Ee=0;Ee<Y.length;Ee+=1)Y[Ee].r();Y=xt(Y,F,Me,1,N,$,T,z,Go,sa,C,na);for(let Ee=0;Ee<Y.length;Ee+=1)Y[Ee].a()}F[0]&32&&j!==(j=`translate(${N[5](0)},0)`)&&d(C,"transform",j),F[0]&1024&&oe!==(oe=(((me=(le=N[10])==null?void 0:le.length)!=null?me:0)+1)*je)&&d(C,"y2",oe),F[0]&1024&&X!==(X=(((ge=(B=N[10])==null?void 0:B.length)!=null?ge:0)+1)*je)&&d(te,"y2",X)},i:Oe,o:Oe,d(N){N&&w(t),N&&w(a),N&&w(c),N&&w(g),N&&w(z);for(let F=0;F<L.length;F+=1)L[F].d();for(let F=0;F<S.length;F+=1)S[F].d();for(let F=0;F<Y.length;F+=1)Y[F].d();e[37](null),N&&w(W),he=!1,ot(se)}}}function la(e){let t,n;return{c(){t=re("rect"),this.h()},l(r){t=ie(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),H(t).forEach(w),this.h()},h(){d(t,"x","0"),d(t,"y",n=e[47]*je+Wt),d(t,"height",je),d(t,"width",e[3]),d(t,"fill","rgba(0,0,0,0.04)"),d(t,"class","svelte-ko6qof")},m(r,i){K(r,t,i)},p(r,i){i[0]&1024&&n!==(n=r[47]*je+Wt)&&d(t,"y",n),i[0]&8&&d(t,"width",r[3])},d(r){r&&w(t)}}}function aa(e,t){let n,r,i=t[47]%2==0&&la(t);return{key:e,first:null,c(){n=ke(),i&&i.c(),r=ke(),this.h()},l(a){n=ke(),i&&i.l(a),r=ke(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[47]%2==0?i?i.p(t,l):(i=la(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&w(n),i&&i.d(a),a&&w(r)}}}function oa(e,t){let n,r,i,a,l,o,s,u,c,h,f,_,v,y,g;function k(){return t[34](t[45])}function I(){return t[35](t[45])}return{key:e,first:null,c(){n=re("g"),r=re("rect"),l=re("rect"),c=re("rect"),this.h()},l(b){n=ie(b,"g",{class:!0,transform:!0});var m=H(n);r=ie(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),H(r).forEach(w),l=ie(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),H(l).forEach(w),c=ie(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),H(c).forEach(w),m.forEach(w),this.h()},h(){d(r,"class","tab svelte-ko6qof"),d(r,"x","0"),d(r,"y","2"),d(r,"height",je-4),d(r,"width",i=t[11].size>0&&t[11].has(t[45].product_id)?St-1:6),d(r,"fill",a=t[6]?t[6](t[45].product.name):"white"),d(l,"class","country1-bar svelte-ko6qof"),d(l,"x",o=t[5](-t[45].export_value)),d(l,"y",Jn/2),d(l,"height",je-Jn),d(l,"width",s=t[5](0)-t[5](-t[45].export_value)),d(l,"fill",u=t[7](t[45].location_id)),d(c,"class","country2-bar svelte-ko6qof"),d(c,"x",h=t[5](0)),d(c,"y",Jn/2),d(c,"height",je-Jn),d(c,"width",f=t[5](t[45].import_value)-t[5](0)),d(c,"fill",_=t[7](t[45].partner_id)),d(n,"class","bar-row"),d(n,"transform",v=`translate(0, ${t[47]*je+Wt})`),this.first=n},m(b,m){K(b,n,m),M(n,r),M(n,l),M(n,c),y||(g=[Z(l,"focus",t[29]),Z(l,"keydown",U0),Z(l,"mouseover",function(){ze(t[13](t[45],!0))&&t[13](t[45],!0).apply(this,arguments)}),Z(l,"mousemove",t[14]()),Z(l,"mouseleave",t[15]()),Z(l,"click",k),Z(c,"focus",t[28]),Z(c,"keydown",z0),Z(c,"mouseover",function(){ze(t[13](t[45],!1))&&t[13](t[45],!1).apply(this,arguments)}),Z(c,"mousemove",t[14]()),Z(c,"mouseleave",t[15]()),Z(c,"click",I)],y=!0)},p(b,m){t=b,m[0]&3072&&i!==(i=t[11].size>0&&t[11].has(t[45].product_id)?St-1:6)&&d(r,"width",i),m[0]&1088&&a!==(a=t[6]?t[6](t[45].product.name):"white")&&d(r,"fill",a),m[0]&1056&&o!==(o=t[5](-t[45].export_value))&&d(l,"x",o),m[0]&1056&&s!==(s=t[5](0)-t[5](-t[45].export_value))&&d(l,"width",s),m[0]&1152&&u!==(u=t[7](t[45].location_id))&&d(l,"fill",u),m[0]&32&&h!==(h=t[5](0))&&d(c,"x",h),m[0]&1056&&f!==(f=t[5](t[45].import_value)-t[5](0))&&d(c,"width",f),m[0]&1152&&_!==(_=t[7](t[45].partner_id))&&d(c,"fill",_),m[0]&1024&&v!==(v=`translate(0, ${t[47]*je+Wt})`)&&d(n,"transform",v)},d(b){b&&w(n),y=!1,ot(g)}}}function sa(e,t){let n,r=t[45].product.name+"",i,a,l,o=Oe,s,u;function c(){return t[36](t[45])}return{key:e,first:null,c(){n=re("text"),i=ve(r),this.h()},l(h){n=ie(h,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var f=H(n);i=ye(f,r),f.forEach(w),this.h()},h(){d(n,"class","product-text svelte-ko6qof"),d(n,"alignment-baseline","hanging"),d(n,"x","10"),d(n,"y",a=t[47]*je+Wt+6),this.first=n},m(h,f){K(h,n,f),M(n,i),s||(u=[Z(n,"click",c),Z(n,"keydown",Y0)],s=!0)},p(h,f){t=h,f[0]&1024&&r!==(r=t[45].product.name+"")&&Xe(i,r),f[0]&1024&&a!==(a=t[47]*je+Wt+6)&&d(n,"y",a)},r(){l=n.getBoundingClientRect()},f(){Uo(n),o()},a(){o(),o=zo(n,l,L0,{duration:400,delay:20})},d(h){h&&w(n),s=!1,ot(u)}}}function ua(e){let t,n,r,i,a;return{c(){t=re("rect"),n=re("text"),r=ve("Loading..."),this.h()},l(l){t=ie(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),H(t).forEach(w),n=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=H(n);r=ye(o,"Loading..."),o.forEach(w),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[3]),d(t,"height",e[9]),d(t,"fill","rgba(255,255,255,0.9)"),d(t,"class","svelte-ko6qof"),d(n,"x",i=e[3]/2),d(n,"y",a=e[9]/2),d(n,"alignment-baseline","central"),d(n,"text-anchor","middle")},m(l,o){K(l,t,o),K(l,n,o),M(n,r)},p(l,o){o[0]&8&&d(t,"width",l[3]),o[0]&512&&d(t,"height",l[9]),o[0]&8&&i!==(i=l[3]/2)&&d(n,"x",i),o[0]&512&&a!==(a=l[9]/2)&&d(n,"y",a)},d(l){l&&w(t),l&&w(n)}}}function F0(e){let t,n,r,i,a;function l(c,h){return c[10]&&c[10].length>0?R0:O0}let o=l(e),s=o(e),u=e[8]&&ua(e);return{c(){t=fe("div"),n=re("svg"),s.c(),r=ke(),u&&u.c(),this.h()},l(c){t=ce(c,"DIV",{id:!0,class:!0});var h=H(t);n=ie(h,"svg",{height:!0,class:!0});var f=H(n);s.l(f),r=ke(),u&&u.l(f),f.forEach(w),h.forEach(w),this.h()},h(){var c,h;d(n,"height",i=Math.max(e[9],(((h=(c=e[10])==null?void 0:c.length)!=null?h:0)+1)*je+Wt)),d(n,"class","svelte-ko6qof"),d(t,"id","bar-chart"),d(t,"class","viz-section svelte-ko6qof"),sn(()=>e[38].call(t))},m(c,h){K(c,t,h),M(t,n),s.m(n,null),M(n,r),u&&u.m(n,null),a=Cr(t,e[38].bind(t))},p(c,h){var f,_;o===(o=l(c))&&s?s.p(c,h):(s.d(1),s=o(c),s&&(s.c(),de(s,1),s.m(n,r))),c[8]?u?u.p(c,h):(u=ua(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null),h[0]&1536&&i!==(i=Math.max(c[9],(((_=(f=c[10])==null?void 0:f.length)!=null?_:0)+1)*je+Wt))&&d(n,"height",i)},i(c){de(s)},o:Oe,d(c){c&&w(t),s.d(),u&&u.d(),a()}}}const Cn=40,je=30,fa=0,H0=10,Wt=30,St=100,Jn=4,Qn=10,ca=140,ha=25,Qr=105,zt=20,Yt=35,_n=22,V0=()=>{},B0=()=>{},P0=()=>{},G0=()=>{},U0=()=>{},z0=()=>{},Y0=()=>{};function X0(e,t,n){let r,i,a,l,o,s,u,c,h,f,_,v,y;yt(e,tn,R=>n(27,_=R)),yt(e,tt,R=>n(11,v=R)),yt(e,rn,R=>n(12,y=R));let{data:g}=t;var k;(function(R){R[R.LeftUp=0]="LeftUp",R[R.LeftDown=1]="LeftDown",R[R.RightUp=2]="RightUp",R[R.RightDown=3]="RightDown",R[R.Up=4]="Up",R[R.Down=5]="Down",R[R.AlphaUp=6]="AlphaUp",R[R.AlphaDown=7]="AlphaDown"})(k||(k={}));let I=k.AlphaDown,{bilateralData:b,productColorScale:m,countryColorScale:E,country1:P,country2:z,loadingDrilldown:L,productData:G,locationData:A}=g,S=800,x=550,U;const Y=R=>qt("$.3s")(R).replace(/G/,"B");function T(R,ne,N){return R+N<S?R+ne:R+ne-N}function C(R,ne){return R+Qr<x?R+ne:R+ne-Qr}function j(R,ne){return N=>{let F=Se("#bar-chart-tooltip"),J=ca+_.length*ha;F.append("rect").attr("id","tooltip-rect").attr("width",J).attr("height",Qr).attr("x",T(N.layerX,Qn,J)).attr("y",C(N.layerY,Qn)),F.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",T(N.layerX,zt,J)).attr("y",C(N.layerY,Yt)).style("fill",E?E(ne?R.location_id:R.partner_id):"black").text(`${R.product.name}`),F.append("text").attr("id","tooltip-text2").attr("x",T(N.layerX,zt,J)).attr("y",C(N.layerY,Yt+_n)).text((ne?"Export: ":"Import: ")+`${Y(ne?R.export_value:R.import_value)}`),F.append("text").attr("id","tooltip-text3").attr("x",T(N.layerX,zt,J)).attr("y",C(N.layerY,Yt+2*_n)).text(`Share: ${qt(".2%")(ne?R.export_value/c:R.import_value/h)}`),F.append("text").attr("id","tooltip-text4").attr("x",T(N.layerX,zt,J)).attr("y",C(N.layerY,Yt+3*_n)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function oe(){return R=>{let ne=ca+_.length*ha;Se("#tooltip-rect").attr("x",T(R.layerX,Qn,ne)).attr("y",C(R.layerY,Qn)),Se("#tooltip-text1").attr("x",T(R.layerX,zt,ne)).attr("y",C(R.layerY,Yt)),Se("#tooltip-text2").attr("x",T(R.layerX,zt,ne)).attr("y",C(R.layerY,Yt+_n)),Se("#tooltip-text3").attr("x",T(R.layerX,zt,ne)).attr("y",C(R.layerY,Yt+2*_n)),Se("#tooltip-text4").attr("x",T(R.layerX,zt,ne)).attr("y",C(R.layerY,Yt+3*_n))}}function te(){return R=>{Se("#bar-chart-tooltip").selectAll("rect").remove(),Se("#bar-chart-tooltip").selectAll("text").remove()}}function X(R){lt.call(this,e,R)}function V(R){lt.call(this,e,R)}const W=()=>{I==k.AlphaDown?n(1,I=k.AlphaUp):n(1,I=k.AlphaDown)},he=()=>{I==k.Down?n(1,I=k.Up):n(1,I=k.Down)},se=()=>{I==k.LeftDown?n(1,I=k.LeftUp):n(1,I=k.LeftDown)},Te=()=>{I==k.RightDown?n(1,I=k.RightUp):n(1,I=k.RightDown)},we=R=>{y||(rn.set(!0),tt.update(ne=>(ne.clear(),ne))),v.has(R==null?void 0:R.product_id)?tt.update(ne=>{var N;return ne.delete((N=R==null?void 0:R.product_id)!=null?N:-1),ne}):(R==null?void 0:R.product_id)>=0&&tt.update(ne=>{var N;return ne.add((N=R==null?void 0:R.product_id)!=null?N:-1),ne})},ue=R=>{y&&(rn.set(!1),tt.update(ne=>(ne.clear(),ne))),v.has(R==null?void 0:R.product_id)?tt.update(ne=>{var N;return ne.delete((N=R==null?void 0:R.product_id)!=null?N:-1),ne}):(R==null?void 0:R.product_id)>=0&&tt.update(ne=>{var N;return ne.add((N=R==null?void 0:R.product_id)!=null?N:-1),ne})},O=R=>{v.has(R.product_id)?tt.update(ne=>(ne.delete(R.product_id),ne)):tt.update(ne=>(ne.add(R.product_id),ne))};function $(R){nt[R?"unshift":"push"](()=>{U=R,n(4,U)})}function Me(){S=this.clientWidth,x=this.clientHeight,n(3,S),n(9,x)}return e.$$set=R=>{"data"in R&&n(16,g=R.data)},e.$$.update=()=>{var R,ne,N;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:b,productColorScale:m,countryColorScale:E,country1:P,country2:z,loadingDrilldown:L,productData:G,locationData:A}=g,b,(n(6,m),n(16,g)),(n(7,E),n(16,g)),(n(18,P),n(16,g)),(n(2,z),n(16,g)),(n(8,L),n(16,g)),(n(19,G),n(16,g)),(n(20,A),n(16,g))),e.$$.dirty[0]&393220&&n(26,r=(N=b==null?void 0:b.get((R=P==null?void 0:P.id)!=null?R:0))==null?void 0:N.get((ne=z==null?void 0:z.id)!=null?ne:0)),e.$$.dirty[0]&201326592&&n(25,i=_.map(F=>{var J;return(J=r==null?void 0:r.get(F))!=null?J:new Array}).flat()),e.$$.dirty[0]&35389444&&n(23,a=Array.from(ri(i,F=>{var J,Ne;return F.reduce((le,me)=>(le.export_value+=me.export_value,le.import_value+=me.import_value,le),new Vt(A,G,{location_id:(J=P==null?void 0:P.id)!=null?J:0,partner_id:(Ne=z==null?void 0:z.id)!=null?Ne:0,product_id:F[0].product_id,year:0,export_value:0,import_value:0}))},F=>F.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=a.filter(F=>F.product.level=="section")),e.$$.dirty[0]&16777219&&n(10,o=l.sort((F,J)=>{switch(I){case k.LeftUp:return F.export_value-J.export_value;case k.LeftDown:return J.export_value-F.export_value;case k.RightUp:return F.import_value-J.import_value;case k.RightDown:return J.import_value-F.import_value;case k.Up:return F.import_value+F.export_value-(J.import_value+J.export_value);case k.Down:return J.import_value+J.export_value-(F.import_value+F.export_value);case k.AlphaDown:return F.product.name.localeCompare(J.product.name);case k.AlphaUp:return J.product.name.localeCompare(F.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=Rn(a,F=>F.export_value)),e.$$.dirty[0]&8388608&&n(21,u=Rn(a,F=>F.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(c=hr(a,F=>F.export_value)),e.$$.dirty[0]&8388608&&(h=hr(a,F=>F.import_value)),e.$$.dirty[0]&6291464&&n(5,f=Fn().domain([-s,u]).range([St+fa,S-fa-H0])),e.$$.dirty[0]&48){let F=Ha(f).tickFormat(J=>Y(Math.abs(J)));Se(U).transition().call(F)}},[k,I,z,S,U,f,m,E,L,x,o,v,y,j,oe,te,g,b,P,G,A,u,s,a,l,i,r,_,X,V,W,he,se,Te,we,ue,O,$,Me]}class x0 extends wt{constructor(t){super(),bt(this,t,X0,F0,kt,{data:16},null,[-1,-1])}}function da(e,t,n){const r=e.slice();return r[53]=t[n],r}function _a(e,t,n){const r=e.slice();return r[53]=t[n],r}function ma(e,t,n){const r=e.slice();return r[53]=t[n],r}function q0(e){let t,n,r,i,a;return{c(){t=re("text"),n=ve("No valid data for this pair."),this.h()},l(l){t=ie(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=H(t);n=ye(o,"No valid data for this pair."),o.forEach(w),this.h()},h(){d(t,"x",r=e[3]/2),d(t,"y",i=e[4]/2),d(t,"alignment-baseline","central"),d(t,"text-anchor","middle")},m(l,o){K(l,t,o),M(t,n)},p(l,o){o[0]&8&&r!==(r=l[3]/2)&&d(t,"x",r),o[0]&16&&i!==(i=l[4]/2)&&d(t,"y",i)},i(l){a||sn(()=>{a=Ci(t,Ir,{}),a.start()})},o:Oe,d(l){l&&w(t)}}}function W0(e){var Re,Ve,We,Be;let t,n,r,i,a,l,o,s,u,c,h,f,_,v,y,g,k=((Ve=`to ${(Re=e[0].get(e[2]))==null?void 0:Re.name}`)!=null?Ve:"")+"",I,b,m,E,P,z=((Be=`from ${(We=e[0].get(e[2]))==null?void 0:We.name}`)!=null?Be:"")+"",L,G,A,S,x,U,Y,T,C,j,oe,te=[],X=new Map,V,W,he,se=[],Te=new Map,we,ue,O,$=[],Me=new Map,R,ne,N,F=!e[18]&&ga(e),J=e[13]>0&&e[12]<0&&pa(e),Ne=e[16];const le=D=>D[53].year;for(let D=0;D<Ne.length;D+=1){let ee=ma(e,Ne,D),q=le(ee);X.set(q,te[D]=va(q,ee))}let me=e[16];const B=D=>D[53].year;for(let D=0;D<me.length;D+=1){let ee=_a(e,me,D),q=B(ee);Te.set(q,se[D]=ya(q,ee))}let ge=e[16];const Ee=D=>D[53].year;for(let D=0;D<ge.length;D+=1){let ee=da(e,ge,D),q=Ee(ee);Me.set(q,$[D]=wa(q,ee))}return{c(){t=re("text"),n=ve("Trade Over Time"),i=re("g"),F&&F.c(),a=re("g"),l=re("line"),u=re("g"),c=re("g"),f=re("g"),_=re("circle"),y=re("text"),g=ve("Export "),I=ve(k),b=re("circle"),E=re("text"),P=ve("Import "),L=ve(z),G=re("g"),A=re("rect"),S=re("text"),x=ve("Trade Deficit"),U=re("rect"),Y=re("text"),T=ve("Trade Surplus"),j=re("g"),J&&J.c(),oe=ke();for(let D=0;D<te.length;D+=1)te[D].c();V=re("g"),W=re("path");for(let D=0;D<se.length;D+=1)se[D].c();we=re("g"),ue=re("path");for(let D=0;D<$.length;D+=1)$[D].c();R=re("g"),ne=re("g"),N=ve("''"),this.h()},l(D){t=ie(D,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var ee=H(t);n=ye(ee,"Trade Over Time"),ee.forEach(w),i=ie(D,"g",{class:!0}),H(i).forEach(w),F&&F.l(D),a=ie(D,"g",{id:!0,transform:!0});var q=H(a);l=ie(q,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),H(l).forEach(w),q.forEach(w),u=ie(D,"g",{id:!0,transform:!0}),H(u).forEach(w),c=ie(D,"g",{id:!0,transform:!0}),H(c).forEach(w),f=ie(D,"g",{id:!0,transform:!0});var ae=H(f);_=ie(ae,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),H(_).forEach(w),y=ie(ae,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Fe=H(y);g=ye(Fe,"Export "),I=ye(Fe,k),Fe.forEach(w),b=ie(ae,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),H(b).forEach(w),E=ie(ae,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var He=H(E);P=ye(He,"Import "),L=ye(He,z),He.forEach(w),ae.forEach(w),G=ie(D,"g",{id:!0,transform:!0});var Ke=H(G);A=ie(Ke,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),H(A).forEach(w),S=ie(Ke,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Ce=H(S);x=ye(Ce,"Trade Deficit"),Ce.forEach(w),U=ie(Ke,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),H(U).forEach(w),Y=ie(Ke,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0});var rt=H(Y);T=ye(rt,"Trade Surplus"),rt.forEach(w),Ke.forEach(w),j=ie(D,"g",{id:!0});var st=H(j);J&&J.l(st),oe=ke();for(let Le=0;Le<te.length;Le+=1)te[Le].l(st);st.forEach(w),V=ie(D,"g",{class:!0});var Q=H(V);W=ie(Q,"path",{fill:!0,stroke:!0,"stroke-width":!0}),H(W).forEach(w);for(let Le=0;Le<se.length;Le+=1)se[Le].l(Q);Q.forEach(w),we=ie(D,"g",{class:!0});var pe=H(we);ue=ie(pe,"path",{fill:!0,stroke:!0,"stroke-width":!0}),H(ue).forEach(w);for(let Le=0;Le<$.length;Le+=1)$[Le].l(pe);pe.forEach(w),R=ie(D,"g",{}),H(R).forEach(w),ne=ie(D,"g",{id:!0,class:!0}),H(ne).forEach(w),N=ye(D,"''"),this.h()},h(){d(t,"class","chart-header"),d(t,"x",r=e[3]/2+10),d(t,"y",dt-5),d(t,"text-anchor","middle"),d(i,"class","brush"),d(l,"id","xAxisLine"),d(l,"x1",Sr),d(l,"x2",o=e[3]-Ht),d(l,"y1","0"),d(l,"y2","0"),d(l,"stroke","rgba(0,0,0,0.7)"),d(l,"stroke-width","1"),d(a,"id","xAxis"),d(a,"transform",s=`translate(${0},${e[4]-dt})`),d(u,"id","yAisLeft"),d(u,"transform",`translate(${Sr},${0})`),d(c,"id","yAisRight"),d(c,"transform",h=`translate(${e[3]-Ht},${0})`),d(_,"class","circ1"),d(_,"cx","20"),d(_,"cy","10"),d(_,"r","5"),d(_,"fill",v=e[17](e[1])),d(_,"stroke","rgba(0,0,0,0)"),d(_,"stroke-width","2"),d(y,"x","30"),d(y,"y","15"),d(y,"font-size","13"),d(y,"text-anchor","start"),d(b,"class","circ2"),d(b,"cx","20"),d(b,"cy","25"),d(b,"r","5"),d(b,"fill",m=e[17](e[2])),d(b,"stroke","rgba(0,0,0,0)"),d(b,"stroke-width","2"),d(E,"x","30"),d(E,"y","30"),d(E,"font-size","13"),d(E,"text-anchor","start"),d(f,"id","legendLeft"),d(f,"transform","translate(10,6)"),d(A,"class","deficit svelte-o11v01"),d(A,"x","15"),d(A,"y","5"),d(A,"width","10"),d(A,"height","10"),d(A,"fill",Mr),d(A,"opacity","0.6"),d(S,"x","30"),d(S,"y","15"),d(S,"font-size","13"),d(S,"text-anchor","start"),d(U,"class","surplus svelte-o11v01"),d(U,"x","15"),d(U,"y","20"),d(U,"width","10"),d(U,"height","10"),d(U,"fill",Tr),d(U,"opacity","0.6"),d(Y,"x","30"),d(Y,"y","30"),d(Y,"font-size","13"),d(Y,"text-anchor","start"),d(G,"id","legendRight"),d(G,"transform",C=`translate(${e[3]-3*Ht+30},6)`),d(j,"id","net-values-group"),d(W,"fill","none"),d(W,"stroke",he=e[17](e[1])),d(W,"stroke-width","2"),d(V,"class","country1-group country-group svelte-o11v01"),d(ue,"fill","none"),d(ue,"stroke",O=e[17](e[2])),d(ue,"stroke-width","2"),d(we,"class","country2-group country-group svelte-o11v01"),d(ne,"id","line-chart-tooltip"),d(ne,"class","tooltip")},m(D,ee){K(D,t,ee),M(t,n),K(D,i,ee),e[40](i),F&&F.m(D,ee),K(D,a,ee),M(a,l),e[41](a),K(D,u,ee),e[42](u),K(D,c,ee),e[43](c),K(D,f,ee),M(f,_),M(f,y),M(y,g),M(y,I),M(f,b),M(f,E),M(E,P),M(E,L),K(D,G,ee),M(G,A),M(G,S),M(S,x),M(G,U),M(G,Y),M(Y,T),K(D,j,ee),J&&J.m(j,null),M(j,oe);for(let q=0;q<te.length;q+=1)te[q].m(j,null);K(D,V,ee),M(V,W),e[44](W);for(let q=0;q<se.length;q+=1)se[q].m(V,null);K(D,we,ee),M(we,ue),e[45](ue);for(let q=0;q<$.length;q+=1)$[q].m(we,null);K(D,R,ee),K(D,ne,ee),K(D,N,ee)},p(D,ee){var q,ae,Fe,He;ee[0]&8&&r!==(r=D[3]/2+10)&&d(t,"x",r),D[18]?F&&(F.d(1),F=null):F?F.p(D,ee):(F=ga(D),F.c(),F.m(a.parentNode,a)),ee[0]&8&&o!==(o=D[3]-Ht)&&d(l,"x2",o),ee[0]&16&&s!==(s=`translate(${0},${D[4]-dt})`)&&d(a,"transform",s),ee[0]&8&&h!==(h=`translate(${D[3]-Ht},${0})`)&&d(c,"transform",h),ee[0]&131074&&v!==(v=D[17](D[1]))&&d(_,"fill",v),ee[0]&5&&k!==(k=((ae=`to ${(q=D[0].get(D[2]))==null?void 0:q.name}`)!=null?ae:"")+"")&&Xe(I,k),ee[0]&131076&&m!==(m=D[17](D[2]))&&d(b,"fill",m),ee[0]&5&&z!==(z=((He=`from ${(Fe=D[0].get(D[2]))==null?void 0:Fe.name}`)!=null?He:"")+"")&&Xe(L,z),ee[0]&8&&C!==(C=`translate(${D[3]-3*Ht+30},6)`)&&d(G,"transform",C),D[13]>0&&D[12]<0?J?J.p(D,ee):(J=pa(D),J.c(),J.m(j,oe)):J&&(J.d(1),J=null),ee[0]&125403136&&(Ne=D[16],te=xt(te,ee,le,1,D,Ne,X,j,bn,va,null,ma)),ee[0]&131074&&he!==(he=D[17](D[1]))&&d(W,"stroke",he),ee[0]&82034690&&(me=D[16],se=xt(se,ee,B,1,D,me,Te,V,bn,ya,null,_a)),ee[0]&131076&&O!==(O=D[17](D[2]))&&d(ue,"stroke",O),ee[0]&82034692&&(ge=D[16],$=xt($,ee,Ee,1,D,ge,Me,we,bn,wa,null,da))},i:Oe,o:Oe,d(D){D&&w(t),D&&w(i),e[40](null),F&&F.d(D),D&&w(a),e[41](null),D&&w(u),e[42](null),D&&w(c),e[43](null),D&&w(f),D&&w(G),D&&w(j),J&&J.d();for(let ee=0;ee<te.length;ee+=1)te[ee].d();D&&w(V),e[44](null);for(let ee=0;ee<se.length;ee+=1)se[ee].d();D&&w(we),e[45](null);for(let ee=0;ee<$.length;ee+=1)$[ee].d();D&&w(R),D&&w(ne),D&&w(N)}}}function ga(e){let t,n,r;return{c(){t=re("rect"),this.h()},l(i){t=ie(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),H(t).forEach(w),this.h()},h(){d(t,"class","timebar svelte-o11v01"),d(t,"x",n=e[15](e[21][0])-12),d(t,"y",44),d(t,"width","24"),d(t,"height",r=e[4]-44-dt),d(t,"fill","rgba(0,0,0,0.2)")},m(i,a){K(i,t,a)},p(i,a){a[0]&2129920&&n!==(n=i[15](i[21][0])-12)&&d(t,"x",n),a[0]&16&&r!==(r=i[4]-44-dt)&&d(t,"height",r)},d(i){i&&w(t)}}}function pa(e){let t,n,r,i;return{c(){t=re("line"),this.h()},l(a){t=ie(a,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),H(t).forEach(w),this.h()},h(){d(t,"id","zeroline"),d(t,"x1",Sr),d(t,"x2",n=e[3]-Ht),d(t,"y1",r=e[11](0)),d(t,"y2",i=e[11](0)),d(t,"stroke","rgba(0,0,0,0.7)"),d(t,"stroke-width","1")},m(a,l){K(a,t,l)},p(a,l){l[0]&8&&n!==(n=a[3]-Ht)&&d(t,"x2",n),l[0]&2048&&r!==(r=a[11](0))&&d(t,"y1",r),l[0]&2048&&i!==(i=a[11](0))&&d(t,"y2",i)},d(a){a&&w(t)}}}function va(e,t){let n,r,i,a,l,o,s,u;return{key:e,first:null,c(){n=re("rect"),this.h()},l(c){n=ie(c,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),H(n).forEach(w),this.h()},h(){d(n,"x",r=t[15](t[53].year)-Hn/2),d(n,"width",Hn),d(n,"y",i=t[20](t[53])),d(n,"height",a=t[19](t[53])),d(n,"fill",l=t[53].export_value<t[53].import_value?Mr:Tr),d(n,"stroke",o=t[21].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"opacity","0.6"),d(n,"class","svelte-o11v01"),this.first=n},m(c,h){K(c,n,h),s||(u=[Z(n,"click",function(){ze(t[22](t[53].year))&&t[22](t[53].year).apply(this,arguments)}),Z(n,"keydown",J0),Z(n,"keypress",t[37]),Z(n,"click",function(){ze(t[22](t[53].year))&&t[22](t[53].year).apply(this,arguments)}),Z(n,"focus",t[38]),Z(n,"blur",t[39]),Z(n,"mouseover",function(){ze(t[24](t[53]))&&t[24](t[53]).apply(this,arguments)}),Z(n,"mousemove",t[25]()),Z(n,"mouseout",t[26]())],s=!0)},p(c,h){t=c,h[0]&98304&&r!==(r=t[15](t[53].year)-Hn/2)&&d(n,"x",r),h[0]&1114112&&i!==(i=t[20](t[53]))&&d(n,"y",i),h[0]&589824&&a!==(a=t[19](t[53]))&&d(n,"height",a),h[0]&65536&&l!==(l=t[53].export_value<t[53].import_value?Mr:Tr)&&d(n,"fill",l),h[0]&2162688&&o!==(o=t[21].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",o)},d(c){c&&w(n),s=!1,ot(u)}}}function ya(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=re("circle"),this.h()},l(u){n=ie(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),H(n).forEach(w),this.h()},h(){d(n,"class","circ1 svelte-o11v01"),d(n,"cx",r=t[15](t[53].year)),d(n,"cy",i=t[14](t[53].export_value)),d(n,"r","6"),d(n,"fill",a=t[17](t[1])),d(n,"stroke",l=t[21].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),this.first=n},m(u,c){K(u,n,c),o||(s=[Z(n,"click",function(){ze(t[22](t[53].year))&&t[22](t[53].year).apply(this,arguments)}),Z(n,"keydown",Q0),Z(n,"keypress",t[34]),Z(n,"click",function(){ze(t[22](t[53].year))&&t[22](t[53].year).apply(this,arguments)}),Z(n,"focus",t[35]),Z(n,"blur",t[36]),Z(n,"mouseover",function(){ze(t[23](t[53],!0))&&t[23](t[53],!0).apply(this,arguments)}),Z(n,"mouseout",t[26]())],o=!0)},p(u,c){t=u,c[0]&98304&&r!==(r=t[15](t[53].year))&&d(n,"cx",r),c[0]&81920&&i!==(i=t[14](t[53].export_value))&&d(n,"cy",i),c[0]&131074&&a!==(a=t[17](t[1]))&&d(n,"fill",a),c[0]&2162688&&l!==(l=t[21].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&w(n),o=!1,ot(s)}}}function wa(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=re("circle"),this.h()},l(u){n=ie(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),H(n).forEach(w),this.h()},h(){d(n,"cx",r=t[15](t[53].year)),d(n,"cy",i=t[14](t[53].import_value)),d(n,"r","6"),d(n,"fill",a=t[17](t[2])),d(n,"stroke",l=t[21].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),d(n,"stroke-width","2"),d(n,"class","svelte-o11v01"),this.first=n},m(u,c){K(u,n,c),o||(s=[Z(n,"click",function(){ze(t[22](t[53].year))&&t[22](t[53].year).apply(this,arguments)}),Z(n,"keydown",j0),Z(n,"keypress",t[31]),Z(n,"click",function(){ze(t[22](t[53].year))&&t[22](t[53].year).apply(this,arguments)}),Z(n,"focus",t[32]),Z(n,"blur",t[33]),Z(n,"mouseover",function(){ze(t[23](t[53],!1))&&t[23](t[53],!1).apply(this,arguments)}),Z(n,"mouseout",t[26]())],o=!0)},p(u,c){t=u,c[0]&98304&&r!==(r=t[15](t[53].year))&&d(n,"cx",r),c[0]&81920&&i!==(i=t[14](t[53].import_value))&&d(n,"cy",i),c[0]&131076&&a!==(a=t[17](t[2]))&&d(n,"fill",a),c[0]&2162688&&l!==(l=t[21].includes(t[53].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&d(n,"stroke",l)},d(u){u&&w(n),o=!1,ot(s)}}}function K0(e){let t,n,r;function i(o,s){return o[16].length>0?W0:q0}let a=i(e),l=a(e);return{c(){t=fe("div"),n=re("svg"),l.c(),this.h()},l(o){t=ce(o,"DIV",{id:!0,class:!0});var s=H(t);n=ie(s,"svg",{width:!0,height:!0});var u=H(n);l.l(u),u.forEach(w),s.forEach(w),this.h()},h(){d(n,"width",e[3]),d(n,"height",e[4]),d(t,"id","line-chart"),d(t,"class","viz-section"),sn(()=>e[46].call(t))},m(o,s){K(o,t,s),M(t,n),l.m(n,null),r=Cr(t,e[46].bind(t))},p(o,s){a===(a=i(o))&&l?l.p(o,s):(l.d(1),l=a(o),l&&(l.c(),de(l,1),l.m(n,null))),s[0]&8&&d(n,"width",o[3]),s[0]&16&&d(n,"height",o[4])},i(o){de(l)},o:Oe,d(o){o&&w(t),l.d(),r()}}}const dt=35,jn=15,Sr=50,Ht=50,Hn=16,mn=10,$n=180,Rt=68,Z0=22,Ft=20,jr=35,gn=37,pn=22,Tr="#4daf4a",Mr="#e41a1c",J0=()=>{},Q0=()=>{},j0=()=>{};function $0(e,t,n){let r,i,a,l,o,s,u,c,h,f,_;yt(e,tt,B=>n(30,f=B)),yt(e,tn,B=>n(21,_=B));let{data:v}=t,{bilateralData:y,locationData:g,productData:k,country1_id:I,country2_id:b,countryColorScale:m}=v,E=0,P=0;const z=B=>qt("$.3s")(B).replace(/G/,"B");let L,G,A,S,x,U,Y=!1,T;function C(B){return()=>tn.set([B])}function j(B,ge){return B+$n<E?B+ge:B+ge-$n}function oe(B,ge,Ee){return B+Ee<P?B+ge:B+ge-Rt}function te(B,ge){return Ee=>{var We,Be,D;let Re=Se("#line-chart-tooltip"),Ve=Rt+T.length*Z0;if(Re.append("rect").attr("width",$n).attr("height",Ve).attr("x",j(Ee.layerX,mn)).attr("y",oe(Ee.layerY,mn,Ve)),Re.append("text").attr("class","title").attr("x",j(Ee.layerX,Ft)).attr("y",oe(Ee.layerY,jr,Ve)).style("fill",m?m(ge?B.location_id:B.partner_id):"black").text(`${B.year} `+(ge?"Export":"Import")),f.size>0){for(let ee=0;ee<T.length;ee++){let q=(We=i==null?void 0:i.get(B.year))==null?void 0:We.filter(ae=>ae.product.name==T[ee])[0];Re.append("text").attr("x",j(Ee.layerX,Ft)).attr("y",oe(Ee.layerY,gn+(ee+1)*pn,Ve)).text(`${T[ee]}: ${z(ge?(Be=q==null?void 0:q.export_value)!=null?Be:0:(D=q==null?void 0:q.import_value)!=null?D:0)}`)}Re.append("text").attr("x",j(Ee.layerX,Ft)).attr("y",oe(Ee.layerY,gn+(T.length+1)*pn,Ve)).style("font-weight","bold").text(`Selected Total:  ${z(ge?B.export_value:B.import_value)}`)}else Re.append("text").attr("x",j(Ee.layerX,Ft)).attr("y",oe(Ee.layerY,gn+pn,Ve)).text((f.size==0?"Total: ":"Selected Total: ")+`${z(ge?B.export_value:B.import_value)}`),Re.append("text").attr("x",j(Ee.layerX,Ft)).attr("y",oe(Ee.layerY,gn+2*pn,Ve)).text("Sectors: All")}}function X(B){return ge=>{let Ee=Se("#line-chart-tooltip"),Re=B.export_value-B.import_value;Ee.append("rect").attr("id","tooltip-rect").attr("width",$n).attr("height",Rt).attr("x",j(ge.layerX,mn)).attr("y",oe(ge.layerY,mn,Rt)),Ee.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",j(ge.layerX,Ft)).attr("y",oe(ge.layerY,jr,Rt)).style("fill",Re<0?Mr:Tr).text(`${B.year} `+(Re<0?"Deficit":"Surplus")),Ee.append("text").attr("id","tooltip-text2").attr("x",j(ge.layerX,Ft)).attr("y",oe(ge.layerY,gn+pn,Rt)).text((f.size>0?"Selected ":"")+`Total: ${z(Math.abs(B.export_value-B.import_value))}`)}}function V(){return B=>{Se("#tooltip-rect").attr("x",j(B.layerX,mn)).attr("y",oe(B.layerY,mn,Rt)),Se("#tooltip-text1").attr("x",j(B.layerX,Ft)).attr("y",oe(B.layerY,jr,Rt)),Se("#tooltip-text2").attr("x",j(B.layerX,Ft)).attr("y",oe(B.layerY,gn+pn,Rt))}}function W(){return B=>{Se("#line-chart-tooltip").selectAll("rect").remove(),Se("#line-chart-tooltip").selectAll("text").remove()}}function he(B){lt.call(this,e,B)}function se(B){lt.call(this,e,B)}function Te(B){lt.call(this,e,B)}function we(B){lt.call(this,e,B)}function ue(B){lt.call(this,e,B)}function O(B){lt.call(this,e,B)}function $(B){lt.call(this,e,B)}function Me(B){lt.call(this,e,B)}function R(B){lt.call(this,e,B)}function ne(B){nt[B?"unshift":"push"](()=>{S=B,n(8,S)})}function N(B){nt[B?"unshift":"push"](()=>{L=B,n(5,L)})}function F(B){nt[B?"unshift":"push"](()=>{G=B,n(6,G)})}function J(B){nt[B?"unshift":"push"](()=>{A=B,n(7,A)})}function Ne(B){nt[B?"unshift":"push"](()=>{x=B,n(9,x)})}function le(B){nt[B?"unshift":"push"](()=>{U=B,n(10,U)})}function me(){E=this.clientWidth,P=this.clientHeight,n(3,E),n(4,P)}return e.$$set=B=>{"data"in B&&n(27,v=B.data)},e.$$.update=()=>{var B,ge,Ee,Re,Ve,We,Be,D,ee;if(e.$$.dirty[0]&134217728&&n(28,{bilateralData:y,locationData:g,productData:k,country1_id:I,country2_id:b,countryColorScale:m}=v,y,(n(0,g),n(27,v)),(n(29,k),n(27,v)),(n(1,I),n(27,v)),(n(2,b),n(27,v)),(n(17,m),n(27,v))),e.$$.dirty[0]&1879048199&&n(16,r=Array.from((Ee=(ge=(B=y==null?void 0:y.get(I))==null?void 0:B.get(b))==null?void 0:ge.entries())!=null?Ee:new Array).map(q=>{let ae=q[0],Fe=q[1];return Fe=f.size==0?Fe:Fe.filter(He=>f.has(He.product_id)),Fe.reduce((He,Ke)=>(He.export_value+=Ke.export_value,He.import_value+=Ke.import_value,He),new Vt(g,k,{location_id:I,partner_id:b,product_id:0,year:ae,export_value:0,import_value:0}))}).sort((q,ae)=>q.year-ae.year)),e.$$.dirty[0]&65544&&n(15,a=Fn().domain(Ra(r,q=>q.year)).range([Sr+Hn/2,E-Ht-Hn/2])),e.$$.dirty[0]&33024){let q=Yc().on("start brush end",ae=>{if((ae==null?void 0:ae.selection)===null||(ae==null?void 0:ae.selection[1])-(ae==null?void 0:ae.selection[0])<5)tn.set([2020]),n(18,Y=!1);else{n(18,Y=!0);let Fe=ae.selection;const He=Fe[0],Ke=Fe[1];let Ce=Math.ceil(a.invert(He)),rt=Math.floor(a.invert(Ke)),st=[];for(let Q=Ce;Q<=rt;Q++)st.push(Q);tn.set(st)}});Se(S).call(q)}if(e.$$.dirty[0]&268435462&&(i=(Re=y==null?void 0:y.get(I))==null?void 0:Re.get(b)),e.$$.dirty[0]&65552&&n(14,l=Fn().domain([0,(Ve=Rn(r,q=>Math.max(q.export_value,q.import_value)))!=null?Ve:0]).range([P-dt,dt+jn]).nice()),e.$$.dirty[0]&65536&&n(13,o=(We=Rn(r,q=>q.export_value-q.import_value))!=null?We:0),e.$$.dirty[0]&65536&&n(12,s=(Be=Ji(r,q=>q.export_value-q.import_value))!=null?Be:0),e.$$.dirty[0]&65552&&n(11,u=Fn().domain([(D=Ji(r,q=>q.export_value-q.import_value))!=null?D:0,(ee=Rn(r,q=>q.export_value-q.import_value))!=null?ee:0]).range([P-dt,dt+jn]).nice()),e.$$.dirty[0]&51424){let q=Ha(a).tickFormat(qt("d"));Se(L).transition().call(q).select(".domain").attr("stroke-width",0);let ae=cs(l).tickFormat(He=>z(He));Se(G).transition().call(ae);let Fe=fs(u).tickFormat(He=>z(He));Se(A).transition().call(Fe)}if(e.$$.dirty[0]&115200){let q=bi();r.length>0&&(r.sort(ae=>ae.year),q.moveTo(a(r[0].year),l(r[0].export_value))),r.forEach(ae=>{q.lineTo(a(ae.year),l(ae.export_value))}),Se(x).transition().attr("d",q.toString())}if(e.$$.dirty[0]&115712){let q=bi();r.length>0&&q.moveTo(a(r[0].year),l(r[0].import_value)),r.forEach(ae=>{q.lineTo(a(ae.year),l(ae.import_value))}),Se(U).transition().attr("d",q.toString())}e.$$.dirty[0]&1610612736&&(T=f.size==0?["All"]:Array.from(f.values()).map(q=>{var ae,Fe;return(Fe=(ae=k==null?void 0:k.get(q))==null?void 0:ae.name)!=null?Fe:"something"}).sort()),e.$$.dirty[0]&14336&&n(20,c=q=>q.export_value<q.import_value?o<0?dt+jn:u(0):(s>0,u(q.export_value-q.import_value))),e.$$.dirty[0]&14352&&n(19,h=q=>q.export_value<q.import_value?o<0?u(q.export_value-q.import_value)-dt-jn:u(q.export_value-q.import_value)-u(0):s>0?P-dt-u(q.export_value-q.import_value):u(0)-u(q.export_value-q.import_value))},[g,I,b,E,P,L,G,A,S,x,U,u,s,o,l,a,r,m,Y,h,c,_,C,te,X,V,W,v,y,k,f,he,se,Te,we,ue,O,$,Me,R,ne,N,F,J,Ne,le,me]}class ed extends wt{constructor(t){super(),bt(this,t,$0,K0,kt,{data:27},null,[-1,-1])}}const{Map:td}=Yo;function ba(e,t,n){const r=e.slice();return r[33]=t[n],r}function ka(e){let t,n,r,i,a,l,o,s,u,c=e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>10&&Ea(e),h=e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>30&&Aa(e);return{c(){t=re("rect"),c&&c.c(),l=ke(),h&&h.c(),o=ke(),this.h()},l(f){t=ie(f,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),H(t).forEach(w),c&&c.l(f),l=ke(),h&&h.l(f),o=ke(),this.h()},h(){var f,_,v,y;d(t,"class","leaf svelte-sixlpg"),d(t,"transform",n=`translate(${e[33].x0},${e[33].y0})`),d(t,"width",r=e[33].x1-e[33].x0),d(t,"height",i=e[33].y1-e[33].y0),d(t,"fill",a=e[5]?e[5]((y=(v=(_=(f=e[33].data)==null?void 0:f.product)==null?void 0:_.parent)==null?void 0:v.name)!=null?y:""):"white")},m(f,_){K(f,t,_),c&&c.m(f,_),K(f,l,_),h&&h.m(f,_),K(f,o,_),s||(u=[Z(t,"keydown",rd),Z(t,"click",function(){ze(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[26]),Z(t,"mouseover",function(){ze(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){ze(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],s=!0)},p(f,_){var v,y,g,k;e=f,_[0]&256&&n!==(n=`translate(${e[33].x0},${e[33].y0})`)&&d(t,"transform",n),_[0]&256&&r!==(r=e[33].x1-e[33].x0)&&d(t,"width",r),_[0]&256&&i!==(i=e[33].y1-e[33].y0)&&d(t,"height",i),_[0]&288&&a!==(a=e[5]?e[5]((k=(g=(y=(v=e[33].data)==null?void 0:v.product)==null?void 0:y.parent)==null?void 0:g.name)!=null?k:""):"white")&&d(t,"fill",a),e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>10?c?c.p(e,_):(c=Ea(e),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null),e[33].x1-e[33].x0>40&&e[33].y1-e[33].y0>30?h?h.p(e,_):(h=Aa(e),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},d(f){f&&w(t),c&&c.d(f),f&&w(l),h&&h.d(f),f&&w(o),s=!1,ot(u)}}}function Ea(e){var s,u,c;let t,n=((c=(u=(s=e[33].data)==null?void 0:s.product.name)==null?void 0:u.substring(0,40))!=null?c:"")+"",r,i,a,l,o;return{c(){t=re("text"),r=ve(n),this.h()},l(h){t=ie(h,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var f=H(t);r=ye(f,n),f.forEach(w),this.h()},h(){d(t,"class","label svelte-sixlpg"),d(t,"transform",i=`translate(${e[33].x0+3},${e[33].y0+3})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[33].x1-e[33].x0)/15,8))},m(h,f){K(h,t,f),M(t,r),l||(o=[Z(t,"keydown",id),Z(t,"click",function(){ze(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[25]),Z(t,"mouseover",function(){ze(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){ze(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],l=!0)},p(h,f){var _,v,y;e=h,f[0]&256&&n!==(n=((y=(v=(_=e[33].data)==null?void 0:_.product.name)==null?void 0:v.substring(0,40))!=null?y:"")+"")&&Xe(r,n),f[0]&256&&i!==(i=`translate(${e[33].x0+3},${e[33].y0+3})`)&&d(t,"transform",i),f[0]&256&&a!==(a=Math.max((e[33].x1-e[33].x0)/15,8))&&d(t,"font-size",a)},d(h){h&&w(t),l=!1,ot(o)}}}function Aa(e){let t,n=e[9](e[4]?e[33].data.export_value:e[33].data.import_value)+"",r,i,a,l,o;return{c(){t=re("text"),r=ve(n),this.h()},l(s){t=ie(s,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var u=H(t);r=ye(u,n),u.forEach(w),this.h()},h(){d(t,"class","label-num svelte-sixlpg"),d(t,"transform",i=`translate(${e[33].x0+5},${e[33].y0+1+Math.max((e[33].x1-e[33].x0)/10,8)})`),d(t,"alignment-baseline","hanging"),d(t,"font-size",a=Math.max((e[33].x1-e[33].x0)/15,8)-1),d(t,"font-weight","300")},m(s,u){K(s,t,u),M(t,r),l||(o=[Z(t,"keydown",ld),Z(t,"click",function(){ze(e[13](e[33].data))&&e[13](e[33].data).apply(this,arguments)}),Z(t,"focus",e[24]),Z(t,"mouseover",function(){ze(e[10](e[33].data))&&e[10](e[33].data).apply(this,arguments)}),Z(t,"mousemove",function(){ze(e[11](e[33].data))&&e[11](e[33].data).apply(this,arguments)}),Z(t,"mouseleave",e[12]())],l=!0)},p(s,u){e=s,u[0]&272&&n!==(n=e[9](e[4]?e[33].data.export_value:e[33].data.import_value)+"")&&Xe(r,n),u[0]&256&&i!==(i=`translate(${e[33].x0+5},${e[33].y0+1+Math.max((e[33].x1-e[33].x0)/10,8)})`)&&d(t,"transform",i),u[0]&256&&a!==(a=Math.max((e[33].x1-e[33].x0)/15,8)-1)&&d(t,"font-size",a)},d(s){s&&w(t),l=!1,ot(o)}}}function Ia(e,t){let n,r,i=t[3].length>0&&t[33].x1!=NaN&&t[33].x0!=NaN&&t[33].y0!=NaN&&t[33].y1!=NaN&&ka(t);return{key:e,first:null,c(){n=ke(),i&&i.c(),r=ke(),this.h()},l(a){n=ke(),i&&i.l(a),r=ke(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[3].length>0&&t[33].x1!=NaN&&t[33].x0!=NaN&&t[33].y0!=NaN&&t[33].y1!=NaN?i?i.p(t,l):(i=ka(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&w(n),i&&i.d(a),a&&w(r)}}}function Sa(e){let t,n,r,i=e[6]?"Loading...":"No valid data for this pair.",a,l,o;return{c(){t=re("rect"),r=re("text"),a=ve(i),this.h()},l(s){t=ie(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),H(t).forEach(w),r=ie(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=H(r);a=ye(u,i),u.forEach(w),this.h()},h(){d(t,"x","0"),d(t,"y","0"),d(t,"width",e[0]),d(t,"height",e[1]),d(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),d(r,"x",l=e[0]/2),d(r,"y",o=e[1]/2),d(r,"alignment-baseline","central"),d(r,"text-anchor","middle")},m(s,u){K(s,t,u),K(s,r,u),M(r,a)},p(s,u){u[0]&1&&d(t,"width",s[0]),u[0]&2&&d(t,"height",s[1]),u[0]&64&&n!==(n=s[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&d(t,"fill",n),u[0]&64&&i!==(i=s[6]?"Loading...":"No valid data for this pair.")&&Xe(a,i),u[0]&1&&l!==(l=s[0]/2)&&d(r,"x",l),u[0]&2&&o!==(o=s[1]/2)&&d(r,"y",o)},d(s){s&&w(t),s&&w(r)}}}function nd(e){var h,f;let t,n,r,i=[],a=new td,l,o,s=e[8];const u=_=>_[33].data.product_id;for(let _=0;_<s.length;_+=1){let v=ba(e,s,_),y=u(v);a.set(y,i[_]=Ia(y,v))}let c=((f=(h=e[2])==null?void 0:h.length)!=null?f:0)===0&&Sa(e);return{c(){t=fe("div"),n=re("svg"),r=re("g");for(let _=0;_<i.length;_+=1)i[_].c();l=re("g"),c&&c.c(),this.h()},l(_){t=ce(_,"DIV",{class:!0});var v=H(t);n=ie(v,"svg",{class:!0});var y=H(n);r=ie(y,"g",{class:!0});var g=H(r);for(let k=0;k<i.length;k+=1)i[k].l(g);g.forEach(w),l=ie(y,"g",{id:!0,class:!0}),H(l).forEach(w),c&&c.l(y),y.forEach(w),v.forEach(w),this.h()},h(){d(r,"class","treemap svelte-sixlpg"),d(l,"id","treemap-tooltip"),d(l,"class","tooltip"),d(n,"class","svelte-sixlpg"),d(t,"class","viz-section-full"),sn(()=>e[28].call(t))},m(_,v){K(_,t,v),M(t,n),M(n,r);for(let y=0;y<i.length;y+=1)i[y].m(r,null);e[27](r),M(n,l),c&&c.m(n,null),o=Cr(t,e[28].bind(t))},p(_,v){var y,g;v[0]&16184&&(s=_[8],i=xt(i,v,u,1,_,s,a,r,bn,Ia,null,ba)),((g=(y=_[2])==null?void 0:y.length)!=null?g:0)===0?c?c.p(_,v):(c=Sa(_),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},i:Oe,o:Oe,d(_){_&&w(t);for(let v=0;v<i.length;v+=1)i[v].d();e[27](null),c&&c.d(),o()}}}const er=10,tr=120,Ta=25,$r=90,At=20,It=28,Xt=15,rd=()=>{},id=()=>{},ld=()=>{};function ad(e,t,n){let r,i,a,l,o,s,u,c,h;yt(e,tt,X=>n(23,u=X)),yt(e,tn,X=>n(3,c=X)),yt(e,rn,X=>n(4,h=X));const f=X=>qt("$.3s")(X).replace(/G/,"B");let{data:_}=t,{country1:v,country2:y,productColorScale:g,drilldownBilateral:k,loadingDrilldown:I,locationData:b,productData:m}=_,E=0,P=0,z,L=new Array;function G(X,V,W){return X+W<E?X+V:X+V-W}function A(X,V){return X+$r<P?X+V:X+V-$r}function S(X){return V=>{var se,Te,we;let W=Se("#treemap-tooltip"),he=Math.max(tr+c.length*Ta,tr+10+(X.product.name.length-20)*8);W.append("rect").attr("id","tooltip-rect").attr("width",he).attr("height",$r).attr("x",G(V.layerX,er,he)).attr("y",A(V.layerY,er)),W.append("text").attr("class","treemap").attr("id","tooltip-text1").attr("x",G(V.layerX,At,he)).attr("y",A(V.layerY,It)).style("font-weight","bold").text(`${X.product.name}`),W.append("text").attr("class","treemap").attr("id","tooltip-text2").attr("x",G(V.layerX,At,he)).attr("y",A(V.layerY,It+Xt)).text(`Sector: ${(we=(Te=(se=X.product)==null?void 0:se.parent)==null?void 0:Te.name)!=null?we:""}`),W.append("text").attr("class","treemap").attr("id","tooltip-text3").attr("x",G(V.layerX,At,he)).attr("y",A(V.layerY,It+2*Xt)).text((h?"Export: ":"Import: ")+`${f(h?X.export_value:X.import_value)}`),W.append("text").attr("class","treemap").attr("id","tooltip-text4").attr("x",G(V.layerX,At,he)).attr("y",A(V.layerY,It+3*Xt)).text(`Share: ${qt(".2%")(h?X.export_value/l:X.import_value/o)}`),W.append("text").attr("class","treemap").attr("id","tooltip-text5").attr("x",G(V.layerX,At,he)).attr("y",A(V.layerY,It+4*Xt)).text((c.length>1?"Years: ":"Year: ")+`${c.join(", ")}`)}}function x(X){return V=>{let W=Math.max(tr+c.length*Ta,tr+10+(X.product.name.length-20)*8);Se("#tooltip-rect").attr("x",G(V.layerX,er,W)).attr("y",A(V.layerY,er)),Se("#tooltip-text1").attr("x",G(V.layerX,At,W)).attr("y",A(V.layerY,It)),Se("#tooltip-text2").attr("x",G(V.layerX,At,W)).attr("y",A(V.layerY,It+Xt)),Se("#tooltip-text3").attr("x",G(V.layerX,At,W)).attr("y",A(V.layerY,It+2*Xt)),Se("#tooltip-text4").attr("x",G(V.layerX,At,W)).attr("y",A(V.layerY,It+3*Xt)),Se("#tooltip-text5").attr("x",G(V.layerX,At,W)).attr("y",A(V.layerY,It+4*Xt))}}function U(){return X=>{Se("#treemap-tooltip").selectAll("rect").remove(),Se("#treemap-tooltip").selectAll("text").remove()}}function Y(X){return V=>{var W,he,se,Te;((W=X==null?void 0:X.product)==null?void 0:W.parent)&&u.has((se=(he=X==null?void 0:X.product)==null?void 0:he.parent)==null?void 0:se.id)?tt.update(we=>{var ue,O,$;return we.delete(($=(O=(ue=X==null?void 0:X.product)==null?void 0:ue.parent)==null?void 0:O.id)!=null?$:-1),we}):((Te=X==null?void 0:X.product)==null?void 0:Te.parent)!=null&&tt.update(we=>{var ue,O,$;return we.add(($=(O=(ue=X==null?void 0:X.product)==null?void 0:ue.parent)==null?void 0:O.id)!=null?$:-1),we})}}function T(X){lt.call(this,e,X)}function C(X){lt.call(this,e,X)}function j(X){lt.call(this,e,X)}function oe(X){nt[X?"unshift":"push"](()=>{z=X,n(7,z)})}function te(){E=this.clientWidth,P=this.clientHeight,n(0,E),n(1,P)}return e.$$set=X=>{"data"in X&&n(14,_=X.data)},e.$$.update=()=>{var X;if(e.$$.dirty[0]&16384&&n(17,{drilldownBilateral:k,productColorScale:g,country1:v,country2:y,loadingDrilldown:I,locationData:b,productData:m}=_,k,(n(5,g),n(14,_)),(n(15,v),n(14,_)),(n(16,y),n(14,_)),(n(6,I),n(14,_)),(n(18,b),n(14,_)),(n(19,m),n(14,_))),e.$$.dirty[0]&196608&&n(22,r=k==null?void 0:k.get((X=y==null?void 0:y.id)!=null?X:0)),e.$$.dirty[0]&4194312&&n(20,i=c.map(V=>{var W;return(W=r==null?void 0:r.get(V))!=null?W:new Array}).flat()),e.$$.dirty[0]&1933312&&n(21,a=Array.from(ri(i,V=>V.reduce((W,he)=>(W.export_value+=he.export_value,W.import_value+=he.import_value,W),new Vt(b,m,{location_id:v,partner_id:y,product_id:V[0].product_id,year:0,export_value:0,import_value:0})),V=>V.product_id).values())),e.$$.dirty[0]&2097152&&(l=hr(a,V=>V.export_value)),e.$$.dirty[0]&2097152&&(o=hr(a,V=>V.import_value)),e.$$.dirty[0]&12419072&&n(2,s=u.size==0?a:Array.from(ri(i.filter(V=>u.has(V.product.parent_id)),V=>V.reduce((W,he)=>(W.export_value+=he.export_value,W.import_value+=he.import_value,W),new Vt(b,m,{location_id:v,partner_id:y,product_id:V[0].product_id,year:0,export_value:0,import_value:0})),V=>V.product_id).values())),e.$$.dirty[0]&8486935&&s&&s.length>0){let V=[];if(u.size==1){let he=u.entries().next().value[1],se=new Vt(new Map,new Map,{location_id:v,partner_id:y,product_id:he,year:0,export_value:0,import_value:0});se.product=new fr({product_id:he,name:"Sector",level:-1,parent_id:-1}),se.product.parent_id=null,V.push(se)}else{let he=new Vt(new Map,new Map,{location_id:v,partner_id:y,product_id:-1,year:0,export_value:0,import_value:0});he.product=new fr({product_id:-1,name:"All",level:-1,parent_id:-1}),he.product.parent_id=null,V.push(he);let se=ni(s,Te=>{var we,ue;return(ue=(we=Te.product)==null?void 0:we.parent_id)!=null?ue:-1});if(se.size>1)for(let[Te,we]of se){let ue=new Vt(new Map,new Map,{location_id:v,partner_id:y,product_id:Te,year:0,export_value:0,import_value:0});ue.product=new fr({product_id:Te,name:"Something",level:0,parent_id:-1}),V.push(ue)}}V=V.concat(s);let W=Hh().id(he=>{var se;return(se=he.product)==null?void 0:se.id}).parentId(he=>{var se;return(se=he.product)==null?void 0:se.parent_id})(V);W.sum(he=>Math.max(0,he[h?"export_value":"import_value"])),zh().tile(Yh).size([E,P]).padding(2)(W),n(8,L=W.leaves())}},[E,P,s,c,h,g,I,z,L,f,S,x,U,Y,_,v,y,k,b,m,i,a,r,u,T,C,j,oe,te]}class od extends wt{constructor(t){super(),bt(this,t,ad,nd,kt,{data:14},null,[-1,-1])}}const sd=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),nr=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=sd.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function ud(e){let t,n,r,i,a,l;return{c(){t=fe("div"),n=fe("h3"),r=ve("Loading data..."),i=Ae(),a=re("svg"),l=re("circle"),this.h()},l(o){t=ce(o,"DIV",{class:!0});var s=H(t);n=ce(s,"H3",{});var u=H(n);r=ye(u,"Loading data..."),u.forEach(w),i=Ie(s),a=ie(s,"svg",{class:!0,viewBox:!0});var c=H(a);l=ie(c,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),H(l).forEach(w),c.forEach(w),s.forEach(w),this.h()},h(){d(l,"class","path svelte-kxs0va"),d(l,"cx","25"),d(l,"cy","25"),d(l,"r","20"),d(l,"fill","none"),d(l,"stroke-width","5"),d(a,"class","spinner svelte-kxs0va"),d(a,"viewBox","0 0 50 50"),d(t,"class","loading svelte-kxs0va")},m(o,s){K(o,t,s),M(t,n),M(n,r),M(t,i),M(t,a),M(a,l)},p:Oe,i:Oe,o:Oe,d(o){o&&w(t)}}}function fd(e){var Fe,He,Ke,Ce,rt,st;let t,n,r,i,a,l,o,s,u,c,h,f,_,v,y,g,k,I,b,m,E,P,z,L,G,A,S,x,U,Y,T,C,j,oe,te,X,V,W,he,se,Te,we,ue,O,$,Me=((Fe=e[2])==null?void 0:Fe.name)+"",R,ne,N=e[9]?"export to ":"import from ",F,J,Ne=((He=e[8])==null?void 0:He.name)+"",le,me,B=e[10].length>1?`from ${e[10][0]} to ${e[10][e[10].length-1]}?`:`in ${e[10]}?`,ge,Ee,Re,Ve,We,Be,D,ee,q;u=new ta({props:{optionIdentifier:Na,labelIdentifier:Ca,items:Array.from(e[0].values()),value:e[2]}}),u.$on("select",e[12]),b=new ta({props:{optionIdentifier:Na,labelIdentifier:Ca,items:Array.from(e[0].values()),value:e[8]}}),b.$on("select",e[13]),U=new ed({props:{data:{bilateralData:e[5],country1_id:(Ce=(Ke=e[2])==null?void 0:Ke.id)!=null?Ce:0,country2_id:(st=(rt=e[8])==null?void 0:rt.id)!=null?st:0,productData:e[1],locationData:e[0],countryColorScale:e[3]}}}),T=new x0({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[5],loadingDrilldown:e[7],productColorScale:e[4],country1:e[2],country2:e[8],countryColorScale:e[3]}}});let ae=e[11].size>0&&Ma(e);return Be=new od({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7]}}}),{c(){t=fe("div"),n=fe("img"),i=Ae(),a=fe("div"),l=fe("span"),o=ve("Country"),s=Ae(),Pe(u.$$.fragment),c=Ae(),h=fe("div"),f=fe("button"),_=ve("\u2194"),v=Ae(),y=fe("div"),g=fe("span"),k=ve("Partner"),I=Ae(),Pe(b.$$.fragment),m=Ae(),E=fe("img"),z=Ae(),L=fe("div"),G=Ae(),A=fe("div"),S=fe("div"),x=fe("div"),Pe(U.$$.fragment),Y=Ae(),Pe(T.$$.fragment),C=Ae(),j=fe("div"),oe=fe("span"),te=ve("Showing"),X=Ae(),V=fe("button"),W=ve("Export"),he=Ae(),se=fe("button"),Te=ve("Import"),we=Ae(),ue=fe("div"),O=fe("p"),$=ve("What did "),R=ve(Me),ne=Ae(),F=ve(N),J=Ae(),le=ve(Ne),me=Ae(),ge=ve(B),Ee=Ae(),Re=fe("div"),ae&&ae.c(),Ve=Ae(),We=fe("div"),Pe(Be.$$.fragment),this.h()},l(Q){t=ce(Q,"DIV",{class:!0});var pe=H(t);n=ce(pe,"IMG",{class:!0,alt:!0,src:!0}),i=Ie(pe),a=ce(pe,"DIV",{class:!0});var Le=H(a);l=ce(Le,"SPAN",{class:!0});var _t=H(l);o=ye(_t,"Country"),_t.forEach(w),s=Ie(Le),ut(u.$$.fragment,Le),Le.forEach(w),c=Ie(pe),h=ce(pe,"DIV",{class:!0});var Kt=H(h);f=ce(Kt,"BUTTON",{class:!0});var ct=H(f);_=ye(ct,"\u2194"),ct.forEach(w),Kt.forEach(w),v=Ie(pe),y=ce(pe,"DIV",{class:!0});var Nt=H(y);g=ce(Nt,"SPAN",{class:!0});var Zt=H(g);k=ye(Zt,"Partner"),Zt.forEach(w),I=Ie(Nt),ut(b.$$.fragment,Nt),Nt.forEach(w),m=Ie(pe),E=ce(pe,"IMG",{class:!0,alt:!0,src:!0}),pe.forEach(w),z=Ie(Q),L=ce(Q,"DIV",{});var un=H(L);un.forEach(w),G=Ie(Q),A=ce(Q,"DIV",{id:!0,class:!0});var Jt=H(A);S=ce(Jt,"DIV",{id:!0,class:!0});var et=H(S);x=ce(et,"DIV",{class:!0});var Ct=H(x);ut(U.$$.fragment,Ct),Y=Ie(Ct),ut(T.$$.fragment,Ct),Ct.forEach(w),C=Ie(et),j=ce(et,"DIV",{class:!0});var mt=H(j);oe=ce(mt,"SPAN",{});var Pt=H(oe);te=ye(Pt,"Showing"),Pt.forEach(w),X=Ie(mt),V=ce(mt,"BUTTON",{class:!0});var Gt=H(V);W=ye(Gt,"Export"),Gt.forEach(w),he=Ie(mt),se=ce(mt,"BUTTON",{class:!0});var Qt=H(se);Te=ye(Qt,"Import"),Qt.forEach(w),mt.forEach(w),we=Ie(et),ue=ce(et,"DIV",{});var Ut=H(ue);O=ce(Ut,"P",{class:!0});var gt=H(O);$=ye(gt,"What did "),R=ye(gt,Me),ne=Ie(gt),F=ye(gt,N),J=Ie(gt),le=ye(gt,Ne),me=Ie(gt),ge=ye(gt,B),gt.forEach(w),Ut.forEach(w),Ee=Ie(et),Re=ce(et,"DIV",{class:!0});var fn=H(Re);ae&&ae.l(fn),fn.forEach(w),Ve=Ie(et),We=ce(et,"DIV",{class:!0});var Yn=H(We);ut(Be.$$.fragment,Yn),Yn.forEach(w),et.forEach(w),Jt.forEach(w),this.h()},h(){var Q,pe,Le,_t;d(n,"class","country-icon svelte-kxs0va"),d(n,"alt","Select a country"),Xn(n.src,r=nr((pe=(Q=e[2])==null?void 0:Q.code)!=null?pe:"ATA"))||d(n,"src",r),d(l,"class","svelte-kxs0va"),d(a,"class","dropdown svelte-kxs0va"),d(f,"class","switch-btn svelte-kxs0va"),d(h,"class","switch-btn-container svelte-kxs0va"),d(g,"class","svelte-kxs0va"),d(y,"class","dropdown svelte-kxs0va"),d(E,"class","country-icon svelte-kxs0va"),d(E,"alt","Select a partner"),Xn(E.src,P=nr((_t=(Le=e[8])==null?void 0:Le.code)!=null?_t:"ATA"))||d(E,"src",P),d(t,"class","selectors svelte-kxs0va"),d(x,"class","viz-row svelte-kxs0va"),d(V,"class","svelte-kxs0va"),Qe(V,"btn-active",e[9]),d(se,"class","svelte-kxs0va"),Qe(se,"btn-active",!e[9]),d(j,"class","export-import-btn-container svelte-kxs0va"),d(O,"class","chart-header"),d(Re,"class","clear-sectors svelte-kxs0va"),d(We,"class","viz-row svelte-kxs0va"),d(S,"id","content"),d(S,"class","svelte-kxs0va"),d(A,"id","container"),d(A,"class","svelte-kxs0va")},m(Q,pe){K(Q,t,pe),M(t,n),M(t,i),M(t,a),M(a,l),M(l,o),M(a,s),Ge(u,a,null),M(t,c),M(t,h),M(h,f),M(f,_),M(t,v),M(t,y),M(y,g),M(g,k),M(y,I),Ge(b,y,null),M(t,m),M(t,E),K(Q,z,pe),K(Q,L,pe),K(Q,G,pe),K(Q,A,pe),M(A,S),M(S,x),Ge(U,x,null),M(x,Y),Ge(T,x,null),M(S,C),M(S,j),M(j,oe),M(oe,te),M(j,X),M(j,V),M(V,W),M(j,he),M(j,se),M(se,Te),M(S,we),M(S,ue),M(ue,O),M(O,$),M(O,R),M(O,ne),M(O,F),M(O,J),M(O,le),M(O,me),M(O,ge),M(S,Ee),M(S,Re),ae&&ae.m(Re,null),M(S,Ve),M(S,We),Ge(Be,We,null),D=!0,ee||(q=[Z(f,"click",e[14]),Z(V,"click",e[15]),Z(se,"click",e[16])],ee=!0)},p(Q,pe){var Zt,un,Jt,et,Ct,mt,Pt,Gt,Qt,Ut;(!D||pe&4&&!Xn(n.src,r=nr((un=(Zt=Q[2])==null?void 0:Zt.code)!=null?un:"ATA")))&&d(n,"src",r);const Le={};pe&1&&(Le.items=Array.from(Q[0].values())),pe&4&&(Le.value=Q[2]),u.$set(Le);const _t={};pe&1&&(_t.items=Array.from(Q[0].values())),pe&256&&(_t.value=Q[8]),b.$set(_t),(!D||pe&256&&!Xn(E.src,P=nr((et=(Jt=Q[8])==null?void 0:Jt.code)!=null?et:"ATA")))&&d(E,"src",P);const Kt={};pe&303&&(Kt.data={bilateralData:Q[5],country1_id:(mt=(Ct=Q[2])==null?void 0:Ct.id)!=null?mt:0,country2_id:(Gt=(Pt=Q[8])==null?void 0:Pt.id)!=null?Gt:0,productData:Q[1],locationData:Q[0],countryColorScale:Q[3]}),U.$set(Kt);const ct={};pe&447&&(ct.data={productData:Q[1],locationData:Q[0],bilateralData:Q[5],loadingDrilldown:Q[7],productColorScale:Q[4],country1:Q[2],country2:Q[8],countryColorScale:Q[3]}),T.$set(ct),(!D||pe&512)&&Qe(V,"btn-active",Q[9]),(!D||pe&512)&&Qe(se,"btn-active",!Q[9]),(!D||pe&4)&&Me!==(Me=((Qt=Q[2])==null?void 0:Qt.name)+"")&&Xe(R,Me),(!D||pe&512)&&N!==(N=Q[9]?"export to ":"import from ")&&Xe(F,N),(!D||pe&256)&&Ne!==(Ne=((Ut=Q[8])==null?void 0:Ut.name)+"")&&Xe(le,Ne),(!D||pe&1024)&&B!==(B=Q[10].length>1?`from ${Q[10][0]} to ${Q[10][Q[10].length-1]}?`:`in ${Q[10]}?`)&&Xe(ge,B),Q[11].size>0?ae?(ae.p(Q,pe),pe&2048&&de(ae,1)):(ae=Ma(Q),ae.c(),de(ae,1),ae.m(Re,null)):ae&&(xe(),be(ae,1,1,()=>{ae=null}),qe());const Nt={};pe&471&&(Nt.data={locationData:Q[0],productData:Q[1],productColorScale:Q[4],country1:Q[2],country2:Q[8],drilldownBilateral:Q[6],loadingDrilldown:Q[7]}),Be.$set(Nt)},i(Q){D||(de(u.$$.fragment,Q),de(b.$$.fragment,Q),de(U.$$.fragment,Q),de(T.$$.fragment,Q),de(ae),de(Be.$$.fragment,Q),D=!0)},o(Q){be(u.$$.fragment,Q),be(b.$$.fragment,Q),be(U.$$.fragment,Q),be(T.$$.fragment,Q),be(ae),be(Be.$$.fragment,Q),D=!1},d(Q){Q&&w(t),Ue(u),Ue(b),Q&&w(z),Q&&w(L),Q&&w(G),Q&&w(A),Ue(U),Ue(T),ae&&ae.d(),Ue(Be),ee=!1,ot(q)}}}function Ma(e){let t,n,r,i,a,l,o;return{c(){t=fe("button"),n=ve("Clear Sector Selection"),this.h()},l(s){t=ce(s,"BUTTON",{height:!0,class:!0});var u=H(t);n=ye(u,"Clear Sector Selection"),u.forEach(w),this.h()},h(){d(t,"height","10"),d(t,"class","svelte-kxs0va")},m(s,u){K(s,t,u),M(t,n),a=!0,l||(o=Z(t,"click",e[17]),l=!0)},p:Oe,i(s){a||(sn(()=>{i&&i.end(1),r=Ci(t,Ir,{duration:200}),r.start()}),a=!0)},o(s){r&&r.invalidate(),i=xo(t,Ir,{duration:200}),a=!1},d(s){s&&w(t),s&&i&&i.end(),l=!1,o()}}}function cd(e){let t,n,r,i,a,l=Wi.exports.icons["book-open"].toSvg()+"",o,s,u=Wi.exports.icons.github.toSvg()+"",c,h,f,_,v,y,g,k,I,b,m;const E=[fd,ud],P=[];function z(L,G){return L[0]&&L[5]&&L[1]?0:1}return I=z(e),b=P[I]=E[I](e),{c(){t=fe("link"),n=Ae(),r=fe("div"),i=fe("div"),a=fe("a"),o=Ae(),s=fe("a"),c=Ae(),h=fe("div"),f=fe("h1"),_=ve("Commerce Among Nations"),v=Ae(),y=fe("h2"),g=ve("A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),k=Ae(),b.c(),this.h()},l(L){const G=Xo("svelte-tu7v51",document.head);t=ce(G,"LINK",{rel:!0,href:!0}),G.forEach(w),n=Ie(L),r=ce(L,"DIV",{class:!0});var A=H(r);i=ce(A,"DIV",{class:!0});var S=H(i);a=ce(S,"A",{href:!0,title:!0,class:!0});var x=H(a);x.forEach(w),o=Ie(S),s=ce(S,"A",{href:!0,title:!0,class:!0});var U=H(s);U.forEach(w),S.forEach(w),c=Ie(A),h=ce(A,"DIV",{class:!0});var Y=H(h);f=ce(Y,"H1",{class:!0});var T=H(f);_=ye(T,"Commerce Among Nations"),T.forEach(w),v=Ie(Y),y=ce(Y,"H2",{class:!0});var C=H(y);g=ye(C,"A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),C.forEach(w),Y.forEach(w),k=Ie(A),b.l(A),A.forEach(w),this.h()},h(){d(t,"rel","icon"),d(t,"href",`${vn}/favicon.png`),document.title="Commerce Among Nations",d(a,"href",vn+"/processbook"),d(a,"title","process-book"),d(a,"class","svelte-kxs0va"),d(s,"href","https://github.com/candrewlee14/data-viz-project"),d(s,"title","github"),d(s,"class","svelte-kxs0va"),d(i,"class","nav svelte-kxs0va"),d(f,"class","svelte-kxs0va"),d(y,"class","svelte-kxs0va"),d(h,"class","heading svelte-kxs0va"),d(r,"class","outer svelte-kxs0va")},m(L,G){M(document.head,t),K(L,n,G),K(L,r,G),M(r,i),M(i,a),a.innerHTML=l,M(i,o),M(i,s),s.innerHTML=u,M(r,c),M(r,h),M(h,f),M(f,_),M(h,v),M(h,y),M(y,g),M(r,k),P[I].m(r,null),m=!0},p(L,[G]){let A=I;I=z(L),I===A?P[I].p(L,G):(xe(),be(P[A],1,1,()=>{P[A]=null}),qe(),b=P[I],b?b.p(L,G):(b=P[I]=E[I](L),b.c()),de(b,1),b.m(r,null))},i(L){m||(de(b),m=!0)},o(L){be(b),m=!1},d(L){w(t),L&&w(n),L&&w(r),P[I].d()}}}const Na="id",Ca="name",hd=231,dd=43;function _d(e,t,n){let r,i,a,l,o;yt(e,rn,E=>n(9,a=E)),yt(e,tn,E=>n(10,l=E)),yt(e,tt,E=>n(11,o=E));const s=E=>{let P=E.detail;n(2,r=f.get(P.id))},u=E=>{let P=E.detail;n(8,i=f.get(P.id))};let c,h,f=new Map,_=new Map,v,y,g=!1;function k(){let E=r;n(2,r=i),n(8,i=E)}function I(){qi(rn,a=!0,a)}function b(){qi(rn,a=!1,a)}Nr(async()=>{Promise.all([Kn(`${vn}/data/location.csv`),Kn(`${vn}/data/hs_product.csv`),Kn(`${vn}/data/hs_2010_to_2020.csv`)]).then(([E,P,z])=>{var G;n(0,f=Zi(E.map(A=>new D0(A)).filter(A=>A.level=="country"),A=>A.id)),n(1,_=Zi(P.map(A=>new fr(A)),A=>A.id));for(let[A,S]of _)S.parent=(G=_.get(S.parent_id))!=null?G:null,_.set(A,S);let L=z.map(A=>new Vt(f,_,A));n(5,v=ni(L,A=>A.location_id,A=>A.partner_id,A=>A.year)),Ra(z,A=>+A.export_value),n(3,c=Ei(f.keys(),Ll)),n(4,h=Ei(Array.from(_).map(([A,S])=>S.level).filter(A=>A=="section"),Ll))})});const m=()=>{tt.set(new Set)};return e.$$.update=()=>{var E,P,z,L;e.$$.dirty&1&&n(2,r=(E=f==null?void 0:f.get(hd))!=null?E:null),e.$$.dirty&1&&n(8,i=(P=f==null?void 0:f.get(dd))!=null?P:null),e.$$.dirty&7&&(n(6,y=null),n(7,g=!0),Kn(`${vn}/data/${(z=r==null?void 0:r.code)!=null?z:"USA"}/${(L=r==null?void 0:r.code)!=null?L:"USA"}_hs2_2010_to_2020.csv`).then(G=>{n(6,y=ni(G.map(A=>new Vt(f,_,A)),A=>A.partner_id,A=>A.year)),n(7,g=!1)}))},[f,_,r,c,h,v,y,g,i,a,l,o,s,u,k,I,b,m]}class wd extends wt{constructor(t){super(),bt(this,t,_d,cd,kt,{})}}export{wd as default};
