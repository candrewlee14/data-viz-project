var Yo=Object.defineProperty;var zo=(e,t,n)=>t in e?Yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qe=(e,t,n)=>(zo(e,typeof t!="symbol"?t+"":t,n),n);import{S as Ct,i as Nt,s as Lt,k as $,l as ee,m as L,h as p,n as f,b as K,B as Be,I as $e,J as x,g as nt,t as Te,d as rt,f as ge,K as gt,L as Ui,o as qr,M as to,N as ht,e as Se,O as Yi,v as ft,w as Ke,x as wt,y as xe,z as qe,q as ye,r as ve,G as E,u as We,A as Er,a as be,c as ke,P as te,Q as ne,p as In,R as gi,T as wn,U as Zr,V as nn,W as Xo,C as Wo,D as Ko,E as xo,F as qo,X as zi,Y as dl,Z as _l,_ as Xi,$ as no,a0 as Zo,a1 as ml,a2 as jo,a3 as Jo,a4 as Qo,a5 as $o,a6 as Ze,H as Mt,a7 as _t,a8 as Wi,a9 as Rn,aa as es,ab as ts,ac as ns,ad as rs,ae as is,af as gl,ag as ur,ah as ls}from"../../chunks/index-5ece49a7.js";import{b as Ln}from"../../chunks/paths-6cd3a76e.js";import{w as Ki}from"../../chunks/index-747ceb65.js";import{f as fr}from"../../chunks/feather-e249e621.js";function Ir(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function as(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ro(e){let t,n,r;e.length!==2?(t=Ir,n=(o,s)=>Ir(e(o),s),r=(o,s)=>e(o)-s):(t=e===Ir||e===as?e:os,n=e,r=e);function i(o,s,u=0,h=o.length){if(u<h){if(t(s,s)!==0)return h;do{const c=u+h>>>1;n(o[c],s)<0?u=c+1:h=c}while(u<h)}return u}function a(o,s,u=0,h=o.length){if(u<h){if(t(s,s)!==0)return h;do{const c=u+h>>>1;n(o[c],s)<=0?u=c+1:h=c}while(u<h)}return u}function l(o,s,u=0,h=o.length){const c=i(o,s,u,h-1);return c>u&&r(o[c-1],s)>-r(o[c],s)?c-1:c}return{left:i,center:l,right:a}}function os(){return 0}function ss(e){return e===null?NaN:+e}const us=ro(Ir),fs=us.right;ro(ss).center;const cs=fs;function io(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class pi extends Map{constructor(t,n=_s){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(pl(this,t))}has(t){return super.has(pl(this,t))}set(t,n){return super.set(hs(this,t),n)}delete(t){return super.delete(ds(this,t))}}function pl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function hs({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ds({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function _s(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Lr(e){return e}function yi(e,...t){return xi(e,Lr,Lr,t)}function vi(e,t,...n){return xi(e,Lr,t,n)}function yl(e,...t){return xi(e,Lr,ms,t)}function ms(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function xi(e,t,n,r){return function i(a,l){if(l>=r.length)return n(a);const o=new pi,s=r[l++];let u=-1;for(const h of a){const c=s(h,++u,a),d=o.get(c);d?d.push(h):o.set(c,[h])}for(const[h,c]of o)o.set(h,i(c,l));return t(o)}(e,0)}var wi=Math.sqrt(50),bi=Math.sqrt(10),ki=Math.sqrt(2);function gs(e,t,n){var r,i=-1,a,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=lo(e,t,n))===0||!isFinite(o))return[];if(o>0){let s=Math.round(e/o),u=Math.round(t/o);for(s*o<e&&++s,u*o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)*o}else{o=-o;let s=Math.round(e*o),u=Math.round(t*o);for(s/o<e&&++s,u/o>t&&--u,l=new Array(a=u-s+1);++i<a;)l[i]=(s+i)/o}return r&&l.reverse(),l}function lo(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=wi?10:a>=bi?5:a>=ki?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=wi?10:a>=bi?5:a>=ki?2:1)}function ps(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=wi?i*=10:a>=bi?i*=5:a>=ki&&(i*=2),t<e?-i:i}function jn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function vl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Dr(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function ys(e){return e}var ei=1,Ar=2,Ei=3,xn=4,wl=1e-6;function vs(e){return"translate("+e+",0)"}function ws(e){return"translate(0,"+e+")"}function bs(e){return t=>+e(t)}function ks(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Es(){return!this.__axis}function qi(e,t){var n=[],r=null,i=null,a=6,l=6,o=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===ei||e===xn?-1:1,h=e===xn||e===Ar?"x":"y",c=e===ei||e===Ei?vs:ws;function d(_){var v=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,k=i==null?t.tickFormat?t.tickFormat.apply(t,n):ys:i,y=Math.max(a,0)+o,w=t.range(),I=+w[0]+s,A=+w[w.length-1]+s,m=(t.bandwidth?ks:bs)(t.copy(),s),b=_.selection?_.selection():_,V=b.selectAll(".domain").data([null]),W=b.selectAll(".tick").data(v,t).order(),P=W.exit(),O=W.enter().append("g").attr("class","tick"),C=W.select("line"),T=W.select("text");V=V.merge(V.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),W=W.merge(O),C=C.merge(O.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),T=T.merge(O.append("text").attr("fill","currentColor").attr(h,u*y).attr("dy",e===ei?"0em":e===Ei?"0.71em":"0.32em")),_!==b&&(V=V.transition(_),W=W.transition(_),C=C.transition(_),T=T.transition(_),P=P.transition(_).attr("opacity",wl).attr("transform",function(U){return isFinite(U=m(U))?c(U+s):this.getAttribute("transform")}),O.attr("opacity",wl).attr("transform",function(U){var B=this.parentNode.__axis;return c((B&&isFinite(B=B(U))?B:m(U))+s)})),P.remove(),V.attr("d",e===xn||e===Ar?l?"M"+u*l+","+I+"H"+s+"V"+A+"H"+u*l:"M"+s+","+I+"V"+A:l?"M"+I+","+u*l+"V"+s+"H"+A+"V"+u*l:"M"+I+","+s+"H"+A),W.attr("opacity",1).attr("transform",function(U){return c(m(U)+s)}),C.attr(h+"2",u*a),T.attr(h,u*y).text(k),b.filter(Es).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ar?"start":e===xn?"end":"middle"),b.each(function(){this.__axis=m})}return d.scale=function(_){return arguments.length?(t=_,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),d):n.slice()},d.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),d):r&&r.slice()},d.tickFormat=function(_){return arguments.length?(i=_,d):i},d.tickSize=function(_){return arguments.length?(a=l=+_,d):a},d.tickSizeInner=function(_){return arguments.length?(a=+_,d):a},d.tickSizeOuter=function(_){return arguments.length?(l=+_,d):l},d.tickPadding=function(_){return arguments.length?(o=+_,d):o},d.offset=function(_){return arguments.length?(s=+_,d):s},d}function Is(e){return qi(Ar,e)}function ao(e){return qi(Ei,e)}function As(e){return qi(xn,e)}var Ts={value:()=>{}};function Zi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Tr(n)}function Tr(e){this._=e}function Ss(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Tr.prototype=Zi.prototype={constructor:Tr,on:function(e,t){var n=this._,r=Ss(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=Ms(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=bl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=bl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Tr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Ms(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function bl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ts,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ii="http://www.w3.org/1999/xhtml";const kl={svg:"http://www.w3.org/2000/svg",xhtml:Ii,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),kl.hasOwnProperty(t)?{space:kl[t],local:e}:e}function Cs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ii&&t.documentElement.namespaceURI===Ii?t.createElement(e):t.createElementNS(n,e)}}function Ns(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function oo(e){var t=jr(e);return(t.local?Ns:Cs)(t)}function Ls(){}function ji(e){return e==null?Ls:function(){return this.querySelector(e)}}function Ds(e){typeof e!="function"&&(e=ji(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=new Array(l),s,u,h=0;h<l;++h)(s=a[h])&&(u=e.call(s,s.__data__,h,a))&&("__data__"in s&&(u.__data__=s.__data__),o[h]=u);return new bt(r,this._parents)}function Os(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Rs(){return[]}function so(e){return e==null?Rs:function(){return this.querySelectorAll(e)}}function Vs(e){return function(){return Os(e.apply(this,arguments))}}function Fs(e){typeof e=="function"?e=Vs(e):e=so(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new bt(r,i)}function uo(e){return function(){return this.matches(e)}}function fo(e){return function(t){return t.matches(e)}}var Hs=Array.prototype.find;function Bs(e){return function(){return Hs.call(this.children,e)}}function Ps(){return this.firstElementChild}function Gs(e){return this.select(e==null?Ps:Bs(typeof e=="function"?e:fo(e)))}var Us=Array.prototype.filter;function Ys(){return Array.from(this.children)}function zs(e){return function(){return Us.call(this.children,e)}}function Xs(e){return this.selectAll(e==null?Ys:zs(typeof e=="function"?e:fo(e)))}function Ws(e){typeof e!="function"&&(e=uo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new bt(r,this._parents)}function co(e){return new Array(e.length)}function Ks(){return new bt(this._enter||this._groups.map(co),this._parents)}function Or(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Or.prototype={constructor:Or,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xs(e){return function(){return e}}function qs(e,t,n,r,i,a){for(var l=0,o,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new Or(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function Zs(e,t,n,r,i,a,l){var o,s,u=new Map,h=t.length,c=a.length,d=new Array(h),_;for(o=0;o<h;++o)(s=t[o])&&(d[o]=_=l.call(s,s.__data__,o,t)+"",u.has(_)?i[o]=s:u.set(_,s));for(o=0;o<c;++o)_=l.call(e,a[o],o,a)+"",(s=u.get(_))?(r[o]=s,s.__data__=a[o],u.delete(_)):n[o]=new Or(e,a[o]);for(o=0;o<h;++o)(s=t[o])&&u.get(d[o])===s&&(i[o]=s)}function js(e){return e.__data__}function Js(e,t){if(!arguments.length)return Array.from(this,js);var n=t?Zs:qs,r=this._parents,i=this._groups;typeof e!="function"&&(e=xs(e));for(var a=i.length,l=new Array(a),o=new Array(a),s=new Array(a),u=0;u<a;++u){var h=r[u],c=i[u],d=c.length,_=Qs(e.call(h,h&&h.__data__,u,r)),v=_.length,k=o[u]=new Array(v),y=l[u]=new Array(v),w=s[u]=new Array(d);n(h,c,k,y,w,_,t);for(var I=0,A=0,m,b;I<v;++I)if(m=k[I]){for(I>=A&&(A=I+1);!(b=y[A])&&++A<v;);m._next=b||null}}return l=new bt(l,r),l._enter=o,l._exit=s,l}function Qs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $s(){return new bt(this._exit||this._groups.map(co),this._parents)}function eu(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function tu(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),o=new Array(i),s=0;s<l;++s)for(var u=n[s],h=r[s],c=u.length,d=o[s]=new Array(c),_,v=0;v<c;++v)(_=u[v]||h[v])&&(d[v]=_);for(;s<i;++s)o[s]=n[s];return new bt(o,this._parents)}function nu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function ru(e){e||(e=iu);function t(c,d){return c&&d?e(c.__data__,d.__data__):!c-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],o=l.length,s=i[a]=new Array(o),u,h=0;h<o;++h)(u=l[h])&&(s[h]=u);s.sort(t)}return new bt(i,this._parents).order()}function iu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function au(){return Array.from(this)}function ou(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function su(){let e=0;for(const t of this)++e;return e}function uu(){return!this.node()}function fu(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,o;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function cu(e){return function(){this.removeAttribute(e)}}function hu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function du(e,t){return function(){this.setAttribute(e,t)}}function _u(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function pu(e,t){var n=jr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?hu:cu:typeof t=="function"?n.local?gu:mu:n.local?_u:du)(n,t))}function ho(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yu(e){return function(){this.style.removeProperty(e)}}function vu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wu(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function bu(e,t,n){return arguments.length>1?this.each((t==null?yu:typeof t=="function"?wu:vu)(e,t,n==null?"":n)):Fn(this.node(),e)}function Fn(e,t){return e.style.getPropertyValue(t)||ho(e).getComputedStyle(e,null).getPropertyValue(t)}function ku(e){return function(){delete this[e]}}function Eu(e,t){return function(){this[e]=t}}function Iu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Au(e,t){return arguments.length>1?this.each((t==null?ku:typeof t=="function"?Iu:Eu)(e,t)):this.node()[e]}function _o(e){return e.trim().split(/^|\s+/)}function Ji(e){return e.classList||new mo(e)}function mo(e){this._node=e,this._names=_o(e.getAttribute("class")||"")}mo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function go(e,t){for(var n=Ji(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function po(e,t){for(var n=Ji(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Tu(e){return function(){go(this,e)}}function Su(e){return function(){po(this,e)}}function Mu(e,t){return function(){(t.apply(this,arguments)?go:po)(this,e)}}function Cu(e,t){var n=_o(e+"");if(arguments.length<2){for(var r=Ji(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Mu:t?Tu:Su)(n,t))}function Nu(){this.textContent=""}function Lu(e){return function(){this.textContent=e}}function Du(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Ou(e){return arguments.length?this.each(e==null?Nu:(typeof e=="function"?Du:Lu)(e)):this.node().textContent}function Ru(){this.innerHTML=""}function Vu(e){return function(){this.innerHTML=e}}function Fu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Hu(e){return arguments.length?this.each(e==null?Ru:(typeof e=="function"?Fu:Vu)(e)):this.node().innerHTML}function Bu(){this.nextSibling&&this.parentNode.appendChild(this)}function Pu(){return this.each(Bu)}function Gu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uu(){return this.each(Gu)}function Yu(e){var t=typeof e=="function"?e:oo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zu(){return null}function Xu(e,t){var n=typeof e=="function"?e:oo(e),r=t==null?zu:typeof t=="function"?t:ji(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Wu(){var e=this.parentNode;e&&e.removeChild(this)}function Ku(){return this.each(Wu)}function xu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zu(e){return this.select(e?qu:xu)}function ju(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ju(e){return function(t){e.call(this,t,this.__data__)}}function Qu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function $u(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function ef(e,t,n){return function(){var r=this.__on,i,a=Ju(t);if(r){for(var l=0,o=r.length;l<o;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function tf(e,t,n){var r=Qu(e+""),i,a=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var s=0,u=o.length,h;s<u;++s)for(i=0,h=o[s];i<a;++i)if((l=r[i]).type===h.type&&l.name===h.name)return h.value}return}for(o=t?ef:$u,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function yo(e,t,n){var r=ho(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function nf(e,t){return function(){return yo(this,e,t)}}function rf(e,t){return function(){return yo(this,e,t.apply(this,arguments))}}function lf(e,t){return this.each((typeof t=="function"?rf:nf)(e,t))}function*af(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var vo=[null];function bt(e,t){this._groups=e,this._parents=t}function rr(){return new bt([[document.documentElement]],vo)}function of(){return this}bt.prototype=rr.prototype={constructor:bt,select:Ds,selectAll:Fs,selectChild:Gs,selectChildren:Xs,filter:Ws,data:Js,enter:Ks,exit:$s,join:eu,merge:tu,selection:of,order:nu,sort:ru,call:lu,nodes:au,node:ou,size:su,empty:uu,each:fu,attr:pu,style:bu,property:Au,classed:Cu,text:Ou,html:Hu,raise:Pu,lower:Uu,append:Yu,insert:Xu,remove:Ku,clone:Zu,datum:ju,on:tf,dispatch:lf,[Symbol.iterator]:af};function Me(e){return typeof e=="string"?new bt([[document.querySelector(e)]],[document.documentElement]):new bt([[e]],vo)}function sf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function El(e,t){if(e=sf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ai={capture:!0,passive:!1};function Ti(e){e.preventDefault(),e.stopImmediatePropagation()}function uf(e){var t=e.document.documentElement,n=Me(e).on("dragstart.drag",Ti,Ai);"onselectstart"in t?n.on("selectstart.drag",Ti,Ai):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ff(e,t){var n=e.document.documentElement,r=Me(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ti,Ai),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Qi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ir(){}var $n=.7,Rr=1/$n,Vn="\\s*([+-]?\\d+)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cf=/^#([0-9a-f]{3,8})$/,hf=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),df=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),_f=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${er}\\)$`),mf=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${er}\\)$`),gf=new RegExp(`^hsl\\(${er},${Bt},${Bt}\\)$`),pf=new RegExp(`^hsla\\(${er},${Bt},${Bt},${er}\\)$`),Il={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qi(ir,pn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Al,formatHex:Al,formatHex8:yf,formatHsl:vf,formatRgb:Tl,toString:Tl});function Al(){return this.rgb().formatHex()}function yf(){return this.rgb().formatHex8()}function vf(){return bo(this).formatHsl()}function Tl(){return this.rgb().formatRgb()}function pn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Sl(t):n===3?new mt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hf.exec(e))?new mt(t[1],t[2],t[3],1):(t=df.exec(e))?new mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_f.exec(e))?cr(t[1],t[2],t[3],t[4]):(t=mf.exec(e))?cr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gf.exec(e))?Nl(t[1],t[2]/100,t[3]/100,1):(t=pf.exec(e))?Nl(t[1],t[2]/100,t[3]/100,t[4]):Il.hasOwnProperty(e)?Sl(Il[e]):e==="transparent"?new mt(NaN,NaN,NaN,0):null}function Sl(e){return new mt(e>>16&255,e>>8&255,e&255,1)}function cr(e,t,n,r){return r<=0&&(e=t=n=NaN),new mt(e,t,n,r)}function wf(e){return e instanceof ir||(e=pn(e)),e?(e=e.rgb(),new mt(e.r,e.g,e.b,e.opacity)):new mt}function Si(e,t,n,r){return arguments.length===1?wf(e):new mt(e,t,n,r==null?1:r)}function mt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Qi(mt,Si,wo(ir,{brighter(e){return e=e==null?Rr:Math.pow(Rr,e),new mt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$n:Math.pow($n,e),new mt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mt(mn(this.r),mn(this.g),mn(this.b),Vr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ml,formatHex:Ml,formatHex8:bf,formatRgb:Cl,toString:Cl}));function Ml(){return`#${hn(this.r)}${hn(this.g)}${hn(this.b)}`}function bf(){return`#${hn(this.r)}${hn(this.g)}${hn(this.b)}${hn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cl(){const e=Vr(this.opacity);return`${e===1?"rgb(":"rgba("}${mn(this.r)}, ${mn(this.g)}, ${mn(this.b)}${e===1?")":`, ${e})`}`}function Vr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hn(e){return e=mn(e),(e<16?"0":"")+e.toString(16)}function Nl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new St(e,t,n,r)}function bo(e){if(e instanceof St)return new St(e.h,e.s,e.l,e.opacity);if(e instanceof ir||(e=pn(e)),!e)return new St;if(e instanceof St)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,o=a-i,s=(a+i)/2;return o?(t===a?l=(n-r)/o+(n<r)*6:n===a?l=(r-t)/o+2:l=(t-n)/o+4,o/=s<.5?a+i:2-a-i,l*=60):o=s>0&&s<1?0:l,new St(l,o,s,e.opacity)}function kf(e,t,n,r){return arguments.length===1?bo(e):new St(e,t,n,r==null?1:r)}function St(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Qi(St,kf,wo(ir,{brighter(e){return e=e==null?Rr:Math.pow(Rr,e),new St(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$n:Math.pow($n,e),new St(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new mt(ti(e>=240?e-240:e+120,i,r),ti(e,i,r),ti(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new St(Ll(this.h),hr(this.s),hr(this.l),Vr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vr(this.opacity);return`${e===1?"hsl(":"hsla("}${Ll(this.h)}, ${hr(this.s)*100}%, ${hr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ll(e){return e=(e||0)%360,e<0?e+360:e}function hr(e){return Math.max(0,Math.min(1,e||0))}function ti(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $i=e=>()=>e;function Ef(e,t){return function(n){return e+n*t}}function If(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Af(e){return(e=+e)==1?ko:function(t,n){return n-t?If(t,n,e):$i(isNaN(t)?n:t)}}function ko(e,t){var n=t-e;return n?Ef(e,n):$i(isNaN(e)?t:e)}const Fr=function e(t){var n=Af(t);function r(i,a){var l=n((i=Si(i)).r,(a=Si(a)).r),o=n(i.g,a.g),s=n(i.b,a.b),u=ko(i.opacity,a.opacity);return function(h){return i.r=l(h),i.g=o(h),i.b=s(h),i.opacity=u(h),i+""}}return r.gamma=e,r}(1);function Tf(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Sf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mf(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=Jr(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(o){for(l=0;l<r;++l)a[l]=i[l](o);return a}}function Cf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Nf(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Jr(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Mi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ni=new RegExp(Mi.source,"g");function Lf(e){return function(){return e}}function Df(e){return function(t){return e(t)+""}}function Eo(e,t){var n=Mi.lastIndex=ni.lastIndex=0,r,i,a,l=-1,o=[],s=[];for(e=e+"",t=t+"";(r=Mi.exec(e))&&(i=ni.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[l]?o[l]+=a:o[++l]=a),(r=r[0])===(i=i[0])?o[l]?o[l]+=i:o[++l]=i:(o[++l]=null,s.push({i:l,x:Tt(r,i)})),n=ni.lastIndex;return n<t.length&&(a=t.slice(n),o[l]?o[l]+=a:o[++l]=a),o.length<2?s[0]?Df(s[0].x):Lf(t):(t=s.length,function(u){for(var h=0,c;h<t;++h)o[(c=s[h]).i]=c.x(u);return o.join("")})}function Jr(e,t){var n=typeof t,r;return t==null||n==="boolean"?$i(t):(n==="number"?Tt:n==="string"?(r=pn(t))?(t=r,Fr):Eo:t instanceof pn?Fr:t instanceof Date?Cf:Sf(t)?Tf:Array.isArray(t)?Mf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Nf:Tt)(e,t)}function Of(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Dl=180/Math.PI,Ci={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Io(e,t,n,r,i,a){var l,o,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,s/=o),e*r<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Dl,skewX:Math.atan(s)*Dl,scaleX:l,scaleY:o}}var dr;function Rf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ci:Io(t.a,t.b,t.c,t.d,t.e,t.f)}function Vf(e){return e==null||(dr||(dr=document.createElementNS("http://www.w3.org/2000/svg","g")),dr.setAttribute("transform",e),!(e=dr.transform.baseVal.consolidate()))?Ci:(e=e.matrix,Io(e.a,e.b,e.c,e.d,e.e,e.f))}function Ao(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,c,d,_,v){if(u!==c||h!==d){var k=_.push("translate(",null,t,null,n);v.push({i:k-4,x:Tt(u,c)},{i:k-2,x:Tt(h,d)})}else(c||d)&&_.push("translate("+c+t+d+n)}function l(u,h,c,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Tt(u,h)})):h&&c.push(i(c)+"rotate("+h+r)}function o(u,h,c,d){u!==h?d.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Tt(u,h)}):h&&c.push(i(c)+"skewX("+h+r)}function s(u,h,c,d,_,v){if(u!==c||h!==d){var k=_.push(i(_)+"scale(",null,",",null,")");v.push({i:k-4,x:Tt(u,c)},{i:k-2,x:Tt(h,d)})}else(c!==1||d!==1)&&_.push(i(_)+"scale("+c+","+d+")")}return function(u,h){var c=[],d=[];return u=e(u),h=e(h),a(u.translateX,u.translateY,h.translateX,h.translateY,c,d),l(u.rotate,h.rotate,c,d),o(u.skewX,h.skewX,c,d),s(u.scaleX,u.scaleY,h.scaleX,h.scaleY,c,d),u=h=null,function(_){for(var v=-1,k=d.length,y;++v<k;)c[(y=d[v]).i]=y.x(_);return c.join("")}}}var Ff=Ao(Rf,"px, ","px)","deg)"),Hf=Ao(Vf,", ",")",")"),Hn=0,qn=0,Yn=0,To=1e3,Hr,Zn,Br=0,yn=0,Qr=0,tr=typeof performance=="object"&&performance.now?performance:Date,So=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function el(){return yn||(So(Bf),yn=tr.now()+Qr)}function Bf(){yn=0}function Pr(){this._call=this._time=this._next=null}Pr.prototype=Mo.prototype={constructor:Pr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?el():+n)+(t==null?0:+t),!this._next&&Zn!==this&&(Zn?Zn._next=this:Hr=this,Zn=this),this._call=e,this._time=n,Ni()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ni())}};function Mo(e,t,n){var r=new Pr;return r.restart(e,t,n),r}function Pf(){el(),++Hn;for(var e=Hr,t;e;)(t=yn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hn}function Ol(){yn=(Br=tr.now())+Qr,Hn=qn=0;try{Pf()}finally{Hn=0,Uf(),yn=0}}function Gf(){var e=tr.now(),t=e-Br;t>To&&(Qr-=t,Br=e)}function Uf(){for(var e,t=Hr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Hr=n);Zn=e,Ni(r)}function Ni(e){if(!Hn){qn&&(qn=clearTimeout(qn));var t=e-yn;t>24?(e<1/0&&(qn=setTimeout(Ol,e-tr.now()-Qr)),Yn&&(Yn=clearInterval(Yn))):(Yn||(Br=tr.now(),Yn=setInterval(Gf,To)),Hn=1,So(Ol))}}function Rl(e,t,n){var r=new Pr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Yf=Zi("start","end","cancel","interrupt"),zf=[],Co=0,Vl=1,Li=2,Sr=3,Fl=4,Di=5,Mr=6;function $r(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Xf(e,n,{name:t,index:r,group:i,on:Yf,tween:zf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Co})}function tl(e,t){var n=Dt(e,t);if(n.state>Co)throw new Error("too late; already scheduled");return n}function Pt(e,t){var n=Dt(e,t);if(n.state>Sr)throw new Error("too late; already running");return n}function Dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Mo(a,0,n.time);function a(u){n.state=Vl,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var h,c,d,_;if(n.state!==Vl)return s();for(h in r)if(_=r[h],_.name===n.name){if(_.state===Sr)return Rl(l);_.state===Fl?(_.state=Mr,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[h]):+h<t&&(_.state=Mr,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[h])}if(Rl(function(){n.state===Sr&&(n.state=Fl,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Li,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Li){for(n.state=Sr,i=new Array(d=n.tween.length),h=0,c=-1;h<d;++h)(_=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=_);i.length=c+1}}function o(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Di,1),c=-1,d=i.length;++c<d;)i[c].call(e,h);n.state===Di&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Mr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Oi(e,t){var n=e.__transition,r,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>Li&&r.state<Di,r.state=Mr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function Wf(e){return this.each(function(){Oi(this,e)})}function Kf(e,t){var n,r;return function(){var i=Pt(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,o=r.length;l<o;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function xf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Pt(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var o={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=o;break}s===u&&i.push(o)}a.tween=i}}function qf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Dt(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?Kf:xf)(n,e,t))}function nl(e,t,n){var r=e._id;return e.each(function(){var i=Pt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Dt(i,r).value[t]}}function No(e,t){var n;return(typeof t=="number"?Tt:t instanceof pn?Fr:(n=pn(t))?(t=n,Fr):Eo)(e,t)}function Zf(e){return function(){this.removeAttribute(e)}}function jf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Jf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function Qf(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function $f(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function ec(e,t,n){var r,i,a;return function(){var l,o=n(this),s;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=o+"",l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o)))}}function tc(e,t){var n=jr(e),r=n==="transform"?Hf:No;return this.attrTween(e,typeof t=="function"?(n.local?ec:$f)(n,r,nl(this,"attr."+e,t)):t==null?(n.local?jf:Zf)(n):(n.local?Qf:Jf)(n,r,t))}function nc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ic(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&rc(e,a)),n}return i._value=t,i}function lc(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&nc(e,a)),n}return i._value=t,i}function ac(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=jr(e);return this.tween(n,(r.local?ic:lc)(r,t))}function oc(e,t){return function(){tl(this,e).delay=+t.apply(this,arguments)}}function sc(e,t){return t=+t,function(){tl(this,e).delay=t}}function uc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oc:sc)(t,e)):Dt(this.node(),t).delay}function fc(e,t){return function(){Pt(this,e).duration=+t.apply(this,arguments)}}function cc(e,t){return t=+t,function(){Pt(this,e).duration=t}}function hc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fc:cc)(t,e)):Dt(this.node(),t).duration}function dc(e,t){if(typeof t!="function")throw new Error;return function(){Pt(this,e).ease=t}}function _c(e){var t=this._id;return arguments.length?this.each(dc(t,e)):Dt(this.node(),t).ease}function mc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pt(this,e).ease=n}}function gc(e){if(typeof e!="function")throw new Error;return this.each(mc(this._id,e))}function pc(e){typeof e!="function"&&(e=uo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,o=r[i]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&o.push(s);return new Jt(r,this._parents,this._name,this._id)}function yc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),o=0;o<a;++o)for(var s=t[o],u=n[o],h=s.length,c=l[o]=new Array(h),d,_=0;_<h;++_)(d=s[_]||u[_])&&(c[_]=d);for(;o<r;++o)l[o]=t[o];return new Jt(l,this._parents,this._name,this._id)}function vc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function wc(e,t,n){var r,i,a=vc(t)?tl:Pt;return function(){var l=a(this,e),o=l.on;o!==r&&(i=(r=o).copy()).on(t,n),l.on=i}}function bc(e,t){var n=this._id;return arguments.length<2?Dt(this.node(),n).on.on(e):this.each(wc(n,e,t))}function kc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ec(){return this.on("end.remove",kc(this._id))}function Ic(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ji(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var o=r[l],s=o.length,u=a[l]=new Array(s),h,c,d=0;d<s;++d)(h=o[d])&&(c=e.call(h,h.__data__,d,o))&&("__data__"in h&&(c.__data__=h.__data__),u[d]=c,$r(u[d],t,n,d,u,Dt(h,n)));return new Jt(a,this._parents,t,n)}function Ac(e){var t=this._name,n=this._id;typeof e!="function"&&(e=so(e));for(var r=this._groups,i=r.length,a=[],l=[],o=0;o<i;++o)for(var s=r[o],u=s.length,h,c=0;c<u;++c)if(h=s[c]){for(var d=e.call(h,h.__data__,c,s),_,v=Dt(h,n),k=0,y=d.length;k<y;++k)(_=d[k])&&$r(_,t,n,k,d,v);a.push(d),l.push(h)}return new Jt(a,l,t,n)}var Tc=rr.prototype.constructor;function Sc(){return new Tc(this._groups,this._parents)}function Mc(e,t){var n,r,i;return function(){var a=Fn(this,e),l=(this.style.removeProperty(e),Fn(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function Lo(e){return function(){this.style.removeProperty(e)}}function Cc(e,t,n){var r,i=n+"",a;return function(){var l=Fn(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function Nc(e,t,n){var r,i,a;return function(){var l=Fn(this,e),o=n(this),s=o+"";return o==null&&(s=o=(this.style.removeProperty(e),Fn(this,e))),l===s?null:l===r&&s===i?a:(i=s,a=t(r=l,o))}}function Lc(e,t){var n,r,i,a="style."+t,l="end."+a,o;return function(){var s=Pt(this,e),u=s.on,h=s.value[a]==null?o||(o=Lo(t)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(l,i=h),s.on=r}}function Dc(e,t,n){var r=(e+="")=="transform"?Ff:No;return t==null?this.styleTween(e,Mc(e,r)).on("end.style."+e,Lo(e)):typeof t=="function"?this.styleTween(e,Nc(e,r,nl(this,"style."+e,t))).each(Lc(this._id,e)):this.styleTween(e,Cc(e,r,t),n).on("end.style."+e,null)}function Oc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Rc(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&Oc(e,l,n)),r}return a._value=t,a}function Vc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Rc(e,t,n==null?"":n))}function Fc(e){return function(){this.textContent=e}}function Hc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Bc(e){return this.tween("text",typeof e=="function"?Hc(nl(this,"text",e)):Fc(e==null?"":e+""))}function Pc(e){return function(t){this.textContent=e.call(this,t)}}function Gc(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Pc(i)),t}return r._value=e,r}function Uc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gc(e))}function Yc(){for(var e=this._name,t=this._id,n=Do(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)if(s=l[u]){var h=Dt(s,t);$r(s,e,n,u,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Jt(r,this._parents,e,n)}function zc(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var o={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var u=Pt(this,r),h=u.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(s)),u.on=t}),i===0&&a()})}var Xc=0;function Jt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Do(){return++Xc}var Kt=rr.prototype;Jt.prototype={constructor:Jt,select:Ic,selectAll:Ac,selectChild:Kt.selectChild,selectChildren:Kt.selectChildren,filter:pc,merge:yc,selection:Sc,transition:Yc,call:Kt.call,nodes:Kt.nodes,node:Kt.node,size:Kt.size,empty:Kt.empty,each:Kt.each,on:bc,attr:tc,attrTween:ac,style:Dc,styleTween:Vc,text:Bc,textTween:Uc,remove:Ec,tween:qf,delay:uc,duration:hc,ease:_c,easeVarying:gc,end:zc,[Symbol.iterator]:Kt[Symbol.iterator]};function Wc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Kc={time:null,delay:0,duration:250,ease:Wc};function xc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function qc(e){var t,n;e instanceof Jt?(t=e._id,e=e._name):(t=Do(),(n=Kc).time=el(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],o=l.length,s,u=0;u<o;++u)(s=l[u])&&$r(s,e,t,u,l,n||xc(s,t));return new Jt(r,this._parents,e,t)}rr.prototype.interrupt=Wf;rr.prototype.transition=qc;const ri=e=>()=>e;function Zc(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function jc(e){e.stopImmediatePropagation()}function ii(e){e.preventDefault(),e.stopImmediatePropagation()}var Hl={name:"drag"},li={name:"space"},An={name:"handle"},Tn={name:"center"};const{abs:Bl,max:ot,min:st}=Math;function Pl(e){return[+e[0],+e[1]]}function Gl(e){return[Pl(e[0]),Pl(e[1])]}var Cr={name:"x",handles:["w","e"].map(Gr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ai={name:"y",handles:["n","s"].map(Gr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},xt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Yl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Jc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Qc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Gr(e){return{type:e}}function $c(e){return!e.ctrlKey&&!e.button}function eh(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function th(){return navigator.maxTouchPoints||"ontouchstart"in this}function oi(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function nh(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function rh(){return ih(Cr)}function ih(e){var t=eh,n=$c,r=th,i=!0,a=Zi("start","brush","end"),l=6,o;function s(y){var w=y.property("__brush",k).selectAll(".overlay").data([Gr("overlay")]);w.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",xt.overlay).merge(w).each(function(){var A=oi(this).extent;Me(this).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1])}),y.selectAll(".selection").data([Gr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",xt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var I=y.selectAll(".handle").data(e.handles,function(A){return A.type});I.exit().remove(),I.enter().append("rect").attr("class",function(A){return"handle handle--"+A.type}).attr("cursor",function(A){return xt[A.type]}),y.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(y,w,I){y.tween?y.on("start.brush",function(A){h(this,arguments).beforestart().start(A)}).on("interrupt.brush end.brush",function(A){h(this,arguments).end(A)}).tween("brush",function(){var A=this,m=A.__brush,b=h(A,arguments),V=m.selection,W=e.input(typeof w=="function"?w.apply(this,arguments):w,m.extent),P=Jr(V,W);function O(C){m.selection=C===1&&W===null?null:P(C),u.call(A),b.brush()}return V!==null&&W!==null?O:O(1)}):y.each(function(){var A=this,m=arguments,b=A.__brush,V=e.input(typeof w=="function"?w.apply(A,m):w,b.extent),W=h(A,m).beforestart();Oi(A),b.selection=V===null?null:V,u.call(A),W.start(I).brush(I).end(I)})},s.clear=function(y,w){s.move(y,null,w)};function u(){var y=Me(this),w=oi(this).selection;w?(y.selectAll(".selection").style("display",null).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(I){return I.type[I.type.length-1]==="e"?w[1][0]-l/2:w[0][0]-l/2}).attr("y",function(I){return I.type[0]==="s"?w[1][1]-l/2:w[0][1]-l/2}).attr("width",function(I){return I.type==="n"||I.type==="s"?w[1][0]-w[0][0]+l:l}).attr("height",function(I){return I.type==="e"||I.type==="w"?w[1][1]-w[0][1]+l:l})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(y,w,I){var A=y.__brush.emitter;return A&&(!I||!A.clean)?A:new c(y,w,I)}function c(y,w,I){this.that=y,this.args=w,this.state=y.__brush,this.active=0,this.clean=I}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,w){return this.starting?(this.starting=!1,this.emit("start",y,w)):this.emit("brush",y),this},brush:function(y,w){return this.emit("brush",y,w),this},end:function(y,w){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,w)),this},emit:function(y,w,I){var A=Me(this.that).datum();a.call(y,this.that,new Zc(y,{sourceEvent:w,target:s,selection:e.output(this.state.selection),mode:I,dispatch:a}),A)}};function d(y){if(o&&!y.touches||!n.apply(this,arguments))return;var w=this,I=y.target.__data__.type,A=(i&&y.metaKey?I="overlay":I)==="selection"?Hl:i&&y.altKey?Tn:An,m=e===ai?null:Jc[I],b=e===Cr?null:Qc[I],V=oi(w),W=V.extent,P=V.selection,O=W[0][0],C,T,U=W[0][1],B,z,S=W[1][0],M,ae,j=W[1][1],re,he,F=0,Y=0,le,ie=m&&b&&i&&y.shiftKey,we,Ee,_e=Array.from(y.touches||[y],fe=>{const Ce=fe.identifier;return fe=El(fe,w),fe.point0=fe.slice(),fe.identifier=Ce,fe});Oi(w);var D=h(w,arguments,!0).beforestart();if(I==="overlay"){P&&(le=!0);const fe=[_e[0],_e[1]||_e[0]];V.selection=P=[[C=e===ai?O:st(fe[0][0],fe[1][0]),B=e===Cr?U:st(fe[0][1],fe[1][1])],[M=e===ai?S:ot(fe[0][0],fe[1][0]),re=e===Cr?j:ot(fe[0][1],fe[1][1])]],_e.length>1&&se(y)}else C=P[0][0],B=P[0][1],M=P[1][0],re=P[1][1];T=C,z=B,ae=M,he=re;var J=Me(w).attr("pointer-events","none"),N=J.selectAll(".overlay").attr("cursor",xt[I]);if(y.touches)D.moved=ce,D.ended=me;else{var oe=Me(y.view).on("mousemove.brush",ce,!0).on("mouseup.brush",me,!0);i&&oe.on("keydown.brush",Ve,!0).on("keyup.brush",Pe,!0),uf(y.view)}u.call(w),D.start(y,A.name);function ce(fe){for(const Ce of fe.changedTouches||[fe])for(const Ie of _e)Ie.identifier===Ce.identifier&&(Ie.cur=El(Ce,w));if(ie&&!we&&!Ee&&_e.length===1){const Ce=_e[0];Bl(Ce.cur[0]-Ce[0])>Bl(Ce.cur[1]-Ce[1])?Ee=!0:we=!0}for(const Ce of _e)Ce.cur&&(Ce[0]=Ce.cur[0],Ce[1]=Ce.cur[1]);le=!0,ii(fe),se(fe)}function se(fe){const Ce=_e[0],Ie=Ce.point0;var G;switch(F=Ce[0]-Ie[0],Y=Ce[1]-Ie[1],A){case li:case Hl:{m&&(F=ot(O-C,st(S-M,F)),T=C+F,ae=M+F),b&&(Y=ot(U-B,st(j-re,Y)),z=B+Y,he=re+Y);break}case An:{_e[1]?(m&&(T=ot(O,st(S,_e[0][0])),ae=ot(O,st(S,_e[1][0])),m=1),b&&(z=ot(U,st(j,_e[0][1])),he=ot(U,st(j,_e[1][1])),b=1)):(m<0?(F=ot(O-C,st(S-C,F)),T=C+F,ae=M):m>0&&(F=ot(O-M,st(S-M,F)),T=C,ae=M+F),b<0?(Y=ot(U-B,st(j-B,Y)),z=B+Y,he=re):b>0&&(Y=ot(U-re,st(j-re,Y)),z=B,he=re+Y));break}case Tn:{m&&(T=ot(O,st(S,C-F*m)),ae=ot(O,st(S,M+F*m))),b&&(z=ot(U,st(j,B-Y*b)),he=ot(U,st(j,re+Y*b)));break}}ae<T&&(m*=-1,G=C,C=M,M=G,G=T,T=ae,ae=G,I in Ul&&N.attr("cursor",xt[I=Ul[I]])),he<z&&(b*=-1,G=B,B=re,re=G,G=z,z=he,he=G,I in Yl&&N.attr("cursor",xt[I=Yl[I]])),V.selection&&(P=V.selection),we&&(T=P[0][0],ae=P[1][0]),Ee&&(z=P[0][1],he=P[1][1]),(P[0][0]!==T||P[0][1]!==z||P[1][0]!==ae||P[1][1]!==he)&&(V.selection=[[T,z],[ae,he]],u.call(w),D.brush(fe,A.name))}function me(fe){if(jc(fe),fe.touches){if(fe.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else ff(fe.view,le),oe.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);J.attr("pointer-events","all"),N.attr("cursor",xt.overlay),V.selection&&(P=V.selection),nh(P)&&(V.selection=null,u.call(w)),D.end(fe,A.name)}function Ve(fe){switch(fe.keyCode){case 16:{ie=m&&b;break}case 18:{A===An&&(m&&(M=ae-F*m,C=T+F*m),b&&(re=he-Y*b,B=z+Y*b),A=Tn,se(fe));break}case 32:{(A===An||A===Tn)&&(m<0?M=ae-F:m>0&&(C=T-F),b<0?re=he-Y:b>0&&(B=z-Y),A=li,N.attr("cursor",xt.selection),se(fe));break}default:return}ii(fe)}function Pe(fe){switch(fe.keyCode){case 16:{ie&&(we=Ee=ie=!1,se(fe));break}case 18:{A===Tn&&(m<0?M=ae:m>0&&(C=T),b<0?re=he:b>0&&(B=z),A=An,se(fe));break}case 32:{A===li&&(fe.altKey?(m&&(M=ae-F*m,C=T+F*m),b&&(re=he-Y*b,B=z+Y*b),A=Tn):(m<0?M=ae:m>0&&(C=T),b<0?re=he:b>0&&(B=z),A=An),N.attr("cursor",xt[I]),se(fe));break}default:return}ii(fe)}}function _(y){h(this,arguments).moved(y)}function v(y){h(this,arguments).ended(y)}function k(){var y=this.__brush||{selection:null};return y.extent=Gl(t.apply(this,arguments)),y.dim=e,y}return s.extent=function(y){return arguments.length?(t=typeof y=="function"?y:ri(Gl(y)),s):t},s.filter=function(y){return arguments.length?(n=typeof y=="function"?y:ri(!!y),s):n},s.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:ri(!!y),s):r},s.handleSize=function(y){return arguments.length?(l=+y,s):l},s.keyModifiers=function(y){return arguments.length?(i=!!y,s):i},s.on=function(){var y=a.on.apply(a,arguments);return y===a?s:y},s}const Ri=Math.PI,Vi=2*Ri,cn=1e-6,lh=Vi-cn;function Fi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Hi(){return new Fi}Fi.prototype=Hi.prototype={constructor:Fi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,l=this._y1,o=n-e,s=r-t,u=a-e,h=l-t,c=u*u+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(c>cn)if(!(Math.abs(h*o-s*u)>cn)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-a,_=r-l,v=o*o+s*s,k=d*d+_*_,y=Math.sqrt(v),w=Math.sqrt(c),I=i*Math.tan((Ri-Math.acos((v+c-k)/(2*y*w)))/2),A=I/w,m=I/y;Math.abs(A-1)>cn&&(this._+="L"+(e+A*u)+","+(t+A*h)),this._+="A"+i+","+i+",0,0,"+ +(h*d>u*_)+","+(this._x1=e+m*o)+","+(this._y1=t+m*s)}},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n,a=!!a;var l=n*Math.cos(r),o=n*Math.sin(r),s=e+l,u=t+o,h=1^a,c=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>cn||Math.abs(this._y1-u)>cn)&&(this._+="L"+s+","+u),n&&(c<0&&(c=c%Vi+Vi),c>lh?this._+="A"+n+","+n+",0,1,"+h+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+h+","+(this._x1=s)+","+(this._y1=u):c>cn&&(this._+="A"+n+","+n+",0,"+ +(c>=Ri)+","+h+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var zl={},si={},ui=34,zn=10,fi=13;function Oo(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function ah(e,t){var n=Oo(e);return function(r,i){return t(n(r),i,e)}}function Xl(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function dt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function oh(e){return e<0?"-"+dt(-e,6):e>9999?"+"+dt(e,6):dt(e,4)}function sh(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":oh(e.getUTCFullYear())+"-"+dt(e.getUTCMonth()+1,2)+"-"+dt(e.getUTCDate(),2)+(i?"T"+dt(t,2)+":"+dt(n,2)+":"+dt(r,2)+"."+dt(i,3)+"Z":r?"T"+dt(t,2)+":"+dt(n,2)+":"+dt(r,2)+"Z":n||t?"T"+dt(t,2)+":"+dt(n,2)+"Z":"")}function uh(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,d){var _,v,k=i(c,function(y,w){if(_)return _(y,w-1);v=y,_=d?ah(y,d):Oo(y)});return k.columns=v||[],k}function i(c,d){var _=[],v=c.length,k=0,y=0,w,I=v<=0,A=!1;c.charCodeAt(v-1)===zn&&--v,c.charCodeAt(v-1)===fi&&--v;function m(){if(I)return si;if(A)return A=!1,zl;var V,W=k,P;if(c.charCodeAt(W)===ui){for(;k++<v&&c.charCodeAt(k)!==ui||c.charCodeAt(++k)===ui;);return(V=k)>=v?I=!0:(P=c.charCodeAt(k++))===zn?A=!0:P===fi&&(A=!0,c.charCodeAt(k)===zn&&++k),c.slice(W+1,V-1).replace(/""/g,'"')}for(;k<v;){if((P=c.charCodeAt(V=k++))===zn)A=!0;else if(P===fi)A=!0,c.charCodeAt(k)===zn&&++k;else if(P!==n)continue;return c.slice(W,V)}return I=!0,c.slice(W,v)}for(;(w=m())!==si;){for(var b=[];w!==zl&&w!==si;)b.push(w),w=m();d&&(b=d(b,y++))==null||_.push(b)}return _}function a(c,d){return c.map(function(_){return d.map(function(v){return h(_[v])}).join(e)})}function l(c,d){return d==null&&(d=Xl(c)),[d.map(h).join(e)].concat(a(c,d)).join(`
`)}function o(c,d){return d==null&&(d=Xl(c)),a(c,d).join(`
`)}function s(c){return c.map(u).join(`
`)}function u(c){return c.map(h).join(e)}function h(c){return c==null?"":c instanceof Date?sh(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:l,formatBody:o,formatRows:s,formatRow:u,formatValue:h}}var fh=uh(","),ch=fh.parse;function hh(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function dh(e,t){return fetch(e,t).then(hh)}function _h(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),dh(t,n).then(function(i){return e(i,r)})}}var _r=_h(ch);function mh(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ur(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Bn(e){return e=Ur(Math.abs(e)),e?e[1]:NaN}function gh(e,t){return function(n,r){for(var i=n.length,a=[],l=0,o=e[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),a.push(n.substring(i-=o,i+o)),!((s+=o+1)>r));)o=e[l=(l+1)%e.length];return a.reverse().join(t)}}function ph(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var yh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yr(e){if(!(t=yh.exec(e)))throw new Error("invalid format: "+e);var t;return new rl({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Yr.prototype=rl.prototype;function rl(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vh(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Ro;function wh(e,t){var n=Ur(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Ro=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ur(e,Math.max(0,t+a-1))[0]}function Wl(e,t){var n=Ur(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Kl={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mh,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Wl(e*100,t),r:Wl,s:wh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xl(e){return e}var ql=Array.prototype.map,Zl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function bh(e){var t=e.grouping===void 0||e.thousands===void 0?xl:gh(ql.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?xl:ph(ql.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(c){c=Yr(c);var d=c.fill,_=c.align,v=c.sign,k=c.symbol,y=c.zero,w=c.width,I=c.comma,A=c.precision,m=c.trim,b=c.type;b==="n"?(I=!0,b="g"):Kl[b]||(A===void 0&&(A=12),m=!0,b="g"),(y||d==="0"&&_==="=")&&(y=!0,d="0",_="=");var V=k==="$"?n:k==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",W=k==="$"?r:/[%p]/.test(b)?l:"",P=Kl[b],O=/[defgprs%]/.test(b);A=A===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function C(T){var U=V,B=W,z,S,M;if(b==="c")B=P(T)+B,T="";else{T=+T;var ae=T<0||1/T<0;if(T=isNaN(T)?s:P(Math.abs(T),A),m&&(T=vh(T)),ae&&+T==0&&v!=="+"&&(ae=!1),U=(ae?v==="("?v:o:v==="-"||v==="("?"":v)+U,B=(b==="s"?Zl[8+Ro/3]:"")+B+(ae&&v==="("?")":""),O){for(z=-1,S=T.length;++z<S;)if(M=T.charCodeAt(z),48>M||M>57){B=(M===46?i+T.slice(z+1):T.slice(z))+B,T=T.slice(0,z);break}}}I&&!y&&(T=t(T,1/0));var j=U.length+T.length+B.length,re=j<w?new Array(w-j+1).join(d):"";switch(I&&y&&(T=t(re+T,re.length?w-B.length:1/0),re=""),_){case"<":T=U+T+B+re;break;case"=":T=U+re+T+B;break;case"^":T=re.slice(0,j=re.length>>1)+U+T+B+re.slice(j);break;default:T=re+U+T+B;break}return a(T)}return C.toString=function(){return c+""},C}function h(c,d){var _=u((c=Yr(c),c.type="f",c)),v=Math.max(-8,Math.min(8,Math.floor(Bn(d)/3)))*3,k=Math.pow(10,-v),y=Zl[8+v/3];return function(w){return _(k*w)+y}}return{format:u,formatPrefix:h}}var mr,rn,Vo;kh({thousands:",",grouping:[3],currency:["$",""]});function kh(e){return mr=bh(e),rn=mr.format,Vo=mr.formatPrefix,mr}function Eh(e){return Math.max(0,-Bn(Math.abs(e)))}function Ih(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bn(t)/3)))*3-Bn(Math.abs(e)))}function Ah(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bn(t)-Bn(e))+1}function Th(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Sh(){return this.eachAfter(Th)}function Mh(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Ch(e,t){for(var n=this,r=[n],i,a,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function Nh(e,t){for(var n=this,r=[n],i=[],a,l,o,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(l=0,o=a.length;l<o;++l)r.push(a[l]);for(;n=i.pop();)e.call(t,n,++s,this);return this}function Lh(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Dh(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Oh(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Rh(e){for(var t=this,n=Vh(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Vh(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Fh(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Hh(){return Array.from(this)}function Bh(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ph(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Gh(){var e=this,t,n=[e],r,i,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Fo(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=zh)):t===void 0&&(t=Yh);for(var n=new nr(e),r,i=[n],a,l,o,s;r=i.pop();)if((l=t(r.data))&&(s=(l=Array.from(l)).length))for(r.children=l,o=s-1;o>=0;--o)i.push(a=l[o]=new nr(l[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(Ho)}function Uh(){return Fo(this).eachBefore(Xh)}function Yh(e){return e.children}function zh(e){return Array.isArray(e)?e[1]:null}function Xh(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Ho(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function nr(e){this.data=e,this.depth=this.height=0,this.parent=null}nr.prototype=Fo.prototype={constructor:nr,count:Sh,each:Mh,eachAfter:Nh,eachBefore:Ch,find:Lh,sum:Dh,sort:Oh,path:Rh,ancestors:Fh,descendants:Hh,leaves:Bh,links:Ph,copy:Uh,[Symbol.iterator]:Gh};function ci(e){return e==null?null:Bo(e)}function Bo(e){if(typeof e!="function")throw new Error;return e}function Xn(){return 0}function Wn(e){return function(){return e}}function Wh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Kh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(r-t)/e.value;++o<s;)l=a[o],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*u}var xh={depth:-1},jl={},hi={};function qh(e){return e.id}function Zh(e){return e.parentId}function jh(){var e=qh,t=Zh,n;function r(i){var a=Array.from(i),l=e,o=t,s,u,h,c,d,_,v,k,y=new Map;if(n!=null){const w=a.map((m,b)=>Jh(n(m,b,i))),I=w.map(Jl),A=new Set(w).add("");for(const m of I)A.has(m)||(A.add(m),w.push(m),I.push(Jl(m)),a.push(hi));l=(m,b)=>w[b],o=(m,b)=>I[b]}for(h=0,s=a.length;h<s;++h)u=a[h],_=a[h]=new nr(u),(v=l(u,h,i))!=null&&(v+="")&&(k=_.id=v,y.set(k,y.has(k)?jl:_)),(v=o(u,h,i))!=null&&(v+="")&&(_.parent=v);for(h=0;h<s;++h)if(_=a[h],v=_.parent){if(d=y.get(v),!d)throw new Error("missing: "+v);if(d===jl)throw new Error("ambiguous: "+v);d.children?d.children.push(_):d.children=[_],_.parent=d}else{if(c)throw new Error("multiple roots");c=_}if(!c)throw new Error("no root");if(n!=null){for(;c.data===hi&&c.children.length===1;)c=c.children[0],--s;for(let w=a.length-1;w>=0&&(_=a[w],_.data===hi);--w)_.data=null}if(c.parent=xh,c.eachBefore(function(w){w.depth=w.parent.depth+1,--s}).eachBefore(Ho),c.parent=null,s>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=ci(i),r):e},r.parentId=function(i){return arguments.length?(t=ci(i),r):t},r.path=function(i){return arguments.length?(n=ci(i),r):n},r}function Jh(e){e=`${e}`;let t=e.length;return Bi(e,t-1)&&!Bi(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Jl(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Bi(e,t););return e.slice(0,t)}function Bi(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Qh(e,t,n,r,i){for(var a=e.children,l,o=-1,s=a.length,u=e.value&&(i-n)/e.value;++o<s;)l=a[o],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*u}var $h=(1+Math.sqrt(5))/2;function e0(e,t,n,r,i,a){for(var l=[],o=t.children,s,u,h=0,c=0,d=o.length,_,v,k=t.value,y,w,I,A,m,b,V;h<d;){_=i-n,v=a-r;do y=o[c++].value;while(!y&&c<d);for(w=I=y,b=Math.max(v/_,_/v)/(k*e),V=y*y*b,m=Math.max(I/V,V/w);c<d;++c){if(y+=u=o[c].value,u<w&&(w=u),u>I&&(I=u),V=y*y*b,A=Math.max(I/V,V/w),A>m){y-=u;break}m=A}l.push(s={value:y,dice:_<v,children:o.slice(h,c)}),s.dice?Kh(s,n,r,i,k?r+=v*y/k:a):Qh(s,n,r,k?n+=_*y/k:i,a),k-=y,h=c}return l}const t0=function e(t){function n(r,i,a,l,o){e0(t,r,i,a,l,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}($h);function n0(){var e=t0,t=!1,n=1,r=1,i=[0],a=Xn,l=Xn,o=Xn,s=Xn,u=Xn;function h(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(c),i=[0],t&&d.eachBefore(Wh),d}function c(d){var _=i[d.depth],v=d.x0+_,k=d.y0+_,y=d.x1-_,w=d.y1-_;y<v&&(v=y=(v+y)/2),w<k&&(k=w=(k+w)/2),d.x0=v,d.y0=k,d.x1=y,d.y1=w,d.children&&(_=i[d.depth+1]=a(d)/2,v+=u(d)-_,k+=l(d)-_,y-=o(d)-_,w-=s(d)-_,y<v&&(v=y=(v+y)/2),w<k&&(k=w=(k+w)/2),e(d,v,k,y,w))}return h.round=function(d){return arguments.length?(t=!!d,h):t},h.size=function(d){return arguments.length?(n=+d[0],r=+d[1],h):[n,r]},h.tile=function(d){return arguments.length?(e=Bo(d),h):e},h.padding=function(d){return arguments.length?h.paddingInner(d).paddingOuter(d):h.paddingInner()},h.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:Wn(+d),h):a},h.paddingOuter=function(d){return arguments.length?h.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):h.paddingTop()},h.paddingTop=function(d){return arguments.length?(l=typeof d=="function"?d:Wn(+d),h):l},h.paddingRight=function(d){return arguments.length?(o=typeof d=="function"?d:Wn(+d),h):o},h.paddingBottom=function(d){return arguments.length?(s=typeof d=="function"?d:Wn(+d),h):s},h.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Wn(+d),h):u},h}function r0(e,t,n,r,i){var a=e.children,l,o=a.length,s,u=new Array(o+1);for(u[0]=s=l=0;l<o;++l)u[l+1]=s+=a[l].value;h(0,o,e.value,t,n,r,i);function h(c,d,_,v,k,y,w){if(c>=d-1){var I=a[c];I.x0=v,I.y0=k,I.x1=y,I.y1=w;return}for(var A=u[c],m=_/2+A,b=c+1,V=d-1;b<V;){var W=b+V>>>1;u[W]<m?b=W+1:V=W}m-u[b-1]<u[b]-m&&c+1<b&&--b;var P=u[b]-A,O=_-P;if(y-v>w-k){var C=_?(v*O+y*P)/_:y;h(c,b,P,v,k,C,w),h(b,d,O,C,k,y,w)}else{var T=_?(k*O+w*P)/_:w;h(c,b,P,v,k,y,T),h(b,d,O,v,T,y,w)}}}function Po(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Ql=Symbol("implicit");function Go(){var e=new pi,t=[],n=[],r=Ql;function i(a){let l=e.get(a);if(l===void 0){if(r!==Ql)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new pi;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Go(t,n).unknown(r)},Po.apply(i,arguments),i}function i0(e){return function(){return e}}function l0(e){return+e}var $l=[0,1];function Dn(e){return e}function Pi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:i0(isNaN(t)?NaN:.5)}function a0(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function o0(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=Pi(i,r),a=n(l,a)):(r=Pi(r,i),a=n(a,l)),function(o){return a(r(o))}}function s0(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Pi(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(o){var s=cs(e,o,1,r)-1;return a[s](i[s](o))}}function u0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function f0(){var e=$l,t=$l,n=Jr,r,i,a,l=Dn,o,s,u;function h(){var d=Math.min(e.length,t.length);return l!==Dn&&(l=a0(e[0],e[d-1])),o=d>2?s0:o0,s=u=null,c}function c(d){return d==null||isNaN(d=+d)?a:(s||(s=o(e.map(r),t,n)))(r(l(d)))}return c.invert=function(d){return l(i((u||(u=o(t,e.map(r),Tt)))(d)))},c.domain=function(d){return arguments.length?(e=Array.from(d,l0),h()):e.slice()},c.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},c.rangeRound=function(d){return t=Array.from(d),n=Of,h()},c.clamp=function(d){return arguments.length?(l=d?!0:Dn,h()):l!==Dn},c.interpolate=function(d){return arguments.length?(n=d,h()):n},c.unknown=function(d){return arguments.length?(a=d,c):a},function(d,_){return r=d,i=_,h()}}function c0(){return f0()(Dn,Dn)}function h0(e,t,n,r){var i=ps(e,t,n),a;switch(r=Yr(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Ih(i,l))&&(r.precision=a),Vo(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Ah(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Eh(i))&&(r.precision=a-(r.type==="%")*2);break}}return rn(r)}function d0(e){var t=e.domain;return e.ticks=function(n){var r=t();return gs(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return h0(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],o=r[a],s,u,h=10;for(o<l&&(u=l,l=o,o=u,u=i,i=a,a=u);h-- >0;){if(u=lo(l,o,n),u===s)return r[i]=l,r[a]=o,t(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;s=u}return e},e}function Jn(){var e=c0();return e.copy=function(){return u0(e,Jn())},Po.apply(e,arguments),d0(e)}function _0(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const m0=_0("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function On(e,t,n){this.k=e,this.x=t,this.y=n}On.prototype={constructor:On,scale:function(e){return e===1?this:new On(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new On(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new On(1,0,0);On.prototype;function g0(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function p0(e){let t,n=e[0](e[1],e[2])+"",r;return{c(){t=$("div"),this.h()},l(i){t=ee(i,"DIV",{class:!0});var a=L(t);a.forEach(p),this.h()},h(){f(t,"class",r="item "+e[3]+" svelte-3e0qet")},m(i,a){K(i,t,a),t.innerHTML=n},p(i,[a]){a&7&&n!==(n=i[0](i[1],i[2])+"")&&(t.innerHTML=n),a&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&f(t,"class",r)},i:Be,o:Be,d(i){i&&p(t)}}}function y0(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:a=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:s=void 0}=t,{filterText:u=""}=t,h="";return e.$$set=c=>{"isActive"in c&&n(4,r=c.isActive),"isFirst"in c&&n(5,i=c.isFirst),"isHover"in c&&n(6,a=c.isHover),"isSelectable"in c&&n(7,l=c.isSelectable),"getOptionLabel"in c&&n(0,o=c.getOptionLabel),"item"in c&&n(1,s=c.item),"filterText"in c&&n(2,u=c.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const c=[];r&&c.push("active"),i&&c.push("first"),a&&c.push("hover"),s.isGroupHeader&&c.push("groupHeader"),s.isGroupItem&&c.push("groupItem"),l||c.push("notSelectable"),n(3,h=c.join(" "))}},[o,s,u,h,r,i,a,l]}class Uo extends Ct{constructor(t){super(),Nt(this,t,y0,p0,Lt,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function ea(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function v0(e){let t,n,r=e[1],i=[];for(let o=0;o<r.length;o+=1)i[o]=ra(ea(e,r,o));const a=o=>Te(i[o],1,1,()=>{i[o]=null});let l=null;return r.length||(l=ta(e)),{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=Se(),l&&l.c()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);t=Se(),l&&l.l(o)},m(o,s){for(let u=0;u<i.length;u+=1)i[u].m(o,s);K(o,t,s),l&&l.m(o,s),n=!0},p(o,s){if(s[0]&114390){r=o[1];let u;for(u=0;u<r.length;u+=1){const h=ea(o,r,u);i[u]?(i[u].p(h,s),ge(i[u],1)):(i[u]=ra(h),i[u].c(),ge(i[u],1),i[u].m(t.parentNode,t))}for(nt(),u=r.length;u<i.length;u+=1)a(u);rt(),!r.length&&l?l.p(o,s):r.length?l&&(l.d(1),l=null):(l=ta(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let s=0;s<r.length;s+=1)ge(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)Te(i[s]);n=!1},d(o){Yi(i,o),o&&p(t),l&&l.d(o)}}}function w0(e){let t,n,r;var i=e[3];function a(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[E0,({item:o,i:s})=>({41:o,42:s}),({item:o,i:s})=>[0,(o?1024:0)|(s?2048:0)]]},$$scope:{ctx:l}}}}return i&&(t=ft(i,a(e))),{c(){t&&Ke(t.$$.fragment),n=Se()},l(l){t&&wt(t.$$.fragment,l),n=Se()},m(l,o){t&&xe(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&2&&(s.items=l[1]),o[0]&256&&(s.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(s.$$scope={dirty:o,ctx:l}),i!==(i=l[3])){if(t){nt();const u=t;Te(u.$$.fragment,1,0,()=>{qe(u,1)}),rt()}i?(t=ft(i,a(l)),Ke(t.$$.fragment),ge(t.$$.fragment,1),xe(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&ge(t.$$.fragment,l),r=!0)},o(l){t&&Te(t.$$.fragment,l),r=!1},d(l){l&&p(n),t&&qe(t,l)}}}function ta(e){let t,n=!e[11]&&na(e);return{c(){n&&n.c(),t=Se()},l(r){n&&n.l(r),t=Se()},m(r,i){n&&n.m(r,i),K(r,t,i)},p(r,i){r[11]?n&&(n.d(1),n=null):n?n.p(r,i):(n=na(r),n.c(),n.m(t.parentNode,t))},d(r){n&&n.d(r),r&&p(t)}}}function na(e){let t,n;return{c(){t=$("div"),n=ye(e[12]),this.h()},l(r){t=ee(r,"DIV",{class:!0});var i=L(t);n=ve(i,e[12]),i.forEach(p),this.h()},h(){f(t,"class","empty svelte-1uyqfml")},m(r,i){K(r,t,i),E(t,n)},p(r,i){i[0]&4096&&We(n,r[12])},d(r){r&&p(t)}}}function b0(e){let t,n,r,i,a,l;var o=e[4];function s(d){return{props:{item:d[41],filterText:d[13],getOptionLabel:d[6],isFirst:Gi(d[42]),isActive:zr(d[41],d[9],d[10]),isHover:Xr(d[2],d[41],d[42],d[1]),isSelectable:vn(d[41])}}}o&&(n=ft(o,s(e)));function u(){return e[29](e[42])}function h(){return e[30](e[42])}function c(...d){return e[31](e[41],e[42],...d)}return{c(){t=$("div"),n&&Ke(n.$$.fragment),r=be(),this.h()},l(d){t=ee(d,"DIV",{class:!0,tabindex:!0});var _=L(t);n&&wt(n.$$.fragment,_),r=ke(_),_.forEach(p),this.h()},h(){f(t,"class","listItem"),f(t,"tabindex","-1")},m(d,_){K(d,t,_),n&&xe(n,t,null),E(t,r),i=!0,a||(l=[x(t,"mouseover",u),x(t,"focus",h),x(t,"click",c)],a=!0)},p(d,_){e=d;const v={};if(_[0]&2&&(v.item=e[41]),_[0]&8192&&(v.filterText=e[13]),_[0]&64&&(v.getOptionLabel=e[6]),_[0]&1538&&(v.isActive=zr(e[41],e[9],e[10])),_[0]&6&&(v.isHover=Xr(e[2],e[41],e[42],e[1])),_[0]&2&&(v.isSelectable=vn(e[41])),o!==(o=e[4])){if(n){nt();const k=n;Te(k.$$.fragment,1,0,()=>{qe(k,1)}),rt()}o?(n=ft(o,s(e)),Ke(n.$$.fragment),ge(n.$$.fragment,1),xe(n,t,r)):n=null}else o&&n.$set(v)},i(d){i||(n&&ge(n.$$.fragment,d),i=!0)},o(d){n&&Te(n.$$.fragment,d),i=!1},d(d){d&&p(t),n&&qe(n),a=!1,gt(l)}}}function k0(e){let t,n=e[7](e[41])+"",r;return{c(){t=$("div"),r=ye(n),this.h()},l(i){t=ee(i,"DIV",{class:!0});var a=L(t);r=ve(a,n),a.forEach(p),this.h()},h(){f(t,"class","listGroupTitle svelte-1uyqfml")},m(i,a){K(i,t,a),E(t,r)},p(i,a){a[0]&130&&n!==(n=i[7](i[41])+"")&&We(r,n)},i:Be,o:Be,d(i){i&&p(t)}}}function ra(e){let t,n,r,i;const a=[k0,b0],l=[];function o(s,u){return s[41].isGroupHeader&&!s[41].isSelectable?0:1}return t=o(e),n=l[t]=a[t](e),{c(){n.c(),r=Se()},l(s){n.l(s),r=Se()},m(s,u){l[t].m(s,u),K(s,r,u),i=!0},p(s,u){let h=t;t=o(s),t===h?l[t].p(s,u):(nt(),Te(l[h],1,1,()=>{l[h]=null}),rt(),n=l[t],n?n.p(s,u):(n=l[t]=a[t](s),n.c()),ge(n,1),n.m(r.parentNode,r))},i(s){i||(ge(n),i=!0)},o(s){Te(n),i=!1},d(s){l[t].d(s),s&&p(r)}}}function E0(e){let t,n,r,i,a;var l=e[4];function o(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:Gi(c[42]),isActive:zr(c[41],c[9],c[10]),isHover:Xr(c[2],c[41],c[42],c[1]),isSelectable:vn(c[41])}}}l&&(n=ft(l,o(e)));function s(){return e[26](e[42])}function u(){return e[27](e[42])}function h(...c){return e[28](e[41],e[42],...c)}return{c(){t=$("div"),n&&Ke(n.$$.fragment),this.h()},l(c){t=ee(c,"DIV",{class:!0});var d=L(t);n&&wt(n.$$.fragment,d),d.forEach(p),this.h()},h(){f(t,"class","listItem")},m(c,d){K(c,t,d),n&&xe(n,t,null),r=!0,i||(a=[x(t,"mouseover",s),x(t,"focus",u),x(t,"click",h)],i=!0)},p(c,d){e=c;const _={};if(d[1]&1024&&(_.item=e[41]),d[0]&8192&&(_.filterText=e[13]),d[0]&64&&(_.getOptionLabel=e[6]),d[1]&2048&&(_.isFirst=Gi(e[42])),d[0]&1536|d[1]&1024&&(_.isActive=zr(e[41],e[9],e[10])),d[0]&6|d[1]&3072&&(_.isHover=Xr(e[2],e[41],e[42],e[1])),d[1]&1024&&(_.isSelectable=vn(e[41])),l!==(l=e[4])){if(n){nt();const v=n;Te(v.$$.fragment,1,0,()=>{qe(v,1)}),rt()}l?(n=ft(l,o(e)),Ke(n.$$.fragment),ge(n.$$.fragment,1),xe(n,t,null)):n=null}else l&&n.$set(_)},i(c){r||(n&&ge(n.$$.fragment,c),r=!0)},o(c){n&&Te(n.$$.fragment,c),r=!1},d(c){c&&p(t),n&&qe(n),i=!1,gt(a)}}}function I0(e){let t,n,r,i,a,l;const o=[w0,v0],s=[];function u(h,c){return h[5]?0:1}return n=u(e),r=s[n]=o[n](e),{c(){t=$("div"),r.c(),this.h()},l(h){t=ee(h,"DIV",{class:!0,style:!0});var c=L(t);r.l(c),c.forEach(p),this.h()},h(){f(t,"class","listContainer svelte-1uyqfml"),f(t,"style",e[14]),$e(t,"virtualList",e[5])},m(h,c){K(h,t,c),s[n].m(t,null),e[32](t),i=!0,a||(l=[x(window,"keydown",e[17]),x(window,"resize",e[18])],a=!0)},p(h,c){let d=n;n=u(h),n===d?s[n].p(h,c):(nt(),Te(s[d],1,1,()=>{s[d]=null}),rt(),r=s[n],r?r.p(h,c):(r=s[n]=o[n](h),r.c()),ge(r,1),r.m(t,null)),(!i||c[0]&16384)&&f(t,"style",h[14]),(!i||c[0]&32)&&$e(t,"virtualList",h[5])},i(h){i||(ge(r),i=!0)},o(h){Te(r),i=!1},d(h){h&&p(t),s[n].d(),e[32](null),a=!1,gt(l)}}}function zr(e,t,n){return t&&t[n]===e[n]}function Gi(e){return e===0}function Xr(e,t,n,r){return vn(t)&&(e===n||r.length===1)}function vn(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function A0(e,t,n){const r=Ui();let{container:i=void 0}=t,{VirtualList:a=null}=t,{Item:l=Uo}=t,{isVirtualList:o=!1}=t,{items:s=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:h=(D,J)=>{if(D)return D.isCreator?`Create "${J}"`:D[u]}}=t,{getGroupHeaderLabel:c=null}=t,{itemHeight:d=40}=t,{hoverItemIndex:_=0}=t,{value:v=void 0}=t,{optionIdentifier:k="value"}=t,{hideEmptyState:y=!1}=t,{noOptionsMessage:w="No options"}=t,{isMulti:I=!1}=t,{activeItemIndex:A=0}=t,{filterText:m=""}=t,{parent:b=null}=t,{listPlacement:V=null}=t,{listAutoWidth:W=null}=t,{listOffset:P=5}=t,O=0,C=!1,T;qr(()=>{if(s.length>0&&!I&&v){const D=s.findIndex(J=>J[k]===v[k]);D&&n(2,_=D)}j("active"),i.addEventListener("scroll",()=>{clearTimeout(O),O=setTimeout(()=>{C=!1},100)},!1)}),to(()=>{s||n(1,s=[]),s!==T&&s.length>0&&n(2,_=0),T=s});function U(D){D.isCreator||r("itemSelected",D)}function B(D){C||n(2,_=D)}function z(D){const{item:J,i:N,event:oe}=D;if(oe.stopPropagation(),v&&!I&&v[k]===J[k])return S();J.isCreator?r("itemCreated",m):vn(J)&&(n(19,A=N),n(2,_=N),U(J))}function S(){r("closeList")}async function M(D){if(o)return;let J=!0;for(;J;)D>0&&_===s.length-1?n(2,_=0):D<0&&_===0?n(2,_=s.length-1):n(2,_=_+D),J=!vn(s[_]);await Er(),j("hover")}function ae(D){switch(D.key){case"Escape":D.preventDefault(),S();break;case"ArrowDown":D.preventDefault(),s.length&&M(1);break;case"ArrowUp":D.preventDefault(),s.length&&M(-1);break;case"Enter":if(D.preventDefault(),s.length===0)break;const J=s[_];if(v&&!I&&v[k]===J[k]){S();break}J.isCreator?r("itemCreated",m):(n(19,A=_),U(s[_]));break;case"Tab":if(D.preventDefault(),s.length===0||v&&v[k]===s[_][k])return S();n(19,A=_),U(s[_]);break}}function j(D){if(o||!i)return;let J;const N=i.querySelector(`.listItem .${D}`);N&&(J=i.getBoundingClientRect().bottom-N.getBoundingClientRect().bottom),n(0,i.scrollTop-=J,i)}let re;function he(){const{height:D,width:J}=b.getBoundingClientRect();n(14,re=""),n(14,re+=`min-width:${J}px;width:${W?"auto":"100%"};`),V==="top"||V==="auto"&&g0(b,i).bottom?n(14,re+=`bottom:${D+P}px;`):n(14,re+=`top:${D+P}px;`)}const F=D=>B(D),Y=D=>B(D),le=(D,J,N)=>z({item:D,i:J,event:N}),ie=D=>B(D),we=D=>B(D),Ee=(D,J,N)=>z({item:D,i:J,event:N});function _e(D){ht[D?"unshift":"push"](()=>{i=D,n(0,i)})}return e.$$set=D=>{"container"in D&&n(0,i=D.container),"VirtualList"in D&&n(3,a=D.VirtualList),"Item"in D&&n(4,l=D.Item),"isVirtualList"in D&&n(5,o=D.isVirtualList),"items"in D&&n(1,s=D.items),"labelIdentifier"in D&&n(20,u=D.labelIdentifier),"getOptionLabel"in D&&n(6,h=D.getOptionLabel),"getGroupHeaderLabel"in D&&n(7,c=D.getGroupHeaderLabel),"itemHeight"in D&&n(8,d=D.itemHeight),"hoverItemIndex"in D&&n(2,_=D.hoverItemIndex),"value"in D&&n(9,v=D.value),"optionIdentifier"in D&&n(10,k=D.optionIdentifier),"hideEmptyState"in D&&n(11,y=D.hideEmptyState),"noOptionsMessage"in D&&n(12,w=D.noOptionsMessage),"isMulti"in D&&n(21,I=D.isMulti),"activeItemIndex"in D&&n(19,A=D.activeItemIndex),"filterText"in D&&n(13,m=D.filterText),"parent"in D&&n(22,b=D.parent),"listPlacement"in D&&n(23,V=D.listPlacement),"listAutoWidth"in D&&n(24,W=D.listAutoWidth),"listOffset"in D&&n(25,P=D.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&b&&i&&he()},[i,s,_,a,l,o,h,c,d,v,k,y,w,m,re,B,z,ae,he,A,u,I,b,V,W,P,F,Y,le,ie,we,Ee,_e]}class T0 extends Ct{constructor(t){super(),Nt(this,t,A0,I0,Lt,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function S0(e){let t,n=e[0](e[1])+"";return{c(){t=$("div"),this.h()},l(r){t=ee(r,"DIV",{class:!0});var i=L(t);i.forEach(p),this.h()},h(){f(t,"class","selection svelte-pu1q1n")},m(r,i){K(r,t,i),t.innerHTML=n},p(r,[i]){i&3&&n!==(n=r[0](r[1])+"")&&(t.innerHTML=n)},i:Be,o:Be,d(r){r&&p(t)}}}function M0(e,t,n){let{getSelectionLabel:r=void 0}=t,{item:i=void 0}=t;return e.$$set=a=>{"getSelectionLabel"in a&&n(0,r=a.getSelectionLabel),"item"in a&&n(1,i=a.item)},[r,i]}class C0 extends Ct{constructor(t){super(),Nt(this,t,M0,S0,Lt,{getSelectionLabel:0,item:1})}}function ia(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function la(e){let t,n,r,i,a;function l(...o){return e[6](e[11],...o)}return{c(){t=$("div"),n=te("svg"),r=te("path"),this.h()},l(o){t=ee(o,"DIV",{class:!0});var s=L(t);n=ne(s,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=L(n);r=ne(u,"path",{d:!0}),L(r).forEach(p),u.forEach(p),s.forEach(p),this.h()},h(){f(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),f(n,"width","100%"),f(n,"height","100%"),f(n,"viewBox","-2 -2 50 50"),f(n,"focusable","false"),f(n,"aria-hidden","true"),f(n,"role","presentation"),f(n,"class","svelte-liu9pa"),f(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){K(o,t,s),E(t,n),E(n,r),i||(a=x(t,"click",l),i=!0)},p(o,s){e=o},d(o){o&&p(t),i=!1,a()}}}function aa(e){let t,n,r=e[4](e[9])+"",i,a,l,o,s,u=!e[2]&&!e[3]&&la(e);function h(...c){return e[7](e[11],...c)}return{c(){t=$("div"),n=$("div"),i=be(),u&&u.c(),a=be(),this.h()},l(c){t=ee(c,"DIV",{class:!0});var d=L(t);n=ee(d,"DIV",{class:!0});var _=L(n);_.forEach(p),i=ke(d),u&&u.l(d),a=ke(d),d.forEach(p),this.h()},h(){f(n,"class","multiSelectItem_label svelte-liu9pa"),f(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(c,d){K(c,t,d),E(t,n),n.innerHTML=r,E(t,i),u&&u.m(t,null),E(t,a),o||(s=x(t,"click",h),o=!0)},p(c,d){e=c,d&17&&r!==(r=e[4](e[9])+"")&&(n.innerHTML=r),!e[2]&&!e[3]?u?u.p(e,d):(u=la(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),d&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&f(t,"class",l)},d(c){c&&p(t),u&&u.d(),o=!1,s()}}}function N0(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=aa(ia(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Se()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=Se()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,[a]){if(a&63){n=i[0];let l;for(l=0;l<n.length;l+=1){const o=ia(i,n,l);r[l]?r[l].p(o,a):(r[l]=aa(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:Be,o:Be,d(i){Yi(r,i),i&&p(t)}}}function L0(e,t,n){const r=Ui();let{value:i=[]}=t,{activeValue:a=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:s=void 0}=t;function u(d,_){_.stopPropagation(),r("multiItemClear",{i:d})}const h=(d,_)=>u(d,_),c=(d,_)=>o?u(d,_):{};return e.$$set=d=>{"value"in d&&n(0,i=d.value),"activeValue"in d&&n(1,a=d.activeValue),"isDisabled"in d&&n(2,l=d.isDisabled),"multiFullItemClearable"in d&&n(3,o=d.multiFullItemClearable),"getSelectionLabel"in d&&n(4,s=d.getSelectionLabel)},[i,a,l,o,s,u,h,c]}class D0 extends Ct{constructor(t){super(),Nt(this,t,L0,N0,Lt,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function oa(e,t,n){const r=e.slice();return r[23]=t[n],r}const O0=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),sa=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function R0(e){let t;return{c(){t=ye("Missing template")},l(n){t=ve(n,"Missing template")},m(n,r){K(n,t,r)},d(n){n&&p(t)}}}function ua(e,t){let n,r,i;const a=t[15].default,l=Wo(a,t,t[14],sa),o=l||R0();return{key:e,first:null,c(){n=$("svelte-virtual-list-row"),o&&o.c(),r=be(),this.h()},l(s){n=ee(s,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=L(n);o&&o.l(u),r=ke(u),u.forEach(p),this.h()},h(){gi(n,"class","svelte-g2cagw"),this.first=n},m(s,u){K(s,n,u),o&&o.m(n,null),E(n,r),i=!0},p(s,u){t=s,l&&l.p&&(!i||u&16418)&&Ko(l,a,t,t[14],i?qo(a,t[14],u,O0):xo(t[14]),sa)},i(s){i||(ge(o,s),i=!0)},o(s){Te(o,s),i=!1},d(s){s&&p(n),o&&o.d(s)}}}function V0(e){let t,n,r=[],i=new Map,a,l,o,s,u=e[5];const h=c=>c[23].index;for(let c=0;c<u.length;c+=1){let d=oa(e,u,c),_=h(d);i.set(_,r[c]=ua(_,d))}return{c(){t=$("svelte-virtual-list-viewport"),n=$("svelte-virtual-list-contents");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){t=ee(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var d=L(t);n=ee(d,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=L(n);for(let v=0;v<r.length;v+=1)r[v].l(_);_.forEach(p),d.forEach(p),this.h()},h(){In(n,"padding-top",e[6]+"px"),In(n,"padding-bottom",e[7]+"px"),gi(n,"class","svelte-g2cagw"),In(t,"height",e[0]),gi(t,"class","svelte-g2cagw"),wn(()=>e[18].call(t))},m(c,d){K(c,t,d),E(t,n);for(let _=0;_<r.length;_+=1)r[_].m(n,null);e[16](n),e[17](t),a=Zr(t,e[18].bind(t)),l=!0,o||(s=x(t,"scroll",e[8]),o=!0)},p(c,[d]){d&16418&&(u=c[5],nt(),r=nn(r,d,h,1,c,u,i,n,Xo,ua,null,oa),rt()),(!l||d&64)&&In(n,"padding-top",c[6]+"px"),(!l||d&128)&&In(n,"padding-bottom",c[7]+"px"),(!l||d&1)&&In(t,"height",c[0])},i(c){if(!l){for(let d=0;d<u.length;d+=1)ge(r[d]);l=!0}},o(c){for(let d=0;d<r.length;d+=1)Te(r[d]);l=!1},d(c){c&&p(t);for(let d=0;d<r.length;d+=1)r[d].d();e[16](null),e[17](null),a(),o=!1,s()}}}function F0(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:a=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:s=0}=t,{start:u=0}=t,{end:h=0}=t,c=[],d,_,v,k=0,y,w,I=0,A=0,m;async function b(C,T,U){const{scrollTop:B}=_;await Er();let z=I-B,S=u;for(;z<T&&S<C.length;){let ae=d[S-u];ae||(n(10,h=S+1),await Er(),ae=d[S-u]);const j=c[S]=U||ae.offsetHeight;z+=j,S+=1}n(10,h=S);const M=C.length-h;m=(I+z)/h,n(7,A=M*m),c.length=C.length,_&&n(3,_.scrollTop=0,_)}async function V(){const{scrollTop:C}=_,T=u;for(let S=0;S<d.length;S+=1)c[u+S]=o||d[S].offsetHeight;let U=0,B=0;for(;U<a.length;){const S=c[U]||m;if(B+S>C){n(9,u=U),n(6,I=B);break}B+=S,U+=1}for(;U<a.length&&(B+=c[U]||m,U+=1,!(B>C+k)););n(10,h=U);const z=a.length-h;for(m=B/h;U<a.length;)c[U++]=m;if(n(7,A=z*m),u<T){await Er();let S=0,M=0;for(let j=u;j<T;j+=1)d[j-u]&&(S+=c[j],M+=o||d[j-u].offsetHeight);const ae=M-S;_.scrollTo(0,C+ae)}}qr(()=>{d=v.getElementsByTagName("svelte-virtual-list-row"),n(13,w=!0)});function W(C){ht[C?"unshift":"push"](()=>{v=C,n(4,v)})}function P(C){ht[C?"unshift":"push"](()=>{_=C,n(3,_)})}function O(){k=this.offsetHeight,n(2,k)}return e.$$set=C=>{"items"in C&&n(11,a=C.items),"height"in C&&n(0,l=C.height),"itemHeight"in C&&n(12,o=C.itemHeight),"hoverItemIndex"in C&&n(1,s=C.hoverItemIndex),"start"in C&&n(9,u=C.start),"end"in C&&n(10,h=C.end),"$$scope"in C&&n(14,i=C.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,y=a.slice(u,h).map((C,T)=>({index:T+u,data:C}))),e.$$.dirty&14340&&w&&b(a,k,o)},[l,s,k,_,v,y,I,A,V,u,h,a,o,w,i,r,W,P,O]}class H0 extends Ct{constructor(t){super(),Nt(this,t,F0,V0,Lt,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function B0(e){let t,n;return{c(){t=te("svg"),n=te("path"),this.h()},l(r){t=ne(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=L(t);n=ne(i,"path",{fill:!0,d:!0}),L(n).forEach(p),i.forEach(p),this.h()},h(){f(n,"fill","currentColor"),f(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),f(t,"width","100%"),f(t,"height","100%"),f(t,"viewBox","-2 -2 50 50"),f(t,"focusable","false"),f(t,"aria-hidden","true"),f(t,"role","presentation")},m(r,i){K(r,t,i),E(t,n)},p:Be,i:Be,o:Be,d(r){r&&p(t)}}}class P0 extends Ct{constructor(t){super(),Nt(this,t,null,B0,Lt,{})}}function G0(e,t,n){let r;return function(){let a=this,l=arguments,o=function(){r=null,n||e.apply(a,l)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,l)}}function fa(e,t,n){const r=e.slice();return r[103]=t[n],r}function ca(e){let t,n,r,i,a;return{c(){t=$("span"),n=ye(e[33]),r=be(),i=$("span"),a=ye(e[32]),this.h()},l(l){t=ee(l,"SPAN",{id:!0});var o=L(t);n=ve(o,e[33]),o.forEach(p),r=ke(l),i=ee(l,"SPAN",{id:!0});var s=L(i);a=ve(s,e[32]),s.forEach(p),this.h()},h(){f(t,"id","aria-selection"),f(i,"id","aria-context")},m(l,o){K(l,t,o),E(t,n),K(l,r,o),K(l,i,o),E(i,a)},p(l,o){o[1]&4&&We(n,l[33]),o[1]&2&&We(a,l[32])},d(l){l&&p(t),l&&p(r),l&&p(i)}}}function ha(e){let t,n,r;const i=[e[18]];var a=e[17];function l(o){let s={};for(let u=0;u<i.length;u+=1)s=zi(s,i[u]);return{props:s}}return a&&(t=ft(a,l())),{c(){t&&Ke(t.$$.fragment),n=Se()},l(o){t&&wt(t.$$.fragment,o),n=Se()},m(o,s){t&&xe(t,o,s),K(o,n,s),r=!0},p(o,s){const u=s[0]&262144?Xi(i,[no(o[18])]):{};if(a!==(a=o[17])){if(t){nt();const h=t;Te(h.$$.fragment,1,0,()=>{qe(h,1)}),rt()}a?(t=ft(a,l()),Ke(t.$$.fragment),ge(t.$$.fragment,1),xe(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(o){r||(t&&ge(t.$$.fragment,o),r=!0)},o(o){t&&Te(t.$$.fragment,o),r=!1},d(o){o&&p(n),t&&qe(t,o)}}}function da(e){let t,n,r;var i=e[26];function a(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return i&&(t=ft(i,a(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Ke(t.$$.fragment),n=Se()},l(l){t&&wt(t.$$.fragment,l),n=Se()},m(l,o){t&&xe(t,l,o),K(l,n,o),r=!0},p(l,o){const s={};if(o[0]&4&&(s.value=l[2]),o[0]&4096&&(s.getSelectionLabel=l[12]),o[0]&1073741824&&(s.activeValue=l[30]),o[0]&512&&(s.isDisabled=l[9]),o[0]&256&&(s.multiFullItemClearable=l[8]),i!==(i=l[26])){if(t){nt();const u=t;Te(u.$$.fragment,1,0,()=>{qe(u,1)}),rt()}i?(t=ft(i,a(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),Ke(t.$$.fragment),ge(t.$$.fragment,1),xe(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(l){r||(t&&ge(t.$$.fragment,l),r=!0)},o(l){t&&Te(t.$$.fragment,l),r=!1},d(l){l&&p(n),t&&qe(t,l)}}}function _a(e){let t,n,r,i,a;var l=e[25];function o(s){return{props:{item:s[2],getSelectionLabel:s[12]}}}return l&&(n=ft(l,o(e))),{c(){t=$("div"),n&&Ke(n.$$.fragment),this.h()},l(s){t=ee(s,"DIV",{class:!0});var u=L(t);n&&wt(n.$$.fragment,u),u.forEach(p),this.h()},h(){f(t,"class","selectedItem svelte-17l1npl")},m(s,u){K(s,t,u),n&&xe(n,t,null),r=!0,i||(a=x(t,"focus",e[40]),i=!0)},p(s,u){const h={};if(u[0]&4&&(h.item=s[2]),u[0]&4096&&(h.getSelectionLabel=s[12]),l!==(l=s[25])){if(n){nt();const c=n;Te(c.$$.fragment,1,0,()=>{qe(c,1)}),rt()}l?(n=ft(l,o(s)),Ke(n.$$.fragment),ge(n.$$.fragment,1),xe(n,t,null)):n=null}else l&&n.$set(h)},i(s){r||(n&&ge(n.$$.fragment,s),r=!0)},o(s){n&&Te(n.$$.fragment,s),r=!1},d(s){s&&p(t),n&&qe(n),i=!1,a()}}}function ma(e){let t,n,r,i,a;var l=e[23];function o(s){return{}}return l&&(n=ft(l,o())),{c(){t=$("div"),n&&Ke(n.$$.fragment),this.h()},l(s){t=ee(s,"DIV",{class:!0,"aria-hidden":!0});var u=L(t);n&&wt(n.$$.fragment,u),u.forEach(p),this.h()},h(){f(t,"class","clearSelect svelte-17l1npl"),f(t,"aria-hidden","true")},m(s,u){K(s,t,u),n&&xe(n,t,null),r=!0,i||(a=x(t,"click",Zo(e[27])),i=!0)},p(s,u){if(l!==(l=s[23])){if(n){nt();const h=n;Te(h.$$.fragment,1,0,()=>{qe(h,1)}),rt()}l?(n=ft(l,o()),Ke(n.$$.fragment),ge(n.$$.fragment,1),xe(n,t,null)):n=null}},i(s){r||(n&&ge(n.$$.fragment,s),r=!0)},o(s){n&&Te(n.$$.fragment,s),r=!1},d(s){s&&p(t),n&&qe(n),i=!1,a()}}}function ga(e){let t;function n(a,l){return a[22]?Y0:U0}let r=n(e),i=r(e);return{c(){t=$("div"),i.c(),this.h()},l(a){t=ee(a,"DIV",{class:!0,"aria-hidden":!0});var l=L(t);i.l(l),l.forEach(p),this.h()},h(){f(t,"class","indicator svelte-17l1npl"),f(t,"aria-hidden","true")},m(a,l){K(a,t,l),i.m(t,null)},p(a,l){r===(r=n(a))&&i?i.p(a,l):(i.d(1),i=r(a),i&&(i.c(),i.m(t,null)))},d(a){a&&p(t),i.d()}}}function U0(e){let t,n;return{c(){t=te("svg"),n=te("path"),this.h()},l(r){t=ne(r,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=L(t);n=ne(i,"path",{d:!0}),L(n).forEach(p),i.forEach(p),this.h()},h(){f(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),f(t,"width","100%"),f(t,"height","100%"),f(t,"viewBox","0 0 20 20"),f(t,"focusable","false"),f(t,"aria-hidden","true"),f(t,"class","svelte-17l1npl")},m(r,i){K(r,t,i),E(t,n)},p:Be,d(r){r&&p(t)}}}function Y0(e){let t,n;return{c(){t=new Jo(!1),n=Se(),this.h()},l(r){t=Qo(r,!1),n=Se(),this.h()},h(){t.a=n},m(r,i){t.m(e[22],r,i),K(r,n,i)},p(r,i){i[0]&4194304&&t.p(r[22])},d(r){r&&p(n),r&&t.d()}}}function pa(e){let t,n,r;return{c(){t=$("div"),n=te("svg"),r=te("circle"),this.h()},l(i){t=ee(i,"DIV",{class:!0});var a=L(t);n=ne(a,"svg",{class:!0,viewBox:!0});var l=L(n);r=ne(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),L(r).forEach(p),l.forEach(p),a.forEach(p),this.h()},h(){f(r,"class","spinner_path svelte-17l1npl"),f(r,"cx","50"),f(r,"cy","50"),f(r,"r","20"),f(r,"fill","none"),f(r,"stroke","currentColor"),f(r,"stroke-width","5"),f(r,"stroke-miterlimit","10"),f(n,"class","spinner_icon svelte-17l1npl"),f(n,"viewBox","25 25 50 50"),f(t,"class","spinner svelte-17l1npl")},m(i,a){K(i,t,a),E(t,n),E(n,r)},d(i){i&&p(t)}}}function ya(e){let t,n,r,i;const a=[e[34]];function l(u){e[84](u)}var o=e[24];function s(u){let h={};for(let c=0;c<a.length;c+=1)h=zi(h,a[c]);return u[28]!==void 0&&(h.hoverItemIndex=u[28]),{props:h}}return o&&(t=ft(o,s(e)),ht.push(()=>ml(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Ke(t.$$.fragment),r=Se()},l(u){t&&wt(t.$$.fragment,u),r=Se()},m(u,h){t&&xe(t,u,h),K(u,r,h),i=!0},p(u,h){const c=h[1]&8?Xi(a,[no(u[34])]):{};if(!n&&h[0]&268435456&&(n=!0,c.hoverItemIndex=u[28],jo(()=>n=!1)),o!==(o=u[24])){if(t){nt();const d=t;Te(d.$$.fragment,1,0,()=>{qe(d,1)}),rt()}o?(t=ft(o,s(u)),ht.push(()=>ml(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),Ke(t.$$.fragment),ge(t.$$.fragment,1),xe(t,r.parentNode,r)):t=null}else o&&t.$set(c)},i(u){i||(t&&ge(t.$$.fragment,u),i=!0)},o(u){t&&Te(t.$$.fragment,u),i=!1},d(u){u&&p(r),t&&qe(t,u)}}}function va(e){let t,n,r;return{c(){t=$("input"),this.h()},l(i){t=ee(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){f(t,"name",n=e[16].name),f(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,f(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&f(t,"name",n),a[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(t.value=r)},d(i){i&&p(t)}}}function wa(e){let t,n=e[2],r=[];for(let i=0;i<n.length;i+=1)r[i]=ba(fa(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Se()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);t=Se()},m(i,a){for(let l=0;l<r.length;l+=1)r[l].m(i,a);K(i,t,a)},p(i,a){if(a[0]&69636){n=i[2];let l;for(l=0;l<n.length;l+=1){const o=fa(i,n,l);r[l]?r[l].p(o,a):(r[l]=ba(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){Yi(r,i),i&&p(t)}}}function ba(e){let t,n,r;return{c(){t=$("input"),this.h()},l(i){t=ee(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){f(t,"name",n=e[16].name),f(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,f(t,"class","svelte-17l1npl")},m(i,a){K(i,t,a)},p(i,a){a[0]&65536&&n!==(n=i[16].name)&&f(t,"name",n),a[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(t.value=r)},d(i){i&&p(t)}}}function z0(e){let t,n,r,i,a,l,o,s,u,h,c,d,_,v,k,y,w,I,A=e[1]&&ca(e),m=e[17]&&ha(e),b=e[35]&&da(e),V=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],W={};for(let S=0;S<V.length;S+=1)W=zi(W,V[S]);let P=!e[7]&&e[29]&&_a(e),O=e[37]&&ma(e),C=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&ga(e),T=e[4]&&pa(),U=e[5]&&ya(e),B=(!e[7]||e[7]&&!e[35])&&va(e),z=e[7]&&e[35]&&wa(e);return{c(){t=$("div"),n=$("span"),A&&A.c(),r=be(),m&&m.c(),i=be(),b&&b.c(),a=be(),l=$("input"),s=be(),P&&P.c(),u=be(),O&&O.c(),h=be(),C&&C.c(),c=be(),T&&T.c(),d=be(),U&&U.c(),_=be(),B&&B.c(),v=be(),z&&z.c(),this.h()},l(S){t=ee(S,"DIV",{class:!0,style:!0});var M=L(t);n=ee(M,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var ae=L(n);A&&A.l(ae),ae.forEach(p),r=ke(M),m&&m.l(M),i=ke(M),b&&b.l(M),a=ke(M),l=ee(M,"INPUT",{placeholder:!0,style:!0}),s=ke(M),P&&P.l(M),u=ke(M),O&&O.l(M),h=ke(M),C&&C.l(M),c=ke(M),T&&T.l(M),d=ke(M),U&&U.l(M),_=ke(M),B&&B.l(M),v=ke(M),z&&z.l(M),M.forEach(p),this.h()},h(){f(n,"aria-live","polite"),f(n,"aria-atomic","false"),f(n,"aria-relevant","additions text"),f(n,"class","a11yText svelte-17l1npl"),dl(l,W),$e(l,"svelte-17l1npl",!0),f(t,"class",k="selectContainer "+e[21]+" svelte-17l1npl"),f(t,"style",e[11]),$e(t,"hasError",e[10]),$e(t,"multiSelect",e[7]),$e(t,"disabled",e[9]),$e(t,"focused",e[1])},m(S,M){K(S,t,M),E(t,n),A&&A.m(n,null),E(t,r),m&&m.m(t,null),E(t,i),b&&b.m(t,null),E(t,a),E(t,l),l.autofocus&&l.focus(),e[82](l),_l(l,e[3]),E(t,s),P&&P.m(t,null),E(t,u),O&&O.m(t,null),E(t,h),C&&C.m(t,null),E(t,c),T&&T.m(t,null),E(t,d),U&&U.m(t,null),E(t,_),B&&B.m(t,null),E(t,v),z&&z.m(t,null),e[85](t),y=!0,w||(I=[x(window,"click",e[41]),x(window,"focusin",e[41]),x(window,"keydown",e[39]),x(l,"focus",e[40]),x(l,"input",e[83]),x(t,"click",e[42])],w=!0)},p(S,M){S[1]?A?A.p(S,M):(A=ca(S),A.c(),A.m(n,null)):A&&(A.d(1),A=null),S[17]?m?(m.p(S,M),M[0]&131072&&ge(m,1)):(m=ha(S),m.c(),ge(m,1),m.m(t,i)):m&&(nt(),Te(m,1,1,()=>{m=null}),rt()),S[35]?b?(b.p(S,M),M[1]&16&&ge(b,1)):(b=da(S),b.c(),ge(b,1),b.m(t,a)):b&&(nt(),Te(b,1,1,()=>{b=null}),rt()),dl(l,W=Xi(V,[(!y||M[0]&8192&&o!==(o=!S[13]))&&{readOnly:o},M[1]&1&&S[31],(!y||M[1]&32)&&{placeholder:S[36]},(!y||M[0]&16384)&&{style:S[14]},(!y||M[0]&512)&&{disabled:S[9]}])),M[0]&8&&l.value!==S[3]&&_l(l,S[3]),$e(l,"svelte-17l1npl",!0),!S[7]&&S[29]?P?(P.p(S,M),M[0]&536871040&&ge(P,1)):(P=_a(S),P.c(),ge(P,1),P.m(t,u)):P&&(nt(),Te(P,1,1,()=>{P=null}),rt()),S[37]?O?(O.p(S,M),M[1]&64&&ge(O,1)):(O=ma(S),O.c(),ge(O,1),O.m(t,h)):O&&(nt(),Te(O,1,1,()=>{O=null}),rt()),!S[37]&&(S[20]||S[19]&&!S[2]||!S[13]&&!S[9]&&!S[4]&&(S[29]&&!S[15]||!S[29]))?C?C.p(S,M):(C=ga(S),C.c(),C.m(t,c)):C&&(C.d(1),C=null),S[4]?T||(T=pa(),T.c(),T.m(t,d)):T&&(T.d(1),T=null),S[5]?U?(U.p(S,M),M[0]&32&&ge(U,1)):(U=ya(S),U.c(),ge(U,1),U.m(t,_)):U&&(nt(),Te(U,1,1,()=>{U=null}),rt()),!S[7]||S[7]&&!S[35]?B?B.p(S,M):(B=va(S),B.c(),B.m(t,v)):B&&(B.d(1),B=null),S[7]&&S[35]?z?z.p(S,M):(z=wa(S),z.c(),z.m(t,null)):z&&(z.d(1),z=null),(!y||M[0]&2097152&&k!==(k="selectContainer "+S[21]+" svelte-17l1npl"))&&f(t,"class",k),(!y||M[0]&2048)&&f(t,"style",S[11]),(!y||M[0]&2098176)&&$e(t,"hasError",S[10]),(!y||M[0]&2097280)&&$e(t,"multiSelect",S[7]),(!y||M[0]&2097664)&&$e(t,"disabled",S[9]),(!y||M[0]&2097154)&&$e(t,"focused",S[1])},i(S){y||(ge(m),ge(b),ge(P),ge(O),ge(U),y=!0)},o(S){Te(m),Te(b),Te(P),Te(O),Te(U),y=!1},d(S){S&&p(t),A&&A.d(),m&&m.d(),b&&b.d(),e[82](null),P&&P.d(),O&&O.d(),C&&C.d(),T&&T.d(),U&&U.d(),B&&B.d(),z&&z.d(),e[85](null),w=!1,gt(I)}}}function ka(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function X0(e,t,n){let r,i,a,l,o,s,u,h;const c=Ui();let{id:d=null}=t,{container:_=void 0}=t,{input:v=void 0}=t,{isMulti:k=!1}=t,{multiFullItemClearable:y=!1}=t,{isDisabled:w=!1}=t,{isCreatable:I=!1}=t,{isFocused:A=!1}=t,{value:m=null}=t,{filterText:b=""}=t,{placeholder:V="Select..."}=t,{placeholderAlwaysShow:W=!1}=t,{items:P=null}=t,{itemFilter:O=(g,de,Le)=>`${g}`.toLowerCase().includes(de.toLowerCase())}=t,{groupBy:C=void 0}=t,{groupFilter:T=g=>g}=t,{isGroupHeaderSelectable:U=!1}=t,{getGroupHeaderLabel:B=g=>g[z]||g.id}=t,{labelIdentifier:z="label"}=t,{getOptionLabel:S=(g,de)=>g.isCreator?`Create "${de}"`:g[z]}=t,{optionIdentifier:M="value"}=t,{loadOptions:ae=void 0}=t,{hasError:j=!1}=t,{containerStyles:re=""}=t,{getSelectionLabel:he=g=>g?g[z]:null}=t,{createGroupHeaderItem:F=g=>({value:g,label:g})}=t,{createItem:Y=g=>({value:g,label:g})}=t;const le=()=>r;let{isSearchable:ie=!0}=t,{inputStyles:we=""}=t,{isClearable:Ee=!0}=t,{isWaiting:_e=!1}=t,{listPlacement:D="auto"}=t,{listOpen:J=!1}=t,{isVirtualList:N=!1}=t,{loadOptionsInterval:oe=300}=t,{noOptionsMessage:ce="No options"}=t,{hideEmptyState:se=!1}=t,{inputAttributes:me={}}=t,{listAutoWidth:Ve=!0}=t,{itemHeight:Pe=40}=t,{Icon:fe=void 0}=t,{iconProps:Ce={}}=t,{showChevron:Ie=!1}=t,{showIndicator:G=!1}=t,{containerClasses:Ne=""}=t,{indicatorSvg:De=void 0}=t,{listOffset:H=5}=t,{ClearIcon:Q=P0}=t,{Item:pe=Uo}=t,{List:He=T0}=t,{Selection:Ge=C0}=t,{MultiSelection:Re=D0}=t,{VirtualList:X=H0}=t;function Oe(g){if(g.loadOptions&&g.filterText.length>0)return;if(!g.items)return[];g.items&&g.items.length>0&&typeof g.items[0]!="object"&&(g.items=ka(g.items));let de=g.items.filter(Le=>{let ze=O(S(Le,g.filterText),g.filterText,Le);return ze&&g.isMulti&&g.value&&Array.isArray(g.value)&&(ze=!g.value.some(vt=>vt[g.optionIdentifier]===Le[g.optionIdentifier])),ze});return g.groupBy&&(de=Ot(de)),g.isCreatable&&(de=R(de,g.filterText)),de}function R(g,de){if(de.length===0)return g;const Le=Y(de);return g[0]&&de===g[0][z]?g:(Le.isCreator=!0,[...g,Le])}let{selectedValue:q=null}=t,ue,Xe,Ue,je,at,et;const Je=G0(async()=>{n(4,_e=!0);let g=await ae(b).catch(de=>{console.warn("svelte-select loadOptions error :>> ",de),c("error",{type:"loadOptions",details:de})});g&&!g.cancelled&&(g?(g&&g.length>0&&typeof g[0]!="object"&&(g=ka(g)),n(81,r=[...g]),c("loaded",{items:r})):n(81,r=[]),I&&n(81,r=R(r,b)),n(4,_e=!1),n(1,A=!0),n(5,J=!0))},oe);function pt(){typeof m=="string"?n(2,m={[M]:m,label:m}):k&&Array.isArray(m)&&m.length>0&&n(2,m=m.map(g=>typeof g=="string"?{value:g,label:g}:g))}let tt;function Et(){n(31,tt=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},me)),d&&n(31,tt.id=d,tt),ie||n(31,tt.readonly=!0,tt)}function Ot(g){const de=[],Le={};g.forEach(vt=>{const kt=C(vt);de.includes(kt)||(de.push(kt),Le[kt]=[],kt&&Le[kt].push(Object.assign(F(kt,vt),{id:kt,isGroupHeader:!0,isSelectable:U}))),Le[kt].push(Object.assign({isGroupItem:!!kt},vt))});const ze=[];return T(de).forEach(vt=>{ze.push(...Le[vt])}),ze}function Qt(){if(k){JSON.stringify(m)!==JSON.stringify(Xe)&&bn()&&c("select",m);return}(!Xe||JSON.stringify(m[M])!==JSON.stringify(Xe[M]))&&c("select",m)}function Gt(){A||J?kn():v&&v.blur()}function It(){m&&(Array.isArray(m)?n(2,m=[...m]):n(2,m=[m]))}function Ut(){m&&n(2,m=null)}function Fe(){b.length!==0&&(n(1,A=!0),n(5,J=!0),ae?Je():(n(5,J=!0),k&&n(30,ue=void 0)))}to(async()=>{n(77,Xe=m),n(78,Ue=b),n(79,je=A),n(80,at=k)});function bn(){let g=!0;if(m){const de=[],Le=[];m.forEach(ze=>{de.includes(ze[M])?g=!1:(de.push(ze[M]),Le.push(ze))}),g||n(2,m=Le)}return g}function Pn(g){let de=g?g[M]:m[M];return P.find(Le=>Le[M]===de)}function Ye(g){!g||g.length===0||g.some(de=>typeof de!="object")||!m||(k?m.some(de=>!de||!de[M]):!m[M])||(Array.isArray(m)?n(2,m=m.map(de=>Pn(de)||de)):n(2,m=Pn()||m))}function Gn(g){const{detail:de}=g,Le=m[de?de.i:m.length-1];m.length===1?n(2,m=void 0):n(2,m=m.filter(ze=>ze!==Le)),c("clear",Le)}function lr(g){if(!!A)switch(g.key){case"ArrowDown":g.preventDefault(),n(5,J=!0),n(30,ue=void 0);break;case"ArrowUp":g.preventDefault(),n(5,J=!0),n(30,ue=void 0);break;case"Tab":J||n(1,A=!1);break;case"Backspace":if(!k||b.length>0)return;if(k&&m&&m.length>0){if(Gn(ue!==void 0?ue:m.length-1),ue===0||ue===void 0)break;n(30,ue=m.length>ue?ue-1:void 0)}break;case"ArrowLeft":if(!k||b.length>0)return;ue===void 0?n(30,ue=m.length-1):m.length>ue&&ue!==0&&n(30,ue-=1);break;case"ArrowRight":if(!k||b.length>0||ue===void 0)return;ue===m.length-1?n(30,ue=void 0):ue<m.length-1&&n(30,ue+=1);break}}function kn(){n(1,A=!0),v&&v.focus()}function ar(g){if(!_)return;const de=g.path&&g.path.length>0?g.path[0]:g.target;_.contains(de)||_.contains(g.relatedTarget)||(n(1,A=!1),n(5,J=!1),n(30,ue=void 0),v&&v.blur())}function or(){w||(n(1,A=!0),n(5,J=!J))}function sr(){n(2,m=void 0),n(5,J=!1),c("clear",m),kn()}qr(()=>{A&&v&&v.focus()});function Z(g){const{detail:de}=g;if(de){n(3,b="");const Le=Object.assign({},de);(!Le.isGroupHeader||Le.isSelectable)&&(k?n(2,m=m?m.concat([Le]):[Le]):n(2,m=Le),n(2,m),setTimeout(()=>{n(5,J=!1),n(30,ue=void 0)}))}}function Ae(g){const{detail:de}=g;k?(n(2,m=m||[]),n(2,m=[...m,Y(de)])):n(2,m=Y(de)),c("itemCreated",de),n(3,b=""),n(5,J=!1),n(30,ue=void 0)}function yt(){n(3,b=""),n(5,J=!1)}let{ariaValues:it=g=>`Option ${g}, selected.`}=t,{ariaListOpen:Yt=(g,de)=>`You are currently focused on option ${g}. There are ${de} results available.`}=t,{ariaFocused:zt=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function sn(){let g;return k&&m.length>0?g=m.map(de=>he(de)).join(", "):g=he(m),it(g)}function Xt(){if(!A||!r||r.length===0)return"";let g=r[et];if(J&&g){let de=he(g),Le=r?r.length:0;return Yt(de,Le)}else return zt()}function At(g){ht[g?"unshift":"push"](()=>{v=g,n(6,v)})}function un(){b=this.value,n(3,b)}function En(g){et=g,n(28,et)}function fn(g){ht[g?"unshift":"push"](()=>{_=g,n(0,_)})}return e.$$set=g=>{"id"in g&&n(46,d=g.id),"container"in g&&n(0,_=g.container),"input"in g&&n(6,v=g.input),"isMulti"in g&&n(7,k=g.isMulti),"multiFullItemClearable"in g&&n(8,y=g.multiFullItemClearable),"isDisabled"in g&&n(9,w=g.isDisabled),"isCreatable"in g&&n(47,I=g.isCreatable),"isFocused"in g&&n(1,A=g.isFocused),"value"in g&&n(2,m=g.value),"filterText"in g&&n(3,b=g.filterText),"placeholder"in g&&n(48,V=g.placeholder),"placeholderAlwaysShow"in g&&n(49,W=g.placeholderAlwaysShow),"items"in g&&n(50,P=g.items),"itemFilter"in g&&n(51,O=g.itemFilter),"groupBy"in g&&n(52,C=g.groupBy),"groupFilter"in g&&n(53,T=g.groupFilter),"isGroupHeaderSelectable"in g&&n(54,U=g.isGroupHeaderSelectable),"getGroupHeaderLabel"in g&&n(55,B=g.getGroupHeaderLabel),"labelIdentifier"in g&&n(56,z=g.labelIdentifier),"getOptionLabel"in g&&n(57,S=g.getOptionLabel),"optionIdentifier"in g&&n(58,M=g.optionIdentifier),"loadOptions"in g&&n(59,ae=g.loadOptions),"hasError"in g&&n(10,j=g.hasError),"containerStyles"in g&&n(11,re=g.containerStyles),"getSelectionLabel"in g&&n(12,he=g.getSelectionLabel),"createGroupHeaderItem"in g&&n(60,F=g.createGroupHeaderItem),"createItem"in g&&n(61,Y=g.createItem),"isSearchable"in g&&n(13,ie=g.isSearchable),"inputStyles"in g&&n(14,we=g.inputStyles),"isClearable"in g&&n(15,Ee=g.isClearable),"isWaiting"in g&&n(4,_e=g.isWaiting),"listPlacement"in g&&n(63,D=g.listPlacement),"listOpen"in g&&n(5,J=g.listOpen),"isVirtualList"in g&&n(64,N=g.isVirtualList),"loadOptionsInterval"in g&&n(65,oe=g.loadOptionsInterval),"noOptionsMessage"in g&&n(66,ce=g.noOptionsMessage),"hideEmptyState"in g&&n(67,se=g.hideEmptyState),"inputAttributes"in g&&n(16,me=g.inputAttributes),"listAutoWidth"in g&&n(68,Ve=g.listAutoWidth),"itemHeight"in g&&n(69,Pe=g.itemHeight),"Icon"in g&&n(17,fe=g.Icon),"iconProps"in g&&n(18,Ce=g.iconProps),"showChevron"in g&&n(19,Ie=g.showChevron),"showIndicator"in g&&n(20,G=g.showIndicator),"containerClasses"in g&&n(21,Ne=g.containerClasses),"indicatorSvg"in g&&n(22,De=g.indicatorSvg),"listOffset"in g&&n(70,H=g.listOffset),"ClearIcon"in g&&n(23,Q=g.ClearIcon),"Item"in g&&n(71,pe=g.Item),"List"in g&&n(24,He=g.List),"Selection"in g&&n(25,Ge=g.Selection),"MultiSelection"in g&&n(26,Re=g.MultiSelection),"VirtualList"in g&&n(72,X=g.VirtualList),"selectedValue"in g&&n(73,q=g.selectedValue),"ariaValues"in g&&n(74,it=g.ariaValues),"ariaListOpen"in g&&n(75,Yt=g.ariaListOpen),"ariaFocused"in g&&n(76,zt=g.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,r=Oe({loadOptions:ae,filterText:b,items:P,value:m,isMulti:k,optionIdentifier:M,groupBy:C,isCreatable:I})),e.$$.dirty[2]&2048&&q&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&Ye(P),e.$$.dirty[0]&4&&m&&pt(),e.$$.dirty[0]&73728&&(me||!ie)&&Et(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(k&&It(),at&&!k&&Ut()),e.$$.dirty[0]&132&&k&&m&&m.length>1&&bn(),e.$$.dirty[0]&4&&m&&Qt(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!m&&k&&Xe&&c("select",m),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&A!==je&&Gt(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&b!==Ue&&Fe(),e.$$.dirty[0]&12&&n(29,i=m&&b.length===0),e.$$.dirty[0]&536904208&&n(37,a=i&&Ee&&!w&&!_e),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=W&&k?V:m?"":V),e.$$.dirty[0]&132&&n(35,o=k&&m&&m.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,s={Item:pe,filterText:b,optionIdentifier:M,noOptionsMessage:ce,hideEmptyState:se,isVirtualList:N,VirtualList:X,value:m,isMulti:k,getGroupHeaderLabel:B,items:r,itemHeight:Pe,getOptionLabel:S,listPlacement:D,parent:_,listAutoWidth:Ve,listOffset:H}),e.$$.dirty[0]&132&&n(33,u=m?sn():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,h=Xt())},[_,A,m,b,_e,J,v,k,y,w,j,re,he,ie,we,Ee,me,fe,Ce,Ie,G,Ne,De,Q,He,Ge,Re,sr,et,i,ue,tt,h,u,s,o,l,a,Gn,lr,kn,ar,or,Z,Ae,yt,d,I,V,W,P,O,C,T,U,B,z,S,M,ae,F,Y,le,D,N,oe,ce,se,Ve,Pe,H,pe,X,q,it,Yt,zt,Xe,Ue,je,at,r,At,un,En,fn]}class Ea extends Ct{constructor(t){super(),Nt(this,t,X0,z0,Lt,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function W0(e){const t=e-1;return t*t*t+1}function Wr(e,{delay:t=0,duration:n=400,easing:r=$o}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}function K0(e,{from:t,to:n},r={}){const i=getComputedStyle(e),a=i.transform==="none"?"":i.transform,[l,o]=i.transformOrigin.split(" ").map(parseFloat),s=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*o/n.height-(n.top+o),{delay:h=0,duration:c=_=>Math.sqrt(_)*120,easing:d=W0}=r;return{delay:h,duration:Ze(c)?c(Math.sqrt(s*s+u*u)):c,easing:d,css:(_,v)=>{const k=v*s,y=v*u,w=_+v*t.width/n.width,I=_+v*t.height/n.height;return`transform: ${a} translate(${k}px, ${y}px) scale(${w}, ${I});`}}}const dn=Ki([2020]),ct=Ki(new Set),gn=Ki(!0);class x0{constructor(t){Qe(this,"id");Qe(this,"code");Qe(this,"name");Qe(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class Nr{constructor(t){Qe(this,"id");Qe(this,"code");Qe(this,"name");Qe(this,"level");Qe(this,"parent_id");Qe(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class jt{constructor(t,n,r){Qe(this,"location_id");Qe(this,"location");Qe(this,"partner_id");Qe(this,"partner");Qe(this,"product_id");Qe(this,"product");Qe(this,"year");Qe(this,"export_value");Qe(this,"import_value");this.location_id=+r.location_id,this.location=t.get(this.location_id),this.partner_id=+r.partner_id,this.partner=t.get(this.partner_id),this.product_id=+r.product_id,this.product=n.get(this.product_id),this.year=+r.year,this.export_value=+r.export_value,this.import_value=+r.import_value}}const ln="#377eb8",an="#ff7f00",Kr="rgba(77, 175, 74, 0.65)",xr="rgba(228, 26, 29, 0.65)";function Ia(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function Aa(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function Ta(e,t,n){const r=e.slice();return r[44]=t[n],r[46]=n,r}function q0(e){let t,n,r,i,a;return{c(){t=te("text"),n=ye("No valid data for this pair."),this.h()},l(l){t=ne(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=L(t);n=ve(o,"No valid data for this pair."),o.forEach(p),this.h()},h(){f(t,"x",r=e[3]/2),f(t,"y",i=e[9]/2),f(t,"alignment-baseline","central"),f(t,"text-anchor","middle")},m(l,o){K(l,t,o),E(t,n)},p(l,o){o[0]&8&&r!==(r=l[3]/2)&&f(t,"x",r),o[0]&512&&i!==(i=l[9]/2)&&f(t,"y",i)},i(l){a||wn(()=>{a=Wi(t,Wr,{}),a.start()})},o:Be,d(l){l&&p(t)}}}function Z0(e){var se,me,Ve,Pe,fe,Ce,Ie,G,Ne,De;let t,n,r=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",i,a,l,o=e[6].length>1?`from ${e[6][0]} to ${e[6][e[6].length-1]}`:`in ${e[6]}`,s,u=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",h,c,d,_,v=(((me=(se=e[2])==null?void 0:se.name.length)!=null?me:0)>19?((Pe=(Ve=e[2])==null?void 0:Ve.name)!=null?Pe:"").substring(0,19)+"...":(fe=e[2])==null?void 0:fe.name)+" ",k,y=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",w,I,A=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",m,b,V=(((Ie=(Ce=e[2])==null?void 0:Ce.name.length)!=null?Ie:0)>19?((Ne=(G=e[2])==null?void 0:G.name)!=null?Ne:"").substring(0,19)+"...":(De=e[2])==null?void 0:De.name)+"",W,P,O,C=[],T=new Map,U,B=[],z=new Map,S,M=[],ae=new Map,j,re,he,F,Y,le,ie,we,Ee,_e=e[10];const D=H=>H[44].product_id;for(let H=0;H<_e.length;H+=1){let Q=Ta(e,_e,H),pe=D(Q);T.set(pe,C[H]=Ma(pe,Q))}let J=e[10];const N=H=>H[46];for(let H=0;H<J.length;H+=1){let Q=Aa(e,J,H),pe=N(Q);z.set(pe,B[H]=Ca(pe,Q))}let oe=e[10];const ce=H=>H[44].product_id;for(let H=0;H<oe.length;H+=1){let Q=Ia(e,oe,H),pe=ce(Q);ae.set(pe,M[H]=Na(pe,Q))}return{c(){t=te("text"),n=ye("Sector "),i=ye(r),a=te("text"),l=ye("Trade Flow "),s=ye(o),h=ye(u),d=te("text"),_=ye("Export to "),k=ye(v),w=ye(y),I=te("text"),m=ye(A),b=ye("\xA0Import from "),W=ye(V),O=te("g");for(let H=0;H<C.length;H+=1)C[H].c();U=Se();for(let H=0;H<B.length;H+=1)B[H].c();S=Se();for(let H=0;H<M.length;H+=1)M[H].c();j=te("line"),F=te("line"),le=te("g"),ie=te("g"),this.h()},l(H){t=ne(H,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var Q=L(t);n=ve(Q,"Sector "),i=ve(Q,r),Q.forEach(p),a=ne(H,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var pe=L(a);l=ve(pe,"Trade Flow "),s=ve(pe,o),h=ve(pe,u),pe.forEach(p),d=ne(H,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var He=L(d);_=ve(He,"Export to "),k=ve(He,v),w=ve(He,y),He.forEach(p),I=ne(H,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var Ge=L(I);m=ve(Ge,A),b=ve(Ge,"\xA0Import from "),W=ve(Ge,V),Ge.forEach(p),O=ne(H,"g",{id:!0,transform:!0});var Re=L(O);for(let X=0;X<C.length;X+=1)C[X].l(Re);U=Se();for(let X=0;X<B.length;X+=1)B[X].l(Re);S=Se();for(let X=0;X<M.length;X+=1)M[X].l(Re);j=ne(Re,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),L(j).forEach(p),F=ne(Re,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),L(F).forEach(p),le=ne(Re,"g",{id:!0,class:!0}),L(le).forEach(p),Re.forEach(p),ie=ne(H,"g",{id:!0,class:!0}),L(ie).forEach(p),this.h()},h(){var H,Q,pe,He;f(t,"text-anchor","start"),f(t,"class","chart-header sortable svelte-1iu1tr7"),f(t,"x",15),f(t,"y",Kn/2),f(t,"alignment-baseline","hanging"),f(a,"text-anchor","middle"),f(a,"class","chart-header sortable svelte-1iu1tr7"),f(a,"x",c=(e[3]-Ft)/2+Ft-20),f(a,"y",Kn/2-7),f(a,"alignment-baseline","hanging"),f(d,"class","axis-header from-label sortable svelte-1iu1tr7"),f(d,"x",Ft),f(d,"y",Kn/2-5),f(d,"alignment-baseline","hanging"),f(d,"font-size","13"),f(I,"class","axis-header from-label sortable svelte-1iu1tr7"),f(I,"x",P=e[3]-20),f(I,"y",Kn/2-5),f(I,"text-anchor","end"),f(I,"alignment-baseline","hanging"),f(I,"font-size","13"),f(j,"id","midline"),f(j,"transform",re=`translate(${e[5](0)},0)`),f(j,"y1",20),f(j,"y2",he=(((Q=(H=e[10])==null?void 0:H.length)!=null?Q:0)+1)*ut),f(j,"stroke","rgba(0,0,0,0.7)"),f(j,"stroke-width","1"),f(j,"class","svelte-1iu1tr7"),f(F,"x1",Ft),f(F,"y1",0),f(F,"x2",Ft),f(F,"y2",Y=(((He=(pe=e[10])==null?void 0:pe.length)!=null?He:0)+1)*ut),f(F,"stroke","rgba(0,0,0,0.1)"),f(F,"stroke-width","1"),f(le,"id","axis"),f(le,"class","axis-ticks"),f(O,"id","bar-content"),f(O,"transform",`translate(${0},${Kn})`),f(ie,"id","bar-chart-tooltip"),f(ie,"class","tooltip")},m(H,Q){K(H,t,Q),E(t,n),E(t,i),K(H,a,Q),E(a,l),E(a,s),E(a,h),K(H,d,Q),E(d,_),E(d,k),E(d,w),K(H,I,Q),E(I,m),E(I,b),E(I,W),K(H,O,Q);for(let pe=0;pe<C.length;pe+=1)C[pe].m(O,null);E(O,U);for(let pe=0;pe<B.length;pe+=1)B[pe].m(O,null);E(O,S);for(let pe=0;pe<M.length;pe+=1)M[pe].m(O,null);E(O,j),E(O,F),E(O,le),e[36](le),K(H,ie,Q),we||(Ee=[x(t,"click",e[29]),x(t,"keydown",Q0),x(a,"click",e[30]),x(a,"keydown",$0),x(d,"keydown",ed),x(d,"click",e[31]),x(I,"click",e[32]),x(I,"keydown",td)],we=!0)},p(H,Q){var pe,He,Ge,Re,X,Oe,R,q,ue,Xe,Ue,je,at,et;if(Q[0]&3&&r!==(r=H[1]==H[0].AlphaUp?"\u2191":H[1]==H[0].AlphaDown?"\u2193":" ")&&We(i,r),Q[0]&64&&o!==(o=H[6].length>1?`from ${H[6][0]} to ${H[6][H[6].length-1]}`:`in ${H[6]}`)&&We(s,o),Q[0]&3&&u!==(u=H[1]==H[0].Up?"\u2191":H[1]==H[0].Down?"\u2193":" ")&&We(h,u),Q[0]&8&&c!==(c=(H[3]-Ft)/2+Ft-20)&&f(a,"x",c),Q[0]&4&&v!==(v=(((He=(pe=H[2])==null?void 0:pe.name.length)!=null?He:0)>19?((Re=(Ge=H[2])==null?void 0:Ge.name)!=null?Re:"").substring(0,19)+"...":(X=H[2])==null?void 0:X.name)+" ")&&We(k,v),Q[0]&3&&y!==(y=H[1]==H[0].LeftUp?"\u2191":H[1]==H[0].LeftDown?"\u2193":" ")&&We(w,y),Q[0]&3&&A!==(A=H[1]==H[0].RightUp?"\u2191":H[1]==H[0].RightDown?"\u2193":" ")&&We(m,A),Q[0]&4&&V!==(V=(((R=(Oe=H[2])==null?void 0:Oe.name.length)!=null?R:0)>19?((ue=(q=H[2])==null?void 0:q.name)!=null?ue:"").substring(0,19)+"...":(Xe=H[2])==null?void 0:Xe.name)+"")&&We(W,V),Q[0]&8&&P!==(P=H[3]-20)&&f(I,"x",P),Q[0]&1032&&(_e=H[10],C=nn(C,Q,D,1,H,_e,T,O,Rn,Ma,U,Ta)),Q[0]&64672&&(J=H[10],B=nn(B,Q,N,1,H,J,z,O,Rn,Ca,S,Aa)),Q[0]&3072){oe=H[10];for(let Je=0;Je<M.length;Je+=1)M[Je].r();M=nn(M,Q,ce,1,H,oe,ae,O,es,Na,j,Ia);for(let Je=0;Je<M.length;Je+=1)M[Je].a()}Q[0]&32&&re!==(re=`translate(${H[5](0)},0)`)&&f(j,"transform",re),Q[0]&1024&&he!==(he=(((je=(Ue=H[10])==null?void 0:Ue.length)!=null?je:0)+1)*ut)&&f(j,"y2",he),Q[0]&1024&&Y!==(Y=(((et=(at=H[10])==null?void 0:at.length)!=null?et:0)+1)*ut)&&f(F,"y2",Y)},i:Be,o:Be,d(H){H&&p(t),H&&p(a),H&&p(d),H&&p(I),H&&p(O);for(let Q=0;Q<C.length;Q+=1)C[Q].d();for(let Q=0;Q<B.length;Q+=1)B[Q].d();for(let Q=0;Q<M.length;Q+=1)M[Q].d();e[36](null),H&&p(ie),we=!1,gt(Ee)}}}function Sa(e){let t,n;return{c(){t=te("rect"),this.h()},l(r){t=ne(r,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),L(t).forEach(p),this.h()},h(){f(t,"x","0"),f(t,"y",n=e[46]*ut+on),f(t,"height",ut),f(t,"width",e[3]),f(t,"fill","rgba(0,0,0,0.04)"),f(t,"class","svelte-1iu1tr7")},m(r,i){K(r,t,i)},p(r,i){i[0]&1024&&n!==(n=r[46]*ut+on)&&f(t,"y",n),i[0]&8&&f(t,"width",r[3])},d(r){r&&p(t)}}}function Ma(e,t){let n,r,i=t[46]%2==0&&Sa(t);return{key:e,first:null,c(){n=Se(),i&&i.c(),r=Se(),this.h()},l(a){n=Se(),i&&i.l(a),r=Se(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[46]%2==0?i?i.p(t,l):(i=Sa(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&p(n),i&&i.d(a),a&&p(r)}}}function Ca(e,t){let n,r,i,a,l,o,s,u,h,c,d,_,v;function k(){return t[33](t[44])}function y(){return t[34](t[44])}return{key:e,first:null,c(){n=te("g"),r=te("rect"),l=te("rect"),u=te("rect"),this.h()},l(w){n=ne(w,"g",{class:!0,transform:!0});var I=L(n);r=ne(I,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),L(r).forEach(p),l=ne(I,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),L(l).forEach(p),u=ne(I,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),L(u).forEach(p),I.forEach(p),this.h()},h(){f(r,"class","tab svelte-1iu1tr7"),f(r,"x","0"),f(r,"y","2"),f(r,"height",ut-4),f(r,"width",i=t[11].size>0&&t[11].has(t[44].product_id)?Ft-1:6),f(r,"fill",a=t[7]?t[7](t[44].product.name):"white"),f(l,"class","country1-bar svelte-1iu1tr7"),f(l,"x",o=t[5](-t[44].export_value)),f(l,"y",gr/2),f(l,"height",ut-gr),f(l,"width",s=t[5](0)-t[5](-t[44].export_value)),f(l,"fill",ln),f(u,"class","country2-bar svelte-1iu1tr7"),f(u,"x",h=t[5](0)),f(u,"y",gr/2),f(u,"height",ut-gr),f(u,"width",c=t[5](t[44].import_value)-t[5](0)),f(u,"fill",an),f(n,"class","bar-row"),f(n,"transform",d=`translate(0, ${t[46]*ut+on})`),this.first=n},m(w,I){K(w,n,I),E(n,r),E(n,l),E(n,u),_||(v=[x(l,"focus",t[28]),x(l,"keydown",nd),x(l,"mouseover",function(){Ze(t[13](t[44],!0))&&t[13](t[44],!0).apply(this,arguments)}),x(l,"mousemove",t[14]()),x(l,"mouseleave",t[15]()),x(l,"click",k),x(u,"focus",t[27]),x(u,"keydown",rd),x(u,"mouseover",function(){Ze(t[13](t[44],!1))&&t[13](t[44],!1).apply(this,arguments)}),x(u,"mousemove",t[14]()),x(u,"mouseleave",t[15]()),x(u,"click",y)],_=!0)},p(w,I){t=w,I[0]&3072&&i!==(i=t[11].size>0&&t[11].has(t[44].product_id)?Ft-1:6)&&f(r,"width",i),I[0]&1152&&a!==(a=t[7]?t[7](t[44].product.name):"white")&&f(r,"fill",a),I[0]&1056&&o!==(o=t[5](-t[44].export_value))&&f(l,"x",o),I[0]&1056&&s!==(s=t[5](0)-t[5](-t[44].export_value))&&f(l,"width",s),I[0]&32&&h!==(h=t[5](0))&&f(u,"x",h),I[0]&1056&&c!==(c=t[5](t[44].import_value)-t[5](0))&&f(u,"width",c),I[0]&1024&&d!==(d=`translate(0, ${t[46]*ut+on})`)&&f(n,"transform",d)},d(w){w&&p(n),_=!1,gt(v)}}}function Na(e,t){let n,r=t[44].product.name+"",i,a,l,o=Be,s,u;function h(){return t[35](t[44])}return{key:e,first:null,c(){n=te("text"),i=ye(r),this.h()},l(c){n=ne(c,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var d=L(n);i=ve(d,r),d.forEach(p),this.h()},h(){f(n,"class","product-text svelte-1iu1tr7"),f(n,"alignment-baseline","hanging"),f(n,"x","10"),f(n,"y",a=t[46]*ut+on+6),this.first=n},m(c,d){K(c,n,d),E(n,i),s||(u=[x(n,"click",h),x(n,"keydown",id)],s=!0)},p(c,d){t=c,d[0]&1024&&r!==(r=t[44].product.name+"")&&We(i,r),d[0]&1024&&a!==(a=t[46]*ut+on+6)&&f(n,"y",a)},r(){l=n.getBoundingClientRect()},f(){ts(n),o()},a(){o(),o=ns(n,l,K0,{duration:400,delay:20})},d(c){c&&p(n),s=!1,gt(u)}}}function La(e){let t,n,r,i,a;return{c(){t=te("rect"),n=te("text"),r=ye("Loading..."),this.h()},l(l){t=ne(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),L(t).forEach(p),n=ne(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=L(n);r=ve(o,"Loading..."),o.forEach(p),this.h()},h(){f(t,"x","0"),f(t,"y","0"),f(t,"width",e[3]),f(t,"height",e[9]),f(t,"fill","rgba(255,255,255,0.9)"),f(t,"class","svelte-1iu1tr7"),f(n,"x",i=e[3]/2),f(n,"y",a=e[9]/2),f(n,"alignment-baseline","central"),f(n,"text-anchor","middle")},m(l,o){K(l,t,o),K(l,n,o),E(n,r)},p(l,o){o[0]&8&&f(t,"width",l[3]),o[0]&512&&f(t,"height",l[9]),o[0]&8&&i!==(i=l[3]/2)&&f(n,"x",i),o[0]&512&&a!==(a=l[9]/2)&&f(n,"y",a)},d(l){l&&p(t),l&&p(n)}}}function j0(e){let t,n,r,i,a;function l(h,c){return h[10]&&h[10].length>0?Z0:q0}let o=l(e),s=o(e),u=e[8]&&La(e);return{c(){t=$("div"),n=te("svg"),s.c(),r=Se(),u&&u.c(),this.h()},l(h){t=ee(h,"DIV",{id:!0,class:!0});var c=L(t);n=ne(c,"svg",{height:!0,class:!0});var d=L(n);s.l(d),r=Se(),u&&u.l(d),d.forEach(p),c.forEach(p),this.h()},h(){var h,c;f(n,"height",i=Math.max(e[9],(((c=(h=e[10])==null?void 0:h.length)!=null?c:0)+1)*ut+on)),f(n,"class","svelte-1iu1tr7"),f(t,"id","bar-chart"),f(t,"class","viz-section svelte-1iu1tr7"),wn(()=>e[37].call(t))},m(h,c){K(h,t,c),E(t,n),s.m(n,null),E(n,r),u&&u.m(n,null),a=Zr(t,e[37].bind(t))},p(h,c){var d,_;o===(o=l(h))&&s?s.p(h,c):(s.d(1),s=o(h),s&&(s.c(),ge(s,1),s.m(n,r))),h[8]?u?u.p(h,c):(u=La(h),u.c(),u.m(n,null)):u&&(u.d(1),u=null),c[0]&1536&&i!==(i=Math.max(h[9],(((_=(d=h[10])==null?void 0:d.length)!=null?_:0)+1)*ut+on))&&f(n,"height",i)},i(h){ge(s)},o:Be,d(h){h&&p(t),s.d(),u&&u.d(),a()}}}const Kn=40,ut=30,Da=0,J0=10,on=30,Ft=100,gr=4,pr=10,Oa=140,Ra=25,di=105,$t=20,en=35,Sn=22,Q0=()=>{},$0=()=>{},ed=()=>{},td=()=>{},nd=()=>{},rd=()=>{},id=()=>{};function ld(e,t,n){let r,i,a,l,o,s,u,h,c,d,_,v,k;Mt(e,dn,N=>n(6,_=N)),Mt(e,ct,N=>n(11,v=N)),Mt(e,gn,N=>n(12,k=N));let{data:y}=t;var w;(function(N){N[N.LeftUp=0]="LeftUp",N[N.LeftDown=1]="LeftDown",N[N.RightUp=2]="RightUp",N[N.RightDown=3]="RightDown",N[N.Up=4]="Up",N[N.Down=5]="Down",N[N.AlphaUp=6]="AlphaUp",N[N.AlphaDown=7]="AlphaDown"})(w||(w={}));let I=w.AlphaDown,{bilateralData:A,productColorScale:m,country1:b,country2:V,loadingDrilldown:W,productData:P,locationData:O}=y,C=800,T=550,U;const B=N=>rn("$.3s")(N).replace(/G/,"B");function z(N,oe,ce){return N+ce<C?N+oe:N+oe-ce}function S(N,oe){return N+di<T?N+oe:N+oe-di}function M(N,oe){return ce=>{let se=Me("#bar-chart-tooltip"),me=Oa+_.length*Ra;se.append("rect").attr("id","tooltip-rect").attr("width",me).attr("height",di).attr("x",z(ce.layerX,pr,me)).attr("y",S(ce.layerY,pr)),se.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",z(ce.layerX,$t,me)).attr("y",S(ce.layerY,en)).style("fill",oe?ln:an).text(`${N.product.name}`),se.append("text").attr("id","tooltip-text2").attr("x",z(ce.layerX,$t,me)).attr("y",S(ce.layerY,en+Sn)).text((oe?"Export: ":"Import: ")+`${B(oe?N.export_value:N.import_value)}`),se.append("text").attr("id","tooltip-text3").attr("x",z(ce.layerX,$t,me)).attr("y",S(ce.layerY,en+2*Sn)).text(`Share: ${rn(".2%")(oe?N.export_value/h:N.import_value/c)}`),se.append("text").attr("id","tooltip-text4").attr("x",z(ce.layerX,$t,me)).attr("y",S(ce.layerY,en+3*Sn)).text((_.length>1?"Years: ":"Year: ")+`${_.join(", ")}`)}}function ae(){return N=>{let oe=Oa+_.length*Ra;Me("#tooltip-rect").attr("x",z(N.layerX,pr,oe)).attr("y",S(N.layerY,pr)),Me("#tooltip-text1").attr("x",z(N.layerX,$t,oe)).attr("y",S(N.layerY,en)),Me("#tooltip-text2").attr("x",z(N.layerX,$t,oe)).attr("y",S(N.layerY,en+Sn)),Me("#tooltip-text3").attr("x",z(N.layerX,$t,oe)).attr("y",S(N.layerY,en+2*Sn)),Me("#tooltip-text4").attr("x",z(N.layerX,$t,oe)).attr("y",S(N.layerY,en+3*Sn))}}function j(){return N=>{Me("#bar-chart-tooltip").selectAll("rect").remove(),Me("#bar-chart-tooltip").selectAll("text").remove()}}function re(N){_t.call(this,e,N)}function he(N){_t.call(this,e,N)}const F=()=>{I==w.AlphaDown?n(1,I=w.AlphaUp):n(1,I=w.AlphaDown)},Y=()=>{I==w.Down?n(1,I=w.Up):n(1,I=w.Down)},le=()=>{I==w.LeftDown?n(1,I=w.LeftUp):n(1,I=w.LeftDown)},ie=()=>{I==w.RightDown?n(1,I=w.RightUp):n(1,I=w.RightDown)},we=N=>{k||(gn.set(!0),ct.update(oe=>(oe.clear(),oe))),v.has(N==null?void 0:N.product_id)?ct.update(oe=>{var ce;return oe.delete((ce=N==null?void 0:N.product_id)!=null?ce:-1),oe}):(N==null?void 0:N.product_id)>=0&&ct.update(oe=>{var ce;return oe.add((ce=N==null?void 0:N.product_id)!=null?ce:-1),oe})},Ee=N=>{k&&(gn.set(!1),ct.update(oe=>(oe.clear(),oe))),v.has(N==null?void 0:N.product_id)?ct.update(oe=>{var ce;return oe.delete((ce=N==null?void 0:N.product_id)!=null?ce:-1),oe}):(N==null?void 0:N.product_id)>=0&&ct.update(oe=>{var ce;return oe.add((ce=N==null?void 0:N.product_id)!=null?ce:-1),oe})},_e=N=>{v.has(N.product_id)?ct.update(oe=>(oe.delete(N.product_id),oe)):ct.update(oe=>(oe.add(N.product_id),oe))};function D(N){ht[N?"unshift":"push"](()=>{U=N,n(4,U)})}function J(){C=this.clientWidth,T=this.clientHeight,n(3,C),n(9,T)}return e.$$set=N=>{"data"in N&&n(16,y=N.data)},e.$$.update=()=>{var N,oe,ce;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:A,productColorScale:m,country1:b,country2:V,loadingDrilldown:W,productData:P,locationData:O}=y,A,(n(7,m),n(16,y)),(n(18,b),n(16,y)),(n(2,V),n(16,y)),(n(8,W),n(16,y)),(n(19,P),n(16,y)),(n(20,O),n(16,y))),e.$$.dirty[0]&393220&&n(26,r=(ce=A==null?void 0:A.get((N=b==null?void 0:b.id)!=null?N:0))==null?void 0:ce.get((oe=V==null?void 0:V.id)!=null?oe:0)),e.$$.dirty[0]&67108928&&n(25,i=_.map(se=>{var me;return(me=r==null?void 0:r.get(se))!=null?me:new Array}).flat()),e.$$.dirty[0]&35389444&&n(23,a=Array.from(vi(i,se=>{var me,Ve;return se.reduce((Pe,fe)=>(Pe.export_value+=fe.export_value,Pe.import_value+=fe.import_value,Pe),new jt(O,P,{location_id:(me=b==null?void 0:b.id)!=null?me:0,partner_id:(Ve=V==null?void 0:V.id)!=null?Ve:0,product_id:se[0].product_id,year:0,export_value:0,import_value:0}))},se=>se.product_id).values())),e.$$.dirty[0]&8388608&&n(24,l=a.filter(se=>se.product.level=="section")),e.$$.dirty[0]&16777219&&n(10,o=l.sort((se,me)=>{switch(I){case w.LeftUp:return se.export_value-me.export_value;case w.LeftDown:return me.export_value-se.export_value;case w.RightUp:return se.import_value-me.import_value;case w.RightDown:return me.import_value-se.import_value;case w.Up:return se.import_value+se.export_value-(me.import_value+me.export_value);case w.Down:return me.import_value+me.export_value-(se.import_value+se.export_value);case w.AlphaDown:return se.product.name.localeCompare(me.product.name);case w.AlphaUp:return me.product.name.localeCompare(se.product.name);default:return 0}})),e.$$.dirty[0]&8388608&&n(22,s=jn(a,se=>se.export_value)),e.$$.dirty[0]&8388608&&n(21,u=jn(a,se=>se.import_value)),e.$$.dirty[0]&6291456,e.$$.dirty[0]&8388608&&(h=Dr(a,se=>se.export_value)),e.$$.dirty[0]&8388608&&(c=Dr(a,se=>se.import_value)),e.$$.dirty[0]&6291464&&n(5,d=Jn().domain([-s,u]).range([Ft+Da,C-Da-J0])),e.$$.dirty[0]&48){let se=ao(d).tickFormat(me=>B(Math.abs(me)));Me(U).transition().call(se)}},[w,I,V,C,U,d,_,m,W,T,o,v,k,M,ae,j,y,A,b,P,O,u,s,a,l,i,r,re,he,F,Y,le,ie,we,Ee,_e,D,J]}class ad extends Ct{constructor(t){super(),Nt(this,t,ld,j0,Lt,{data:16},null,[-1,-1])}}function Va(e,t,n){const r=e.slice();return r[54]=t[n],r}function Fa(e,t,n){const r=e.slice();return r[54]=t[n],r}function Ha(e,t,n){const r=e.slice();return r[54]=t[n],r}function od(e){let t,n,r,i,a;return{c(){t=te("text"),n=ye("No valid data for this pair."),this.h()},l(l){t=ne(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=L(t);n=ve(o,"No valid data for this pair."),o.forEach(p),this.h()},h(){f(t,"x",r=e[2]/2),f(t,"y",i=e[3]/2),f(t,"alignment-baseline","central"),f(t,"text-anchor","middle")},m(l,o){K(l,t,o),E(t,n)},p(l,o){o[0]&4&&r!==(r=l[2]/2)&&f(t,"x",r),o[0]&8&&i!==(i=l[3]/2)&&f(t,"y",i)},i(l){a||wn(()=>{a=Wi(t,Wr,{}),a.start()})},o:Be,d(l){l&&p(t)}}}function sd(e){var Ge,Re,X,Oe;let t,n,r,i,a,l,o,s,u,h,c,d,_,v,k,y,w,I,A,m,b,V,W,P,O=((Re=`to ${(Ge=e[0].get(e[1]))==null?void 0:Ge.name}`)!=null?Re:"")+"",C,T,U,B,z=((Oe=`from ${(X=e[0].get(e[1]))==null?void 0:X.name}`)!=null?Oe:"")+"",S,M,ae,j,re,he,F,Y,le,ie,we,Ee=[],_e=new Map,D,J,N=[],oe=new Map,ce,se,me=[],Ve=new Map,Pe,fe,Ce,Ie=!e[16]&&Ba(e),G=e[12]>0&&e[11]<0&&Pa(e),Ne=e[15];const De=R=>R[54].year;for(let R=0;R<Ne.length;R+=1){let q=Ha(e,Ne,R),ue=De(q);_e.set(ue,Ee[R]=Ga(ue,q))}let H=e[15];const Q=R=>R[54].year;for(let R=0;R<H.length;R+=1){let q=Fa(e,H,R),ue=Q(q);oe.set(ue,N[R]=Ua(ue,q))}let pe=e[15];const He=R=>R[54].year;for(let R=0;R<pe.length;R+=1){let q=Va(e,pe,R),ue=He(q);Ve.set(ue,me[R]=Ya(ue,q))}return{c(){t=te("text"),n=ye("Trade Over Time"),i=te("g"),Ie&&Ie.c(),a=te("g"),l=te("line"),s=te("text"),u=ye("Year"),d=te("g"),_=te("text"),v=ye("Gross Exports/Imports"),y=te("g"),w=te("text"),I=ye("Net Exports"),b=te("g"),V=te("circle"),W=te("text"),P=ye("Export "),C=ye(O),T=te("circle"),U=te("text"),B=ye("Import "),S=ye(z),M=te("g"),ae=te("rect"),j=te("text"),re=ye("Trade Deficit"),he=te("rect"),F=te("text"),Y=ye("Trade Surplus"),ie=te("g"),G&&G.c(),we=Se();for(let R=0;R<Ee.length;R+=1)Ee[R].c();D=te("g"),J=te("path");for(let R=0;R<N.length;R+=1)N[R].c();ce=te("g"),se=te("path");for(let R=0;R<me.length;R+=1)me[R].c();Pe=te("g"),fe=te("g"),Ce=ye("''"),this.h()},l(R){t=ne(R,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var q=L(t);n=ve(q,"Trade Over Time"),q.forEach(p),i=ne(R,"g",{class:!0}),L(i).forEach(p),Ie&&Ie.l(R),a=ne(R,"g",{id:!0,class:!0,transform:!0});var ue=L(a);l=ne(ue,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),L(l).forEach(p),s=ne(ue,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var Xe=L(s);u=ve(Xe,"Year"),Xe.forEach(p),ue.forEach(p),d=ne(R,"g",{id:!0,class:!0,transform:!0});var Ue=L(d);_=ne(Ue,"text",{x:!0,y:!0,"text-anchor":!0,class:!0,transform:!0});var je=L(_);v=ve(je,"Gross Exports/Imports"),je.forEach(p),Ue.forEach(p),y=ne(R,"g",{id:!0,class:!0,transform:!0});var at=L(y);w=ne(at,"text",{x:!0,y:!0,"text-anchor":!0,class:!0,transform:!0});var et=L(w);I=ve(et,"Net Exports"),et.forEach(p),at.forEach(p),b=ne(R,"g",{id:!0,transform:!0});var Je=L(b);V=ne(Je,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(V).forEach(p),W=ne(Je,"text",{class:!0,x:!0,y:!0,"font-size":!0,"text-anchor":!0});var pt=L(W);P=ve(pt,"Export "),C=ve(pt,O),pt.forEach(p),T=ne(Je,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(T).forEach(p),U=ne(Je,"text",{class:!0,x:!0,y:!0,"font-size":!0,"text-anchor":!0});var tt=L(U);B=ve(tt,"Import "),S=ve(tt,z),tt.forEach(p),Je.forEach(p),M=ne(R,"g",{id:!0,transform:!0});var Et=L(M);ae=ne(Et,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),L(ae).forEach(p),j=ne(Et,"text",{class:!0,x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Ot=L(j);re=ve(Ot,"Trade Deficit"),Ot.forEach(p),he=ne(Et,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),L(he).forEach(p),F=ne(Et,"text",{class:!0,x:!0,y:!0,"font-size":!0,"text-anchor":!0});var Qt=L(F);Y=ve(Qt,"Trade Surplus"),Qt.forEach(p),Et.forEach(p),ie=ne(R,"g",{id:!0});var Gt=L(ie);G&&G.l(Gt),we=Se();for(let Fe=0;Fe<Ee.length;Fe+=1)Ee[Fe].l(Gt);Gt.forEach(p),D=ne(R,"g",{class:!0});var It=L(D);J=ne(It,"path",{fill:!0,stroke:!0,"stroke-width":!0}),L(J).forEach(p);for(let Fe=0;Fe<N.length;Fe+=1)N[Fe].l(It);It.forEach(p),ce=ne(R,"g",{class:!0});var Ut=L(ce);se=ne(Ut,"path",{fill:!0,stroke:!0,"stroke-width":!0}),L(se).forEach(p);for(let Fe=0;Fe<me.length;Fe+=1)me[Fe].l(Ut);Ut.forEach(p),Pe=ne(R,"g",{}),L(Pe).forEach(p),fe=ne(R,"g",{id:!0,class:!0}),L(fe).forEach(p),Ce=ve(R,"''"),this.h()},h(){f(t,"class","chart-header"),f(t,"x",r=e[2]/2+10),f(t,"y",lt-5),f(t,"text-anchor","middle"),f(i,"class","brush"),f(l,"id","xAxisLine"),f(l,"x1",_n),f(l,"x2",o=e[2]-Ht),f(l,"y1","0"),f(l,"y2","0"),f(l,"stroke","rgba(0,0,0,1)"),f(l,"stroke-width","1"),f(s,"class","axis-label"),f(s,"x",h=e[2]/2),f(s,"y",lt-3),f(s,"text-anchor","start"),f(a,"id","xAxis"),f(a,"class","axis-ticks"),f(a,"transform",c=`translate(${0},${e[3]-lt})`),f(_,"x",0),f(_,"y",-_n),f(_,"text-anchor","center"),f(_,"class","axis-label"),f(_,"transform",k=`translate(10,${e[3]/2.5}) rotate(-90)`),f(d,"id","yAisLeft"),f(d,"class","axis-ticks"),f(d,"transform",`translate(${_n},${0})`),f(w,"x",0),f(w,"y",-_n),f(w,"text-anchor","start"),f(w,"class","axis-label"),f(w,"transform",A=`translate(-4,${e[3]/2.5}) rotate(90)`),f(y,"id","yAisRight"),f(y,"class","axis-ticks"),f(y,"transform",m=`translate(${e[2]-Ht},${0})`),f(V,"class","circ1"),f(V,"cx","20"),f(V,"cy","10"),f(V,"r","5"),f(V,"fill",ln),f(V,"stroke","rgba(0,0,0,0)"),f(V,"stroke-width","2"),f(W,"class","axis-label"),f(W,"x","30"),f(W,"y","15"),f(W,"font-size","13"),f(W,"text-anchor","start"),f(T,"class","circ2"),f(T,"cx","20"),f(T,"cy","25"),f(T,"r","5"),f(T,"fill",an),f(T,"stroke","rgba(0,0,0,0)"),f(T,"stroke-width","2"),f(U,"class","axis-label"),f(U,"x","30"),f(U,"y","30"),f(U,"font-size","13"),f(U,"text-anchor","start"),f(b,"id","legendLeft"),f(b,"transform","translate(0,6)"),f(ae,"class","deficit svelte-hitye1"),f(ae,"x","15"),f(ae,"y","5"),f(ae,"width","10"),f(ae,"height","10"),f(ae,"fill",xr),f(ae,"opacity","0.6"),f(j,"class","axis-label"),f(j,"x","30"),f(j,"y","15"),f(j,"font-size","13"),f(j,"text-anchor","start"),f(he,"class","surplus svelte-hitye1"),f(he,"x","15"),f(he,"y","20"),f(he,"width","10"),f(he,"height","10"),f(he,"fill",Kr),f(he,"opacity","0.6"),f(F,"class","axis-label"),f(F,"x","30"),f(F,"y","30"),f(F,"font-size","13"),f(F,"text-anchor","start"),f(M,"id","legendRight"),f(M,"transform",le=`translate(${e[2]-2*Ht+2},6)`),f(ie,"id","net-values-group"),f(J,"fill","none"),f(J,"stroke",ln),f(J,"stroke-width","2"),f(D,"class","country1-group country-group svelte-hitye1"),f(se,"fill","none"),f(se,"stroke",an),f(se,"stroke-width","2"),f(ce,"class","country2-group country-group svelte-hitye1"),f(fe,"id","line-chart-tooltip"),f(fe,"class","tooltip")},m(R,q){K(R,t,q),E(t,n),K(R,i,q),e[41](i),Ie&&Ie.m(R,q),K(R,a,q),E(a,l),E(a,s),E(s,u),e[42](a),K(R,d,q),E(d,_),E(_,v),e[43](d),K(R,y,q),E(y,w),E(w,I),e[44](y),K(R,b,q),E(b,V),E(b,W),E(W,P),E(W,C),E(b,T),E(b,U),E(U,B),E(U,S),K(R,M,q),E(M,ae),E(M,j),E(j,re),E(M,he),E(M,F),E(F,Y),K(R,ie,q),G&&G.m(ie,null),E(ie,we);for(let ue=0;ue<Ee.length;ue+=1)Ee[ue].m(ie,null);K(R,D,q),E(D,J),e[45](J);for(let ue=0;ue<N.length;ue+=1)N[ue].m(D,null);K(R,ce,q),E(ce,se),e[46](se);for(let ue=0;ue<me.length;ue+=1)me[ue].m(ce,null);K(R,Pe,q),K(R,fe,q),K(R,Ce,q)},p(R,q){var ue,Xe,Ue,je;q[0]&4&&r!==(r=R[2]/2+10)&&f(t,"x",r),R[16]?Ie&&(Ie.d(1),Ie=null):Ie?Ie.p(R,q):(Ie=Ba(R),Ie.c(),Ie.m(a.parentNode,a)),q[0]&4&&o!==(o=R[2]-Ht)&&f(l,"x2",o),q[0]&4&&h!==(h=R[2]/2)&&f(s,"x",h),q[0]&8&&c!==(c=`translate(${0},${R[3]-lt})`)&&f(a,"transform",c),q[0]&8&&k!==(k=`translate(10,${R[3]/2.5}) rotate(-90)`)&&f(_,"transform",k),q[0]&8&&A!==(A=`translate(-4,${R[3]/2.5}) rotate(90)`)&&f(w,"transform",A),q[0]&4&&m!==(m=`translate(${R[2]-Ht},${0})`)&&f(y,"transform",m),q[0]&3&&O!==(O=((Xe=`to ${(ue=R[0].get(R[1]))==null?void 0:ue.name}`)!=null?Xe:"")+"")&&We(C,O),q[0]&3&&z!==(z=((je=`from ${(Ue=R[0].get(R[1]))==null?void 0:Ue.name}`)!=null?je:"")+"")&&We(S,z),q[0]&4&&le!==(le=`translate(${R[2]-2*Ht+2},6)`)&&f(M,"transform",le),R[12]>0&&R[11]<0?G?G.p(R,q):(G=Pa(R),G.c(),G.m(ie,we)):G&&(G.d(1),G=null),q[0]&31375360&&(Ne=R[15],Ee=nn(Ee,q,De,1,R,Ne,_e,ie,Rn,Ga,null,Ha)),q[0]&20504576&&(H=R[15],N=nn(N,q,Q,1,R,H,oe,D,Rn,Ua,null,Fa)),q[0]&20504576&&(pe=R[15],me=nn(me,q,He,1,R,pe,Ve,ce,Rn,Ya,null,Va))},i:Be,o:Be,d(R){R&&p(t),R&&p(i),e[41](null),Ie&&Ie.d(R),R&&p(a),e[42](null),R&&p(d),e[43](null),R&&p(y),e[44](null),R&&p(b),R&&p(M),R&&p(ie),G&&G.d();for(let q=0;q<Ee.length;q+=1)Ee[q].d();R&&p(D),e[45](null);for(let q=0;q<N.length;q+=1)N[q].d();R&&p(ce),e[46](null);for(let q=0;q<me.length;q+=1)me[q].d();R&&p(Pe),R&&p(fe),R&&p(Ce)}}}function Ba(e){let t,n,r;return{c(){t=te("rect"),this.h()},l(i){t=ne(i,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),L(t).forEach(p),this.h()},h(){f(t,"class","timebar svelte-hitye1"),f(t,"x",n=e[14](e[19][0])-12),f(t,"y",44),f(t,"width","24"),f(t,"height",r=e[3]-44-lt>0?e[3]-44-lt:0),f(t,"fill","rgba(0,0,0,0.2)")},m(i,a){K(i,t,a)},p(i,a){a[0]&540672&&n!==(n=i[14](i[19][0])-12)&&f(t,"x",n),a[0]&8&&r!==(r=i[3]-44-lt>0?i[3]-44-lt:0)&&f(t,"height",r)},d(i){i&&p(t)}}}function Pa(e){let t,n,r,i;return{c(){t=te("line"),this.h()},l(a){t=ne(a,"line",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),L(t).forEach(p),this.h()},h(){f(t,"id","zeroline"),f(t,"x1",_n),f(t,"x2",n=e[2]-Ht),f(t,"y1",r=e[10](0)),f(t,"y2",i=e[10](0)),f(t,"stroke","rgba(0,0,0,0.7)"),f(t,"stroke-width","1")},m(a,l){K(a,t,l)},p(a,l){l[0]&4&&n!==(n=a[2]-Ht)&&f(t,"x2",n),l[0]&1024&&r!==(r=a[10](0))&&f(t,"y1",r),l[0]&1024&&i!==(i=a[10](0))&&f(t,"y2",i)},d(a){a&&p(t)}}}function Ga(e,t){let n,r,i,a,l,o,s,u;return{key:e,first:null,c(){n=te("rect"),this.h()},l(h){n=ne(h,"rect",{x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,opacity:!0,class:!0}),L(n).forEach(p),this.h()},h(){f(n,"x",r=t[14](t[54].year)-Qn/2),f(n,"width",Qn),f(n,"y",i=t[18](t[54])),f(n,"height",a=t[17](t[54])>0?t[17](t[54]):0),f(n,"fill",l=t[54].export_value<t[54].import_value?xr:Kr),f(n,"stroke",o=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),f(n,"opacity","0.6"),f(n,"class","svelte-hitye1"),this.first=n},m(h,c){K(h,n,c),s||(u=[x(n,"click",function(){Ze(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),x(n,"keydown",cd),x(n,"keypress",t[38]),x(n,"click",function(){Ze(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),x(n,"focus",t[39]),x(n,"blur",t[40]),x(n,"mouseover",function(){Ze(t[22](t[54]))&&t[22](t[54]).apply(this,arguments)}),x(n,"mousemove",t[23]()),x(n,"mouseout",t[24]())],s=!0)},p(h,c){t=h,c[0]&49152&&r!==(r=t[14](t[54].year)-Qn/2)&&f(n,"x",r),c[0]&294912&&i!==(i=t[18](t[54]))&&f(n,"y",i),c[0]&163840&&a!==(a=t[17](t[54])>0?t[17](t[54]):0)&&f(n,"height",a),c[0]&32768&&l!==(l=t[54].export_value<t[54].import_value?xr:Kr)&&f(n,"fill",l),c[0]&557056&&o!==(o=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&f(n,"stroke",o)},d(h){h&&p(n),s=!1,gt(u)}}}function Ua(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=te("circle"),this.h()},l(u){n=ne(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(n).forEach(p),this.h()},h(){f(n,"class","circ1 svelte-hitye1"),f(n,"cx",r=t[14](t[54].year)),f(n,"cy",i=t[13](t[54].export_value)),f(n,"r",a=t[19].includes(t[54].year)?8:7),f(n,"fill",ln),f(n,"stroke",l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666"),f(n,"stroke-width","1"),this.first=n},m(u,h){K(u,n,h),o||(s=[x(n,"click",function(){Ze(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),x(n,"keydown",hd),x(n,"keypress",t[35]),x(n,"click",function(){Ze(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),x(n,"focus",t[36]),x(n,"blur",t[37]),x(n,"mouseover",function(){Ze(t[21](t[54],!0))&&t[21](t[54],!0).apply(this,arguments)}),x(n,"mouseout",t[24]())],o=!0)},p(u,h){t=u,h[0]&49152&&r!==(r=t[14](t[54].year))&&f(n,"cx",r),h[0]&40960&&i!==(i=t[13](t[54].export_value))&&f(n,"cy",i),h[0]&557056&&a!==(a=t[19].includes(t[54].year)?8:7)&&f(n,"r",a),h[0]&557056&&l!==(l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666")&&f(n,"stroke",l)},d(u){u&&p(n),o=!1,gt(s)}}}function Ya(e,t){let n,r,i,a,l,o,s;return{key:e,first:null,c(){n=te("circle"),this.h()},l(u){n=ne(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),L(n).forEach(p),this.h()},h(){f(n,"cx",r=t[14](t[54].year)),f(n,"cy",i=t[13](t[54].import_value)),f(n,"r",a=t[19].includes(t[54].year)?"7":"6"),f(n,"fill",an),f(n,"stroke",l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666"),f(n,"stroke-width","1"),f(n,"class","svelte-hitye1"),this.first=n},m(u,h){K(u,n,h),o||(s=[x(n,"click",function(){Ze(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),x(n,"keydown",dd),x(n,"keypress",t[32]),x(n,"click",function(){Ze(t[20](t[54].year))&&t[20](t[54].year).apply(this,arguments)}),x(n,"focus",t[33]),x(n,"blur",t[34]),x(n,"mouseover",function(){Ze(t[21](t[54],!1))&&t[21](t[54],!1).apply(this,arguments)}),x(n,"mouseout",t[24]())],o=!0)},p(u,h){t=u,h[0]&49152&&r!==(r=t[14](t[54].year))&&f(n,"cx",r),h[0]&40960&&i!==(i=t[13](t[54].import_value))&&f(n,"cy",i),h[0]&557056&&a!==(a=t[19].includes(t[54].year)?"7":"6")&&f(n,"r",a),h[0]&557056&&l!==(l=t[19].includes(t[54].year)?"rgba(0,0,0,1)":"#666666")&&f(n,"stroke",l)},d(u){u&&p(n),o=!1,gt(s)}}}function ud(e){let t,n,r;function i(o,s){return o[15].length>0?sd:od}let a=i(e),l=a(e);return{c(){t=$("div"),n=te("svg"),l.c(),this.h()},l(o){t=ee(o,"DIV",{id:!0,class:!0});var s=L(t);n=ne(s,"svg",{width:!0,height:!0});var u=L(n);l.l(u),u.forEach(p),s.forEach(p),this.h()},h(){f(n,"width",e[2]),f(n,"height",e[3]),f(t,"id","line-chart"),f(t,"class","viz-section"),wn(()=>e[47].call(t))},m(o,s){K(o,t,s),E(t,n),l.m(n,null),r=Zr(t,e[47].bind(t))},p(o,s){a===(a=i(o))&&l?l.p(o,s):(l.d(1),l=a(o),l&&(l.c(),ge(l,1),l.m(n,null))),s[0]&4&&f(n,"width",o[2]),s[0]&8&&f(n,"height",o[3])},i(o){ge(l)},o:Be,d(o){o&&p(t),l.d(),r()}}}const lt=35,yr=15,_n=55,Ht=61,Qn=16,Mn=10,vr=180,qt=68,fd=22,Zt=20,_i=35,Cn=37,Nn=22,cd=()=>{},hd=()=>{},dd=()=>{};function _d(e,t,n){let r,i,a,l,o,s,u,h,c,d,_,v,k;Mt(e,ct,G=>n(31,v=G)),Mt(e,dn,G=>n(19,k=G));let{data:y}=t,{bilateralData:w,locationData:I,productData:A,country1_id:m,country2_id:b}=y,V=0,W=0;const P=G=>rn("$.3s")(G).replace(/G/,"B");let O,C,T,U,B,z,S=!1,M;function ae(G){return()=>{n(16,S=!1),Me(U).call(s.clear),dn.set([G])}}function j(G,Ne){return G+vr<V?G+Ne:G+Ne-vr}function re(G,Ne,De){return G+De<W?G+Ne:G+Ne-qt}function he(G,Ne){return De=>{var pe,He,Ge;let H=Me("#line-chart-tooltip"),Q=qt+M.length*fd;if(H.append("rect").attr("width",vr).attr("height",Q).attr("x",j(De.layerX,Mn)).attr("y",re(De.layerY,Mn,Q)),H.append("text").attr("class","title").attr("x",j(De.layerX,Zt)).attr("y",re(De.layerY,_i,Q)).style("fill",Ne?ln:an).text(`${G.year} `+(Ne?"Export":"Import")),v.size>0){for(let Re=0;Re<M.length;Re++){let X=(pe=i==null?void 0:i.get(G.year))==null?void 0:pe.filter(Oe=>Oe.product.name==M[Re])[0];H.append("text").attr("x",j(De.layerX,Zt)).attr("y",re(De.layerY,Cn+(Re+1)*Nn,Q)).text(`${M[Re]}: ${P(Ne?(He=X==null?void 0:X.export_value)!=null?He:0:(Ge=X==null?void 0:X.import_value)!=null?Ge:0)}`)}H.append("text").attr("x",j(De.layerX,Zt)).attr("y",re(De.layerY,Cn+(M.length+1)*Nn,Q)).style("font-weight","bold").text(`Selected Total:  ${P(Ne?G.export_value:G.import_value)}`)}else H.append("text").attr("x",j(De.layerX,Zt)).attr("y",re(De.layerY,Cn+Nn,Q)).text((v.size==0?"Total: ":"Selected Total: ")+`${P(Ne?G.export_value:G.import_value)}`),H.append("text").attr("x",j(De.layerX,Zt)).attr("y",re(De.layerY,Cn+2*Nn,Q)).text("Sectors: All")}}function F(G){return Ne=>{let De=Me("#line-chart-tooltip"),H=G.export_value-G.import_value;De.append("rect").attr("id","tooltip-rect").attr("width",vr).attr("height",qt).attr("x",j(Ne.layerX,Mn)).attr("y",re(Ne.layerY,Mn,qt)),De.append("text").attr("class","title").attr("id","tooltip-text1").attr("x",j(Ne.layerX,Zt)).attr("y",re(Ne.layerY,_i,qt)).style("fill",H<0?xr:Kr).text(`${G.year} `+(H<0?"Deficit":"Surplus")),De.append("text").attr("id","tooltip-text2").attr("x",j(Ne.layerX,Zt)).attr("y",re(Ne.layerY,Cn+Nn,qt)).text((v.size>0?"Selected ":"")+`Total: ${P(Math.abs(G.export_value-G.import_value))}`)}}function Y(){return G=>{Me("#tooltip-rect").attr("x",j(G.layerX,Mn)).attr("y",re(G.layerY,Mn,qt)),Me("#tooltip-text1").attr("x",j(G.layerX,Zt)).attr("y",re(G.layerY,_i,qt)),Me("#tooltip-text2").attr("x",j(G.layerX,Zt)).attr("y",re(G.layerY,Cn+Nn,qt))}}function le(){return G=>{Me("#line-chart-tooltip").selectAll("rect").remove(),Me("#line-chart-tooltip").selectAll("text").remove()}}function ie(G){_t.call(this,e,G)}function we(G){_t.call(this,e,G)}function Ee(G){_t.call(this,e,G)}function _e(G){_t.call(this,e,G)}function D(G){_t.call(this,e,G)}function J(G){_t.call(this,e,G)}function N(G){_t.call(this,e,G)}function oe(G){_t.call(this,e,G)}function ce(G){_t.call(this,e,G)}function se(G){ht[G?"unshift":"push"](()=>{U=G,n(7,U)})}function me(G){ht[G?"unshift":"push"](()=>{O=G,n(4,O)})}function Ve(G){ht[G?"unshift":"push"](()=>{C=G,n(5,C)})}function Pe(G){ht[G?"unshift":"push"](()=>{T=G,n(6,T)})}function fe(G){ht[G?"unshift":"push"](()=>{B=G,n(8,B)})}function Ce(G){ht[G?"unshift":"push"](()=>{z=G,n(9,z)})}function Ie(){V=this.clientWidth,W=this.clientHeight,n(2,V),n(3,W)}return e.$$set=G=>{"data"in G&&n(25,y=G.data)},e.$$.update=()=>{var G,Ne,De,H,Q,pe,He,Ge,Re;if(e.$$.dirty[0]&33554432&&n(26,{bilateralData:w,locationData:I,productData:A,country1_id:m,country2_id:b}=y,w,(n(0,I),n(25,y)),(n(27,A),n(25,y)),(n(28,m),n(25,y)),(n(1,b),n(25,y))),e.$$.dirty[0]&469762051|e.$$.dirty[1]&1&&n(15,r=Array.from((De=(Ne=(G=w==null?void 0:w.get(m))==null?void 0:G.get(b))==null?void 0:Ne.entries())!=null?De:new Array).map(X=>{let Oe=X[0],R=X[1];return R=v.size==0?R:R.filter(q=>v.has(q.product_id)),R.reduce((q,ue)=>(q.export_value+=ue.export_value,q.import_value+=ue.import_value,q),new jt(I,A,{location_id:m,partner_id:b,product_id:0,year:Oe,export_value:0,import_value:0}))}).sort((X,Oe)=>X.year-Oe.year)),e.$$.dirty[0]&335544322&&(i=(H=w==null?void 0:w.get(m))==null?void 0:H.get(b)),e.$$.dirty[0]&32772&&n(14,a=Jn().domain(io(r,X=>X.year)).range([_n+Qn/2,V-Ht-Qn/2])),e.$$.dirty[0]&32776&&n(13,l=Jn().domain([0,(Q=jn(r,X=>Math.max(X.export_value,X.import_value)))!=null?Q:0]).range([W-lt,lt+yr]).nice()),e.$$.dirty[0]&16384&&n(30,o=X=>{if((X==null?void 0:X.selection)===null||(X==null?void 0:X.selection[1])-(X==null?void 0:X.selection[0])<5)n(16,S=!1),dn.set([2020]);else{n(16,S=!0);let Oe=X.selection;const R=Oe[0],q=Oe[1];let ue=Math.ceil(a.invert(R)),Xe=Math.floor(a.invert(q)),Ue=[];for(let je=ue;je<=Xe;je++)Ue.push(je);dn.set(Ue)}}),e.$$.dirty[0]&1073741836&&n(29,s=rh().extent([[_n-1,lt+10],[V-Ht+1,W-lt]]).on("start brush end",o)),e.$$.dirty[0]&536871040&&Me(U).call(s),e.$$.dirty[0]&32768&&n(12,u=(pe=jn(r,X=>X.export_value-X.import_value))!=null?pe:0),e.$$.dirty[0]&32768&&n(11,h=(He=vl(r,X=>X.export_value-X.import_value))!=null?He:0),e.$$.dirty[0]&32776&&n(10,c=Jn().domain([(Ge=vl(r,X=>X.export_value-X.import_value))!=null?Ge:0,(Re=jn(r,X=>X.export_value-X.import_value))!=null?Re:0]).range([W-lt,lt+yr]).nice()),e.$$.dirty[0]&25712){let X=ao(a).tickFormat(rn("d"));Me(O).transition().call(X).select(".domain").attr("stroke-width",0);let Oe=As(l).tickFormat(q=>P(q));Me(C).transition().call(Oe);let R=Is(c).tickFormat(q=>P(q));Me(T).transition().call(R)}if(e.$$.dirty[0]&57600){let X=Hi();r.length>0&&(r.sort(Oe=>Oe.year),X.moveTo(a(r[0].year),l(r[0].export_value))),r.forEach(Oe=>{X.lineTo(a(Oe.year),l(Oe.export_value))}),Me(B).transition().attr("d",X.toString())}if(e.$$.dirty[0]&57856){let X=Hi();r.length>0&&X.moveTo(a(r[0].year),l(r[0].import_value)),r.forEach(Oe=>{X.lineTo(a(Oe.year),l(Oe.import_value))}),Me(z).transition().attr("d",X.toString())}e.$$.dirty[0]&134217728|e.$$.dirty[1]&1&&(M=v.size==0?["All"]:Array.from(v.values()).map(X=>{var Oe,R;return(R=(Oe=A==null?void 0:A.get(X))==null?void 0:Oe.name)!=null?R:"something"}).sort()),e.$$.dirty[0]&7168&&n(18,d=X=>X.export_value<X.import_value?u<0?lt+yr:c(0):(h>0,c(X.export_value-X.import_value))),e.$$.dirty[0]&7176&&n(17,_=X=>X.export_value<X.import_value?u<0?c(X.export_value-X.import_value)-lt-yr:c(X.export_value-X.import_value)-c(0):h>0?W-lt-c(X.export_value-X.import_value):c(0)-c(X.export_value-X.import_value))},[I,b,V,W,O,C,T,U,B,z,c,h,u,l,a,r,S,_,d,k,ae,he,F,Y,le,y,w,A,m,s,o,v,ie,we,Ee,_e,D,J,N,oe,ce,se,me,Ve,Pe,fe,Ce,Ie]}class md extends Ct{constructor(t){super(),Nt(this,t,_d,ud,Lt,{data:25},null,[-1,-1])}}const{Map:gd}=rs;function za(e,t,n){const r=e.slice();return r[34]=t[n],r[36]=n,r}function Xa(e){let t,n,r,i,a,l=e[34].x1-e[34].x0>0&&e[34].y1-e[34].y0>0&&Wa(e),o=e[34].x1-e[34].x0>3&&e[34].y1-e[34].y0>0&&Ka(e),s=e[34].y1-e[34].y0>15&&xa(e),u=e[34].y1-e[34].y0>35&&qa(e);return{c(){t=te("g"),l&&l.c(),n=Se(),o&&o.c(),r=Se(),s&&s.c(),i=Se(),u&&u.c(),this.h()},l(h){t=ne(h,"g",{class:!0,transform:!0});var c=L(t);l&&l.l(c),n=Se(),o&&o.l(c),r=Se(),s&&s.l(c),i=Se(),u&&u.l(c),c.forEach(p),this.h()},h(){f(t,"class","treemap-inner svelte-l0kcz7"),f(t,"transform",a=`translate(${e[34].x0},${e[34].y0})`)},m(h,c){K(h,t,c),l&&l.m(t,null),E(t,n),o&&o.m(t,null),E(t,r),s&&s.m(t,null),E(t,i),u&&u.m(t,null)},p(h,c){h[34].x1-h[34].x0>0&&h[34].y1-h[34].y0>0?l?l.p(h,c):(l=Wa(h),l.c(),l.m(t,n)):l&&(l.d(1),l=null),h[34].x1-h[34].x0>3&&h[34].y1-h[34].y0>0?o?o.p(h,c):(o=Ka(h),o.c(),o.m(t,r)):o&&(o.d(1),o=null),h[34].y1-h[34].y0>15?s?s.p(h,c):(s=xa(h),s.c(),s.m(t,i)):s&&(s.d(1),s=null),h[34].y1-h[34].y0>35?u?u.p(h,c):(u=qa(h),u.c(),u.m(t,null)):u&&(u.d(1),u=null),c[0]&256&&a!==(a=`translate(${h[34].x0},${h[34].y0})`)&&f(t,"transform",a)},d(h){h&&p(t),l&&l.d(),o&&o.d(),s&&s.d(),u&&u.d()}}}function Wa(e){let t,n,r,i,a,l;return{c(){t=te("rect"),this.h()},l(o){t=ne(o,"rect",{class:!0,width:!0,height:!0,fill:!0}),L(t).forEach(p),this.h()},h(){var o,s,u,h;f(t,"class","leaf svelte-l0kcz7"),f(t,"width",n=e[34].x1-e[34].x0),f(t,"height",r=e[34].y1-e[34].y0),f(t,"fill",i=e[5]?e[5]((h=(u=(s=(o=e[34].data)==null?void 0:o.product)==null?void 0:s.parent)==null?void 0:u.name)!=null?h:""):"white")},m(o,s){K(o,t,s),a||(l=[x(t,"keydown",yd),x(t,"click",function(){Ze(e[14](e[34].data))&&e[14](e[34].data).apply(this,arguments)}),x(t,"focus",e[27]),x(t,"mouseover",function(){Ze(e[11](e[34].data))&&e[11](e[34].data).apply(this,arguments)}),x(t,"mousemove",function(){Ze(e[12](e[34].data))&&e[12](e[34].data).apply(this,arguments)}),x(t,"mouseleave",e[13]())],a=!0)},p(o,s){var u,h,c,d;e=o,s[0]&256&&n!==(n=e[34].x1-e[34].x0)&&f(t,"width",n),s[0]&256&&r!==(r=e[34].y1-e[34].y0)&&f(t,"height",r),s[0]&288&&i!==(i=e[5]?e[5]((d=(c=(h=(u=e[34].data)==null?void 0:u.product)==null?void 0:h.parent)==null?void 0:c.name)!=null?d:""):"white")&&f(t,"fill",i)},d(o){o&&p(t),a=!1,gt(l)}}}function Ka(e){let t,n,r,i,a;return{c(){t=te("clipPath"),n=te("rect"),this.h()},l(l){t=ne(l,"clipPath",{id:!0});var o=L(t);n=ne(o,"rect",{width:!0,height:!0,class:!0}),L(n).forEach(p),o.forEach(p),this.h()},h(){f(n,"width",r=e[34].x1-e[34].x0-3),f(n,"height",i=e[34].y1-e[34].y0),f(n,"class","svelte-l0kcz7"),f(t,"id",a=`${e[10]}-clip-${e[36]}`)},m(l,o){K(l,t,o),E(t,n)},p(l,o){o[0]&256&&r!==(r=l[34].x1-l[34].x0-3)&&f(n,"width",r),o[0]&256&&i!==(i=l[34].y1-l[34].y0)&&f(n,"height",i),o[0]&256&&a!==(a=`${l[10]}-clip-${l[36]}`)&&f(t,"id",a)},d(l){l&&p(t)}}}function xa(e){var o,s,u;let t,n=((u=(s=(o=e[34].data)==null?void 0:o.product.name)==null?void 0:s.substring(0,40))!=null?u:"")+"",r,i,a,l;return{c(){t=te("text"),r=ye(n),this.h()},l(h){t=ne(h,"text",{class:!0,"clip-path":!0,transform:!0,"alignment-baseline":!0});var c=L(t);r=ve(c,n),c.forEach(p),this.h()},h(){f(t,"class","label svelte-l0kcz7"),f(t,"clip-path",i=`url(${new URL(`#${e[10]}-clip-${e[36]}`,window.location.href)})`),f(t,"transform","translate(4,5)"),f(t,"alignment-baseline","hanging")},m(h,c){K(h,t,c),E(t,r),a||(l=[x(t,"keydown",vd),x(t,"click",function(){Ze(e[14](e[34].data))&&e[14](e[34].data).apply(this,arguments)}),x(t,"focus",e[26]),x(t,"mouseover",function(){Ze(e[11](e[34].data))&&e[11](e[34].data).apply(this,arguments)}),x(t,"mousemove",function(){Ze(e[12](e[34].data))&&e[12](e[34].data).apply(this,arguments)}),x(t,"mouseleave",e[13]())],a=!0)},p(h,c){var d,_,v;e=h,c[0]&256&&n!==(n=((v=(_=(d=e[34].data)==null?void 0:d.product.name)==null?void 0:_.substring(0,40))!=null?v:"")+"")&&We(r,n),c[0]&256&&i!==(i=`url(${new URL(`#${e[10]}-clip-${e[36]}`,window.location.href)})`)&&f(t,"clip-path",i)},d(h){h&&p(t),a=!1,gt(l)}}}function qa(e){let t,n=e[9](e[4]?e[34].data.export_value:e[34].data.import_value)+"",r,i,a,l;return{c(){t=te("text"),r=ye(n),this.h()},l(o){t=ne(o,"text",{class:!0,"clip-path":!0,transform:!0,"alignment-baseline":!0,"font-weight":!0});var s=L(t);r=ve(s,n),s.forEach(p),this.h()},h(){f(t,"class","label-num svelte-l0kcz7"),f(t,"clip-path",i=`url(${new URL(`#${e[10]}-clip-${e[36]}`,window.location.href)})`),f(t,"transform",`translate(4,${23})`),f(t,"alignment-baseline","hanging"),f(t,"font-weight","300")},m(o,s){K(o,t,s),E(t,r),a||(l=[x(t,"keydown",wd),x(t,"click",function(){Ze(e[14](e[34].data))&&e[14](e[34].data).apply(this,arguments)}),x(t,"focus",e[25]),x(t,"mouseover",function(){Ze(e[11](e[34].data))&&e[11](e[34].data).apply(this,arguments)}),x(t,"mousemove",function(){Ze(e[12](e[34].data))&&e[12](e[34].data).apply(this,arguments)}),x(t,"mouseleave",e[13]())],a=!0)},p(o,s){e=o,s[0]&272&&n!==(n=e[9](e[4]?e[34].data.export_value:e[34].data.import_value)+"")&&We(r,n),s[0]&256&&i!==(i=`url(${new URL(`#${e[10]}-clip-${e[36]}`,window.location.href)})`)&&f(t,"clip-path",i)},d(o){o&&p(t),a=!1,gt(l)}}}function Za(e,t){let n,r,i=t[3].length>0&&Xa(t);return{key:e,first:null,c(){n=Se(),i&&i.c(),r=Se(),this.h()},l(a){n=Se(),i&&i.l(a),r=Se(),this.h()},h(){this.first=n},m(a,l){K(a,n,l),i&&i.m(a,l),K(a,r,l)},p(a,l){t=a,t[3].length>0?i?i.p(t,l):(i=Xa(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&p(n),i&&i.d(a),a&&p(r)}}}function ja(e){let t,n,r,i=e[6]?"Loading...":"No valid data for this pair.",a,l,o;return{c(){t=te("rect"),r=te("text"),a=ye(i),this.h()},l(s){t=ne(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),L(t).forEach(p),r=ne(s,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=L(r);a=ve(u,i),u.forEach(p),this.h()},h(){f(t,"x","0"),f(t,"y","0"),f(t,"width",e[0]),f(t,"height",e[1]),f(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),f(r,"x",l=e[0]/2),f(r,"y",o=e[1]/2),f(r,"alignment-baseline","central"),f(r,"text-anchor","middle")},m(s,u){K(s,t,u),K(s,r,u),E(r,a)},p(s,u){u[0]&1&&f(t,"width",s[0]),u[0]&2&&f(t,"height",s[1]),u[0]&64&&n!==(n=s[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&f(t,"fill",n),u[0]&64&&i!==(i=s[6]?"Loading...":"No valid data for this pair.")&&We(a,i),u[0]&1&&l!==(l=s[0]/2)&&f(r,"x",l),u[0]&2&&o!==(o=s[1]/2)&&f(r,"y",o)},d(s){s&&p(t),s&&p(r)}}}function pd(e){var c,d;let t,n,r,i=[],a=new gd,l,o,s=e[8];const u=_=>_[34].data.product_id;for(let _=0;_<s.length;_+=1){let v=za(e,s,_),k=u(v);a.set(k,i[_]=Za(k,v))}let h=((d=(c=e[2])==null?void 0:c.length)!=null?d:0)===0&&ja(e);return{c(){t=$("div"),n=te("svg"),r=te("g");for(let _=0;_<i.length;_+=1)i[_].c();l=te("g"),h&&h.c(),this.h()},l(_){t=ee(_,"DIV",{class:!0});var v=L(t);n=ne(v,"svg",{class:!0});var k=L(n);r=ne(k,"g",{class:!0});var y=L(r);for(let w=0;w<i.length;w+=1)i[w].l(y);y.forEach(p),l=ne(k,"g",{id:!0,class:!0}),L(l).forEach(p),h&&h.l(k),k.forEach(p),v.forEach(p),this.h()},h(){f(r,"class","treemap svelte-l0kcz7"),f(l,"id","treemap-tooltip"),f(l,"class","tooltip"),f(n,"class","svelte-l0kcz7"),f(t,"class","viz-section-full"),wn(()=>e[29].call(t))},m(_,v){K(_,t,v),E(t,n),E(n,r);for(let k=0;k<i.length;k+=1)i[k].m(r,null);e[28](r),E(n,l),h&&h.m(n,null),o=Zr(t,e[29].bind(t))},p(_,v){var k,y;v[0]&32568&&(s=_[8],i=nn(i,v,u,1,_,s,a,r,Rn,Za,null,za)),((y=(k=_[2])==null?void 0:k.length)!=null?y:0)===0?h?h.p(_,v):(h=ja(_),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},i:Be,o:Be,d(_){_&&p(t);for(let v=0;v<i.length;v+=1)i[v].d();e[28](null),h&&h.d(),o()}}}const wr=10,br=120,Ja=25,mi=90,Rt=20,Vt=28,tn=15,yd=()=>{},vd=()=>{},wd=()=>{};function bd(e,t,n){let r,i,a,l,o,s,u,h,c;Mt(e,ct,F=>n(24,u=F)),Mt(e,dn,F=>n(3,h=F)),Mt(e,gn,F=>n(4,c=F));const d=F=>rn("$.3s")(F).replace(/G/,"B"),_=`O-${Math.random().toString(16).slice(2)}`;let{data:v}=t,{country1:k,country2:y,productColorScale:w,drilldownBilateral:I,loadingDrilldown:A,locationData:m,productData:b}=v,V=0,W=0,P,O=new Array;function C(F,Y,le){return F+le<V?F+Y:F+Y-le}function T(F,Y){return F+mi<W?F+Y:F+Y-mi}function U(F){return Y=>{var we,Ee,_e;let le=Me("#treemap-tooltip"),ie=Math.max(br+h.length*Ja,br+10+(F.product.name.length-20)*8);le.append("rect").attr("id","tooltip-rect").attr("width",ie).attr("height",mi).attr("x",C(Y.layerX,wr,ie)).attr("y",T(Y.layerY,wr)),le.append("text").attr("class","treemap").attr("id","tooltip-text1").attr("x",C(Y.layerX,Rt,ie)).attr("y",T(Y.layerY,Vt)).style("font-weight","bold").text(`${F.product.name}`),le.append("text").attr("class","treemap").attr("id","tooltip-text2").attr("x",C(Y.layerX,Rt,ie)).attr("y",T(Y.layerY,Vt+tn)).text(`Sector: ${(_e=(Ee=(we=F.product)==null?void 0:we.parent)==null?void 0:Ee.name)!=null?_e:""}`),le.append("text").attr("class","treemap").attr("id","tooltip-text3").attr("x",C(Y.layerX,Rt,ie)).attr("y",T(Y.layerY,Vt+2*tn)).text((c?"Export: ":"Import: ")+`${d(c?F.export_value:F.import_value)}`),le.append("text").attr("class","treemap").attr("id","tooltip-text4").attr("x",C(Y.layerX,Rt,ie)).attr("y",T(Y.layerY,Vt+3*tn)).text(`Share: ${rn(".2%")(c?F.export_value/l:F.import_value/o)}`),le.append("text").attr("class","treemap").attr("id","tooltip-text5").attr("x",C(Y.layerX,Rt,ie)).attr("y",T(Y.layerY,Vt+4*tn)).text((h.length>1?"Years: ":"Year: ")+`${h.join(", ")}`)}}function B(F){return Y=>{let le=Math.max(br+h.length*Ja,br+10+(F.product.name.length-20)*8);Me("#tooltip-rect").attr("x",C(Y.layerX,wr,le)).attr("y",T(Y.layerY,wr)),Me("#tooltip-text1").attr("x",C(Y.layerX,Rt,le)).attr("y",T(Y.layerY,Vt)),Me("#tooltip-text2").attr("x",C(Y.layerX,Rt,le)).attr("y",T(Y.layerY,Vt+tn)),Me("#tooltip-text3").attr("x",C(Y.layerX,Rt,le)).attr("y",T(Y.layerY,Vt+2*tn)),Me("#tooltip-text4").attr("x",C(Y.layerX,Rt,le)).attr("y",T(Y.layerY,Vt+3*tn)),Me("#tooltip-text5").attr("x",C(Y.layerX,Rt,le)).attr("y",T(Y.layerY,Vt+4*tn))}}function z(){return F=>{Me("#treemap-tooltip").selectAll("rect").remove(),Me("#treemap-tooltip").selectAll("text").remove()}}function S(F){return Y=>{var le,ie,we,Ee;((le=F==null?void 0:F.product)==null?void 0:le.parent)&&u.has((we=(ie=F==null?void 0:F.product)==null?void 0:ie.parent)==null?void 0:we.id)?ct.update(_e=>{var D,J,N;return _e.delete((N=(J=(D=F==null?void 0:F.product)==null?void 0:D.parent)==null?void 0:J.id)!=null?N:-1),_e}):((Ee=F==null?void 0:F.product)==null?void 0:Ee.parent)!=null&&ct.update(_e=>{var D,J,N;return _e.add((N=(J=(D=F==null?void 0:F.product)==null?void 0:D.parent)==null?void 0:J.id)!=null?N:-1),_e})}}function M(F){_t.call(this,e,F)}function ae(F){_t.call(this,e,F)}function j(F){_t.call(this,e,F)}function re(F){ht[F?"unshift":"push"](()=>{P=F,n(7,P)})}function he(){V=this.clientWidth,W=this.clientHeight,n(0,V),n(1,W)}return e.$$set=F=>{"data"in F&&n(15,v=F.data)},e.$$.update=()=>{var F;if(e.$$.dirty[0]&32768&&n(18,{drilldownBilateral:I,productColorScale:w,country1:k,country2:y,loadingDrilldown:A,locationData:m,productData:b}=v,I,(n(5,w),n(15,v)),(n(16,k),n(15,v)),(n(17,y),n(15,v)),(n(6,A),n(15,v)),(n(19,m),n(15,v)),(n(20,b),n(15,v))),e.$$.dirty[0]&393216&&n(23,r=I==null?void 0:I.get((F=y==null?void 0:y.id)!=null?F:0)),e.$$.dirty[0]&8388616&&n(21,i=h.map(Y=>{var le;return(le=r==null?void 0:r.get(Y))!=null?le:new Array}).flat()),e.$$.dirty[0]&3866624&&n(22,a=Array.from(vi(i,Y=>Y.reduce((le,ie)=>(le.export_value+=ie.export_value,le.import_value+=ie.import_value,le),new jt(m,b,{location_id:k,partner_id:y,product_id:Y[0].product_id,year:0,export_value:0,import_value:0})),Y=>Y.product_id).values())),e.$$.dirty[0]&4194304&&(l=Dr(a,Y=>Y.export_value)),e.$$.dirty[0]&4194304&&(o=Dr(a,Y=>Y.import_value)),e.$$.dirty[0]&24838144&&n(2,s=u.size==0?a:Array.from(vi(i.filter(Y=>u.has(Y.product.parent_id)),Y=>Y.reduce((le,ie)=>(le.export_value+=ie.export_value,le.import_value+=ie.import_value,le),new jt(m,b,{location_id:k,partner_id:y,product_id:Y[0].product_id,year:0,export_value:0,import_value:0})),Y=>Y.product_id).values())),e.$$.dirty[0]&16973847&&s&&s.length>0){let Y=[];if(u.size==1){let ie=u.entries().next().value[1],we=new jt(new Map,new Map,{location_id:k,partner_id:y,product_id:ie,year:0,export_value:0,import_value:0});we.product=new Nr({product_id:ie,name:"Sector",level:-1,parent_id:-1}),we.product.parent_id=null,Y.push(we)}else{let ie=new jt(new Map,new Map,{location_id:k,partner_id:y,product_id:-1,year:0,export_value:0,import_value:0});ie.product=new Nr({product_id:-1,name:"All",level:-1,parent_id:-1}),ie.product.parent_id=null,Y.push(ie);let we=yi(s,Ee=>{var _e,D;return(D=(_e=Ee.product)==null?void 0:_e.parent_id)!=null?D:-1});if(we.size>1)for(let[Ee,_e]of we){let D=new jt(new Map,new Map,{location_id:k,partner_id:y,product_id:Ee,year:0,export_value:0,import_value:0});D.product=new Nr({product_id:Ee,name:"Something",level:0,parent_id:-1}),Y.push(D)}}Y=Y.concat(s);let le=jh().id(ie=>{var we;return(we=ie.product)==null?void 0:we.id}).parentId(ie=>{var we;return(we=ie.product)==null?void 0:we.parent_id})(Y);le.sum(ie=>Math.max(0,ie[c?"export_value":"import_value"])),n0().tile(r0).size([V,W]).padding(2)(le),n(8,O=le.leaves())}},[V,W,s,h,c,w,A,P,O,d,_,U,B,z,S,v,k,y,I,m,b,i,a,r,u,M,ae,j,re,he]}class kd extends Ct{constructor(t){super(),Nt(this,t,bd,pd,Lt,{data:15},null,[-1,-1])}}const Ed=new Map([["AFG","AF"],["ALA","AX"],["ALB","AL"],["DZA","DZ"],["ASM","AS"],["AND","AD"],["AGO","AO"],["AIA","AI"],["ATA","AQ"],["ATG","AG"],["ARG","AR"],["ARM","AM"],["ABW","AW"],["AUS","AU"],["AUT","AT"],["AZE","AZ"],["BHS","BS"],["BHR","BH"],["BGD","BD"],["BRB","BB"],["BLR","BY"],["BEL","BE"],["BLZ","BZ"],["BEN","BJ"],["BMU","BM"],["BTN","BT"],["BOL","BO"],["BIH","BA"],["BWA","BW"],["BVT","BV"],["BRA","BR"],["VGB","VG"],["IOT","IO"],["BRN","BN"],["BGR","BG"],["BFA","BF"],["BDI","BI"],["KHM","KH"],["CMR","CM"],["CAN","CA"],["CPV","CV"],["CYM","KY"],["CAF","CF"],["TCD","TD"],["CHL","CL"],["CHN","CN"],["HKG","HK"],["MAC","MO"],["CXR","CX"],["CCK","CC"],["COL","CO"],["COM","KM"],["COG","CG"],["COD","CD"],["COK","CK"],["CRI","CR"],["CIV","CI"],["HRV","HR"],["CUB","CU"],["CYP","CY"],["CZE","CZ"],["DNK","DK"],["DJI","DJ"],["DMA","DM"],["DOM","DO"],["ECU","EC"],["EGY","EG"],["SLV","SV"],["GNQ","GQ"],["ERI","ER"],["EST","EE"],["ETH","ET"],["FLK","FK"],["FRO","FO"],["FJI","FJ"],["FIN","FI"],["FRA","FR"],["GUF","GF"],["PYF","PF"],["ATF","TF"],["GAB","GA"],["GMB","GM"],["GEO","GE"],["DEU","DE"],["GHA","GH"],["GIB","GI"],["GRC","GR"],["GRL","GL"],["GRD","GD"],["GLP","GP"],["GUM","GU"],["GTM","GT"],["GGY","GG"],["GIN","GN"],["GNB","GW"],["GUY","GY"],["HTI","HT"],["HMD","HM"],["VAT","VA"],["HND","HN"],["HUN","HU"],["ISL","IS"],["IND","IN"],["IDN","ID"],["IRN","IR"],["IRQ","IQ"],["IRL","IE"],["IMN","IM"],["ISR","IL"],["ITA","IT"],["JAM","JM"],["JPN","JP"],["JEY","JE"],["JOR","JO"],["KAZ","KZ"],["KEN","KE"],["KIR","KI"],["PRK","KP"],["KOR","KR"],["KWT","KW"],["KGZ","KG"],["LAO","LA"],["LVA","LV"],["LBN","LB"],["LSO","LS"],["LBR","LR"],["LBY","LY"],["LIE","LI"],["LTU","LT"],["LUX","LU"],["MKD","MK"],["MDG","MG"],["MWI","MW"],["MYS","MY"],["MDV","MV"],["MLI","ML"],["MLT","MT"],["MHL","MH"],["MTQ","MQ"],["MRT","MR"],["MUS","MU"],["MYT","YT"],["MEX","MX"],["FSM","FM"],["MDA","MD"],["MCO","MC"],["MNG","MN"],["MNE","ME"],["MSR","MS"],["MAR","MA"],["MOZ","MZ"],["MMR","MM"],["NAM","NA"],["NRU","NR"],["NPL","NP"],["NLD","NL"],["ANT","AN"],["NCL","NC"],["NZL","NZ"],["NIC","NI"],["NER","NE"],["NGA","NG"],["NIU","NU"],["NFK","NF"],["MNP","MP"],["NOR","NO"],["OMN","OM"],["PAK","PK"],["PLW","PW"],["PSE","PS"],["PAN","PA"],["PNG","PG"],["PRY","PY"],["PER","PE"],["PHL","PH"],["PCN","PN"],["POL","PL"],["PRT","PT"],["PRI","PR"],["QAT","QA"],["REU","RE"],["ROU","RO"],["RUS","RU"],["RWA","RW"],["BLM","BL"],["SHN","SH"],["KNA","KN"],["LCA","LC"],["MAF","MF"],["SPM","PM"],["VCT","VC"],["WSM","WS"],["SMR","SM"],["STP","ST"],["SAU","SA"],["SEN","SN"],["SRB","RS"],["SYC","SC"],["SLE","SL"],["SGP","SG"],["SVK","SK"],["SVN","SI"],["SLB","SB"],["SOM","SO"],["ZAF","ZA"],["SGS","GS"],["SSD","SS"],["ESP","ES"],["LKA","LK"],["SDN","SD"],["SUR","SR"],["SJM","SJ"],["SWZ","SZ"],["SWE","SE"],["CHE","CH"],["SYR","SY"],["TWN","TW"],["TJK","TJ"],["TZA","TZ"],["THA","TH"],["TLS","TL"],["TGO","TG"],["TKL","TK"],["TON","TO"],["TTO","TT"],["TUN","TN"],["TUR","TR"],["TKM","TM"],["TCA","TC"],["TUV","TV"],["UGA","UG"],["UKR","UA"],["ARE","AE"],["GBR","GB"],["USA","US"],["UMI","UM"],["URY","UY"],["UZB","UZ"],["VUT","VU"],["VEN","VE"],["VNM","VN"],["VIR","VI"],["WLF","WF"],["ESH","EH"],["YEM","YE"],["ZMB","ZM"],["ZWE","ZW"],["XKX","XK"]]),kr=e=>{var t,n;return`https://cdn.jsdelivr.net/npm/flag-icons@6.3.0/flags/4x3/${(n=(t=Ed.get(e.toUpperCase()))==null?void 0:t.toLowerCase())!=null?n:"aq"}.svg`};function Id(e){let t,n,r,i,a,l;return{c(){t=$("div"),n=$("h3"),r=ye("Loading data..."),i=be(),a=te("svg"),l=te("circle"),this.h()},l(o){t=ee(o,"DIV",{class:!0});var s=L(t);n=ee(s,"H3",{});var u=L(n);r=ve(u,"Loading data..."),u.forEach(p),i=ke(s),a=ne(s,"svg",{class:!0,viewBox:!0});var h=L(a);l=ne(h,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),L(l).forEach(p),h.forEach(p),s.forEach(p),this.h()},h(){f(l,"class","path svelte-1kbkj0f"),f(l,"cx","25"),f(l,"cy","25"),f(l,"r","20"),f(l,"fill","none"),f(l,"stroke-width","5"),f(a,"class","spinner svelte-1kbkj0f"),f(a,"viewBox","0 0 50 50"),f(t,"class","loading svelte-1kbkj0f")},m(o,s){K(o,t,s),E(t,n),E(n,r),E(t,i),E(t,a),E(a,l)},p:Be,i:Be,o:Be,d(o){o&&p(t)}}}function Ad(e){var Gn,lr,kn,ar,or,sr;let t,n,r,i,a,l,o,s,u,h,c,d,_,v,k,y,w,I,A,m,b,V,W,P,O,C,T,U,B,z,S,M,ae,j,re,he,F,Y,le,ie,we,Ee,_e,D,J,N,oe,ce,se,me,Ve,Pe,fe,Ce,Ie,G,Ne,De=((Gn=e[2])==null?void 0:Gn.name)+"",H,Q,pe=e[8]?"export to ":"import from ",He,Ge,Re,X=((lr=e[7])==null?void 0:lr.name)+"",Oe,R,q=e[9].length>1?`from ${e[9][0]} to ${e[9][e[9].length-1]}?`:`in ${e[9]}?`,ue,Xe,Ue,je,at,et,Je,pt,tt,Et,Ot,Qt,Gt,It,Ut,Fe,bn,Pn;v=new Ea({props:{optionIdentifier:$a,labelIdentifier:eo,items:Array.from(e[0].values()),value:e[2]}}),v.$on("select",e[11]),B=new Ea({props:{optionIdentifier:$a,labelIdentifier:eo,items:Array.from(e[0].values()),value:e[7]}}),B.$on("select",e[12]),le=new md({props:{data:{bilateralData:e[4],country1_id:(ar=(kn=e[2])==null?void 0:kn.id)!=null?ar:0,country2_id:(sr=(or=e[7])==null?void 0:or.id)!=null?sr:0,productData:e[1],locationData:e[0]}}}),we=new ad({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[4],loadingDrilldown:e[6],productColorScale:e[3],country1:e[2],country2:e[7]}}});let Ye=e[10].size>0&&Qa(e);return et=new kd({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[3],country1:e[2],country2:e[7],drilldownBilateral:e[5],loadingDrilldown:e[6]}}}),{c(){t=$("div"),n=$("img"),i=be(),a=$("div"),l=$("div"),o=$("div"),s=be(),u=$("span"),h=ye("Country"),c=be(),d=$("div"),_=be(),Ke(v.$$.fragment),k=be(),y=$("div"),w=$("button"),I=ye("\u2194"),A=be(),m=$("div"),b=$("div"),V=$("div"),W=be(),P=$("span"),O=ye("Partner"),C=be(),T=$("div"),U=be(),Ke(B.$$.fragment),z=be(),S=$("img"),ae=be(),j=$("div"),re=be(),he=$("div"),F=$("div"),Y=$("div"),Ke(le.$$.fragment),ie=be(),Ke(we.$$.fragment),Ee=be(),_e=$("div"),D=$("div"),J=$("span"),N=ye("Showing"),oe=be(),ce=$("button"),se=ye("Exports"),me=be(),Ve=$("button"),Pe=ye("Imports"),fe=be(),Ce=$("div"),Ie=$("h2"),G=ye(`What did
              `),Ne=$("b"),H=ye(De),Q=be(),He=ye(pe),Ge=be(),Re=$("b"),Oe=ye(X),R=be(),ue=ye(q),Xe=be(),Ue=$("div"),Ye&&Ye.c(),je=be(),at=$("div"),Ke(et.$$.fragment),Je=be(),pt=$("footer"),tt=$("center"),Et=ye("A Bilateral Trade Data Visualization by "),Ot=$("b"),Qt=ye("Andrew Lee"),Gt=ye(` &
        `),It=$("b"),Ut=ye("Franklin Yuan"),this.h()},l(Z){t=ee(Z,"DIV",{class:!0});var Ae=L(t);n=ee(Ae,"IMG",{class:!0,alt:!0,src:!0}),i=ke(Ae),a=ee(Ae,"DIV",{class:!0});var yt=L(a);l=ee(yt,"DIV",{class:!0});var it=L(l);o=ee(it,"DIV",{style:!0,class:!0}),L(o).forEach(p),s=ke(it),u=ee(it,"SPAN",{class:!0});var Yt=L(u);h=ve(Yt,"Country"),Yt.forEach(p),c=ke(it),d=ee(it,"DIV",{style:!0,class:!0}),L(d).forEach(p),it.forEach(p),_=ke(yt),wt(v.$$.fragment,yt),yt.forEach(p),k=ke(Ae),y=ee(Ae,"DIV",{class:!0});var zt=L(y);w=ee(zt,"BUTTON",{class:!0});var sn=L(w);I=ve(sn,"\u2194"),sn.forEach(p),zt.forEach(p),A=ke(Ae),m=ee(Ae,"DIV",{class:!0});var Xt=L(m);b=ee(Xt,"DIV",{class:!0});var At=L(b);V=ee(At,"DIV",{style:!0,class:!0}),L(V).forEach(p),W=ke(At),P=ee(At,"SPAN",{class:!0});var un=L(P);O=ve(un,"Partner"),un.forEach(p),C=ke(At),T=ee(At,"DIV",{style:!0,class:!0}),L(T).forEach(p),At.forEach(p),U=ke(Xt),wt(B.$$.fragment,Xt),Xt.forEach(p),z=ke(Ae),S=ee(Ae,"IMG",{class:!0,alt:!0,src:!0}),Ae.forEach(p),ae=ke(Z),j=ee(Z,"DIV",{});var En=L(j);En.forEach(p),re=ke(Z),he=ee(Z,"DIV",{id:!0,class:!0});var fn=L(he);F=ee(fn,"DIV",{id:!0,class:!0});var g=L(F);Y=ee(g,"DIV",{class:!0});var de=L(Y);wt(le.$$.fragment,de),ie=ke(de),wt(we.$$.fragment,de),de.forEach(p),Ee=ke(g),_e=ee(g,"DIV",{class:!0});var Le=L(_e);D=ee(Le,"DIV",{});var ze=L(D);J=ee(ze,"SPAN",{});var vt=L(J);N=ve(vt,"Showing"),vt.forEach(p),oe=ke(ze),ce=ee(ze,"BUTTON",{class:!0});var kt=L(ce);se=ve(kt,"Exports"),kt.forEach(p),me=ke(ze),Ve=ee(ze,"BUTTON",{class:!0});var il=L(Ve);Pe=ve(il,"Imports"),il.forEach(p),ze.forEach(p),fe=ke(Le),Ce=ee(Le,"DIV",{});var ll=L(Ce);Ie=ee(ll,"H2",{class:!0});var Wt=L(Ie);G=ve(Wt,`What did
              `),Ne=ee(Wt,"B",{});var al=L(Ne);H=ve(al,De),al.forEach(p),Q=ke(Wt),He=ve(Wt,pe),Ge=ke(Wt),Re=ee(Wt,"B",{});var ol=L(Re);Oe=ve(ol,X),ol.forEach(p),R=ke(Wt),ue=ve(Wt,q),Wt.forEach(p),ll.forEach(p),Xe=ke(Le),Ue=ee(Le,"DIV",{class:!0});var sl=L(Ue);Ye&&Ye.l(sl),sl.forEach(p),Le.forEach(p),je=ke(g),at=ee(g,"DIV",{class:!0});var ul=L(at);wt(et.$$.fragment,ul),ul.forEach(p),g.forEach(p),fn.forEach(p),Je=ke(Z),pt=ee(Z,"FOOTER",{class:!0});var fl=L(pt);tt=ee(fl,"CENTER",{});var Un=L(tt);Et=ve(Un,"A Bilateral Trade Data Visualization by "),Ot=ee(Un,"B",{});var cl=L(Ot);Qt=ve(cl,"Andrew Lee"),cl.forEach(p),Gt=ve(Un,` &
        `),It=ee(Un,"B",{});var hl=L(It);Ut=ve(hl,"Franklin Yuan"),hl.forEach(p),Un.forEach(p),fl.forEach(p),this.h()},h(){var Z,Ae,yt,it;f(n,"class","country-icon svelte-1kbkj0f"),f(n,"alt","Select a country"),ur(n.src,r=kr((Ae=(Z=e[2])==null?void 0:Z.code)!=null?Ae:"ATA"))||f(n,"src",r),f(o,"style",`background-color:${ln}`),f(o,"class","svelte-1kbkj0f"),f(u,"class","svelte-1kbkj0f"),f(d,"style",`background-color:${ln}`),f(d,"class","svelte-1kbkj0f"),f(l,"class","country-title svelte-1kbkj0f"),f(a,"class","dropdown svelte-1kbkj0f"),f(w,"class","switch-btn svelte-1kbkj0f"),f(y,"class","switch-btn-container svelte-1kbkj0f"),f(V,"style",`background-color:${an}`),f(V,"class","svelte-1kbkj0f"),f(P,"class","svelte-1kbkj0f"),f(T,"style",`background-color:${an}`),f(T,"class","svelte-1kbkj0f"),f(b,"class","country-title svelte-1kbkj0f"),f(m,"class","dropdown svelte-1kbkj0f"),f(S,"class","country-icon svelte-1kbkj0f"),f(S,"alt","Select a partner"),ur(S.src,M=kr((it=(yt=e[7])==null?void 0:yt.code)!=null?it:"ATA"))||f(S,"src",M),f(t,"class","selectors svelte-1kbkj0f"),f(Y,"class","viz-row svelte-1kbkj0f"),f(ce,"class","svelte-1kbkj0f"),$e(ce,"btn-active",e[8]),$e(ce,"btn-inactive",!e[8]),f(Ve,"class","svelte-1kbkj0f"),$e(Ve,"btn-active",!e[8]),$e(Ve,"btn-inactive",e[8]),f(Ie,"class","chart-header svelte-1kbkj0f"),f(Ue,"class","clear-sectors svelte-1kbkj0f"),f(_e,"class","spacer svelte-1kbkj0f"),f(at,"class","viz-row svelte-1kbkj0f"),f(F,"id","content"),f(F,"class","svelte-1kbkj0f"),f(he,"id","container"),f(he,"class","svelte-1kbkj0f"),f(pt,"class","svelte-1kbkj0f")},m(Z,Ae){K(Z,t,Ae),E(t,n),E(t,i),E(t,a),E(a,l),E(l,o),E(l,s),E(l,u),E(u,h),E(l,c),E(l,d),E(a,_),xe(v,a,null),E(t,k),E(t,y),E(y,w),E(w,I),E(t,A),E(t,m),E(m,b),E(b,V),E(b,W),E(b,P),E(P,O),E(b,C),E(b,T),E(m,U),xe(B,m,null),E(t,z),E(t,S),K(Z,ae,Ae),K(Z,j,Ae),K(Z,re,Ae),K(Z,he,Ae),E(he,F),E(F,Y),xe(le,Y,null),E(Y,ie),xe(we,Y,null),E(F,Ee),E(F,_e),E(_e,D),E(D,J),E(J,N),E(D,oe),E(D,ce),E(ce,se),E(D,me),E(D,Ve),E(Ve,Pe),E(_e,fe),E(_e,Ce),E(Ce,Ie),E(Ie,G),E(Ie,Ne),E(Ne,H),E(Ie,Q),E(Ie,He),E(Ie,Ge),E(Ie,Re),E(Re,Oe),E(Ie,R),E(Ie,ue),E(_e,Xe),E(_e,Ue),Ye&&Ye.m(Ue,null),E(F,je),E(F,at),xe(et,at,null),K(Z,Je,Ae),K(Z,pt,Ae),E(pt,tt),E(tt,Et),E(tt,Ot),E(Ot,Qt),E(tt,Gt),E(tt,It),E(It,Ut),Fe=!0,bn||(Pn=[x(w,"click",e[13]),x(ce,"click",e[14]),x(Ve,"click",e[15])],bn=!0)},p(Z,Ae){var Xt,At,un,En,fn,g,de,Le,ze,vt;(!Fe||Ae&4&&!ur(n.src,r=kr((At=(Xt=Z[2])==null?void 0:Xt.code)!=null?At:"ATA")))&&f(n,"src",r);const yt={};Ae&1&&(yt.items=Array.from(Z[0].values())),Ae&4&&(yt.value=Z[2]),v.$set(yt);const it={};Ae&1&&(it.items=Array.from(Z[0].values())),Ae&128&&(it.value=Z[7]),B.$set(it),(!Fe||Ae&128&&!ur(S.src,M=kr((En=(un=Z[7])==null?void 0:un.code)!=null?En:"ATA")))&&f(S,"src",M);const Yt={};Ae&151&&(Yt.data={bilateralData:Z[4],country1_id:(g=(fn=Z[2])==null?void 0:fn.id)!=null?g:0,country2_id:(Le=(de=Z[7])==null?void 0:de.id)!=null?Le:0,productData:Z[1],locationData:Z[0]}),le.$set(Yt);const zt={};Ae&223&&(zt.data={productData:Z[1],locationData:Z[0],bilateralData:Z[4],loadingDrilldown:Z[6],productColorScale:Z[3],country1:Z[2],country2:Z[7]}),we.$set(zt),(!Fe||Ae&256)&&$e(ce,"btn-active",Z[8]),(!Fe||Ae&256)&&$e(ce,"btn-inactive",!Z[8]),(!Fe||Ae&256)&&$e(Ve,"btn-active",!Z[8]),(!Fe||Ae&256)&&$e(Ve,"btn-inactive",Z[8]),(!Fe||Ae&4)&&De!==(De=((ze=Z[2])==null?void 0:ze.name)+"")&&We(H,De),(!Fe||Ae&256)&&pe!==(pe=Z[8]?"export to ":"import from ")&&We(He,pe),(!Fe||Ae&128)&&X!==(X=((vt=Z[7])==null?void 0:vt.name)+"")&&We(Oe,X),(!Fe||Ae&512)&&q!==(q=Z[9].length>1?`from ${Z[9][0]} to ${Z[9][Z[9].length-1]}?`:`in ${Z[9]}?`)&&We(ue,q),Z[10].size>0?Ye?(Ye.p(Z,Ae),Ae&1024&&ge(Ye,1)):(Ye=Qa(Z),Ye.c(),ge(Ye,1),Ye.m(Ue,null)):Ye&&(nt(),Te(Ye,1,1,()=>{Ye=null}),rt());const sn={};Ae&239&&(sn.data={locationData:Z[0],productData:Z[1],productColorScale:Z[3],country1:Z[2],country2:Z[7],drilldownBilateral:Z[5],loadingDrilldown:Z[6]}),et.$set(sn)},i(Z){Fe||(ge(v.$$.fragment,Z),ge(B.$$.fragment,Z),ge(le.$$.fragment,Z),ge(we.$$.fragment,Z),ge(Ye),ge(et.$$.fragment,Z),Fe=!0)},o(Z){Te(v.$$.fragment,Z),Te(B.$$.fragment,Z),Te(le.$$.fragment,Z),Te(we.$$.fragment,Z),Te(Ye),Te(et.$$.fragment,Z),Fe=!1},d(Z){Z&&p(t),qe(v),qe(B),Z&&p(ae),Z&&p(j),Z&&p(re),Z&&p(he),qe(le),qe(we),Ye&&Ye.d(),qe(et),Z&&p(Je),Z&&p(pt),bn=!1,gt(Pn)}}}function Qa(e){let t,n,r,i,a,l,o;return{c(){t=$("button"),n=ye("Clear Sector Selection"),this.h()},l(s){t=ee(s,"BUTTON",{height:!0,class:!0});var u=L(t);n=ve(u,"Clear Sector Selection"),u.forEach(p),this.h()},h(){f(t,"height","10"),f(t,"class","svelte-1kbkj0f")},m(s,u){K(s,t,u),E(t,n),a=!0,l||(o=x(t,"click",e[16]),l=!0)},p:Be,i(s){a||(wn(()=>{i&&i.end(1),r=Wi(t,Wr,{duration:200}),r.start()}),a=!0)},o(s){r&&r.invalidate(),i=ls(t,Wr,{duration:200}),a=!1},d(s){s&&p(t),s&&i&&i.end(),l=!1,o()}}}function Td(e){let t,n,r,i,a,l=fr.exports.icons["book-open"].toSvg()+"",o,s,u=fr.exports.icons.youtube.toSvg()+"",h,c,d=fr.exports.icons.database.toSvg()+"",_,v,k=fr.exports.icons.github.toSvg()+"",y,w,I,A,m,b,V,W;const P=[Ad,Id],O=[];function C(T,U){return T[0]&&T[4]&&T[1]?0:1}return b=C(e),V=O[b]=P[b](e),{c(){t=$("link"),n=be(),r=$("div"),i=$("div"),a=$("a"),o=be(),s=$("a"),h=be(),c=$("a"),_=be(),v=$("a"),y=be(),w=$("div"),I=$("h1"),A=ye("Commerce Among Nations"),m=be(),V.c(),this.h()},l(T){const U=is("svelte-tu7v51",document.head);t=ee(U,"LINK",{rel:!0,href:!0}),U.forEach(p),n=ke(T),r=ee(T,"DIV",{class:!0});var B=L(r);i=ee(B,"DIV",{class:!0});var z=L(i);a=ee(z,"A",{href:!0,title:!0,class:!0});var S=L(a);S.forEach(p),o=ke(z),s=ee(z,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var M=L(s);M.forEach(p),h=ke(z),c=ee(z,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var ae=L(c);ae.forEach(p),_=ke(z),v=ee(z,"A",{href:!0,title:!0,target:!0,rel:!0,class:!0});var j=L(v);j.forEach(p),z.forEach(p),y=ke(B),w=ee(B,"DIV",{class:!0});var re=L(w);I=ee(re,"H1",{class:!0});var he=L(I);A=ve(he,"Commerce Among Nations"),he.forEach(p),re.forEach(p),m=ke(B),V.l(B),B.forEach(p),this.h()},h(){f(t,"rel","icon"),f(t,"href",`${Ln}/favicon.png`),document.title="Commerce Among Nations",f(a,"href",Ln+"/processbook"),f(a,"title","process-book"),f(a,"class","svelte-1kbkj0f"),f(s,"href","https://www.youtube.com/watch?v=OXdyF8Prxyw"),f(s,"title","screencast"),f(s,"target","_blank"),f(s,"rel","noreferrer"),f(s,"class","svelte-1kbkj0f"),f(c,"href","https://dataverse.harvard.edu/dataverse/atlas"),f(c,"title","data"),f(c,"target","_blank"),f(c,"rel","noreferrer"),f(c,"class","svelte-1kbkj0f"),f(v,"href","https://github.com/candrewlee14/data-viz-project"),f(v,"title","github"),f(v,"target","_blank"),f(v,"rel","noreferrer"),f(v,"class","svelte-1kbkj0f"),f(i,"class","nav svelte-1kbkj0f"),f(I,"class","svelte-1kbkj0f"),f(w,"class","heading svelte-1kbkj0f"),f(r,"class","outer svelte-1kbkj0f")},m(T,U){E(document.head,t),K(T,n,U),K(T,r,U),E(r,i),E(i,a),a.innerHTML=l,E(i,o),E(i,s),s.innerHTML=u,E(i,h),E(i,c),c.innerHTML=d,E(i,_),E(i,v),v.innerHTML=k,E(r,y),E(r,w),E(w,I),E(I,A),E(r,m),O[b].m(r,null),W=!0},p(T,[U]){let B=b;b=C(T),b===B?O[b].p(T,U):(nt(),Te(O[B],1,1,()=>{O[B]=null}),rt(),V=O[b],V?V.p(T,U):(V=O[b]=P[b](T),V.c()),ge(V,1),V.m(r,null))},i(T){W||(ge(V),W=!0)},o(T){Te(V),W=!1},d(T){p(t),T&&p(n),T&&p(r),O[b].d()}}}const $a="id",eo="name",Sd=231,Md=43;function Cd(e,t,n){let r,i,a,l,o;Mt(e,gn,m=>n(8,a=m)),Mt(e,dn,m=>n(9,l=m)),Mt(e,ct,m=>n(10,o=m));const s=m=>{let b=m.detail;n(2,r=c.get(b.id))},u=m=>{let b=m.detail;n(7,i=c.get(b.id))};let h,c=new Map,d=new Map,_,v,k=!1;function y(){let m=r;n(2,r=i),n(7,i=m)}function w(){gl(gn,a=!0,a)}function I(){gl(gn,a=!1,a)}qr(async()=>{Promise.all([_r(`${Ln}/data/location.csv`),_r(`${Ln}/data/hs_product.csv`),_r(`${Ln}/data/hs_2010_to_2020.csv`)]).then(([m,b,V])=>{var P;n(0,c=yl(m.map(O=>new x0(O)).filter(O=>O.level=="country"),O=>O.id)),n(1,d=yl(b.map(O=>new Nr(O)),O=>O.id));for(let[O,C]of d)C.parent=(P=d.get(C.parent_id))!=null?P:null,d.set(O,C);let W=V.map(O=>new jt(c,d,O));n(4,_=yi(W,O=>O.location_id,O=>O.partner_id,O=>O.year)),io(V,O=>+O.export_value),n(3,h=Go(Array.from(d).map(([O,C])=>C.level).filter(O=>O=="section"),m0))})});const A=()=>{ct.set(new Set)};return e.$$.update=()=>{var m,b,V,W;e.$$.dirty&1&&n(2,r=(m=c==null?void 0:c.get(Sd))!=null?m:null),e.$$.dirty&1&&n(7,i=(b=c==null?void 0:c.get(Md))!=null?b:null),e.$$.dirty&7&&(n(5,v=null),n(6,k=!0),_r(`${Ln}/data/${(V=r==null?void 0:r.code)!=null?V:"USA"}/${(W=r==null?void 0:r.code)!=null?W:"USA"}_hs2_2010_to_2020.csv`).then(P=>{n(5,v=yi(P.map(O=>new jt(c,d,O)),O=>O.partner_id,O=>O.year)),n(6,k=!1)}))},[c,d,r,h,_,v,k,i,a,l,o,s,u,y,w,I,A]}class Vd extends Ct{constructor(t){super(),Nt(this,t,Cd,Td,Lt,{})}}export{Vd as default};
