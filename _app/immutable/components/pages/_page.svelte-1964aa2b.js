var Xs=Object.defineProperty;var Ys=(e,t,n)=>t in e?Xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>(Ys(e,typeof t!="symbol"?t+"":t,n),n);import{S as je,i as We,s as xe,k as te,l as ne,m as P,h as k,n as _,b as G,B as ye,I as qe,J as ue,g as Me,t as ie,d as Ce,f as J,K as dt,L as Ii,o as yn,M as Cl,N as He,e as le,O as Ai,v as De,w as we,x as Oe,y as be,z as ke,q as me,r as ge,G as H,u as Fe,A as Qt,a as he,c as de,P as Q,Q as $,p as gt,R as Zn,T as Ut,U as wn,V as at,W as js,C as Ws,D as xs,E as Ks,F as Zs,X as Ei,Y as Ki,Z as Zi,_ as Si,$ as Nl,a0 as Js,a1 as Ji,a2 as Qs,a3 as $s,a4 as ea,H as Mi,a5 as Ci,a6 as Ht,a7 as ta,a8 as na,a9 as ia,aa as ra,ab as la,ac as sa}from"../../chunks/index-181e8753.js";import{w as aa,b as Yt}from"../../chunks/paths-455b1d4b.js";function $t(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ll(e){let t,n,i;e.length!==2?(t=$t,n=(a,o)=>$t(e(a),o),i=(a,o)=>e(a)-o):(t=e===$t||e===oa?e:ua,n=e,i=e);function r(a,o,u=0,f=a.length){if(u<f){if(t(o,o)!==0)return f;do{const h=u+f>>>1;n(a[h],o)<0?u=h+1:f=h}while(u<f)}return u}function s(a,o,u=0,f=a.length){if(u<f){if(t(o,o)!==0)return f;do{const h=u+f>>>1;n(a[h],o)<=0?u=h+1:f=h}while(u<f)}return u}function l(a,o,u=0,f=a.length){const h=r(a,o,u,f-1);return h>u&&i(a[h-1],o)>-i(a[h],o)?h-1:h}return{left:r,center:l,right:s}}function ua(){return 0}function fa(e){return e===null?NaN:+e}const ca=Ll($t),ha=ca.right;Ll(fa).center;const da=ha;function Tl(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Jn extends Map{constructor(t,n=ga){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Qi(this,t))}has(t){return super.has(Qi(this,t))}set(t,n){return super.set(_a(this,t),n)}delete(t){return super.delete(ma(this,t))}}function Qi({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function _a({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function ma({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function ga(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ln(e){return e}function Qn(e,...t){return Ni(e,ln,ln,t)}function Dl(e,t,...n){return Ni(e,ln,t,n)}function $i(e,...t){return Ni(e,ln,pa,t)}function pa(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Ni(e,t,n,i){return function r(s,l){if(l>=i.length)return n(s);const a=new Jn,o=i[l++];let u=-1;for(const f of s){const h=o(f,++u,s),c=a.get(h);c?c.push(f):a.set(h,[f])}for(const[f,h]of a)a.set(f,r(h,l));return t(a)}(e,0)}var $n=Math.sqrt(50),ei=Math.sqrt(10),ti=Math.sqrt(2);function va(e,t,n){var i,r=-1,s,l,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(s=e,e=t,t=s),(a=Vl(e,t,n))===0||!isFinite(a))return[];if(a>0){let o=Math.round(e/a),u=Math.round(t/a);for(o*a<e&&++o,u*a>t&&--u,l=new Array(s=u-o+1);++r<s;)l[r]=(o+r)*a}else{a=-a;let o=Math.round(e*a),u=Math.round(t*a);for(o/a<e&&++o,u/a>t&&--u,l=new Array(s=u-o+1);++r<s;)l[r]=(o+r)/a}return i&&l.reverse(),l}function Vl(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=$n?10:s>=ei?5:s>=ti?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=$n?10:s>=ei?5:s>=ti?2:1)}function ya(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=$n?r*=10:s>=ei?r*=5:s>=ti&&(r*=2),t<e?-r:r}function ni(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function wa(e){return e}var Hn=1,Rn=2,ii=3,Vt=4,er=1e-6;function ba(e){return"translate("+e+",0)"}function ka(e){return"translate(0,"+e+")"}function Ia(e){return t=>+e(t)}function Aa(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Ea(){return!this.__axis}function Ol(e,t){var n=[],i=null,r=null,s=6,l=6,a=3,o=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Hn||e===Vt?-1:1,f=e===Vt||e===Rn?"x":"y",h=e===Hn||e===ii?ba:ka;function c(d){var v=i==null?t.ticks?t.ticks.apply(t,n):t.domain():i,g=r==null?t.tickFormat?t.tickFormat.apply(t,n):wa:r,p=Math.max(s,0)+a,b=t.range(),S=+b[0]+o,w=+b[b.length-1]+o,y=(t.bandwidth?Aa:Ia)(t.copy(),o),I=d.selection?d.selection():d,B=I.selectAll(".domain").data([null]),R=I.selectAll(".tick").data(v,t).order(),D=R.exit(),U=R.enter().append("g").attr("class","tick"),E=R.select("line"),A=R.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),R=R.merge(U),E=E.merge(U.append("line").attr("stroke","currentColor").attr(f+"2",u*s)),A=A.merge(U.append("text").attr("fill","currentColor").attr(f,u*p).attr("dy",e===Hn?"0em":e===ii?"0.71em":"0.32em")),d!==I&&(B=B.transition(d),R=R.transition(d),E=E.transition(d),A=A.transition(d),D=D.transition(d).attr("opacity",er).attr("transform",function(L){return isFinite(L=y(L))?h(L+o):this.getAttribute("transform")}),U.attr("opacity",er).attr("transform",function(L){var O=this.parentNode.__axis;return h((O&&isFinite(O=O(L))?O:y(L))+o)})),D.remove(),B.attr("d",e===Vt||e===Rn?l?"M"+u*l+","+S+"H"+o+"V"+w+"H"+u*l:"M"+o+","+S+"V"+w:l?"M"+S+","+u*l+"V"+o+"H"+w+"V"+u*l:"M"+S+","+o+"H"+w),R.attr("opacity",1).attr("transform",function(L){return h(y(L)+o)}),E.attr(f+"2",u*s),A.attr(f,u*p).text(g),I.filter(Ea).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Rn?"start":e===Vt?"end":"middle"),I.each(function(){this.__axis=y})}return c.scale=function(d){return arguments.length?(t=d,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),c):i&&i.slice()},c.tickFormat=function(d){return arguments.length?(r=d,c):r},c.tickSize=function(d){return arguments.length?(s=l=+d,c):s},c.tickSizeInner=function(d){return arguments.length?(s=+d,c):s},c.tickSizeOuter=function(d){return arguments.length?(l=+d,c):l},c.tickPadding=function(d){return arguments.length?(a=+d,c):a},c.offset=function(d){return arguments.length?(o=+d,c):o},c}function Fl(e){return Ol(ii,e)}function Sa(e){return Ol(Vt,e)}var Ma={value:()=>{}};function Li(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new en(n)}function en(e){this._=e}function Ca(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}en.prototype=Li.prototype={constructor:en,on:function(e,t){var n=this._,i=Ca(e+"",n),r,s=-1,l=i.length;if(arguments.length<2){for(;++s<l;)if((r=(e=i[s]).type)&&(r=Na(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<l;)if(r=(e=i[s]).type)n[r]=tr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=tr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new en(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Na(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function tr(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Ma,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ri="http://www.w3.org/1999/xhtml";const nr={svg:"http://www.w3.org/2000/svg",xhtml:ri,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),nr.hasOwnProperty(t)?{space:nr[t],local:e}:e}function La(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ri&&t.documentElement.namespaceURI===ri?t.createElement(e):t.createElementNS(n,e)}}function Ta(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hl(e){var t=bn(e);return(t.local?Ta:La)(t)}function Da(){}function Ti(e){return e==null?Da:function(){return this.querySelector(e)}}function Va(e){typeof e!="function"&&(e=Ti(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,a=i[r]=new Array(l),o,u,f=0;f<l;++f)(o=s[f])&&(u=e.call(o,o.__data__,f,s))&&("__data__"in o&&(u.__data__=o.__data__),a[f]=u);return new Be(i,this._parents)}function Oa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Fa(){return[]}function Rl(e){return e==null?Fa:function(){return this.querySelectorAll(e)}}function Ha(e){return function(){return Oa(e.apply(this,arguments))}}function Ra(e){typeof e=="function"?e=Ha(e):e=Rl(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var l=t[s],a=l.length,o,u=0;u<a;++u)(o=l[u])&&(i.push(e.call(o,o.__data__,u,l)),r.push(o));return new Be(i,r)}function Pl(e){return function(){return this.matches(e)}}function zl(e){return function(t){return t.matches(e)}}var Pa=Array.prototype.find;function za(e){return function(){return Pa.call(this.children,e)}}function Ba(){return this.firstElementChild}function Ua(e){return this.select(e==null?Ba:za(typeof e=="function"?e:zl(e)))}var qa=Array.prototype.filter;function Ga(){return Array.from(this.children)}function Xa(e){return function(){return qa.call(this.children,e)}}function Ya(e){return this.selectAll(e==null?Ga:Xa(typeof e=="function"?e:zl(e)))}function ja(e){typeof e!="function"&&(e=Pl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,a=i[r]=[],o,u=0;u<l;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&a.push(o);return new Be(i,this._parents)}function Bl(e){return new Array(e.length)}function Wa(){return new Be(this._enter||this._groups.map(Bl),this._parents)}function sn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sn.prototype={constructor:sn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xa(e){return function(){return e}}function Ka(e,t,n,i,r,s){for(var l=0,a,o=t.length,u=s.length;l<u;++l)(a=t[l])?(a.__data__=s[l],i[l]=a):n[l]=new sn(e,s[l]);for(;l<o;++l)(a=t[l])&&(r[l]=a)}function Za(e,t,n,i,r,s,l){var a,o,u=new Map,f=t.length,h=s.length,c=new Array(f),d;for(a=0;a<f;++a)(o=t[a])&&(c[a]=d=l.call(o,o.__data__,a,t)+"",u.has(d)?r[a]=o:u.set(d,o));for(a=0;a<h;++a)d=l.call(e,s[a],a,s)+"",(o=u.get(d))?(i[a]=o,o.__data__=s[a],u.delete(d)):n[a]=new sn(e,s[a]);for(a=0;a<f;++a)(o=t[a])&&u.get(c[a])===o&&(r[a]=o)}function Ja(e){return e.__data__}function Qa(e,t){if(!arguments.length)return Array.from(this,Ja);var n=t?Za:Ka,i=this._parents,r=this._groups;typeof e!="function"&&(e=xa(e));for(var s=r.length,l=new Array(s),a=new Array(s),o=new Array(s),u=0;u<s;++u){var f=i[u],h=r[u],c=h.length,d=$a(e.call(f,f&&f.__data__,u,i)),v=d.length,g=a[u]=new Array(v),p=l[u]=new Array(v),b=o[u]=new Array(c);n(f,h,g,p,b,d,t);for(var S=0,w=0,y,I;S<v;++S)if(y=g[S]){for(S>=w&&(w=S+1);!(I=p[w])&&++w<v;);y._next=I||null}}return l=new Be(l,i),l._enter=a,l._exit=o,l}function $a(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eo(){return new Be(this._exit||this._groups.map(Bl),this._parents)}function to(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function no(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,l=Math.min(r,s),a=new Array(r),o=0;o<l;++o)for(var u=n[o],f=i[o],h=u.length,c=a[o]=new Array(h),d,v=0;v<h;++v)(d=u[v]||f[v])&&(c[v]=d);for(;o<r;++o)a[o]=n[o];return new Be(a,this._parents)}function io(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],l;--r>=0;)(l=i[r])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function ro(e){e||(e=lo);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var l=n[s],a=l.length,o=r[s]=new Array(a),u,f=0;f<a;++f)(u=l[f])&&(o[f]=u);o.sort(t)}return new Be(r,this._parents).order()}function lo(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function so(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ao(){return Array.from(this)}function oo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var l=i[r];if(l)return l}return null}function uo(){let e=0;for(const t of this)++e;return e}function fo(){return!this.node()}function co(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,l=r.length,a;s<l;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function ho(e){return function(){this.removeAttribute(e)}}function _o(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mo(e,t){return function(){this.setAttribute(e,t)}}function go(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function po(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yo(e,t){var n=bn(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?_o:ho:typeof t=="function"?n.local?vo:po:n.local?go:mo)(n,t))}function Ul(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wo(e){return function(){this.style.removeProperty(e)}}function bo(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ko(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Io(e,t,n){return arguments.length>1?this.each((t==null?wo:typeof t=="function"?ko:bo)(e,t,n==null?"":n)):It(this.node(),e)}function It(e,t){return e.style.getPropertyValue(t)||Ul(e).getComputedStyle(e,null).getPropertyValue(t)}function Ao(e){return function(){delete this[e]}}function Eo(e,t){return function(){this[e]=t}}function So(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Mo(e,t){return arguments.length>1?this.each((t==null?Ao:typeof t=="function"?So:Eo)(e,t)):this.node()[e]}function ql(e){return e.trim().split(/^|\s+/)}function Di(e){return e.classList||new Gl(e)}function Gl(e){this._node=e,this._names=ql(e.getAttribute("class")||"")}Gl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Xl(e,t){for(var n=Di(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Yl(e,t){for(var n=Di(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Co(e){return function(){Xl(this,e)}}function No(e){return function(){Yl(this,e)}}function Lo(e,t){return function(){(t.apply(this,arguments)?Xl:Yl)(this,e)}}function To(e,t){var n=ql(e+"");if(arguments.length<2){for(var i=Di(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Lo:t?Co:No)(n,t))}function Do(){this.textContent=""}function Vo(e){return function(){this.textContent=e}}function Oo(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Fo(e){return arguments.length?this.each(e==null?Do:(typeof e=="function"?Oo:Vo)(e)):this.node().textContent}function Ho(){this.innerHTML=""}function Ro(e){return function(){this.innerHTML=e}}function Po(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function zo(e){return arguments.length?this.each(e==null?Ho:(typeof e=="function"?Po:Ro)(e)):this.node().innerHTML}function Bo(){this.nextSibling&&this.parentNode.appendChild(this)}function Uo(){return this.each(Bo)}function qo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Go(){return this.each(qo)}function Xo(e){var t=typeof e=="function"?e:Hl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Yo(){return null}function jo(e,t){var n=typeof e=="function"?e:Hl(e),i=t==null?Yo:typeof t=="function"?t:Ti(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Wo(){var e=this.parentNode;e&&e.removeChild(this)}function xo(){return this.each(Wo)}function Ko(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zo(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jo(e){return this.select(e?Zo:Ko)}function Qo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $o(e){return function(t){e.call(this,t,this.__data__)}}function eu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function tu(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function nu(e,t,n){return function(){var i=this.__on,r,s=$o(t);if(i){for(var l=0,a=i.length;l<a;++l)if((r=i[l]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function iu(e,t,n){var i=eu(e+""),r,s=i.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var o=0,u=a.length,f;o<u;++o)for(r=0,f=a[o];r<s;++r)if((l=i[r]).type===f.type&&l.name===f.name)return f.value}return}for(a=t?nu:tu,r=0;r<s;++r)this.each(a(i[r],t,n));return this}function jl(e,t,n){var i=Ul(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function ru(e,t){return function(){return jl(this,e,t)}}function lu(e,t){return function(){return jl(this,e,t.apply(this,arguments))}}function su(e,t){return this.each((typeof t=="function"?lu:ru)(e,t))}function*au(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,l;r<s;++r)(l=i[r])&&(yield l)}var Wl=[null];function Be(e,t){this._groups=e,this._parents=t}function qt(){return new Be([[document.documentElement]],Wl)}function ou(){return this}Be.prototype=qt.prototype={constructor:Be,select:Va,selectAll:Ra,selectChild:Ua,selectChildren:Ya,filter:ja,data:Qa,enter:Wa,exit:eo,join:to,merge:no,selection:ou,order:io,sort:ro,call:so,nodes:ao,node:oo,size:uo,empty:fo,each:co,attr:yo,style:Io,property:Mo,classed:To,text:Fo,html:zo,raise:Uo,lower:Go,append:Xo,insert:jo,remove:xo,clone:Jo,datum:Qo,on:iu,dispatch:su,[Symbol.iterator]:au};function ze(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],Wl)}function uu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ir(e,t){if(e=uu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const li={capture:!0,passive:!1};function si(e){e.preventDefault(),e.stopImmediatePropagation()}function fu(e){var t=e.document.documentElement,n=ze(e).on("dragstart.drag",si,li);"onselectstart"in t?n.on("selectstart.drag",si,li):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function cu(e,t){var n=e.document.documentElement,i=ze(e).on("dragstart.drag",null);t&&(i.on("click.drag",si,li),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Vi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Gt(){}var Rt=.7,an=1/Rt,kt="\\s*([+-]?\\d+)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hu=/^#([0-9a-f]{3,8})$/,du=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),_u=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),mu=new RegExp(`^rgba\\(${kt},${kt},${kt},${Pt}\\)$`),gu=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${Pt}\\)$`),pu=new RegExp(`^hsl\\(${Pt},${Ze},${Ze}\\)$`),vu=new RegExp(`^hsla\\(${Pt},${Ze},${Ze},${Pt}\\)$`),rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vi(Gt,ft,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lr,formatHex:lr,formatHex8:yu,formatHsl:wu,formatRgb:sr,toString:sr});function lr(){return this.rgb().formatHex()}function yu(){return this.rgb().formatHex8()}function wu(){return Kl(this).formatHsl()}function sr(){return this.rgb().formatRgb()}function ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ar(t):n===3?new Pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=du.exec(e))?new Pe(t[1],t[2],t[3],1):(t=_u.exec(e))?new Pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mu.exec(e))?jt(t[1],t[2],t[3],t[4]):(t=gu.exec(e))?jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pu.exec(e))?fr(t[1],t[2]/100,t[3]/100,1):(t=vu.exec(e))?fr(t[1],t[2]/100,t[3]/100,t[4]):rr.hasOwnProperty(e)?ar(rr[e]):e==="transparent"?new Pe(NaN,NaN,NaN,0):null}function ar(e){return new Pe(e>>16&255,e>>8&255,e&255,1)}function jt(e,t,n,i){return i<=0&&(e=t=n=NaN),new Pe(e,t,n,i)}function bu(e){return e instanceof Gt||(e=ft(e)),e?(e=e.rgb(),new Pe(e.r,e.g,e.b,e.opacity)):new Pe}function ai(e,t,n,i){return arguments.length===1?bu(e):new Pe(e,t,n,i==null?1:i)}function Pe(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Vi(Pe,ai,xl(Gt,{brighter(e){return e=e==null?an:Math.pow(an,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pe(ot(this.r),ot(this.g),ot(this.b),on(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:or,formatHex:or,formatHex8:ku,formatRgb:ur,toString:ur}));function or(){return`#${st(this.r)}${st(this.g)}${st(this.b)}`}function ku(){return`#${st(this.r)}${st(this.g)}${st(this.b)}${st((isNaN(this.opacity)?1:this.opacity)*255)}`}function ur(){const e=on(this.opacity);return`${e===1?"rgb(":"rgba("}${ot(this.r)}, ${ot(this.g)}, ${ot(this.b)}${e===1?")":`, ${e})`}`}function on(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function st(e){return e=ot(e),(e<16?"0":"")+e.toString(16)}function fr(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ye(e,t,n,i)}function Kl(e){if(e instanceof Ye)return new Ye(e.h,e.s,e.l,e.opacity);if(e instanceof Gt||(e=ft(e)),!e)return new Ye;if(e instanceof Ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),l=NaN,a=s-r,o=(s+r)/2;return a?(t===s?l=(n-i)/a+(n<i)*6:n===s?l=(i-t)/a+2:l=(t-n)/a+4,a/=o<.5?s+r:2-s-r,l*=60):a=o>0&&o<1?0:l,new Ye(l,a,o,e.opacity)}function Iu(e,t,n,i){return arguments.length===1?Kl(e):new Ye(e,t,n,i==null?1:i)}function Ye(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Vi(Ye,Iu,xl(Gt,{brighter(e){return e=e==null?an:Math.pow(an,e),new Ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new Ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Pe(Pn(e>=240?e-240:e+120,r,i),Pn(e,r,i),Pn(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Ye(cr(this.h),Wt(this.s),Wt(this.l),on(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=on(this.opacity);return`${e===1?"hsl(":"hsla("}${cr(this.h)}, ${Wt(this.s)*100}%, ${Wt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function cr(e){return e=(e||0)%360,e<0?e+360:e}function Wt(e){return Math.max(0,Math.min(1,e||0))}function Pn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Oi=e=>()=>e;function Au(e,t){return function(n){return e+n*t}}function Eu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Su(e){return(e=+e)==1?Zl:function(t,n){return n-t?Eu(t,n,e):Oi(isNaN(t)?n:t)}}function Zl(e,t){var n=t-e;return n?Au(e,n):Oi(isNaN(e)?t:e)}const un=function e(t){var n=Su(t);function i(r,s){var l=n((r=ai(r)).r,(s=ai(s)).r),a=n(r.g,s.g),o=n(r.b,s.b),u=Zl(r.opacity,s.opacity);return function(f){return r.r=l(f),r.g=a(f),r.b=o(f),r.opacity=u(f),r+""}}return i.gamma=e,i}(1);function Mu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function Cu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Nu(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),l;for(l=0;l<i;++l)r[l]=kn(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(a){for(l=0;l<i;++l)s[l]=r[l](a);return s}}function Lu(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Xe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Tu(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=kn(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var oi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zn=new RegExp(oi.source,"g");function Du(e){return function(){return e}}function Vu(e){return function(t){return e(t)+""}}function Jl(e,t){var n=oi.lastIndex=zn.lastIndex=0,i,r,s,l=-1,a=[],o=[];for(e=e+"",t=t+"";(i=oi.exec(e))&&(r=zn.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[l]?a[l]+=s:a[++l]=s),(i=i[0])===(r=r[0])?a[l]?a[l]+=r:a[++l]=r:(a[++l]=null,o.push({i:l,x:Xe(i,r)})),n=zn.lastIndex;return n<t.length&&(s=t.slice(n),a[l]?a[l]+=s:a[++l]=s),a.length<2?o[0]?Vu(o[0].x):Du(t):(t=o.length,function(u){for(var f=0,h;f<t;++f)a[(h=o[f]).i]=h.x(u);return a.join("")})}function kn(e,t){var n=typeof t,i;return t==null||n==="boolean"?Oi(t):(n==="number"?Xe:n==="string"?(i=ft(t))?(t=i,un):Jl:t instanceof ft?un:t instanceof Date?Lu:Cu(t)?Mu:Array.isArray(t)?Nu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Tu:Xe)(e,t)}function Ou(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var hr=180/Math.PI,ui={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ql(e,t,n,i,r,s){var l,a,o;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(o=e*n+t*i)&&(n-=e*o,i-=t*o),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,o/=a),e*i<t*n&&(e=-e,t=-t,o=-o,l=-l),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*hr,skewX:Math.atan(o)*hr,scaleX:l,scaleY:a}}var xt;function Fu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ui:Ql(t.a,t.b,t.c,t.d,t.e,t.f)}function Hu(e){return e==null||(xt||(xt=document.createElementNS("http://www.w3.org/2000/svg","g")),xt.setAttribute("transform",e),!(e=xt.transform.baseVal.consolidate()))?ui:(e=e.matrix,Ql(e.a,e.b,e.c,e.d,e.e,e.f))}function $l(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,f,h,c,d,v){if(u!==h||f!==c){var g=d.push("translate(",null,t,null,n);v.push({i:g-4,x:Xe(u,h)},{i:g-2,x:Xe(f,c)})}else(h||c)&&d.push("translate("+h+t+c+n)}function l(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Xe(u,f)})):f&&h.push(r(h)+"rotate("+f+i)}function a(u,f,h,c){u!==f?c.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Xe(u,f)}):f&&h.push(r(h)+"skewX("+f+i)}function o(u,f,h,c,d,v){if(u!==h||f!==c){var g=d.push(r(d)+"scale(",null,",",null,")");v.push({i:g-4,x:Xe(u,h)},{i:g-2,x:Xe(f,c)})}else(h!==1||c!==1)&&d.push(r(d)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),s(u.translateX,u.translateY,f.translateX,f.translateY,h,c),l(u.rotate,f.rotate,h,c),a(u.skewX,f.skewX,h,c),o(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(d){for(var v=-1,g=c.length,p;++v<g;)h[(p=c[v]).i]=p.x(d);return h.join("")}}}var Ru=$l(Fu,"px, ","px)","deg)"),Pu=$l(Hu,", ",")",")"),At=0,Ot=0,Ct=0,es=1e3,fn,Ft,cn=0,ct=0,In=0,zt=typeof performance=="object"&&performance.now?performance:Date,ts=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fi(){return ct||(ts(zu),ct=zt.now()+In)}function zu(){ct=0}function hn(){this._call=this._time=this._next=null}hn.prototype=ns.prototype={constructor:hn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fi():+n)+(t==null?0:+t),!this._next&&Ft!==this&&(Ft?Ft._next=this:fn=this,Ft=this),this._call=e,this._time=n,fi()},stop:function(){this._call&&(this._call=null,this._time=1/0,fi())}};function ns(e,t,n){var i=new hn;return i.restart(e,t,n),i}function Bu(){Fi(),++At;for(var e=fn,t;e;)(t=ct-e._time)>=0&&e._call.call(void 0,t),e=e._next;--At}function dr(){ct=(cn=zt.now())+In,At=Ot=0;try{Bu()}finally{At=0,qu(),ct=0}}function Uu(){var e=zt.now(),t=e-cn;t>es&&(In-=t,cn=e)}function qu(){for(var e,t=fn,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:fn=n);Ft=e,fi(i)}function fi(e){if(!At){Ot&&(Ot=clearTimeout(Ot));var t=e-ct;t>24?(e<1/0&&(Ot=setTimeout(dr,e-zt.now()-In)),Ct&&(Ct=clearInterval(Ct))):(Ct||(cn=zt.now(),Ct=setInterval(Uu,es)),At=1,ts(dr))}}function _r(e,t,n){var i=new hn;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Gu=Li("start","end","cancel","interrupt"),Xu=[],is=0,mr=1,ci=2,tn=3,gr=4,hi=5,nn=6;function An(e,t,n,i,r,s){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Yu(e,n,{name:t,index:i,group:r,on:Gu,tween:Xu,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:is})}function Hi(e,t){var n=Ke(e,t);if(n.state>is)throw new Error("too late; already scheduled");return n}function Je(e,t){var n=Ke(e,t);if(n.state>tn)throw new Error("too late; already running");return n}function Ke(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yu(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=ns(s,0,n.time);function s(u){n.state=mr,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,h,c,d;if(n.state!==mr)return o();for(f in i)if(d=i[f],d.name===n.name){if(d.state===tn)return _r(l);d.state===gr?(d.state=nn,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[f]):+f<t&&(d.state=nn,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[f])}if(_r(function(){n.state===tn&&(n.state=gr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=ci,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ci){for(n.state=tn,r=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(d=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(o),n.state=hi,1),h=-1,c=r.length;++h<c;)r[h].call(e,f);n.state===hi&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){n.state=nn,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function di(e,t){var n=e.__transition,i,r,s=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((i=n[l]).name!==t){s=!1;continue}r=i.state>ci&&i.state<hi,i.state=nn,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[l]}s&&delete e.__transition}}function ju(e){return this.each(function(){di(this,e)})}function Wu(e,t){var n,i;return function(){var r=Je(this,e),s=r.tween;if(s!==n){i=n=s;for(var l=0,a=i.length;l<a;++l)if(i[l].name===t){i=i.slice(),i.splice(l,1);break}}r.tween=i}}function xu(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Je(this,e),l=s.tween;if(l!==i){r=(i=l).slice();for(var a={name:t,value:n},o=0,u=r.length;o<u;++o)if(r[o].name===t){r[o]=a;break}o===u&&r.push(a)}s.tween=r}}function Ku(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ke(this.node(),n).tween,r=0,s=i.length,l;r<s;++r)if((l=i[r]).name===e)return l.value;return null}return this.each((t==null?Wu:xu)(n,e,t))}function Ri(e,t,n){var i=e._id;return e.each(function(){var r=Je(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ke(r,i).value[t]}}function rs(e,t){var n;return(typeof t=="number"?Xe:t instanceof ft?un:(n=ft(t))?(t=n,un):Jl)(e,t)}function Zu(e){return function(){this.removeAttribute(e)}}function Ju(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qu(e,t,n){var i,r=n+"",s;return function(){var l=this.getAttribute(e);return l===r?null:l===i?s:s=t(i=l,n)}}function $u(e,t,n){var i,r=n+"",s;return function(){var l=this.getAttributeNS(e.space,e.local);return l===r?null:l===i?s:s=t(i=l,n)}}function ef(e,t,n){var i,r,s;return function(){var l,a=n(this),o;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),o=a+"",l===o?null:l===i&&o===r?s:(r=o,s=t(i=l,a)))}}function tf(e,t,n){var i,r,s;return function(){var l,a=n(this),o;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),o=a+"",l===o?null:l===i&&o===r?s:(r=o,s=t(i=l,a)))}}function nf(e,t){var n=bn(e),i=n==="transform"?Pu:rs;return this.attrTween(e,typeof t=="function"?(n.local?tf:ef)(n,i,Ri(this,"attr."+e,t)):t==null?(n.local?Ju:Zu)(n):(n.local?$u:Qu)(n,i,t))}function rf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function lf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sf(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&lf(e,s)),n}return r._value=t,r}function af(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&rf(e,s)),n}return r._value=t,r}function of(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=bn(e);return this.tween(n,(i.local?sf:af)(i,t))}function uf(e,t){return function(){Hi(this,e).delay=+t.apply(this,arguments)}}function ff(e,t){return t=+t,function(){Hi(this,e).delay=t}}function cf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?uf:ff)(t,e)):Ke(this.node(),t).delay}function hf(e,t){return function(){Je(this,e).duration=+t.apply(this,arguments)}}function df(e,t){return t=+t,function(){Je(this,e).duration=t}}function _f(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hf:df)(t,e)):Ke(this.node(),t).duration}function mf(e,t){if(typeof t!="function")throw new Error;return function(){Je(this,e).ease=t}}function gf(e){var t=this._id;return arguments.length?this.each(mf(t,e)):Ke(this.node(),t).ease}function pf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Je(this,e).ease=n}}function vf(e){if(typeof e!="function")throw new Error;return this.each(pf(this._id,e))}function yf(e){typeof e!="function"&&(e=Pl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,a=i[r]=[],o,u=0;u<l;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&a.push(o);return new tt(i,this._parents,this._name,this._id)}function wf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),l=new Array(i),a=0;a<s;++a)for(var o=t[a],u=n[a],f=o.length,h=l[a]=new Array(f),c,d=0;d<f;++d)(c=o[d]||u[d])&&(h[d]=c);for(;a<i;++a)l[a]=t[a];return new tt(l,this._parents,this._name,this._id)}function bf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function kf(e,t,n){var i,r,s=bf(t)?Hi:Je;return function(){var l=s(this,e),a=l.on;a!==i&&(r=(i=a).copy()).on(t,n),l.on=r}}function If(e,t){var n=this._id;return arguments.length<2?Ke(this.node(),n).on.on(e):this.each(kf(n,e,t))}function Af(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ef(){return this.on("end.remove",Af(this._id))}function Sf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ti(e));for(var i=this._groups,r=i.length,s=new Array(r),l=0;l<r;++l)for(var a=i[l],o=a.length,u=s[l]=new Array(o),f,h,c=0;c<o;++c)(f=a[c])&&(h=e.call(f,f.__data__,c,a))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,An(u[c],t,n,c,u,Ke(f,n)));return new tt(s,this._parents,t,n)}function Mf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rl(e));for(var i=this._groups,r=i.length,s=[],l=[],a=0;a<r;++a)for(var o=i[a],u=o.length,f,h=0;h<u;++h)if(f=o[h]){for(var c=e.call(f,f.__data__,h,o),d,v=Ke(f,n),g=0,p=c.length;g<p;++g)(d=c[g])&&An(d,t,n,g,c,v);s.push(c),l.push(f)}return new tt(s,l,t,n)}var Cf=qt.prototype.constructor;function Nf(){return new Cf(this._groups,this._parents)}function Lf(e,t){var n,i,r;return function(){var s=It(this,e),l=(this.style.removeProperty(e),It(this,e));return s===l?null:s===n&&l===i?r:r=t(n=s,i=l)}}function ls(e){return function(){this.style.removeProperty(e)}}function Tf(e,t,n){var i,r=n+"",s;return function(){var l=It(this,e);return l===r?null:l===i?s:s=t(i=l,n)}}function Df(e,t,n){var i,r,s;return function(){var l=It(this,e),a=n(this),o=a+"";return a==null&&(o=a=(this.style.removeProperty(e),It(this,e))),l===o?null:l===i&&o===r?s:(r=o,s=t(i=l,a))}}function Vf(e,t){var n,i,r,s="style."+t,l="end."+s,a;return function(){var o=Je(this,e),u=o.on,f=o.value[s]==null?a||(a=ls(t)):void 0;(u!==n||r!==f)&&(i=(n=u).copy()).on(l,r=f),o.on=i}}function Of(e,t,n){var i=(e+="")=="transform"?Ru:rs;return t==null?this.styleTween(e,Lf(e,i)).on("end.style."+e,ls(e)):typeof t=="function"?this.styleTween(e,Df(e,i,Ri(this,"style."+e,t))).each(Vf(this._id,e)):this.styleTween(e,Tf(e,i,t),n).on("end.style."+e,null)}function Ff(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Hf(e,t,n){var i,r;function s(){var l=t.apply(this,arguments);return l!==r&&(i=(r=l)&&Ff(e,l,n)),i}return s._value=t,s}function Rf(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Hf(e,t,n==null?"":n))}function Pf(e){return function(){this.textContent=e}}function zf(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Bf(e){return this.tween("text",typeof e=="function"?zf(Ri(this,"text",e)):Pf(e==null?"":e+""))}function Uf(e){return function(t){this.textContent=e.call(this,t)}}function qf(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Uf(r)),t}return i._value=e,i}function Gf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qf(e))}function Xf(){for(var e=this._name,t=this._id,n=ss(),i=this._groups,r=i.length,s=0;s<r;++s)for(var l=i[s],a=l.length,o,u=0;u<a;++u)if(o=l[u]){var f=Ke(o,t);An(o,e,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new tt(i,this._parents,e,n)}function Yf(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,l){var a={value:l},o={value:function(){--r===0&&s()}};n.each(function(){var u=Je(this,i),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(o)),u.on=t}),r===0&&s()})}var jf=0;function tt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ss(){return++jf}var $e=qt.prototype;tt.prototype={constructor:tt,select:Sf,selectAll:Mf,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:yf,merge:wf,selection:Nf,transition:Xf,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:If,attr:nf,attrTween:of,style:Of,styleTween:Rf,text:Bf,textTween:Gf,remove:Ef,tween:Ku,delay:cf,duration:_f,ease:gf,easeVarying:vf,end:Yf,[Symbol.iterator]:$e[Symbol.iterator]};function Wf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var xf={time:null,delay:0,duration:250,ease:Wf};function Kf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zf(e){var t,n;e instanceof tt?(t=e._id,e=e._name):(t=ss(),(n=xf).time=Fi(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var l=i[s],a=l.length,o,u=0;u<a;++u)(o=l[u])&&An(o,e,t,u,l,n||Kf(o,t));return new tt(i,this._parents,e,t)}qt.prototype.interrupt=ju;qt.prototype.transition=Zf;const Bn=e=>()=>e;function Jf(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Qf(e){e.stopImmediatePropagation()}function Un(e){e.preventDefault(),e.stopImmediatePropagation()}var pr={name:"drag"},qn={name:"space"},pt={name:"handle"},vt={name:"center"};const{abs:vr,max:Le,min:Te}=Math;function yr(e){return[+e[0],+e[1]]}function wr(e){return[yr(e[0]),yr(e[1])]}var rn={name:"x",handles:["w","e"].map(dn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Gn={name:"y",handles:["n","s"].map(dn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},et={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},br={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},kr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},$f={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ec={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function dn(e){return{type:e}}function tc(e){return!e.ctrlKey&&!e.button}function nc(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ic(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function rc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function lc(){return sc(rn)}function sc(e){var t=nc,n=tc,i=ic,r=!0,s=Li("start","brush","end"),l=6,a;function o(p){var b=p.property("__brush",g).selectAll(".overlay").data([dn("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",et.overlay).merge(b).each(function(){var w=Xn(this).extent;ze(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),p.selectAll(".selection").data([dn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",et.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=p.selectAll(".handle").data(e.handles,function(w){return w.type});S.exit().remove(),S.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return et[w.type]}),p.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",c).filter(i).on("touchstart.brush",c).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}o.move=function(p,b,S){p.tween?p.on("start.brush",function(w){f(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){f(this,arguments).end(w)}).tween("brush",function(){var w=this,y=w.__brush,I=f(w,arguments),B=y.selection,R=e.input(typeof b=="function"?b.apply(this,arguments):b,y.extent),D=kn(B,R);function U(E){y.selection=E===1&&R===null?null:D(E),u.call(w),I.brush()}return B!==null&&R!==null?U:U(1)}):p.each(function(){var w=this,y=arguments,I=w.__brush,B=e.input(typeof b=="function"?b.apply(w,y):b,I.extent),R=f(w,y).beforestart();di(w),I.selection=B===null?null:B,u.call(w),R.start(S).brush(S).end(S)})},o.clear=function(p,b){o.move(p,null,b)};function u(){var p=ze(this),b=Xn(this).selection;b?(p.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?b[1][0]-l/2:b[0][0]-l/2}).attr("y",function(S){return S.type[0]==="s"?b[1][1]-l/2:b[0][1]-l/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?b[1][0]-b[0][0]+l:l}).attr("height",function(S){return S.type==="e"||S.type==="w"?b[1][1]-b[0][1]+l:l})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(p,b,S){var w=p.__brush.emitter;return w&&(!S||!w.clean)?w:new h(p,b,S)}function h(p,b,S){this.that=p,this.args=b,this.state=p.__brush,this.active=0,this.clean=S}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,b){return this.starting?(this.starting=!1,this.emit("start",p,b)):this.emit("brush",p),this},brush:function(p,b){return this.emit("brush",p,b),this},end:function(p,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,b)),this},emit:function(p,b,S){var w=ze(this.that).datum();s.call(p,this.that,new Jf(p,{sourceEvent:b,target:o,selection:e.output(this.state.selection),mode:S,dispatch:s}),w)}};function c(p){if(a&&!p.touches||!n.apply(this,arguments))return;var b=this,S=p.target.__data__.type,w=(r&&p.metaKey?S="overlay":S)==="selection"?pr:r&&p.altKey?vt:pt,y=e===Gn?null:$f[S],I=e===rn?null:ec[S],B=Xn(b),R=B.extent,D=B.selection,U=R[0][0],E,A,L=R[0][1],O,N,C=R[1][0],M,z,j=R[1][1],q,X,W=0,T=0,ee,ae=y&&I&&r&&p.shiftKey,pe,_e,oe=Array.from(p.touches||[p],x=>{const se=x.identifier;return x=ir(x,b),x.point0=x.slice(),x.identifier=se,x});di(b);var V=f(b,arguments,!0).beforestart();if(S==="overlay"){D&&(ee=!0);const x=[oe[0],oe[1]||oe[0]];B.selection=D=[[E=e===Gn?U:Te(x[0][0],x[1][0]),O=e===rn?L:Te(x[0][1],x[1][1])],[M=e===Gn?C:Le(x[0][0],x[1][0]),q=e===rn?j:Le(x[0][1],x[1][1])]],oe.length>1&&Y(p)}else E=D[0][0],O=D[0][1],M=D[1][0],q=D[1][1];A=E,N=O,z=M,X=q;var K=ze(b).attr("pointer-events","none"),fe=K.selectAll(".overlay").attr("cursor",et[S]);if(p.touches)V.moved=F,V.ended=re;else{var Ae=ze(p.view).on("mousemove.brush",F,!0).on("mouseup.brush",re,!0);r&&Ae.on("keydown.brush",Ee,!0).on("keyup.brush",Ne,!0),fu(p.view)}u.call(b),V.start(p,w.name);function F(x){for(const se of x.changedTouches||[x])for(const Ge of oe)Ge.identifier===se.identifier&&(Ge.cur=ir(se,b));if(ae&&!pe&&!_e&&oe.length===1){const se=oe[0];vr(se.cur[0]-se[0])>vr(se.cur[1]-se[1])?_e=!0:pe=!0}for(const se of oe)se.cur&&(se[0]=se.cur[0],se[1]=se.cur[1]);ee=!0,Un(x),Y(x)}function Y(x){const se=oe[0],Ge=se.point0;var Se;switch(W=se[0]-Ge[0],T=se[1]-Ge[1],w){case qn:case pr:{y&&(W=Le(U-E,Te(C-M,W)),A=E+W,z=M+W),I&&(T=Le(L-O,Te(j-q,T)),N=O+T,X=q+T);break}case pt:{oe[1]?(y&&(A=Le(U,Te(C,oe[0][0])),z=Le(U,Te(C,oe[1][0])),y=1),I&&(N=Le(L,Te(j,oe[0][1])),X=Le(L,Te(j,oe[1][1])),I=1)):(y<0?(W=Le(U-E,Te(C-E,W)),A=E+W,z=M):y>0&&(W=Le(U-M,Te(C-M,W)),A=E,z=M+W),I<0?(T=Le(L-O,Te(j-O,T)),N=O+T,X=q):I>0&&(T=Le(L-q,Te(j-q,T)),N=O,X=q+T));break}case vt:{y&&(A=Le(U,Te(C,E-W*y)),z=Le(U,Te(C,M+W*y))),I&&(N=Le(L,Te(j,O-T*I)),X=Le(L,Te(j,q+T*I)));break}}z<A&&(y*=-1,Se=E,E=M,M=Se,Se=A,A=z,z=Se,S in br&&fe.attr("cursor",et[S=br[S]])),X<N&&(I*=-1,Se=O,O=q,q=Se,Se=N,N=X,X=Se,S in kr&&fe.attr("cursor",et[S=kr[S]])),B.selection&&(D=B.selection),pe&&(A=D[0][0],z=D[1][0]),_e&&(N=D[0][1],X=D[1][1]),(D[0][0]!==A||D[0][1]!==N||D[1][0]!==z||D[1][1]!==X)&&(B.selection=[[A,N],[z,X]],u.call(b),V.brush(x,w.name))}function re(x){if(Qf(x),x.touches){if(x.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else cu(x.view,ee),Ae.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);K.attr("pointer-events","all"),fe.attr("cursor",et.overlay),B.selection&&(D=B.selection),rc(D)&&(B.selection=null,u.call(b)),V.end(x,w.name)}function Ee(x){switch(x.keyCode){case 16:{ae=y&&I;break}case 18:{w===pt&&(y&&(M=z-W*y,E=A+W*y),I&&(q=X-T*I,O=N+T*I),w=vt,Y(x));break}case 32:{(w===pt||w===vt)&&(y<0?M=z-W:y>0&&(E=A-W),I<0?q=X-T:I>0&&(O=N-T),w=qn,fe.attr("cursor",et.selection),Y(x));break}default:return}Un(x)}function Ne(x){switch(x.keyCode){case 16:{ae&&(pe=_e=ae=!1,Y(x));break}case 18:{w===vt&&(y<0?M=z:y>0&&(E=A),I<0?q=X:I>0&&(O=N),w=pt,Y(x));break}case 32:{w===qn&&(x.altKey?(y&&(M=z-W*y,E=A+W*y),I&&(q=X-T*I,O=N+T*I),w=vt):(y<0?M=z:y>0&&(E=A),I<0?q=X:I>0&&(O=N),w=pt),fe.attr("cursor",et[S]),Y(x));break}default:return}Un(x)}}function d(p){f(this,arguments).moved(p)}function v(p){f(this,arguments).ended(p)}function g(){var p=this.__brush||{selection:null};return p.extent=wr(t.apply(this,arguments)),p.dim=e,p}return o.extent=function(p){return arguments.length?(t=typeof p=="function"?p:Bn(wr(p)),o):t},o.filter=function(p){return arguments.length?(n=typeof p=="function"?p:Bn(!!p),o):n},o.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:Bn(!!p),o):i},o.handleSize=function(p){return arguments.length?(l=+p,o):l},o.keyModifiers=function(p){return arguments.length?(r=!!p,o):r},o.on=function(){var p=s.on.apply(s,arguments);return p===s?o:p},o}const _i=Math.PI,mi=2*_i,lt=1e-6,ac=mi-lt;function gi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function pi(){return new gi}gi.prototype=pi.prototype={constructor:gi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var s=this._x1,l=this._y1,a=n-e,o=i-t,u=s-e,f=l-t,h=u*u+f*f;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>lt)if(!(Math.abs(f*a-o*u)>lt)||!r)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var c=n-s,d=i-l,v=a*a+o*o,g=c*c+d*d,p=Math.sqrt(v),b=Math.sqrt(h),S=r*Math.tan((_i-Math.acos((v+h-g)/(2*p*b)))/2),w=S/b,y=S/p;Math.abs(w-1)>lt&&(this._+="L"+(e+w*u)+","+(t+w*f)),this._+="A"+r+","+r+",0,0,"+ +(f*c>u*d)+","+(this._x1=e+y*a)+","+(this._y1=t+y*o)}},arc:function(e,t,n,i,r,s){e=+e,t=+t,n=+n,s=!!s;var l=n*Math.cos(i),a=n*Math.sin(i),o=e+l,u=t+a,f=1^s,h=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+o+","+u:(Math.abs(this._x1-o)>lt||Math.abs(this._y1-u)>lt)&&(this._+="L"+o+","+u),n&&(h<0&&(h=h%mi+mi),h>ac?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-a)+"A"+n+","+n+",0,1,"+f+","+(this._x1=o)+","+(this._y1=u):h>lt&&(this._+="A"+n+","+n+",0,"+ +(h>=_i)+","+f+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Ir={},Yn={},jn=34,Nt=10,Wn=13;function as(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function oc(e,t){var n=as(e);return function(i,r){return t(n(i),r,e)}}function Ar(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Ve(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function uc(e){return e<0?"-"+Ve(-e,6):e>9999?"+"+Ve(e,6):Ve(e,4)}function fc(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":uc(e.getUTCFullYear())+"-"+Ve(e.getUTCMonth()+1,2)+"-"+Ve(e.getUTCDate(),2)+(r?"T"+Ve(t,2)+":"+Ve(n,2)+":"+Ve(i,2)+"."+Ve(r,3)+"Z":i?"T"+Ve(t,2)+":"+Ve(n,2)+":"+Ve(i,2)+"Z":n||t?"T"+Ve(t,2)+":"+Ve(n,2)+"Z":"")}function cc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,c){var d,v,g=r(h,function(p,b){if(d)return d(p,b-1);v=p,d=c?oc(p,c):as(p)});return g.columns=v||[],g}function r(h,c){var d=[],v=h.length,g=0,p=0,b,S=v<=0,w=!1;h.charCodeAt(v-1)===Nt&&--v,h.charCodeAt(v-1)===Wn&&--v;function y(){if(S)return Yn;if(w)return w=!1,Ir;var B,R=g,D;if(h.charCodeAt(R)===jn){for(;g++<v&&h.charCodeAt(g)!==jn||h.charCodeAt(++g)===jn;);return(B=g)>=v?S=!0:(D=h.charCodeAt(g++))===Nt?w=!0:D===Wn&&(w=!0,h.charCodeAt(g)===Nt&&++g),h.slice(R+1,B-1).replace(/""/g,'"')}for(;g<v;){if((D=h.charCodeAt(B=g++))===Nt)w=!0;else if(D===Wn)w=!0,h.charCodeAt(g)===Nt&&++g;else if(D!==n)continue;return h.slice(R,B)}return S=!0,h.slice(R,v)}for(;(b=y())!==Yn;){for(var I=[];b!==Ir&&b!==Yn;)I.push(b),b=y();c&&(I=c(I,p++))==null||d.push(I)}return d}function s(h,c){return h.map(function(d){return c.map(function(v){return f(d[v])}).join(e)})}function l(h,c){return c==null&&(c=Ar(h)),[c.map(f).join(e)].concat(s(h,c)).join(`
`)}function a(h,c){return c==null&&(c=Ar(h)),s(h,c).join(`
`)}function o(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?fc(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:l,formatBody:a,formatRows:o,formatRow:u,formatValue:f}}var hc=cc(","),dc=hc.parse;function _c(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function mc(e,t){return fetch(e,t).then(_c)}function gc(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),mc(t,n).then(function(r){return e(r,i)})}}var Kt=gc(dc);function pc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _n(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Et(e){return e=_n(Math.abs(e)),e?e[1]:NaN}function vc(e,t){return function(n,i){for(var r=n.length,s=[],l=0,a=e[0],o=0;r>0&&a>0&&(o+a+1>i&&(a=Math.max(1,i-o)),s.push(n.substring(r-=a,r+a)),!((o+=a+1)>i));)a=e[l=(l+1)%e.length];return s.reverse().join(t)}}function yc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var wc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mn(e){if(!(t=wc.exec(e)))throw new Error("invalid format: "+e);var t;return new Pi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mn.prototype=Pi.prototype;function Pi(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Pi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bc(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var os;function kc(e,t){var n=_n(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(os=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,l=i.length;return s===l?i:s>l?i+new Array(s-l+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+_n(e,Math.max(0,t+s-1))[0]}function Er(e,t){var n=_n(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Sr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:pc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Er(e*100,t),r:Er,s:kc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Mr(e){return e}var Cr=Array.prototype.map,Nr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ic(e){var t=e.grouping===void 0||e.thousands===void 0?Mr:vc(Cr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Mr:yc(Cr.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",o=e.nan===void 0?"NaN":e.nan+"";function u(h){h=mn(h);var c=h.fill,d=h.align,v=h.sign,g=h.symbol,p=h.zero,b=h.width,S=h.comma,w=h.precision,y=h.trim,I=h.type;I==="n"?(S=!0,I="g"):Sr[I]||(w===void 0&&(w=12),y=!0,I="g"),(p||c==="0"&&d==="=")&&(p=!0,c="0",d="=");var B=g==="$"?n:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",R=g==="$"?i:/[%p]/.test(I)?l:"",D=Sr[I],U=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(A){var L=B,O=R,N,C,M;if(I==="c")O=D(A)+O,A="";else{A=+A;var z=A<0||1/A<0;if(A=isNaN(A)?o:D(Math.abs(A),w),y&&(A=bc(A)),z&&+A==0&&v!=="+"&&(z=!1),L=(z?v==="("?v:a:v==="-"||v==="("?"":v)+L,O=(I==="s"?Nr[8+os/3]:"")+O+(z&&v==="("?")":""),U){for(N=-1,C=A.length;++N<C;)if(M=A.charCodeAt(N),48>M||M>57){O=(M===46?r+A.slice(N+1):A.slice(N))+O,A=A.slice(0,N);break}}}S&&!p&&(A=t(A,1/0));var j=L.length+A.length+O.length,q=j<b?new Array(b-j+1).join(c):"";switch(S&&p&&(A=t(q+A,q.length?b-O.length:1/0),q=""),d){case"<":A=L+A+O+q;break;case"=":A=L+q+A+O;break;case"^":A=q.slice(0,j=q.length>>1)+L+A+O+q.slice(j);break;default:A=q+L+A+O;break}return s(A)}return E.toString=function(){return h+""},E}function f(h,c){var d=u((h=mn(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Et(c)/3)))*3,g=Math.pow(10,-v),p=Nr[8+v/3];return function(b){return d(g*b)+p}}return{format:u,formatPrefix:f}}var Zt,St,us;Ac({thousands:",",grouping:[3],currency:["$",""]});function Ac(e){return Zt=Ic(e),St=Zt.format,us=Zt.formatPrefix,Zt}function Ec(e){return Math.max(0,-Et(Math.abs(e)))}function Sc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Et(t)/3)))*3-Et(Math.abs(e)))}function Mc(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Et(t)-Et(e))+1}function Cc(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Nc(){return this.eachAfter(Cc)}function Lc(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Tc(e,t){for(var n=this,i=[n],r,s,l=-1;n=i.pop();)if(e.call(t,n,++l,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function Dc(e,t){for(var n=this,i=[n],r=[],s,l,a,o=-1;n=i.pop();)if(r.push(n),s=n.children)for(l=0,a=s.length;l<a;++l)i.push(s[l]);for(;n=r.pop();)e.call(t,n,++o,this);return this}function Vc(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Oc(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Fc(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Hc(e){for(var t=this,n=Rc(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Rc(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Pc(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function zc(){return Array.from(this)}function Bc(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Uc(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*qc(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function fs(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Yc)):t===void 0&&(t=Xc);for(var n=new Bt(e),i,r=[n],s,l,a,o;i=r.pop();)if((l=t(i.data))&&(o=(l=Array.from(l)).length))for(i.children=l,a=o-1;a>=0;--a)r.push(s=l[a]=new Bt(l[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(cs)}function Gc(){return fs(this).eachBefore(jc)}function Xc(e){return e.children}function Yc(e){return Array.isArray(e)?e[1]:null}function jc(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function cs(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Bt(e){this.data=e,this.depth=this.height=0,this.parent=null}Bt.prototype=fs.prototype={constructor:Bt,count:Nc,each:Lc,eachAfter:Dc,eachBefore:Tc,find:Vc,sum:Oc,sort:Fc,path:Hc,ancestors:Pc,descendants:zc,leaves:Bc,links:Uc,copy:Gc,[Symbol.iterator]:qc};function xn(e){return e==null?null:hs(e)}function hs(e){if(typeof e!="function")throw new Error;return e}function Lt(){return 0}function Tt(e){return function(){return e}}function Wc(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ds(e,t,n,i,r){for(var s=e.children,l,a=-1,o=s.length,u=e.value&&(i-t)/e.value;++a<o;)l=s[a],l.y0=n,l.y1=r,l.x0=t,l.x1=t+=l.value*u}var xc={depth:-1},Lr={},Kn={};function Kc(e){return e.id}function Zc(e){return e.parentId}function Jc(){var e=Kc,t=Zc,n;function i(r){var s=Array.from(r),l=e,a=t,o,u,f,h,c,d,v,g,p=new Map;if(n!=null){const b=s.map((y,I)=>Qc(n(y,I,r))),S=b.map(Tr),w=new Set(b).add("");for(const y of S)w.has(y)||(w.add(y),b.push(y),S.push(Tr(y)),s.push(Kn));l=(y,I)=>b[I],a=(y,I)=>S[I]}for(f=0,o=s.length;f<o;++f)u=s[f],d=s[f]=new Bt(u),(v=l(u,f,r))!=null&&(v+="")&&(g=d.id=v,p.set(g,p.has(g)?Lr:d)),(v=a(u,f,r))!=null&&(v+="")&&(d.parent=v);for(f=0;f<o;++f)if(d=s[f],v=d.parent){if(c=p.get(v),!c)throw new Error("missing: "+v);if(c===Lr)throw new Error("ambiguous: "+v);c.children?c.children.push(d):c.children=[d],d.parent=c}else{if(h)throw new Error("multiple roots");h=d}if(!h)throw new Error("no root");if(n!=null){for(;h.data===Kn&&h.children.length===1;)h=h.children[0],--o;for(let b=s.length-1;b>=0&&(d=s[b],d.data===Kn);--b)d.data=null}if(h.parent=xc,h.eachBefore(function(b){b.depth=b.parent.depth+1,--o}).eachBefore(cs),h.parent=null,o>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=xn(r),i):e},i.parentId=function(r){return arguments.length?(t=xn(r),i):t},i.path=function(r){return arguments.length?(n=xn(r),i):n},i}function Qc(e){e=`${e}`;let t=e.length;return vi(e,t-1)&&!vi(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Tr(e){let t=e.length;if(t<2)return"";for(;--t>1&&!vi(e,t););return e.slice(0,t)}function vi(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function _s(e,t,n,i,r){for(var s=e.children,l,a=-1,o=s.length,u=e.value&&(r-n)/e.value;++a<o;)l=s[a],l.x0=t,l.x1=i,l.y0=n,l.y1=n+=l.value*u}var ms=(1+Math.sqrt(5))/2;function gs(e,t,n,i,r,s){for(var l=[],a=t.children,o,u,f=0,h=0,c=a.length,d,v,g=t.value,p,b,S,w,y,I,B;f<c;){d=r-n,v=s-i;do p=a[h++].value;while(!p&&h<c);for(b=S=p,I=Math.max(v/d,d/v)/(g*e),B=p*p*I,y=Math.max(S/B,B/b);h<c;++h){if(p+=u=a[h].value,u<b&&(b=u),u>S&&(S=u),B=p*p*I,w=Math.max(S/B,B/b),w>y){p-=u;break}y=w}l.push(o={value:p,dice:d<v,children:a.slice(f,h)}),o.dice?ds(o,n,i,r,g?i+=v*p/g:s):_s(o,n,i,g?n+=d*p/g:r,s),g-=p,f=h}return l}const $c=function e(t){function n(i,r,s,l,a){gs(t,i,r,s,l,a)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(ms);function eh(){var e=$c,t=!1,n=1,i=1,r=[0],s=Lt,l=Lt,a=Lt,o=Lt,u=Lt;function f(c){return c.x0=c.y0=0,c.x1=n,c.y1=i,c.eachBefore(h),r=[0],t&&c.eachBefore(Wc),c}function h(c){var d=r[c.depth],v=c.x0+d,g=c.y0+d,p=c.x1-d,b=c.y1-d;p<v&&(v=p=(v+p)/2),b<g&&(g=b=(g+b)/2),c.x0=v,c.y0=g,c.x1=p,c.y1=b,c.children&&(d=r[c.depth+1]=s(c)/2,v+=u(c)-d,g+=l(c)-d,p-=a(c)-d,b-=o(c)-d,p<v&&(v=p=(v+p)/2),b<g&&(g=b=(g+b)/2),e(c,v,g,p,b))}return f.round=function(c){return arguments.length?(t=!!c,f):t},f.size=function(c){return arguments.length?(n=+c[0],i=+c[1],f):[n,i]},f.tile=function(c){return arguments.length?(e=hs(c),f):e},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(s=typeof c=="function"?c:Tt(+c),f):s},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(l=typeof c=="function"?c:Tt(+c),f):l},f.paddingRight=function(c){return arguments.length?(a=typeof c=="function"?c:Tt(+c),f):a},f.paddingBottom=function(c){return arguments.length?(o=typeof c=="function"?c:Tt(+c),f):o},f.paddingLeft=function(c){return arguments.length?(u=typeof c=="function"?c:Tt(+c),f):u},f}const th=function e(t){function n(i,r,s,l,a){if((o=i._squarify)&&o.ratio===t)for(var o,u,f,h,c=-1,d,v=o.length,g=i.value;++c<v;){for(u=o[c],f=u.children,h=u.value=0,d=f.length;h<d;++h)u.value+=f[h].value;u.dice?ds(u,r,s,l,g?s+=(a-s)*u.value/g:a):_s(u,r,s,g?r+=(l-r)*u.value/g:l,a),g-=u.value}else i._squarify=o=gs(t,i,r,s,l,a),o.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(ms);function ps(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Dr=Symbol("implicit");function yi(){var e=new Jn,t=[],n=[],i=Dr;function r(s){let l=e.get(s);if(l===void 0){if(i!==Dr)return i;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Jn;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return yi(t,n).unknown(i)},ps.apply(r,arguments),r}function nh(e){return function(){return e}}function ih(e){return+e}var Vr=[0,1];function yt(e){return e}function wi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:nh(isNaN(t)?NaN:.5)}function rh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function lh(e,t,n){var i=e[0],r=e[1],s=t[0],l=t[1];return r<i?(i=wi(r,i),s=n(l,s)):(i=wi(i,r),s=n(s,l)),function(a){return s(i(a))}}function sh(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),l=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<i;)r[l]=wi(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(a){var o=da(e,a,1,i)-1;return s[o](r[o](a))}}function ah(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function oh(){var e=Vr,t=Vr,n=kn,i,r,s,l=yt,a,o,u;function f(){var c=Math.min(e.length,t.length);return l!==yt&&(l=rh(e[0],e[c-1])),a=c>2?sh:lh,o=u=null,h}function h(c){return c==null||isNaN(c=+c)?s:(o||(o=a(e.map(i),t,n)))(i(l(c)))}return h.invert=function(c){return l(r((u||(u=a(t,e.map(i),Xe)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,ih),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=Ou,f()},h.clamp=function(c){return arguments.length?(l=c?!0:yt,f()):l!==yt},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(s=c,h):s},function(c,d){return i=c,r=d,f()}}function uh(){return oh()(yt,yt)}function fh(e,t,n,i){var r=ya(e,t,n),s;switch(i=mn(i==null?",f":i),i.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=Sc(r,l))&&(i.precision=s),us(i,l)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Mc(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Ec(r))&&(i.precision=s-(i.type==="%")*2);break}}return St(i)}function ch(e){var t=e.domain;return e.ticks=function(n){var i=t();return va(i[0],i[i.length-1],n==null?10:n)},e.tickFormat=function(n,i){var r=t();return fh(r[0],r[r.length-1],n==null?10:n,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,l=i[r],a=i[s],o,u,f=10;for(a<l&&(u=l,l=a,a=u,u=r,r=s,s=u);f-- >0;){if(u=Vl(l,a,n),u===o)return i[r]=l,i[s]=a,t(i);if(u>0)l=Math.floor(l/u)*u,a=Math.ceil(a/u)*u;else if(u<0)l=Math.ceil(l*u)/u,a=Math.floor(a*u)/u;else break;o=u}return e},e}function gn(){var e=uh();return e.copy=function(){return ah(e,gn())},ps.apply(e,arguments),ch(e)}function hh(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Or=hh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function wt(e,t,n){this.k=e,this.x=t,this.y=n}wt.prototype={constructor:wt,scale:function(e){return e===1?this:new wt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new wt(1,0,0);wt.prototype;const bt=aa([2020]);class dh{constructor(t){Ie(this,"id");Ie(this,"code");Ie(this,"name");Ie(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class bi{constructor(t){Ie(this,"id");Ie(this,"code");Ie(this,"name");Ie(this,"level");Ie(this,"parent_id");Ie(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class ut{constructor(t,n,i){Ie(this,"location_id");Ie(this,"location");Ie(this,"partner_id");Ie(this,"partner");Ie(this,"product_id");Ie(this,"product");Ie(this,"year");Ie(this,"export_value");Ie(this,"import_value");this.location_id=+i.location_id,this.location=t.get(this.location_id),this.partner_id=+i.partner_id,this.partner=t.get(this.partner_id),this.product_id=+i.product_id,this.product=n.get(this.product_id),this.year=+i.year,this.export_value=+i.export_value,this.import_value=+i.import_value}}function _h(e,t){const n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r={};return r.top=n.top<0,r.left=n.left<0,r.bottom=n.bottom+i.height>(window.innerHeight||document.documentElement.clientHeight),r.right=n.right>(window.innerWidth||document.documentElement.clientWidth),r.any=r.top||r.left||r.bottom||r.right,r}function mh(e){let t,n=e[0](e[1],e[2])+"",i;return{c(){t=te("div"),this.h()},l(r){t=ne(r,"DIV",{class:!0});var s=P(t);s.forEach(k),this.h()},h(){_(t,"class",i="item "+e[3]+" svelte-3e0qet")},m(r,s){G(r,t,s),t.innerHTML=n},p(r,[s]){s&7&&n!==(n=r[0](r[1],r[2])+"")&&(t.innerHTML=n),s&8&&i!==(i="item "+r[3]+" svelte-3e0qet")&&_(t,"class",i)},i:ye,o:ye,d(r){r&&k(t)}}}function gh(e,t,n){let{isActive:i=!1}=t,{isFirst:r=!1}=t,{isHover:s=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:a=void 0}=t,{item:o=void 0}=t,{filterText:u=""}=t,f="";return e.$$set=h=>{"isActive"in h&&n(4,i=h.isActive),"isFirst"in h&&n(5,r=h.isFirst),"isHover"in h&&n(6,s=h.isHover),"isSelectable"in h&&n(7,l=h.isSelectable),"getOptionLabel"in h&&n(0,a=h.getOptionLabel),"item"in h&&n(1,o=h.item),"filterText"in h&&n(2,u=h.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const h=[];i&&h.push("active"),r&&h.push("first"),s&&h.push("hover"),o.isGroupHeader&&h.push("groupHeader"),o.isGroupItem&&h.push("groupItem"),l||h.push("notSelectable"),n(3,f=h.join(" "))}},[a,o,u,f,i,r,s,l]}class vs extends je{constructor(t){super(),We(this,t,gh,mh,xe,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Fr(e,t,n){const i=e.slice();return i[41]=t[n],i[42]=n,i}function ph(e){let t,n,i=e[1],r=[];for(let a=0;a<i.length;a+=1)r[a]=Pr(Fr(e,i,a));const s=a=>ie(r[a],1,1,()=>{r[a]=null});let l=null;return i.length||(l=Hr(e)),{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=le(),l&&l.c()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);t=le(),l&&l.l(a)},m(a,o){for(let u=0;u<r.length;u+=1)r[u].m(a,o);G(a,t,o),l&&l.m(a,o),n=!0},p(a,o){if(o[0]&114390){i=a[1];let u;for(u=0;u<i.length;u+=1){const f=Fr(a,i,u);r[u]?(r[u].p(f,o),J(r[u],1)):(r[u]=Pr(f),r[u].c(),J(r[u],1),r[u].m(t.parentNode,t))}for(Me(),u=i.length;u<r.length;u+=1)s(u);Ce(),!i.length&&l?l.p(a,o):i.length?l&&(l.d(1),l=null):(l=Hr(a),l.c(),l.m(t.parentNode,t))}},i(a){if(!n){for(let o=0;o<i.length;o+=1)J(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)ie(r[o]);n=!1},d(a){Ai(r,a),a&&k(t),l&&l.d(a)}}}function vh(e){let t,n,i;var r=e[3];function s(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[bh,({item:a,i:o})=>({41:a,42:o}),({item:a,i:o})=>[0,(a?1024:0)|(o?2048:0)]]},$$scope:{ctx:l}}}}return r&&(t=De(r,s(e))),{c(){t&&we(t.$$.fragment),n=le()},l(l){t&&Oe(t.$$.fragment,l),n=le()},m(l,a){t&&be(t,l,a),G(l,n,a),i=!0},p(l,a){const o={};if(a[0]&2&&(o.items=l[1]),a[0]&256&&(o.itemHeight=l[8]),a[0]&9814|a[1]&11264&&(o.$$scope={dirty:a,ctx:l}),r!==(r=l[3])){if(t){Me();const u=t;ie(u.$$.fragment,1,0,()=>{ke(u,1)}),Ce()}r?(t=De(r,s(l)),we(t.$$.fragment),J(t.$$.fragment,1),be(t,n.parentNode,n)):t=null}else r&&t.$set(o)},i(l){i||(t&&J(t.$$.fragment,l),i=!0)},o(l){t&&ie(t.$$.fragment,l),i=!1},d(l){l&&k(n),t&&ke(t,l)}}}function Hr(e){let t,n=!e[11]&&Rr(e);return{c(){n&&n.c(),t=le()},l(i){n&&n.l(i),t=le()},m(i,r){n&&n.m(i,r),G(i,t,r)},p(i,r){i[11]?n&&(n.d(1),n=null):n?n.p(i,r):(n=Rr(i),n.c(),n.m(t.parentNode,t))},d(i){n&&n.d(i),i&&k(t)}}}function Rr(e){let t,n;return{c(){t=te("div"),n=me(e[12]),this.h()},l(i){t=ne(i,"DIV",{class:!0});var r=P(t);n=ge(r,e[12]),r.forEach(k),this.h()},h(){_(t,"class","empty svelte-1uyqfml")},m(i,r){G(i,t,r),H(t,n)},p(i,r){r[0]&4096&&Fe(n,i[12])},d(i){i&&k(t)}}}function yh(e){let t,n,i,r,s,l;var a=e[4];function o(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:ki(c[42]),isActive:pn(c[41],c[9],c[10]),isHover:vn(c[2],c[41],c[42],c[1]),isSelectable:ht(c[41])}}}a&&(n=De(a,o(e)));function u(){return e[29](e[42])}function f(){return e[30](e[42])}function h(...c){return e[31](e[41],e[42],...c)}return{c(){t=te("div"),n&&we(n.$$.fragment),i=he(),this.h()},l(c){t=ne(c,"DIV",{class:!0,tabindex:!0});var d=P(t);n&&Oe(n.$$.fragment,d),i=de(d),d.forEach(k),this.h()},h(){_(t,"class","listItem"),_(t,"tabindex","-1")},m(c,d){G(c,t,d),n&&be(n,t,null),H(t,i),r=!0,s||(l=[ue(t,"mouseover",u),ue(t,"focus",f),ue(t,"click",h)],s=!0)},p(c,d){e=c;const v={};if(d[0]&2&&(v.item=e[41]),d[0]&8192&&(v.filterText=e[13]),d[0]&64&&(v.getOptionLabel=e[6]),d[0]&1538&&(v.isActive=pn(e[41],e[9],e[10])),d[0]&6&&(v.isHover=vn(e[2],e[41],e[42],e[1])),d[0]&2&&(v.isSelectable=ht(e[41])),a!==(a=e[4])){if(n){Me();const g=n;ie(g.$$.fragment,1,0,()=>{ke(g,1)}),Ce()}a?(n=De(a,o(e)),we(n.$$.fragment),J(n.$$.fragment,1),be(n,t,i)):n=null}else a&&n.$set(v)},i(c){r||(n&&J(n.$$.fragment,c),r=!0)},o(c){n&&ie(n.$$.fragment,c),r=!1},d(c){c&&k(t),n&&ke(n),s=!1,dt(l)}}}function wh(e){let t,n=e[7](e[41])+"",i;return{c(){t=te("div"),i=me(n),this.h()},l(r){t=ne(r,"DIV",{class:!0});var s=P(t);i=ge(s,n),s.forEach(k),this.h()},h(){_(t,"class","listGroupTitle svelte-1uyqfml")},m(r,s){G(r,t,s),H(t,i)},p(r,s){s[0]&130&&n!==(n=r[7](r[41])+"")&&Fe(i,n)},i:ye,o:ye,d(r){r&&k(t)}}}function Pr(e){let t,n,i,r;const s=[wh,yh],l=[];function a(o,u){return o[41].isGroupHeader&&!o[41].isSelectable?0:1}return t=a(e),n=l[t]=s[t](e),{c(){n.c(),i=le()},l(o){n.l(o),i=le()},m(o,u){l[t].m(o,u),G(o,i,u),r=!0},p(o,u){let f=t;t=a(o),t===f?l[t].p(o,u):(Me(),ie(l[f],1,1,()=>{l[f]=null}),Ce(),n=l[t],n?n.p(o,u):(n=l[t]=s[t](o),n.c()),J(n,1),n.m(i.parentNode,i))},i(o){r||(J(n),r=!0)},o(o){ie(n),r=!1},d(o){l[t].d(o),o&&k(i)}}}function bh(e){let t,n,i,r,s;var l=e[4];function a(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:ki(h[42]),isActive:pn(h[41],h[9],h[10]),isHover:vn(h[2],h[41],h[42],h[1]),isSelectable:ht(h[41])}}}l&&(n=De(l,a(e)));function o(){return e[26](e[42])}function u(){return e[27](e[42])}function f(...h){return e[28](e[41],e[42],...h)}return{c(){t=te("div"),n&&we(n.$$.fragment),this.h()},l(h){t=ne(h,"DIV",{class:!0});var c=P(t);n&&Oe(n.$$.fragment,c),c.forEach(k),this.h()},h(){_(t,"class","listItem")},m(h,c){G(h,t,c),n&&be(n,t,null),i=!0,r||(s=[ue(t,"mouseover",o),ue(t,"focus",u),ue(t,"click",f)],r=!0)},p(h,c){e=h;const d={};if(c[1]&1024&&(d.item=e[41]),c[0]&8192&&(d.filterText=e[13]),c[0]&64&&(d.getOptionLabel=e[6]),c[1]&2048&&(d.isFirst=ki(e[42])),c[0]&1536|c[1]&1024&&(d.isActive=pn(e[41],e[9],e[10])),c[0]&6|c[1]&3072&&(d.isHover=vn(e[2],e[41],e[42],e[1])),c[1]&1024&&(d.isSelectable=ht(e[41])),l!==(l=e[4])){if(n){Me();const v=n;ie(v.$$.fragment,1,0,()=>{ke(v,1)}),Ce()}l?(n=De(l,a(e)),we(n.$$.fragment),J(n.$$.fragment,1),be(n,t,null)):n=null}else l&&n.$set(d)},i(h){i||(n&&J(n.$$.fragment,h),i=!0)},o(h){n&&ie(n.$$.fragment,h),i=!1},d(h){h&&k(t),n&&ke(n),r=!1,dt(s)}}}function kh(e){let t,n,i,r,s,l;const a=[vh,ph],o=[];function u(f,h){return f[5]?0:1}return n=u(e),i=o[n]=a[n](e),{c(){t=te("div"),i.c(),this.h()},l(f){t=ne(f,"DIV",{class:!0,style:!0});var h=P(t);i.l(h),h.forEach(k),this.h()},h(){_(t,"class","listContainer svelte-1uyqfml"),_(t,"style",e[14]),qe(t,"virtualList",e[5])},m(f,h){G(f,t,h),o[n].m(t,null),e[32](t),r=!0,s||(l=[ue(window,"keydown",e[17]),ue(window,"resize",e[18])],s=!0)},p(f,h){let c=n;n=u(f),n===c?o[n].p(f,h):(Me(),ie(o[c],1,1,()=>{o[c]=null}),Ce(),i=o[n],i?i.p(f,h):(i=o[n]=a[n](f),i.c()),J(i,1),i.m(t,null)),(!r||h[0]&16384)&&_(t,"style",f[14]),(!r||h[0]&32)&&qe(t,"virtualList",f[5])},i(f){r||(J(i),r=!0)},o(f){ie(i),r=!1},d(f){f&&k(t),o[n].d(),e[32](null),s=!1,dt(l)}}}function pn(e,t,n){return t&&t[n]===e[n]}function ki(e){return e===0}function vn(e,t,n,i){return ht(t)&&(e===n||i.length===1)}function ht(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function Ih(e,t,n){const i=Ii();let{container:r=void 0}=t,{VirtualList:s=null}=t,{Item:l=vs}=t,{isVirtualList:a=!1}=t,{items:o=[]}=t,{labelIdentifier:u="label"}=t,{getOptionLabel:f=(V,K)=>{if(V)return V.isCreator?`Create "${K}"`:V[u]}}=t,{getGroupHeaderLabel:h=null}=t,{itemHeight:c=40}=t,{hoverItemIndex:d=0}=t,{value:v=void 0}=t,{optionIdentifier:g="value"}=t,{hideEmptyState:p=!1}=t,{noOptionsMessage:b="No options"}=t,{isMulti:S=!1}=t,{activeItemIndex:w=0}=t,{filterText:y=""}=t,{parent:I=null}=t,{listPlacement:B=null}=t,{listAutoWidth:R=null}=t,{listOffset:D=5}=t,U=0,E=!1,A;yn(()=>{if(o.length>0&&!S&&v){const V=o.findIndex(K=>K[g]===v[g]);V&&n(2,d=V)}j("active"),r.addEventListener("scroll",()=>{clearTimeout(U),U=setTimeout(()=>{E=!1},100)},!1)}),Cl(()=>{o||n(1,o=[]),o!==A&&o.length>0&&n(2,d=0),A=o});function L(V){V.isCreator||i("itemSelected",V)}function O(V){E||n(2,d=V)}function N(V){const{item:K,i:fe,event:Ae}=V;if(Ae.stopPropagation(),v&&!S&&v[g]===K[g])return C();K.isCreator?i("itemCreated",y):ht(K)&&(n(19,w=fe),n(2,d=fe),L(K))}function C(){i("closeList")}async function M(V){if(a)return;let K=!0;for(;K;)V>0&&d===o.length-1?n(2,d=0):V<0&&d===0?n(2,d=o.length-1):n(2,d=d+V),K=!ht(o[d]);await Qt(),j("hover")}function z(V){switch(V.key){case"Escape":V.preventDefault(),C();break;case"ArrowDown":V.preventDefault(),o.length&&M(1);break;case"ArrowUp":V.preventDefault(),o.length&&M(-1);break;case"Enter":if(V.preventDefault(),o.length===0)break;const K=o[d];if(v&&!S&&v[g]===K[g]){C();break}K.isCreator?i("itemCreated",y):(n(19,w=d),L(o[d]));break;case"Tab":if(V.preventDefault(),o.length===0||v&&v[g]===o[d][g])return C();n(19,w=d),L(o[d]);break}}function j(V){if(a||!r)return;let K;const fe=r.querySelector(`.listItem .${V}`);fe&&(K=r.getBoundingClientRect().bottom-fe.getBoundingClientRect().bottom),n(0,r.scrollTop-=K,r)}let q;function X(){const{height:V,width:K}=I.getBoundingClientRect();n(14,q=""),n(14,q+=`min-width:${K}px;width:${R?"auto":"100%"};`),B==="top"||B==="auto"&&_h(I,r).bottom?n(14,q+=`bottom:${V+D}px;`):n(14,q+=`top:${V+D}px;`)}const W=V=>O(V),T=V=>O(V),ee=(V,K,fe)=>N({item:V,i:K,event:fe}),ae=V=>O(V),pe=V=>O(V),_e=(V,K,fe)=>N({item:V,i:K,event:fe});function oe(V){He[V?"unshift":"push"](()=>{r=V,n(0,r)})}return e.$$set=V=>{"container"in V&&n(0,r=V.container),"VirtualList"in V&&n(3,s=V.VirtualList),"Item"in V&&n(4,l=V.Item),"isVirtualList"in V&&n(5,a=V.isVirtualList),"items"in V&&n(1,o=V.items),"labelIdentifier"in V&&n(20,u=V.labelIdentifier),"getOptionLabel"in V&&n(6,f=V.getOptionLabel),"getGroupHeaderLabel"in V&&n(7,h=V.getGroupHeaderLabel),"itemHeight"in V&&n(8,c=V.itemHeight),"hoverItemIndex"in V&&n(2,d=V.hoverItemIndex),"value"in V&&n(9,v=V.value),"optionIdentifier"in V&&n(10,g=V.optionIdentifier),"hideEmptyState"in V&&n(11,p=V.hideEmptyState),"noOptionsMessage"in V&&n(12,b=V.noOptionsMessage),"isMulti"in V&&n(21,S=V.isMulti),"activeItemIndex"in V&&n(19,w=V.activeItemIndex),"filterText"in V&&n(13,y=V.filterText),"parent"in V&&n(22,I=V.parent),"listPlacement"in V&&n(23,B=V.listPlacement),"listAutoWidth"in V&&n(24,R=V.listAutoWidth),"listOffset"in V&&n(25,D=V.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&I&&r&&X()},[r,o,d,s,l,a,f,h,c,v,g,p,b,y,q,O,N,z,X,w,u,S,I,B,R,D,W,T,ee,ae,pe,_e,oe]}class Ah extends je{constructor(t){super(),We(this,t,Ih,kh,xe,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function Eh(e){let t,n=e[0](e[1])+"";return{c(){t=te("div"),this.h()},l(i){t=ne(i,"DIV",{class:!0});var r=P(t);r.forEach(k),this.h()},h(){_(t,"class","selection svelte-pu1q1n")},m(i,r){G(i,t,r),t.innerHTML=n},p(i,[r]){r&3&&n!==(n=i[0](i[1])+"")&&(t.innerHTML=n)},i:ye,o:ye,d(i){i&&k(t)}}}function Sh(e,t,n){let{getSelectionLabel:i=void 0}=t,{item:r=void 0}=t;return e.$$set=s=>{"getSelectionLabel"in s&&n(0,i=s.getSelectionLabel),"item"in s&&n(1,r=s.item)},[i,r]}class Mh extends je{constructor(t){super(),We(this,t,Sh,Eh,xe,{getSelectionLabel:0,item:1})}}function zr(e,t,n){const i=e.slice();return i[9]=t[n],i[11]=n,i}function Br(e){let t,n,i,r,s;function l(...a){return e[6](e[11],...a)}return{c(){t=te("div"),n=Q("svg"),i=Q("path"),this.h()},l(a){t=ne(a,"DIV",{class:!0});var o=P(t);n=$(o,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var u=P(n);i=$(u,"path",{d:!0}),P(i).forEach(k),u.forEach(k),o.forEach(k),this.h()},h(){_(i,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),_(n,"width","100%"),_(n,"height","100%"),_(n,"viewBox","-2 -2 50 50"),_(n,"focusable","false"),_(n,"aria-hidden","true"),_(n,"role","presentation"),_(n,"class","svelte-liu9pa"),_(t,"class","multiSelectItem_clear svelte-liu9pa")},m(a,o){G(a,t,o),H(t,n),H(n,i),r||(s=ue(t,"click",l),r=!0)},p(a,o){e=a},d(a){a&&k(t),r=!1,s()}}}function Ur(e){let t,n,i=e[4](e[9])+"",r,s,l,a,o,u=!e[2]&&!e[3]&&Br(e);function f(...h){return e[7](e[11],...h)}return{c(){t=te("div"),n=te("div"),r=he(),u&&u.c(),s=he(),this.h()},l(h){t=ne(h,"DIV",{class:!0});var c=P(t);n=ne(c,"DIV",{class:!0});var d=P(n);d.forEach(k),r=de(c),u&&u.l(c),s=de(c),c.forEach(k),this.h()},h(){_(n,"class","multiSelectItem_label svelte-liu9pa"),_(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(h,c){G(h,t,c),H(t,n),n.innerHTML=i,H(t,r),u&&u.m(t,null),H(t,s),a||(o=ue(t,"click",f),a=!0)},p(h,c){e=h,c&17&&i!==(i=e[4](e[9])+"")&&(n.innerHTML=i),!e[2]&&!e[3]?u?u.p(e,c):(u=Br(e),u.c(),u.m(t,s)):u&&(u.d(1),u=null),c&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&_(t,"class",l)},d(h){h&&k(t),u&&u.d(),a=!1,o()}}}function Ch(e){let t,n=e[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=Ur(zr(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=le()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);t=le()},m(r,s){for(let l=0;l<i.length;l+=1)i[l].m(r,s);G(r,t,s)},p(r,[s]){if(s&63){n=r[0];let l;for(l=0;l<n.length;l+=1){const a=zr(r,n,l);i[l]?i[l].p(a,s):(i[l]=Ur(a),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},i:ye,o:ye,d(r){Ai(i,r),r&&k(t)}}}function Nh(e,t,n){const i=Ii();let{value:r=[]}=t,{activeValue:s=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:a=!1}=t,{getSelectionLabel:o=void 0}=t;function u(c,d){d.stopPropagation(),i("multiItemClear",{i:c})}const f=(c,d)=>u(c,d),h=(c,d)=>a?u(c,d):{};return e.$$set=c=>{"value"in c&&n(0,r=c.value),"activeValue"in c&&n(1,s=c.activeValue),"isDisabled"in c&&n(2,l=c.isDisabled),"multiFullItemClearable"in c&&n(3,a=c.multiFullItemClearable),"getSelectionLabel"in c&&n(4,o=c.getSelectionLabel)},[r,s,l,a,o,u,f,h]}class Lh extends je{constructor(t){super(),We(this,t,Nh,Ch,xe,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function qr(e,t,n){const i=e.slice();return i[23]=t[n],i}const Th=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),Gr=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function Dh(e){let t;return{c(){t=me("Missing template")},l(n){t=ge(n,"Missing template")},m(n,i){G(n,t,i)},d(n){n&&k(t)}}}function Xr(e,t){let n,i,r;const s=t[15].default,l=Ws(s,t,t[14],Gr),a=l||Dh();return{key:e,first:null,c(){n=te("svelte-virtual-list-row"),a&&a.c(),i=he(),this.h()},l(o){n=ne(o,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var u=P(n);a&&a.l(u),i=de(u),u.forEach(k),this.h()},h(){Zn(n,"class","svelte-g2cagw"),this.first=n},m(o,u){G(o,n,u),a&&a.m(n,null),H(n,i),r=!0},p(o,u){t=o,l&&l.p&&(!r||u&16418)&&xs(l,s,t,t[14],r?Zs(s,t[14],u,Th):Ks(t[14]),Gr)},i(o){r||(J(a,o),r=!0)},o(o){ie(a,o),r=!1},d(o){o&&k(n),a&&a.d(o)}}}function Vh(e){let t,n,i=[],r=new Map,s,l,a,o,u=e[5];const f=h=>h[23].index;for(let h=0;h<u.length;h+=1){let c=qr(e,u,h),d=f(c);r.set(d,i[h]=Xr(d,c))}return{c(){t=te("svelte-virtual-list-viewport"),n=te("svelte-virtual-list-contents");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){t=ne(h,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var c=P(t);n=ne(c,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var d=P(n);for(let v=0;v<i.length;v+=1)i[v].l(d);d.forEach(k),c.forEach(k),this.h()},h(){gt(n,"padding-top",e[6]+"px"),gt(n,"padding-bottom",e[7]+"px"),Zn(n,"class","svelte-g2cagw"),gt(t,"height",e[0]),Zn(t,"class","svelte-g2cagw"),Ut(()=>e[18].call(t))},m(h,c){G(h,t,c),H(t,n);for(let d=0;d<i.length;d+=1)i[d].m(n,null);e[16](n),e[17](t),s=wn(t,e[18].bind(t)),l=!0,a||(o=ue(t,"scroll",e[8]),a=!0)},p(h,[c]){c&16418&&(u=h[5],Me(),i=at(i,c,f,1,h,u,r,n,js,Xr,null,qr),Ce()),(!l||c&64)&&gt(n,"padding-top",h[6]+"px"),(!l||c&128)&&gt(n,"padding-bottom",h[7]+"px"),(!l||c&1)&&gt(t,"height",h[0])},i(h){if(!l){for(let c=0;c<u.length;c+=1)J(i[c]);l=!0}},o(h){for(let c=0;c<i.length;c+=1)ie(i[c]);l=!1},d(h){h&&k(t);for(let c=0;c<i.length;c+=1)i[c].d();e[16](null),e[17](null),s(),a=!1,o()}}}function Oh(e,t,n){let{$$slots:i={},$$scope:r}=t,{items:s=void 0}=t,{height:l="100%"}=t,{itemHeight:a=40}=t,{hoverItemIndex:o=0}=t,{start:u=0}=t,{end:f=0}=t,h=[],c,d,v,g=0,p,b,S=0,w=0,y;async function I(E,A,L){const{scrollTop:O}=d;await Qt();let N=S-O,C=u;for(;N<A&&C<E.length;){let z=c[C-u];z||(n(10,f=C+1),await Qt(),z=c[C-u]);const j=h[C]=L||z.offsetHeight;N+=j,C+=1}n(10,f=C);const M=E.length-f;y=(S+N)/f,n(7,w=M*y),h.length=E.length,d&&n(3,d.scrollTop=0,d)}async function B(){const{scrollTop:E}=d,A=u;for(let C=0;C<c.length;C+=1)h[u+C]=a||c[C].offsetHeight;let L=0,O=0;for(;L<s.length;){const C=h[L]||y;if(O+C>E){n(9,u=L),n(6,S=O);break}O+=C,L+=1}for(;L<s.length&&(O+=h[L]||y,L+=1,!(O>E+g)););n(10,f=L);const N=s.length-f;for(y=O/f;L<s.length;)h[L++]=y;if(n(7,w=N*y),u<A){await Qt();let C=0,M=0;for(let j=u;j<A;j+=1)c[j-u]&&(C+=h[j],M+=a||c[j-u].offsetHeight);const z=M-C;d.scrollTo(0,E+z)}}yn(()=>{c=v.getElementsByTagName("svelte-virtual-list-row"),n(13,b=!0)});function R(E){He[E?"unshift":"push"](()=>{v=E,n(4,v)})}function D(E){He[E?"unshift":"push"](()=>{d=E,n(3,d)})}function U(){g=this.offsetHeight,n(2,g)}return e.$$set=E=>{"items"in E&&n(11,s=E.items),"height"in E&&n(0,l=E.height),"itemHeight"in E&&n(12,a=E.itemHeight),"hoverItemIndex"in E&&n(1,o=E.hoverItemIndex),"start"in E&&n(9,u=E.start),"end"in E&&n(10,f=E.end),"$$scope"in E&&n(14,r=E.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,p=s.slice(u,f).map((E,A)=>({index:A+u,data:E}))),e.$$.dirty&14340&&b&&I(s,g,a)},[l,o,g,d,v,p,S,w,B,u,f,s,a,b,r,i,R,D,U]}class Fh extends je{constructor(t){super(),We(this,t,Oh,Vh,xe,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function Hh(e){let t,n;return{c(){t=Q("svg"),n=Q("path"),this.h()},l(i){t=$(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var r=P(t);n=$(r,"path",{fill:!0,d:!0}),P(n).forEach(k),r.forEach(k),this.h()},h(){_(n,"fill","currentColor"),_(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),_(t,"width","100%"),_(t,"height","100%"),_(t,"viewBox","-2 -2 50 50"),_(t,"focusable","false"),_(t,"aria-hidden","true"),_(t,"role","presentation")},m(i,r){G(i,t,r),H(t,n)},p:ye,i:ye,o:ye,d(i){i&&k(t)}}}class Rh extends je{constructor(t){super(),We(this,t,null,Hh,xe,{})}}function Ph(e,t,n){let i;return function(){let s=this,l=arguments,a=function(){i=null,n||e.apply(s,l)},o=n&&!i;clearTimeout(i),i=setTimeout(a,t),o&&e.apply(s,l)}}function Yr(e,t,n){const i=e.slice();return i[103]=t[n],i}function jr(e){let t,n,i,r,s;return{c(){t=te("span"),n=me(e[33]),i=he(),r=te("span"),s=me(e[32]),this.h()},l(l){t=ne(l,"SPAN",{id:!0});var a=P(t);n=ge(a,e[33]),a.forEach(k),i=de(l),r=ne(l,"SPAN",{id:!0});var o=P(r);s=ge(o,e[32]),o.forEach(k),this.h()},h(){_(t,"id","aria-selection"),_(r,"id","aria-context")},m(l,a){G(l,t,a),H(t,n),G(l,i,a),G(l,r,a),H(r,s)},p(l,a){a[1]&4&&Fe(n,l[33]),a[1]&2&&Fe(s,l[32])},d(l){l&&k(t),l&&k(i),l&&k(r)}}}function Wr(e){let t,n,i;const r=[e[18]];var s=e[17];function l(a){let o={};for(let u=0;u<r.length;u+=1)o=Ei(o,r[u]);return{props:o}}return s&&(t=De(s,l())),{c(){t&&we(t.$$.fragment),n=le()},l(a){t&&Oe(t.$$.fragment,a),n=le()},m(a,o){t&&be(t,a,o),G(a,n,o),i=!0},p(a,o){const u=o[0]&262144?Si(r,[Nl(a[18])]):{};if(s!==(s=a[17])){if(t){Me();const f=t;ie(f.$$.fragment,1,0,()=>{ke(f,1)}),Ce()}s?(t=De(s,l()),we(t.$$.fragment),J(t.$$.fragment,1),be(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(a){i||(t&&J(t.$$.fragment,a),i=!0)},o(a){t&&ie(t.$$.fragment,a),i=!1},d(a){a&&k(n),t&&ke(t,a)}}}function xr(e){let t,n,i;var r=e[26];function s(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return r&&(t=De(r,s(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&we(t.$$.fragment),n=le()},l(l){t&&Oe(t.$$.fragment,l),n=le()},m(l,a){t&&be(t,l,a),G(l,n,a),i=!0},p(l,a){const o={};if(a[0]&4&&(o.value=l[2]),a[0]&4096&&(o.getSelectionLabel=l[12]),a[0]&1073741824&&(o.activeValue=l[30]),a[0]&512&&(o.isDisabled=l[9]),a[0]&256&&(o.multiFullItemClearable=l[8]),r!==(r=l[26])){if(t){Me();const u=t;ie(u.$$.fragment,1,0,()=>{ke(u,1)}),Ce()}r?(t=De(r,s(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),we(t.$$.fragment),J(t.$$.fragment,1),be(t,n.parentNode,n)):t=null}else r&&t.$set(o)},i(l){i||(t&&J(t.$$.fragment,l),i=!0)},o(l){t&&ie(t.$$.fragment,l),i=!1},d(l){l&&k(n),t&&ke(t,l)}}}function Kr(e){let t,n,i,r,s;var l=e[25];function a(o){return{props:{item:o[2],getSelectionLabel:o[12]}}}return l&&(n=De(l,a(e))),{c(){t=te("div"),n&&we(n.$$.fragment),this.h()},l(o){t=ne(o,"DIV",{class:!0});var u=P(t);n&&Oe(n.$$.fragment,u),u.forEach(k),this.h()},h(){_(t,"class","selectedItem svelte-17l1npl")},m(o,u){G(o,t,u),n&&be(n,t,null),i=!0,r||(s=ue(t,"focus",e[40]),r=!0)},p(o,u){const f={};if(u[0]&4&&(f.item=o[2]),u[0]&4096&&(f.getSelectionLabel=o[12]),l!==(l=o[25])){if(n){Me();const h=n;ie(h.$$.fragment,1,0,()=>{ke(h,1)}),Ce()}l?(n=De(l,a(o)),we(n.$$.fragment),J(n.$$.fragment,1),be(n,t,null)):n=null}else l&&n.$set(f)},i(o){i||(n&&J(n.$$.fragment,o),i=!0)},o(o){n&&ie(n.$$.fragment,o),i=!1},d(o){o&&k(t),n&&ke(n),r=!1,s()}}}function Zr(e){let t,n,i,r,s;var l=e[23];function a(o){return{}}return l&&(n=De(l,a())),{c(){t=te("div"),n&&we(n.$$.fragment),this.h()},l(o){t=ne(o,"DIV",{class:!0,"aria-hidden":!0});var u=P(t);n&&Oe(n.$$.fragment,u),u.forEach(k),this.h()},h(){_(t,"class","clearSelect svelte-17l1npl"),_(t,"aria-hidden","true")},m(o,u){G(o,t,u),n&&be(n,t,null),i=!0,r||(s=ue(t,"click",Js(e[27])),r=!0)},p(o,u){if(l!==(l=o[23])){if(n){Me();const f=n;ie(f.$$.fragment,1,0,()=>{ke(f,1)}),Ce()}l?(n=De(l,a()),we(n.$$.fragment),J(n.$$.fragment,1),be(n,t,null)):n=null}},i(o){i||(n&&J(n.$$.fragment,o),i=!0)},o(o){n&&ie(n.$$.fragment,o),i=!1},d(o){o&&k(t),n&&ke(n),r=!1,s()}}}function Jr(e){let t;function n(s,l){return s[22]?Bh:zh}let i=n(e),r=i(e);return{c(){t=te("div"),r.c(),this.h()},l(s){t=ne(s,"DIV",{class:!0,"aria-hidden":!0});var l=P(t);r.l(l),l.forEach(k),this.h()},h(){_(t,"class","indicator svelte-17l1npl"),_(t,"aria-hidden","true")},m(s,l){G(s,t,l),r.m(t,null)},p(s,l){i===(i=n(s))&&r?r.p(s,l):(r.d(1),r=i(s),r&&(r.c(),r.m(t,null)))},d(s){s&&k(t),r.d()}}}function zh(e){let t,n;return{c(){t=Q("svg"),n=Q("path"),this.h()},l(i){t=$(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var r=P(t);n=$(r,"path",{d:!0}),P(n).forEach(k),r.forEach(k),this.h()},h(){_(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),_(t,"width","100%"),_(t,"height","100%"),_(t,"viewBox","0 0 20 20"),_(t,"focusable","false"),_(t,"aria-hidden","true"),_(t,"class","svelte-17l1npl")},m(i,r){G(i,t,r),H(t,n)},p:ye,d(i){i&&k(t)}}}function Bh(e){let t,n;return{c(){t=new $s(!1),n=le(),this.h()},l(i){t=ea(i,!1),n=le(),this.h()},h(){t.a=n},m(i,r){t.m(e[22],i,r),G(i,n,r)},p(i,r){r[0]&4194304&&t.p(i[22])},d(i){i&&k(n),i&&t.d()}}}function Qr(e){let t,n,i;return{c(){t=te("div"),n=Q("svg"),i=Q("circle"),this.h()},l(r){t=ne(r,"DIV",{class:!0});var s=P(t);n=$(s,"svg",{class:!0,viewBox:!0});var l=P(n);i=$(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),P(i).forEach(k),l.forEach(k),s.forEach(k),this.h()},h(){_(i,"class","spinner_path svelte-17l1npl"),_(i,"cx","50"),_(i,"cy","50"),_(i,"r","20"),_(i,"fill","none"),_(i,"stroke","currentColor"),_(i,"stroke-width","5"),_(i,"stroke-miterlimit","10"),_(n,"class","spinner_icon svelte-17l1npl"),_(n,"viewBox","25 25 50 50"),_(t,"class","spinner svelte-17l1npl")},m(r,s){G(r,t,s),H(t,n),H(n,i)},d(r){r&&k(t)}}}function $r(e){let t,n,i,r;const s=[e[34]];function l(u){e[84](u)}var a=e[24];function o(u){let f={};for(let h=0;h<s.length;h+=1)f=Ei(f,s[h]);return u[28]!==void 0&&(f.hoverItemIndex=u[28]),{props:f}}return a&&(t=De(a,o(e)),He.push(()=>Ji(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&we(t.$$.fragment),i=le()},l(u){t&&Oe(t.$$.fragment,u),i=le()},m(u,f){t&&be(t,u,f),G(u,i,f),r=!0},p(u,f){const h=f[1]&8?Si(s,[Nl(u[34])]):{};if(!n&&f[0]&268435456&&(n=!0,h.hoverItemIndex=u[28],Qs(()=>n=!1)),a!==(a=u[24])){if(t){Me();const c=t;ie(c.$$.fragment,1,0,()=>{ke(c,1)}),Ce()}a?(t=De(a,o(u)),He.push(()=>Ji(t,"hoverItemIndex",l)),t.$on("itemSelected",u[43]),t.$on("itemCreated",u[44]),t.$on("closeList",u[45]),we(t.$$.fragment),J(t.$$.fragment,1),be(t,i.parentNode,i)):t=null}else a&&t.$set(h)},i(u){r||(t&&J(t.$$.fragment,u),r=!0)},o(u){t&&ie(t.$$.fragment,u),r=!1},d(u){u&&k(i),t&&ke(t,u)}}}function el(e){let t,n,i;return{c(){t=te("input"),this.h()},l(r){t=ne(r,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){_(t,"name",n=e[16].name),_(t,"type","hidden"),t.value=i=e[2]?e[12](e[2]):null,_(t,"class","svelte-17l1npl")},m(r,s){G(r,t,s)},p(r,s){s[0]&65536&&n!==(n=r[16].name)&&_(t,"name",n),s[0]&4100&&i!==(i=r[2]?r[12](r[2]):null)&&(t.value=i)},d(r){r&&k(t)}}}function tl(e){let t,n=e[2],i=[];for(let r=0;r<n.length;r+=1)i[r]=nl(Yr(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=le()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);t=le()},m(r,s){for(let l=0;l<i.length;l+=1)i[l].m(r,s);G(r,t,s)},p(r,s){if(s[0]&69636){n=r[2];let l;for(l=0;l<n.length;l+=1){const a=Yr(r,n,l);i[l]?i[l].p(a,s):(i[l]=nl(a),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(r){Ai(i,r),r&&k(t)}}}function nl(e){let t,n,i;return{c(){t=te("input"),this.h()},l(r){t=ne(r,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){_(t,"name",n=e[16].name),_(t,"type","hidden"),t.value=i=e[103]?e[12](e[103]):null,_(t,"class","svelte-17l1npl")},m(r,s){G(r,t,s)},p(r,s){s[0]&65536&&n!==(n=r[16].name)&&_(t,"name",n),s[0]&4100&&i!==(i=r[103]?r[12](r[103]):null)&&(t.value=i)},d(r){r&&k(t)}}}function Uh(e){let t,n,i,r,s,l,a,o,u,f,h,c,d,v,g,p,b,S,w=e[1]&&jr(e),y=e[17]&&Wr(e),I=e[35]&&xr(e),B=[{readOnly:a=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],R={};for(let C=0;C<B.length;C+=1)R=Ei(R,B[C]);let D=!e[7]&&e[29]&&Kr(e),U=e[37]&&Zr(e),E=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&Jr(e),A=e[4]&&Qr(),L=e[5]&&$r(e),O=(!e[7]||e[7]&&!e[35])&&el(e),N=e[7]&&e[35]&&tl(e);return{c(){t=te("div"),n=te("span"),w&&w.c(),i=he(),y&&y.c(),r=he(),I&&I.c(),s=he(),l=te("input"),o=he(),D&&D.c(),u=he(),U&&U.c(),f=he(),E&&E.c(),h=he(),A&&A.c(),c=he(),L&&L.c(),d=he(),O&&O.c(),v=he(),N&&N.c(),this.h()},l(C){t=ne(C,"DIV",{class:!0,style:!0});var M=P(t);n=ne(M,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var z=P(n);w&&w.l(z),z.forEach(k),i=de(M),y&&y.l(M),r=de(M),I&&I.l(M),s=de(M),l=ne(M,"INPUT",{placeholder:!0,style:!0}),o=de(M),D&&D.l(M),u=de(M),U&&U.l(M),f=de(M),E&&E.l(M),h=de(M),A&&A.l(M),c=de(M),L&&L.l(M),d=de(M),O&&O.l(M),v=de(M),N&&N.l(M),M.forEach(k),this.h()},h(){_(n,"aria-live","polite"),_(n,"aria-atomic","false"),_(n,"aria-relevant","additions text"),_(n,"class","a11yText svelte-17l1npl"),Ki(l,R),qe(l,"svelte-17l1npl",!0),_(t,"class",g="selectContainer "+e[21]+" svelte-17l1npl"),_(t,"style",e[11]),qe(t,"hasError",e[10]),qe(t,"multiSelect",e[7]),qe(t,"disabled",e[9]),qe(t,"focused",e[1])},m(C,M){G(C,t,M),H(t,n),w&&w.m(n,null),H(t,i),y&&y.m(t,null),H(t,r),I&&I.m(t,null),H(t,s),H(t,l),l.autofocus&&l.focus(),e[82](l),Zi(l,e[3]),H(t,o),D&&D.m(t,null),H(t,u),U&&U.m(t,null),H(t,f),E&&E.m(t,null),H(t,h),A&&A.m(t,null),H(t,c),L&&L.m(t,null),H(t,d),O&&O.m(t,null),H(t,v),N&&N.m(t,null),e[85](t),p=!0,b||(S=[ue(window,"click",e[41]),ue(window,"focusin",e[41]),ue(window,"keydown",e[39]),ue(l,"focus",e[40]),ue(l,"input",e[83]),ue(t,"click",e[42])],b=!0)},p(C,M){C[1]?w?w.p(C,M):(w=jr(C),w.c(),w.m(n,null)):w&&(w.d(1),w=null),C[17]?y?(y.p(C,M),M[0]&131072&&J(y,1)):(y=Wr(C),y.c(),J(y,1),y.m(t,r)):y&&(Me(),ie(y,1,1,()=>{y=null}),Ce()),C[35]?I?(I.p(C,M),M[1]&16&&J(I,1)):(I=xr(C),I.c(),J(I,1),I.m(t,s)):I&&(Me(),ie(I,1,1,()=>{I=null}),Ce()),Ki(l,R=Si(B,[(!p||M[0]&8192&&a!==(a=!C[13]))&&{readOnly:a},M[1]&1&&C[31],(!p||M[1]&32)&&{placeholder:C[36]},(!p||M[0]&16384)&&{style:C[14]},(!p||M[0]&512)&&{disabled:C[9]}])),M[0]&8&&l.value!==C[3]&&Zi(l,C[3]),qe(l,"svelte-17l1npl",!0),!C[7]&&C[29]?D?(D.p(C,M),M[0]&536871040&&J(D,1)):(D=Kr(C),D.c(),J(D,1),D.m(t,u)):D&&(Me(),ie(D,1,1,()=>{D=null}),Ce()),C[37]?U?(U.p(C,M),M[1]&64&&J(U,1)):(U=Zr(C),U.c(),J(U,1),U.m(t,f)):U&&(Me(),ie(U,1,1,()=>{U=null}),Ce()),!C[37]&&(C[20]||C[19]&&!C[2]||!C[13]&&!C[9]&&!C[4]&&(C[29]&&!C[15]||!C[29]))?E?E.p(C,M):(E=Jr(C),E.c(),E.m(t,h)):E&&(E.d(1),E=null),C[4]?A||(A=Qr(),A.c(),A.m(t,c)):A&&(A.d(1),A=null),C[5]?L?(L.p(C,M),M[0]&32&&J(L,1)):(L=$r(C),L.c(),J(L,1),L.m(t,d)):L&&(Me(),ie(L,1,1,()=>{L=null}),Ce()),!C[7]||C[7]&&!C[35]?O?O.p(C,M):(O=el(C),O.c(),O.m(t,v)):O&&(O.d(1),O=null),C[7]&&C[35]?N?N.p(C,M):(N=tl(C),N.c(),N.m(t,null)):N&&(N.d(1),N=null),(!p||M[0]&2097152&&g!==(g="selectContainer "+C[21]+" svelte-17l1npl"))&&_(t,"class",g),(!p||M[0]&2048)&&_(t,"style",C[11]),(!p||M[0]&2098176)&&qe(t,"hasError",C[10]),(!p||M[0]&2097280)&&qe(t,"multiSelect",C[7]),(!p||M[0]&2097664)&&qe(t,"disabled",C[9]),(!p||M[0]&2097154)&&qe(t,"focused",C[1])},i(C){p||(J(y),J(I),J(D),J(U),J(L),p=!0)},o(C){ie(y),ie(I),ie(D),ie(U),ie(L),p=!1},d(C){C&&k(t),w&&w.d(),y&&y.d(),I&&I.d(),e[82](null),D&&D.d(),U&&U.d(),E&&E.d(),A&&A.d(),L&&L.d(),O&&O.d(),N&&N.d(),e[85](null),b=!1,dt(S)}}}function il(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function qh(e,t,n){let i,r,s,l,a,o,u,f;const h=Ii();let{id:c=null}=t,{container:d=void 0}=t,{input:v=void 0}=t,{isMulti:g=!1}=t,{multiFullItemClearable:p=!1}=t,{isDisabled:b=!1}=t,{isCreatable:S=!1}=t,{isFocused:w=!1}=t,{value:y=null}=t,{filterText:I=""}=t,{placeholder:B="Select..."}=t,{placeholderAlwaysShow:R=!1}=t,{items:D=null}=t,{itemFilter:U=(m,Z,ce)=>`${m}`.toLowerCase().includes(Z.toLowerCase())}=t,{groupBy:E=void 0}=t,{groupFilter:A=m=>m}=t,{isGroupHeaderSelectable:L=!1}=t,{getGroupHeaderLabel:O=m=>m[N]||m.id}=t,{labelIdentifier:N="label"}=t,{getOptionLabel:C=(m,Z)=>m.isCreator?`Create "${Z}"`:m[N]}=t,{optionIdentifier:M="value"}=t,{loadOptions:z=void 0}=t,{hasError:j=!1}=t,{containerStyles:q=""}=t,{getSelectionLabel:X=m=>m?m[N]:null}=t,{createGroupHeaderItem:W=m=>({value:m,label:m})}=t,{createItem:T=m=>({value:m,label:m})}=t;const ee=()=>i;let{isSearchable:ae=!0}=t,{inputStyles:pe=""}=t,{isClearable:_e=!0}=t,{isWaiting:oe=!1}=t,{listPlacement:V="auto"}=t,{listOpen:K=!1}=t,{isVirtualList:fe=!1}=t,{loadOptionsInterval:Ae=300}=t,{noOptionsMessage:F="No options"}=t,{hideEmptyState:Y=!1}=t,{inputAttributes:re={}}=t,{listAutoWidth:Ee=!0}=t,{itemHeight:Ne=40}=t,{Icon:x=void 0}=t,{iconProps:se={}}=t,{showChevron:Ge=!1}=t,{showIndicator:Se=!1}=t,{containerClasses:zi=""}=t,{indicatorSvg:Bi=void 0}=t,{listOffset:En=5}=t,{ClearIcon:Ui=Rh}=t,{Item:Sn=vs}=t,{List:qi=Ah}=t,{Selection:Gi=Mh}=t,{MultiSelection:Xi=Lh}=t,{VirtualList:Mn=Fh}=t;function ws(m){if(m.loadOptions&&m.filterText.length>0)return;if(!m.items)return[];m.items&&m.items.length>0&&typeof m.items[0]!="object"&&(m.items=il(m.items));let Z=m.items.filter(ce=>{let Ue=U(C(ce,m.filterText),m.filterText,ce);return Ue&&m.isMulti&&m.value&&Array.isArray(m.value)&&(Ue=!m.value.some(rt=>rt[m.optionIdentifier]===ce[m.optionIdentifier])),Ue});return m.groupBy&&(Z=As(Z)),m.isCreatable&&(Z=Yi(Z,m.filterText)),Z}function Yi(m,Z){if(Z.length===0)return m;const ce=T(Z);return m[0]&&Z===m[0][N]?m:(ce.isCreator=!0,[...m,ce])}let{selectedValue:Cn=null}=t,ve,_t,Nn,Ln,Tn,Xt;const bs=Ph(async()=>{n(4,oe=!0);let m=await z(I).catch(Z=>{console.warn("svelte-select loadOptions error :>> ",Z),h("error",{type:"loadOptions",details:Z})});m&&!m.cancelled&&(m?(m&&m.length>0&&typeof m[0]!="object"&&(m=il(m)),n(81,i=[...m]),h("loaded",{items:i})):n(81,i=[]),S&&n(81,i=Yi(i,I)),n(4,oe=!1),n(1,w=!0),n(5,K=!0))},Ae);function ks(){typeof y=="string"?n(2,y={[M]:y,label:y}):g&&Array.isArray(y)&&y.length>0&&n(2,y=y.map(m=>typeof m=="string"?{value:m,label:m}:m))}let mt;function Is(){n(31,mt=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},re)),c&&n(31,mt.id=c,mt),ae||n(31,mt.readonly=!0,mt)}function As(m){const Z=[],ce={};m.forEach(rt=>{const Qe=E(rt);Z.includes(Qe)||(Z.push(Qe),ce[Qe]=[],Qe&&ce[Qe].push(Object.assign(W(Qe,rt),{id:Qe,isGroupHeader:!0,isSelectable:L}))),ce[Qe].push(Object.assign({isGroupItem:!!Qe},rt))});const Ue=[];return A(Z).forEach(rt=>{Ue.push(...ce[rt])}),Ue}function Es(){if(g){JSON.stringify(y)!==JSON.stringify(_t)&&ji()&&h("select",y);return}(!_t||JSON.stringify(y[M])!==JSON.stringify(_t[M]))&&h("select",y)}function Ss(){w||K?Dn():v&&v.blur()}function Ms(){y&&(Array.isArray(y)?n(2,y=[...y]):n(2,y=[y]))}function Cs(){y&&n(2,y=null)}function Ns(){I.length!==0&&(n(1,w=!0),n(5,K=!0),z?bs():(n(5,K=!0),g&&n(30,ve=void 0)))}Cl(async()=>{n(77,_t=y),n(78,Nn=I),n(79,Ln=w),n(80,Tn=g)});function ji(){let m=!0;if(y){const Z=[],ce=[];y.forEach(Ue=>{Z.includes(Ue[M])?m=!1:(Z.push(Ue[M]),ce.push(Ue))}),m||n(2,y=ce)}return m}function Wi(m){let Z=m?m[M]:y[M];return D.find(ce=>ce[M]===Z)}function Ls(m){!m||m.length===0||m.some(Z=>typeof Z!="object")||!y||(g?y.some(Z=>!Z||!Z[M]):!y[M])||(Array.isArray(y)?n(2,y=y.map(Z=>Wi(Z)||Z)):n(2,y=Wi()||y))}function xi(m){const{detail:Z}=m,ce=y[Z?Z.i:y.length-1];y.length===1?n(2,y=void 0):n(2,y=y.filter(Ue=>Ue!==ce)),h("clear",ce)}function Ts(m){if(!!w)switch(m.key){case"ArrowDown":m.preventDefault(),n(5,K=!0),n(30,ve=void 0);break;case"ArrowUp":m.preventDefault(),n(5,K=!0),n(30,ve=void 0);break;case"Tab":K||n(1,w=!1);break;case"Backspace":if(!g||I.length>0)return;if(g&&y&&y.length>0){if(xi(ve!==void 0?ve:y.length-1),ve===0||ve===void 0)break;n(30,ve=y.length>ve?ve-1:void 0)}break;case"ArrowLeft":if(!g||I.length>0)return;ve===void 0?n(30,ve=y.length-1):y.length>ve&&ve!==0&&n(30,ve-=1);break;case"ArrowRight":if(!g||I.length>0||ve===void 0)return;ve===y.length-1?n(30,ve=void 0):ve<y.length-1&&n(30,ve+=1);break}}function Dn(){n(1,w=!0),v&&v.focus()}function Ds(m){if(!d)return;const Z=m.path&&m.path.length>0?m.path[0]:m.target;d.contains(Z)||d.contains(m.relatedTarget)||(n(1,w=!1),n(5,K=!1),n(30,ve=void 0),v&&v.blur())}function Vs(){b||(n(1,w=!0),n(5,K=!K))}function Os(){n(2,y=void 0),n(5,K=!1),h("clear",y),Dn()}yn(()=>{w&&v&&v.focus()});function Fs(m){const{detail:Z}=m;if(Z){n(3,I="");const ce=Object.assign({},Z);(!ce.isGroupHeader||ce.isSelectable)&&(g?n(2,y=y?y.concat([ce]):[ce]):n(2,y=ce),n(2,y),setTimeout(()=>{n(5,K=!1),n(30,ve=void 0)}))}}function Hs(m){const{detail:Z}=m;g?(n(2,y=y||[]),n(2,y=[...y,T(Z)])):n(2,y=T(Z)),h("itemCreated",Z),n(3,I=""),n(5,K=!1),n(30,ve=void 0)}function Rs(){n(3,I=""),n(5,K=!1)}let{ariaValues:Vn=m=>`Option ${m}, selected.`}=t,{ariaListOpen:On=(m,Z)=>`You are currently focused on option ${m}. There are ${Z} results available.`}=t,{ariaFocused:Fn=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function Ps(){let m;return g&&y.length>0?m=y.map(Z=>X(Z)).join(", "):m=X(y),Vn(m)}function zs(){if(!w||!i||i.length===0)return"";let m=i[Xt];if(K&&m){let Z=X(m),ce=i?i.length:0;return On(Z,ce)}else return Fn()}function Bs(m){He[m?"unshift":"push"](()=>{v=m,n(6,v)})}function Us(){I=this.value,n(3,I)}function qs(m){Xt=m,n(28,Xt)}function Gs(m){He[m?"unshift":"push"](()=>{d=m,n(0,d)})}return e.$$set=m=>{"id"in m&&n(46,c=m.id),"container"in m&&n(0,d=m.container),"input"in m&&n(6,v=m.input),"isMulti"in m&&n(7,g=m.isMulti),"multiFullItemClearable"in m&&n(8,p=m.multiFullItemClearable),"isDisabled"in m&&n(9,b=m.isDisabled),"isCreatable"in m&&n(47,S=m.isCreatable),"isFocused"in m&&n(1,w=m.isFocused),"value"in m&&n(2,y=m.value),"filterText"in m&&n(3,I=m.filterText),"placeholder"in m&&n(48,B=m.placeholder),"placeholderAlwaysShow"in m&&n(49,R=m.placeholderAlwaysShow),"items"in m&&n(50,D=m.items),"itemFilter"in m&&n(51,U=m.itemFilter),"groupBy"in m&&n(52,E=m.groupBy),"groupFilter"in m&&n(53,A=m.groupFilter),"isGroupHeaderSelectable"in m&&n(54,L=m.isGroupHeaderSelectable),"getGroupHeaderLabel"in m&&n(55,O=m.getGroupHeaderLabel),"labelIdentifier"in m&&n(56,N=m.labelIdentifier),"getOptionLabel"in m&&n(57,C=m.getOptionLabel),"optionIdentifier"in m&&n(58,M=m.optionIdentifier),"loadOptions"in m&&n(59,z=m.loadOptions),"hasError"in m&&n(10,j=m.hasError),"containerStyles"in m&&n(11,q=m.containerStyles),"getSelectionLabel"in m&&n(12,X=m.getSelectionLabel),"createGroupHeaderItem"in m&&n(60,W=m.createGroupHeaderItem),"createItem"in m&&n(61,T=m.createItem),"isSearchable"in m&&n(13,ae=m.isSearchable),"inputStyles"in m&&n(14,pe=m.inputStyles),"isClearable"in m&&n(15,_e=m.isClearable),"isWaiting"in m&&n(4,oe=m.isWaiting),"listPlacement"in m&&n(63,V=m.listPlacement),"listOpen"in m&&n(5,K=m.listOpen),"isVirtualList"in m&&n(64,fe=m.isVirtualList),"loadOptionsInterval"in m&&n(65,Ae=m.loadOptionsInterval),"noOptionsMessage"in m&&n(66,F=m.noOptionsMessage),"hideEmptyState"in m&&n(67,Y=m.hideEmptyState),"inputAttributes"in m&&n(16,re=m.inputAttributes),"listAutoWidth"in m&&n(68,Ee=m.listAutoWidth),"itemHeight"in m&&n(69,Ne=m.itemHeight),"Icon"in m&&n(17,x=m.Icon),"iconProps"in m&&n(18,se=m.iconProps),"showChevron"in m&&n(19,Ge=m.showChevron),"showIndicator"in m&&n(20,Se=m.showIndicator),"containerClasses"in m&&n(21,zi=m.containerClasses),"indicatorSvg"in m&&n(22,Bi=m.indicatorSvg),"listOffset"in m&&n(70,En=m.listOffset),"ClearIcon"in m&&n(23,Ui=m.ClearIcon),"Item"in m&&n(71,Sn=m.Item),"List"in m&&n(24,qi=m.List),"Selection"in m&&n(25,Gi=m.Selection),"MultiSelection"in m&&n(26,Xi=m.MultiSelection),"VirtualList"in m&&n(72,Mn=m.VirtualList),"selectedValue"in m&&n(73,Cn=m.selectedValue),"ariaValues"in m&&n(74,Vn=m.ariaValues),"ariaListOpen"in m&&n(75,On=m.ariaListOpen),"ariaFocused"in m&&n(76,Fn=m.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,i=ws({loadOptions:z,filterText:I,items:D,value:y,isMulti:g,optionIdentifier:M,groupBy:E,isCreatable:S})),e.$$.dirty[2]&2048&&Cn&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&Ls(D),e.$$.dirty[0]&4&&y&&ks(),e.$$.dirty[0]&73728&&(re||!ae)&&Is(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(g&&Ms(),Tn&&!g&&Cs()),e.$$.dirty[0]&132&&g&&y&&y.length>1&&ji(),e.$$.dirty[0]&4&&y&&Es(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!y&&g&&_t&&h("select",y),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&w!==Ln&&Ss(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&I!==Nn&&Ns(),e.$$.dirty[0]&12&&n(29,r=y&&I.length===0),e.$$.dirty[0]&536904208&&n(37,s=r&&_e&&!b&&!oe),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=R&&g?B:y?"":B),e.$$.dirty[0]&132&&n(35,a=g&&y&&y.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,o={Item:Sn,filterText:I,optionIdentifier:M,noOptionsMessage:F,hideEmptyState:Y,isVirtualList:fe,VirtualList:Mn,value:y,isMulti:g,getGroupHeaderLabel:O,items:i,itemHeight:Ne,getOptionLabel:C,listPlacement:V,parent:d,listAutoWidth:Ee,listOffset:En}),e.$$.dirty[0]&132&&n(33,u=y?Ps():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,f=zs())},[d,w,y,I,oe,K,v,g,p,b,j,q,X,ae,pe,_e,re,x,se,Ge,Se,zi,Bi,Ui,qi,Gi,Xi,Os,Xt,r,ve,mt,f,u,o,a,l,s,xi,Ts,Dn,Ds,Vs,Fs,Hs,Rs,c,S,B,R,D,U,E,A,L,O,N,C,M,z,W,T,ee,V,fe,Ae,F,Y,Ee,Ne,En,Sn,Mn,Cn,Vn,On,Fn,_t,Nn,Ln,Tn,i,Bs,Us,qs,Gs]}class rl extends je{constructor(t){super(),We(this,t,qh,Uh,xe,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function ll(e,t,n){const i=e.slice();return i[27]=t[n],i}function sl(e,t,n){const i=e.slice();return i[27]=t[n],i}function al(e){let t,n,i;return{c(){t=Q("rect"),this.h()},l(r){t=$(r,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),P(t).forEach(k),this.h()},h(){_(t,"class","timebar"),_(t,"x",n=e[10](e[14][0])-12),_(t,"y",35),_(t,"width","24"),_(t,"height",i=e[3]-35-it),_(t,"fill","rgba(0,0,0,0.2)")},m(r,s){G(r,t,s)},p(r,s){s[0]&17408&&n!==(n=r[10](r[14][0])-12)&&_(t,"x",n),s[0]&8&&i!==(i=r[3]-35-it)&&_(t,"height",i)},d(r){r&&k(t)}}}function ol(e,t){let n,i,r,s,l,a,o;return{key:e,first:null,c(){n=Q("circle"),this.h()},l(u){n=$(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),P(n).forEach(k),this.h()},h(){_(n,"class","circ1 svelte-wx1vup"),_(n,"cx",i=t[10](t[27].year)),_(n,"cy",r=t[9](t[27].export_value)),_(n,"r","5"),_(n,"fill",s=t[12](t[0])),_(n,"stroke",l=t[14].includes(t[27].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),_(n,"stroke-width","2"),this.first=n},m(u,f){G(u,n,f),a||(o=[ue(n,"click",function(){Ci(t[15](t[27].year))&&t[15](t[27].year).apply(this,arguments)}),ue(n,"keydown",Yh)],a=!0)},p(u,f){t=u,f[0]&3072&&i!==(i=t[10](t[27].year))&&_(n,"cx",i),f[0]&2560&&r!==(r=t[9](t[27].export_value))&&_(n,"cy",r),f[0]&4097&&s!==(s=t[12](t[0]))&&_(n,"fill",s),f[0]&18432&&l!==(l=t[14].includes(t[27].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&_(n,"stroke",l)},d(u){u&&k(n),a=!1,dt(o)}}}function ul(e,t){let n,i,r,s,l,a,o;return{key:e,first:null,c(){n=Q("circle"),this.h()},l(u){n=$(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),P(n).forEach(k),this.h()},h(){_(n,"cx",i=t[10](t[27].year)),_(n,"cy",r=t[9](t[27].import_value)),_(n,"r","5"),_(n,"fill",s=t[12](t[1])),_(n,"stroke",l=t[14].includes(t[27].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),_(n,"stroke-width","2"),_(n,"class","svelte-wx1vup"),this.first=n},m(u,f){G(u,n,f),a||(o=[ue(n,"click",function(){Ci(t[15](t[27].year))&&t[15](t[27].year).apply(this,arguments)}),ue(n,"keydown",jh)],a=!0)},p(u,f){t=u,f[0]&3072&&i!==(i=t[10](t[27].year))&&_(n,"cx",i),f[0]&2560&&r!==(r=t[9](t[27].import_value))&&_(n,"cy",r),f[0]&4098&&s!==(s=t[12](t[1]))&&_(n,"fill",s),f[0]&18432&&l!==(l=t[14].includes(t[27].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&_(n,"stroke",l)},d(u){u&&k(n),a=!1,dt(o)}}}function Gh(e){let t,n,i,r,s,l,a,o,u,f,h,c,d=[],v=new Map,g,p,b,S=[],w=new Map,y,I=!e[13]&&al(e),B=e[11];const R=E=>E[27].year;for(let E=0;E<B.length;E+=1){let A=sl(e,B,E),L=R(A);v.set(L,d[E]=ol(L,A))}let D=e[11];const U=E=>E[27].year;for(let E=0;E<D.length;E+=1){let A=ll(e,D,E),L=U(A);w.set(L,S[E]=ul(L,A))}return{c(){t=te("div"),n=Q("svg"),i=Q("text"),r=me("Total Trade Over Time"),l=Q("g"),I&&I.c(),a=Q("g"),u=Q("g"),f=Q("g"),h=Q("path");for(let E=0;E<d.length;E+=1)d[E].c();g=Q("g"),p=Q("path");for(let E=0;E<S.length;E+=1)S[E].c();this.h()},l(E){t=ne(E,"DIV",{id:!0,class:!0});var A=P(t);n=$(A,"svg",{width:!0,height:!0});var L=P(n);i=$(L,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var O=P(i);r=ge(O,"Total Trade Over Time"),O.forEach(k),l=$(L,"g",{class:!0}),P(l).forEach(k),I&&I.l(L),a=$(L,"g",{id:!0,transform:!0}),P(a).forEach(k),u=$(L,"g",{id:!0,transform:!0}),P(u).forEach(k),f=$(L,"g",{class:!0});var N=P(f);h=$(N,"path",{fill:!0,stroke:!0,"stroke-width":!0}),P(h).forEach(k);for(let M=0;M<d.length;M+=1)d[M].l(N);N.forEach(k),g=$(L,"g",{class:!0});var C=P(g);p=$(C,"path",{fill:!0,stroke:!0,"stroke-width":!0}),P(p).forEach(k);for(let M=0;M<S.length;M+=1)S[M].l(C);C.forEach(k),L.forEach(k),A.forEach(k),this.h()},h(){_(i,"class","chart-header"),_(i,"x",s=e[2]/2),_(i,"y",it-5),_(i,"text-anchor","middle"),_(l,"class","brush"),_(a,"id","xAxis"),_(a,"transform",o=`translate(${0},${e[3]-it})`),_(u,"id","yAis"),_(u,"transform",`translate(${ys},${0})`),_(h,"fill","none"),_(h,"stroke",c=e[12](e[0])),_(h,"stroke-width","2"),_(f,"class","country1-group country-group svelte-wx1vup"),_(p,"fill","none"),_(p,"stroke",b=e[12](e[1])),_(p,"stroke-width","2"),_(g,"class","country2-group country-group svelte-wx1vup"),_(n,"width",e[2]),_(n,"height",e[3]),_(t,"id","line-chart"),_(t,"class","viz-section"),Ut(()=>e[25].call(t))},m(E,A){G(E,t,A),H(t,n),H(n,i),H(i,r),H(n,l),e[20](l),I&&I.m(n,null),H(n,a),e[21](a),H(n,u),e[22](u),H(n,f),H(f,h),e[23](h);for(let L=0;L<d.length;L+=1)d[L].m(f,null);H(n,g),H(g,p),e[24](p);for(let L=0;L<S.length;L+=1)S[L].m(g,null);y=wn(t,e[25].bind(t))},p(E,A){A[0]&4&&s!==(s=E[2]/2)&&_(i,"x",s),E[13]?I&&(I.d(1),I=null):I?I.p(E,A):(I=al(E),I.c(),I.m(n,a)),A[0]&8&&o!==(o=`translate(${0},${E[3]-it})`)&&_(a,"transform",o),A[0]&4097&&c!==(c=E[12](E[0]))&&_(h,"stroke",c),A[0]&56833&&(B=E[11],d=at(d,A,R,1,E,B,v,f,Ht,ol,null,sl)),A[0]&4098&&b!==(b=E[12](E[1]))&&_(p,"stroke",b),A[0]&56834&&(D=E[11],S=at(S,A,U,1,E,D,w,g,Ht,ul,null,ll)),A[0]&4&&_(n,"width",E[2]),A[0]&8&&_(n,"height",E[3])},i:ye,o:ye,d(E){E&&k(t),e[20](null),I&&I.d(),e[21](null),e[22](null),e[23](null);for(let A=0;A<d.length;A+=1)d[A].d();e[24](null);for(let A=0;A<S.length;A+=1)S[A].d();y()}}}const it=35,Xh=15,ys=50,Yh=()=>{},jh=()=>{};function Wh(e,t,n){let i,r,s,l;Mi(e,bt,N=>n(14,l=N));let{data:a}=t,{bilateralData:o,locationData:u,productData:f,country1_id:h,country2_id:c,countryColorScale:d}=a,v=800,g=400;const p=N=>St("$.2s")(N).replace(/G/,"B");let b,S,w,y,I,B=!1;function R(N){return()=>bt.set([N])}function D(N){He[N?"unshift":"push"](()=>{w=N,n(6,w)})}function U(N){He[N?"unshift":"push"](()=>{b=N,n(4,b)})}function E(N){He[N?"unshift":"push"](()=>{S=N,n(5,S)})}function A(N){He[N?"unshift":"push"](()=>{y=N,n(7,y)})}function L(N){He[N?"unshift":"push"](()=>{I=N,n(8,I)})}function O(){v=this.clientWidth,g=this.clientHeight,n(2,v),n(3,g)}return e.$$set=N=>{"data"in N&&n(16,a=N.data)},e.$$.update=()=>{var N,C,M,z;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:o,locationData:u,productData:f,country1_id:h,country2_id:c,countryColorScale:d}=a,o,(n(18,u),n(16,a)),(n(19,f),n(16,a)),(n(0,h),n(16,a)),(n(1,c),n(16,a)),(n(12,d),n(16,a))),e.$$.dirty[0]&917507&&n(11,i=Array.from((M=(C=(N=o==null?void 0:o.get(h))==null?void 0:N.get(c))==null?void 0:C.entries())!=null?M:new Array).map(j=>{let q=j[0];return j[1].reduce((W,T)=>(W.export_value+=T.export_value,W.import_value+=T.import_value,W),new ut(u,f,{location_id:h,partner_id:c,product_id:0,year:q,export_value:0,import_value:0}))}).sort((j,q)=>j.year-q.year)),e.$$.dirty[0]&2052&&n(10,s=gn().domain(Tl(i,j=>j.year)).range([ys,v-it])),e.$$.dirty[0]&1088){let j=lc().on("start brush end",q=>{if((q==null?void 0:q.selection)===null||(q==null?void 0:q.selection[1])-(q==null?void 0:q.selection[0])<5)bt.set([2020]),n(13,B=!1);else{n(13,B=!0);let X=q.selection;const W=X[0],T=X[1];let ee=Math.ceil(s.invert(W)),ae=Math.floor(s.invert(T)),pe=[];for(let _e=ee;_e<=ae;_e++)pe.push(_e);bt.set(pe)}});ze(w).call(j)}if(e.$$.dirty[0]&2048&&console.log(i),e.$$.dirty[0]&2056&&n(9,r=gn().domain([0,(z=ni(i,j=>Math.max(j.export_value,j.import_value)))!=null?z:0]).range([g-it,it+Xh])),e.$$.dirty[0]&1584){let j=Fl(s).tickFormat(St("d"));ze(b).transition().call(j);let q=Sa(r).tickFormat(X=>p(X));ze(S).transition().call(q)}if(e.$$.dirty[0]&3712){let j=pi();i.length>0&&(i.sort(q=>q.year),j.moveTo(s(i[0].year),r(i[0].export_value))),i.forEach(q=>{j.lineTo(s(q.year),r(q.export_value))}),ze(y).transition().attr("d",j.toString())}if(e.$$.dirty[0]&3840){let j=pi();i.length>0&&j.moveTo(s(i[0].year),r(i[0].import_value)),i.forEach(q=>{j.lineTo(s(q.year),r(q.import_value))}),ze(I).transition().attr("d",j.toString())}},[h,c,v,g,b,S,w,y,I,r,s,i,d,B,l,R,a,o,u,f,D,U,E,A,L,O]}class xh extends je{constructor(t){super(),We(this,t,Wh,Gh,xe,{data:16},null,[-1,-1])}}function Kh(e){const t=e-1;return t*t*t+1}function Zh(e,{delay:t=0,duration:n=400,easing:i=ta}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*r}`}}function Jh(e,{from:t,to:n},i={}){const r=getComputedStyle(e),s=r.transform==="none"?"":r.transform,[l,a]=r.transformOrigin.split(" ").map(parseFloat),o=t.left+t.width*l/n.width-(n.left+l),u=t.top+t.height*a/n.height-(n.top+a),{delay:f=0,duration:h=d=>Math.sqrt(d)*120,easing:c=Kh}=i;return{delay:f,duration:Ci(h)?h(Math.sqrt(o*o+u*u)):h,easing:c,css:(d,v)=>{const g=v*o,p=v*u,b=d+v*t.width/n.width,S=d+v*t.height/n.height;return`transform: ${s} translate(${g}px, ${p}px) scale(${b}, ${S});`}}}function fl(e,t,n){const i=e.slice();return i[31]=t[n],i[33]=n,i}function cl(e,t,n){const i=e.slice();return i[31]=t[n],i[33]=n,i}function hl(e,t,n){const i=e.slice();return i[31]=t[n],i[33]=n,i}function Qh(e){let t,n,i,r,s;return{c(){t=Q("text"),n=me("No valid data for this pair."),this.h()},l(l){t=$(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var a=P(t);n=ge(a,"No valid data for this pair."),a.forEach(k),this.h()},h(){_(t,"x",i=e[4]/2),_(t,"y",r=e[10]/2),_(t,"alignment-baseline","central"),_(t,"text-anchor","middle")},m(l,a){G(l,t,a),H(t,n)},p(l,a){a[0]&16&&i!==(i=l[4]/2)&&_(t,"x",i),a[0]&1024&&r!==(r=l[10]/2)&&_(t,"y",r)},i(l){s||Ut(()=>{s=na(t,Zh,{}),s.start()})},o:ye,d(l){l&&k(t)}}}function $h(e){var fe,Ae;let t,n,i=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",r,s,l,a=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",o,u,f,h,c=((fe=e[2])==null?void 0:fe.name)+" ",d,v=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",g,p,b=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",S,w,y=((Ae=e[3])==null?void 0:Ae.name)+"",I,B,R,D=[],U=new Map,E,A=[],L=new Map,O,N=[],C=new Map,M,z,j,q,X,W,T,ee,ae=e[11];const pe=F=>F[31].product_id;for(let F=0;F<ae.length;F+=1){let Y=hl(e,ae,F),re=pe(Y);U.set(re,D[F]=_l(re,Y))}let _e=e[11];const oe=F=>F[31].product_id;for(let F=0;F<_e.length;F+=1){let Y=cl(e,_e,F),re=oe(Y);L.set(re,A[F]=ml(re,Y))}let V=e[11];const K=F=>F[33];for(let F=0;F<V.length;F+=1){let Y=fl(e,V,F),re=K(Y);C.set(re,N[F]=gl(re,Y))}return{c(){t=Q("text"),n=me("Sector "),r=me(i),s=Q("text"),l=me("Trade Flow "),o=me(a),f=Q("text"),h=me("From "),d=me(c),g=me(v),p=Q("text"),S=me(b),w=me("\xA0From "),I=me(y),R=Q("g");for(let F=0;F<D.length;F+=1)D[F].c();E=le();for(let F=0;F<A.length;F+=1)A[F].c();O=le();for(let F=0;F<N.length;F+=1)N[F].c();M=Q("line"),q=Q("line"),W=Q("g"),this.h()},l(F){t=$(F,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var Y=P(t);n=ge(Y,"Sector "),r=ge(Y,i),Y.forEach(k),s=$(F,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var re=P(s);l=ge(re,"Trade Flow "),o=ge(re,a),re.forEach(k),f=$(F,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var Ee=P(f);h=ge(Ee,"From "),d=ge(Ee,c),g=ge(Ee,v),Ee.forEach(k),p=$(F,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var Ne=P(p);S=ge(Ne,b),w=ge(Ne,"\xA0From "),I=ge(Ne,y),Ne.forEach(k),R=$(F,"g",{id:!0,transform:!0});var x=P(R);for(let se=0;se<D.length;se+=1)D[se].l(x);E=le();for(let se=0;se<A.length;se+=1)A[se].l(x);O=le();for(let se=0;se<N.length;se+=1)N[se].l(x);M=$(x,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),P(M).forEach(k),q=$(x,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),P(q).forEach(k),W=$(x,"g",{id:!0}),P(W).forEach(k),x.forEach(k),this.h()},h(){var F,Y,re,Ee;_(t,"text-anchor","start"),_(t,"class","chart-header sortable svelte-1feevgh"),_(t,"x",15),_(t,"y",Dt/2),_(t,"alignment-baseline","hanging"),_(s,"text-anchor","middle"),_(s,"class","chart-header sortable svelte-1feevgh"),_(s,"x",u=(e[4]-nt)/2+nt),_(s,"y",Dt/2-7),_(s,"alignment-baseline","hanging"),_(f,"class","from-label sortable svelte-1feevgh"),_(f,"x",nt+20),_(f,"y",Dt/2-5),_(f,"alignment-baseline","hanging"),_(f,"font-size","13"),_(p,"class","from-label sortable svelte-1feevgh"),_(p,"x",B=e[4]-20),_(p,"y",Dt/2-5),_(p,"text-anchor","end"),_(p,"alignment-baseline","hanging"),_(p,"font-size","13"),_(M,"id","midline"),_(M,"transform",z=`translate(${e[6](0)},0)`),_(M,"y1",20),_(M,"y2",j=(((Y=(F=e[11])==null?void 0:F.length)!=null?Y:0)+1)*Re),_(M,"stroke","rgba(0,0,0,0.7)"),_(M,"stroke-width","1"),_(M,"class","svelte-1feevgh"),_(q,"x1",nt),_(q,"y1",0),_(q,"x2",nt),_(q,"y2",X=(((Ee=(re=e[11])==null?void 0:re.length)!=null?Ee:0)+1)*Re),_(q,"stroke","rgba(0,0,0,0.1)"),_(q,"stroke-width","1"),_(W,"id","axis"),_(R,"id","bar-content"),_(R,"transform",`translate(${0},${Dt})`)},m(F,Y){G(F,t,Y),H(t,n),H(t,r),G(F,s,Y),H(s,l),H(s,o),G(F,f,Y),H(f,h),H(f,d),H(f,g),G(F,p,Y),H(p,S),H(p,w),H(p,I),G(F,R,Y);for(let re=0;re<D.length;re+=1)D[re].m(R,null);H(R,E);for(let re=0;re<A.length;re+=1)A[re].m(R,null);H(R,O);for(let re=0;re<N.length;re+=1)N[re].m(R,null);H(R,M),H(R,q),H(R,W),e[27](W),T||(ee=[ue(t,"click",e[23]),ue(t,"keydown",n0),ue(s,"click",e[24]),ue(s,"keydown",i0),ue(f,"keydown",r0),ue(f,"click",e[25]),ue(p,"click",e[26]),ue(p,"keydown",l0)],T=!0)},p(F,Y){var re,Ee,Ne,x,se,Ge;if(Y[0]&3&&i!==(i=F[1]==F[0].AlphaUp?"\u2191":F[1]==F[0].AlphaDown?"\u2193":" ")&&Fe(r,i),Y[0]&3&&a!==(a=F[1]==F[0].Up?"\u2191":F[1]==F[0].Down?"\u2193":" ")&&Fe(o,a),Y[0]&16&&u!==(u=(F[4]-nt)/2+nt)&&_(s,"x",u),Y[0]&4&&c!==(c=((re=F[2])==null?void 0:re.name)+" ")&&Fe(d,c),Y[0]&3&&v!==(v=F[1]==F[0].LeftUp?"\u2191":F[1]==F[0].LeftDown?"\u2193":" ")&&Fe(g,v),Y[0]&3&&b!==(b=F[1]==F[0].RightUp?"\u2191":F[1]==F[0].RightDown?"\u2193":" ")&&Fe(S,b),Y[0]&8&&y!==(y=((Ee=F[3])==null?void 0:Ee.name)+"")&&Fe(I,y),Y[0]&16&&B!==(B=F[4]-20)&&_(p,"x",B),Y[0]&2064&&(ae=F[11],D=at(D,Y,pe,1,F,ae,U,R,Ht,_l,E,hl)),Y[0]&2048){_e=F[11];for(let Se=0;Se<A.length;Se+=1)A[Se].r();A=at(A,Y,oe,1,F,_e,L,R,ia,ml,O,cl);for(let Se=0;Se<A.length;Se+=1)A[Se].a()}Y[0]&2496&&(V=F[11],N=at(N,Y,K,1,F,V,C,R,Ht,gl,M,fl)),Y[0]&64&&z!==(z=`translate(${F[6](0)},0)`)&&_(M,"transform",z),Y[0]&2048&&j!==(j=(((x=(Ne=F[11])==null?void 0:Ne.length)!=null?x:0)+1)*Re)&&_(M,"y2",j),Y[0]&2048&&X!==(X=(((Ge=(se=F[11])==null?void 0:se.length)!=null?Ge:0)+1)*Re)&&_(q,"y2",X)},i:ye,o:ye,d(F){F&&k(t),F&&k(s),F&&k(f),F&&k(p),F&&k(R);for(let Y=0;Y<D.length;Y+=1)D[Y].d();for(let Y=0;Y<A.length;Y+=1)A[Y].d();for(let Y=0;Y<N.length;Y+=1)N[Y].d();e[27](null),T=!1,dt(ee)}}}function dl(e){let t,n;return{c(){t=Q("rect"),this.h()},l(i){t=$(i,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),P(t).forEach(k),this.h()},h(){_(t,"x","0"),_(t,"y",n=e[33]*Re+Mt),_(t,"height",Re),_(t,"width",e[4]),_(t,"fill","rgba(0,0,0,0.04)"),_(t,"class","svelte-1feevgh")},m(i,r){G(i,t,r)},p(i,r){r[0]&2048&&n!==(n=i[33]*Re+Mt)&&_(t,"y",n),r[0]&16&&_(t,"width",i[4])},d(i){i&&k(t)}}}function _l(e,t){let n,i,r=t[33]%2==0&&dl(t);return{key:e,first:null,c(){n=le(),r&&r.c(),i=le(),this.h()},l(s){n=le(),r&&r.l(s),i=le(),this.h()},h(){this.first=n},m(s,l){G(s,n,l),r&&r.m(s,l),G(s,i,l)},p(s,l){t=s,t[33]%2==0?r?r.p(t,l):(r=dl(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&k(n),r&&r.d(s),s&&k(i)}}}function ml(e,t){let n,i=t[31].product.name+"",r,s,l,a=ye;return{key:e,first:null,c(){n=Q("text"),r=me(i),this.h()},l(o){n=$(o,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var u=P(n);r=ge(u,i),u.forEach(k),this.h()},h(){_(n,"class","product-text"),_(n,"alignment-baseline","hanging"),_(n,"x","10"),_(n,"y",s=t[33]*Re+Mt+6),this.first=n},m(o,u){G(o,n,u),H(n,r)},p(o,u){t=o,u[0]&2048&&i!==(i=t[31].product.name+"")&&Fe(r,i),u[0]&2048&&s!==(s=t[33]*Re+Mt+6)&&_(n,"y",s)},r(){l=n.getBoundingClientRect()},f(){ra(n),a()},a(){a(),a=la(n,l,Jh,{duration:400,delay:20})},d(o){o&&k(n)}}}function gl(e,t){let n,i,r,s,l,a,o,u,f,h,c,d;return{key:e,first:null,c(){n=Q("g"),i=Q("rect"),s=Q("rect"),u=Q("rect"),this.h()},l(v){n=$(v,"g",{class:!0,transform:!0});var g=P(n);i=$(g,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),P(i).forEach(k),s=$(g,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),P(s).forEach(k),u=$(g,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),P(u).forEach(k),g.forEach(k),this.h()},h(){_(i,"x","0"),_(i,"y","2"),_(i,"height",Re-4),_(i,"width","6"),_(i,"fill",r=t[7]?t[7](t[31].product.name):"white"),_(i,"class","svelte-1feevgh"),_(s,"class","country1-bar svelte-1feevgh"),_(s,"x",l=t[6](-t[31].export_value)),_(s,"y",Jt/2),_(s,"height",Re-Jt),_(s,"width",a=t[6](0)-t[6](-t[31].export_value)),_(s,"fill",o=t[8](t[31].location_id)),_(u,"class","country2-bar svelte-1feevgh"),_(u,"x",f=t[6](0)),_(u,"y",Jt/2),_(u,"height",Re-Jt),_(u,"width",h=t[6](t[31].import_value)-t[6](0)),_(u,"fill",c=t[8](t[31].partner_id)),_(n,"class","bar-row"),_(n,"transform",d=`translate(0, ${t[33]*Re+Mt})`),this.first=n},m(v,g){G(v,n,g),H(n,i),H(n,s),H(n,u)},p(v,g){t=v,g[0]&2176&&r!==(r=t[7]?t[7](t[31].product.name):"white")&&_(i,"fill",r),g[0]&2112&&l!==(l=t[6](-t[31].export_value))&&_(s,"x",l),g[0]&2112&&a!==(a=t[6](0)-t[6](-t[31].export_value))&&_(s,"width",a),g[0]&2304&&o!==(o=t[8](t[31].location_id))&&_(s,"fill",o),g[0]&64&&f!==(f=t[6](0))&&_(u,"x",f),g[0]&2112&&h!==(h=t[6](t[31].import_value)-t[6](0))&&_(u,"width",h),g[0]&2304&&c!==(c=t[8](t[31].partner_id))&&_(u,"fill",c),g[0]&2048&&d!==(d=`translate(0, ${t[33]*Re+Mt})`)&&_(n,"transform",d)},d(v){v&&k(n)}}}function pl(e){let t,n,i,r,s;return{c(){t=Q("rect"),n=Q("text"),i=me("Loading..."),this.h()},l(l){t=$(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),P(t).forEach(k),n=$(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var a=P(n);i=ge(a,"Loading..."),a.forEach(k),this.h()},h(){_(t,"x","0"),_(t,"y","0"),_(t,"width",e[4]),_(t,"height",e[10]),_(t,"fill","rgba(255,255,255,0.9)"),_(t,"class","svelte-1feevgh"),_(n,"x",r=e[4]/2),_(n,"y",s=e[10]/2),_(n,"alignment-baseline","central"),_(n,"text-anchor","middle")},m(l,a){G(l,t,a),G(l,n,a),H(n,i)},p(l,a){a[0]&16&&_(t,"width",l[4]),a[0]&1024&&_(t,"height",l[10]),a[0]&16&&r!==(r=l[4]/2)&&_(n,"x",r),a[0]&1024&&s!==(s=l[10]/2)&&_(n,"y",s)},d(l){l&&k(t),l&&k(n)}}}function e0(e){let t,n,i,r;function s(u,f){return u[11]&&u[11].length>0?$h:Qh}let l=s(e),a=l(e),o=e[9]&&pl(e);return{c(){t=te("div"),n=Q("svg"),a.c(),i=le(),o&&o.c(),this.h()},l(u){t=ne(u,"DIV",{id:!0,class:!0});var f=P(t);n=$(f,"svg",{class:!0});var h=P(n);a.l(h),i=le(),o&&o.l(h),h.forEach(k),f.forEach(k),this.h()},h(){_(n,"class","svelte-1feevgh"),_(t,"id","bar-chart"),_(t,"class","viz-section svelte-1feevgh"),Ut(()=>e[28].call(t))},m(u,f){G(u,t,f),H(t,n),a.m(n,null),H(n,i),o&&o.m(n,null),r=wn(t,e[28].bind(t))},p(u,f){l===(l=s(u))&&a?a.p(u,f):(a.d(1),a=l(u),a&&(a.c(),J(a,1),a.m(n,i))),u[9]?o?o.p(u,f):(o=pl(u),o.c(),o.m(n,null)):o&&(o.d(1),o=null)},i(u){J(a)},o:ye,d(u){u&&k(t),a.d(),o&&o.d(),r()}}}const Dt=40,Re=30,vl=0,t0=10,Mt=30,nt=100,Jt=4,n0=()=>{},i0=()=>{},r0=()=>{},l0=()=>{};function s0(e,t,n){let i,r,s,l,a,o,u,f,h;Mi(e,bt,z=>n(22,h=z));let{data:c}=t;var d;(function(z){z[z.LeftUp=0]="LeftUp",z[z.LeftDown=1]="LeftDown",z[z.RightUp=2]="RightUp",z[z.RightDown=3]="RightDown",z[z.Up=4]="Up",z[z.Down=5]="Down",z[z.AlphaUp=6]="AlphaUp",z[z.AlphaDown=7]="AlphaDown"})(d||(d={}));let v=d.AlphaDown,{bilateralData:g,productColorScale:p,countryColorScale:b,country1:S,country2:w,loadingDrilldown:y,productData:I,locationData:B}=c,R=800,D=500,U;const E=z=>St("$.2s")(z).replace(/G/,"B"),A=()=>{v==d.AlphaDown?n(1,v=d.AlphaUp):n(1,v=d.AlphaDown)},L=()=>{v==d.Down?n(1,v=d.Up):n(1,v=d.Down)},O=()=>{v==d.LeftDown?n(1,v=d.LeftUp):n(1,v=d.LeftDown)},N=()=>{v==d.RightDown?n(1,v=d.RightUp):n(1,v=d.RightDown)};function C(z){He[z?"unshift":"push"](()=>{U=z,n(5,U)})}function M(){R=this.clientWidth,D=this.clientHeight,n(4,R),n(10,D)}return e.$$set=z=>{"data"in z&&n(12,c=z.data)},e.$$.update=()=>{var z,j,q;if(e.$$.dirty[0]&4096&&n(13,{bilateralData:g,productColorScale:p,countryColorScale:b,country1:S,country2:w,loadingDrilldown:y,productData:I,locationData:B}=c,g,(n(7,p),n(12,c)),(n(8,b),n(12,c)),(n(2,S),n(12,c)),(n(3,w),n(12,c)),(n(9,y),n(12,c)),(n(14,I),n(12,c)),(n(15,B),n(12,c))),e.$$.dirty[0]&8204&&n(21,i=(q=g==null?void 0:g.get((z=S==null?void 0:S.id)!=null?z:0))==null?void 0:q.get((j=w==null?void 0:w.id)!=null?j:0)),e.$$.dirty[0]&6291456&&n(20,r=h.map(X=>{var W;return(W=i==null?void 0:i.get(X))!=null?W:new Array}).flat()),e.$$.dirty[0]&1097740&&n(18,s=Array.from(Dl(r,X=>{var W,T;return X.reduce((ee,ae)=>(ee.export_value+=ae.export_value,ee.import_value+=ae.import_value,ee),new ut(B,I,{location_id:(W=S==null?void 0:S.id)!=null?W:0,partner_id:(T=w==null?void 0:w.id)!=null?T:0,product_id:X[0].product_id,year:0,export_value:0,import_value:0}))},X=>X.product_id).values())),e.$$.dirty[0]&262144&&n(19,l=s.filter(X=>X.product.level=="section")),e.$$.dirty[0]&524291&&n(11,a=l.sort((X,W)=>{switch(v){case d.LeftUp:return X.export_value-W.export_value;case d.LeftDown:return W.export_value-X.export_value;case d.RightUp:return X.import_value-W.import_value;case d.RightDown:return W.import_value-X.import_value;case d.Up:return X.import_value+X.export_value-(W.import_value+W.export_value);case d.Down:return W.import_value+W.export_value-(X.import_value+X.export_value);case d.AlphaDown:return X.product.name.localeCompare(W.product.name);case d.AlphaUp:return W.product.name.localeCompare(X.product.name);default:return 0}})),e.$$.dirty[0]&262144&&n(17,o=ni(s,X=>X.export_value)),e.$$.dirty[0]&262144&&n(16,u=ni(s,X=>X.import_value)),e.$$.dirty[0]&196608,e.$$.dirty[0]&196624&&n(6,f=gn().domain([-o,u]).range([nt+vl,R-vl-t0])),e.$$.dirty[0]&96){let X=Fl(f).tickFormat(W=>E(Math.abs(W)));ze(U).transition().call(X)}},[d,v,S,w,R,U,f,p,b,y,D,a,c,g,I,B,u,o,s,l,r,i,h,A,L,O,N,C,M]}class a0 extends je{constructor(t){super(),We(this,t,s0,e0,xe,{data:12},null,[-1,-1])}}const{Map:o0}=sa;function yl(e,t,n){const i=e.slice();return i[20]=t[n],i}function wl(e){let t,n,i,r,s,l,a,o=e[20].x1-e[20].x0>40&&e[20].y1-e[20].y0>10&&bl(e),u=e[20].x1-e[20].x0>40&&e[20].y1-e[20].y0>30&&kl(e);return{c(){t=Q("rect"),o&&o.c(),l=le(),u&&u.c(),a=le(),this.h()},l(f){t=$(f,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),P(t).forEach(k),o&&o.l(f),l=le(),u&&u.l(f),a=le(),this.h()},h(){var f,h,c,d;_(t,"class","leaf svelte-sixlpg"),_(t,"transform",n=`translate(${e[20].x0},${e[20].y0})`),_(t,"width",i=e[20].x1-e[20].x0),_(t,"height",r=e[20].y1-e[20].y0),_(t,"fill",s=e[5]?e[5]((d=(c=(h=(f=e[20].data)==null?void 0:f.product)==null?void 0:h.parent)==null?void 0:c.name)!=null?d:""):"white")},m(f,h){G(f,t,h),o&&o.m(f,h),G(f,l,h),u&&u.m(f,h),G(f,a,h)},p(f,h){var c,d,v,g;h&256&&n!==(n=`translate(${f[20].x0},${f[20].y0})`)&&_(t,"transform",n),h&256&&i!==(i=f[20].x1-f[20].x0)&&_(t,"width",i),h&256&&r!==(r=f[20].y1-f[20].y0)&&_(t,"height",r),h&288&&s!==(s=f[5]?f[5]((g=(v=(d=(c=f[20].data)==null?void 0:c.product)==null?void 0:d.parent)==null?void 0:v.name)!=null?g:""):"white")&&_(t,"fill",s),f[20].x1-f[20].x0>40&&f[20].y1-f[20].y0>10?o?o.p(f,h):(o=bl(f),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),f[20].x1-f[20].x0>40&&f[20].y1-f[20].y0>30?u?u.p(f,h):(u=kl(f),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},d(f){f&&k(t),o&&o.d(f),f&&k(l),u&&u.d(f),f&&k(a)}}}function bl(e){var l,a,o;let t,n=((o=(a=(l=e[20].data)==null?void 0:l.product.name)==null?void 0:a.substring(0,40))!=null?o:"")+"",i,r,s;return{c(){t=Q("text"),i=me(n),this.h()},l(u){t=$(u,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var f=P(t);i=ge(f,n),f.forEach(k),this.h()},h(){_(t,"class","label svelte-sixlpg"),_(t,"transform",r=`translate(${e[20].x0+3},${e[20].y0+3})`),_(t,"alignment-baseline","hanging"),_(t,"font-size",s=Math.max((e[20].x1-e[20].x0)/15,8))},m(u,f){G(u,t,f),H(t,i)},p(u,f){var h,c,d;f&256&&n!==(n=((d=(c=(h=u[20].data)==null?void 0:h.product.name)==null?void 0:c.substring(0,40))!=null?d:"")+"")&&Fe(i,n),f&256&&r!==(r=`translate(${u[20].x0+3},${u[20].y0+3})`)&&_(t,"transform",r),f&256&&s!==(s=Math.max((u[20].x1-u[20].x0)/15,8))&&_(t,"font-size",s)},d(u){u&&k(t)}}}function kl(e){let t,n=e[9](e[0]==="export_value"?e[20].data.export_value:e[20].data.import_value)+"",i,r,s;return{c(){t=Q("text"),i=me(n),this.h()},l(l){t=$(l,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var a=P(t);i=ge(a,n),a.forEach(k),this.h()},h(){_(t,"class","label-num svelte-sixlpg"),_(t,"transform",r=`translate(${e[20].x0+5},${e[20].y0+1+Math.max((e[20].x1-e[20].x0)/10,8)})`),_(t,"alignment-baseline","hanging"),_(t,"font-size",s=Math.max((e[20].x1-e[20].x0)/15,8)-1),_(t,"font-weight","300")},m(l,a){G(l,t,a),H(t,i)},p(l,a){a&257&&n!==(n=l[9](l[0]==="export_value"?l[20].data.export_value:l[20].data.import_value)+"")&&Fe(i,n),a&256&&r!==(r=`translate(${l[20].x0+5},${l[20].y0+1+Math.max((l[20].x1-l[20].x0)/10,8)})`)&&_(t,"transform",r),a&256&&s!==(s=Math.max((l[20].x1-l[20].x0)/15,8)-1)&&_(t,"font-size",s)},d(l){l&&k(t)}}}function Il(e,t){let n,i,r=t[4].length>0&&t[20].x1!=NaN&&t[20].x0!=NaN&&t[20].y0!=NaN&&t[20].y1!=NaN&&wl(t);return{key:e,first:null,c(){n=le(),r&&r.c(),i=le(),this.h()},l(s){n=le(),r&&r.l(s),i=le(),this.h()},h(){this.first=n},m(s,l){G(s,n,l),r&&r.m(s,l),G(s,i,l)},p(s,l){t=s,t[4].length>0&&t[20].x1!=NaN&&t[20].x0!=NaN&&t[20].y0!=NaN&&t[20].y1!=NaN?r?r.p(t,l):(r=wl(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&k(n),r&&r.d(s),s&&k(i)}}}function Al(e){let t,n,i,r=e[6]?"Loading...":"No Data",s,l,a;return{c(){t=Q("rect"),i=Q("text"),s=me(r),this.h()},l(o){t=$(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),P(t).forEach(k),i=$(o,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var u=P(i);s=ge(u,r),u.forEach(k),this.h()},h(){_(t,"x","0"),_(t,"y","0"),_(t,"width",e[1]),_(t,"height",e[2]),_(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),_(i,"x",l=e[1]/2),_(i,"y",a=e[2]/2),_(i,"alignment-baseline","central"),_(i,"text-anchor","middle")},m(o,u){G(o,t,u),G(o,i,u),H(i,s)},p(o,u){u&2&&_(t,"width",o[1]),u&4&&_(t,"height",o[2]),u&64&&n!==(n=o[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&_(t,"fill",n),u&64&&r!==(r=o[6]?"Loading...":"No Data")&&Fe(s,r),u&2&&l!==(l=o[1]/2)&&_(i,"x",l),u&4&&a!==(a=o[2]/2)&&_(i,"y",a)},d(o){o&&k(t),o&&k(i)}}}function u0(e){var f,h;let t,n,i,r=[],s=new o0,l,a=e[8];const o=c=>c[20].data.product_id;for(let c=0;c<a.length;c+=1){let d=yl(e,a,c),v=o(d);s.set(v,r[c]=Il(v,d))}let u=((h=(f=e[3])==null?void 0:f.length)!=null?h:0)===0&&Al(e);return{c(){t=te("div"),n=Q("svg"),i=Q("g");for(let c=0;c<r.length;c+=1)r[c].c();u&&u.c(),this.h()},l(c){t=ne(c,"DIV",{class:!0});var d=P(t);n=$(d,"svg",{class:!0});var v=P(n);i=$(v,"g",{class:!0});var g=P(i);for(let p=0;p<r.length;p+=1)r[p].l(g);g.forEach(k),u&&u.l(v),v.forEach(k),d.forEach(k),this.h()},h(){_(i,"class","treemap svelte-sixlpg"),_(n,"class","svelte-sixlpg"),_(t,"class","viz-section"),Ut(()=>e[19].call(t))},m(c,d){G(c,t,d),H(t,n),H(n,i);for(let v=0;v<r.length;v+=1)r[v].m(i,null);e[18](i),u&&u.m(n,null),l=wn(t,e[19].bind(t))},p(c,[d]){var v,g;d&817&&(a=c[8],r=at(r,d,o,1,c,a,s,i,Ht,Il,null,yl)),((g=(v=c[3])==null?void 0:v.length)!=null?g:0)===0?u?u.p(c,d):(u=Al(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i:ye,o:ye,d(c){c&&k(t);for(let d=0;d<r.length;d+=1)r[d].d();e[18](null),u&&u.d(),l()}}}function f0(e,t,n){let i,r,s,l;Mi(e,bt,R=>n(4,l=R));const a=R=>St("$.2s")(R).replace(/G/,"B");let{data:o}=t,{country1:u,country2:f,valueField:h,productColorScale:c,drilldownBilateral:d,loadingDrilldown:v,locationData:g,productData:p}=o,b=0,S=0,w,y=new Array;function I(R){He[R?"unshift":"push"](()=>{w=R,n(7,w)})}function B(){b=this.clientWidth,S=this.clientHeight,n(1,b),n(2,S)}return e.$$set=R=>{"data"in R&&n(10,o=R.data)},e.$$.update=()=>{var R;if(e.$$.dirty&1024&&n(13,{drilldownBilateral:d,valueField:h,productColorScale:c,country1:u,country2:f,loadingDrilldown:v,locationData:g,productData:p}=o,d,(n(0,h),n(10,o)),(n(5,c),n(10,o)),(n(11,u),n(10,o)),(n(12,f),n(10,o)),(n(6,v),n(10,o)),(n(14,g),n(10,o)),(n(15,p),n(10,o))),e.$$.dirty&12288&&n(17,i=d==null?void 0:d.get((R=f==null?void 0:f.id)!=null?R:0)),e.$$.dirty&131088&&n(16,r=l.map(D=>{var U;return(U=i==null?void 0:i.get(D))!=null?U:new Array}).flat()),e.$$.dirty&120832&&n(3,s=Array.from(Dl(r,D=>D.reduce((U,E)=>(U.export_value+=E.export_value,U.import_value+=E.import_value,U),new ut(g,p,{location_id:u,partner_id:f,product_id:D[0].product_id,year:0,export_value:0,import_value:0})),D=>D.product_id).values())),e.$$.dirty&6159&&s&&s.length>0){let D=new ut(new Map,new Map,{location_id:u,partner_id:f,product_id:-1,year:0,export_value:0,import_value:0});D.product=new bi({product_id:-1,name:"All",level:-1,parent_id:-1}),D.product.parent_id=null;let U=[D],E=Qn(s,A=>{var L,O;return(O=(L=A.product)==null?void 0:L.parent_id)!=null?O:-1});if(E.size>1){for(let[L,O]of E){let N=new ut(new Map,new Map,{location_id:u,partner_id:f,product_id:L,year:0,export_value:0,import_value:0});N.product=new bi({product_id:L,name:"Something",level:0,parent_id:-1}),U.push(N)}U=U.concat(s);let A=Jc().id(L=>{var O;return(O=L.product)==null?void 0:O.id}).parentId(L=>{var O;return(O=L.product)==null?void 0:O.parent_id})(U);A.sum(L=>Math.max(0,L[h])),eh().tile(th).size([b,S]).padding(2)(A),n(8,y=A.leaves())}}},[h,b,S,s,l,c,v,w,y,a,o,u,f,d,g,p,r,i,I,B]}class El extends je{constructor(t){super(),We(this,t,f0,u0,xe,{data:10})}}function c0(e){let t,n,i,r,s,l;return{c(){t=te("div"),n=te("h3"),i=me("Loading data..."),r=he(),s=Q("svg"),l=Q("circle"),this.h()},l(a){t=ne(a,"DIV",{class:!0});var o=P(t);n=ne(o,"H3",{});var u=P(n);i=ge(u,"Loading data..."),u.forEach(k),r=de(o),s=$(o,"svg",{class:!0,viewBox:!0});var f=P(s);l=$(f,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),P(l).forEach(k),f.forEach(k),o.forEach(k),this.h()},h(){_(l,"class","path svelte-jcbfjt"),_(l,"cx","25"),_(l,"cy","25"),_(l,"r","20"),_(l,"fill","none"),_(l,"stroke-width","5"),_(s,"class","spinner svelte-jcbfjt"),_(s,"viewBox","0 0 50 50"),_(t,"class","loading svelte-jcbfjt")},m(a,o){G(a,t,o),H(t,n),H(n,i),H(t,r),H(t,s),H(s,l)},p:ye,i:ye,o:ye,d(a){a&&k(t)}}}function h0(e){var j,q,X,W;let t,n,i,r,s,l,a,o,u,f,h,c,d,v,g,p,b,S,w,y,I,B,R,D,U,E,A,L,O,N,C,M,z;return u=new rl({props:{optionIdentifier:Sl,labelIdentifier:Ml,items:Array.from(e[0].values()),value:e[2]}}),u.$on("select",e[9]),g=new rl({props:{optionIdentifier:Sl,labelIdentifier:Ml,items:Array.from(e[0].values()),value:e[8]}}),g.$on("select",e[10]),U=new xh({props:{data:{bilateralData:e[5],country1_id:(q=(j=e[2])==null?void 0:j.id)!=null?q:0,country2_id:(W=(X=e[8])==null?void 0:X.id)!=null?W:0,productData:e[1],locationData:e[0],countryColorScale:e[3]}}}),A=new a0({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[5],loadingDrilldown:e[7],productColorScale:e[4],country1:e[2],country2:e[8],countryColorScale:e[3]}}}),N=new El({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7],valueField:"export_value"}}}),M=new El({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7],valueField:"import_value"}}}),{c(){t=te("div"),n=te("div"),r=he(),s=te("div"),l=te("span"),a=me("Country 1"),o=he(),we(u.$$.fragment),f=he(),h=te("div"),c=te("span"),d=me("Country 2"),v=he(),we(g.$$.fragment),p=he(),b=te("div"),w=he(),y=te("div"),I=he(),B=te("div"),R=te("div"),D=te("div"),we(U.$$.fragment),E=he(),we(A.$$.fragment),L=he(),O=te("div"),we(N.$$.fragment),C=he(),we(M.$$.fragment),this.h()},l(T){t=ne(T,"DIV",{class:!0});var ee=P(t);n=ne(ee,"DIV",{class:!0,style:!0}),P(n).forEach(k),r=de(ee),s=ne(ee,"DIV",{class:!0});var ae=P(s);l=ne(ae,"SPAN",{class:!0});var pe=P(l);a=ge(pe,"Country 1"),pe.forEach(k),o=de(ae),Oe(u.$$.fragment,ae),ae.forEach(k),f=de(ee),h=ne(ee,"DIV",{class:!0});var _e=P(h);c=ne(_e,"SPAN",{class:!0});var oe=P(c);d=ge(oe,"Country 2"),oe.forEach(k),v=de(_e),Oe(g.$$.fragment,_e),_e.forEach(k),p=de(ee),b=ne(ee,"DIV",{class:!0,style:!0}),P(b).forEach(k),ee.forEach(k),w=de(T),y=ne(T,"DIV",{class:!0});var V=P(y);V.forEach(k),I=de(T),B=ne(T,"DIV",{id:!0,class:!0});var K=P(B);R=ne(K,"DIV",{id:!0,class:!0});var fe=P(R);D=ne(fe,"DIV",{class:!0});var Ae=P(D);Oe(U.$$.fragment,Ae),E=de(Ae),Oe(A.$$.fragment,Ae),Ae.forEach(k),L=de(fe),O=ne(fe,"DIV",{class:!0});var F=P(O);Oe(N.$$.fragment,F),C=de(F),Oe(M.$$.fragment,F),F.forEach(k),fe.forEach(k),K.forEach(k),this.h()},h(){var T,ee,ae,pe;_(n,"class","country-icon svelte-jcbfjt"),_(n,"style",i=`background:${e[3]((ee=(T=e[2])==null?void 0:T.id)!=null?ee:0)}`),_(l,"class","svelte-jcbfjt"),_(s,"class","dropdown svelte-jcbfjt"),_(c,"class","svelte-jcbfjt"),_(h,"class","dropdown svelte-jcbfjt"),_(b,"class","country-icon svelte-jcbfjt"),_(b,"style",S=`background:${e[3]?e[3]((pe=(ae=e[8])==null?void 0:ae.id)!=null?pe:0):"white"}`),_(t,"class","selectors svelte-jcbfjt"),_(y,"class","svelte-jcbfjt"),_(D,"class","viz-row svelte-jcbfjt"),_(O,"class","viz-row svelte-jcbfjt"),_(R,"id","content"),_(R,"class","svelte-jcbfjt"),_(B,"id","container"),_(B,"class","svelte-jcbfjt")},m(T,ee){G(T,t,ee),H(t,n),H(t,r),H(t,s),H(s,l),H(l,a),H(s,o),be(u,s,null),H(t,f),H(t,h),H(h,c),H(c,d),H(h,v),be(g,h,null),H(t,p),H(t,b),G(T,w,ee),G(T,y,ee),G(T,I,ee),G(T,B,ee),H(B,R),H(R,D),be(U,D,null),H(D,E),be(A,D,null),H(R,L),H(R,O),be(N,O,null),H(O,C),be(M,O,null),z=!0},p(T,ee){var fe,Ae,F,Y,re,Ee,Ne,x;(!z||ee&12&&i!==(i=`background:${T[3]((Ae=(fe=T[2])==null?void 0:fe.id)!=null?Ae:0)}`))&&_(n,"style",i);const ae={};ee&1&&(ae.items=Array.from(T[0].values())),ee&4&&(ae.value=T[2]),u.$set(ae);const pe={};ee&1&&(pe.items=Array.from(T[0].values())),ee&256&&(pe.value=T[8]),g.$set(pe),(!z||ee&264&&S!==(S=`background:${T[3]?T[3]((Y=(F=T[8])==null?void 0:F.id)!=null?Y:0):"white"}`))&&_(b,"style",S);const _e={};ee&303&&(_e.data={bilateralData:T[5],country1_id:(Ee=(re=T[2])==null?void 0:re.id)!=null?Ee:0,country2_id:(x=(Ne=T[8])==null?void 0:Ne.id)!=null?x:0,productData:T[1],locationData:T[0],countryColorScale:T[3]}),U.$set(_e);const oe={};ee&447&&(oe.data={productData:T[1],locationData:T[0],bilateralData:T[5],loadingDrilldown:T[7],productColorScale:T[4],country1:T[2],country2:T[8],countryColorScale:T[3]}),A.$set(oe);const V={};ee&471&&(V.data={locationData:T[0],productData:T[1],productColorScale:T[4],country1:T[2],country2:T[8],drilldownBilateral:T[6],loadingDrilldown:T[7],valueField:"export_value"}),N.$set(V);const K={};ee&471&&(K.data={locationData:T[0],productData:T[1],productColorScale:T[4],country1:T[2],country2:T[8],drilldownBilateral:T[6],loadingDrilldown:T[7],valueField:"import_value"}),M.$set(K)},i(T){z||(J(u.$$.fragment,T),J(g.$$.fragment,T),J(U.$$.fragment,T),J(A.$$.fragment,T),J(N.$$.fragment,T),J(M.$$.fragment,T),z=!0)},o(T){ie(u.$$.fragment,T),ie(g.$$.fragment,T),ie(U.$$.fragment,T),ie(A.$$.fragment,T),ie(N.$$.fragment,T),ie(M.$$.fragment,T),z=!1},d(T){T&&k(t),ke(u),ke(g),T&&k(w),T&&k(y),T&&k(I),T&&k(B),ke(U),ke(A),ke(N),ke(M)}}}function d0(e){let t,n,i,r,s,l,a,o,u,f,h;const c=[h0,c0],d=[];function v(g,p){return g[0]&&g[5]&&g[1]&&g[3]?0:1}return o=v(e),u=d[o]=c[o](e),{c(){t=te("div"),n=te("h1"),i=me("Commerce Among Nations"),r=he(),s=te("h2"),l=me("A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),a=he(),u.c(),f=le(),this.h()},l(g){t=ne(g,"DIV",{class:!0});var p=P(t);n=ne(p,"H1",{class:!0});var b=P(n);i=ge(b,"Commerce Among Nations"),b.forEach(k),r=de(p),s=ne(p,"H2",{class:!0});var S=P(s);l=ge(S,"A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),S.forEach(k),p.forEach(k),a=de(g),u.l(g),f=le(),this.h()},h(){_(n,"class","svelte-jcbfjt"),_(s,"class","svelte-jcbfjt"),_(t,"class","heading svelte-jcbfjt")},m(g,p){G(g,t,p),H(t,n),H(n,i),H(t,r),H(t,s),H(s,l),G(g,a,p),d[o].m(g,p),G(g,f,p),h=!0},p(g,[p]){let b=o;o=v(g),o===b?d[o].p(g,p):(Me(),ie(d[b],1,1,()=>{d[b]=null}),Ce(),u=d[o],u?u.p(g,p):(u=d[o]=c[o](g),u.c()),J(u,1),u.m(f.parentNode,f))},i(g){h||(J(u),h=!0)},o(g){ie(u),h=!1},d(g){g&&k(t),g&&k(a),d[o].d(g),g&&k(f)}}}const Sl="id",Ml="name",_0=231,m0=43;function g0(e,t,n){let i,r;const s=v=>{let g=v.detail;n(2,i=u.get(g.id))},l=v=>{let g=v.detail;n(8,r=u.get(g.id))};let a,o,u=new Map,f=new Map,h,c,d=!1;return yn(async()=>{Promise.all([Kt(`${Yt}/data/location.csv`),Kt(`${Yt}/data/hs_product.csv`),Kt(`${Yt}/data/hs_2010_to_2020.csv`)]).then(([v,g,p])=>{var S;n(0,u=$i(v.map(w=>new dh(w)).filter(w=>w.level=="country"),w=>w.id)),n(1,f=$i(g.map(w=>new bi(w)),w=>w.id));for(let[w,y]of f)y.parent=(S=f.get(y.parent_id))!=null?S:null,f.set(w,y);let b=p.map(w=>new ut(u,f,w));n(5,h=Qn(b,w=>w.location_id,w=>w.partner_id,w=>w.year)),Tl(p,w=>+w.export_value),n(3,a=yi(u.keys(),Or)),n(4,o=yi(Array.from(f).map(([w,y])=>y.level).filter(w=>w=="section"),Or))})}),e.$$.update=()=>{var v,g,p,b;e.$$.dirty&1&&n(2,i=(v=u==null?void 0:u.get(_0))!=null?v:null),e.$$.dirty&1&&n(8,r=(g=u==null?void 0:u.get(m0))!=null?g:null),e.$$.dirty&7&&(n(6,c=null),n(7,d=!0),Kt(`${Yt}/data/${(p=i==null?void 0:i.code)!=null?p:"USA"}/${(b=i==null?void 0:i.code)!=null?b:"USA"}_hs2_2010_to_2020.csv`).then(S=>{n(6,c=Qn(S.map(w=>new ut(u,f,w)),w=>w.partner_id,w=>w.year)),n(7,d=!1)}))},[u,f,i,a,o,h,c,d,r,s,l]}class w0 extends je{constructor(t){super(),We(this,t,g0,d0,xe,{})}}export{w0 as default};
