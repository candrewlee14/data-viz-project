var js=Object.defineProperty;var Ws=(e,t,n)=>t in e?js(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>(Ws(e,typeof t!="symbol"?t+"":t,n),n);import{S as je,i as We,s as xe,k as ee,l as te,m as P,h as I,n as _,b as U,B as ve,I as Ue,J as ue,g as Me,t as ne,d as Ce,f as Z,K as lt,L as Ei,o as kn,M as Nl,N as He,e as le,O as Si,v as De,w as we,x as Oe,y as be,z as ke,q as ge,r as pe,G as R,u as Fe,A as en,a as _e,c as me,P as Q,Q as $,p as gt,R as $n,T as Gt,U as In,V as ut,W as xs,C as Ks,D as Zs,E as Js,F as Qs,X as Mi,Y as Zi,Z as Ji,_ as Ci,$ as Ll,a0 as $s,a1 as Qi,a2 as eo,a3 as to,a4 as no,H as It,a5 as Ni,a6 as Pt,a7 as io,a8 as ro,a9 as lo,aa as so,ab as oo,ac as ao}from"../../chunks/index-181e8753.js";import{w as Tl,b as Wt}from"../../chunks/paths-455b1d4b.js";function tn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Dl(e){let t,n,i;e.length!==2?(t=tn,n=(o,u)=>tn(e(o),u),i=(o,u)=>e(o)-u):(t=e===tn||e===uo?e:fo,n=e,i=e);function r(o,u,a=0,f=o.length){if(a<f){if(t(u,u)!==0)return f;do{const h=a+f>>>1;n(o[h],u)<0?a=h+1:f=h}while(a<f)}return a}function s(o,u,a=0,f=o.length){if(a<f){if(t(u,u)!==0)return f;do{const h=a+f>>>1;n(o[h],u)<=0?a=h+1:f=h}while(a<f)}return a}function l(o,u,a=0,f=o.length){const h=r(o,u,a,f-1);return h>a&&i(o[h-1],u)>-i(o[h],u)?h-1:h}return{left:r,center:l,right:s}}function fo(){return 0}function co(e){return e===null?NaN:+e}const ho=Dl(tn),_o=ho.right;Dl(co).center;const mo=_o;function Vl(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class ei extends Map{constructor(t,n=yo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get($i(this,t))}has(t){return super.has($i(this,t))}set(t,n){return super.set(go(this,t),n)}delete(t){return super.delete(po(this,t))}}function $i({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function go({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function po({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function yo(e){return e!==null&&typeof e=="object"?e.valueOf():e}function an(e){return e}function ti(e,...t){return Li(e,an,an,t)}function Ol(e,t,...n){return Li(e,an,t,n)}function er(e,...t){return Li(e,an,vo,t)}function vo(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Li(e,t,n,i){return function r(s,l){if(l>=i.length)return n(s);const o=new ei,u=i[l++];let a=-1;for(const f of s){const h=u(f,++a,s),c=o.get(h);c?c.push(f):o.set(h,[f])}for(const[f,h]of o)o.set(f,r(h,l));return t(o)}(e,0)}var ni=Math.sqrt(50),ii=Math.sqrt(10),ri=Math.sqrt(2);function wo(e,t,n){var i,r=-1,s,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(s=e,e=t,t=s),(o=Fl(e,t,n))===0||!isFinite(o))return[];if(o>0){let u=Math.round(e/o),a=Math.round(t/o);for(u*o<e&&++u,a*o>t&&--a,l=new Array(s=a-u+1);++r<s;)l[r]=(u+r)*o}else{o=-o;let u=Math.round(e*o),a=Math.round(t*o);for(u/o<e&&++u,a/o>t&&--a,l=new Array(s=a-u+1);++r<s;)l[r]=(u+r)/o}return i&&l.reverse(),l}function Fl(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=ni?10:s>=ii?5:s>=ri?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=ni?10:s>=ii?5:s>=ri?2:1)}function bo(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=ni?r*=10:s>=ii?r*=5:s>=ri&&(r*=2),t<e?-r:r}function li(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function ko(e){return e}var zn=1,Bn=2,si=3,Ot=4,tr=1e-6;function Io(e){return"translate("+e+",0)"}function Ao(e){return"translate(0,"+e+")"}function Eo(e){return t=>+e(t)}function So(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Mo(){return!this.__axis}function Hl(e,t){var n=[],i=null,r=null,s=6,l=6,o=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,a=e===zn||e===Ot?-1:1,f=e===Ot||e===Bn?"x":"y",h=e===zn||e===si?Io:Ao;function c(d){var y=i==null?t.ticks?t.ticks.apply(t,n):t.domain():i,p=r==null?t.tickFormat?t.tickFormat.apply(t,n):ko:r,m=Math.max(s,0)+o,b=t.range(),C=+b[0]+u,w=+b[b.length-1]+u,v=(t.bandwidth?So:Eo)(t.copy(),u),S=d.selection?d.selection():d,q=S.selectAll(".domain").data([null]),B=S.selectAll(".tick").data(y,t).order(),L=B.exit(),z=B.enter().append("g").attr("class","tick"),A=B.select("line"),k=B.select("text");q=q.merge(q.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),B=B.merge(z),A=A.merge(z.append("line").attr("stroke","currentColor").attr(f+"2",a*s)),k=k.merge(z.append("text").attr("fill","currentColor").attr(f,a*m).attr("dy",e===zn?"0em":e===si?"0.71em":"0.32em")),d!==S&&(q=q.transition(d),B=B.transition(d),A=A.transition(d),k=k.transition(d),L=L.transition(d).attr("opacity",tr).attr("transform",function(T){return isFinite(T=v(T))?h(T+u):this.getAttribute("transform")}),z.attr("opacity",tr).attr("transform",function(T){var F=this.parentNode.__axis;return h((F&&isFinite(F=F(T))?F:v(T))+u)})),L.remove(),q.attr("d",e===Ot||e===Bn?l?"M"+a*l+","+C+"H"+u+"V"+w+"H"+a*l:"M"+u+","+C+"V"+w:l?"M"+C+","+a*l+"V"+u+"H"+w+"V"+a*l:"M"+C+","+u+"H"+w),B.attr("opacity",1).attr("transform",function(T){return h(v(T)+u)}),A.attr(f+"2",a*s),k.attr(f,a*m).text(p),S.filter(Mo).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Bn?"start":e===Ot?"end":"middle"),S.each(function(){this.__axis=v})}return c.scale=function(d){return arguments.length?(t=d,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),c):i&&i.slice()},c.tickFormat=function(d){return arguments.length?(r=d,c):r},c.tickSize=function(d){return arguments.length?(s=l=+d,c):s},c.tickSizeInner=function(d){return arguments.length?(s=+d,c):s},c.tickSizeOuter=function(d){return arguments.length?(l=+d,c):l},c.tickPadding=function(d){return arguments.length?(o=+d,c):o},c.offset=function(d){return arguments.length?(u=+d,c):u},c}function Rl(e){return Hl(si,e)}function Co(e){return Hl(Ot,e)}var No={value:()=>{}};function Ti(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new nn(n)}function nn(e){this._=e}function Lo(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}nn.prototype=Ti.prototype={constructor:nn,on:function(e,t){var n=this._,i=Lo(e+"",n),r,s=-1,l=i.length;if(arguments.length<2){for(;++s<l;)if((r=(e=i[s]).type)&&(r=To(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<l;)if(r=(e=i[s]).type)n[r]=nr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=nr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new nn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function To(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function nr(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=No,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var oi="http://www.w3.org/1999/xhtml";const ir={svg:"http://www.w3.org/2000/svg",xhtml:oi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function An(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ir.hasOwnProperty(t)?{space:ir[t],local:e}:e}function Do(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===oi&&t.documentElement.namespaceURI===oi?t.createElement(e):t.createElementNS(n,e)}}function Vo(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Pl(e){var t=An(e);return(t.local?Vo:Do)(t)}function Oo(){}function Di(e){return e==null?Oo:function(){return this.querySelector(e)}}function Fo(e){typeof e!="function"&&(e=Di(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,o=i[r]=new Array(l),u,a,f=0;f<l;++f)(u=s[f])&&(a=e.call(u,u.__data__,f,s))&&("__data__"in u&&(a.__data__=u.__data__),o[f]=a);return new Be(i,this._parents)}function Ho(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ro(){return[]}function zl(e){return e==null?Ro:function(){return this.querySelectorAll(e)}}function Po(e){return function(){return Ho(e.apply(this,arguments))}}function zo(e){typeof e=="function"?e=Po(e):e=zl(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var l=t[s],o=l.length,u,a=0;a<o;++a)(u=l[a])&&(i.push(e.call(u,u.__data__,a,l)),r.push(u));return new Be(i,r)}function Bl(e){return function(){return this.matches(e)}}function ql(e){return function(t){return t.matches(e)}}var Bo=Array.prototype.find;function qo(e){return function(){return Bo.call(this.children,e)}}function Uo(){return this.firstElementChild}function Go(e){return this.select(e==null?Uo:qo(typeof e=="function"?e:ql(e)))}var Xo=Array.prototype.filter;function Yo(){return Array.from(this.children)}function jo(e){return function(){return Xo.call(this.children,e)}}function Wo(e){return this.selectAll(e==null?Yo:jo(typeof e=="function"?e:ql(e)))}function xo(e){typeof e!="function"&&(e=Bl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,o=i[r]=[],u,a=0;a<l;++a)(u=s[a])&&e.call(u,u.__data__,a,s)&&o.push(u);return new Be(i,this._parents)}function Ul(e){return new Array(e.length)}function Ko(){return new Be(this._enter||this._groups.map(Ul),this._parents)}function un(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}un.prototype={constructor:un,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zo(e){return function(){return e}}function Jo(e,t,n,i,r,s){for(var l=0,o,u=t.length,a=s.length;l<a;++l)(o=t[l])?(o.__data__=s[l],i[l]=o):n[l]=new un(e,s[l]);for(;l<u;++l)(o=t[l])&&(r[l]=o)}function Qo(e,t,n,i,r,s,l){var o,u,a=new Map,f=t.length,h=s.length,c=new Array(f),d;for(o=0;o<f;++o)(u=t[o])&&(c[o]=d=l.call(u,u.__data__,o,t)+"",a.has(d)?r[o]=u:a.set(d,u));for(o=0;o<h;++o)d=l.call(e,s[o],o,s)+"",(u=a.get(d))?(i[o]=u,u.__data__=s[o],a.delete(d)):n[o]=new un(e,s[o]);for(o=0;o<f;++o)(u=t[o])&&a.get(c[o])===u&&(r[o]=u)}function $o(e){return e.__data__}function ea(e,t){if(!arguments.length)return Array.from(this,$o);var n=t?Qo:Jo,i=this._parents,r=this._groups;typeof e!="function"&&(e=Zo(e));for(var s=r.length,l=new Array(s),o=new Array(s),u=new Array(s),a=0;a<s;++a){var f=i[a],h=r[a],c=h.length,d=ta(e.call(f,f&&f.__data__,a,i)),y=d.length,p=o[a]=new Array(y),m=l[a]=new Array(y),b=u[a]=new Array(c);n(f,h,p,m,b,d,t);for(var C=0,w=0,v,S;C<y;++C)if(v=p[C]){for(C>=w&&(w=C+1);!(S=m[w])&&++w<y;);v._next=S||null}}return l=new Be(l,i),l._enter=o,l._exit=u,l}function ta(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function na(){return new Be(this._exit||this._groups.map(Ul),this._parents)}function ia(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function ra(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,l=Math.min(r,s),o=new Array(r),u=0;u<l;++u)for(var a=n[u],f=i[u],h=a.length,c=o[u]=new Array(h),d,y=0;y<h;++y)(d=a[y]||f[y])&&(c[y]=d);for(;u<r;++u)o[u]=n[u];return new Be(o,this._parents)}function la(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],l;--r>=0;)(l=i[r])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function sa(e){e||(e=oa);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var l=n[s],o=l.length,u=r[s]=new Array(o),a,f=0;f<o;++f)(a=l[f])&&(u[f]=a);u.sort(t)}return new Be(r,this._parents).order()}function oa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function aa(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ua(){return Array.from(this)}function fa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var l=i[r];if(l)return l}return null}function ca(){let e=0;for(const t of this)++e;return e}function ha(){return!this.node()}function da(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,l=r.length,o;s<l;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function _a(e){return function(){this.removeAttribute(e)}}function ma(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ga(e,t){return function(){this.setAttribute(e,t)}}function pa(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ya(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function va(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function wa(e,t){var n=An(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ma:_a:typeof t=="function"?n.local?va:ya:n.local?pa:ga)(n,t))}function Gl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ba(e){return function(){this.style.removeProperty(e)}}function ka(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ia(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Aa(e,t,n){return arguments.length>1?this.each((t==null?ba:typeof t=="function"?Ia:ka)(e,t,n==null?"":n)):At(this.node(),e)}function At(e,t){return e.style.getPropertyValue(t)||Gl(e).getComputedStyle(e,null).getPropertyValue(t)}function Ea(e){return function(){delete this[e]}}function Sa(e,t){return function(){this[e]=t}}function Ma(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ca(e,t){return arguments.length>1?this.each((t==null?Ea:typeof t=="function"?Ma:Sa)(e,t)):this.node()[e]}function Xl(e){return e.trim().split(/^|\s+/)}function Vi(e){return e.classList||new Yl(e)}function Yl(e){this._node=e,this._names=Xl(e.getAttribute("class")||"")}Yl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function jl(e,t){for(var n=Vi(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Wl(e,t){for(var n=Vi(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Na(e){return function(){jl(this,e)}}function La(e){return function(){Wl(this,e)}}function Ta(e,t){return function(){(t.apply(this,arguments)?jl:Wl)(this,e)}}function Da(e,t){var n=Xl(e+"");if(arguments.length<2){for(var i=Vi(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Ta:t?Na:La)(n,t))}function Va(){this.textContent=""}function Oa(e){return function(){this.textContent=e}}function Fa(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Ha(e){return arguments.length?this.each(e==null?Va:(typeof e=="function"?Fa:Oa)(e)):this.node().textContent}function Ra(){this.innerHTML=""}function Pa(e){return function(){this.innerHTML=e}}function za(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Ba(e){return arguments.length?this.each(e==null?Ra:(typeof e=="function"?za:Pa)(e)):this.node().innerHTML}function qa(){this.nextSibling&&this.parentNode.appendChild(this)}function Ua(){return this.each(qa)}function Ga(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xa(){return this.each(Ga)}function Ya(e){var t=typeof e=="function"?e:Pl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ja(){return null}function Wa(e,t){var n=typeof e=="function"?e:Pl(e),i=t==null?ja:typeof t=="function"?t:Di(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function xa(){var e=this.parentNode;e&&e.removeChild(this)}function Ka(){return this.each(xa)}function Za(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ja(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qa(e){return this.select(e?Ja:Za)}function $a(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eu(e){return function(t){e.call(this,t,this.__data__)}}function tu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function nu(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function iu(e,t,n){return function(){var i=this.__on,r,s=eu(t);if(i){for(var l=0,o=i.length;l<o;++l)if((r=i[l]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function ru(e,t,n){var i=tu(e+""),r,s=i.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,a=o.length,f;u<a;++u)for(r=0,f=o[u];r<s;++r)if((l=i[r]).type===f.type&&l.name===f.name)return f.value}return}for(o=t?iu:nu,r=0;r<s;++r)this.each(o(i[r],t,n));return this}function xl(e,t,n){var i=Gl(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function lu(e,t){return function(){return xl(this,e,t)}}function su(e,t){return function(){return xl(this,e,t.apply(this,arguments))}}function ou(e,t){return this.each((typeof t=="function"?su:lu)(e,t))}function*au(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,l;r<s;++r)(l=i[r])&&(yield l)}var Kl=[null];function Be(e,t){this._groups=e,this._parents=t}function Xt(){return new Be([[document.documentElement]],Kl)}function uu(){return this}Be.prototype=Xt.prototype={constructor:Be,select:Fo,selectAll:zo,selectChild:Go,selectChildren:Wo,filter:xo,data:ea,enter:Ko,exit:na,join:ia,merge:ra,selection:uu,order:la,sort:sa,call:aa,nodes:ua,node:fa,size:ca,empty:ha,each:da,attr:wa,style:Aa,property:Ca,classed:Da,text:Ha,html:Ba,raise:Ua,lower:Xa,append:Ya,insert:Wa,remove:Ka,clone:Qa,datum:$a,on:ru,dispatch:ou,[Symbol.iterator]:au};function ze(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],Kl)}function fu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function rr(e,t){if(e=fu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const ai={capture:!0,passive:!1};function ui(e){e.preventDefault(),e.stopImmediatePropagation()}function cu(e){var t=e.document.documentElement,n=ze(e).on("dragstart.drag",ui,ai);"onselectstart"in t?n.on("selectstart.drag",ui,ai):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function hu(e,t){var n=e.document.documentElement,i=ze(e).on("dragstart.drag",null);t&&(i.on("click.drag",ui,ai),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Oi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Yt(){}var zt=.7,fn=1/zt,kt="\\s*([+-]?\\d+)\\s*",Bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",du=/^#([0-9a-f]{3,8})$/,_u=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),mu=new RegExp(`^rgb\\(${Je},${Je},${Je}\\)$`),gu=new RegExp(`^rgba\\(${kt},${kt},${kt},${Bt}\\)$`),pu=new RegExp(`^rgba\\(${Je},${Je},${Je},${Bt}\\)$`),yu=new RegExp(`^hsl\\(${Bt},${Je},${Je}\\)$`),vu=new RegExp(`^hsla\\(${Bt},${Je},${Je},${Bt}\\)$`),lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oi(Yt,ct,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHex8:wu,formatHsl:bu,formatRgb:or,toString:or});function sr(){return this.rgb().formatHex()}function wu(){return this.rgb().formatHex8()}function bu(){return Jl(this).formatHsl()}function or(){return this.rgb().formatRgb()}function ct(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=du.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ar(t):n===3?new Pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?xt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?xt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_u.exec(e))?new Pe(t[1],t[2],t[3],1):(t=mu.exec(e))?new Pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gu.exec(e))?xt(t[1],t[2],t[3],t[4]):(t=pu.exec(e))?xt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yu.exec(e))?cr(t[1],t[2]/100,t[3]/100,1):(t=vu.exec(e))?cr(t[1],t[2]/100,t[3]/100,t[4]):lr.hasOwnProperty(e)?ar(lr[e]):e==="transparent"?new Pe(NaN,NaN,NaN,0):null}function ar(e){return new Pe(e>>16&255,e>>8&255,e&255,1)}function xt(e,t,n,i){return i<=0&&(e=t=n=NaN),new Pe(e,t,n,i)}function ku(e){return e instanceof Yt||(e=ct(e)),e?(e=e.rgb(),new Pe(e.r,e.g,e.b,e.opacity)):new Pe}function fi(e,t,n,i){return arguments.length===1?ku(e):new Pe(e,t,n,i==null?1:i)}function Pe(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Oi(Pe,fi,Zl(Yt,{brighter(e){return e=e==null?fn:Math.pow(fn,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zt:Math.pow(zt,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pe(ft(this.r),ft(this.g),ft(this.b),cn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ur,formatHex:ur,formatHex8:Iu,formatRgb:fr,toString:fr}));function ur(){return`#${at(this.r)}${at(this.g)}${at(this.b)}`}function Iu(){return`#${at(this.r)}${at(this.g)}${at(this.b)}${at((isNaN(this.opacity)?1:this.opacity)*255)}`}function fr(){const e=cn(this.opacity);return`${e===1?"rgb(":"rgba("}${ft(this.r)}, ${ft(this.g)}, ${ft(this.b)}${e===1?")":`, ${e})`}`}function cn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function at(e){return e=ft(e),(e<16?"0":"")+e.toString(16)}function cr(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ye(e,t,n,i)}function Jl(e){if(e instanceof Ye)return new Ye(e.h,e.s,e.l,e.opacity);if(e instanceof Yt||(e=ct(e)),!e)return new Ye;if(e instanceof Ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),l=NaN,o=s-r,u=(s+r)/2;return o?(t===s?l=(n-i)/o+(n<i)*6:n===s?l=(i-t)/o+2:l=(t-n)/o+4,o/=u<.5?s+r:2-s-r,l*=60):o=u>0&&u<1?0:l,new Ye(l,o,u,e.opacity)}function Au(e,t,n,i){return arguments.length===1?Jl(e):new Ye(e,t,n,i==null?1:i)}function Ye(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Oi(Ye,Au,Zl(Yt,{brighter(e){return e=e==null?fn:Math.pow(fn,e),new Ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zt:Math.pow(zt,e),new Ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Pe(qn(e>=240?e-240:e+120,r,i),qn(e,r,i),qn(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Ye(hr(this.h),Kt(this.s),Kt(this.l),cn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cn(this.opacity);return`${e===1?"hsl(":"hsla("}${hr(this.h)}, ${Kt(this.s)*100}%, ${Kt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hr(e){return e=(e||0)%360,e<0?e+360:e}function Kt(e){return Math.max(0,Math.min(1,e||0))}function qn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fi=e=>()=>e;function Eu(e,t){return function(n){return e+n*t}}function Su(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Mu(e){return(e=+e)==1?Ql:function(t,n){return n-t?Su(t,n,e):Fi(isNaN(t)?n:t)}}function Ql(e,t){var n=t-e;return n?Eu(e,n):Fi(isNaN(e)?t:e)}const hn=function e(t){var n=Mu(t);function i(r,s){var l=n((r=fi(r)).r,(s=fi(s)).r),o=n(r.g,s.g),u=n(r.b,s.b),a=Ql(r.opacity,s.opacity);return function(f){return r.r=l(f),r.g=o(f),r.b=u(f),r.opacity=a(f),r+""}}return i.gamma=e,i}(1);function Cu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function Nu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Lu(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),l;for(l=0;l<i;++l)r[l]=En(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(o){for(l=0;l<i;++l)s[l]=r[l](o);return s}}function Tu(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Xe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Du(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=En(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var ci=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Un=new RegExp(ci.source,"g");function Vu(e){return function(){return e}}function Ou(e){return function(t){return e(t)+""}}function $l(e,t){var n=ci.lastIndex=Un.lastIndex=0,i,r,s,l=-1,o=[],u=[];for(e=e+"",t=t+"";(i=ci.exec(e))&&(r=Un.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[l]?o[l]+=s:o[++l]=s),(i=i[0])===(r=r[0])?o[l]?o[l]+=r:o[++l]=r:(o[++l]=null,u.push({i:l,x:Xe(i,r)})),n=Un.lastIndex;return n<t.length&&(s=t.slice(n),o[l]?o[l]+=s:o[++l]=s),o.length<2?u[0]?Ou(u[0].x):Vu(t):(t=u.length,function(a){for(var f=0,h;f<t;++f)o[(h=u[f]).i]=h.x(a);return o.join("")})}function En(e,t){var n=typeof t,i;return t==null||n==="boolean"?Fi(t):(n==="number"?Xe:n==="string"?(i=ct(t))?(t=i,hn):$l:t instanceof ct?hn:t instanceof Date?Tu:Nu(t)?Cu:Array.isArray(t)?Lu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Du:Xe)(e,t)}function Fu(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var dr=180/Math.PI,hi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function es(e,t,n,i,r,s){var l,o,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,u/=o),e*i<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*dr,skewX:Math.atan(u)*dr,scaleX:l,scaleY:o}}var Zt;function Hu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?hi:es(t.a,t.b,t.c,t.d,t.e,t.f)}function Ru(e){return e==null||(Zt||(Zt=document.createElementNS("http://www.w3.org/2000/svg","g")),Zt.setAttribute("transform",e),!(e=Zt.transform.baseVal.consolidate()))?hi:(e=e.matrix,es(e.a,e.b,e.c,e.d,e.e,e.f))}function ts(e,t,n,i){function r(a){return a.length?a.pop()+" ":""}function s(a,f,h,c,d,y){if(a!==h||f!==c){var p=d.push("translate(",null,t,null,n);y.push({i:p-4,x:Xe(a,h)},{i:p-2,x:Xe(f,c)})}else(h||c)&&d.push("translate("+h+t+c+n)}function l(a,f,h,c){a!==f?(a-f>180?f+=360:f-a>180&&(a+=360),c.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Xe(a,f)})):f&&h.push(r(h)+"rotate("+f+i)}function o(a,f,h,c){a!==f?c.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Xe(a,f)}):f&&h.push(r(h)+"skewX("+f+i)}function u(a,f,h,c,d,y){if(a!==h||f!==c){var p=d.push(r(d)+"scale(",null,",",null,")");y.push({i:p-4,x:Xe(a,h)},{i:p-2,x:Xe(f,c)})}else(h!==1||c!==1)&&d.push(r(d)+"scale("+h+","+c+")")}return function(a,f){var h=[],c=[];return a=e(a),f=e(f),s(a.translateX,a.translateY,f.translateX,f.translateY,h,c),l(a.rotate,f.rotate,h,c),o(a.skewX,f.skewX,h,c),u(a.scaleX,a.scaleY,f.scaleX,f.scaleY,h,c),a=f=null,function(d){for(var y=-1,p=c.length,m;++y<p;)h[(m=c[y]).i]=m.x(d);return h.join("")}}}var Pu=ts(Hu,"px, ","px)","deg)"),zu=ts(Ru,", ",")",")"),Et=0,Ft=0,Nt=0,ns=1e3,dn,Ht,_n=0,ht=0,Sn=0,qt=typeof performance=="object"&&performance.now?performance:Date,is=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Hi(){return ht||(is(Bu),ht=qt.now()+Sn)}function Bu(){ht=0}function mn(){this._call=this._time=this._next=null}mn.prototype=rs.prototype={constructor:mn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Hi():+n)+(t==null?0:+t),!this._next&&Ht!==this&&(Ht?Ht._next=this:dn=this,Ht=this),this._call=e,this._time=n,di()},stop:function(){this._call&&(this._call=null,this._time=1/0,di())}};function rs(e,t,n){var i=new mn;return i.restart(e,t,n),i}function qu(){Hi(),++Et;for(var e=dn,t;e;)(t=ht-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Et}function _r(){ht=(_n=qt.now())+Sn,Et=Ft=0;try{qu()}finally{Et=0,Gu(),ht=0}}function Uu(){var e=qt.now(),t=e-_n;t>ns&&(Sn-=t,_n=e)}function Gu(){for(var e,t=dn,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:dn=n);Ht=e,di(i)}function di(e){if(!Et){Ft&&(Ft=clearTimeout(Ft));var t=e-ht;t>24?(e<1/0&&(Ft=setTimeout(_r,e-qt.now()-Sn)),Nt&&(Nt=clearInterval(Nt))):(Nt||(_n=qt.now(),Nt=setInterval(Uu,ns)),Et=1,is(_r))}}function mr(e,t,n){var i=new mn;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Xu=Ti("start","end","cancel","interrupt"),Yu=[],ls=0,gr=1,_i=2,rn=3,pr=4,mi=5,ln=6;function Mn(e,t,n,i,r,s){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;ju(e,n,{name:t,index:i,group:r,on:Xu,tween:Yu,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ls})}function Ri(e,t){var n=Ke(e,t);if(n.state>ls)throw new Error("too late; already scheduled");return n}function Qe(e,t){var n=Ke(e,t);if(n.state>rn)throw new Error("too late; already running");return n}function Ke(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ju(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=rs(s,0,n.time);function s(a){n.state=gr,n.timer.restart(l,n.delay,n.time),n.delay<=a&&l(a-n.delay)}function l(a){var f,h,c,d;if(n.state!==gr)return u();for(f in i)if(d=i[f],d.name===n.name){if(d.state===rn)return mr(l);d.state===pr?(d.state=ln,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[f]):+f<t&&(d.state=ln,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[f])}if(mr(function(){n.state===rn&&(n.state=pr,n.timer.restart(o,n.delay,n.time),o(a))}),n.state=_i,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_i){for(n.state=rn,r=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(d=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function o(a){for(var f=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=mi,1),h=-1,c=r.length;++h<c;)r[h].call(e,f);n.state===mi&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=ln,n.timer.stop(),delete i[t];for(var a in i)return;delete e.__transition}}function gi(e,t){var n=e.__transition,i,r,s=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((i=n[l]).name!==t){s=!1;continue}r=i.state>_i&&i.state<mi,i.state=ln,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[l]}s&&delete e.__transition}}function Wu(e){return this.each(function(){gi(this,e)})}function xu(e,t){var n,i;return function(){var r=Qe(this,e),s=r.tween;if(s!==n){i=n=s;for(var l=0,o=i.length;l<o;++l)if(i[l].name===t){i=i.slice(),i.splice(l,1);break}}r.tween=i}}function Ku(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Qe(this,e),l=s.tween;if(l!==i){r=(i=l).slice();for(var o={name:t,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===t){r[u]=o;break}u===a&&r.push(o)}s.tween=r}}function Zu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ke(this.node(),n).tween,r=0,s=i.length,l;r<s;++r)if((l=i[r]).name===e)return l.value;return null}return this.each((t==null?xu:Ku)(n,e,t))}function Pi(e,t,n){var i=e._id;return e.each(function(){var r=Qe(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ke(r,i).value[t]}}function ss(e,t){var n;return(typeof t=="number"?Xe:t instanceof ct?hn:(n=ct(t))?(t=n,hn):$l)(e,t)}function Ju(e){return function(){this.removeAttribute(e)}}function Qu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $u(e,t,n){var i,r=n+"",s;return function(){var l=this.getAttribute(e);return l===r?null:l===i?s:s=t(i=l,n)}}function ef(e,t,n){var i,r=n+"",s;return function(){var l=this.getAttributeNS(e.space,e.local);return l===r?null:l===i?s:s=t(i=l,n)}}function tf(e,t,n){var i,r,s;return function(){var l,o=n(this),u;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),u=o+"",l===u?null:l===i&&u===r?s:(r=u,s=t(i=l,o)))}}function nf(e,t,n){var i,r,s;return function(){var l,o=n(this),u;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),u=o+"",l===u?null:l===i&&u===r?s:(r=u,s=t(i=l,o)))}}function rf(e,t){var n=An(e),i=n==="transform"?zu:ss;return this.attrTween(e,typeof t=="function"?(n.local?nf:tf)(n,i,Pi(this,"attr."+e,t)):t==null?(n.local?Qu:Ju)(n):(n.local?ef:$u)(n,i,t))}function lf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function of(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&sf(e,s)),n}return r._value=t,r}function af(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&lf(e,s)),n}return r._value=t,r}function uf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=An(e);return this.tween(n,(i.local?of:af)(i,t))}function ff(e,t){return function(){Ri(this,e).delay=+t.apply(this,arguments)}}function cf(e,t){return t=+t,function(){Ri(this,e).delay=t}}function hf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ff:cf)(t,e)):Ke(this.node(),t).delay}function df(e,t){return function(){Qe(this,e).duration=+t.apply(this,arguments)}}function _f(e,t){return t=+t,function(){Qe(this,e).duration=t}}function mf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?df:_f)(t,e)):Ke(this.node(),t).duration}function gf(e,t){if(typeof t!="function")throw new Error;return function(){Qe(this,e).ease=t}}function pf(e){var t=this._id;return arguments.length?this.each(gf(t,e)):Ke(this.node(),t).ease}function yf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qe(this,e).ease=n}}function vf(e){if(typeof e!="function")throw new Error;return this.each(yf(this._id,e))}function wf(e){typeof e!="function"&&(e=Bl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],l=s.length,o=i[r]=[],u,a=0;a<l;++a)(u=s[a])&&e.call(u,u.__data__,a,s)&&o.push(u);return new nt(i,this._parents,this._name,this._id)}function bf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),l=new Array(i),o=0;o<s;++o)for(var u=t[o],a=n[o],f=u.length,h=l[o]=new Array(f),c,d=0;d<f;++d)(c=u[d]||a[d])&&(h[d]=c);for(;o<i;++o)l[o]=t[o];return new nt(l,this._parents,this._name,this._id)}function kf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function If(e,t,n){var i,r,s=kf(t)?Ri:Qe;return function(){var l=s(this,e),o=l.on;o!==i&&(r=(i=o).copy()).on(t,n),l.on=r}}function Af(e,t){var n=this._id;return arguments.length<2?Ke(this.node(),n).on.on(e):this.each(If(n,e,t))}function Ef(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Sf(){return this.on("end.remove",Ef(this._id))}function Mf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Di(e));for(var i=this._groups,r=i.length,s=new Array(r),l=0;l<r;++l)for(var o=i[l],u=o.length,a=s[l]=new Array(u),f,h,c=0;c<u;++c)(f=o[c])&&(h=e.call(f,f.__data__,c,o))&&("__data__"in f&&(h.__data__=f.__data__),a[c]=h,Mn(a[c],t,n,c,a,Ke(f,n)));return new nt(s,this._parents,t,n)}function Cf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zl(e));for(var i=this._groups,r=i.length,s=[],l=[],o=0;o<r;++o)for(var u=i[o],a=u.length,f,h=0;h<a;++h)if(f=u[h]){for(var c=e.call(f,f.__data__,h,u),d,y=Ke(f,n),p=0,m=c.length;p<m;++p)(d=c[p])&&Mn(d,t,n,p,c,y);s.push(c),l.push(f)}return new nt(s,l,t,n)}var Nf=Xt.prototype.constructor;function Lf(){return new Nf(this._groups,this._parents)}function Tf(e,t){var n,i,r;return function(){var s=At(this,e),l=(this.style.removeProperty(e),At(this,e));return s===l?null:s===n&&l===i?r:r=t(n=s,i=l)}}function os(e){return function(){this.style.removeProperty(e)}}function Df(e,t,n){var i,r=n+"",s;return function(){var l=At(this,e);return l===r?null:l===i?s:s=t(i=l,n)}}function Vf(e,t,n){var i,r,s;return function(){var l=At(this,e),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(e),At(this,e))),l===u?null:l===i&&u===r?s:(r=u,s=t(i=l,o))}}function Of(e,t){var n,i,r,s="style."+t,l="end."+s,o;return function(){var u=Qe(this,e),a=u.on,f=u.value[s]==null?o||(o=os(t)):void 0;(a!==n||r!==f)&&(i=(n=a).copy()).on(l,r=f),u.on=i}}function Ff(e,t,n){var i=(e+="")=="transform"?Pu:ss;return t==null?this.styleTween(e,Tf(e,i)).on("end.style."+e,os(e)):typeof t=="function"?this.styleTween(e,Vf(e,i,Pi(this,"style."+e,t))).each(Of(this._id,e)):this.styleTween(e,Df(e,i,t),n).on("end.style."+e,null)}function Hf(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Rf(e,t,n){var i,r;function s(){var l=t.apply(this,arguments);return l!==r&&(i=(r=l)&&Hf(e,l,n)),i}return s._value=t,s}function Pf(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Rf(e,t,n==null?"":n))}function zf(e){return function(){this.textContent=e}}function Bf(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function qf(e){return this.tween("text",typeof e=="function"?Bf(Pi(this,"text",e)):zf(e==null?"":e+""))}function Uf(e){return function(t){this.textContent=e.call(this,t)}}function Gf(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Uf(r)),t}return i._value=e,i}function Xf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gf(e))}function Yf(){for(var e=this._name,t=this._id,n=as(),i=this._groups,r=i.length,s=0;s<r;++s)for(var l=i[s],o=l.length,u,a=0;a<o;++a)if(u=l[a]){var f=Ke(u,t);Mn(u,e,n,a,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new nt(i,this._parents,e,n)}function jf(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,l){var o={value:l},u={value:function(){--r===0&&s()}};n.each(function(){var a=Qe(this,i),f=a.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(u)),a.on=t}),r===0&&s()})}var Wf=0;function nt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function as(){return++Wf}var et=Xt.prototype;nt.prototype={constructor:nt,select:Mf,selectAll:Cf,selectChild:et.selectChild,selectChildren:et.selectChildren,filter:wf,merge:bf,selection:Lf,transition:Yf,call:et.call,nodes:et.nodes,node:et.node,size:et.size,empty:et.empty,each:et.each,on:Af,attr:rf,attrTween:uf,style:Ff,styleTween:Pf,text:qf,textTween:Xf,remove:Sf,tween:Zu,delay:hf,duration:mf,ease:pf,easeVarying:vf,end:jf,[Symbol.iterator]:et[Symbol.iterator]};function xf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Kf={time:null,delay:0,duration:250,ease:xf};function Zf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Jf(e){var t,n;e instanceof nt?(t=e._id,e=e._name):(t=as(),(n=Kf).time=Hi(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var l=i[s],o=l.length,u,a=0;a<o;++a)(u=l[a])&&Mn(u,e,t,a,l,n||Zf(u,t));return new nt(i,this._parents,e,t)}Xt.prototype.interrupt=Wu;Xt.prototype.transition=Jf;const Gn=e=>()=>e;function Qf(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function $f(e){e.stopImmediatePropagation()}function Xn(e){e.preventDefault(),e.stopImmediatePropagation()}var yr={name:"drag"},Yn={name:"space"},pt={name:"handle"},yt={name:"center"};const{abs:vr,max:Le,min:Te}=Math;function wr(e){return[+e[0],+e[1]]}function br(e){return[wr(e[0]),wr(e[1])]}var sn={name:"x",handles:["w","e"].map(gn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},jn={name:"y",handles:["n","s"].map(gn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},tt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},kr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ir={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ec={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},tc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gn(e){return{type:e}}function nc(e){return!e.ctrlKey&&!e.button}function ic(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function rc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function lc(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function sc(){return oc(sn)}function oc(e){var t=ic,n=nc,i=rc,r=!0,s=Ti("start","brush","end"),l=6,o;function u(m){var b=m.property("__brush",p).selectAll(".overlay").data([gn("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",tt.overlay).merge(b).each(function(){var w=Wn(this).extent;ze(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),m.selectAll(".selection").data([gn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",tt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var C=m.selectAll(".handle").data(e.handles,function(w){return w.type});C.exit().remove(),C.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return tt[w.type]}),m.each(a).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",c).filter(i).on("touchstart.brush",c).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(m,b,C){m.tween?m.on("start.brush",function(w){f(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){f(this,arguments).end(w)}).tween("brush",function(){var w=this,v=w.__brush,S=f(w,arguments),q=v.selection,B=e.input(typeof b=="function"?b.apply(this,arguments):b,v.extent),L=En(q,B);function z(A){v.selection=A===1&&B===null?null:L(A),a.call(w),S.brush()}return q!==null&&B!==null?z:z(1)}):m.each(function(){var w=this,v=arguments,S=w.__brush,q=e.input(typeof b=="function"?b.apply(w,v):b,S.extent),B=f(w,v).beforestart();gi(w),S.selection=q===null?null:q,a.call(w),B.start(C).brush(C).end(C)})},u.clear=function(m,b){u.move(m,null,b)};function a(){var m=ze(this),b=Wn(this).selection;b?(m.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(C){return C.type[C.type.length-1]==="e"?b[1][0]-l/2:b[0][0]-l/2}).attr("y",function(C){return C.type[0]==="s"?b[1][1]-l/2:b[0][1]-l/2}).attr("width",function(C){return C.type==="n"||C.type==="s"?b[1][0]-b[0][0]+l:l}).attr("height",function(C){return C.type==="e"||C.type==="w"?b[1][1]-b[0][1]+l:l})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(m,b,C){var w=m.__brush.emitter;return w&&(!C||!w.clean)?w:new h(m,b,C)}function h(m,b,C){this.that=m,this.args=b,this.state=m.__brush,this.active=0,this.clean=C}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,b){return this.starting?(this.starting=!1,this.emit("start",m,b)):this.emit("brush",m),this},brush:function(m,b){return this.emit("brush",m,b),this},end:function(m,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,b)),this},emit:function(m,b,C){var w=ze(this.that).datum();s.call(m,this.that,new Qf(m,{sourceEvent:b,target:u,selection:e.output(this.state.selection),mode:C,dispatch:s}),w)}};function c(m){if(o&&!m.touches||!n.apply(this,arguments))return;var b=this,C=m.target.__data__.type,w=(r&&m.metaKey?C="overlay":C)==="selection"?yr:r&&m.altKey?yt:pt,v=e===jn?null:ec[C],S=e===sn?null:tc[C],q=Wn(b),B=q.extent,L=q.selection,z=B[0][0],A,k,T=B[0][1],F,H,E=B[1][0],N,W,re=B[1][1],D,G,J=0,M=0,Y,ae=v&&S&&r&&m.shiftKey,he,ce,oe=Array.from(m.touches||[m],j=>{const se=j.identifier;return j=rr(j,b),j.point0=j.slice(),j.identifier=se,j});gi(b);var V=f(b,arguments,!0).beforestart();if(C==="overlay"){L&&(Y=!0);const j=[oe[0],oe[1]||oe[0]];q.selection=L=[[A=e===jn?z:Te(j[0][0],j[1][0]),F=e===sn?T:Te(j[0][1],j[1][1])],[N=e===jn?E:Le(j[0][0],j[1][0]),D=e===sn?re:Le(j[0][1],j[1][1])]],oe.length>1&&X(m)}else A=L[0][0],F=L[0][1],N=L[1][0],D=L[1][1];k=A,H=F,W=N,G=D;var x=ze(b).attr("pointer-events","none"),fe=x.selectAll(".overlay").attr("cursor",tt[C]);if(m.touches)V.moved=O,V.ended=ie;else{var Ae=ze(m.view).on("mousemove.brush",O,!0).on("mouseup.brush",ie,!0);r&&Ae.on("keydown.brush",Ee,!0).on("keyup.brush",Ne,!0),cu(m.view)}a.call(b),V.start(m,w.name);function O(j){for(const se of j.changedTouches||[j])for(const Ge of oe)Ge.identifier===se.identifier&&(Ge.cur=rr(se,b));if(ae&&!he&&!ce&&oe.length===1){const se=oe[0];vr(se.cur[0]-se[0])>vr(se.cur[1]-se[1])?ce=!0:he=!0}for(const se of oe)se.cur&&(se[0]=se.cur[0],se[1]=se.cur[1]);Y=!0,Xn(j),X(j)}function X(j){const se=oe[0],Ge=se.point0;var Se;switch(J=se[0]-Ge[0],M=se[1]-Ge[1],w){case Yn:case yr:{v&&(J=Le(z-A,Te(E-N,J)),k=A+J,W=N+J),S&&(M=Le(T-F,Te(re-D,M)),H=F+M,G=D+M);break}case pt:{oe[1]?(v&&(k=Le(z,Te(E,oe[0][0])),W=Le(z,Te(E,oe[1][0])),v=1),S&&(H=Le(T,Te(re,oe[0][1])),G=Le(T,Te(re,oe[1][1])),S=1)):(v<0?(J=Le(z-A,Te(E-A,J)),k=A+J,W=N):v>0&&(J=Le(z-N,Te(E-N,J)),k=A,W=N+J),S<0?(M=Le(T-F,Te(re-F,M)),H=F+M,G=D):S>0&&(M=Le(T-D,Te(re-D,M)),H=F,G=D+M));break}case yt:{v&&(k=Le(z,Te(E,A-J*v)),W=Le(z,Te(E,N+J*v))),S&&(H=Le(T,Te(re,F-M*S)),G=Le(T,Te(re,D+M*S)));break}}W<k&&(v*=-1,Se=A,A=N,N=Se,Se=k,k=W,W=Se,C in kr&&fe.attr("cursor",tt[C=kr[C]])),G<H&&(S*=-1,Se=F,F=D,D=Se,Se=H,H=G,G=Se,C in Ir&&fe.attr("cursor",tt[C=Ir[C]])),q.selection&&(L=q.selection),he&&(k=L[0][0],W=L[1][0]),ce&&(H=L[0][1],G=L[1][1]),(L[0][0]!==k||L[0][1]!==H||L[1][0]!==W||L[1][1]!==G)&&(q.selection=[[k,H],[W,G]],a.call(b),V.brush(j,w.name))}function ie(j){if($f(j),j.touches){if(j.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else hu(j.view,Y),Ae.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);x.attr("pointer-events","all"),fe.attr("cursor",tt.overlay),q.selection&&(L=q.selection),lc(L)&&(q.selection=null,a.call(b)),V.end(j,w.name)}function Ee(j){switch(j.keyCode){case 16:{ae=v&&S;break}case 18:{w===pt&&(v&&(N=W-J*v,A=k+J*v),S&&(D=G-M*S,F=H+M*S),w=yt,X(j));break}case 32:{(w===pt||w===yt)&&(v<0?N=W-J:v>0&&(A=k-J),S<0?D=G-M:S>0&&(F=H-M),w=Yn,fe.attr("cursor",tt.selection),X(j));break}default:return}Xn(j)}function Ne(j){switch(j.keyCode){case 16:{ae&&(he=ce=ae=!1,X(j));break}case 18:{w===yt&&(v<0?N=W:v>0&&(A=k),S<0?D=G:S>0&&(F=H),w=pt,X(j));break}case 32:{w===Yn&&(j.altKey?(v&&(N=W-J*v,A=k+J*v),S&&(D=G-M*S,F=H+M*S),w=yt):(v<0?N=W:v>0&&(A=k),S<0?D=G:S>0&&(F=H),w=pt),fe.attr("cursor",tt[C]),X(j));break}default:return}Xn(j)}}function d(m){f(this,arguments).moved(m)}function y(m){f(this,arguments).ended(m)}function p(){var m=this.__brush||{selection:null};return m.extent=br(t.apply(this,arguments)),m.dim=e,m}return u.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Gn(br(m)),u):t},u.filter=function(m){return arguments.length?(n=typeof m=="function"?m:Gn(!!m),u):n},u.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Gn(!!m),u):i},u.handleSize=function(m){return arguments.length?(l=+m,u):l},u.keyModifiers=function(m){return arguments.length?(r=!!m,u):r},u.on=function(){var m=s.on.apply(s,arguments);return m===s?u:m},u}const pi=Math.PI,yi=2*pi,ot=1e-6,ac=yi-ot;function vi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function wi(){return new vi}vi.prototype=wi.prototype={constructor:vi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var s=this._x1,l=this._y1,o=n-e,u=i-t,a=s-e,f=l-t,h=a*a+f*f;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>ot)if(!(Math.abs(f*o-u*a)>ot)||!r)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var c=n-s,d=i-l,y=o*o+u*u,p=c*c+d*d,m=Math.sqrt(y),b=Math.sqrt(h),C=r*Math.tan((pi-Math.acos((y+h-p)/(2*m*b)))/2),w=C/b,v=C/m;Math.abs(w-1)>ot&&(this._+="L"+(e+w*a)+","+(t+w*f)),this._+="A"+r+","+r+",0,0,"+ +(f*c>a*d)+","+(this._x1=e+v*o)+","+(this._y1=t+v*u)}},arc:function(e,t,n,i,r,s){e=+e,t=+t,n=+n,s=!!s;var l=n*Math.cos(i),o=n*Math.sin(i),u=e+l,a=t+o,f=1^s,h=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+a:(Math.abs(this._x1-u)>ot||Math.abs(this._y1-a)>ot)&&(this._+="L"+u+","+a),n&&(h<0&&(h=h%yi+yi),h>ac?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-o)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=a):h>ot&&(this._+="A"+n+","+n+",0,"+ +(h>=pi)+","+f+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Ar={},xn={},Kn=34,Lt=10,Zn=13;function us(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function uc(e,t){var n=us(e);return function(i,r){return t(n(i),r,e)}}function Er(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Ve(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function fc(e){return e<0?"-"+Ve(-e,6):e>9999?"+"+Ve(e,6):Ve(e,4)}function cc(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":fc(e.getUTCFullYear())+"-"+Ve(e.getUTCMonth()+1,2)+"-"+Ve(e.getUTCDate(),2)+(r?"T"+Ve(t,2)+":"+Ve(n,2)+":"+Ve(i,2)+"."+Ve(r,3)+"Z":i?"T"+Ve(t,2)+":"+Ve(n,2)+":"+Ve(i,2)+"Z":n||t?"T"+Ve(t,2)+":"+Ve(n,2)+"Z":"")}function hc(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,c){var d,y,p=r(h,function(m,b){if(d)return d(m,b-1);y=m,d=c?uc(m,c):us(m)});return p.columns=y||[],p}function r(h,c){var d=[],y=h.length,p=0,m=0,b,C=y<=0,w=!1;h.charCodeAt(y-1)===Lt&&--y,h.charCodeAt(y-1)===Zn&&--y;function v(){if(C)return xn;if(w)return w=!1,Ar;var q,B=p,L;if(h.charCodeAt(B)===Kn){for(;p++<y&&h.charCodeAt(p)!==Kn||h.charCodeAt(++p)===Kn;);return(q=p)>=y?C=!0:(L=h.charCodeAt(p++))===Lt?w=!0:L===Zn&&(w=!0,h.charCodeAt(p)===Lt&&++p),h.slice(B+1,q-1).replace(/""/g,'"')}for(;p<y;){if((L=h.charCodeAt(q=p++))===Lt)w=!0;else if(L===Zn)w=!0,h.charCodeAt(p)===Lt&&++p;else if(L!==n)continue;return h.slice(B,q)}return C=!0,h.slice(B,y)}for(;(b=v())!==xn;){for(var S=[];b!==Ar&&b!==xn;)S.push(b),b=v();c&&(S=c(S,m++))==null||d.push(S)}return d}function s(h,c){return h.map(function(d){return c.map(function(y){return f(d[y])}).join(e)})}function l(h,c){return c==null&&(c=Er(h)),[c.map(f).join(e)].concat(s(h,c)).join(`
`)}function o(h,c){return c==null&&(c=Er(h)),s(h,c).join(`
`)}function u(h){return h.map(a).join(`
`)}function a(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?cc(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:l,formatBody:o,formatRows:u,formatRow:a,formatValue:f}}var dc=hc(","),_c=dc.parse;function mc(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function gc(e,t){return fetch(e,t).then(mc)}function pc(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),gc(t,n).then(function(r){return e(r,i)})}}var Jt=pc(_c);function yc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function St(e){return e=pn(Math.abs(e)),e?e[1]:NaN}function vc(e,t){return function(n,i){for(var r=n.length,s=[],l=0,o=e[0],u=0;r>0&&o>0&&(u+o+1>i&&(o=Math.max(1,i-u)),s.push(n.substring(r-=o,r+o)),!((u+=o+1)>i));)o=e[l=(l+1)%e.length];return s.reverse().join(t)}}function wc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var bc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yn(e){if(!(t=bc.exec(e)))throw new Error("invalid format: "+e);var t;return new zi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}yn.prototype=zi.prototype;function zi(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kc(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var fs;function Ic(e,t){var n=pn(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(fs=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,l=i.length;return s===l?i:s>l?i+new Array(s-l+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+pn(e,Math.max(0,t+s-1))[0]}function Sr(e,t){var n=pn(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Mr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:yc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sr(e*100,t),r:Sr,s:Ic,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cr(e){return e}var Nr=Array.prototype.map,Lr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ac(e){var t=e.grouping===void 0||e.thousands===void 0?Cr:vc(Nr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Cr:wc(Nr.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function a(h){h=yn(h);var c=h.fill,d=h.align,y=h.sign,p=h.symbol,m=h.zero,b=h.width,C=h.comma,w=h.precision,v=h.trim,S=h.type;S==="n"?(C=!0,S="g"):Mr[S]||(w===void 0&&(w=12),v=!0,S="g"),(m||c==="0"&&d==="=")&&(m=!0,c="0",d="=");var q=p==="$"?n:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",B=p==="$"?i:/[%p]/.test(S)?l:"",L=Mr[S],z=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function A(k){var T=q,F=B,H,E,N;if(S==="c")F=L(k)+F,k="";else{k=+k;var W=k<0||1/k<0;if(k=isNaN(k)?u:L(Math.abs(k),w),v&&(k=kc(k)),W&&+k==0&&y!=="+"&&(W=!1),T=(W?y==="("?y:o:y==="-"||y==="("?"":y)+T,F=(S==="s"?Lr[8+fs/3]:"")+F+(W&&y==="("?")":""),z){for(H=-1,E=k.length;++H<E;)if(N=k.charCodeAt(H),48>N||N>57){F=(N===46?r+k.slice(H+1):k.slice(H))+F,k=k.slice(0,H);break}}}C&&!m&&(k=t(k,1/0));var re=T.length+k.length+F.length,D=re<b?new Array(b-re+1).join(c):"";switch(C&&m&&(k=t(D+k,D.length?b-F.length:1/0),D=""),d){case"<":k=T+k+F+D;break;case"=":k=T+D+k+F;break;case"^":k=D.slice(0,re=D.length>>1)+T+k+F+D.slice(re);break;default:k=D+T+k+F;break}return s(k)}return A.toString=function(){return h+""},A}function f(h,c){var d=a((h=yn(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(St(c)/3)))*3,p=Math.pow(10,-y),m=Lr[8+y/3];return function(b){return d(p*b)+m}}return{format:a,formatPrefix:f}}var Qt,Mt,cs;Ec({thousands:",",grouping:[3],currency:["$",""]});function Ec(e){return Qt=Ac(e),Mt=Qt.format,cs=Qt.formatPrefix,Qt}function Sc(e){return Math.max(0,-St(Math.abs(e)))}function Mc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(St(t)/3)))*3-St(Math.abs(e)))}function Cc(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,St(t)-St(e))+1}function Nc(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Lc(){return this.eachAfter(Nc)}function Tc(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Dc(e,t){for(var n=this,i=[n],r,s,l=-1;n=i.pop();)if(e.call(t,n,++l,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function Vc(e,t){for(var n=this,i=[n],r=[],s,l,o,u=-1;n=i.pop();)if(r.push(n),s=n.children)for(l=0,o=s.length;l<o;++l)i.push(s[l]);for(;n=r.pop();)e.call(t,n,++u,this);return this}function Oc(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Fc(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Hc(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Rc(e){for(var t=this,n=Pc(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Pc(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function zc(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Bc(){return Array.from(this)}function qc(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Uc(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Gc(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function hs(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=jc)):t===void 0&&(t=Yc);for(var n=new Ut(e),i,r=[n],s,l,o,u;i=r.pop();)if((l=t(i.data))&&(u=(l=Array.from(l)).length))for(i.children=l,o=u-1;o>=0;--o)r.push(s=l[o]=new Ut(l[o])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(ds)}function Xc(){return hs(this).eachBefore(Wc)}function Yc(e){return e.children}function jc(e){return Array.isArray(e)?e[1]:null}function Wc(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function ds(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ut(e){this.data=e,this.depth=this.height=0,this.parent=null}Ut.prototype=hs.prototype={constructor:Ut,count:Lc,each:Tc,eachAfter:Vc,eachBefore:Dc,find:Oc,sum:Fc,sort:Hc,path:Rc,ancestors:zc,descendants:Bc,leaves:qc,links:Uc,copy:Xc,[Symbol.iterator]:Gc};function Jn(e){return e==null?null:_s(e)}function _s(e){if(typeof e!="function")throw new Error;return e}function Tt(){return 0}function Dt(e){return function(){return e}}function xc(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ms(e,t,n,i,r){for(var s=e.children,l,o=-1,u=s.length,a=e.value&&(i-t)/e.value;++o<u;)l=s[o],l.y0=n,l.y1=r,l.x0=t,l.x1=t+=l.value*a}var Kc={depth:-1},Tr={},Qn={};function Zc(e){return e.id}function Jc(e){return e.parentId}function Qc(){var e=Zc,t=Jc,n;function i(r){var s=Array.from(r),l=e,o=t,u,a,f,h,c,d,y,p,m=new Map;if(n!=null){const b=s.map((v,S)=>$c(n(v,S,r))),C=b.map(Dr),w=new Set(b).add("");for(const v of C)w.has(v)||(w.add(v),b.push(v),C.push(Dr(v)),s.push(Qn));l=(v,S)=>b[S],o=(v,S)=>C[S]}for(f=0,u=s.length;f<u;++f)a=s[f],d=s[f]=new Ut(a),(y=l(a,f,r))!=null&&(y+="")&&(p=d.id=y,m.set(p,m.has(p)?Tr:d)),(y=o(a,f,r))!=null&&(y+="")&&(d.parent=y);for(f=0;f<u;++f)if(d=s[f],y=d.parent){if(c=m.get(y),!c)throw new Error("missing: "+y);if(c===Tr)throw new Error("ambiguous: "+y);c.children?c.children.push(d):c.children=[d],d.parent=c}else{if(h)throw new Error("multiple roots");h=d}if(!h)throw new Error("no root");if(n!=null){for(;h.data===Qn&&h.children.length===1;)h=h.children[0],--u;for(let b=s.length-1;b>=0&&(d=s[b],d.data===Qn);--b)d.data=null}if(h.parent=Kc,h.eachBefore(function(b){b.depth=b.parent.depth+1,--u}).eachBefore(ds),h.parent=null,u>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=Jn(r),i):e},i.parentId=function(r){return arguments.length?(t=Jn(r),i):t},i.path=function(r){return arguments.length?(n=Jn(r),i):n},i}function $c(e){e=`${e}`;let t=e.length;return bi(e,t-1)&&!bi(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Dr(e){let t=e.length;if(t<2)return"";for(;--t>1&&!bi(e,t););return e.slice(0,t)}function bi(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function gs(e,t,n,i,r){for(var s=e.children,l,o=-1,u=s.length,a=e.value&&(r-n)/e.value;++o<u;)l=s[o],l.x0=t,l.x1=i,l.y0=n,l.y1=n+=l.value*a}var ps=(1+Math.sqrt(5))/2;function ys(e,t,n,i,r,s){for(var l=[],o=t.children,u,a,f=0,h=0,c=o.length,d,y,p=t.value,m,b,C,w,v,S,q;f<c;){d=r-n,y=s-i;do m=o[h++].value;while(!m&&h<c);for(b=C=m,S=Math.max(y/d,d/y)/(p*e),q=m*m*S,v=Math.max(C/q,q/b);h<c;++h){if(m+=a=o[h].value,a<b&&(b=a),a>C&&(C=a),q=m*m*S,w=Math.max(C/q,q/b),w>v){m-=a;break}v=w}l.push(u={value:m,dice:d<y,children:o.slice(f,h)}),u.dice?ms(u,n,i,r,p?i+=y*m/p:s):gs(u,n,i,p?n+=d*m/p:r,s),p-=m,f=h}return l}const eh=function e(t){function n(i,r,s,l,o){ys(t,i,r,s,l,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(ps);function th(){var e=eh,t=!1,n=1,i=1,r=[0],s=Tt,l=Tt,o=Tt,u=Tt,a=Tt;function f(c){return c.x0=c.y0=0,c.x1=n,c.y1=i,c.eachBefore(h),r=[0],t&&c.eachBefore(xc),c}function h(c){var d=r[c.depth],y=c.x0+d,p=c.y0+d,m=c.x1-d,b=c.y1-d;m<y&&(y=m=(y+m)/2),b<p&&(p=b=(p+b)/2),c.x0=y,c.y0=p,c.x1=m,c.y1=b,c.children&&(d=r[c.depth+1]=s(c)/2,y+=a(c)-d,p+=l(c)-d,m-=o(c)-d,b-=u(c)-d,m<y&&(y=m=(y+m)/2),b<p&&(p=b=(p+b)/2),e(c,y,p,m,b))}return f.round=function(c){return arguments.length?(t=!!c,f):t},f.size=function(c){return arguments.length?(n=+c[0],i=+c[1],f):[n,i]},f.tile=function(c){return arguments.length?(e=_s(c),f):e},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(s=typeof c=="function"?c:Dt(+c),f):s},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(l=typeof c=="function"?c:Dt(+c),f):l},f.paddingRight=function(c){return arguments.length?(o=typeof c=="function"?c:Dt(+c),f):o},f.paddingBottom=function(c){return arguments.length?(u=typeof c=="function"?c:Dt(+c),f):u},f.paddingLeft=function(c){return arguments.length?(a=typeof c=="function"?c:Dt(+c),f):a},f}const nh=function e(t){function n(i,r,s,l,o){if((u=i._squarify)&&u.ratio===t)for(var u,a,f,h,c=-1,d,y=u.length,p=i.value;++c<y;){for(a=u[c],f=a.children,h=a.value=0,d=f.length;h<d;++h)a.value+=f[h].value;a.dice?ms(a,r,s,l,p?s+=(o-s)*a.value/p:o):gs(a,r,s,p?r+=(l-r)*a.value/p:l,o),p-=a.value}else i._squarify=u=ys(t,i,r,s,l,o),u.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(ps);function vs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Vr=Symbol("implicit");function ki(){var e=new ei,t=[],n=[],i=Vr;function r(s){let l=e.get(s);if(l===void 0){if(i!==Vr)return i;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ei;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return ki(t,n).unknown(i)},vs.apply(r,arguments),r}function ih(e){return function(){return e}}function rh(e){return+e}var Or=[0,1];function vt(e){return e}function Ii(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ih(isNaN(t)?NaN:.5)}function lh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function sh(e,t,n){var i=e[0],r=e[1],s=t[0],l=t[1];return r<i?(i=Ii(r,i),s=n(l,s)):(i=Ii(i,r),s=n(s,l)),function(o){return s(i(o))}}function oh(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),l=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<i;)r[l]=Ii(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(o){var u=mo(e,o,1,i)-1;return s[u](r[u](o))}}function ah(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uh(){var e=Or,t=Or,n=En,i,r,s,l=vt,o,u,a;function f(){var c=Math.min(e.length,t.length);return l!==vt&&(l=lh(e[0],e[c-1])),o=c>2?oh:sh,u=a=null,h}function h(c){return c==null||isNaN(c=+c)?s:(u||(u=o(e.map(i),t,n)))(i(l(c)))}return h.invert=function(c){return l(r((a||(a=o(t,e.map(i),Xe)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,rh),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=Fu,f()},h.clamp=function(c){return arguments.length?(l=c?!0:vt,f()):l!==vt},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(s=c,h):s},function(c,d){return i=c,r=d,f()}}function fh(){return uh()(vt,vt)}function ch(e,t,n,i){var r=bo(e,t,n),s;switch(i=yn(i==null?",f":i),i.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=Mc(r,l))&&(i.precision=s),cs(i,l)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Cc(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Sc(r))&&(i.precision=s-(i.type==="%")*2);break}}return Mt(i)}function hh(e){var t=e.domain;return e.ticks=function(n){var i=t();return wo(i[0],i[i.length-1],n==null?10:n)},e.tickFormat=function(n,i){var r=t();return ch(r[0],r[r.length-1],n==null?10:n,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,l=i[r],o=i[s],u,a,f=10;for(o<l&&(a=l,l=o,o=a,a=r,r=s,s=a);f-- >0;){if(a=Fl(l,o,n),a===u)return i[r]=l,i[s]=o,t(i);if(a>0)l=Math.floor(l/a)*a,o=Math.ceil(o/a)*a;else if(a<0)l=Math.ceil(l*a)/a,o=Math.floor(o*a)/a;else break;u=a}return e},e}function vn(){var e=fh();return e.copy=function(){return ah(e,vn())},vs.apply(e,arguments),hh(e)}function dh(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Fr=dh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function wt(e,t,n){this.k=e,this.x=t,this.y=n}wt.prototype={constructor:wt,scale:function(e){return e===1?this:new wt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new wt(1,0,0);wt.prototype;const bt=Tl([2020]),Rt=Tl(new Set);class _h{constructor(t){Ie(this,"id");Ie(this,"code");Ie(this,"name");Ie(this,"level");this.id=+t.location_id,this.code=t.location_code,this.name=t.location_name_short_en,this.level=t.level}}class on{constructor(t){Ie(this,"id");Ie(this,"code");Ie(this,"name");Ie(this,"level");Ie(this,"parent_id");Ie(this,"parent");this.id=+t.product_id,this.code=+t.hs_product_code,this.name=t.hs_product_name_short_en,this.level=t.level,this.parent_id=+t.parent_id,this.parent=null}}class it{constructor(t,n,i){Ie(this,"location_id");Ie(this,"location");Ie(this,"partner_id");Ie(this,"partner");Ie(this,"product_id");Ie(this,"product");Ie(this,"year");Ie(this,"export_value");Ie(this,"import_value");this.location_id=+i.location_id,this.location=t.get(this.location_id),this.partner_id=+i.partner_id,this.partner=t.get(this.partner_id),this.product_id=+i.product_id,this.product=n.get(this.product_id),this.year=+i.year,this.export_value=+i.export_value,this.import_value=+i.import_value}}function mh(e,t){const n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r={};return r.top=n.top<0,r.left=n.left<0,r.bottom=n.bottom+i.height>(window.innerHeight||document.documentElement.clientHeight),r.right=n.right>(window.innerWidth||document.documentElement.clientWidth),r.any=r.top||r.left||r.bottom||r.right,r}function gh(e){let t,n=e[0](e[1],e[2])+"",i;return{c(){t=ee("div"),this.h()},l(r){t=te(r,"DIV",{class:!0});var s=P(t);s.forEach(I),this.h()},h(){_(t,"class",i="item "+e[3]+" svelte-3e0qet")},m(r,s){U(r,t,s),t.innerHTML=n},p(r,[s]){s&7&&n!==(n=r[0](r[1],r[2])+"")&&(t.innerHTML=n),s&8&&i!==(i="item "+r[3]+" svelte-3e0qet")&&_(t,"class",i)},i:ve,o:ve,d(r){r&&I(t)}}}function ph(e,t,n){let{isActive:i=!1}=t,{isFirst:r=!1}=t,{isHover:s=!1}=t,{isSelectable:l=!1}=t,{getOptionLabel:o=void 0}=t,{item:u=void 0}=t,{filterText:a=""}=t,f="";return e.$$set=h=>{"isActive"in h&&n(4,i=h.isActive),"isFirst"in h&&n(5,r=h.isFirst),"isHover"in h&&n(6,s=h.isHover),"isSelectable"in h&&n(7,l=h.isSelectable),"getOptionLabel"in h&&n(0,o=h.getOptionLabel),"item"in h&&n(1,u=h.item),"filterText"in h&&n(2,a=h.filterText)},e.$$.update=()=>{if(e.$$.dirty&242){const h=[];i&&h.push("active"),r&&h.push("first"),s&&h.push("hover"),u.isGroupHeader&&h.push("groupHeader"),u.isGroupItem&&h.push("groupItem"),l||h.push("notSelectable"),n(3,f=h.join(" "))}},[o,u,a,f,i,r,s,l]}class ws extends je{constructor(t){super(),We(this,t,ph,gh,xe,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Hr(e,t,n){const i=e.slice();return i[41]=t[n],i[42]=n,i}function yh(e){let t,n,i=e[1],r=[];for(let o=0;o<i.length;o+=1)r[o]=zr(Hr(e,i,o));const s=o=>ne(r[o],1,1,()=>{r[o]=null});let l=null;return i.length||(l=Rr(e)),{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=le(),l&&l.c()},l(o){for(let u=0;u<r.length;u+=1)r[u].l(o);t=le(),l&&l.l(o)},m(o,u){for(let a=0;a<r.length;a+=1)r[a].m(o,u);U(o,t,u),l&&l.m(o,u),n=!0},p(o,u){if(u[0]&114390){i=o[1];let a;for(a=0;a<i.length;a+=1){const f=Hr(o,i,a);r[a]?(r[a].p(f,u),Z(r[a],1)):(r[a]=zr(f),r[a].c(),Z(r[a],1),r[a].m(t.parentNode,t))}for(Me(),a=i.length;a<r.length;a+=1)s(a);Ce(),!i.length&&l?l.p(o,u):i.length?l&&(l.d(1),l=null):(l=Rr(o),l.c(),l.m(t.parentNode,t))}},i(o){if(!n){for(let u=0;u<i.length;u+=1)Z(r[u]);n=!0}},o(o){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)ne(r[u]);n=!1},d(o){Si(r,o),o&&I(t),l&&l.d(o)}}}function vh(e){let t,n,i;var r=e[3];function s(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[kh,({item:o,i:u})=>({41:o,42:u}),({item:o,i:u})=>[0,(o?1024:0)|(u?2048:0)]]},$$scope:{ctx:l}}}}return r&&(t=De(r,s(e))),{c(){t&&we(t.$$.fragment),n=le()},l(l){t&&Oe(t.$$.fragment,l),n=le()},m(l,o){t&&be(t,l,o),U(l,n,o),i=!0},p(l,o){const u={};if(o[0]&2&&(u.items=l[1]),o[0]&256&&(u.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(u.$$scope={dirty:o,ctx:l}),r!==(r=l[3])){if(t){Me();const a=t;ne(a.$$.fragment,1,0,()=>{ke(a,1)}),Ce()}r?(t=De(r,s(l)),we(t.$$.fragment),Z(t.$$.fragment,1),be(t,n.parentNode,n)):t=null}else r&&t.$set(u)},i(l){i||(t&&Z(t.$$.fragment,l),i=!0)},o(l){t&&ne(t.$$.fragment,l),i=!1},d(l){l&&I(n),t&&ke(t,l)}}}function Rr(e){let t,n=!e[11]&&Pr(e);return{c(){n&&n.c(),t=le()},l(i){n&&n.l(i),t=le()},m(i,r){n&&n.m(i,r),U(i,t,r)},p(i,r){i[11]?n&&(n.d(1),n=null):n?n.p(i,r):(n=Pr(i),n.c(),n.m(t.parentNode,t))},d(i){n&&n.d(i),i&&I(t)}}}function Pr(e){let t,n;return{c(){t=ee("div"),n=ge(e[12]),this.h()},l(i){t=te(i,"DIV",{class:!0});var r=P(t);n=pe(r,e[12]),r.forEach(I),this.h()},h(){_(t,"class","empty svelte-1uyqfml")},m(i,r){U(i,t,r),R(t,n)},p(i,r){r[0]&4096&&Fe(n,i[12])},d(i){i&&I(t)}}}function wh(e){let t,n,i,r,s,l;var o=e[4];function u(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:Ai(c[42]),isActive:wn(c[41],c[9],c[10]),isHover:bn(c[2],c[41],c[42],c[1]),isSelectable:dt(c[41])}}}o&&(n=De(o,u(e)));function a(){return e[29](e[42])}function f(){return e[30](e[42])}function h(...c){return e[31](e[41],e[42],...c)}return{c(){t=ee("div"),n&&we(n.$$.fragment),i=_e(),this.h()},l(c){t=te(c,"DIV",{class:!0,tabindex:!0});var d=P(t);n&&Oe(n.$$.fragment,d),i=me(d),d.forEach(I),this.h()},h(){_(t,"class","listItem"),_(t,"tabindex","-1")},m(c,d){U(c,t,d),n&&be(n,t,null),R(t,i),r=!0,s||(l=[ue(t,"mouseover",a),ue(t,"focus",f),ue(t,"click",h)],s=!0)},p(c,d){e=c;const y={};if(d[0]&2&&(y.item=e[41]),d[0]&8192&&(y.filterText=e[13]),d[0]&64&&(y.getOptionLabel=e[6]),d[0]&1538&&(y.isActive=wn(e[41],e[9],e[10])),d[0]&6&&(y.isHover=bn(e[2],e[41],e[42],e[1])),d[0]&2&&(y.isSelectable=dt(e[41])),o!==(o=e[4])){if(n){Me();const p=n;ne(p.$$.fragment,1,0,()=>{ke(p,1)}),Ce()}o?(n=De(o,u(e)),we(n.$$.fragment),Z(n.$$.fragment,1),be(n,t,i)):n=null}else o&&n.$set(y)},i(c){r||(n&&Z(n.$$.fragment,c),r=!0)},o(c){n&&ne(n.$$.fragment,c),r=!1},d(c){c&&I(t),n&&ke(n),s=!1,lt(l)}}}function bh(e){let t,n=e[7](e[41])+"",i;return{c(){t=ee("div"),i=ge(n),this.h()},l(r){t=te(r,"DIV",{class:!0});var s=P(t);i=pe(s,n),s.forEach(I),this.h()},h(){_(t,"class","listGroupTitle svelte-1uyqfml")},m(r,s){U(r,t,s),R(t,i)},p(r,s){s[0]&130&&n!==(n=r[7](r[41])+"")&&Fe(i,n)},i:ve,o:ve,d(r){r&&I(t)}}}function zr(e){let t,n,i,r;const s=[bh,wh],l=[];function o(u,a){return u[41].isGroupHeader&&!u[41].isSelectable?0:1}return t=o(e),n=l[t]=s[t](e),{c(){n.c(),i=le()},l(u){n.l(u),i=le()},m(u,a){l[t].m(u,a),U(u,i,a),r=!0},p(u,a){let f=t;t=o(u),t===f?l[t].p(u,a):(Me(),ne(l[f],1,1,()=>{l[f]=null}),Ce(),n=l[t],n?n.p(u,a):(n=l[t]=s[t](u),n.c()),Z(n,1),n.m(i.parentNode,i))},i(u){r||(Z(n),r=!0)},o(u){ne(n),r=!1},d(u){l[t].d(u),u&&I(i)}}}function kh(e){let t,n,i,r,s;var l=e[4];function o(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:Ai(h[42]),isActive:wn(h[41],h[9],h[10]),isHover:bn(h[2],h[41],h[42],h[1]),isSelectable:dt(h[41])}}}l&&(n=De(l,o(e)));function u(){return e[26](e[42])}function a(){return e[27](e[42])}function f(...h){return e[28](e[41],e[42],...h)}return{c(){t=ee("div"),n&&we(n.$$.fragment),this.h()},l(h){t=te(h,"DIV",{class:!0});var c=P(t);n&&Oe(n.$$.fragment,c),c.forEach(I),this.h()},h(){_(t,"class","listItem")},m(h,c){U(h,t,c),n&&be(n,t,null),i=!0,r||(s=[ue(t,"mouseover",u),ue(t,"focus",a),ue(t,"click",f)],r=!0)},p(h,c){e=h;const d={};if(c[1]&1024&&(d.item=e[41]),c[0]&8192&&(d.filterText=e[13]),c[0]&64&&(d.getOptionLabel=e[6]),c[1]&2048&&(d.isFirst=Ai(e[42])),c[0]&1536|c[1]&1024&&(d.isActive=wn(e[41],e[9],e[10])),c[0]&6|c[1]&3072&&(d.isHover=bn(e[2],e[41],e[42],e[1])),c[1]&1024&&(d.isSelectable=dt(e[41])),l!==(l=e[4])){if(n){Me();const y=n;ne(y.$$.fragment,1,0,()=>{ke(y,1)}),Ce()}l?(n=De(l,o(e)),we(n.$$.fragment),Z(n.$$.fragment,1),be(n,t,null)):n=null}else l&&n.$set(d)},i(h){i||(n&&Z(n.$$.fragment,h),i=!0)},o(h){n&&ne(n.$$.fragment,h),i=!1},d(h){h&&I(t),n&&ke(n),r=!1,lt(s)}}}function Ih(e){let t,n,i,r,s,l;const o=[vh,yh],u=[];function a(f,h){return f[5]?0:1}return n=a(e),i=u[n]=o[n](e),{c(){t=ee("div"),i.c(),this.h()},l(f){t=te(f,"DIV",{class:!0,style:!0});var h=P(t);i.l(h),h.forEach(I),this.h()},h(){_(t,"class","listContainer svelte-1uyqfml"),_(t,"style",e[14]),Ue(t,"virtualList",e[5])},m(f,h){U(f,t,h),u[n].m(t,null),e[32](t),r=!0,s||(l=[ue(window,"keydown",e[17]),ue(window,"resize",e[18])],s=!0)},p(f,h){let c=n;n=a(f),n===c?u[n].p(f,h):(Me(),ne(u[c],1,1,()=>{u[c]=null}),Ce(),i=u[n],i?i.p(f,h):(i=u[n]=o[n](f),i.c()),Z(i,1),i.m(t,null)),(!r||h[0]&16384)&&_(t,"style",f[14]),(!r||h[0]&32)&&Ue(t,"virtualList",f[5])},i(f){r||(Z(i),r=!0)},o(f){ne(i),r=!1},d(f){f&&I(t),u[n].d(),e[32](null),s=!1,lt(l)}}}function wn(e,t,n){return t&&t[n]===e[n]}function Ai(e){return e===0}function bn(e,t,n,i){return dt(t)&&(e===n||i.length===1)}function dt(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function Ah(e,t,n){const i=Ei();let{container:r=void 0}=t,{VirtualList:s=null}=t,{Item:l=ws}=t,{isVirtualList:o=!1}=t,{items:u=[]}=t,{labelIdentifier:a="label"}=t,{getOptionLabel:f=(V,x)=>{if(V)return V.isCreator?`Create "${x}"`:V[a]}}=t,{getGroupHeaderLabel:h=null}=t,{itemHeight:c=40}=t,{hoverItemIndex:d=0}=t,{value:y=void 0}=t,{optionIdentifier:p="value"}=t,{hideEmptyState:m=!1}=t,{noOptionsMessage:b="No options"}=t,{isMulti:C=!1}=t,{activeItemIndex:w=0}=t,{filterText:v=""}=t,{parent:S=null}=t,{listPlacement:q=null}=t,{listAutoWidth:B=null}=t,{listOffset:L=5}=t,z=0,A=!1,k;kn(()=>{if(u.length>0&&!C&&y){const V=u.findIndex(x=>x[p]===y[p]);V&&n(2,d=V)}re("active"),r.addEventListener("scroll",()=>{clearTimeout(z),z=setTimeout(()=>{A=!1},100)},!1)}),Nl(()=>{u||n(1,u=[]),u!==k&&u.length>0&&n(2,d=0),k=u});function T(V){V.isCreator||i("itemSelected",V)}function F(V){A||n(2,d=V)}function H(V){const{item:x,i:fe,event:Ae}=V;if(Ae.stopPropagation(),y&&!C&&y[p]===x[p])return E();x.isCreator?i("itemCreated",v):dt(x)&&(n(19,w=fe),n(2,d=fe),T(x))}function E(){i("closeList")}async function N(V){if(o)return;let x=!0;for(;x;)V>0&&d===u.length-1?n(2,d=0):V<0&&d===0?n(2,d=u.length-1):n(2,d=d+V),x=!dt(u[d]);await en(),re("hover")}function W(V){switch(V.key){case"Escape":V.preventDefault(),E();break;case"ArrowDown":V.preventDefault(),u.length&&N(1);break;case"ArrowUp":V.preventDefault(),u.length&&N(-1);break;case"Enter":if(V.preventDefault(),u.length===0)break;const x=u[d];if(y&&!C&&y[p]===x[p]){E();break}x.isCreator?i("itemCreated",v):(n(19,w=d),T(u[d]));break;case"Tab":if(V.preventDefault(),u.length===0||y&&y[p]===u[d][p])return E();n(19,w=d),T(u[d]);break}}function re(V){if(o||!r)return;let x;const fe=r.querySelector(`.listItem .${V}`);fe&&(x=r.getBoundingClientRect().bottom-fe.getBoundingClientRect().bottom),n(0,r.scrollTop-=x,r)}let D;function G(){const{height:V,width:x}=S.getBoundingClientRect();n(14,D=""),n(14,D+=`min-width:${x}px;width:${B?"auto":"100%"};`),q==="top"||q==="auto"&&mh(S,r).bottom?n(14,D+=`bottom:${V+L}px;`):n(14,D+=`top:${V+L}px;`)}const J=V=>F(V),M=V=>F(V),Y=(V,x,fe)=>H({item:V,i:x,event:fe}),ae=V=>F(V),he=V=>F(V),ce=(V,x,fe)=>H({item:V,i:x,event:fe});function oe(V){He[V?"unshift":"push"](()=>{r=V,n(0,r)})}return e.$$set=V=>{"container"in V&&n(0,r=V.container),"VirtualList"in V&&n(3,s=V.VirtualList),"Item"in V&&n(4,l=V.Item),"isVirtualList"in V&&n(5,o=V.isVirtualList),"items"in V&&n(1,u=V.items),"labelIdentifier"in V&&n(20,a=V.labelIdentifier),"getOptionLabel"in V&&n(6,f=V.getOptionLabel),"getGroupHeaderLabel"in V&&n(7,h=V.getGroupHeaderLabel),"itemHeight"in V&&n(8,c=V.itemHeight),"hoverItemIndex"in V&&n(2,d=V.hoverItemIndex),"value"in V&&n(9,y=V.value),"optionIdentifier"in V&&n(10,p=V.optionIdentifier),"hideEmptyState"in V&&n(11,m=V.hideEmptyState),"noOptionsMessage"in V&&n(12,b=V.noOptionsMessage),"isMulti"in V&&n(21,C=V.isMulti),"activeItemIndex"in V&&n(19,w=V.activeItemIndex),"filterText"in V&&n(13,v=V.filterText),"parent"in V&&n(22,S=V.parent),"listPlacement"in V&&n(23,q=V.listPlacement),"listAutoWidth"in V&&n(24,B=V.listAutoWidth),"listOffset"in V&&n(25,L=V.listOffset)},e.$$.update=()=>{e.$$.dirty[0]&4194305&&S&&r&&G()},[r,u,d,s,l,o,f,h,c,y,p,m,b,v,D,F,H,W,G,w,a,C,S,q,B,L,J,M,Y,ae,he,ce,oe]}class Eh extends je{constructor(t){super(),We(this,t,Ah,Ih,xe,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function Sh(e){let t,n=e[0](e[1])+"";return{c(){t=ee("div"),this.h()},l(i){t=te(i,"DIV",{class:!0});var r=P(t);r.forEach(I),this.h()},h(){_(t,"class","selection svelte-pu1q1n")},m(i,r){U(i,t,r),t.innerHTML=n},p(i,[r]){r&3&&n!==(n=i[0](i[1])+"")&&(t.innerHTML=n)},i:ve,o:ve,d(i){i&&I(t)}}}function Mh(e,t,n){let{getSelectionLabel:i=void 0}=t,{item:r=void 0}=t;return e.$$set=s=>{"getSelectionLabel"in s&&n(0,i=s.getSelectionLabel),"item"in s&&n(1,r=s.item)},[i,r]}class Ch extends je{constructor(t){super(),We(this,t,Mh,Sh,xe,{getSelectionLabel:0,item:1})}}function Br(e,t,n){const i=e.slice();return i[9]=t[n],i[11]=n,i}function qr(e){let t,n,i,r,s;function l(...o){return e[6](e[11],...o)}return{c(){t=ee("div"),n=Q("svg"),i=Q("path"),this.h()},l(o){t=te(o,"DIV",{class:!0});var u=P(t);n=$(u,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var a=P(n);i=$(a,"path",{d:!0}),P(i).forEach(I),a.forEach(I),u.forEach(I),this.h()},h(){_(i,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),_(n,"width","100%"),_(n,"height","100%"),_(n,"viewBox","-2 -2 50 50"),_(n,"focusable","false"),_(n,"aria-hidden","true"),_(n,"role","presentation"),_(n,"class","svelte-liu9pa"),_(t,"class","multiSelectItem_clear svelte-liu9pa")},m(o,u){U(o,t,u),R(t,n),R(n,i),r||(s=ue(t,"click",l),r=!0)},p(o,u){e=o},d(o){o&&I(t),r=!1,s()}}}function Ur(e){let t,n,i=e[4](e[9])+"",r,s,l,o,u,a=!e[2]&&!e[3]&&qr(e);function f(...h){return e[7](e[11],...h)}return{c(){t=ee("div"),n=ee("div"),r=_e(),a&&a.c(),s=_e(),this.h()},l(h){t=te(h,"DIV",{class:!0});var c=P(t);n=te(c,"DIV",{class:!0});var d=P(n);d.forEach(I),r=me(c),a&&a.l(c),s=me(c),c.forEach(I),this.h()},h(){_(n,"class","multiSelectItem_label svelte-liu9pa"),_(t,"class",l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(h,c){U(h,t,c),R(t,n),n.innerHTML=i,R(t,r),a&&a.m(t,null),R(t,s),o||(u=ue(t,"click",f),o=!0)},p(h,c){e=h,c&17&&i!==(i=e[4](e[9])+"")&&(n.innerHTML=i),!e[2]&&!e[3]?a?a.p(e,c):(a=qr(e),a.c(),a.m(t,s)):a&&(a.d(1),a=null),c&6&&l!==(l="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&_(t,"class",l)},d(h){h&&I(t),a&&a.d(),o=!1,u()}}}function Nh(e){let t,n=e[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=Ur(Br(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=le()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);t=le()},m(r,s){for(let l=0;l<i.length;l+=1)i[l].m(r,s);U(r,t,s)},p(r,[s]){if(s&63){n=r[0];let l;for(l=0;l<n.length;l+=1){const o=Br(r,n,l);i[l]?i[l].p(o,s):(i[l]=Ur(o),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},i:ve,o:ve,d(r){Si(i,r),r&&I(t)}}}function Lh(e,t,n){const i=Ei();let{value:r=[]}=t,{activeValue:s=void 0}=t,{isDisabled:l=!1}=t,{multiFullItemClearable:o=!1}=t,{getSelectionLabel:u=void 0}=t;function a(c,d){d.stopPropagation(),i("multiItemClear",{i:c})}const f=(c,d)=>a(c,d),h=(c,d)=>o?a(c,d):{};return e.$$set=c=>{"value"in c&&n(0,r=c.value),"activeValue"in c&&n(1,s=c.activeValue),"isDisabled"in c&&n(2,l=c.isDisabled),"multiFullItemClearable"in c&&n(3,o=c.multiFullItemClearable),"getSelectionLabel"in c&&n(4,u=c.getSelectionLabel)},[r,s,l,o,u,a,f,h]}class Th extends je{constructor(t){super(),We(this,t,Lh,Nh,xe,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function Gr(e,t,n){const i=e.slice();return i[23]=t[n],i}const Dh=e=>({item:e&32,i:e&32,hoverItemIndex:e&2}),Xr=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function Vh(e){let t;return{c(){t=ge("Missing template")},l(n){t=pe(n,"Missing template")},m(n,i){U(n,t,i)},d(n){n&&I(t)}}}function Yr(e,t){let n,i,r;const s=t[15].default,l=Ks(s,t,t[14],Xr),o=l||Vh();return{key:e,first:null,c(){n=ee("svelte-virtual-list-row"),o&&o.c(),i=_e(),this.h()},l(u){n=te(u,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var a=P(n);o&&o.l(a),i=me(a),a.forEach(I),this.h()},h(){$n(n,"class","svelte-g2cagw"),this.first=n},m(u,a){U(u,n,a),o&&o.m(n,null),R(n,i),r=!0},p(u,a){t=u,l&&l.p&&(!r||a&16418)&&Zs(l,s,t,t[14],r?Qs(s,t[14],a,Dh):Js(t[14]),Xr)},i(u){r||(Z(o,u),r=!0)},o(u){ne(o,u),r=!1},d(u){u&&I(n),o&&o.d(u)}}}function Oh(e){let t,n,i=[],r=new Map,s,l,o,u,a=e[5];const f=h=>h[23].index;for(let h=0;h<a.length;h+=1){let c=Gr(e,a,h),d=f(c);r.set(d,i[h]=Yr(d,c))}return{c(){t=ee("svelte-virtual-list-viewport"),n=ee("svelte-virtual-list-contents");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){t=te(h,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var c=P(t);n=te(c,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var d=P(n);for(let y=0;y<i.length;y+=1)i[y].l(d);d.forEach(I),c.forEach(I),this.h()},h(){gt(n,"padding-top",e[6]+"px"),gt(n,"padding-bottom",e[7]+"px"),$n(n,"class","svelte-g2cagw"),gt(t,"height",e[0]),$n(t,"class","svelte-g2cagw"),Gt(()=>e[18].call(t))},m(h,c){U(h,t,c),R(t,n);for(let d=0;d<i.length;d+=1)i[d].m(n,null);e[16](n),e[17](t),s=In(t,e[18].bind(t)),l=!0,o||(u=ue(t,"scroll",e[8]),o=!0)},p(h,[c]){c&16418&&(a=h[5],Me(),i=ut(i,c,f,1,h,a,r,n,xs,Yr,null,Gr),Ce()),(!l||c&64)&&gt(n,"padding-top",h[6]+"px"),(!l||c&128)&&gt(n,"padding-bottom",h[7]+"px"),(!l||c&1)&&gt(t,"height",h[0])},i(h){if(!l){for(let c=0;c<a.length;c+=1)Z(i[c]);l=!0}},o(h){for(let c=0;c<i.length;c+=1)ne(i[c]);l=!1},d(h){h&&I(t);for(let c=0;c<i.length;c+=1)i[c].d();e[16](null),e[17](null),s(),o=!1,u()}}}function Fh(e,t,n){let{$$slots:i={},$$scope:r}=t,{items:s=void 0}=t,{height:l="100%"}=t,{itemHeight:o=40}=t,{hoverItemIndex:u=0}=t,{start:a=0}=t,{end:f=0}=t,h=[],c,d,y,p=0,m,b,C=0,w=0,v;async function S(A,k,T){const{scrollTop:F}=d;await en();let H=C-F,E=a;for(;H<k&&E<A.length;){let W=c[E-a];W||(n(10,f=E+1),await en(),W=c[E-a]);const re=h[E]=T||W.offsetHeight;H+=re,E+=1}n(10,f=E);const N=A.length-f;v=(C+H)/f,n(7,w=N*v),h.length=A.length,d&&n(3,d.scrollTop=0,d)}async function q(){const{scrollTop:A}=d,k=a;for(let E=0;E<c.length;E+=1)h[a+E]=o||c[E].offsetHeight;let T=0,F=0;for(;T<s.length;){const E=h[T]||v;if(F+E>A){n(9,a=T),n(6,C=F);break}F+=E,T+=1}for(;T<s.length&&(F+=h[T]||v,T+=1,!(F>A+p)););n(10,f=T);const H=s.length-f;for(v=F/f;T<s.length;)h[T++]=v;if(n(7,w=H*v),a<k){await en();let E=0,N=0;for(let re=a;re<k;re+=1)c[re-a]&&(E+=h[re],N+=o||c[re-a].offsetHeight);const W=N-E;d.scrollTo(0,A+W)}}kn(()=>{c=y.getElementsByTagName("svelte-virtual-list-row"),n(13,b=!0)});function B(A){He[A?"unshift":"push"](()=>{y=A,n(4,y)})}function L(A){He[A?"unshift":"push"](()=>{d=A,n(3,d)})}function z(){p=this.offsetHeight,n(2,p)}return e.$$set=A=>{"items"in A&&n(11,s=A.items),"height"in A&&n(0,l=A.height),"itemHeight"in A&&n(12,o=A.itemHeight),"hoverItemIndex"in A&&n(1,u=A.hoverItemIndex),"start"in A&&n(9,a=A.start),"end"in A&&n(10,f=A.end),"$$scope"in A&&n(14,r=A.$$scope)},e.$$.update=()=>{e.$$.dirty&3584&&n(5,m=s.slice(a,f).map((A,k)=>({index:k+a,data:A}))),e.$$.dirty&14340&&b&&S(s,p,o)},[l,u,p,d,y,m,C,w,q,a,f,s,o,b,r,i,B,L,z]}class Hh extends je{constructor(t){super(),We(this,t,Fh,Oh,xe,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function Rh(e){let t,n;return{c(){t=Q("svg"),n=Q("path"),this.h()},l(i){t=$(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var r=P(t);n=$(r,"path",{fill:!0,d:!0}),P(n).forEach(I),r.forEach(I),this.h()},h(){_(n,"fill","currentColor"),_(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),_(t,"width","100%"),_(t,"height","100%"),_(t,"viewBox","-2 -2 50 50"),_(t,"focusable","false"),_(t,"aria-hidden","true"),_(t,"role","presentation")},m(i,r){U(i,t,r),R(t,n)},p:ve,i:ve,o:ve,d(i){i&&I(t)}}}class Ph extends je{constructor(t){super(),We(this,t,null,Rh,xe,{})}}function zh(e,t,n){let i;return function(){let s=this,l=arguments,o=function(){i=null,n||e.apply(s,l)},u=n&&!i;clearTimeout(i),i=setTimeout(o,t),u&&e.apply(s,l)}}function jr(e,t,n){const i=e.slice();return i[103]=t[n],i}function Wr(e){let t,n,i,r,s;return{c(){t=ee("span"),n=ge(e[33]),i=_e(),r=ee("span"),s=ge(e[32]),this.h()},l(l){t=te(l,"SPAN",{id:!0});var o=P(t);n=pe(o,e[33]),o.forEach(I),i=me(l),r=te(l,"SPAN",{id:!0});var u=P(r);s=pe(u,e[32]),u.forEach(I),this.h()},h(){_(t,"id","aria-selection"),_(r,"id","aria-context")},m(l,o){U(l,t,o),R(t,n),U(l,i,o),U(l,r,o),R(r,s)},p(l,o){o[1]&4&&Fe(n,l[33]),o[1]&2&&Fe(s,l[32])},d(l){l&&I(t),l&&I(i),l&&I(r)}}}function xr(e){let t,n,i;const r=[e[18]];var s=e[17];function l(o){let u={};for(let a=0;a<r.length;a+=1)u=Mi(u,r[a]);return{props:u}}return s&&(t=De(s,l())),{c(){t&&we(t.$$.fragment),n=le()},l(o){t&&Oe(t.$$.fragment,o),n=le()},m(o,u){t&&be(t,o,u),U(o,n,u),i=!0},p(o,u){const a=u[0]&262144?Ci(r,[Ll(o[18])]):{};if(s!==(s=o[17])){if(t){Me();const f=t;ne(f.$$.fragment,1,0,()=>{ke(f,1)}),Ce()}s?(t=De(s,l()),we(t.$$.fragment),Z(t.$$.fragment,1),be(t,n.parentNode,n)):t=null}else s&&t.$set(a)},i(o){i||(t&&Z(t.$$.fragment,o),i=!0)},o(o){t&&ne(t.$$.fragment,o),i=!1},d(o){o&&I(n),t&&ke(t,o)}}}function Kr(e){let t,n,i;var r=e[26];function s(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return r&&(t=De(r,s(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&we(t.$$.fragment),n=le()},l(l){t&&Oe(t.$$.fragment,l),n=le()},m(l,o){t&&be(t,l,o),U(l,n,o),i=!0},p(l,o){const u={};if(o[0]&4&&(u.value=l[2]),o[0]&4096&&(u.getSelectionLabel=l[12]),o[0]&1073741824&&(u.activeValue=l[30]),o[0]&512&&(u.isDisabled=l[9]),o[0]&256&&(u.multiFullItemClearable=l[8]),r!==(r=l[26])){if(t){Me();const a=t;ne(a.$$.fragment,1,0,()=>{ke(a,1)}),Ce()}r?(t=De(r,s(l)),t.$on("multiItemClear",l[38]),t.$on("focus",l[40]),we(t.$$.fragment),Z(t.$$.fragment,1),be(t,n.parentNode,n)):t=null}else r&&t.$set(u)},i(l){i||(t&&Z(t.$$.fragment,l),i=!0)},o(l){t&&ne(t.$$.fragment,l),i=!1},d(l){l&&I(n),t&&ke(t,l)}}}function Zr(e){let t,n,i,r,s;var l=e[25];function o(u){return{props:{item:u[2],getSelectionLabel:u[12]}}}return l&&(n=De(l,o(e))),{c(){t=ee("div"),n&&we(n.$$.fragment),this.h()},l(u){t=te(u,"DIV",{class:!0});var a=P(t);n&&Oe(n.$$.fragment,a),a.forEach(I),this.h()},h(){_(t,"class","selectedItem svelte-17l1npl")},m(u,a){U(u,t,a),n&&be(n,t,null),i=!0,r||(s=ue(t,"focus",e[40]),r=!0)},p(u,a){const f={};if(a[0]&4&&(f.item=u[2]),a[0]&4096&&(f.getSelectionLabel=u[12]),l!==(l=u[25])){if(n){Me();const h=n;ne(h.$$.fragment,1,0,()=>{ke(h,1)}),Ce()}l?(n=De(l,o(u)),we(n.$$.fragment),Z(n.$$.fragment,1),be(n,t,null)):n=null}else l&&n.$set(f)},i(u){i||(n&&Z(n.$$.fragment,u),i=!0)},o(u){n&&ne(n.$$.fragment,u),i=!1},d(u){u&&I(t),n&&ke(n),r=!1,s()}}}function Jr(e){let t,n,i,r,s;var l=e[23];function o(u){return{}}return l&&(n=De(l,o())),{c(){t=ee("div"),n&&we(n.$$.fragment),this.h()},l(u){t=te(u,"DIV",{class:!0,"aria-hidden":!0});var a=P(t);n&&Oe(n.$$.fragment,a),a.forEach(I),this.h()},h(){_(t,"class","clearSelect svelte-17l1npl"),_(t,"aria-hidden","true")},m(u,a){U(u,t,a),n&&be(n,t,null),i=!0,r||(s=ue(t,"click",$s(e[27])),r=!0)},p(u,a){if(l!==(l=u[23])){if(n){Me();const f=n;ne(f.$$.fragment,1,0,()=>{ke(f,1)}),Ce()}l?(n=De(l,o()),we(n.$$.fragment),Z(n.$$.fragment,1),be(n,t,null)):n=null}},i(u){i||(n&&Z(n.$$.fragment,u),i=!0)},o(u){n&&ne(n.$$.fragment,u),i=!1},d(u){u&&I(t),n&&ke(n),r=!1,s()}}}function Qr(e){let t;function n(s,l){return s[22]?qh:Bh}let i=n(e),r=i(e);return{c(){t=ee("div"),r.c(),this.h()},l(s){t=te(s,"DIV",{class:!0,"aria-hidden":!0});var l=P(t);r.l(l),l.forEach(I),this.h()},h(){_(t,"class","indicator svelte-17l1npl"),_(t,"aria-hidden","true")},m(s,l){U(s,t,l),r.m(t,null)},p(s,l){i===(i=n(s))&&r?r.p(s,l):(r.d(1),r=i(s),r&&(r.c(),r.m(t,null)))},d(s){s&&I(t),r.d()}}}function Bh(e){let t,n;return{c(){t=Q("svg"),n=Q("path"),this.h()},l(i){t=$(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var r=P(t);n=$(r,"path",{d:!0}),P(n).forEach(I),r.forEach(I),this.h()},h(){_(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),_(t,"width","100%"),_(t,"height","100%"),_(t,"viewBox","0 0 20 20"),_(t,"focusable","false"),_(t,"aria-hidden","true"),_(t,"class","svelte-17l1npl")},m(i,r){U(i,t,r),R(t,n)},p:ve,d(i){i&&I(t)}}}function qh(e){let t,n;return{c(){t=new to(!1),n=le(),this.h()},l(i){t=no(i,!1),n=le(),this.h()},h(){t.a=n},m(i,r){t.m(e[22],i,r),U(i,n,r)},p(i,r){r[0]&4194304&&t.p(i[22])},d(i){i&&I(n),i&&t.d()}}}function $r(e){let t,n,i;return{c(){t=ee("div"),n=Q("svg"),i=Q("circle"),this.h()},l(r){t=te(r,"DIV",{class:!0});var s=P(t);n=$(s,"svg",{class:!0,viewBox:!0});var l=P(n);i=$(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),P(i).forEach(I),l.forEach(I),s.forEach(I),this.h()},h(){_(i,"class","spinner_path svelte-17l1npl"),_(i,"cx","50"),_(i,"cy","50"),_(i,"r","20"),_(i,"fill","none"),_(i,"stroke","currentColor"),_(i,"stroke-width","5"),_(i,"stroke-miterlimit","10"),_(n,"class","spinner_icon svelte-17l1npl"),_(n,"viewBox","25 25 50 50"),_(t,"class","spinner svelte-17l1npl")},m(r,s){U(r,t,s),R(t,n),R(n,i)},d(r){r&&I(t)}}}function el(e){let t,n,i,r;const s=[e[34]];function l(a){e[84](a)}var o=e[24];function u(a){let f={};for(let h=0;h<s.length;h+=1)f=Mi(f,s[h]);return a[28]!==void 0&&(f.hoverItemIndex=a[28]),{props:f}}return o&&(t=De(o,u(e)),He.push(()=>Qi(t,"hoverItemIndex",l)),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&we(t.$$.fragment),i=le()},l(a){t&&Oe(t.$$.fragment,a),i=le()},m(a,f){t&&be(t,a,f),U(a,i,f),r=!0},p(a,f){const h=f[1]&8?Ci(s,[Ll(a[34])]):{};if(!n&&f[0]&268435456&&(n=!0,h.hoverItemIndex=a[28],eo(()=>n=!1)),o!==(o=a[24])){if(t){Me();const c=t;ne(c.$$.fragment,1,0,()=>{ke(c,1)}),Ce()}o?(t=De(o,u(a)),He.push(()=>Qi(t,"hoverItemIndex",l)),t.$on("itemSelected",a[43]),t.$on("itemCreated",a[44]),t.$on("closeList",a[45]),we(t.$$.fragment),Z(t.$$.fragment,1),be(t,i.parentNode,i)):t=null}else o&&t.$set(h)},i(a){r||(t&&Z(t.$$.fragment,a),r=!0)},o(a){t&&ne(t.$$.fragment,a),r=!1},d(a){a&&I(i),t&&ke(t,a)}}}function tl(e){let t,n,i;return{c(){t=ee("input"),this.h()},l(r){t=te(r,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){_(t,"name",n=e[16].name),_(t,"type","hidden"),t.value=i=e[2]?e[12](e[2]):null,_(t,"class","svelte-17l1npl")},m(r,s){U(r,t,s)},p(r,s){s[0]&65536&&n!==(n=r[16].name)&&_(t,"name",n),s[0]&4100&&i!==(i=r[2]?r[12](r[2]):null)&&(t.value=i)},d(r){r&&I(t)}}}function nl(e){let t,n=e[2],i=[];for(let r=0;r<n.length;r+=1)i[r]=il(jr(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=le()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);t=le()},m(r,s){for(let l=0;l<i.length;l+=1)i[l].m(r,s);U(r,t,s)},p(r,s){if(s[0]&69636){n=r[2];let l;for(l=0;l<n.length;l+=1){const o=jr(r,n,l);i[l]?i[l].p(o,s):(i[l]=il(o),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(r){Si(i,r),r&&I(t)}}}function il(e){let t,n,i;return{c(){t=ee("input"),this.h()},l(r){t=te(r,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){_(t,"name",n=e[16].name),_(t,"type","hidden"),t.value=i=e[103]?e[12](e[103]):null,_(t,"class","svelte-17l1npl")},m(r,s){U(r,t,s)},p(r,s){s[0]&65536&&n!==(n=r[16].name)&&_(t,"name",n),s[0]&4100&&i!==(i=r[103]?r[12](r[103]):null)&&(t.value=i)},d(r){r&&I(t)}}}function Uh(e){let t,n,i,r,s,l,o,u,a,f,h,c,d,y,p,m,b,C,w=e[1]&&Wr(e),v=e[17]&&xr(e),S=e[35]&&Kr(e),q=[{readOnly:o=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],B={};for(let E=0;E<q.length;E+=1)B=Mi(B,q[E]);let L=!e[7]&&e[29]&&Zr(e),z=e[37]&&Jr(e),A=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&Qr(e),k=e[4]&&$r(),T=e[5]&&el(e),F=(!e[7]||e[7]&&!e[35])&&tl(e),H=e[7]&&e[35]&&nl(e);return{c(){t=ee("div"),n=ee("span"),w&&w.c(),i=_e(),v&&v.c(),r=_e(),S&&S.c(),s=_e(),l=ee("input"),u=_e(),L&&L.c(),a=_e(),z&&z.c(),f=_e(),A&&A.c(),h=_e(),k&&k.c(),c=_e(),T&&T.c(),d=_e(),F&&F.c(),y=_e(),H&&H.c(),this.h()},l(E){t=te(E,"DIV",{class:!0,style:!0});var N=P(t);n=te(N,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var W=P(n);w&&w.l(W),W.forEach(I),i=me(N),v&&v.l(N),r=me(N),S&&S.l(N),s=me(N),l=te(N,"INPUT",{placeholder:!0,style:!0}),u=me(N),L&&L.l(N),a=me(N),z&&z.l(N),f=me(N),A&&A.l(N),h=me(N),k&&k.l(N),c=me(N),T&&T.l(N),d=me(N),F&&F.l(N),y=me(N),H&&H.l(N),N.forEach(I),this.h()},h(){_(n,"aria-live","polite"),_(n,"aria-atomic","false"),_(n,"aria-relevant","additions text"),_(n,"class","a11yText svelte-17l1npl"),Zi(l,B),Ue(l,"svelte-17l1npl",!0),_(t,"class",p="selectContainer "+e[21]+" svelte-17l1npl"),_(t,"style",e[11]),Ue(t,"hasError",e[10]),Ue(t,"multiSelect",e[7]),Ue(t,"disabled",e[9]),Ue(t,"focused",e[1])},m(E,N){U(E,t,N),R(t,n),w&&w.m(n,null),R(t,i),v&&v.m(t,null),R(t,r),S&&S.m(t,null),R(t,s),R(t,l),l.autofocus&&l.focus(),e[82](l),Ji(l,e[3]),R(t,u),L&&L.m(t,null),R(t,a),z&&z.m(t,null),R(t,f),A&&A.m(t,null),R(t,h),k&&k.m(t,null),R(t,c),T&&T.m(t,null),R(t,d),F&&F.m(t,null),R(t,y),H&&H.m(t,null),e[85](t),m=!0,b||(C=[ue(window,"click",e[41]),ue(window,"focusin",e[41]),ue(window,"keydown",e[39]),ue(l,"focus",e[40]),ue(l,"input",e[83]),ue(t,"click",e[42])],b=!0)},p(E,N){E[1]?w?w.p(E,N):(w=Wr(E),w.c(),w.m(n,null)):w&&(w.d(1),w=null),E[17]?v?(v.p(E,N),N[0]&131072&&Z(v,1)):(v=xr(E),v.c(),Z(v,1),v.m(t,r)):v&&(Me(),ne(v,1,1,()=>{v=null}),Ce()),E[35]?S?(S.p(E,N),N[1]&16&&Z(S,1)):(S=Kr(E),S.c(),Z(S,1),S.m(t,s)):S&&(Me(),ne(S,1,1,()=>{S=null}),Ce()),Zi(l,B=Ci(q,[(!m||N[0]&8192&&o!==(o=!E[13]))&&{readOnly:o},N[1]&1&&E[31],(!m||N[1]&32)&&{placeholder:E[36]},(!m||N[0]&16384)&&{style:E[14]},(!m||N[0]&512)&&{disabled:E[9]}])),N[0]&8&&l.value!==E[3]&&Ji(l,E[3]),Ue(l,"svelte-17l1npl",!0),!E[7]&&E[29]?L?(L.p(E,N),N[0]&536871040&&Z(L,1)):(L=Zr(E),L.c(),Z(L,1),L.m(t,a)):L&&(Me(),ne(L,1,1,()=>{L=null}),Ce()),E[37]?z?(z.p(E,N),N[1]&64&&Z(z,1)):(z=Jr(E),z.c(),Z(z,1),z.m(t,f)):z&&(Me(),ne(z,1,1,()=>{z=null}),Ce()),!E[37]&&(E[20]||E[19]&&!E[2]||!E[13]&&!E[9]&&!E[4]&&(E[29]&&!E[15]||!E[29]))?A?A.p(E,N):(A=Qr(E),A.c(),A.m(t,h)):A&&(A.d(1),A=null),E[4]?k||(k=$r(),k.c(),k.m(t,c)):k&&(k.d(1),k=null),E[5]?T?(T.p(E,N),N[0]&32&&Z(T,1)):(T=el(E),T.c(),Z(T,1),T.m(t,d)):T&&(Me(),ne(T,1,1,()=>{T=null}),Ce()),!E[7]||E[7]&&!E[35]?F?F.p(E,N):(F=tl(E),F.c(),F.m(t,y)):F&&(F.d(1),F=null),E[7]&&E[35]?H?H.p(E,N):(H=nl(E),H.c(),H.m(t,null)):H&&(H.d(1),H=null),(!m||N[0]&2097152&&p!==(p="selectContainer "+E[21]+" svelte-17l1npl"))&&_(t,"class",p),(!m||N[0]&2048)&&_(t,"style",E[11]),(!m||N[0]&2098176)&&Ue(t,"hasError",E[10]),(!m||N[0]&2097280)&&Ue(t,"multiSelect",E[7]),(!m||N[0]&2097664)&&Ue(t,"disabled",E[9]),(!m||N[0]&2097154)&&Ue(t,"focused",E[1])},i(E){m||(Z(v),Z(S),Z(L),Z(z),Z(T),m=!0)},o(E){ne(v),ne(S),ne(L),ne(z),ne(T),m=!1},d(E){E&&I(t),w&&w.d(),v&&v.d(),S&&S.d(),e[82](null),L&&L.d(),z&&z.d(),A&&A.d(),k&&k.d(),T&&T.d(),F&&F.d(),H&&H.d(),e[85](null),b=!1,lt(C)}}}function rl(e){return e.map((t,n)=>({index:n,value:t,label:`${t}`}))}function Gh(e,t,n){let i,r,s,l,o,u,a,f;const h=Ei();let{id:c=null}=t,{container:d=void 0}=t,{input:y=void 0}=t,{isMulti:p=!1}=t,{multiFullItemClearable:m=!1}=t,{isDisabled:b=!1}=t,{isCreatable:C=!1}=t,{isFocused:w=!1}=t,{value:v=null}=t,{filterText:S=""}=t,{placeholder:q="Select..."}=t,{placeholderAlwaysShow:B=!1}=t,{items:L=null}=t,{itemFilter:z=(g,K,de)=>`${g}`.toLowerCase().includes(K.toLowerCase())}=t,{groupBy:A=void 0}=t,{groupFilter:k=g=>g}=t,{isGroupHeaderSelectable:T=!1}=t,{getGroupHeaderLabel:F=g=>g[H]||g.id}=t,{labelIdentifier:H="label"}=t,{getOptionLabel:E=(g,K)=>g.isCreator?`Create "${K}"`:g[H]}=t,{optionIdentifier:N="value"}=t,{loadOptions:W=void 0}=t,{hasError:re=!1}=t,{containerStyles:D=""}=t,{getSelectionLabel:G=g=>g?g[H]:null}=t,{createGroupHeaderItem:J=g=>({value:g,label:g})}=t,{createItem:M=g=>({value:g,label:g})}=t;const Y=()=>i;let{isSearchable:ae=!0}=t,{inputStyles:he=""}=t,{isClearable:ce=!0}=t,{isWaiting:oe=!1}=t,{listPlacement:V="auto"}=t,{listOpen:x=!1}=t,{isVirtualList:fe=!1}=t,{loadOptionsInterval:Ae=300}=t,{noOptionsMessage:O="No options"}=t,{hideEmptyState:X=!1}=t,{inputAttributes:ie={}}=t,{listAutoWidth:Ee=!0}=t,{itemHeight:Ne=40}=t,{Icon:j=void 0}=t,{iconProps:se={}}=t,{showChevron:Ge=!1}=t,{showIndicator:Se=!1}=t,{containerClasses:Bi=""}=t,{indicatorSvg:qi=void 0}=t,{listOffset:Cn=5}=t,{ClearIcon:Ui=Ph}=t,{Item:Nn=ws}=t,{List:Gi=Eh}=t,{Selection:Xi=Ch}=t,{MultiSelection:Yi=Th}=t,{VirtualList:Ln=Hh}=t;function ks(g){if(g.loadOptions&&g.filterText.length>0)return;if(!g.items)return[];g.items&&g.items.length>0&&typeof g.items[0]!="object"&&(g.items=rl(g.items));let K=g.items.filter(de=>{let qe=z(E(de,g.filterText),g.filterText,de);return qe&&g.isMulti&&g.value&&Array.isArray(g.value)&&(qe=!g.value.some(st=>st[g.optionIdentifier]===de[g.optionIdentifier])),qe});return g.groupBy&&(K=Ss(K)),g.isCreatable&&(K=ji(K,g.filterText)),K}function ji(g,K){if(K.length===0)return g;const de=M(K);return g[0]&&K===g[0][H]?g:(de.isCreator=!0,[...g,de])}let{selectedValue:Tn=null}=t,ye,_t,Dn,Vn,On,jt;const Is=zh(async()=>{n(4,oe=!0);let g=await W(S).catch(K=>{console.warn("svelte-select loadOptions error :>> ",K),h("error",{type:"loadOptions",details:K})});g&&!g.cancelled&&(g?(g&&g.length>0&&typeof g[0]!="object"&&(g=rl(g)),n(81,i=[...g]),h("loaded",{items:i})):n(81,i=[]),C&&n(81,i=ji(i,S)),n(4,oe=!1),n(1,w=!0),n(5,x=!0))},Ae);function As(){typeof v=="string"?n(2,v={[N]:v,label:v}):p&&Array.isArray(v)&&v.length>0&&n(2,v=v.map(g=>typeof g=="string"?{value:g,label:g}:g))}let mt;function Es(){n(31,mt=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ie)),c&&n(31,mt.id=c,mt),ae||n(31,mt.readonly=!0,mt)}function Ss(g){const K=[],de={};g.forEach(st=>{const $e=A(st);K.includes($e)||(K.push($e),de[$e]=[],$e&&de[$e].push(Object.assign(J($e,st),{id:$e,isGroupHeader:!0,isSelectable:T}))),de[$e].push(Object.assign({isGroupItem:!!$e},st))});const qe=[];return k(K).forEach(st=>{qe.push(...de[st])}),qe}function Ms(){if(p){JSON.stringify(v)!==JSON.stringify(_t)&&Wi()&&h("select",v);return}(!_t||JSON.stringify(v[N])!==JSON.stringify(_t[N]))&&h("select",v)}function Cs(){w||x?Fn():y&&y.blur()}function Ns(){v&&(Array.isArray(v)?n(2,v=[...v]):n(2,v=[v]))}function Ls(){v&&n(2,v=null)}function Ts(){S.length!==0&&(n(1,w=!0),n(5,x=!0),W?Is():(n(5,x=!0),p&&n(30,ye=void 0)))}Nl(async()=>{n(77,_t=v),n(78,Dn=S),n(79,Vn=w),n(80,On=p)});function Wi(){let g=!0;if(v){const K=[],de=[];v.forEach(qe=>{K.includes(qe[N])?g=!1:(K.push(qe[N]),de.push(qe))}),g||n(2,v=de)}return g}function xi(g){let K=g?g[N]:v[N];return L.find(de=>de[N]===K)}function Ds(g){!g||g.length===0||g.some(K=>typeof K!="object")||!v||(p?v.some(K=>!K||!K[N]):!v[N])||(Array.isArray(v)?n(2,v=v.map(K=>xi(K)||K)):n(2,v=xi()||v))}function Ki(g){const{detail:K}=g,de=v[K?K.i:v.length-1];v.length===1?n(2,v=void 0):n(2,v=v.filter(qe=>qe!==de)),h("clear",de)}function Vs(g){if(!!w)switch(g.key){case"ArrowDown":g.preventDefault(),n(5,x=!0),n(30,ye=void 0);break;case"ArrowUp":g.preventDefault(),n(5,x=!0),n(30,ye=void 0);break;case"Tab":x||n(1,w=!1);break;case"Backspace":if(!p||S.length>0)return;if(p&&v&&v.length>0){if(Ki(ye!==void 0?ye:v.length-1),ye===0||ye===void 0)break;n(30,ye=v.length>ye?ye-1:void 0)}break;case"ArrowLeft":if(!p||S.length>0)return;ye===void 0?n(30,ye=v.length-1):v.length>ye&&ye!==0&&n(30,ye-=1);break;case"ArrowRight":if(!p||S.length>0||ye===void 0)return;ye===v.length-1?n(30,ye=void 0):ye<v.length-1&&n(30,ye+=1);break}}function Fn(){n(1,w=!0),y&&y.focus()}function Os(g){if(!d)return;const K=g.path&&g.path.length>0?g.path[0]:g.target;d.contains(K)||d.contains(g.relatedTarget)||(n(1,w=!1),n(5,x=!1),n(30,ye=void 0),y&&y.blur())}function Fs(){b||(n(1,w=!0),n(5,x=!x))}function Hs(){n(2,v=void 0),n(5,x=!1),h("clear",v),Fn()}kn(()=>{w&&y&&y.focus()});function Rs(g){const{detail:K}=g;if(K){n(3,S="");const de=Object.assign({},K);(!de.isGroupHeader||de.isSelectable)&&(p?n(2,v=v?v.concat([de]):[de]):n(2,v=de),n(2,v),setTimeout(()=>{n(5,x=!1),n(30,ye=void 0)}))}}function Ps(g){const{detail:K}=g;p?(n(2,v=v||[]),n(2,v=[...v,M(K)])):n(2,v=M(K)),h("itemCreated",K),n(3,S=""),n(5,x=!1),n(30,ye=void 0)}function zs(){n(3,S=""),n(5,x=!1)}let{ariaValues:Hn=g=>`Option ${g}, selected.`}=t,{ariaListOpen:Rn=(g,K)=>`You are currently focused on option ${g}. There are ${K} results available.`}=t,{ariaFocused:Pn=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function Bs(){let g;return p&&v.length>0?g=v.map(K=>G(K)).join(", "):g=G(v),Hn(g)}function qs(){if(!w||!i||i.length===0)return"";let g=i[jt];if(x&&g){let K=G(g),de=i?i.length:0;return Rn(K,de)}else return Pn()}function Us(g){He[g?"unshift":"push"](()=>{y=g,n(6,y)})}function Gs(){S=this.value,n(3,S)}function Xs(g){jt=g,n(28,jt)}function Ys(g){He[g?"unshift":"push"](()=>{d=g,n(0,d)})}return e.$$set=g=>{"id"in g&&n(46,c=g.id),"container"in g&&n(0,d=g.container),"input"in g&&n(6,y=g.input),"isMulti"in g&&n(7,p=g.isMulti),"multiFullItemClearable"in g&&n(8,m=g.multiFullItemClearable),"isDisabled"in g&&n(9,b=g.isDisabled),"isCreatable"in g&&n(47,C=g.isCreatable),"isFocused"in g&&n(1,w=g.isFocused),"value"in g&&n(2,v=g.value),"filterText"in g&&n(3,S=g.filterText),"placeholder"in g&&n(48,q=g.placeholder),"placeholderAlwaysShow"in g&&n(49,B=g.placeholderAlwaysShow),"items"in g&&n(50,L=g.items),"itemFilter"in g&&n(51,z=g.itemFilter),"groupBy"in g&&n(52,A=g.groupBy),"groupFilter"in g&&n(53,k=g.groupFilter),"isGroupHeaderSelectable"in g&&n(54,T=g.isGroupHeaderSelectable),"getGroupHeaderLabel"in g&&n(55,F=g.getGroupHeaderLabel),"labelIdentifier"in g&&n(56,H=g.labelIdentifier),"getOptionLabel"in g&&n(57,E=g.getOptionLabel),"optionIdentifier"in g&&n(58,N=g.optionIdentifier),"loadOptions"in g&&n(59,W=g.loadOptions),"hasError"in g&&n(10,re=g.hasError),"containerStyles"in g&&n(11,D=g.containerStyles),"getSelectionLabel"in g&&n(12,G=g.getSelectionLabel),"createGroupHeaderItem"in g&&n(60,J=g.createGroupHeaderItem),"createItem"in g&&n(61,M=g.createItem),"isSearchable"in g&&n(13,ae=g.isSearchable),"inputStyles"in g&&n(14,he=g.inputStyles),"isClearable"in g&&n(15,ce=g.isClearable),"isWaiting"in g&&n(4,oe=g.isWaiting),"listPlacement"in g&&n(63,V=g.listPlacement),"listOpen"in g&&n(5,x=g.listOpen),"isVirtualList"in g&&n(64,fe=g.isVirtualList),"loadOptionsInterval"in g&&n(65,Ae=g.loadOptionsInterval),"noOptionsMessage"in g&&n(66,O=g.noOptionsMessage),"hideEmptyState"in g&&n(67,X=g.hideEmptyState),"inputAttributes"in g&&n(16,ie=g.inputAttributes),"listAutoWidth"in g&&n(68,Ee=g.listAutoWidth),"itemHeight"in g&&n(69,Ne=g.itemHeight),"Icon"in g&&n(17,j=g.Icon),"iconProps"in g&&n(18,se=g.iconProps),"showChevron"in g&&n(19,Ge=g.showChevron),"showIndicator"in g&&n(20,Se=g.showIndicator),"containerClasses"in g&&n(21,Bi=g.containerClasses),"indicatorSvg"in g&&n(22,qi=g.indicatorSvg),"listOffset"in g&&n(70,Cn=g.listOffset),"ClearIcon"in g&&n(23,Ui=g.ClearIcon),"Item"in g&&n(71,Nn=g.Item),"List"in g&&n(24,Gi=g.List),"Selection"in g&&n(25,Xi=g.Selection),"MultiSelection"in g&&n(26,Yi=g.MultiSelection),"VirtualList"in g&&n(72,Ln=g.VirtualList),"selectedValue"in g&&n(73,Tn=g.selectedValue),"ariaValues"in g&&n(74,Hn=g.ariaValues),"ariaListOpen"in g&&n(75,Rn=g.ariaListOpen),"ariaFocused"in g&&n(76,Pn=g.ariaFocused)},e.$$.update=()=>{e.$$.dirty[0]&140|e.$$.dirty[1]&405340160&&n(81,i=ks({loadOptions:W,filterText:S,items:L,value:v,isMulti:p,optionIdentifier:N,groupBy:A,isCreatable:C})),e.$$.dirty[2]&2048&&Tn&&console.warn("selectedValue is no longer used. Please use value instead."),e.$$.dirty[1]&524288&&Ds(L),e.$$.dirty[0]&4&&v&&As(),e.$$.dirty[0]&73728&&(ie||!ae)&&Es(),e.$$.dirty[0]&128|e.$$.dirty[2]&262144&&(p&&Ns(),On&&!p&&Ls()),e.$$.dirty[0]&132&&p&&v&&v.length>1&&Wi(),e.$$.dirty[0]&4&&v&&Ms(),e.$$.dirty[0]&132|e.$$.dirty[2]&32768&&!v&&p&&_t&&h("select",v),e.$$.dirty[0]&2|e.$$.dirty[2]&131072&&w!==Vn&&Cs(),e.$$.dirty[0]&8|e.$$.dirty[2]&65536&&S!==Dn&&Ts(),e.$$.dirty[0]&12&&n(29,r=v&&S.length===0),e.$$.dirty[0]&536904208&&n(37,s=r&&ce&&!b&&!oe),e.$$.dirty[0]&132|e.$$.dirty[1]&393216&&n(36,l=B&&p?q:v?"":q),e.$$.dirty[0]&132&&n(35,o=p&&v&&v.length>0),e.$$.dirty[0]&141|e.$$.dirty[1]&218103808|e.$$.dirty[2]&526326&&n(34,u={Item:Nn,filterText:S,optionIdentifier:N,noOptionsMessage:O,hideEmptyState:X,isVirtualList:fe,VirtualList:Ln,value:v,isMulti:p,getGroupHeaderLabel:F,items:i,itemHeight:Ne,getOptionLabel:E,listPlacement:V,parent:d,listAutoWidth:Ee,listOffset:Cn}),e.$$.dirty[0]&132&&n(33,a=v?Bs():""),e.$$.dirty[0]&268435490|e.$$.dirty[2]&524288&&n(32,f=qs())},[d,w,v,S,oe,x,y,p,m,b,re,D,G,ae,he,ce,ie,j,se,Ge,Se,Bi,qi,Ui,Gi,Xi,Yi,Hs,jt,r,ye,mt,f,a,u,o,l,s,Ki,Vs,Fn,Os,Fs,Rs,Ps,zs,c,C,q,B,L,z,A,k,T,F,H,E,N,W,J,M,Y,V,fe,Ae,O,X,Ee,Ne,Cn,Nn,Ln,Tn,Hn,Rn,Pn,_t,Dn,Vn,On,i,Us,Gs,Xs,Ys]}class ll extends je{constructor(t){super(),We(this,t,Gh,Uh,xe,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function sl(e,t,n){const i=e.slice();return i[28]=t[n],i}function ol(e,t,n){const i=e.slice();return i[28]=t[n],i}function al(e){let t,n,i;return{c(){t=Q("rect"),this.h()},l(r){t=$(r,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),P(t).forEach(I),this.h()},h(){_(t,"class","timebar"),_(t,"x",n=e[10](e[14][0])-12),_(t,"y",35),_(t,"width","24"),_(t,"height",i=e[3]-35-rt),_(t,"fill","rgba(0,0,0,0.2)")},m(r,s){U(r,t,s)},p(r,s){s[0]&17408&&n!==(n=r[10](r[14][0])-12)&&_(t,"x",n),s[0]&8&&i!==(i=r[3]-35-rt)&&_(t,"height",i)},d(r){r&&I(t)}}}function ul(e,t){let n,i,r,s,l,o,u;return{key:e,first:null,c(){n=Q("circle"),this.h()},l(a){n=$(a,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),P(n).forEach(I),this.h()},h(){_(n,"class","circ1 svelte-wx1vup"),_(n,"cx",i=t[10](t[28].year)),_(n,"cy",r=t[9](t[28].export_value)),_(n,"r","5"),_(n,"fill",s=t[12](t[0])),_(n,"stroke",l=t[14].includes(t[28].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),_(n,"stroke-width","2"),this.first=n},m(a,f){U(a,n,f),o||(u=[ue(n,"click",function(){Ni(t[15](t[28].year))&&t[15](t[28].year).apply(this,arguments)}),ue(n,"keydown",jh)],o=!0)},p(a,f){t=a,f[0]&3072&&i!==(i=t[10](t[28].year))&&_(n,"cx",i),f[0]&2560&&r!==(r=t[9](t[28].export_value))&&_(n,"cy",r),f[0]&4097&&s!==(s=t[12](t[0]))&&_(n,"fill",s),f[0]&18432&&l!==(l=t[14].includes(t[28].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&_(n,"stroke",l)},d(a){a&&I(n),o=!1,lt(u)}}}function fl(e,t){let n,i,r,s,l,o,u;return{key:e,first:null,c(){n=Q("circle"),this.h()},l(a){n=$(a,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),P(n).forEach(I),this.h()},h(){_(n,"cx",i=t[10](t[28].year)),_(n,"cy",r=t[9](t[28].import_value)),_(n,"r","5"),_(n,"fill",s=t[12](t[1])),_(n,"stroke",l=t[14].includes(t[28].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)"),_(n,"stroke-width","2"),_(n,"class","svelte-wx1vup"),this.first=n},m(a,f){U(a,n,f),o||(u=[ue(n,"click",function(){Ni(t[15](t[28].year))&&t[15](t[28].year).apply(this,arguments)}),ue(n,"keydown",Wh)],o=!0)},p(a,f){t=a,f[0]&3072&&i!==(i=t[10](t[28].year))&&_(n,"cx",i),f[0]&2560&&r!==(r=t[9](t[28].import_value))&&_(n,"cy",r),f[0]&4098&&s!==(s=t[12](t[1]))&&_(n,"fill",s),f[0]&18432&&l!==(l=t[14].includes(t[28].year)?"rgba(0,0,0,1)":"rgba(0,0,0,0)")&&_(n,"stroke",l)},d(a){a&&I(n),o=!1,lt(u)}}}function Xh(e){let t,n,i,r,s,l,o,u,a,f,h,c,d=[],y=new Map,p,m,b,C=[],w=new Map,v,S=!e[13]&&al(e),q=e[11];const B=A=>A[28].year;for(let A=0;A<q.length;A+=1){let k=ol(e,q,A),T=B(k);y.set(T,d[A]=ul(T,k))}let L=e[11];const z=A=>A[28].year;for(let A=0;A<L.length;A+=1){let k=sl(e,L,A),T=z(k);w.set(T,C[A]=fl(T,k))}return{c(){t=ee("div"),n=Q("svg"),i=Q("text"),r=ge("Total Trade Over Time"),l=Q("g"),S&&S.c(),o=Q("g"),a=Q("g"),f=Q("g"),h=Q("path");for(let A=0;A<d.length;A+=1)d[A].c();p=Q("g"),m=Q("path");for(let A=0;A<C.length;A+=1)C[A].c();this.h()},l(A){t=te(A,"DIV",{id:!0,class:!0});var k=P(t);n=$(k,"svg",{width:!0,height:!0});var T=P(n);i=$(T,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var F=P(i);r=pe(F,"Total Trade Over Time"),F.forEach(I),l=$(T,"g",{class:!0}),P(l).forEach(I),S&&S.l(T),o=$(T,"g",{id:!0,transform:!0}),P(o).forEach(I),a=$(T,"g",{id:!0,transform:!0}),P(a).forEach(I),f=$(T,"g",{class:!0});var H=P(f);h=$(H,"path",{fill:!0,stroke:!0,"stroke-width":!0}),P(h).forEach(I);for(let N=0;N<d.length;N+=1)d[N].l(H);H.forEach(I),p=$(T,"g",{class:!0});var E=P(p);m=$(E,"path",{fill:!0,stroke:!0,"stroke-width":!0}),P(m).forEach(I);for(let N=0;N<C.length;N+=1)C[N].l(E);E.forEach(I),T.forEach(I),k.forEach(I),this.h()},h(){_(i,"class","chart-header"),_(i,"x",s=e[2]/2),_(i,"y",rt-5),_(i,"text-anchor","middle"),_(l,"class","brush"),_(o,"id","xAxis"),_(o,"transform",u=`translate(${0},${e[3]-rt})`),_(a,"id","yAis"),_(a,"transform",`translate(${bs},${0})`),_(h,"fill","none"),_(h,"stroke",c=e[12](e[0])),_(h,"stroke-width","2"),_(f,"class","country1-group country-group svelte-wx1vup"),_(m,"fill","none"),_(m,"stroke",b=e[12](e[1])),_(m,"stroke-width","2"),_(p,"class","country2-group country-group svelte-wx1vup"),_(n,"width",e[2]),_(n,"height",e[3]),_(t,"id","line-chart"),_(t,"class","viz-section"),Gt(()=>e[26].call(t))},m(A,k){U(A,t,k),R(t,n),R(n,i),R(i,r),R(n,l),e[21](l),S&&S.m(n,null),R(n,o),e[22](o),R(n,a),e[23](a),R(n,f),R(f,h),e[24](h);for(let T=0;T<d.length;T+=1)d[T].m(f,null);R(n,p),R(p,m),e[25](m);for(let T=0;T<C.length;T+=1)C[T].m(p,null);v=In(t,e[26].bind(t))},p(A,k){k[0]&4&&s!==(s=A[2]/2)&&_(i,"x",s),A[13]?S&&(S.d(1),S=null):S?S.p(A,k):(S=al(A),S.c(),S.m(n,o)),k[0]&8&&u!==(u=`translate(${0},${A[3]-rt})`)&&_(o,"transform",u),k[0]&4097&&c!==(c=A[12](A[0]))&&_(h,"stroke",c),k[0]&56833&&(q=A[11],d=ut(d,k,B,1,A,q,y,f,Pt,ul,null,ol)),k[0]&4098&&b!==(b=A[12](A[1]))&&_(m,"stroke",b),k[0]&56834&&(L=A[11],C=ut(C,k,z,1,A,L,w,p,Pt,fl,null,sl)),k[0]&4&&_(n,"width",A[2]),k[0]&8&&_(n,"height",A[3])},i:ve,o:ve,d(A){A&&I(t),e[21](null),S&&S.d(),e[22](null),e[23](null),e[24](null);for(let k=0;k<d.length;k+=1)d[k].d();e[25](null);for(let k=0;k<C.length;k+=1)C[k].d();v()}}}const rt=35,Yh=15,bs=50,jh=()=>{},Wh=()=>{};function xh(e,t,n){let i,r,s,l,o;It(e,Rt,E=>n(20,l=E)),It(e,bt,E=>n(14,o=E));let{data:u}=t,{bilateralData:a,locationData:f,productData:h,country1_id:c,country2_id:d,countryColorScale:y}=u,p=800,m=400;const b=E=>Mt("$.2s")(E).replace(/G/,"B");let C,w,v,S,q,B=!1;function L(E){return()=>bt.set([E])}function z(E){He[E?"unshift":"push"](()=>{v=E,n(6,v)})}function A(E){He[E?"unshift":"push"](()=>{C=E,n(4,C)})}function k(E){He[E?"unshift":"push"](()=>{w=E,n(5,w)})}function T(E){He[E?"unshift":"push"](()=>{S=E,n(7,S)})}function F(E){He[E?"unshift":"push"](()=>{q=E,n(8,q)})}function H(){p=this.clientWidth,m=this.clientHeight,n(2,p),n(3,m)}return e.$$set=E=>{"data"in E&&n(16,u=E.data)},e.$$.update=()=>{var E,N,W,re;if(e.$$.dirty[0]&65536&&n(17,{bilateralData:a,locationData:f,productData:h,country1_id:c,country2_id:d,countryColorScale:y}=u,a,(n(18,f),n(16,u)),(n(19,h),n(16,u)),(n(0,c),n(16,u)),(n(1,d),n(16,u)),(n(12,y),n(16,u))),e.$$.dirty[0]&1966083&&n(11,i=Array.from((W=(N=(E=a==null?void 0:a.get(c))==null?void 0:E.get(d))==null?void 0:N.entries())!=null?W:new Array).map(D=>{let G=D[0],J=D[1];return J=l.size==0?J:J.filter(M=>l.has(M.product_id)),J.reduce((M,Y)=>(M.export_value+=Y.export_value,M.import_value+=Y.import_value,M),new it(f,h,{location_id:c,partner_id:d,product_id:0,year:G,export_value:0,import_value:0}))}).sort((D,G)=>D.year-G.year)),e.$$.dirty[0]&2052&&n(10,s=vn().domain(Vl(i,D=>D.year)).range([bs,p-rt])),e.$$.dirty[0]&1088){let D=sc().on("start brush end",G=>{if((G==null?void 0:G.selection)===null||(G==null?void 0:G.selection[1])-(G==null?void 0:G.selection[0])<5)bt.set([2020]),n(13,B=!1);else{n(13,B=!0);let J=G.selection;const M=J[0],Y=J[1];let ae=Math.ceil(s.invert(M)),he=Math.floor(s.invert(Y)),ce=[];for(let oe=ae;oe<=he;oe++)ce.push(oe);bt.set(ce)}});ze(v).call(D)}if(e.$$.dirty[0]&2048&&console.log(i),e.$$.dirty[0]&2056&&n(9,r=vn().domain([0,(re=li(i,D=>Math.max(D.export_value,D.import_value)))!=null?re:0]).range([m-rt,rt+Yh])),e.$$.dirty[0]&1584){let D=Rl(s).tickFormat(Mt("d"));ze(C).transition().call(D);let G=Co(r).tickFormat(J=>b(J));ze(w).transition().call(G)}if(e.$$.dirty[0]&3712){let D=wi();i.length>0&&(i.sort(G=>G.year),D.moveTo(s(i[0].year),r(i[0].export_value))),i.forEach(G=>{D.lineTo(s(G.year),r(G.export_value))}),ze(S).transition().attr("d",D.toString())}if(e.$$.dirty[0]&3840){let D=wi();i.length>0&&D.moveTo(s(i[0].year),r(i[0].import_value)),i.forEach(G=>{D.lineTo(s(G.year),r(G.import_value))}),ze(q).transition().attr("d",D.toString())}},[c,d,p,m,C,w,v,S,q,r,s,i,y,B,o,L,u,a,f,h,l,z,A,k,T,F,H]}class Kh extends je{constructor(t){super(),We(this,t,xh,Xh,xe,{data:16},null,[-1,-1])}}function Zh(e){const t=e-1;return t*t*t+1}function Jh(e,{delay:t=0,duration:n=400,easing:i=io}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*r}`}}function Qh(e,{from:t,to:n},i={}){const r=getComputedStyle(e),s=r.transform==="none"?"":r.transform,[l,o]=r.transformOrigin.split(" ").map(parseFloat),u=t.left+t.width*l/n.width-(n.left+l),a=t.top+t.height*o/n.height-(n.top+o),{delay:f=0,duration:h=d=>Math.sqrt(d)*120,easing:c=Zh}=i;return{delay:f,duration:Ni(h)?h(Math.sqrt(u*u+a*a)):h,easing:c,css:(d,y)=>{const p=y*u,m=y*a,b=d+y*t.width/n.width,C=d+y*t.height/n.height;return`transform: ${s} translate(${p}px, ${m}px) scale(${b}, ${C});`}}}function cl(e,t,n){const i=e.slice();return i[33]=t[n],i[35]=n,i}function hl(e,t,n){const i=e.slice();return i[33]=t[n],i[35]=n,i}function dl(e,t,n){const i=e.slice();return i[33]=t[n],i[35]=n,i}function $h(e){let t,n,i,r,s;return{c(){t=Q("text"),n=ge("No valid data for this pair."),this.h()},l(l){t=$(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=P(t);n=pe(o,"No valid data for this pair."),o.forEach(I),this.h()},h(){_(t,"x",i=e[4]/2),_(t,"y",r=e[10]/2),_(t,"alignment-baseline","central"),_(t,"text-anchor","middle")},m(l,o){U(l,t,o),R(t,n)},p(l,o){o[0]&16&&i!==(i=l[4]/2)&&_(t,"x",i),o[0]&1024&&r!==(r=l[10]/2)&&_(t,"y",r)},i(l){s||Gt(()=>{s=ro(t,Jh,{}),s.start()})},o:ve,d(l){l&&I(t)}}}function e0(e){var fe,Ae;let t,n,i=e[1]==e[0].AlphaUp?"\u2191":e[1]==e[0].AlphaDown?"\u2193":" ",r,s,l,o=e[1]==e[0].Up?"\u2191":e[1]==e[0].Down?"\u2193":" ",u,a,f,h,c=((fe=e[2])==null?void 0:fe.name)+" ",d,y=e[1]==e[0].LeftUp?"\u2191":e[1]==e[0].LeftDown?"\u2193":" ",p,m,b=e[1]==e[0].RightUp?"\u2191":e[1]==e[0].RightDown?"\u2193":" ",C,w,v=((Ae=e[3])==null?void 0:Ae.name)+"",S,q,B,L=[],z=new Map,A,k=[],T=new Map,F,H=[],E=new Map,N,W,re,D,G,J,M,Y,ae=e[11];const he=O=>O[33].product_id;for(let O=0;O<ae.length;O+=1){let X=dl(e,ae,O),ie=he(X);z.set(ie,L[O]=ml(ie,X))}let ce=e[11];const oe=O=>O[35];for(let O=0;O<ce.length;O+=1){let X=hl(e,ce,O),ie=oe(X);T.set(ie,k[O]=gl(ie,X))}let V=e[11];const x=O=>O[33].product_id;for(let O=0;O<V.length;O+=1){let X=cl(e,V,O),ie=x(X);E.set(ie,H[O]=pl(ie,X))}return{c(){t=Q("text"),n=ge("Sector "),r=ge(i),s=Q("text"),l=ge("Trade Flow "),u=ge(o),f=Q("text"),h=ge("From "),d=ge(c),p=ge(y),m=Q("text"),C=ge(b),w=ge("\xA0From "),S=ge(v),B=Q("g");for(let O=0;O<L.length;O+=1)L[O].c();A=le();for(let O=0;O<k.length;O+=1)k[O].c();F=le();for(let O=0;O<H.length;O+=1)H[O].c();N=Q("line"),D=Q("line"),J=Q("g"),this.h()},l(O){t=$(O,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var X=P(t);n=pe(X,"Sector "),r=pe(X,i),X.forEach(I),s=$(O,"text",{"text-anchor":!0,class:!0,x:!0,y:!0,"alignment-baseline":!0});var ie=P(s);l=pe(ie,"Trade Flow "),u=pe(ie,o),ie.forEach(I),f=$(O,"text",{class:!0,x:!0,y:!0,"alignment-baseline":!0,"font-size":!0});var Ee=P(f);h=pe(Ee,"From "),d=pe(Ee,c),p=pe(Ee,y),Ee.forEach(I),m=$(O,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,"font-size":!0});var Ne=P(m);C=pe(Ne,b),w=pe(Ne,"\xA0From "),S=pe(Ne,v),Ne.forEach(I),B=$(O,"g",{id:!0,transform:!0});var j=P(B);for(let se=0;se<L.length;se+=1)L[se].l(j);A=le();for(let se=0;se<k.length;se+=1)k[se].l(j);F=le();for(let se=0;se<H.length;se+=1)H[se].l(j);N=$(j,"line",{id:!0,transform:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),P(N).forEach(I),D=$(j,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),P(D).forEach(I),J=$(j,"g",{id:!0}),P(J).forEach(I),j.forEach(I),this.h()},h(){var O,X,ie,Ee;_(t,"text-anchor","start"),_(t,"class","chart-header sortable svelte-1dlqwym"),_(t,"x",15),_(t,"y",Vt/2),_(t,"alignment-baseline","hanging"),_(s,"text-anchor","middle"),_(s,"class","chart-header sortable svelte-1dlqwym"),_(s,"x",a=(e[4]-Ze)/2+Ze),_(s,"y",Vt/2-7),_(s,"alignment-baseline","hanging"),_(f,"class","from-label sortable svelte-1dlqwym"),_(f,"x",Ze+20),_(f,"y",Vt/2-5),_(f,"alignment-baseline","hanging"),_(f,"font-size","13"),_(m,"class","from-label sortable svelte-1dlqwym"),_(m,"x",q=e[4]-20),_(m,"y",Vt/2-5),_(m,"text-anchor","end"),_(m,"alignment-baseline","hanging"),_(m,"font-size","13"),_(N,"id","midline"),_(N,"transform",W=`translate(${e[6](0)},0)`),_(N,"y1",20),_(N,"y2",re=(((X=(O=e[11])==null?void 0:O.length)!=null?X:0)+1)*Re),_(N,"stroke","rgba(0,0,0,0.7)"),_(N,"stroke-width","1"),_(N,"class","svelte-1dlqwym"),_(D,"x1",Ze),_(D,"y1",0),_(D,"x2",Ze),_(D,"y2",G=(((Ee=(ie=e[11])==null?void 0:ie.length)!=null?Ee:0)+1)*Re),_(D,"stroke","rgba(0,0,0,0.1)"),_(D,"stroke-width","1"),_(J,"id","axis"),_(B,"id","bar-content"),_(B,"transform",`translate(${0},${Vt})`)},m(O,X){U(O,t,X),R(t,n),R(t,r),U(O,s,X),R(s,l),R(s,u),U(O,f,X),R(f,h),R(f,d),R(f,p),U(O,m,X),R(m,C),R(m,w),R(m,S),U(O,B,X);for(let ie=0;ie<L.length;ie+=1)L[ie].m(B,null);R(B,A);for(let ie=0;ie<k.length;ie+=1)k[ie].m(B,null);R(B,F);for(let ie=0;ie<H.length;ie+=1)H[ie].m(B,null);R(B,N),R(B,D),R(B,J),e[29](J),M||(Y=[ue(t,"click",e[24]),ue(t,"keydown",i0),ue(s,"click",e[25]),ue(s,"keydown",r0),ue(f,"keydown",l0),ue(f,"click",e[26]),ue(m,"click",e[27]),ue(m,"keydown",s0)],M=!0)},p(O,X){var ie,Ee,Ne,j,se,Ge;if(X[0]&3&&i!==(i=O[1]==O[0].AlphaUp?"\u2191":O[1]==O[0].AlphaDown?"\u2193":" ")&&Fe(r,i),X[0]&3&&o!==(o=O[1]==O[0].Up?"\u2191":O[1]==O[0].Down?"\u2193":" ")&&Fe(u,o),X[0]&16&&a!==(a=(O[4]-Ze)/2+Ze)&&_(s,"x",a),X[0]&4&&c!==(c=((ie=O[2])==null?void 0:ie.name)+" ")&&Fe(d,c),X[0]&3&&y!==(y=O[1]==O[0].LeftUp?"\u2191":O[1]==O[0].LeftDown?"\u2193":" ")&&Fe(p,y),X[0]&3&&b!==(b=O[1]==O[0].RightUp?"\u2191":O[1]==O[0].RightDown?"\u2193":" ")&&Fe(C,b),X[0]&8&&v!==(v=((Ee=O[3])==null?void 0:Ee.name)+"")&&Fe(S,v),X[0]&16&&q!==(q=O[4]-20)&&_(m,"x",q),X[0]&2064&&(ae=O[11],L=ut(L,X,he,1,O,ae,z,B,Pt,ml,A,dl)),X[0]&6592&&(ce=O[11],k=ut(k,X,oe,1,O,ce,T,B,Pt,gl,F,hl)),X[0]&6144){V=O[11];for(let Se=0;Se<H.length;Se+=1)H[Se].r();H=ut(H,X,x,1,O,V,E,B,lo,pl,N,cl);for(let Se=0;Se<H.length;Se+=1)H[Se].a()}X[0]&64&&W!==(W=`translate(${O[6](0)},0)`)&&_(N,"transform",W),X[0]&2048&&re!==(re=(((j=(Ne=O[11])==null?void 0:Ne.length)!=null?j:0)+1)*Re)&&_(N,"y2",re),X[0]&2048&&G!==(G=(((Ge=(se=O[11])==null?void 0:se.length)!=null?Ge:0)+1)*Re)&&_(D,"y2",G)},i:ve,o:ve,d(O){O&&I(t),O&&I(s),O&&I(f),O&&I(m),O&&I(B);for(let X=0;X<L.length;X+=1)L[X].d();for(let X=0;X<k.length;X+=1)k[X].d();for(let X=0;X<H.length;X+=1)H[X].d();e[29](null),M=!1,lt(Y)}}}function _l(e){let t,n;return{c(){t=Q("rect"),this.h()},l(i){t=$(i,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),P(t).forEach(I),this.h()},h(){_(t,"x","0"),_(t,"y",n=e[35]*Re+Ct),_(t,"height",Re),_(t,"width",e[4]),_(t,"fill","rgba(0,0,0,0.04)"),_(t,"class","svelte-1dlqwym")},m(i,r){U(i,t,r)},p(i,r){r[0]&2048&&n!==(n=i[35]*Re+Ct)&&_(t,"y",n),r[0]&16&&_(t,"width",i[4])},d(i){i&&I(t)}}}function ml(e,t){let n,i,r=t[35]%2==0&&_l(t);return{key:e,first:null,c(){n=le(),r&&r.c(),i=le(),this.h()},l(s){n=le(),r&&r.l(s),i=le(),this.h()},h(){this.first=n},m(s,l){U(s,n,l),r&&r.m(s,l),U(s,i,l)},p(s,l){t=s,t[35]%2==0?r?r.p(t,l):(r=_l(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&I(n),r&&r.d(s),s&&I(i)}}}function gl(e,t){let n,i,r,s,l,o,u,a,f,h,c,d,y;return{key:e,first:null,c(){n=Q("g"),i=Q("rect"),l=Q("rect"),f=Q("rect"),this.h()},l(p){n=$(p,"g",{class:!0,transform:!0});var m=P(n);i=$(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),P(i).forEach(I),l=$(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),P(l).forEach(I),f=$(m,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),P(f).forEach(I),m.forEach(I),this.h()},h(){_(i,"class","tab svelte-1dlqwym"),_(i,"x","0"),_(i,"y","2"),_(i,"height",Re-4),_(i,"width",r=t[12].size>0&&t[12].has(t[33].product_id)?Ze-1:6),_(i,"fill",s=t[7]?t[7](t[33].product.name):"white"),_(l,"class","country1-bar svelte-1dlqwym"),_(l,"x",o=t[6](-t[33].export_value)),_(l,"y",$t/2),_(l,"height",Re-$t),_(l,"width",u=t[6](0)-t[6](-t[33].export_value)),_(l,"fill",a=t[8](t[33].location_id)),_(f,"class","country2-bar svelte-1dlqwym"),_(f,"x",h=t[6](0)),_(f,"y",$t/2),_(f,"height",Re-$t),_(f,"width",c=t[6](t[33].import_value)-t[6](0)),_(f,"fill",d=t[8](t[33].partner_id)),_(n,"class","bar-row"),_(n,"transform",y=`translate(0, ${t[35]*Re+Ct})`),this.first=n},m(p,m){U(p,n,m),R(n,i),R(n,l),R(n,f)},p(p,m){t=p,m[0]&6144&&r!==(r=t[12].size>0&&t[12].has(t[33].product_id)?Ze-1:6)&&_(i,"width",r),m[0]&2176&&s!==(s=t[7]?t[7](t[33].product.name):"white")&&_(i,"fill",s),m[0]&2112&&o!==(o=t[6](-t[33].export_value))&&_(l,"x",o),m[0]&2112&&u!==(u=t[6](0)-t[6](-t[33].export_value))&&_(l,"width",u),m[0]&2304&&a!==(a=t[8](t[33].location_id))&&_(l,"fill",a),m[0]&64&&h!==(h=t[6](0))&&_(f,"x",h),m[0]&2112&&c!==(c=t[6](t[33].import_value)-t[6](0))&&_(f,"width",c),m[0]&2304&&d!==(d=t[8](t[33].partner_id))&&_(f,"fill",d),m[0]&2048&&y!==(y=`translate(0, ${t[35]*Re+Ct})`)&&_(n,"transform",y)},d(p){p&&I(n)}}}function pl(e,t){let n,i=t[33].product.name+"",r,s,l,o=ve,u,a;function f(){return t[28](t[33])}return{key:e,first:null,c(){n=Q("text"),r=ge(i),this.h()},l(h){n=$(h,"text",{class:!0,"alignment-baseline":!0,x:!0,y:!0});var c=P(n);r=pe(c,i),c.forEach(I),this.h()},h(){_(n,"class","product-text svelte-1dlqwym"),_(n,"alignment-baseline","hanging"),_(n,"x","10"),_(n,"y",s=t[35]*Re+Ct+6),this.first=n},m(h,c){U(h,n,c),R(n,r),u||(a=[ue(n,"click",f),ue(n,"keydown",o0)],u=!0)},p(h,c){t=h,c[0]&2048&&i!==(i=t[33].product.name+"")&&Fe(r,i),c[0]&2048&&s!==(s=t[35]*Re+Ct+6)&&_(n,"y",s)},r(){l=n.getBoundingClientRect()},f(){so(n),o()},a(){o(),o=oo(n,l,Qh,{duration:400,delay:20})},d(h){h&&I(n),u=!1,lt(a)}}}function yl(e){let t,n,i,r,s;return{c(){t=Q("rect"),n=Q("text"),i=ge("Loading..."),this.h()},l(l){t=$(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),P(t).forEach(I),n=$(l,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var o=P(n);i=pe(o,"Loading..."),o.forEach(I),this.h()},h(){_(t,"x","0"),_(t,"y","0"),_(t,"width",e[4]),_(t,"height",e[10]),_(t,"fill","rgba(255,255,255,0.9)"),_(t,"class","svelte-1dlqwym"),_(n,"x",r=e[4]/2),_(n,"y",s=e[10]/2),_(n,"alignment-baseline","central"),_(n,"text-anchor","middle")},m(l,o){U(l,t,o),U(l,n,o),R(n,i)},p(l,o){o[0]&16&&_(t,"width",l[4]),o[0]&1024&&_(t,"height",l[10]),o[0]&16&&r!==(r=l[4]/2)&&_(n,"x",r),o[0]&1024&&s!==(s=l[10]/2)&&_(n,"y",s)},d(l){l&&I(t),l&&I(n)}}}function t0(e){let t,n,i,r;function s(a,f){return a[11]&&a[11].length>0?e0:$h}let l=s(e),o=l(e),u=e[9]&&yl(e);return{c(){t=ee("div"),n=Q("svg"),o.c(),i=le(),u&&u.c(),this.h()},l(a){t=te(a,"DIV",{id:!0,class:!0});var f=P(t);n=$(f,"svg",{class:!0});var h=P(n);o.l(h),i=le(),u&&u.l(h),h.forEach(I),f.forEach(I),this.h()},h(){_(n,"class","svelte-1dlqwym"),_(t,"id","bar-chart"),_(t,"class","viz-section svelte-1dlqwym"),Gt(()=>e[30].call(t))},m(a,f){U(a,t,f),R(t,n),o.m(n,null),R(n,i),u&&u.m(n,null),r=In(t,e[30].bind(t))},p(a,f){l===(l=s(a))&&o?o.p(a,f):(o.d(1),o=l(a),o&&(o.c(),Z(o,1),o.m(n,i))),a[9]?u?u.p(a,f):(u=yl(a),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i(a){Z(o)},o:ve,d(a){a&&I(t),o.d(),u&&u.d(),r()}}}const Vt=40,Re=30,vl=0,n0=10,Ct=30,Ze=100,$t=4,i0=()=>{},r0=()=>{},l0=()=>{},s0=()=>{},o0=()=>{};function a0(e,t,n){let i,r,s,l,o,u,a,f,h,c;It(e,bt,D=>n(23,h=D)),It(e,Rt,D=>n(12,c=D));let{data:d}=t;var y;(function(D){D[D.LeftUp=0]="LeftUp",D[D.LeftDown=1]="LeftDown",D[D.RightUp=2]="RightUp",D[D.RightDown=3]="RightDown",D[D.Up=4]="Up",D[D.Down=5]="Down",D[D.AlphaUp=6]="AlphaUp",D[D.AlphaDown=7]="AlphaDown"})(y||(y={}));let p=y.AlphaDown,{bilateralData:m,productColorScale:b,countryColorScale:C,country1:w,country2:v,loadingDrilldown:S,productData:q,locationData:B}=d,L=800,z=500,A;const k=D=>Mt("$.2s")(D).replace(/G/,"B"),T=()=>{p==y.AlphaDown?n(1,p=y.AlphaUp):n(1,p=y.AlphaDown)},F=()=>{p==y.Down?n(1,p=y.Up):n(1,p=y.Down)},H=()=>{p==y.LeftDown?n(1,p=y.LeftUp):n(1,p=y.LeftDown)},E=()=>{p==y.RightDown?n(1,p=y.RightUp):n(1,p=y.RightDown)},N=D=>{c.has(D.product_id)?Rt.update(G=>(G.delete(D.product_id),G)):Rt.update(G=>(G.add(D.product_id),G))};function W(D){He[D?"unshift":"push"](()=>{A=D,n(5,A)})}function re(){L=this.clientWidth,z=this.clientHeight,n(4,L),n(10,z)}return e.$$set=D=>{"data"in D&&n(13,d=D.data)},e.$$.update=()=>{var D,G,J;if(e.$$.dirty[0]&8192&&n(14,{bilateralData:m,productColorScale:b,countryColorScale:C,country1:w,country2:v,loadingDrilldown:S,productData:q,locationData:B}=d,m,(n(7,b),n(13,d)),(n(8,C),n(13,d)),(n(2,w),n(13,d)),(n(3,v),n(13,d)),(n(9,S),n(13,d)),(n(15,q),n(13,d)),(n(16,B),n(13,d))),e.$$.dirty[0]&16396&&n(22,i=(J=m==null?void 0:m.get((D=w==null?void 0:w.id)!=null?D:0))==null?void 0:J.get((G=v==null?void 0:v.id)!=null?G:0)),e.$$.dirty[0]&12582912&&n(21,r=h.map(M=>{var Y;return(Y=i==null?void 0:i.get(M))!=null?Y:new Array}).flat()),e.$$.dirty[0]&2195468&&n(19,s=Array.from(Ol(r,M=>{var Y,ae;return M.reduce((he,ce)=>(he.export_value+=ce.export_value,he.import_value+=ce.import_value,he),new it(B,q,{location_id:(Y=w==null?void 0:w.id)!=null?Y:0,partner_id:(ae=v==null?void 0:v.id)!=null?ae:0,product_id:M[0].product_id,year:0,export_value:0,import_value:0}))},M=>M.product_id).values())),e.$$.dirty[0]&524288&&n(20,l=s.filter(M=>M.product.level=="section")),e.$$.dirty[0]&1048579&&n(11,o=l.sort((M,Y)=>{switch(p){case y.LeftUp:return M.export_value-Y.export_value;case y.LeftDown:return Y.export_value-M.export_value;case y.RightUp:return M.import_value-Y.import_value;case y.RightDown:return Y.import_value-M.import_value;case y.Up:return M.import_value+M.export_value-(Y.import_value+Y.export_value);case y.Down:return Y.import_value+Y.export_value-(M.import_value+M.export_value);case y.AlphaDown:return M.product.name.localeCompare(Y.product.name);case y.AlphaUp:return Y.product.name.localeCompare(M.product.name);default:return 0}})),e.$$.dirty[0]&524288&&n(18,u=li(s,M=>M.export_value)),e.$$.dirty[0]&524288&&n(17,a=li(s,M=>M.import_value)),e.$$.dirty[0]&393216,e.$$.dirty[0]&393232&&n(6,f=vn().domain([-u,a]).range([Ze+vl,L-vl-n0])),e.$$.dirty[0]&96){let M=Rl(f).tickFormat(Y=>k(Math.abs(Y)));ze(A).transition().call(M)}},[y,p,w,v,L,A,f,b,C,S,z,o,c,d,m,q,B,a,u,s,l,r,i,h,T,F,H,E,N,W,re]}class u0 extends je{constructor(t){super(),We(this,t,a0,t0,xe,{data:13},null,[-1,-1])}}const{Map:f0}=ao;function wl(e,t,n){const i=e.slice();return i[21]=t[n],i}function bl(e){let t,n,i,r,s,l,o,u=e[21].x1-e[21].x0>40&&e[21].y1-e[21].y0>10&&kl(e),a=e[21].x1-e[21].x0>40&&e[21].y1-e[21].y0>30&&Il(e);return{c(){t=Q("rect"),u&&u.c(),l=le(),a&&a.c(),o=le(),this.h()},l(f){t=$(f,"rect",{class:!0,transform:!0,width:!0,height:!0,fill:!0}),P(t).forEach(I),u&&u.l(f),l=le(),a&&a.l(f),o=le(),this.h()},h(){var f,h,c,d;_(t,"class","leaf svelte-sixlpg"),_(t,"transform",n=`translate(${e[21].x0},${e[21].y0})`),_(t,"width",i=e[21].x1-e[21].x0),_(t,"height",r=e[21].y1-e[21].y0),_(t,"fill",s=e[5]?e[5]((d=(c=(h=(f=e[21].data)==null?void 0:f.product)==null?void 0:h.parent)==null?void 0:c.name)!=null?d:""):"white")},m(f,h){U(f,t,h),u&&u.m(f,h),U(f,l,h),a&&a.m(f,h),U(f,o,h)},p(f,h){var c,d,y,p;h&256&&n!==(n=`translate(${f[21].x0},${f[21].y0})`)&&_(t,"transform",n),h&256&&i!==(i=f[21].x1-f[21].x0)&&_(t,"width",i),h&256&&r!==(r=f[21].y1-f[21].y0)&&_(t,"height",r),h&288&&s!==(s=f[5]?f[5]((p=(y=(d=(c=f[21].data)==null?void 0:c.product)==null?void 0:d.parent)==null?void 0:y.name)!=null?p:""):"white")&&_(t,"fill",s),f[21].x1-f[21].x0>40&&f[21].y1-f[21].y0>10?u?u.p(f,h):(u=kl(f),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),f[21].x1-f[21].x0>40&&f[21].y1-f[21].y0>30?a?a.p(f,h):(a=Il(f),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},d(f){f&&I(t),u&&u.d(f),f&&I(l),a&&a.d(f),f&&I(o)}}}function kl(e){var l,o,u;let t,n=((u=(o=(l=e[21].data)==null?void 0:l.product.name)==null?void 0:o.substring(0,40))!=null?u:"")+"",i,r,s;return{c(){t=Q("text"),i=ge(n),this.h()},l(a){t=$(a,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0});var f=P(t);i=pe(f,n),f.forEach(I),this.h()},h(){_(t,"class","label svelte-sixlpg"),_(t,"transform",r=`translate(${e[21].x0+3},${e[21].y0+3})`),_(t,"alignment-baseline","hanging"),_(t,"font-size",s=Math.max((e[21].x1-e[21].x0)/15,8))},m(a,f){U(a,t,f),R(t,i)},p(a,f){var h,c,d;f&256&&n!==(n=((d=(c=(h=a[21].data)==null?void 0:h.product.name)==null?void 0:c.substring(0,40))!=null?d:"")+"")&&Fe(i,n),f&256&&r!==(r=`translate(${a[21].x0+3},${a[21].y0+3})`)&&_(t,"transform",r),f&256&&s!==(s=Math.max((a[21].x1-a[21].x0)/15,8))&&_(t,"font-size",s)},d(a){a&&I(t)}}}function Il(e){let t,n=e[9](e[0]==="export_value"?e[21].data.export_value:e[21].data.import_value)+"",i,r,s;return{c(){t=Q("text"),i=ge(n),this.h()},l(l){t=$(l,"text",{class:!0,transform:!0,"alignment-baseline":!0,"font-size":!0,"font-weight":!0});var o=P(t);i=pe(o,n),o.forEach(I),this.h()},h(){_(t,"class","label-num svelte-sixlpg"),_(t,"transform",r=`translate(${e[21].x0+5},${e[21].y0+1+Math.max((e[21].x1-e[21].x0)/10,8)})`),_(t,"alignment-baseline","hanging"),_(t,"font-size",s=Math.max((e[21].x1-e[21].x0)/15,8)-1),_(t,"font-weight","300")},m(l,o){U(l,t,o),R(t,i)},p(l,o){o&257&&n!==(n=l[9](l[0]==="export_value"?l[21].data.export_value:l[21].data.import_value)+"")&&Fe(i,n),o&256&&r!==(r=`translate(${l[21].x0+5},${l[21].y0+1+Math.max((l[21].x1-l[21].x0)/10,8)})`)&&_(t,"transform",r),o&256&&s!==(s=Math.max((l[21].x1-l[21].x0)/15,8)-1)&&_(t,"font-size",s)},d(l){l&&I(t)}}}function Al(e,t){let n,i,r=t[4].length>0&&t[21].x1!=NaN&&t[21].x0!=NaN&&t[21].y0!=NaN&&t[21].y1!=NaN&&bl(t);return{key:e,first:null,c(){n=le(),r&&r.c(),i=le(),this.h()},l(s){n=le(),r&&r.l(s),i=le(),this.h()},h(){this.first=n},m(s,l){U(s,n,l),r&&r.m(s,l),U(s,i,l)},p(s,l){t=s,t[4].length>0&&t[21].x1!=NaN&&t[21].x0!=NaN&&t[21].y0!=NaN&&t[21].y1!=NaN?r?r.p(t,l):(r=bl(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&I(n),r&&r.d(s),s&&I(i)}}}function El(e){let t,n,i,r=e[6]?"Loading...":"No Data",s,l,o;return{c(){t=Q("rect"),i=Q("text"),s=ge(r),this.h()},l(u){t=$(u,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),P(t).forEach(I),i=$(u,"text",{x:!0,y:!0,"alignment-baseline":!0,"text-anchor":!0});var a=P(i);s=pe(a,r),a.forEach(I),this.h()},h(){_(t,"x","0"),_(t,"y","0"),_(t,"width",e[1]),_(t,"height",e[2]),_(t,"fill",n=e[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)"),_(i,"x",l=e[1]/2),_(i,"y",o=e[2]/2),_(i,"alignment-baseline","central"),_(i,"text-anchor","middle")},m(u,a){U(u,t,a),U(u,i,a),R(i,s)},p(u,a){a&2&&_(t,"width",u[1]),a&4&&_(t,"height",u[2]),a&64&&n!==(n=u[6]?"rgba(255,255,255, 0.9)":"rgba(255,255,255,1)")&&_(t,"fill",n),a&64&&r!==(r=u[6]?"Loading...":"No Data")&&Fe(s,r),a&2&&l!==(l=u[1]/2)&&_(i,"x",l),a&4&&o!==(o=u[2]/2)&&_(i,"y",o)},d(u){u&&I(t),u&&I(i)}}}function c0(e){var f,h;let t,n,i,r=[],s=new f0,l,o=e[8];const u=c=>c[21].data.product_id;for(let c=0;c<o.length;c+=1){let d=wl(e,o,c),y=u(d);s.set(y,r[c]=Al(y,d))}let a=((h=(f=e[3])==null?void 0:f.length)!=null?h:0)===0&&El(e);return{c(){t=ee("div"),n=Q("svg"),i=Q("g");for(let c=0;c<r.length;c+=1)r[c].c();a&&a.c(),this.h()},l(c){t=te(c,"DIV",{class:!0});var d=P(t);n=$(d,"svg",{class:!0});var y=P(n);i=$(y,"g",{class:!0});var p=P(i);for(let m=0;m<r.length;m+=1)r[m].l(p);p.forEach(I),a&&a.l(y),y.forEach(I),d.forEach(I),this.h()},h(){_(i,"class","treemap svelte-sixlpg"),_(n,"class","svelte-sixlpg"),_(t,"class","viz-section"),Gt(()=>e[20].call(t))},m(c,d){U(c,t,d),R(t,n),R(n,i);for(let y=0;y<r.length;y+=1)r[y].m(i,null);e[19](i),a&&a.m(n,null),l=In(t,e[20].bind(t))},p(c,[d]){var y,p;d&817&&(o=c[8],r=ut(r,d,u,1,c,o,s,i,Pt,Al,null,wl)),((p=(y=c[3])==null?void 0:y.length)!=null?p:0)===0?a?a.p(c,d):(a=El(c),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:ve,o:ve,d(c){c&&I(t);for(let d=0;d<r.length;d+=1)r[d].d();e[19](null),a&&a.d(),l()}}}function h0(e,t,n){let i,r,s,l,o;It(e,Rt,L=>n(18,l=L)),It(e,bt,L=>n(4,o=L));const u=L=>Mt("$.2s")(L).replace(/G/,"B");let{data:a}=t,{country1:f,country2:h,valueField:c,productColorScale:d,drilldownBilateral:y,loadingDrilldown:p,locationData:m,productData:b}=a,C=0,w=0,v,S=new Array;function q(L){He[L?"unshift":"push"](()=>{v=L,n(7,v)})}function B(){C=this.clientWidth,w=this.clientHeight,n(1,C),n(2,w)}return e.$$set=L=>{"data"in L&&n(10,a=L.data)},e.$$.update=()=>{var L;if(e.$$.dirty&1024&&n(13,{drilldownBilateral:y,valueField:c,productColorScale:d,country1:f,country2:h,loadingDrilldown:p,locationData:m,productData:b}=a,y,(n(0,c),n(10,a)),(n(5,d),n(10,a)),(n(11,f),n(10,a)),(n(12,h),n(10,a)),(n(6,p),n(10,a)),(n(14,m),n(10,a)),(n(15,b),n(10,a))),e.$$.dirty&12288&&n(17,i=y==null?void 0:y.get((L=h==null?void 0:h.id)!=null?L:0)),e.$$.dirty&131088&&n(16,r=o.map(z=>{var A;return(A=i==null?void 0:i.get(z))!=null?A:new Array}).flat()),e.$$.dirty&382976&&n(3,s=Array.from(Ol(l.size==0?r:r.filter(z=>l.has(z.product.parent_id)),z=>z.reduce((A,k)=>(A.export_value+=k.export_value,A.import_value+=k.import_value,A),new it(m,b,{location_id:f,partner_id:h,product_id:z[0].product_id,year:0,export_value:0,import_value:0})),z=>z.product_id).values())),e.$$.dirty&268303&&s&&s.length>0){let z=[];if(l.size==1){let k=l.entries().next().value[1];console.log(k);let T=new it(new Map,new Map,{location_id:f,partner_id:h,product_id:k,year:0,export_value:0,import_value:0});T.product=new on({product_id:k,name:"Sector",level:-1,parent_id:-1}),T.product.parent_id=null,z.push(T)}else{let k=new it(new Map,new Map,{location_id:f,partner_id:h,product_id:-1,year:0,export_value:0,import_value:0});k.product=new on({product_id:-1,name:"All",level:-1,parent_id:-1}),k.product.parent_id=null,z.push(k);let T=ti(s,F=>{var H,E;return(E=(H=F.product)==null?void 0:H.parent_id)!=null?E:-1});if(T.size>1)for(let[F,H]of T){let E=new it(new Map,new Map,{location_id:f,partner_id:h,product_id:F,year:0,export_value:0,import_value:0});E.product=new on({product_id:F,name:"Something",level:0,parent_id:-1}),z.push(E)}}z=z.concat(s),console.log(z);let A=Qc().id(k=>{var T;return(T=k.product)==null?void 0:T.id}).parentId(k=>{var T;return(T=k.product)==null?void 0:T.parent_id})(z);A.sum(k=>Math.max(0,k[c])),th().tile(nh).size([C,w]).padding(2)(A),n(8,S=A.leaves())}},[c,C,w,s,o,d,p,v,S,u,a,f,h,y,m,b,r,i,l,q,B]}class Sl extends je{constructor(t){super(),We(this,t,h0,c0,xe,{data:10})}}function d0(e){let t,n,i,r,s,l;return{c(){t=ee("div"),n=ee("h3"),i=ge("Loading data..."),r=_e(),s=Q("svg"),l=Q("circle"),this.h()},l(o){t=te(o,"DIV",{class:!0});var u=P(t);n=te(u,"H3",{});var a=P(n);i=pe(a,"Loading data..."),a.forEach(I),r=me(u),s=$(u,"svg",{class:!0,viewBox:!0});var f=P(s);l=$(f,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),P(l).forEach(I),f.forEach(I),u.forEach(I),this.h()},h(){_(l,"class","path svelte-jcbfjt"),_(l,"cx","25"),_(l,"cy","25"),_(l,"r","20"),_(l,"fill","none"),_(l,"stroke-width","5"),_(s,"class","spinner svelte-jcbfjt"),_(s,"viewBox","0 0 50 50"),_(t,"class","loading svelte-jcbfjt")},m(o,u){U(o,t,u),R(t,n),R(n,i),R(t,r),R(t,s),R(s,l)},p:ve,i:ve,o:ve,d(o){o&&I(t)}}}function _0(e){var re,D,G,J;let t,n,i,r,s,l,o,u,a,f,h,c,d,y,p,m,b,C,w,v,S,q,B,L,z,A,k,T,F,H,E,N,W;return a=new ll({props:{optionIdentifier:Ml,labelIdentifier:Cl,items:Array.from(e[0].values()),value:e[2]}}),a.$on("select",e[9]),p=new ll({props:{optionIdentifier:Ml,labelIdentifier:Cl,items:Array.from(e[0].values()),value:e[8]}}),p.$on("select",e[10]),z=new Kh({props:{data:{bilateralData:e[5],country1_id:(D=(re=e[2])==null?void 0:re.id)!=null?D:0,country2_id:(J=(G=e[8])==null?void 0:G.id)!=null?J:0,productData:e[1],locationData:e[0],countryColorScale:e[3]}}}),k=new u0({props:{data:{productData:e[1],locationData:e[0],bilateralData:e[5],loadingDrilldown:e[7],productColorScale:e[4],country1:e[2],country2:e[8],countryColorScale:e[3]}}}),H=new Sl({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7],valueField:"export_value"}}}),N=new Sl({props:{data:{locationData:e[0],productData:e[1],productColorScale:e[4],country1:e[2],country2:e[8],drilldownBilateral:e[6],loadingDrilldown:e[7],valueField:"import_value"}}}),{c(){t=ee("div"),n=ee("div"),r=_e(),s=ee("div"),l=ee("span"),o=ge("Country 1"),u=_e(),we(a.$$.fragment),f=_e(),h=ee("div"),c=ee("span"),d=ge("Country 2"),y=_e(),we(p.$$.fragment),m=_e(),b=ee("div"),w=_e(),v=ee("div"),S=_e(),q=ee("div"),B=ee("div"),L=ee("div"),we(z.$$.fragment),A=_e(),we(k.$$.fragment),T=_e(),F=ee("div"),we(H.$$.fragment),E=_e(),we(N.$$.fragment),this.h()},l(M){t=te(M,"DIV",{class:!0});var Y=P(t);n=te(Y,"DIV",{class:!0,style:!0}),P(n).forEach(I),r=me(Y),s=te(Y,"DIV",{class:!0});var ae=P(s);l=te(ae,"SPAN",{class:!0});var he=P(l);o=pe(he,"Country 1"),he.forEach(I),u=me(ae),Oe(a.$$.fragment,ae),ae.forEach(I),f=me(Y),h=te(Y,"DIV",{class:!0});var ce=P(h);c=te(ce,"SPAN",{class:!0});var oe=P(c);d=pe(oe,"Country 2"),oe.forEach(I),y=me(ce),Oe(p.$$.fragment,ce),ce.forEach(I),m=me(Y),b=te(Y,"DIV",{class:!0,style:!0}),P(b).forEach(I),Y.forEach(I),w=me(M),v=te(M,"DIV",{class:!0});var V=P(v);V.forEach(I),S=me(M),q=te(M,"DIV",{id:!0,class:!0});var x=P(q);B=te(x,"DIV",{id:!0,class:!0});var fe=P(B);L=te(fe,"DIV",{class:!0});var Ae=P(L);Oe(z.$$.fragment,Ae),A=me(Ae),Oe(k.$$.fragment,Ae),Ae.forEach(I),T=me(fe),F=te(fe,"DIV",{class:!0});var O=P(F);Oe(H.$$.fragment,O),E=me(O),Oe(N.$$.fragment,O),O.forEach(I),fe.forEach(I),x.forEach(I),this.h()},h(){var M,Y,ae,he;_(n,"class","country-icon svelte-jcbfjt"),_(n,"style",i=`background:${e[3]((Y=(M=e[2])==null?void 0:M.id)!=null?Y:0)}`),_(l,"class","svelte-jcbfjt"),_(s,"class","dropdown svelte-jcbfjt"),_(c,"class","svelte-jcbfjt"),_(h,"class","dropdown svelte-jcbfjt"),_(b,"class","country-icon svelte-jcbfjt"),_(b,"style",C=`background:${e[3]?e[3]((he=(ae=e[8])==null?void 0:ae.id)!=null?he:0):"white"}`),_(t,"class","selectors svelte-jcbfjt"),_(v,"class","svelte-jcbfjt"),_(L,"class","viz-row svelte-jcbfjt"),_(F,"class","viz-row svelte-jcbfjt"),_(B,"id","content"),_(B,"class","svelte-jcbfjt"),_(q,"id","container"),_(q,"class","svelte-jcbfjt")},m(M,Y){U(M,t,Y),R(t,n),R(t,r),R(t,s),R(s,l),R(l,o),R(s,u),be(a,s,null),R(t,f),R(t,h),R(h,c),R(c,d),R(h,y),be(p,h,null),R(t,m),R(t,b),U(M,w,Y),U(M,v,Y),U(M,S,Y),U(M,q,Y),R(q,B),R(B,L),be(z,L,null),R(L,A),be(k,L,null),R(B,T),R(B,F),be(H,F,null),R(F,E),be(N,F,null),W=!0},p(M,Y){var fe,Ae,O,X,ie,Ee,Ne,j;(!W||Y&12&&i!==(i=`background:${M[3]((Ae=(fe=M[2])==null?void 0:fe.id)!=null?Ae:0)}`))&&_(n,"style",i);const ae={};Y&1&&(ae.items=Array.from(M[0].values())),Y&4&&(ae.value=M[2]),a.$set(ae);const he={};Y&1&&(he.items=Array.from(M[0].values())),Y&256&&(he.value=M[8]),p.$set(he),(!W||Y&264&&C!==(C=`background:${M[3]?M[3]((X=(O=M[8])==null?void 0:O.id)!=null?X:0):"white"}`))&&_(b,"style",C);const ce={};Y&303&&(ce.data={bilateralData:M[5],country1_id:(Ee=(ie=M[2])==null?void 0:ie.id)!=null?Ee:0,country2_id:(j=(Ne=M[8])==null?void 0:Ne.id)!=null?j:0,productData:M[1],locationData:M[0],countryColorScale:M[3]}),z.$set(ce);const oe={};Y&447&&(oe.data={productData:M[1],locationData:M[0],bilateralData:M[5],loadingDrilldown:M[7],productColorScale:M[4],country1:M[2],country2:M[8],countryColorScale:M[3]}),k.$set(oe);const V={};Y&471&&(V.data={locationData:M[0],productData:M[1],productColorScale:M[4],country1:M[2],country2:M[8],drilldownBilateral:M[6],loadingDrilldown:M[7],valueField:"export_value"}),H.$set(V);const x={};Y&471&&(x.data={locationData:M[0],productData:M[1],productColorScale:M[4],country1:M[2],country2:M[8],drilldownBilateral:M[6],loadingDrilldown:M[7],valueField:"import_value"}),N.$set(x)},i(M){W||(Z(a.$$.fragment,M),Z(p.$$.fragment,M),Z(z.$$.fragment,M),Z(k.$$.fragment,M),Z(H.$$.fragment,M),Z(N.$$.fragment,M),W=!0)},o(M){ne(a.$$.fragment,M),ne(p.$$.fragment,M),ne(z.$$.fragment,M),ne(k.$$.fragment,M),ne(H.$$.fragment,M),ne(N.$$.fragment,M),W=!1},d(M){M&&I(t),ke(a),ke(p),M&&I(w),M&&I(v),M&&I(S),M&&I(q),ke(z),ke(k),ke(H),ke(N)}}}function m0(e){let t,n,i,r,s,l,o,u,a,f,h;const c=[_0,d0],d=[];function y(p,m){return p[0]&&p[5]&&p[1]&&p[3]?0:1}return u=y(e),a=d[u]=c[u](e),{c(){t=ee("div"),n=ee("h1"),i=ge("Commerce Among Nations"),r=_e(),s=ee("h2"),l=ge("A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),o=_e(),a.c(),f=le(),this.h()},l(p){t=te(p,"DIV",{class:!0});var m=P(t);n=te(m,"H1",{class:!0});var b=P(n);i=pe(b,"Commerce Among Nations"),b.forEach(I),r=me(m),s=te(m,"H2",{class:!0});var C=P(s);l=pe(C,"A Bilateral Trade Data Visualization by Andrew Lee & Franklin Yuan"),C.forEach(I),m.forEach(I),o=me(p),a.l(p),f=le(),this.h()},h(){_(n,"class","svelte-jcbfjt"),_(s,"class","svelte-jcbfjt"),_(t,"class","heading svelte-jcbfjt")},m(p,m){U(p,t,m),R(t,n),R(n,i),R(t,r),R(t,s),R(s,l),U(p,o,m),d[u].m(p,m),U(p,f,m),h=!0},p(p,[m]){let b=u;u=y(p),u===b?d[u].p(p,m):(Me(),ne(d[b],1,1,()=>{d[b]=null}),Ce(),a=d[u],a?a.p(p,m):(a=d[u]=c[u](p),a.c()),Z(a,1),a.m(f.parentNode,f))},i(p){h||(Z(a),h=!0)},o(p){ne(a),h=!1},d(p){p&&I(t),p&&I(o),d[u].d(p),p&&I(f)}}}const Ml="id",Cl="name",g0=231,p0=43;function y0(e,t,n){let i,r;const s=y=>{let p=y.detail;n(2,i=a.get(p.id))},l=y=>{let p=y.detail;n(8,r=a.get(p.id))};let o,u,a=new Map,f=new Map,h,c,d=!1;return kn(async()=>{Promise.all([Jt(`${Wt}/data/location.csv`),Jt(`${Wt}/data/hs_product.csv`),Jt(`${Wt}/data/hs_2010_to_2020.csv`)]).then(([y,p,m])=>{var C;n(0,a=er(y.map(w=>new _h(w)).filter(w=>w.level=="country"),w=>w.id)),n(1,f=er(p.map(w=>new on(w)),w=>w.id));for(let[w,v]of f)v.parent=(C=f.get(v.parent_id))!=null?C:null,f.set(w,v);let b=m.map(w=>new it(a,f,w));n(5,h=ti(b,w=>w.location_id,w=>w.partner_id,w=>w.year)),Vl(m,w=>+w.export_value),n(3,o=ki(a.keys(),Fr)),n(4,u=ki(Array.from(f).map(([w,v])=>v.level).filter(w=>w=="section"),Fr))})}),e.$$.update=()=>{var y,p,m,b;e.$$.dirty&1&&n(2,i=(y=a==null?void 0:a.get(g0))!=null?y:null),e.$$.dirty&1&&n(8,r=(p=a==null?void 0:a.get(p0))!=null?p:null),e.$$.dirty&7&&(n(6,c=null),n(7,d=!0),Jt(`${Wt}/data/${(m=i==null?void 0:i.code)!=null?m:"USA"}/${(b=i==null?void 0:i.code)!=null?b:"USA"}_hs2_2010_to_2020.csv`).then(C=>{n(6,c=ti(C.map(w=>new it(a,f,w)),w=>w.partner_id,w=>w.year)),n(7,d=!1)}))},[a,f,i,o,u,h,c,d,r,s,l]}class k0 extends je{constructor(t){super(),We(this,t,y0,m0,xe,{})}}export{k0 as default};
